/*!
 * 
 *          iclient-leaflet
 *          Copyright© 2000 - 2023 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v11.1.1
 *
 */!function(){var t={6525:function(t){"use strict";function e(t,e){this.x=t,this.y=e}t.exports=e,e.prototype={clone:function(){return new e(this.x,this.y)},add:function(t){return this.clone()._add(t)},sub:function(t){return this.clone()._sub(t)},multByPoint:function(t){return this.clone()._multByPoint(t)},divByPoint:function(t){return this.clone()._divByPoint(t)},mult:function(t){return this.clone()._mult(t)},div:function(t){return this.clone()._div(t)},rotate:function(t){return this.clone()._rotate(t)},rotateAround:function(t,e){return this.clone()._rotateAround(t,e)},matMult:function(t){return this.clone()._matMult(t)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(t){return this.x===t.x&&this.y===t.y},dist:function(t){return Math.sqrt(this.distSqr(t))},distSqr:function(t){var e=t.x-this.x,r=t.y-this.y;return e*e+r*r},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(t){return Math.atan2(this.y-t.y,this.x-t.x)},angleWith:function(t){return this.angleWithSep(t.x,t.y)},angleWithSep:function(t,e){return Math.atan2(this.x*e-this.y*t,this.x*t+this.y*e)},_matMult:function(t){var e=t[0]*this.x+t[1]*this.y,r=t[2]*this.x+t[3]*this.y;return this.x=e,this.y=r,this},_add:function(t){return this.x+=t.x,this.y+=t.y,this},_sub:function(t){return this.x-=t.x,this.y-=t.y,this},_mult:function(t){return this.x*=t,this.y*=t,this},_div:function(t){return this.x/=t,this.y/=t,this},_multByPoint:function(t){return this.x*=t.x,this.y*=t.y,this},_divByPoint:function(t){return this.x/=t.x,this.y/=t.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var t=this.y;return this.y=this.x,this.x=-t,this},_rotate:function(t){var e=Math.cos(t),r=Math.sin(t),n=e*this.x-r*this.y,o=r*this.x+e*this.y;return this.x=n,this.y=o,this},_rotateAround:function(t,e){var r=Math.cos(t),n=Math.sin(t),o=e.x+r*(this.x-e.x)-n*(this.y-e.y),i=e.y+n*(this.x-e.x)+r*(this.y-e.y);return this.x=o,this.y=i,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},e.convert=function(t){return t instanceof e?t:Array.isArray(t)?new e(t[0],t[1]):t}},4721:function(t,e,r){t.exports.VectorTile=r(2473),r(9233),r(5557)},2473:function(t,e,r){"use strict";var n=r(5557);function o(t,e,r){if(3===t){var o=new n(r,r.readVarint()+r.pos);o.length&&(e[o.name]=o)}}t.exports=function(t,e){this.layers=t.readFields(o,{},e)}},9233:function(t,e,r){"use strict";var n=r(6525);function o(t,e,r,n,o){this.properties={},this.extent=r,this.type=0,this._pbf=t,this._geometry=-1,this._keys=n,this._values=o,t.readFields(i,this,e)}function i(t,e,r){1==t?e.id=r.readVarint():2==t?function(t,e){var r=t.readVarint()+t.pos;for(;t.pos<r;){var n=e._keys[t.readVarint()],o=e._values[t.readVarint()];e.properties[n]=o}}(r,e):3==t?e.type=r.readVarint():4==t&&(e._geometry=r.pos)}function a(t){for(var e,r,n=0,o=0,i=t.length,a=i-1;o<i;a=o++)e=t[o],n+=((r=t[a]).x-e.x)*(e.y+r.y);return n}t.exports=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var t=this._pbf;t.pos=this._geometry;for(var e,r=t.readVarint()+t.pos,o=1,i=0,a=0,s=0,l=[];t.pos<r;){if(i<=0){var u=t.readVarint();o=7&u,i=u>>3}if(i--,1===o||2===o)a+=t.readSVarint(),s+=t.readSVarint(),1===o&&(e&&l.push(e),e=[]),e.push(new n(a,s));else{if(7!==o)throw new Error("unknown command "+o);e&&e.push(e[0].clone())}}return e&&l.push(e),l},o.prototype.bbox=function(){var t=this._pbf;t.pos=this._geometry;for(var e=t.readVarint()+t.pos,r=1,n=0,o=0,i=0,a=1/0,s=-1/0,l=1/0,u=-1/0;t.pos<e;){if(n<=0){var c=t.readVarint();r=7&c,n=c>>3}if(n--,1===r||2===r)o+=t.readSVarint(),i+=t.readSVarint(),o<a&&(a=o),o>s&&(s=o),i<l&&(l=i),i>u&&(u=i);else if(7!==r)throw new Error("unknown command "+r)}return[a,l,s,u]},o.prototype.toGeoJSON=function(t,e,r){var n,i,s=this.extent*Math.pow(2,r),l=this.extent*t,u=this.extent*e,c=this.loadGeometry(),f=o.types[this.type];function h(t){for(var e=0;e<t.length;e++){var r=t[e],n=180-360*(r.y+u)/s;t[e]=[360*(r.x+l)/s-180,360/Math.PI*Math.atan(Math.exp(n*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(n=0;n<c.length;n++)p[n]=c[n][0];h(c=p);break;case 2:for(n=0;n<c.length;n++)h(c[n]);break;case 3:for(c=function(t){var e=t.length;if(e<=1)return[t];for(var r,n,o=[],i=0;i<e;i++){var s=a(t[i]);0!==s&&(void 0===n&&(n=s<0),n===s<0?(r&&o.push(r),r=[t[i]]):r.push(t[i]))}r&&o.push(r);return o}(c),n=0;n<c.length;n++)for(i=0;i<c[n].length;i++)h(c[n][i])}1===c.length?c=c[0]:f="Multi"+f;var y={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(y.id=this.id),y}},5557:function(t,e,r){"use strict";var n=r(9233);function o(t,e){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=t,this._keys=[],this._values=[],this._features=[],t.readFields(i,this,e),this.length=this._features.length}function i(t,e,r){15===t?e.version=r.readVarint():1===t?e.name=r.readString():5===t?e.extent=r.readVarint():2===t?e._features.push(r.pos):3===t?e._keys.push(r.readString()):4===t&&e._values.push(function(t){var e=null,r=t.readVarint()+t.pos;for(;t.pos<r;){var n=t.readVarint()>>3;e=1===n?t.readString():2===n?t.readFloat():3===n?t.readDouble():4===n?t.readVarint64():5===n?t.readVarint():6===n?t.readSVarint():7===n?t.readBoolean():null}return e}(r))}t.exports=o,o.prototype.feature=function(t){if(t<0||t>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[t];var e=this._pbf.readVarint()+this._pbf.pos;return new n(this._pbf,e,this.extent,this._keys,this._values)}},5023:function(t,e,r){"use strict";var n=r(6727);t.exports=n},3123:function(t,e,r){"use strict";var n=r(8690);t.exports=n},879:function(t,e,r){"use strict";r(7422);var n=r(97);t.exports=n.Object.assign},3723:function(t,e,r){"use strict";r(4835);var n=r(8384);t.exports=n.f("asyncIterator")},5980:function(t,e,r){"use strict";var n=r(729),o=r(8434),i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not a function")}},7563:function(t,e,r){"use strict";var n=r(691),o=String,i=TypeError;t.exports=function(t){if(n(t))return t;throw i(o(t)+" is not an object")}},8632:function(t,e,r){"use strict";var n=r(6462),o=r(5333),i=r(6803),a=function(t){return function(e,r,a){var s,l=n(e),u=i(l),c=o(a,u);if(t&&r!=r){for(;u>c;)if((s=l[c++])!=s)return!0}else for(;u>c;c++)if((t||c in l)&&l[c]===r)return t||c||0;return!t&&-1}};t.exports={includes:a(!0),indexOf:a(!1)}},2177:function(t,e,r){"use strict";var n=r(9738),o=n({}.toString),i=n("".slice);t.exports=function(t){return i(o(t),8,-1)}},9029:function(t,e,r){"use strict";var n=r(1675),o=r(9402),i=r(7238),a=r(704);t.exports=function(t,e,r){for(var s=o(e),l=a.f,u=i.f,c=0;c<s.length;c++){var f=s[c];n(t,f)||r&&n(r,f)||l(t,f,u(e,f))}}},8268:function(t,e,r){"use strict";var n=r(6539),o=r(704),i=r(4925);t.exports=n?function(t,e,r){return o.f(t,e,i(1,r))}:function(t,e,r){return t[e]=r,t}},4925:function(t){"use strict";t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},7454:function(t,e,r){"use strict";var n=r(729),o=r(704),i=r(7948),a=r(161);t.exports=function(t,e,r,s){s||(s={});var l=s.enumerable,u=void 0!==s.name?s.name:e;if(n(r)&&i(r,u,s),s.global)l?t[e]=r:a(e,r);else{try{s.unsafe?t[e]&&(l=!0):delete t[e]}catch(t){}l?t[e]=r:o.f(t,e,{value:r,enumerable:!1,configurable:!s.nonConfigurable,writable:!s.nonWritable})}return t}},161:function(t,e,r){"use strict";var n=r(5835),o=Object.defineProperty;t.exports=function(t,e){try{o(n,t,{value:e,configurable:!0,writable:!0})}catch(r){n[t]=e}return e}},6539:function(t,e,r){"use strict";var n=r(6583);t.exports=!n(function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})},9967:function(t){"use strict";function e(t){"@babel/helpers - typeof";return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var r="object"==("undefined"==typeof document?"undefined":e(document))&&document.all,n=void 0===r&&void 0!==r;t.exports={all:r,IS_HTMLDDA:n}},3343:function(t,e,r){"use strict";var n=r(5835),o=r(691),i=n.document,a=o(i)&&o(i.createElement);t.exports=function(t){return a?i.createElement(t):{}}},1785:function(t){"use strict";t.exports="undefined"!=typeof navigator&&String(navigator.userAgent)||""},9282:function(t,e,r){"use strict";var n,o,i=r(5835),a=r(1785),s=i.process,l=i.Deno,u=s&&s.versions||l&&l.version,c=u&&u.v8;c&&(o=(n=c.split("."))[0]>0&&n[0]<4?1:+(n[0]+n[1])),!o&&a&&(!(n=a.match(/Edge\/(\d+)/))||n[1]>=74)&&(n=a.match(/Chrome\/(\d+)/))&&(o=+n[1]),t.exports=o},8525:function(t){"use strict";t.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},7926:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(5835),i=r(7238).f,a=r(8268),s=r(7454),l=r(161),u=r(9029),c=r(3175);t.exports=function(t,e){var r,f,h,p,y,d=t.target,b=t.global,v=t.stat;if(r=b?o:v?o[d]||l(d,{}):(o[d]||{}).prototype)for(f in e){if(p=e[f],h=t.dontCallGetSet?(y=i(r,f))&&y.value:r[f],!c(b?f:d+(v?".":"#")+f,t.forced)&&void 0!==h){if(n(p)==n(h))continue;u(p,h)}(t.sham||h&&h.sham)&&a(p,"sham",!0),s(r,f,p,t)}}},6583:function(t){"use strict";t.exports=function(t){try{return!!t()}catch(t){return!0}}},9096:function(t,e,r){"use strict";var n=r(6583);t.exports=!n(function(){var t=function(){}.bind();return"function"!=typeof t||t.hasOwnProperty("prototype")})},5057:function(t,e,r){"use strict";var n=r(9096),o=Function.prototype.call;t.exports=n?o.bind(o):function(){return o.apply(o,arguments)}},1864:function(t,e,r){"use strict";var n=r(6539),o=r(1675),i=Function.prototype,a=n&&Object.getOwnPropertyDescriptor,s=o(i,"name"),l=s&&"something"===function(){}.name,u=s&&(!n||n&&a(i,"name").configurable);t.exports={EXISTS:s,PROPER:l,CONFIGURABLE:u}},9738:function(t,e,r){"use strict";var n=r(9096),o=Function.prototype,i=o.call,a=n&&o.bind.bind(i,i);t.exports=n?a:function(t){return function(){return i.apply(t,arguments)}}},8078:function(t,e,r){"use strict";var n=r(5835),o=r(729);t.exports=function(t,e){return arguments.length<2?(r=n[t],o(r)?r:void 0):n[t]&&n[t][e];var r}},2337:function(t,e,r){"use strict";var n=r(5980),o=r(6254);t.exports=function(t,e){var r=t[e];return o(r)?void 0:n(r)}},5835:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=function(t){return t&&t.Math==Math&&t};t.exports=o("object"==("undefined"==typeof globalThis?"undefined":n(globalThis))&&globalThis)||o("object"==("undefined"==typeof window?"undefined":n(window))&&window)||o("object"==("undefined"==typeof self?"undefined":n(self))&&self)||o("object"==(void 0===r.g?"undefined":n(r.g))&&r.g)||function(){return this}()||this||Function("return this")()},1675:function(t,e,r){"use strict";var n=r(9738),o=r(5825),i=n({}.hasOwnProperty);t.exports=Object.hasOwn||function(t,e){return i(o(t),e)}},940:function(t){"use strict";t.exports={}},2175:function(t,e,r){"use strict";var n=r(6539),o=r(6583),i=r(3343);t.exports=!n&&!o(function(){return 7!=Object.defineProperty(i("div"),"a",{get:function(){return 7}}).a})},5407:function(t,e,r){"use strict";var n=r(9738),o=r(6583),i=r(2177),a=Object,s=n("".split);t.exports=o(function(){return!a("z").propertyIsEnumerable(0)})?function(t){return"String"==i(t)?s(t,""):a(t)}:a},6111:function(t,e,r){"use strict";var n=r(9738),o=r(729),i=r(9700),a=n(Function.toString);o(i.inspectSource)||(i.inspectSource=function(t){return a(t)}),t.exports=i.inspectSource},4751:function(t,e,r){"use strict";var n,o,i,a=r(9801),s=r(5835),l=r(691),u=r(8268),c=r(1675),f=r(9700),h=r(7307),p=r(940),y=s.TypeError,d=s.WeakMap;if(a||f.state){var b=f.state||(f.state=new d);b.get=b.get,b.has=b.has,b.set=b.set,n=function(t,e){if(b.has(t))throw y("Object already initialized");return e.facade=t,b.set(t,e),e},o=function(t){return b.get(t)||{}},i=function(t){return b.has(t)}}else{var v=h("state");p[v]=!0,n=function(t,e){if(c(t,v))throw y("Object already initialized");return e.facade=t,u(t,v,e),e},o=function(t){return c(t,v)?t[v]:{}},i=function(t){return c(t,v)}}t.exports={set:n,get:o,has:i,enforce:function(t){return i(t)?o(t):n(t,{})},getterFor:function(t){return function(e){var r;if(!l(e)||(r=o(e)).type!==t)throw y("Incompatible receiver, "+t+" required");return r}}}},729:function(t,e,r){"use strict";var n=r(9967),o=n.all;t.exports=n.IS_HTMLDDA?function(t){return"function"==typeof t||t===o}:function(t){return"function"==typeof t}},3175:function(t,e,r){"use strict";var n=r(6583),o=r(729),i=/#|\.prototype\./,a=function(t,e){var r=l[s(t)];return r==c||r!=u&&(o(e)?n(e):!!e)},s=a.normalize=function(t){return String(t).replace(i,".").toLowerCase()},l=a.data={},u=a.NATIVE="N",c=a.POLYFILL="P";t.exports=a},6254:function(t){"use strict";t.exports=function(t){return null===t||void 0===t}},691:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(729),i=r(9967),a=i.all;t.exports=i.IS_HTMLDDA?function(t){return"object"==n(t)?null!==t:o(t)||t===a}:function(t){return"object"==n(t)?null!==t:o(t)}},1437:function(t){"use strict";t.exports=!1},4192:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(8078),i=r(729),a=r(5522),s=r(7860),l=Object;t.exports=s?function(t){return"symbol"==n(t)}:function(t){var e=o("Symbol");return i(e)&&a(e.prototype,l(t))}},6803:function(t,e,r){"use strict";var n=r(5108);t.exports=function(t){return n(t.length)}},7948:function(t,e,r){"use strict";var n=r(9738),o=r(6583),i=r(729),a=r(1675),s=r(6539),l=r(1864).CONFIGURABLE,u=r(6111),c=r(4751),f=c.enforce,h=c.get,p=String,y=Object.defineProperty,d=n("".slice),b=n("".replace),v=n([].join),m=s&&!o(function(){return 8!==y(function(){},"length",{value:8}).length}),g=String(String).split("String"),w=t.exports=function(t,e,r){"Symbol("===d(p(e),0,7)&&(e="["+b(p(e),/^Symbol\(([^)]*)\)/,"$1")+"]"),r&&r.getter&&(e="get "+e),r&&r.setter&&(e="set "+e),(!a(t,"name")||l&&t.name!==e)&&(s?y(t,"name",{value:e,configurable:!0}):t.name=e),m&&r&&a(r,"arity")&&t.length!==r.arity&&y(t,"length",{value:r.arity});try{r&&a(r,"constructor")&&r.constructor?s&&y(t,"prototype",{writable:!1}):t.prototype&&(t.prototype=void 0)}catch(t){}var n=f(t);return a(n,"source")||(n.source=v(g,"string"==typeof e?e:"")),t};Function.prototype.toString=w(function(){return i(this)&&h(this).source||u(this)},"toString")},4920:function(t){"use strict";var e=Math.ceil,r=Math.floor;t.exports=Math.trunc||function(t){var n=+t;return(n>0?r:e)(n)}},7328:function(t,e,r){"use strict";var n=r(6539),o=r(9738),i=r(5057),a=r(6583),s=r(5403),l=r(7485),u=r(5339),c=r(5825),f=r(5407),h=Object.assign,p=Object.defineProperty,y=o([].concat);t.exports=!h||a(function(){if(n&&1!==h({b:1},h(p({},"a",{enumerable:!0,get:function(){p(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},r=Symbol();return t[r]=7,"abcdefghijklmnopqrst".split("").forEach(function(t){e[t]=t}),7!=h({},t)[r]||"abcdefghijklmnopqrst"!=s(h({},e)).join("")})?function(t,e){for(var r=c(t),o=arguments.length,a=1,h=l.f,p=u.f;o>a;)for(var d,b=f(arguments[a++]),v=h?y(s(b),h(b)):s(b),m=v.length,g=0;m>g;)d=v[g++],n&&!i(p,b,d)||(r[d]=b[d]);return r}:h},704:function(t,e,r){"use strict";var n=r(6539),o=r(2175),i=r(4821),a=r(7563),s=r(9737),l=TypeError,u=Object.defineProperty,c=Object.getOwnPropertyDescriptor;e.f=n?i?function(t,e,r){if(a(t),e=s(e),a(r),"function"==typeof t&&"prototype"===e&&"value"in r&&"writable"in r&&!r.writable){var n=c(t,e);n&&n.writable&&(t[e]=r.value,r={configurable:"configurable"in r?r.configurable:n.configurable,enumerable:"enumerable"in r?r.enumerable:n.enumerable,writable:!1})}return u(t,e,r)}:u:function(t,e,r){if(a(t),e=s(e),a(r),o)try{return u(t,e,r)}catch(t){}if("get"in r||"set"in r)throw l("Accessors not supported");return"value"in r&&(t[e]=r.value),t}},7238:function(t,e,r){"use strict";var n=r(6539),o=r(5057),i=r(5339),a=r(4925),s=r(6462),l=r(9737),u=r(1675),c=r(2175),f=Object.getOwnPropertyDescriptor;e.f=n?f:function(t,e){if(t=s(t),e=l(e),c)try{return f(t,e)}catch(t){}if(u(t,e))return a(!o(i.f,t,e),t[e])}},5454:function(t,e,r){"use strict";var n=r(497),o=r(8525).concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return n(t,o)}},7485:function(t,e){"use strict";e.f=Object.getOwnPropertySymbols},5522:function(t,e,r){"use strict";var n=r(9738);t.exports=n({}.isPrototypeOf)},497:function(t,e,r){"use strict";var n=r(9738),o=r(1675),i=r(6462),a=r(8632).indexOf,s=r(940),l=n([].push);t.exports=function(t,e){var r,n=i(t),u=0,c=[];for(r in n)!o(s,r)&&o(n,r)&&l(c,r);for(;e.length>u;)o(n,r=e[u++])&&(~a(c,r)||l(c,r));return c}},5403:function(t,e,r){"use strict";var n=r(497),o=r(8525);t.exports=Object.keys||function(t){return n(t,o)}},5339:function(t,e){"use strict";var r={}.propertyIsEnumerable,n=Object.getOwnPropertyDescriptor,o=n&&!r.call({1:2},1);e.f=o?function(t){var e=n(this,t);return!!e&&e.enumerable}:r},2821:function(t,e,r){"use strict";var n=r(5057),o=r(729),i=r(691),a=TypeError;t.exports=function(t,e){var r,s;if("string"===e&&o(r=t.toString)&&!i(s=n(r,t)))return s;if(o(r=t.valueOf)&&!i(s=n(r,t)))return s;if("string"!==e&&o(r=t.toString)&&!i(s=n(r,t)))return s;throw a("Can't convert object to primitive value")}},9402:function(t,e,r){"use strict";var n=r(8078),o=r(9738),i=r(5454),a=r(7485),s=r(7563),l=o([].concat);t.exports=n("Reflect","ownKeys")||function(t){var e=i.f(s(t)),r=a.f;return r?l(e,r(t)):e}},97:function(t,e,r){"use strict";var n=r(5835);t.exports=n},1894:function(t,e,r){"use strict";var n=r(6254),o=TypeError;t.exports=function(t){if(n(t))throw o("Can't call method on "+t);return t}},7307:function(t,e,r){"use strict";var n=r(5464),o=r(6065),i=n("keys");t.exports=function(t){return i[t]||(i[t]=o(t))}},9700:function(t,e,r){"use strict";var n=r(5835),o=r(161),i=n["__core-js_shared__"]||o("__core-js_shared__",{});t.exports=i},5464:function(t,e,r){"use strict";var n=r(1437),o=r(9700);(t.exports=function(t,e){return o[t]||(o[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.32.0",mode:n?"pure":"global",copyright:"© 2014-2023 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.32.0/LICENSE",source:"https://github.com/zloirock/core-js"})},4993:function(t,e,r){"use strict";var n=r(9282),o=r(6583),i=r(5835).String;t.exports=!!Object.getOwnPropertySymbols&&!o(function(){var t=Symbol();return!i(t)||!(Object(t)instanceof Symbol)||!Symbol.sham&&n&&n<41})},5333:function(t,e,r){"use strict";var n=r(1087),o=Math.max,i=Math.min;t.exports=function(t,e){var r=n(t);return r<0?o(r+e,0):i(r,e)}},6462:function(t,e,r){"use strict";var n=r(5407),o=r(1894);t.exports=function(t){return n(o(t))}},1087:function(t,e,r){"use strict";var n=r(4920);t.exports=function(t){var e=+t;return e!=e||0===e?0:n(e)}},5108:function(t,e,r){"use strict";var n=r(1087),o=Math.min;t.exports=function(t){return t>0?o(n(t),9007199254740991):0}},5825:function(t,e,r){"use strict";var n=r(1894),o=Object;t.exports=function(t){return o(n(t))}},1044:function(t,e,r){"use strict";var n=r(5057),o=r(691),i=r(4192),a=r(2337),s=r(2821),l=r(3121),u=TypeError,c=l("toPrimitive");t.exports=function(t,e){if(!o(t)||i(t))return t;var r,l=a(t,c);if(l){if(void 0===e&&(e="default"),r=n(l,t,e),!o(r)||i(r))return r;throw u("Can't convert object to primitive value")}return void 0===e&&(e="number"),s(t,e)}},9737:function(t,e,r){"use strict";var n=r(1044),o=r(4192);t.exports=function(t){var e=n(t,"string");return o(e)?e:e+""}},8434:function(t){"use strict";var e=String;t.exports=function(t){try{return e(t)}catch(t){return"Object"}}},6065:function(t,e,r){"use strict";var n=r(9738),o=0,i=Math.random(),a=n(1..toString);t.exports=function(t){return"Symbol("+(void 0===t?"":t)+")_"+a(++o+i,36)}},7860:function(t,e,r){"use strict";function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(4993);t.exports=o&&!Symbol.sham&&"symbol"==n(Symbol.iterator)},4821:function(t,e,r){"use strict";var n=r(6539),o=r(6583);t.exports=n&&o(function(){return 42!=Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype})},9801:function(t,e,r){"use strict";var n=r(5835),o=r(729),i=n.WeakMap;t.exports=o(i)&&/native code/.test(String(i))},5336:function(t,e,r){"use strict";var n=r(97),o=r(1675),i=r(8384),a=r(704).f;t.exports=function(t){var e=n.Symbol||(n.Symbol={});o(e,t)||a(e,t,{value:i.f(t)})}},8384:function(t,e,r){"use strict";var n=r(3121);e.f=n},3121:function(t,e,r){"use strict";var n=r(5835),o=r(5464),i=r(1675),a=r(6065),s=r(4993),l=r(7860),u=n.Symbol,c=o("wks"),f=l?u.for||u:u&&u.withoutSetter||a;t.exports=function(t){return i(c,t)||(c[t]=s&&i(u,t)?u[t]:f("Symbol."+t)),c[t]}},7422:function(t,e,r){"use strict";var n=r(7926),o=r(7328);n({target:"Object",stat:!0,arity:2,forced:Object.assign!==o},{assign:o})},4835:function(t,e,r){"use strict";r(5336)("asyncIterator")},6727:function(t,e,r){"use strict";var n=r(879);t.exports=n},8690:function(t,e,r){"use strict";var n=r(3723);t.exports=n},5937:function(t){!function(e){"use strict";if(e.__disableNativeFetch||!e.fetch){s.prototype.append=function(t,e){t=i(t),e=a(e);var r=this.map[t];r||(r=[],this.map[t]=r),r.push(e)},s.prototype.delete=function(t){delete this.map[i(t)]},s.prototype.get=function(t){var e=this.map[i(t)];return e?e[0]:null},s.prototype.getAll=function(t){return this.map[i(t)]||[]},s.prototype.has=function(t){return this.map.hasOwnProperty(i(t))},s.prototype.set=function(t,e){this.map[i(t)]=[a(e)]},s.prototype.forEach=function(t,e){Object.getOwnPropertyNames(this.map).forEach(function(r){this.map[r].forEach(function(n){t.call(e,n,r,this)},this)},this)};var r={blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(t){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e},n=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var t=new y(null,{status:0,statusText:""});return t.type="error",t};var o=[301,302,303,307,308];y.redirect=function(t,e){if(-1===o.indexOf(e))throw new RangeError("Invalid status code");return new y(null,{status:e,headers:{location:t}})},e.Headers=s,e.Request=h,e.Response=y,e.fetch=function(t,e){return new Promise(function(n,o){var i;i=h.prototype.isPrototypeOf(t)&&!e?t:new h(t,e);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var t=1223===a.status?204:a.status;if(t<100||t>599){if(l)return;return l=!0,void o(new TypeError("Network request failed"))}var e={status:t,statusText:a.statusText,headers:function(t){var e=new s;return t.getAllResponseHeaders().trim().split("\n").forEach(function(t){var r=t.trim().split(":"),n=r.shift().trim(),o=r.join(":").trim();e.append(n,o)}),e}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},r="response"in a?a.response:a.responseText;l||(l=!0,n(new y(r,e)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,o(new TypeError("Network request failed")))},a.open(i.method,i.url,!0);try{"include"===i.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(t){console&&console.warn&&console.warn("set withCredentials error:"+t)}"responseType"in a&&r.blob&&(a.responseType="blob"),i.headers.forEach(function(t,e){a.setRequestHeader(e,t)}),a.send(void 0===i._bodyInit?null:i._bodyInit)})},e.fetch.polyfill=!0,t.exports&&(t.exports=e.fetch)}function i(t){if("string"!=typeof t&&(t=String(t)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(t))throw new TypeError("Invalid character in header field name");return t.toLowerCase()}function a(t){return"string"!=typeof t&&(t=String(t)),t}function s(t){this.map={},t instanceof s?t.forEach(function(t,e){this.append(e,t)},this):t&&Object.getOwnPropertyNames(t).forEach(function(e){this.append(e,t[e])},this)}function l(t){if(t.bodyUsed)return Promise.reject(new TypeError("Already read"));t.bodyUsed=!0}function u(t){return new Promise(function(e,r){t.onload=function(){e(t.result)},t.onerror=function(){r(t.error)}})}function c(t){var e=new FileReader;return e.readAsArrayBuffer(t),u(e)}function f(){return this.bodyUsed=!1,this._initBody=function(t,e){if(this._bodyInit=t,"string"==typeof t)this._bodyText=t;else if(r.blob&&Blob.prototype.isPrototypeOf(t))this._bodyBlob=t,this._options=e;else if(r.formData&&FormData.prototype.isPrototypeOf(t))this._bodyFormData=t;else if(t){if(!r.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(t))throw new Error("unsupported BodyInit type")}else this._bodyText=""},r.blob?(this.blob=function(){var t=l(this);if(t)return t;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var t,e,r,n,o,i,a,s=l(this);if(s)return s;if(this._bodyBlob)return t=this._bodyBlob,e=this._options,r=new FileReader,n=e.headers.map["content-type"]?e.headers.map["content-type"].toString():"",o=/charset\=[0-9a-zA-Z\-\_]*;?/,i=t.type.match(o)||n.match(o),a=[t],i&&a.push(i[0].replace(/^charset\=/,"").replace(/;$/,"")),r.readAsText.apply(r,a),u(r);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var t=l(this);return t||Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(t,e){var r,o,i=(e=e||{}).body;if(h.prototype.isPrototypeOf(t)){if(t.bodyUsed)throw new TypeError("Already read");this.url=t.url,this.credentials=t.credentials,e.headers||(this.headers=new s(t.headers)),this.method=t.method,this.mode=t.mode,i||(i=t._bodyInit,t.bodyUsed=!0)}else this.url=t;if(this.credentials=e.credentials||this.credentials||"omit",!e.headers&&this.headers||(this.headers=new s(e.headers)),this.method=(r=e.method||this.method||"GET",o=r.toUpperCase(),n.indexOf(o)>-1?o:r),this.mode=e.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&i)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(i,e)}function p(t){var e=new FormData;return t.trim().split("&").forEach(function(t){if(t){var r=t.split("="),n=r.shift().replace(/\+/g," "),o=r.join("=").replace(/\+/g," ");e.append(decodeURIComponent(n),decodeURIComponent(o))}}),e}function y(t,e){e||(e={}),this._initBody(t,e),this.type="default",this.status=e.status,this.ok=this.status>=200&&this.status<300,this.statusText=e.statusText,this.headers=e.headers instanceof s?e.headers:new s(e.headers),this.url=e.url||""}}("undefined"!=typeof self?self:this)},4238:function(t,e){var r,n,o;n=[e,t],void 0===(o="function"==typeof(r=function(t,e){"use strict";var r={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function n(t){try{delete window[t]}catch(e){window[t]=void 0}}function o(t){var e=document.getElementById(t);e&&document.getElementsByTagName("head")[0].removeChild(e)}e.exports=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=t,a=e.timeout||r.timeout,s=e.jsonpCallback||r.jsonpCallback,l=void 0;return new Promise(function(r,u){var c=e.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(t){r({ok:!0,json:function(){return Promise.resolve(t)}}),l&&clearTimeout(l),o(f),n(c)},i+=-1===i.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+i+s+"="+c),e.charset&&h.setAttribute("charset",e.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),l=setTimeout(function(){u(new Error("JSONP request to "+t+" timed out")),n(c),o(f),window[c]=function(){n(c)}},a),h.onerror=function(){u(new Error("JSONP request to "+t+" failed")),n(c),o(f),l&&clearTimeout(l)}})}})?r.apply(e,n):r)||(t.exports=o)},5299:function(t,e){e.read=function(t,e,r,n,o){var i,a,s=8*o-n-1,l=(1<<s)-1,u=l>>1,c=-7,f=r?o-1:0,h=r?-1:1,p=t[e+f];for(f+=h,i=p&(1<<-c)-1,p>>=-c,c+=s;c>0;i=256*i+t[e+f],f+=h,c-=8);for(a=i&(1<<-c)-1,i>>=-c,c+=n;c>0;a=256*a+t[e+f],f+=h,c-=8);if(0===i)i=1-u;else{if(i===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),i-=u}return(p?-1:1)*a*Math.pow(2,i-n)},e.write=function(t,e,r,n,o,i){var a,s,l,u=8*i-o-1,c=(1<<u)-1,f=c>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:i-1,y=n?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(s=isNaN(e)?1:0,a=c):(a=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-a))<1&&(a--,l*=2),(e+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(e*l-1)*Math.pow(2,o),a+=f):(s=e*Math.pow(2,f-1)*Math.pow(2,o),a=0));o>=8;t[r+p]=255&s,p+=y,s/=256,o-=8);for(a=a<<o|s,u+=o;u>0;t[r+p]=255&a,p+=y,a/=256,u-=8);t[r+p-y]|=128*d}},8813:function(t){var e=[],r=[],n="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function o(t,o){if(o=o||{},void 0===t)throw new Error(n);var i,a=!0===o.prepend?"prepend":"append",s=void 0!==o.container?o.container:document.querySelector("head"),l=e.indexOf(s);return-1===l&&(l=e.push(s)-1,r[l]={}),void 0!==r[l]&&void 0!==r[l][a]?i=r[l][a]:(i=r[l][a]=function(){var t=document.createElement("style");return t.setAttribute("type","text/css"),t}(),"prepend"===a?s.insertBefore(i,s.childNodes[0]):s.appendChild(i)),65279===t.charCodeAt(0)&&(t=t.substr(1,t.length)),i.styleSheet?i.styleSheet.cssText+=t:i.textContent+=t,i}t.exports=o,t.exports.insertCss=o},6879:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=r(7099),i="&&",a="||",s="and",l="or",u="=",c="~",f="!"+u,h="!"+c,p=">",y=">=",d="<",b="<=",v="*",m=",",g=".",w="(",_=")",O="where",S={pathway:[],groups:{}},x={},P={},E=console.log;function k(t){var e=T(t,O),r=e[0],n=e[1];S.pathway=T(r,m);for(var o=0,s=S.pathway.length;o<s;o++)S.pathway[o]=T(S.pathway[o],g),S.pathway[o][0]==v&&S.pathway[o].shift(),0===S.pathway[o].length&&S.pathway.splice(o,1);for(var l=-1,P=-1,E=0;E<n.length;){if(n[E]===w)l=E;else if(n[E]===_&&(P=E)>l&&-1!==l){var k="gr_"+(new Date).getTime();S.groups[k]=n.substring(l+1,P),n=n.replace(w+S.groups[k]+_,k),E=-1}E+=1}!function t(e,r){var n=j(r,i),o=j(r,a);if(n!==Number.MAX_VALUE||o!==Number.MAX_VALUE)if(n<o){e.and=e.and||[];var s=T(r,i);e.and.push(s[0]),t(e.and,s[1])}else{e.or=e.or||[];var s=T(r,a);e.or.push(s[0]),t(e.or,s[1])}else S.groups[r]?(r=S.groups[r],t(e,r)):(Array.isArray(e)?e.push(r):e.or=[r],function t(e){for(var r in e)if(e.hasOwnProperty(r))if(Array.isArray(e[r]))t(e[r]);else if("string"==typeof e[r])if(C(e[r],f)){var n=T(e[r],f);e[r]={ne:[n[0],n[1]]}}else if(C(e[r],h)){var n=T(e[r],h);e[r]={nreq:[n[0],n[1]]}}else if(C(e[r],c)){var n=T(e[r],c);e[r]={req:[n[0],n[1]]}}else if(C(e[r],y)){var n=T(e[r],y);e[r]={ge:[n[0],n[1]]}}else if(C(e[r],p)){var n=T(e[r],p);e[r]={gt:[n[0],n[1]]}}else if(C(e[r],b)){var n=T(e[r],b);e[r]={le:[n[0],n[1]]}}else if(C(e[r],d)){var n=T(e[r],d);e[r]={lt:[n[0],n[1]]}}else if(C(e[r],u)){var n=T(e[r],u);e[r]={eq:[n[0],n[1]]}}}(x.or?x.or:x.and))}(x,n)}function j(t,e){var r=t.indexOf(e);return-1===r?Number.MAX_VALUE:r}function T(t,e){return t.split(e).map(function(t){return t.trim()})}function C(t,e){return t.indexOf(e)>-1}function A(t,e){var r=T(e,g),n=t;for(var i in r){if(!n.hasOwnProperty(r[i]))return"";n=n[r[i]]}return n=o.isDate(n)?n.valueOf():o.isDateString(n)?o.parseDateFromString(n):n.toString()}function M(t,e){var r=!1;for(var n in t){if(r=r||(n===s?R:n===l?M:L)(t[n],e),P.trace&&E(S.step,"======((( or",t[n],r),r)return r}return r}function R(t,e){var r=!0;for(var n in t){if(r=r&&(n===s?R:n===l?M:L)(t[n],e),P.trace&&E(S.step,"======((( and",t[n],r),!r)return r}return r}function L(t,e){if(S.step+=1,t.or){var r=M(t.or,e);return P.trace&&E(S.step,"OR",t,r),r}if(t.and){r=R(t.and,e);return P.trace&&E(S.step,"AND",t,r),r}if("object"===n(t))return t.eq?A(e,t.eq[0])===t.eq[1]:t.ne?A(e,t.ne[0])!==t.ne[1]:t.req?C(A(e,t.req[0]),t.req[1]):t.nreq?!C(A(e,t.nreq[0]),t.nreq[1]):t.gt?A(e,t.gt[0])>t.gt[1]:t.ge?A(e,t.ge[0])>=t.ge[1]:t.lt?A(e,t.lt[0])<t.lt[1]:t.le?A(e,t.le[0])<=t.le[1]:L(t,e)}function N(t,e,r){return S={pathway:[],groups:{},step:0},x={},P=r=r||{trace:!1},k(e),(n=function(t){var e=[];for(var r in t)L(x,t[r])&&e.push(t[r]);return e}(t))&&S.pathway.length>0?n.map(function(t){for(var e={},r=0,n=S.pathway.length;r<n;r++){var o=S.pathway[r].join(g);e[o]=A(t,o)}return e}):n;var n}void 0!==t.exports&&(t.exports=N),"undefined"!=typeof window&&(window.Query=N)},7099:function(t){function e(t){return Object.prototype.toString.call(t)}function r(t){return"[object String]"===e(t)}t.exports={getObjectType:e,isDate:function(t){return"[object Date]"===e(t)},isString:r,isDateString:function(t){return r(t)&&!isNaN(Date.parse(t))},parseDateFromString:function(t){return Date.parse(t)},isNumber:function(t){return"number"==typeof t}}},2138:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="__lodash_hash_undefined__",a=9007199254740991,s="[object Arguments]",l="[object Boolean]",u="[object Date]",c="[object Function]",f="[object GeneratorFunction]",h="[object Map]",p="[object Number]",y="[object Object]",d="[object RegExp]",b="[object Set]",v="[object String]",m="[object Symbol]",g="[object ArrayBuffer]",w="[object DataView]",_="[object Float32Array]",O="[object Float64Array]",S="[object Int8Array]",x="[object Int16Array]",P="[object Int32Array]",E="[object Uint8Array]",k="[object Uint8ClampedArray]",j="[object Uint16Array]",T="[object Uint32Array]",C=/\w*$/,A=/^\[object .+?Constructor\]$/,M=/^(?:0|[1-9]\d*)$/,R={};R[s]=R["[object Array]"]=R[g]=R[w]=R[l]=R[u]=R[_]=R[O]=R[S]=R[x]=R[P]=R[h]=R[p]=R[y]=R[d]=R[b]=R[v]=R[m]=R[E]=R[k]=R[j]=R[T]=!0,R["[object Error]"]=R[c]=R["[object WeakMap]"]=!1;var L="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,N="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,I=L||N||Function("return this")(),D="object"==n(e)&&e&&!e.nodeType&&e,F=D&&"object"==n(t)&&t&&!t.nodeType&&t,B=F&&F.exports===D;function G(t,e){return t.set(e[0],e[1]),t}function U(t,e){return t.add(e),t}function z(t,e,r,n){var o=-1,i=t?t.length:0;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function V(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function J(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function q(t,e){return function(r){return t(e(r))}}function H(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var W,Y=Array.prototype,X=Function.prototype,Q=Object.prototype,Z=I["__core-js_shared__"],K=(W=/[^.]+$/.exec(Z&&Z.keys&&Z.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",$=X.toString,tt=Q.hasOwnProperty,et=Q.toString,rt=RegExp("^"+$.call(tt).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nt=B?I.Buffer:void 0,ot=I.Symbol,it=I.Uint8Array,at=q(Object.getPrototypeOf,Object),st=Object.create,lt=Q.propertyIsEnumerable,ut=Y.splice,ct=Object.getOwnPropertySymbols,ft=nt?nt.isBuffer:void 0,ht=q(Object.keys,Object),pt=Ft(I,"DataView"),yt=Ft(I,"Map"),dt=Ft(I,"Promise"),bt=Ft(I,"Set"),vt=Ft(I,"WeakMap"),mt=Ft(Object,"create"),gt=Vt(pt),wt=Vt(yt),_t=Vt(dt),Ot=Vt(bt),St=Vt(vt),xt=ot?ot.prototype:void 0,Pt=xt?xt.valueOf:void 0;function Et(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function kt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){this.__data__=new kt(t)}function Ct(t,e){var r=qt(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&Ht(t)}(t)&&tt.call(t,"callee")&&(!lt.call(t,"callee")||et.call(t)==s)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,i=!!o;for(var a in t)!e&&!tt.call(t,a)||i&&("length"==a||Ut(a,o))||r.push(a);return r}function At(t,e,r){var n=t[e];tt.call(t,e)&&Jt(n,r)&&(void 0!==r||e in t)||(t[e]=r)}function Mt(t,e){for(var r=t.length;r--;)if(Jt(t[r][0],e))return r;return-1}function Rt(t,e,r,n,o,i,a){var A;if(n&&(A=i?n(t,o,i,a):n(t)),void 0!==A)return A;if(!Xt(t))return t;var M=qt(t);if(M){if(A=function(t){var e=t.length,r=t.constructor(e);e&&"string"==typeof t[0]&&tt.call(t,"index")&&(r.index=t.index,r.input=t.input);return r}(t),!e)return function(t,e){var r=-1,n=t.length;e||(e=Array(n));for(;++r<n;)e[r]=t[r];return e}(t,A)}else{var L=Gt(t),N=L==c||L==f;if(Wt(t))return function(t,e){if(e)return t.slice();var r=new t.constructor(t.length);return t.copy(r),r}(t,e);if(L==y||L==s||N&&!i){if(V(t))return i?t:{};if(A=function(t){return"function"!=typeof t.constructor||zt(t)?{}:(e=at(t),Xt(e)?st(e):{});var e}(N?{}:t),!e)return function(t,e){return It(t,Bt(t),e)}(t,function(t,e){return t&&It(e,Qt(e),t)}(A,t))}else{if(!R[L])return i?t:{};A=function(t,e,r,n){var o=t.constructor;switch(e){case g:return Nt(t);case l:case u:return new o(+t);case w:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,n);case _:case O:case S:case x:case P:case E:case k:case j:case T:return function(t,e){var r=e?Nt(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,n);case h:return function(t,e,r){return z(e?r(J(t),!0):J(t),G,new t.constructor)}(t,n,r);case p:case v:return new o(t);case d:return(s=new(a=t).constructor(a.source,C.exec(a))).lastIndex=a.lastIndex,s;case b:return function(t,e,r){return z(e?r(H(t),!0):H(t),U,new t.constructor)}(t,n,r);case m:return i=t,Pt?Object(Pt.call(i)):{}}var i;var a,s}(t,L,Rt,e)}}a||(a=new Tt);var I=a.get(t);if(I)return I;if(a.set(t,A),!M)var D=r?function(t){return function(t,e,r){var n=e(t);return qt(t)?n:function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}(n,r(t))}(t,Qt,Bt)}(t):Qt(t);return function(t,e){for(var r=-1,n=t?t.length:0;++r<n&&!1!==e(t[r],r,t););}(D||t,function(o,i){D&&(o=t[i=o]),At(A,i,Rt(o,e,r,n,i,t,a))}),A}function Lt(t){return!(!Xt(t)||K&&K in t)&&(Yt(t)||V(t)?rt:A).test(Vt(t))}function Nt(t){var e=new t.constructor(t.byteLength);return new it(e).set(new it(t)),e}function It(t,e,r,n){r||(r={});for(var o=-1,i=e.length;++o<i;){var a=e[o],s=n?n(r[a],t[a],a,r,t):void 0;At(r,a,void 0===s?t[a]:s)}return r}function Dt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function Ft(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Lt(r)?r:void 0}Et.prototype.clear=function(){this.__data__=mt?mt(null):{}},Et.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},Et.prototype.get=function(t){var e=this.__data__;if(mt){var r=e[t];return r===i?void 0:r}return tt.call(e,t)?e[t]:void 0},Et.prototype.has=function(t){var e=this.__data__;return mt?void 0!==e[t]:tt.call(e,t)},Et.prototype.set=function(t,e){return this.__data__[t]=mt&&void 0===e?i:e,this},kt.prototype.clear=function(){this.__data__=[]},kt.prototype.delete=function(t){var e=this.__data__,r=Mt(e,t);return!(r<0||(r==e.length-1?e.pop():ut.call(e,r,1),0))},kt.prototype.get=function(t){var e=this.__data__,r=Mt(e,t);return r<0?void 0:e[r][1]},kt.prototype.has=function(t){return Mt(this.__data__,t)>-1},kt.prototype.set=function(t,e){var r=this.__data__,n=Mt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},jt.prototype.clear=function(){this.__data__={hash:new Et,map:new(yt||kt),string:new Et}},jt.prototype.delete=function(t){return Dt(this,t).delete(t)},jt.prototype.get=function(t){return Dt(this,t).get(t)},jt.prototype.has=function(t){return Dt(this,t).has(t)},jt.prototype.set=function(t,e){return Dt(this,t).set(t,e),this},Tt.prototype.clear=function(){this.__data__=new kt},Tt.prototype.delete=function(t){return this.__data__.delete(t)},Tt.prototype.get=function(t){return this.__data__.get(t)},Tt.prototype.has=function(t){return this.__data__.has(t)},Tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof kt){var n=r.__data__;if(!yt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new jt(n)}return r.set(t,e),this};var Bt=ct?q(ct,Object):function(){return[]},Gt=function(t){return et.call(t)};function Ut(t,e){return!!(e=null==e?a:e)&&("number"==typeof t||M.test(t))&&t>-1&&t%1==0&&t<e}function zt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Q)}function Vt(t){if(null!=t){try{return $.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Jt(t,e){return t===e||t!=t&&e!=e}(pt&&Gt(new pt(new ArrayBuffer(1)))!=w||yt&&Gt(new yt)!=h||dt&&"[object Promise]"!=Gt(dt.resolve())||bt&&Gt(new bt)!=b||vt&&"[object WeakMap]"!=Gt(new vt))&&(Gt=function(t){var e=et.call(t),r=e==y?t.constructor:void 0,n=r?Vt(r):void 0;if(n)switch(n){case gt:return w;case wt:return h;case _t:return"[object Promise]";case Ot:return b;case St:return"[object WeakMap]"}return e});var qt=Array.isArray;function Ht(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=a}(t.length)&&!Yt(t)}var Wt=ft||function(){return!1};function Yt(t){var e=Xt(t)?et.call(t):"";return e==c||e==f}function Xt(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function Qt(t){return Ht(t)?Ct(t):function(t){if(!zt(t))return ht(t);var e=[];for(var r in Object(t))tt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)}t.exports=function(t){return Rt(t,!0,!0)}},7820:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var o=9007199254740991,i="[object Arguments]",a="[object Function]",s="[object GeneratorFunction]",l="[object Map]",u="[object Set]",c=/^\[object .+?Constructor\]$/,f=/^(?:0|[1-9]\d*)$/,h="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,p="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,y=h||p||Function("return this")();function d(t,e){return function(t,e){for(var r=-1,n=t?t.length:0,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}(e,function(e){return[e,t[e]]})}var b,v,m,g=Function.prototype,w=Object.prototype,_=y["__core-js_shared__"],O=(b=/[^.]+$/.exec(_&&_.keys&&_.keys.IE_PROTO||""))?"Symbol(src)_1."+b:"",S=g.toString,x=w.hasOwnProperty,P=w.toString,E=RegExp("^"+S.call(x).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),k=w.propertyIsEnumerable,j=(v=Object.keys,m=Object,function(t){return v(m(t))}),T=z(y,"DataView"),C=z(y,"Map"),A=z(y,"Promise"),M=z(y,"Set"),R=z(y,"WeakMap"),L=q(T),N=q(C),I=q(A),D=q(M),F=q(R);function B(t,e){var r=H(t)||function(t){return function(t){return function(t){return!!t&&"object"==n(t)}(t)&&W(t)}(t)&&x.call(t,"callee")&&(!k.call(t,"callee")||P.call(t)==i)}(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],o=r.length,a=!!o;for(var s in t)!e&&!x.call(t,s)||a&&("length"==s||J(s,o))||r.push(s);return r}function G(t){return!(!X(t)||O&&O in t)&&(Y(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t)?E:c).test(q(t))}function U(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||w,e!==n)return j(t);var e,r,n,o=[];for(var i in Object(t))x.call(t,i)&&"constructor"!=i&&o.push(i);return o}function z(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return G(r)?r:void 0}var V=function(t){return P.call(t)};function J(t,e){return!!(e=null==e?o:e)&&("number"==typeof t||f.test(t))&&t>-1&&t%1==0&&t<e}function q(t){if(null!=t){try{return S.call(t)}catch(t){}try{return t+""}catch(t){}}return""}(T&&"[object DataView]"!=V(new T(new ArrayBuffer(1)))||C&&V(new C)!=l||A&&"[object Promise]"!=V(A.resolve())||M&&V(new M)!=u||R&&"[object WeakMap]"!=V(new R))&&(V=function(t){var e=P.call(t),r="[object Object]"==e?t.constructor:void 0,n=r?q(r):void 0;if(n)switch(n){case L:return"[object DataView]";case N:return l;case I:return"[object Promise]";case D:return u;case F:return"[object WeakMap]"}return e});var H=Array.isArray;function W(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=o}(t.length)&&!Y(t)}function Y(t){var e=X(t)?P.call(t):"";return e==a||e==s}function X(t){var e=n(t);return!!t&&("object"==e||"function"==e)}var Q,Z=(Q=function(t){return W(t)?B(t):U(t)},function(t){var e,r,n,o=V(t);return o==l?(e=t,r=-1,n=Array(e.size),e.forEach(function(t,e){n[++r]=[e,t]}),n):o==u?function(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=[t,t]}),r}(t):d(t,Q(t))});t.exports=Z},9819:function(t,e,r){function n(t){"@babel/helpers - typeof";return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}t=r.nmd(t);var o=200,i="Expected a function",a="__lodash_hash_undefined__",s=1,l=2,u=1/0,c=9007199254740991,f="[object Arguments]",h="[object Array]",p="[object Boolean]",y="[object Date]",d="[object Error]",b="[object Function]",v="[object GeneratorFunction]",m="[object Map]",g="[object Number]",w="[object Object]",_="[object RegExp]",O="[object Set]",S="[object String]",x="[object Symbol]",P="[object ArrayBuffer]",E="[object DataView]",k=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,j=/^\w*$/,T=/^\./,C=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,A=/\\(\\)?/g,M=/^\[object .+?Constructor\]$/,R=/^(?:0|[1-9]\d*)$/,L={};L["[object Float32Array]"]=L["[object Float64Array]"]=L["[object Int8Array]"]=L["[object Int16Array]"]=L["[object Int32Array]"]=L["[object Uint8Array]"]=L["[object Uint8ClampedArray]"]=L["[object Uint16Array]"]=L["[object Uint32Array]"]=!0,L[f]=L[h]=L[P]=L[p]=L[E]=L[y]=L[d]=L[b]=L[m]=L[g]=L[w]=L[_]=L[O]=L[S]=L["[object WeakMap]"]=!1;var N="object"==(void 0===r.g?"undefined":n(r.g))&&r.g&&r.g.Object===Object&&r.g,I="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,D=N||I||Function("return this")(),F="object"==n(e)&&e&&!e.nodeType&&e,B=F&&"object"==n(t)&&t&&!t.nodeType&&t,G=B&&B.exports===F&&N.process,U=function(){try{return G&&G.binding("util")}catch(t){}}(),z=U&&U.isTypedArray;function V(t,e){return!!(t?t.length:0)&&function(t,e,r){if(e!=e)return function(t,e,r,n){var o=t.length,i=r+(n?1:-1);for(;n?i--:++i<o;)if(e(t[i],i,t))return i;return-1}(t,H,r);var n=r-1,o=t.length;for(;++n<o;)if(t[n]===e)return n;return-1}(t,e,0)>-1}function J(t,e,r){for(var n=-1,o=t?t.length:0;++n<o;)if(r(e,t[n]))return!0;return!1}function q(t,e){for(var r=-1,n=t?t.length:0;++r<n;)if(e(t[r],r,t))return!0;return!1}function H(t){return t!=t}function W(t,e){return t.has(e)}function Y(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}function X(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Q(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}var Z,K,$,tt=Array.prototype,et=Function.prototype,rt=Object.prototype,nt=D["__core-js_shared__"],ot=(Z=/[^.]+$/.exec(nt&&nt.keys&&nt.keys.IE_PROTO||""))?"Symbol(src)_1."+Z:"",it=et.toString,at=rt.hasOwnProperty,st=rt.toString,lt=RegExp("^"+it.call(at).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ut=D.Symbol,ct=D.Uint8Array,ft=rt.propertyIsEnumerable,ht=tt.splice,pt=(K=Object.keys,$=Object,function(t){return K($(t))}),yt=qt(D,"DataView"),dt=qt(D,"Map"),bt=qt(D,"Promise"),vt=qt(D,"Set"),mt=qt(D,"WeakMap"),gt=qt(Object,"create"),wt=$t(yt),_t=$t(dt),Ot=$t(bt),St=$t(vt),xt=$t(mt),Pt=ut?ut.prototype:void 0,Et=Pt?Pt.valueOf:void 0,kt=Pt?Pt.toString:void 0;function jt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Tt(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Ct(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function At(t){var e=-1,r=t?t.length:0;for(this.__data__=new Ct;++e<r;)this.add(t[e])}function Mt(t){this.__data__=new Tt(t)}function Rt(t,e){var r=ne(t)||re(t)?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],n=r.length,o=!!n;for(var i in t)!e&&!at.call(t,i)||o&&("length"==i||Wt(i,n))||r.push(i);return r}function Lt(t,e){for(var r=t.length;r--;)if(ee(t[r][0],e))return r;return-1}function Nt(t,e){for(var r=0,n=(e=Yt(e,t)?[e]:Ut(e)).length;null!=t&&r<n;)t=t[Kt(e[r++])];return r&&r==n?t:void 0}function It(t,e){return null!=t&&e in Object(t)}function Dt(t,e,r,n,o){return t===e||(null==t||null==e||!se(t)&&!le(e)?t!=t&&e!=e:function(t,e,r,n,o,i){var a=ne(t),u=ne(e),c=h,b=h;a||(c=(c=Ht(t))==f?w:c);u||(b=(b=Ht(e))==f?w:b);var v=c==w&&!Y(t),k=b==w&&!Y(e),j=c==b;if(j&&!v)return i||(i=new Mt),a||ce(t)?Vt(t,e,r,n,o,i):function(t,e,r,n,o,i,a){switch(r){case E:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case P:return!(t.byteLength!=e.byteLength||!n(new ct(t),new ct(e)));case p:case y:case g:return ee(+t,+e);case d:return t.name==e.name&&t.message==e.message;case _:case S:return t==e+"";case m:var u=X;case O:var c=i&l;if(u||(u=Q),t.size!=e.size&&!c)return!1;var f=a.get(t);if(f)return f==e;i|=s,a.set(t,e);var h=Vt(u(t),u(e),n,o,i,a);return a.delete(t),h;case x:if(Et)return Et.call(t)==Et.call(e)}return!1}(t,e,c,r,n,o,i);if(!(o&l)){var T=v&&at.call(t,"__wrapped__"),C=k&&at.call(e,"__wrapped__");if(T||C){var A=T?t.value():t,M=C?e.value():e;return i||(i=new Mt),r(A,M,n,o,i)}}if(!j)return!1;return i||(i=new Mt),function(t,e,r,n,o,i){var a=o&l,s=fe(t),u=s.length,c=fe(e).length;if(u!=c&&!a)return!1;for(var f=u;f--;){var h=s[f];if(!(a?h in e:at.call(e,h)))return!1}var p=i.get(t);if(p&&i.get(e))return p==e;var y=!0;i.set(t,e),i.set(e,t);for(var d=a;++f<u;){h=s[f];var b=t[h],v=e[h];if(n)var m=a?n(v,b,h,e,t,i):n(b,v,h,t,e,i);if(!(void 0===m?b===v||r(b,v,n,o,i):m)){y=!1;break}d||(d="constructor"==h)}if(y&&!d){var g=t.constructor,w=e.constructor;g!=w&&"constructor"in t&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof w&&w instanceof w)&&(y=!1)}return i.delete(t),i.delete(e),y}(t,e,r,n,o,i)}(t,e,Dt,r,n,o))}function Ft(t){return!(!se(t)||ot&&ot in t)&&(ie(t)||Y(t)?lt:M).test($t(t))}function Bt(t){return"function"==typeof t?t:null==t?he:"object"==n(t)?ne(t)?function(t,e){if(Yt(t)&&Xt(e))return Qt(Kt(t),e);return function(r){var n=function(t,e,r){var n=null==t?void 0:Nt(t,e);return void 0===n?r:n}(r,t);return void 0===n&&n===e?function(t,e){return null!=t&&function(t,e,r){var n,o=-1,i=(e=Yt(e,t)?[e]:Ut(e)).length;for(;++o<i;){var a=Kt(e[o]);if(!(n=null!=t&&r(t,a)))break;t=t[a]}if(n)return n;return!!(i=t?t.length:0)&&ae(i)&&Wt(a,i)&&(ne(t)||re(t))}(t,e,It)}(r,t):Dt(e,n,void 0,s|l)}}(t[0],t[1]):function(t){var e=function(t){var e=fe(t),r=e.length;for(;r--;){var n=e[r],o=t[n];e[r]=[n,o,Xt(o)]}return e}(t);if(1==e.length&&e[0][2])return Qt(e[0][0],e[0][1]);return function(r){return r===t||function(t,e,r,n){var o=r.length,i=o,a=!n;if(null==t)return!i;for(t=Object(t);o--;){var u=r[o];if(a&&u[2]?u[1]!==t[u[0]]:!(u[0]in t))return!1}for(;++o<i;){var c=(u=r[o])[0],f=t[c],h=u[1];if(a&&u[2]){if(void 0===f&&!(c in t))return!1}else{var p=new Mt;if(n)var y=n(f,h,c,t,e,p);if(!(void 0===y?Dt(h,f,n,s|l,p):y))return!1}}return!0}(r,t,e)}}(t):Yt(e=t)?(r=Kt(e),function(t){return null==t?void 0:t[r]}):function(t){return function(e){return Nt(e,t)}}(e);var e,r}function Gt(t){if(r=(e=t)&&e.constructor,n="function"==typeof r&&r.prototype||rt,e!==n)return pt(t);var e,r,n,o=[];for(var i in Object(t))at.call(t,i)&&"constructor"!=i&&o.push(i);return o}function Ut(t){return ne(t)?t:Zt(t)}jt.prototype.clear=function(){this.__data__=gt?gt(null):{}},jt.prototype.delete=function(t){return this.has(t)&&delete this.__data__[t]},jt.prototype.get=function(t){var e=this.__data__;if(gt){var r=e[t];return r===a?void 0:r}return at.call(e,t)?e[t]:void 0},jt.prototype.has=function(t){var e=this.__data__;return gt?void 0!==e[t]:at.call(e,t)},jt.prototype.set=function(t,e){return this.__data__[t]=gt&&void 0===e?a:e,this},Tt.prototype.clear=function(){this.__data__=[]},Tt.prototype.delete=function(t){var e=this.__data__,r=Lt(e,t);return!(r<0||(r==e.length-1?e.pop():ht.call(e,r,1),0))},Tt.prototype.get=function(t){var e=this.__data__,r=Lt(e,t);return r<0?void 0:e[r][1]},Tt.prototype.has=function(t){return Lt(this.__data__,t)>-1},Tt.prototype.set=function(t,e){var r=this.__data__,n=Lt(r,t);return n<0?r.push([t,e]):r[n][1]=e,this},Ct.prototype.clear=function(){this.__data__={hash:new jt,map:new(dt||Tt),string:new jt}},Ct.prototype.delete=function(t){return Jt(this,t).delete(t)},Ct.prototype.get=function(t){return Jt(this,t).get(t)},Ct.prototype.has=function(t){return Jt(this,t).has(t)},Ct.prototype.set=function(t,e){return Jt(this,t).set(t,e),this},At.prototype.add=At.prototype.push=function(t){return this.__data__.set(t,a),this},At.prototype.has=function(t){return this.__data__.has(t)},Mt.prototype.clear=function(){this.__data__=new Tt},Mt.prototype.delete=function(t){return this.__data__.delete(t)},Mt.prototype.get=function(t){return this.__data__.get(t)},Mt.prototype.has=function(t){return this.__data__.has(t)},Mt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof Tt){var n=r.__data__;if(!dt||n.length<o-1)return n.push([t,e]),this;r=this.__data__=new Ct(n)}return r.set(t,e),this};var zt=vt&&1/Q(new vt([,-0]))[1]==u?function(t){return new vt(t)}:function(){};function Vt(t,e,r,n,o,i){var a=o&l,u=t.length,c=e.length;if(u!=c&&!(a&&c>u))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var h=-1,p=!0,y=o&s?new At:void 0;for(i.set(t,e),i.set(e,t);++h<u;){var d=t[h],b=e[h];if(n)var v=a?n(b,d,h,e,t,i):n(d,b,h,t,e,i);if(void 0!==v){if(v)continue;p=!1;break}if(y){if(!q(e,function(t,e){if(!y.has(e)&&(d===t||r(d,t,n,o,i)))return y.add(e)})){p=!1;break}}else if(d!==b&&!r(d,b,n,o,i)){p=!1;break}}return i.delete(t),i.delete(e),p}function Jt(t,e){var r,o,i=t.__data__;return("string"==(o=n(r=e))||"number"==o||"symbol"==o||"boolean"==o?"__proto__"!==r:null===r)?i["string"==typeof e?"string":"hash"]:i.map}function qt(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return Ft(r)?r:void 0}var Ht=function(t){return st.call(t)};function Wt(t,e){return!!(e=null==e?c:e)&&("number"==typeof t||R.test(t))&&t>-1&&t%1==0&&t<e}function Yt(t,e){if(ne(t))return!1;var r=n(t);return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!ue(t))||(j.test(t)||!k.test(t)||null!=e&&t in Object(e))}function Xt(t){return t==t&&!se(t)}function Qt(t,e){return function(r){return null!=r&&(r[t]===e&&(void 0!==e||t in Object(r)))}}(yt&&Ht(new yt(new ArrayBuffer(1)))!=E||dt&&Ht(new dt)!=m||bt&&"[object Promise]"!=Ht(bt.resolve())||vt&&Ht(new vt)!=O||mt&&"[object WeakMap]"!=Ht(new mt))&&(Ht=function(t){var e=st.call(t),r=e==w?t.constructor:void 0,n=r?$t(r):void 0;if(n)switch(n){case wt:return E;case _t:return m;case Ot:return"[object Promise]";case St:return O;case xt:return"[object WeakMap]"}return e});var Zt=te(function(t){var e;t=null==(e=t)?"":function(t){if("string"==typeof t)return t;if(ue(t))return kt?kt.call(t):"";var e=t+"";return"0"==e&&1/t==-u?"-0":e}(e);var r=[];return T.test(t)&&r.push(""),t.replace(C,function(t,e,n,o){r.push(n?o.replace(A,"$1"):e||t)}),r});function Kt(t){if("string"==typeof t||ue(t))return t;var e=t+"";return"0"==e&&1/t==-u?"-0":e}function $t(t){if(null!=t){try{return it.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function te(t,e){if("function"!=typeof t||e&&"function"!=typeof e)throw new TypeError(i);var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(te.Cache||Ct),r}function ee(t,e){return t===e||t!=t&&e!=e}function re(t){return function(t){return le(t)&&oe(t)}(t)&&at.call(t,"callee")&&(!ft.call(t,"callee")||st.call(t)==f)}te.Cache=Ct;var ne=Array.isArray;function oe(t){return null!=t&&ae(t.length)&&!ie(t)}function ie(t){var e=se(t)?st.call(t):"";return e==b||e==v}function ae(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function se(t){var e=n(t);return!!t&&("object"==e||"function"==e)}function le(t){return!!t&&"object"==n(t)}function ue(t){return"symbol"==n(t)||le(t)&&st.call(t)==x}var ce=z?function(t){return function(e){return t(e)}}(z):function(t){return le(t)&&ae(t.length)&&!!L[st.call(t)]};function fe(t){return oe(t)?Rt(t):Gt(t)}function he(t){return t}t.exports=function(t,e){return t&&t.length?function(t,e,r){var n=-1,i=V,a=t.length,s=!0,l=[],u=l;if(r)s=!1,i=J;else if(a>=o){var c=e?null:zt(t);if(c)return Q(c);s=!1,i=W,u=new At}else u=e?[]:l;t:for(;++n<a;){var f=t[n],h=e?e(f):f;if(f=r||0!==f?f:0,s&&h==h){for(var p=u.length;p--;)if(u[p]===h)continue t;e&&u.push(h),l.push(f)}else i(u,h,r)||(u!==l&&u.push(h),l.push(f))}return l}(t,Bt(e)):[]}},1943:function(t,e,r){"use strict";t.exports=o;var n=r(5299);function o(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var i="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===o.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,r){return r?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function l(t,e,r){var n=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));r.realloc(n);for(var o=r.pos-1;o>=t;o--)r.buf[o+n]=r.buf[o]}function u(t,e){for(var r=0;r<t.length;r++)e.writeVarint(t[r])}function c(t,e){for(var r=0;r<t.length;r++)e.writeSVarint(t[r])}function f(t,e){for(var r=0;r<t.length;r++)e.writeFloat(t[r])}function h(t,e){for(var r=0;r<t.length;r++)e.writeDouble(t[r])}function p(t,e){for(var r=0;r<t.length;r++)e.writeBoolean(t[r])}function y(t,e){for(var r=0;r<t.length;r++)e.writeFixed32(t[r])}function d(t,e){for(var r=0;r<t.length;r++)e.writeSFixed32(t[r])}function b(t,e){for(var r=0;r<t.length;r++)e.writeFixed64(t[r])}function v(t,e){for(var r=0;r<t.length;r++)e.writeSFixed64(t[r])}function m(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function g(t,e,r){t[r]=e,t[r+1]=e>>>8,t[r+2]=e>>>16,t[r+3]=e>>>24}function w(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}o.prototype={destroy:function(){this.buf=null},readFields:function(t,e,r){for(r=r||this.length;this.pos<r;){var n=this.readVarint(),o=n>>3,i=this.pos;this.type=7&n,t(o,e,this),this.pos===i&&this.skip(n)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=m(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=w(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=m(this.buf,this.pos)+4294967296*m(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=m(this.buf,this.pos)+4294967296*w(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=n.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=n.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,r,n=this.buf;return e=127&(r=n[this.pos++]),r<128?e:(e|=(127&(r=n[this.pos++]))<<7,r<128?e:(e|=(127&(r=n[this.pos++]))<<14,r<128?e:(e|=(127&(r=n[this.pos++]))<<21,r<128?e:function(t,e,r){var n,o,i=r.buf;if(o=i[r.pos++],n=(112&o)>>4,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<3,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<10,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<17,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(127&o)<<24,o<128)return s(t,n,e);if(o=i[r.pos++],n|=(1&o)<<31,o<128)return s(t,n,e);throw new Error("Expected varint not more than 10 bytes")}(e|=(15&(r=n[this.pos]))<<28,t,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?(t+1)/-2:t/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&i?function(t,e,r){return i.decode(t.subarray(e,r))}(this.buf,e,t):function(t,e,r){var n="",o=e;for(;o<r;){var i,a,s,l=t[o],u=null,c=l>239?4:l>223?3:l>191?2:1;if(o+c>r)break;1===c?l<128&&(u=l):2===c?128==(192&(i=t[o+1]))&&(u=(31&l)<<6|63&i)<=127&&(u=null):3===c?(i=t[o+1],a=t[o+2],128==(192&i)&&128==(192&a)&&((u=(15&l)<<12|(63&i)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(i=t[o+1],a=t[o+2],s=t[o+3],128==(192&i)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&i)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,n+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),n+=String.fromCharCode(u),o+=c}return n}(this.buf,e,t)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==o.Bytes)return t.push(this.readVarint(e));var r=a(this);for(t=t||[];this.pos<r;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==o.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==o.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==o.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==o.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==o.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===o.Varint)for(;this.buf[this.pos++]>127;);else if(e===o.Bytes)this.pos=this.readVarint()+this.pos;else if(e===o.Fixed32)this.pos+=4;else{if(e!==o.Fixed64)throw new Error("Unimplemented type: "+e);this.pos+=8}},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var r=new Uint8Array(e);r.set(this.buf),this.buf=r,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),g(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),g(this.buf,-1&t,this.pos),g(this.buf,Math.floor(t*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(t){(t=+t||0)>268435455||t<0?function(t,e){var r,n;t>=0?(r=t%4294967296|0,n=t/4294967296|0):(n=~(-t/4294967296),4294967295^(r=~(-t%4294967296))?r=r+1|0:(r=0,n=n+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,r){r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos++]=127&t|128,t>>>=7,r.buf[r.pos]=127&t}(r,0,e),function(t,e){var r=(7&t)<<4;if(e.buf[e.pos++]|=r|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(n,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))},writeSVarint:function(t){this.writeVarint(t<0?2*-t-1:2*t)},writeBoolean:function(t){this.writeVarint(Boolean(t))},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,r){for(var n,o,i=0;i<e.length;i++){if((n=e.charCodeAt(i))>55295&&n<57344){if(!o){n>56319||i+1===e.length?(t[r++]=239,t[r++]=191,t[r++]=189):o=n;continue}if(n<56320){t[r++]=239,t[r++]=191,t[r++]=189,o=n;continue}n=o-55296<<10|n-56320|65536,o=null}else o&&(t[r++]=239,t[r++]=191,t[r++]=189,o=null);n<128?t[r++]=n:(n<2048?t[r++]=n>>6|192:(n<65536?t[r++]=n>>12|224:(t[r++]=n>>18|240,t[r++]=n>>12&63|128),t[r++]=n>>6&63|128),t[r++]=63&n|128)}return r}(this.buf,t,this.pos);var r=this.pos-e;r>=128&&l(e,r,this),this.pos=e-1,this.writeVarint(r),this.pos+=r},writeFloat:function(t){this.realloc(4),n.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),n.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var r=0;r<e;r++)this.buf[this.pos++]=t[r]},writeRawMessage:function(t,e){this.pos++;var r=this.pos;t(e,this);var n=this.pos-r;n>=128&&l(r,n,this),this.pos=r-1,this.writeVarint(n),this.pos+=n},writeMessage:function(t,e,r){this.writeTag(t,o.Bytes),this.writeRawMessage(e,r)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,y,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,b,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,v,e)},writeBytesField:function(t,e){this.writeTag(t,o.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,o.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,o.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,o.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,o.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,o.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,o.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,Boolean(e))}}},9957:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t){var e=this.constructor;return this.then(function(r){return e.resolve(t()).then(function(){return r})},function(r){return e.resolve(t()).then(function(){return e.reject(r)})})}function e(t){return new this(function(e,r){if(!t||void 0===t.length)return r(new TypeError(a(t)+" "+t+" is not iterable(cannot read property Symbol(Symbol.iterator))"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var o=n.length;function i(t,r){if(r&&("object"===a(r)||"function"==typeof r)){var s=r.then;if("function"==typeof s)return void s.call(r,function(e){i(t,e)},function(r){n[t]={status:"rejected",reason:r},0==--o&&e(n)})}n[t]={status:"fulfilled",value:r},0==--o&&e(n)}for(var s=0;s<n.length;s++)i(s,n[s])})}var n=setTimeout;function o(t){return Boolean(t&&void 0!==t.length)}function i(){}function s(t){if(!(this instanceof s))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function l(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,s._immediateFn(function(){var r=1===t._state?e.onFulfilled:e.onRejected;if(null!==r){var n;try{n=r(t._value)}catch(t){return void c(e.promise,t)}u(e.promise,n)}else(1===t._state?u:c)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"===a(e)||"function"==typeof e)){var r=e.then;if(e instanceof s)return t._state=3,t._value=e,void f(t);if("function"==typeof r)return void h((n=r,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,f(t)}catch(e){c(t,e)}var n,o}function c(t,e){t._state=2,t._value=e,f(t)}function f(t){2===t._state&&0===t._deferreds.length&&s._immediateFn(function(){t._handled||s._unhandledRejectionFn(t._value)});for(var e=0,r=t._deferreds.length;e<r;e++)l(t,t._deferreds[e]);t._deferreds=null}function h(t,e){var r=!1;try{t(function(t){r||(r=!0,u(e,t))},function(t){r||(r=!0,c(e,t))})}catch(t){if(r)return;r=!0,c(e,t)}}s.prototype.catch=function(t){return this.then(null,t)},s.prototype.then=function(t,e){var r=new this.constructor(i);return l(this,new function(t,e,r){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=r}(t,e,r)),r},s.prototype.finally=t,s.all=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.all accepts an array"));var n=Array.prototype.slice.call(t);if(0===n.length)return e([]);var i=n.length;function s(t,o){try{if(o&&("object"===a(o)||"function"==typeof o)){var l=o.then;if("function"==typeof l)return void l.call(o,function(e){s(t,e)},r)}n[t]=o,0==--i&&e(n)}catch(t){r(t)}}for(var l=0;l<n.length;l++)s(l,n[l])})},s.allSettled=e,s.resolve=function(t){return t&&"object"===a(t)&&t.constructor===s?t:new s(function(e){e(t)})},s.reject=function(t){return new s(function(e,r){r(t)})},s.race=function(t){return new s(function(e,r){if(!o(t))return r(new TypeError("Promise.race accepts an array"));for(var n=0,i=t.length;n<i;n++)s.resolve(t[n]).then(e,r)})},s._immediateFn="function"==typeof setImmediate&&function(t){setImmediate(t)}||function(t){n(t,0)},s._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==r.g)return r.g;throw new Error("unable to locate global object")}();"function"!=typeof p.Promise?p.Promise=s:(p.Promise.prototype.finally||(p.Promise.prototype.finally=t),p.Promise.allSettled||(p.Promise.allSettled=e))},"object"===a(e)?i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},1441:function(t,e,r){var n,o,i;function a(t){"@babel/helpers - typeof";return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}i=function(){"use strict";function t(t,e,r){var n=t[e];t[e]=t[r],t[r]=n}function e(t,e){return t<e?-1:t>e?1:0}return function(r,n,o,i,a){!function e(r,n,o,i,a){for(;i>o;){if(i-o>600){var s=i-o+1,l=n-o+1,u=Math.log(s),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(s-c)/s)*(l-s/2<0?-1:1),h=Math.max(o,Math.floor(n-l*c/s+f)),p=Math.min(i,Math.floor(n+(s-l)*c/s+f));e(r,n,h,p,a)}var y=r[n],d=o,b=i;for(t(r,o,n),a(r[i],y)>0&&t(r,o,i);d<b;){for(t(r,d,b),d++,b--;a(r[d],y)<0;)d++;for(;a(r[b],y)>0;)b--}0===a(r[o],y)?t(r,o,b):t(r,++b,i),b<=n&&(o=b+1),n<=b&&(i=b-1)}}(r,n,o||0,i||r.length-1,a||e)}},"object"===a(e)?t.exports=i():void 0===(o="function"==typeof(n=i)?n.call(e,r,e,t):n)||(t.exports=o)},3861:function(t,e,r){"use strict";t.exports=o,t.exports.default=o;var n=r(1441);function o(t,e){if(!(this instanceof o))return new o(t,e);this._maxEntries=Math.max(4,t||9),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),e&&this._initFormat(e),this.clear()}function i(t,e,r){if(!r)return e.indexOf(t);for(var n=0;n<e.length;n++)if(r(t,e[n]))return n;return-1}function a(t,e){s(t,0,t.children.length,e,t)}function s(t,e,r,n,o){o||(o=d(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var i,a=e;a<r;a++)i=t.children[a],l(o,t.leaf?n(i):i);return o}function l(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function u(t,e){return t.minX-e.minX}function c(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function p(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function d(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function b(t,e,r,o,i){for(var a,s=[e,r];s.length;)(r=s.pop())-(e=s.pop())<=o||(a=e+Math.ceil((r-e)/o/2)*o,n(t,a,e,r,i),s.push(e,a,a,r))}o.prototype={all:function(){return this._all(this.data,[])},search:function(t){var e=this.data,r=[],n=this.toBBox;if(!y(t,e))return r;for(var o,i,a,s,l=[];e;){for(o=0,i=e.children.length;o<i;o++)a=e.children[o],y(t,s=e.leaf?n(a):a)&&(e.leaf?r.push(a):p(t,s)?this._all(a,r):l.push(a));e=l.pop()}return r},collides:function(t){var e=this.data,r=this.toBBox;if(!y(t,e))return!1;for(var n,o,i,a,s=[];e;){for(n=0,o=e.children.length;n<o;n++)if(i=e.children[n],y(t,a=e.leaf?r(i):i)){if(e.leaf||p(t,a))return!0;s.push(i)}e=s.pop()}return!1},load:function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0,r=t.length;e<r;e++)this.insert(t[e]);return this}var n=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===n.height)this._splitRoot(this.data,n);else{if(this.data.height<n.height){var o=this.data;this.data=n,n=o}this._insert(n,this.data.height-n.height-1,!0)}else this.data=n;return this},insert:function(t){return t&&this._insert(t,this.data.height-1),this},clear:function(){return this.data=d([]),this},remove:function(t,e){if(!t)return this;for(var r,n,o,a,s=this.data,l=this.toBBox(t),u=[],c=[];s||u.length;){if(s||(s=u.pop(),n=u[u.length-1],r=c.pop(),a=!0),s.leaf&&-1!==(o=i(t,s.children,e)))return s.children.splice(o,1),u.push(s),this._condense(u),this;a||s.leaf||!p(s,l)?n?(r++,s=n.children[r],a=!1):s=null:(u.push(s),c.push(r),r=0,n=s,s=s.children[0])}return this},toBBox:function(t){return t},compareMinX:u,compareMinY:c,toJSON:function(){return this.data},fromJSON:function(t){return this.data=t,this},_all:function(t,e){for(var r=[];t;)t.leaf?e.push.apply(e,t.children):r.push.apply(r,t.children),t=r.pop();return e},_build:function(t,e,r,n){var o,i=r-e+1,s=this._maxEntries;if(i<=s)return a(o=d(t.slice(e,r+1)),this.toBBox),o;n||(n=Math.ceil(Math.log(i)/Math.log(s)),s=Math.ceil(i/Math.pow(s,n-1))),(o=d([])).leaf=!1,o.height=n;var l,u,c,f,h=Math.ceil(i/s),p=h*Math.ceil(Math.sqrt(s));for(b(t,e,r,p,this.compareMinX),l=e;l<=r;l+=p)for(b(t,l,c=Math.min(l+p-1,r),h,this.compareMinY),u=l;u<=c;u+=h)f=Math.min(u+h-1,c),o.children.push(this._build(t,u,f,n-1));return a(o,this.toBBox),o},_chooseSubtree:function(t,e,r,n){for(var o,i,a,s,l,u,c,h,p,y;n.push(e),!e.leaf&&n.length-1!==r;){for(c=h=1/0,o=0,i=e.children.length;o<i;o++)l=f(a=e.children[o]),p=t,y=a,(u=(Math.max(y.maxX,p.maxX)-Math.min(y.minX,p.minX))*(Math.max(y.maxY,p.maxY)-Math.min(y.minY,p.minY))-l)<h?(h=u,c=l<c?l:c,s=a):u===h&&l<c&&(c=l,s=a);e=s||e.children[0]}return e},_insert:function(t,e,r){var n=this.toBBox,o=r?t:n(t),i=[],a=this._chooseSubtree(o,this.data,e,i);for(a.children.push(t),l(a,o);e>=0&&i[e].children.length>this._maxEntries;)this._split(i,e),e--;this._adjustParentBBoxes(o,i,e)},_split:function(t,e){var r=t[e],n=r.children.length,o=this._minEntries;this._chooseSplitAxis(r,o,n);var i=this._chooseSplitIndex(r,o,n),s=d(r.children.splice(i,r.children.length-i));s.height=r.height,s.leaf=r.leaf,a(r,this.toBBox),a(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(r,s)},_splitRoot:function(t,e){this.data=d([t,e]),this.data.height=t.height+1,this.data.leaf=!1,a(this.data,this.toBBox)},_chooseSplitIndex:function(t,e,r){var n,o,i,a,l,u,c,h,p,y,d,b,v,m;for(u=c=1/0,n=e;n<=r-e;n++)o=s(t,0,n,this.toBBox),i=s(t,n,r,this.toBBox),p=o,y=i,void 0,void 0,void 0,void 0,d=Math.max(p.minX,y.minX),b=Math.max(p.minY,y.minY),v=Math.min(p.maxX,y.maxX),m=Math.min(p.maxY,y.maxY),a=Math.max(0,v-d)*Math.max(0,m-b),l=f(o)+f(i),a<u?(u=a,h=n,c=l<c?l:c):a===u&&l<c&&(c=l,h=n);return h},_chooseSplitAxis:function(t,e,r){var n=t.leaf?this.compareMinX:u,o=t.leaf?this.compareMinY:c;this._allDistMargin(t,e,r,n)<this._allDistMargin(t,e,r,o)&&t.children.sort(n)},_allDistMargin:function(t,e,r,n){t.children.sort(n);var o,i,a=this.toBBox,u=s(t,0,e,a),c=s(t,r-e,r,a),f=h(u)+h(c);for(o=e;o<r-e;o++)i=t.children[o],l(u,t.leaf?a(i):i),f+=h(u);for(o=r-e-1;o>=e;o--)i=t.children[o],l(c,t.leaf?a(i):i),f+=h(c);return f},_adjustParentBBoxes:function(t,e,r){for(var n=r;n>=0;n--)l(e[n],t)},_condense:function(t){for(var e,r=t.length-1;r>=0;r--)0===t[r].children.length?r>0?(e=t[r-1].children).splice(e.indexOf(t[r]),1):this.clear():a(t[r],this.toBBox)},_initFormat:function(t){var e=["return a"," - b",";"];this.compareMinX=new Function("a","b",e.join(t[0])),this.compareMinY=new Function("a","b",e.join(t[1])),this.toBBox=new Function("a","return {minX: a"+t[0]+", minY: a"+t[1]+", maxX: a"+t[2]+", maxY: a"+t[3]+"};")}}},8975:function(){"use strict"},7788:function(t,e,r){"use strict";var n=window.SuperMap=window.SuperMap||{};n.Components=window.SuperMap.Components||{};var o={GEOJSON:"GEOJSON",ISERVER:"ISERVER",FGB:"FGB"},i={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},a={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN",GEOCOMPOUND:"GEOCOMPOUND"},s={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},l={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},u={DISTANCE:"DISTANCE",AREA:"AREA"},c={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},f={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},h={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},p={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},y={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},d={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},b={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},v={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},m={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},g={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},w={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},_={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},O={FLAT:"FLAT",ROUND:"ROUND"},S={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},x={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},P={BSPLINE:"BSPLINE",POLISH:"POLISH"},E={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},k={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},j={ADD:"add",UPDATE:"update",DELETE:"delete"},T={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},C={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},A={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},M={EXP1:"EXP1",EXP2:"EXP2"},R={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},N={CLIP:"clip",INTERSECT:"intersect"},I={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},D={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},F={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},B={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},G={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},U={GEOHASH_GRID:"geohash_grid"},z={AVG:"avg",MAX:"max",MIN:"min",SUM:"sum"},V={NDVI:"NDVI",HILLSHADE:"HILLSHADE"},J={CUSTOM:"CUSTOM",INTERSECTION:"INTERSECTION",UNION:"UNION"},q={CUSTOM:"CUSTOM",MAX:"MAX",MIN:"MIN"};function H(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var W=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.w=e?parseFloat(e):0,this.h=e?parseFloat(r):0,this.CLASS_NAME="SuperMap.Size"}var e,r,n;return e=t,(r=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new t(this.w,this.h)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.w===t.w&&this.h===t.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(t.w)&&isNaN(t.h)),e}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&H(e.prototype,r),n&&H(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Y(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var X=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e?parseFloat(e):0,this.y=r?parseFloat(r):0,this.mode=n,this.CLASS_NAME="SuperMap.Pixel"}var e,r,n;return e=t,(r=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new t(this.x,this.y,this.mode)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x==t.x&&this.y==t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"distanceTo",value:function(t){return Math.sqrt(Math.pow(this.x-t.x,2)+Math.pow(this.y-t.y,2))}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Pixel.add cannot receive null values");return new t(this.x+e,this.y+r)}},{key:"offset",value:function(t){var e=this.clone();return t&&(e=this.add(t.x,t.y)),e}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&Y(e.prototype,r),n&&Y(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Q(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}X.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"};var Z=function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];for(var n=function(t,e,r){return e&&Q(t.prototype,e),r&&Q(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);for(var n=0;n<e.length;n++)a(this,new e[n](r))}),o=0;o<e.length;o++){var i=e[o];a(n,i),a(n.prototype,i.prototype),a(n.prototype,new i)}return n;function a(t,e){var r=Object.getOwnPropertyNames(e);Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e)));for(var n=0;n<r.length;n++){var o=r[n];if("constructor"!==o&&"prototype"!==o&&"name"!==o&&"length"!==o){var i=Object.getOwnPropertyDescriptor(e,o);window.ActiveXObject?Object.defineProperty(t,o,i||{}):Object.defineProperty(t,o,i)}}}},K={startsWith:function(t,e){return 0==t.indexOf(e)},contains:function(t,e){return-1!=t.indexOf(e)},trim:function(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(t){for(var e=t.split("-"),r=e[0],n=1,o=e.length;n<o;n++){var i=e[n];r+=i.charAt(0).toUpperCase()+i.substring(1)}return r},format:function(t,e,r){e||(e=window);return t.replace(K.tokenRegEx,function(t,n){for(var o,i=n.split(/\.+/),a=0;a<i.length;a++)0==a&&(o=e),o=o[i[a]];return"function"==typeof o&&(o=r?o.apply(null,r):o()),void 0===o?"undefined":o})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(t){return K.numberRegEx.test(t)},numericIf:function(t){return K.isNumeric(t)?parseFloat(t):t}},$={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(t,e){var r=0;return e>0&&(r=parseFloat(t.toPrecision(e))),r},format:function(t,e,r,n){e=void 0!==e?e:0,r=void 0!==r?r:$.thousandsSeparator,n=void 0!==n?n:$.decimalSeparator,null!=e&&(t=parseFloat(t.toFixed(e)));var o=t.toString().split(".");1===o.length&&null==e&&(e=0);var i,a=o[0];if(r)for(var s=/(-?[0-9]+)([0-9]{3})/;s.test(a);)a=a.replace(s,"$1"+r+"$2");if(0==e)i=a;else{var l=o.length>1?o[1]:"0";null!=e&&(l+=new Array(e-l.length+1).join("0")),i=a+n+l}return i}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(t){return $.limitSigDigs(this,t)});var tt={bind:function(t,e){var r=Array.prototype.slice.apply(arguments,[2]);return function(){var n=r.concat(Array.prototype.slice.apply(arguments,[0]));return t.apply(e,n)}},bindAsEventListener:function(t,e){return function(r){return t.call(e,r||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}},et={filter:function(t,e,r){var n=[];if(Array.prototype.filter)n=t.filter(e,r);else{var o=t.length;if("function"!=typeof e)throw new TypeError;for(var i=0;i<o;i++)if(i in t){var a=t[i];e.call(r,a,i,t)&&n.push(a)}}return n}};function rt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Geometry",this.id=dt.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new t}},{key:"setBounds",value:function(t){t&&(this.bounds=t.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(t){this.getBounds()?this.bounds.extend(t):this.setBounds(t)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(t){}},{key:"getArea",value:function(){return 0}}])&&rt(e.prototype,r),n&&rt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ot(t){"@babel/helpers - typeof";return(ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var it,at,st,lt,ut,ct,ft,ht=(at="",st="",lt="pc",(ut=navigator.userAgent.toLowerCase()).indexOf("msie")>-1||ut.indexOf("trident")>-1&&ut.indexOf("rv")>-1?(at="msie",it=ut.match(/msie ([\d.]+)/)||ut.match(/rv:([\d.]+)/)):ut.indexOf("chrome")>-1?(at="chrome",it=ut.match(/chrome\/([\d.]+)/)):ut.indexOf("firefox")>-1?(at="firefox",it=ut.match(/firefox\/([\d.]+)/)):ut.indexOf("opera")>-1?(at="opera",it=ut.match(/version\/([\d.]+)/)):ut.indexOf("safari")>-1&&(at="safari",it=ut.match(/version\/([\d.]+)/)),st=it?it[1]:"",ut.indexOf("ipad")>-1||ut.indexOf("ipod")>-1||ut.indexOf("iphone")>-1?lt="apple":ut.indexOf("android")>-1&&(st=(it=ut.match(/version\/([\d.]+)/))?it[1]:"",lt="android"),{name:at,version:st,device:lt}),pt=(ct=!0,ft=ht,document.createElement("canvas").getContext?("firefox"===ft.name&&parseFloat(ft.version)<5&&(ct=!1),"safari"===ft.name&&parseFloat(ft.version)<4&&(ct=!1),"opera"===ft.name&&parseFloat(ft.version)<10&&(ct=!1),"msie"===ft.name&&parseFloat(ft.version)<9&&(ct=!1)):ct=!1,ct),yt=function(){var t=navigator.userAgent.toLowerCase();return-1===t.indexOf("webkit")&&-1!==t.indexOf("gecko")}(),dt={assign:function(t){for(var e=0;e<Object.getOwnPropertyNames(arguments).length;e++){var r=Object.getOwnPropertyNames(arguments)[e];if("caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r){var n=arguments[r];if(n)for(var o=0;o<Object.getOwnPropertyNames(n).length;o++){var i=Object.getOwnPropertyNames(n)[o];"caller"!=r&&"callee"!=r&&"length"!=r&&"arguments"!=r&&(t[i]=n[i])}}}return t},extend:function(t,e){if(t=t||{},e){for(var r in e){var n=e[r];void 0!==n&&(t[r]=n)}!("function"==typeof window.Event&&e instanceof window.Event)&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&(t.toString=e.toString)}return t},copy:function(t,e){var r;if(t=t||{},e)for(var n in t)void 0!==(r=e[n])&&(t[n]=r)},reset:function(t){for(var e in t=t||{})if(t.hasOwnProperty(e)){if("object"===ot(t[e])&&t[e]instanceof Array){for(var r in t[e])t[e][r].destroy&&t[e][r].destroy();t[e].length=0}else"object"===ot(t[e])&&t[e]instanceof Object&&t[e].destroy&&t[e].destroy();t[e]=null}},getElement:function(){for(var t=[],e=0,r=arguments.length;e<r;e++){var n=arguments[e];if("string"==typeof n&&(n=document.getElementById(n)),1===arguments.length)return n;t.push(n)}return t},isElement:function(t){return!(!t||1!==t.nodeType)},isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},removeItem:function(t,e){for(var r=t.length-1;r>=0;r--)t[r]===e&&t.splice(r,1);return t},indexOf:function(t,e){if(null==t)return-1;if("function"==typeof t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1},modifyDOMElement:function(t,e,r,n,o,i,a,s){e&&(t.id=e),r&&(t.style.left=r.x+"px",t.style.top=r.y+"px"),n&&(t.style.width=n.w+"px",t.style.height=n.h+"px"),o&&(t.style.position=o),i&&(t.style.border=i),a&&(t.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(t.style.filter="alpha(opacity="+100*s+")",t.style.opacity=s):1===parseFloat(s)&&(t.style.filter="",t.style.opacity="")},applyDefaults:function(t,e){t=t||{};var r="function"==typeof window.Event&&e instanceof window.Event;for(var n in e)(void 0===t[n]||!r&&e.hasOwnProperty&&e.hasOwnProperty(n)&&!t.hasOwnProperty(n))&&(t[n]=e[n]);return!r&&e&&e.hasOwnProperty&&e.hasOwnProperty("toString")&&!t.hasOwnProperty("toString")&&(t.toString=e.toString),t},getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},urlAppend:function(t,e){var r=t;if(e){0===e.indexOf("?")&&(e=e.substring(1));var n=(t+" ").split(/[?&]/);r+=" "===n.pop()?e:n.length?"&"+e:"?"+e}return r},urlPathAppend:function(t,e){var r=t;if(!e)return r;0===e.indexOf("/")&&(e=e.substring(1));var n=t.split("?");return n[0].indexOf("/",n[0].length-1)<0&&(n[0]+="/"),r="".concat(n[0]).concat(e).concat(n.length>1?"?".concat(n[1]):"")},DEFAULT_PRECISION:14,toFloat:function(t,e){return null==e&&(e=dt.DEFAULT_PRECISION),"number"!=typeof t&&(t=parseFloat(t)),0===e?t:parseFloat(t.toPrecision(e))},rad:function(t){return t*Math.PI/180},getParameters:function(t){t=null===t||void 0===t?window.location.href:t;var e="";if(K.contains(t,"?")){var r=t.indexOf("?")+1,n=K.contains(t,"#")?t.indexOf("#"):t.length;e=t.substring(r,n)}for(var o={},i=e.split(/[&;]/),a=0,s=i.length;a<s;++a){var l=i[a].split("=");if(l[0]){var u=l[0];try{u=decodeURIComponent(u)}catch(t){u=unescape(u)}var c=(l[1]||"").replace(/\+/g," ");try{c=decodeURIComponent(c)}catch(t){c=unescape(c)}1==(c=c.split(",")).length&&(c=c[0]),o[u]=c}}return o},lastSeqID:0,createUniqueID:function(t){return null==t&&(t="id_"),dt.lastSeqID+=1,t+dt.lastSeqID},normalizeScale:function(t){return t>1?1/t:t},getResolutionFromScale:function(t,e){var r;t&&(null==e&&(e="degrees"),r=1/(dt.normalizeScale(t)*bt[e]*96));return r},getScaleFromResolution:function(t,e){return null==e&&(e="degrees"),t*bt[e]*96},getBrowser:function(){return ht},isSupportCanvas:pt,supportCanvas:function(){return dt.isSupportCanvas},isInTheSameDomain:function(t){if(!t)return!0;var e=t.indexOf("//"),r=document.location.toString(),n=r.indexOf("//");if(-1===e)return!0;var o,i=o=t.substring(0,e),a=r.substring(n+2);n=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,n),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==i.toLowerCase())return!1;var c=(i=t.substring(e+2)).indexOf(":");e=i.indexOf("/");var f,h=i.substring(0,e);return-1!==c?f=i.substring(0,c):(f=i.substring(0,e),h+=":"+("http:"===o.toLowerCase()?80:443)),f===document.domain&&h===l},calculateDpi:function(t,e,r,n,o){if(t&&e&&r){var i,a=t.getWidth(),s=t.getHeight(),l=e.w,u=e.h;if(o=o||6378137,"degree"===(n=n||"degrees").toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()){var c=a/l,f=s/u;i=254/(c>f?c:f)/r/(2*Math.PI*o/360)/1e4}else{i=254/(a/l)/r/1e4}return i}},toJSON:function(t){var e=t;if(null==e)return null;switch(e.constructor){case String:return e=(e=(e=(e=(e=(e=(e='"'+e.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var r="",n=0,o=e.length;n<o;n++)r+=dt.toJSON(e[n]),n!==e.length-1&&(r+=",");return"["+r+"]";case Number:return isFinite(e)?String(e):null;case Boolean:return String(e);case Date:return"{'__type':\"System.DateTime\",'Year':"+e.getFullYear()+",'Month':"+(e.getMonth()+1)+",'Day':"+e.getDate()+",'Hour':"+e.getHours()+",'Minute':"+e.getMinutes()+",'Second':"+e.getSeconds()+",'Millisecond':"+e.getMilliseconds()+",'TimezoneOffset':"+e.getTimezoneOffset()+"}";default:if(null!=e.toJSON&&"function"==typeof e.toJSON)return e.toJSON();if("object"===ot(e)){if(e.length){for(var i=[],a=0,s=e.length;a<s;a++)i.push(dt.toJSON(e[a]));return"["+i.join(",")+"]"}var l=[];for(var u in e)"function"!=typeof e[u]&&"CLASS_NAME"!==u&&"parent"!==u&&l.push("'"+u+"':"+dt.toJSON(e[u]));return l.length>0?"{"+l.join(",")+"}":"{}"}return e.toString()}},getResolutionFromScaleDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=dt.normalizeScale(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},getScaleFromResolutionDpi:function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4:-1},transformResult:function(t){return t.responseText&&"string"==typeof t.responseText&&(t=JSON.parse(t.responseText)),t},copyAttributes:function(t,e){if(t=t||{},e)for(var r in e){var n=e[r];void 0!==n&&"CLASS_NAME"!==r&&"function"!=typeof n&&(t[r]=n)}return t},copyAttributesWithClip:function(t,e,r){if(t=t||{},e)for(var n in e){var o=!1;if(r&&r.length)for(var i=0,a=r.length;i<a;i++)if(n===r[i]){o=!0;break}if(!0!==o){var s=e[n];void 0!==s&&"CLASS_NAME"!==n&&"function"!=typeof s&&(t[n]=s)}}return t},cloneObject:function(t){if(null===t||"object"!==ot(t))return t;if(t instanceof Date){var e=new Date;return e.setTime(t.getTime()),e}if(t instanceof Array)return t.slice(0);if(t instanceof Object){var r={};for(var n in t)t.hasOwnProperty(n)&&(r[n]=dt.cloneObject(t[n]));return r}throw new Error("Unable to copy obj! Its type isn't supported.")},lineIntersection:function(t,e,r,n){var o,i,a=null,s=(n.x-r.x)*(t.y-r.y)-(n.y-r.y)*(t.x-r.x),l=(e.x-t.x)*(t.y-r.y)-(e.y-t.y)*(t.x-r.x),u=(n.y-r.y)*(e.x-t.x)-(n.x-r.x)*(e.y-t.y);if(0!=u)i=l/u,a=(o=s/u)>=0&&i<=1&&o<=1&&i>=0?new nt.Point(t.x+o*(e.x-t.x),t.y+o*(e.y-t.y)):"No Intersection";else if(0==s&&0==l){var c=Math.max(t.y,e.y),f=Math.min(t.y,e.y),h=Math.max(t.x,e.x),p=Math.min(t.x,e.x);a=(r.y>=f&&r.y<=c||n.y>=f&&n.y<=c)&&r.x>=p&&r.x<=h||n.x>=p&&n.x<=h?"Coincident":"Parallel"}else a="Parallel";return a},getTextBounds:function(t,e,r){document.body.appendChild(r),r.style.width="auto",r.style.height="auto",t.fontSize&&(r.style.fontSize=t.fontSize),t.fontFamily&&(r.style.fontFamily=t.fontFamily),t.fontWeight&&(r.style.fontWeight=t.fontWeight),r.style.position="relative",r.style.visibility="hidden",r.style.display="inline-block",r.innerHTML=e;var n=r.clientWidth,o=r.clientHeight;return document.body.removeChild(r),{textWidth:n,textHeight:o}},convertPath:function(t,e){return e?t.replace(/\{([\w-\.]+)\}/g,function(t,r){var n;return n=e.hasOwnProperty(r)?function(t){if(void 0==t||null==t)return"";if(t instanceof Date)return t.toJSON();if(function(t){if("string"!=typeof t&&"object"!==ot(t))return!1;try{var e=t.toString();return"[object Object]"===e||"[object Array]"===e}catch(t){return!1}}(t))return JSON.stringify(t);return t.toString()}(e[r]):t,encodeURIComponent(n)}):t}},bt={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36};bt.in=bt.inches,bt.degrees=bt.dd,bt.nmi=1852*bt.m;var vt=.0254000508001016;function mt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}dt.extend(bt,{Inch:bt.inches,Meter:39.37,Foot:12,IFoot:11.999976,ClarkeFoot:11.999868327581488,SearsFoot:11.999955194477684,GoldCoastFoot:11.999964589846002,IInch:.9999979999999999,MicroInch:999998e-9,Mil:9.99998e-7,Centimeter:.3937,Kilometer:39370,Yard:36,SearsYard:35.99986558343306,IndianYard:35.99987015540864,IndianYd37:35.999740205100004,IndianYd62:35.999880755999996,IndianYd75:35.999868945,IndianFoot:11.9999567087,IndianFt37:11.9999134017,IndianFt62:11.999960252000001,IndianFt75:11.999956315,Mile:63360,IYard:35.999928,IMile:63359.87328,NautM:72913.24,"Lat-66":4367838.370169282,"Lat-83":4367954.152606599,Decimeter:3.9370000000000003,Millimeter:.03937,Dekameter:393.7,Decameter:393.7,Hectometer:3937,GermanMeter:39.370535294205006,CaGrid:39.359685060000004,ClarkeChain:791.991309620512,GunterChain:792.0000000000001,BenoitChain:791.9977268035781,SearsChain:791.9970428354235,ClarkeLink:7.91991309620512,GunterLink:7.920000000000001,BenoitLink:7.919977268035781,SearsLink:7.919970428354236,Rod:198.00000000000014,IntnlChain:791.998416,IntnlLink:7.91998416,Perch:198.00000000000014,Pole:198.00000000000014,Furlong:7919.999999999997,Rood:148.75036777426,CapeFoot:11.999868185255002,Brealey:14763.75,ModAmFt:12.000458400000001,Fathom:71.999856,"NautM-UK":72959.85408,"50kilometers":1968500,"150kilometers":5905500}),dt.extend(bt,{mm:bt.Meter/1e3,cm:bt.Meter/100,dm:100*bt.Meter,km:1e3*bt.Meter,kmi:bt.nmi,fath:bt.Fathom,ch:bt.IntnlChain,link:bt.IntnlLink,"us-in":bt.inches,"us-ft":bt.Foot,"us-yd":bt.Yard,"us-ch":bt.GunterChain,"us-mi":bt.Mile,"ind-yd":bt.IndianYd37,"ind-ft":bt.IndianFt37,"ind-ch":791.9942845122}),bt.degree=bt.dd,bt.meter=bt.m,bt.foot=bt.ft,bt.inch=bt.inches,bt.mile=bt.mi,bt.kilometer=bt.km,bt.yard=bt.yd;var gt=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dt.isArray(e)&&(r=e[1],e=e[0]),this.lon=e?dt.toFloat(e):0,this.lat=r?dt.toFloat(r):0,this.CLASS_NAME="SuperMap.LonLat"}var e,r,n;return e=t,n=[{key:"fromString",value:function(e){var r=e.split(",");return new t(r[0],r[1])}},{key:"fromArray",value:function(e){var r=dt.isArray(e);return new t(r&&e[0],r&&e[1])}}],(r=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new t(this.lon,this.lat)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("LonLat.add cannot receive null values");return new t(this.lon+dt.toFloat(e),this.lat+dt.toFloat(r))}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.lon===t.lon&&this.lat===t.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(t.lon)&&isNaN(t.lat)),e}},{key:"wrapDateLine",value:function(t){var e=this.clone();if(t){for(;e.lon<t.left;)e.lon+=t.getWidth();for(;e.lon>t.right;)e.lon-=t.getWidth()}return e}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&mt(e.prototype,r),n&&mt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _t=function(){function t(e,r,n,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),dt.isArray(e)&&(o=e[3],n=e[2],r=e[1],e=e[0]),this.left=null!=e?dt.toFloat(e):this.left,this.bottom=null!=r?dt.toFloat(r):this.bottom,this.right=null!=n?dt.toFloat(n):this.right,this.top=null!=o?dt.toFloat(o):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var e,r,n;return e=t,n=[{key:"fromString",value:function(e,r){var n=e.split(",");return t.fromArray(n,r)}},{key:"fromArray",value:function(e,r){return!0===r?new t(e[1],e[0],e[3],e[2]):new t(e[0],e[1],e[2],e[3])}},{key:"fromSize",value:function(e){return new t(0,e.h,e.w,0)}},{key:"oppositeQuadrant",value:function(t){var e="";return e+="t"===t.charAt(0)?"b":"t",e+="l"===t.charAt(1)?"r":"l"}}],(r=[{key:"clone",value:function(){return new t(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.left===t.left&&this.right===t.right&&this.top===t.top&&this.bottom===t.bottom),e}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(t){return!0===t?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(t,e){null==t&&(t=6);var r=Math.pow(10,t),n=Math.round(this.left*r)/r,o=Math.round(this.bottom*r)/r,i=Math.round(this.right*r)/r,a=Math.round(this.top*r)/r;return!0===e?o+","+n+","+a+","+i:n+","+o+","+i+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new W(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new X((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new gt((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(e,r){var n,o;return e=e||1,null==r&&(r=this.getCenterLonLat()),"SuperMap.LonLat"===r.CLASS_NAME?(n=r.lon,o=r.lat):(n=r.x,o=r.y),new t((this.left-n)*e+n,(this.bottom-o)*e+o,(this.right-n)*e+n,(this.top-o)*e+o)}},{key:"add",value:function(e,r){if(null==e||null==r)throw new TypeError("Bounds.add cannot receive null values");return new t(this.left+e,this.bottom+r,this.right+e,this.top+r)}},{key:"extend",value:function(e){var r=null;if(e){switch(e.CLASS_NAME){case"SuperMap.LonLat":r=new t(e.lon,e.lat,e.lon,e.lat);break;case"SuperMap.Geometry.Point":r=new t(e.x,e.y,e.x,e.y);break;case"SuperMap.Bounds":r=e}r&&(this.centerLonLat=null,(null==this.left||r.left<this.left)&&(this.left=r.left),(null==this.bottom||r.bottom<this.bottom)&&(this.bottom=r.bottom),(null==this.right||r.right>this.right)&&(this.right=r.right),(null==this.top||r.top>this.top)&&(this.top=r.top))}}},{key:"containsLonLat",value:function(t,e){"boolean"==typeof e&&(e={inclusive:e}),e=e||{};var r=this.contains(t.lon,t.lat,e.inclusive),n=e.worldBounds;if(n&&!r){var o=n.getWidth(),i=(n.left+n.right)/2,a=Math.round((t.lon-i)/o);r=this.containsLonLat({lon:t.lon-a*o,lat:t.lat},{inclusive:e.inclusive})}return r}},{key:"containsPixel",value:function(t,e){return this.contains(t.x,t.y,e)}},{key:"contains",value:function(t,e,r){if(null==r&&(r=!0),null==t||null==e)return!1;var n=!1;return n=r?t>=this.left&&t<=this.right&&e>=this.bottom&&e<=this.top:t>this.left&&t<this.right&&e>this.bottom&&e<this.top,n}},{key:"intersectsBounds",value:function(t,e){if("boolean"==typeof e&&(e={inclusive:e}),(e=e||{}).worldBounds){var r=this.wrapDateLine(e.worldBounds);t=t.wrapDateLine(e.worldBounds)}else r=this;null==e.inclusive&&(e.inclusive=!0);var n=!1,o=r.left===t.right||r.right===t.left||r.top===t.bottom||r.bottom===t.top;if(e.inclusive||!o){var i=t.bottom>=r.bottom&&t.bottom<=r.top||r.bottom>=t.bottom&&r.bottom<=t.top,a=t.top>=r.bottom&&t.top<=r.top||r.top>t.bottom&&r.top<t.top,s=t.left>=r.left&&t.left<=r.right||r.left>=t.left&&r.left<=t.right,l=t.right>=r.left&&t.right<=r.right||r.right>=t.left&&r.right<=t.right;n=(i||a)&&(s||l)}if(e.worldBounds&&!n){var u=e.worldBounds,c=u.getWidth(),f=!u.containsBounds(r),h=!u.containsBounds(t);f&&!h?(t=t.add(-c,0),n=r.intersectsBounds(t,{inclusive:e.inclusive})):h&&!f&&(r=r.add(-c,0),n=t.intersectsBounds(r,{inclusive:e.inclusive}))}return n}},{key:"containsBounds",value:function(t,e,r){null==e&&(e=!1),null==r&&(r=!0);var n=this.contains(t.left,t.bottom,r),o=this.contains(t.right,t.bottom,r),i=this.contains(t.left,t.top,r),a=this.contains(t.right,t.top,r);return e?n||o||i||a:n&&o&&i&&a}},{key:"determineQuadrant",value:function(t){var e="",r=this.getCenterLonLat();return e+=t.lat<r.lat?"b":"t",e+=t.lon<r.lon?"l":"r"}},{key:"wrapDateLine",value:function(t,e){var r=(e=e||{}).leftTolerance||0,n=e.rightTolerance||0,o=this.clone();if(t){for(var i=t.getWidth();o.left<t.left&&o.right-n<=t.left;)o=o.add(i,0);for(;o.left+r>=t.right&&o.right>t.right;)o=o.add(-i,0);var a=o.left+r;a<t.right&&a>t.left&&o.right-n>t.right&&(o=o.add(-i,0))}return o}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&wt(e.prototype,r),n&&wt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ot(t){"@babel/helpers - typeof";return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function St(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xt(){return(xt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kt(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pt(t,e){return(Pt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Et(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kt(t);if(e){var o=kt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ot(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kt(t){return(kt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pt(t,e)}(i,nt);var e,r,n,o=Et(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).components=[],e.componentTypes=null,null!=t&&e.addComponents(t),e.CLASS_NAME="SuperMap.Geometry.Collection",e.geometryType="Collection",e}return e=i,(r=[{key:"destroy",value:function(){this.components.length=0,this.components=null,xt(kt(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var t=new i,e=0,r=this.components.length;e<r;e++)t.addComponent(this.components[e].clone());return dt.applyDefaults(t,this),t}},{key:"getComponentsString",value:function(){for(var t=[],e=0,r=this.components.length;e<r;e++)t.push(this.components[e].toShortString());return t.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var t=new _t,e=this.components;if(e)for(var r=0,n=e.length;r<n;r++)t.extend(e[r].getBounds());null!=t.left&&null!=t.bottom&&null!=t.right&&null!=t.top&&this.setBounds(t)}},{key:"addComponents",value:function(t){dt.isArray(t)||(t=[t]);for(var e=0,r=t.length;e<r;e++)this.addComponent(t[e])}},{key:"addComponent",value:function(t,e){var r=!1;if(t&&(null==this.componentTypes||dt.indexOf(this.componentTypes,t.CLASS_NAME)>-1)){if(null!=e&&e<this.components.length){var n=this.components.slice(0,e),o=this.components.slice(e,this.components.length);n.push(t),this.components=n.concat(o)}else this.components.push(t);t.parent=this,this.clearBounds(),r=!0}return r}},{key:"removeComponents",value:function(t){var e=!1;dt.isArray(t)||(t=[t]);for(var r=t.length-1;r>=0;--r)e=this.removeComponent(t[r])||e;return e}},{key:"removeComponent",value:function(t){return dt.removeItem(this.components,t),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var t=0,e=0,r=this.components.length;e<r;e++)t+=this.components[e].getArea();return t}},{key:"equals",value:function(t){var e=!0;if(t&&t.CLASS_NAME&&this.CLASS_NAME===t.CLASS_NAME)if(dt.isArray(t.components)&&t.components.length===this.components.length){for(var r=0,n=this.components.length;r<n;++r)if(!this.components[r].equals(t.components[r])){e=!1;break}}else e=!1;else e=!1;return e}},{key:"getVertices",value:function(t){for(var e=[],r=0,n=this.components.length;r<n;++r)Array.prototype.push.apply(e,this.components[r].getVertices(t));return e}}])&&St(e.prototype,r),n&&St(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tt(t){"@babel/helpers - typeof";return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ct(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function At(t,e){return(At=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rt(t);if(e){var o=Rt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Tt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rt(t){return(Rt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&At(t,e)}(i,jt);var e,r,n,o=Mt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.MultiPoint",e.geometryType="MultiPoint",e}return e=i,(r=[{key:"addPoint",value:function(t,e){this.addComponent(t,e)}},{key:"removePoint",value:function(t){this.removeComponent(t)}}])&&Ct(e.prototype,r),n&&Ct(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Nt(t){"@babel/helpers - typeof";return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function It(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dt(t,e){return(Dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ft(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Bt(t);if(e){var o=Bt(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Nt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Bt(t){return(Bt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dt(t,e)}(i,Lt);var e,r,n,o=Ft(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],e.CLASS_NAME="SuperMap.Geometry.Curve",e.geometryType="Curve",e}return e=i,r&&It(e.prototype,r),n&&It(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function Ut(t){"@babel/helpers - typeof";return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vt(){return(Vt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ht(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jt(t,e){return(Jt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ht(t);if(e){var o=Ht(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ut(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ht(t){return(Ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wt=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jt(t,e)}(i,nt);var e,r,n,o=qt(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).x=parseFloat(t),a.y=parseFloat(e),a.tag=n||0==n?parseFloat(n):null,a.type=r||"Point",a.CLASS_NAME="SuperMap.Geometry.Point",a.geometryType="Point",a}return e=i,(r=[{key:"clone",value:function(t){return null==t&&(t=new i(this.x,this.y)),dt.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new _t(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(t){var e=!1;return null!=t&&(e=this.x===t.x&&this.y===t.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(t.x)&&isNaN(t.y)),e}},{key:"move",value:function(t,e){this.x=this.x+t,this.y=this.y+e,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,Vt(Ht(i.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(){return[this]}}])&&zt(e.prototype,r),n&&zt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Yt(t){"@babel/helpers - typeof";return(Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xt(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qt(){return(Qt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$t(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Zt(t,e){return(Zt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kt(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$t(t);if(e){var o=$t(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yt(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function $t(t){return($t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var te=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zt(t,e)}(i,Gt);var e,r,n,o=Kt(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.Geometry.LineString",e.geometryType="LineString",e}return e=i,n=[{key:"calculateCircle",value:function(t){if(t.length<3)return t;var e={},r=t[0],n=t[1],o=t[2],i=0,a=0,s=!0,l=0,u=0,c=0,f=[],h=(o.y-r.y)/(o.x-r.x),p=o.y-h*o.x;if(o.x!=r.x&&o.y!=r.y&&n.y==h*n.x+p||o.x==r.x&&n.x==r.x||o.y==r.y&&n.y==r.y||o.x==r.x&&o.y==r.y||o.x==n.x&&o.y==n.y||r.x==n.x&&r.y==n.y)f.push(r),f.push(n),f.push(o);else{var y=(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y))*(2*(o.y-r.y))-(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))*(2*(n.y-r.y)),d=2*(n.x-r.x)*(o.x*o.x+o.y*o.y-(r.x*r.x+r.y*r.y))-2*(o.x-r.x)*(n.x*n.x+n.y*n.y-(r.x*r.x+r.y*r.y)),b=4*((n.x-r.x)*(o.y-r.y)-(o.x-r.x)*(n.y-r.y));e.x=y/b,e.y=d/b;var v=(2*(i=Math.sqrt((r.x-e.x)*(r.x-e.x)+(r.y-e.y)*(r.y-e.y)))*i-((r.x-o.x)*(r.x-o.x)+(r.y-o.y)*(r.y-o.y)))/(2*i*i);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=o.x==r.x?e.x>r.x&&n.x>r.x||e.x<r.x&&n.x<r.x?360-c:c:e.y>h*e.x+p&&n.y>h*n.x+p||e.y<h*e.x+p&&n.y<h*n.x+p?360-c:c)/72,o.y!=r.y?o.x==r.x?o.y>r.y?n.x<r.x&&(s=!1):n.x>r.x&&(s=!1):o.x<r.x?n.y<h*n.x+p&&(s=!1):n.y>h*n.x+p&&(s=!1):o.x>r.x?n.y>r.y&&(s=!1):n.y<r.y&&(s=!1);var m=(r.y-e.y)/(r.x-e.x),g=m>=0?180*Math.atan(m)/Math.PI:Math.abs(180*Math.atan(m)/Math.PI)+90,w=Math.abs(e.y);r.y==w&&w==o.y&&r.x<o.x&&(g+=180);var _=r.y-e.y;f.push(r);for(var O=1;O<72;O++){l=a*O,u=g,s?_>=0?m>=0?u+=l:u=180-(u-90)+l:u=m>0?u-180+l:90-u+l:_>=0?m>=0?u-=l:u=180-(u-90)-l:u=m>=0?u-180-l:90-u-l,u=u*Math.PI/180;var S=e.x+i*Math.cos(u),x=e.y+i*Math.sin(u);f.push(new Wt(S,x))}f.push(o)}return f}},{key:"createLineEPS",value:function(t){var e=[],r=t.length;if(r<2)return t;for(var n=0;n<r;){if("LTypeArc"==t[n].type){var o=i.createLineArc(e,n,r,t);e=o[0],n=o[1]}else e.push(t[n]),n++}return e}},{key:"createLineArc",value:function(t,e,r,n){if(0==e){var o=i.addPointEPS(n,e,r,"LTypeArc");Array.prototype.push.apply(t,o[0]),e=o[1]+1}else if(e==r-1){var a=[n[e-1],n[e]],s=i.calculateCircle(a);Array.prototype.push.apply(t,s),e++}else{var l=i.addPointEPS(n,e,r,"LTypeArc");t.pop(),Array.prototype.push.apply(t,l[0]),e=l[1]+1}return[t,e]}},{key:"addPointEPS",value:function(t,e,r,n){var o,a=[],s=e+1;return 0==e?Array.prototype.push.apply(a,[t[e],t[e+1]]):e==r-1?Array.prototype.push.apply(a,[t[e-1],t[e]]):Array.prototype.push.apply(a,[t[e-1],t[e],t[e+1]]),"LTypeCurve"==n?o=i.calculatePointsFBZN(a):"LTypeArc"==n&&(o=i.calculateCircle(a)),[o,s]}}],(r=[{key:"removeComponent",value:function(t){var e=this.components&&this.components.length>2;return e&&Qt($t(i.prototype),"removeComponent",this).apply(this,arguments),e}},{key:"getSortedSegments",value:function(){for(var t,e,r=this.components.length-1,n=new Array(r),o=0;o<r;++o)t=this.components[o],e=this.components[o+1],t.x<e.x?n[o]={x1:t.x,y1:t.y,x2:e.x,y2:e.y}:n[o]={x1:e.x,y1:e.y,x2:t.x,y2:t.y};return n.sort(function(t,e){return t.x1-e.x1})}},{key:"getVertices",value:function(t){return!0===t?[this.components[0],this.components[this.components.length-1]]:!1===t?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&Xt(e.prototype,r),n&&Xt(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ee(t){"@babel/helpers - typeof";return(ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function re(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ne(){return(ne="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ae(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oe(t,e){return(oe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ae(t);if(e){var o=ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ee(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ae(t){return(ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var se=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oe(t,e)}(i,nt);var e,r,n,o=ie(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).x=parseFloat(t),n.y=parseFloat(e),n.text=r.toString(),n.bsInfo={h:null,w:null},n.element=document.createElement("span"),n.CLASS_NAME="SuperMap.Geometry.GeoText",n.geometryType="GeoText",n}return e=i,(r=[{key:"destroy",value:function(){ne(ae(i.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new Wt(this.x,this.y)}},{key:"clone",value:function(t){return null==t&&(t=new i(this.x,this.y,this.text)),dt.applyDefaults(t,this),t}},{key:"calculateBounds",value:function(){this.bounds=new _t(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(t,e,r,n){var o,i,a,s,l=dt.cloneObject(t),u=(n.label||this.text).split("\n").length;if(e=parseFloat(e),r=parseFloat(r),u>1&&(r=parseFloat(r)*u),n.labelAlign&&"cm"!==n.labelAlign)switch(n.labelAlign){case"lt":l.x+=e/2,l.y+=r/2;break;case"lm":l.x+=e/2;break;case"lb":l.x+=e/2,l.y-=r/2;break;case"ct":l.y+=r/2;break;case"cb":l.y-=r/2;break;case"rt":l.x-=e/2,l.y+=r/2;break;case"rm":l.x-=e/2;break;case"rb":l.x-=e/2,l.y-=r/2}return this.bsInfo.h=r,this.bsInfo.w=e,o=l.x-parseFloat(e)/2,i=l.y+parseFloat(r)/2,s=l.x+parseFloat(e)/2,a=l.y-parseFloat(r)/2,new _t(o,i,s,a)}},{key:"getLabelPxBoundsByText",value:function(t,e){var r,n,o,i,a=this.getLabelPxSize(e),s=dt.cloneObject(t);if(e.labelAlign&&"cm"!==e.labelAlign)switch(e.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,r=s.x-a.w/2,n=s.y+a.h/2,i=e.fontStyle&&"italic"===e.fontStyle?s.x+a.w/2+parseInt(parseFloat(e.fontSize)/2):s.x+a.w/2,o=s.y-a.h/2,new _t(r,n,i,o)}},{key:"getLabelPxSize",value:function(t){var e,r,n,o,i=parseFloat(t.strokeWidth);e=t.label||this.text,r=t.fontSize?parseFloat(t.fontSize):parseFloat("12px");var a=e.split("\n"),s=a.length;o=s>1?r*s+s+i+.2*r:r+i+.2*r+1,n=0,this.labelWTmp&&n<this.labelWTmp&&(n=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=dt.getTextBounds(t,a[l],this.element).textWidth+1*u.textC+i;n<c&&(n=c)}var f=new Object;return f.h=o,f.w=n,f}},{key:"getTextCount",value:function(t){for(var e={},r=0,n=0,o=0;o<t.length;o++)t.charCodeAt(o)>255?r++:n++;return e.cnC=r,e.enC=n,e.textC=t.length,e}}])&&re(e.prototype,r),n&&re(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function le(t){"@babel/helpers - typeof";return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ue(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ce(){return(ce="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pe(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fe(t,e){return(fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function he(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=pe(t);if(e){var o=pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===le(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pe(t){return(pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ye=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fe(t,e)}(i,te);var e,r,n,o=he(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Point"],e.CLASS_NAME="SuperMap.Geometry.LinearRing",e.geometryType="LinearRing",e}return e=i,(r=[{key:"addComponent",value:function(t,e){var r=!1,n=this.components.pop();null==e&&t.equals(n)||(r=ce(pe(i.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return ce(pe(i.prototype),"addComponent",this).apply(this,[o]),r}},{key:"removeComponent",value:function(t){var e=this.components&&this.components.length>3;if(e){this.components.pop(),ce(pe(i.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];ce(pe(i.prototype),"addComponent",this).apply(this,[r])}return e}},{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>2){for(var e=0,r=0,n=this.components.length;r<n-1;r++){var o=this.components[r],i=this.components[r+1];e+=(o.x+i.x)*(i.y-o.y)}t=-e/2}return t}},{key:"getVertices",value:function(t){return!0===t?[]:this.components.slice(0,this.components.length-1)}}])&&ue(e.prototype,r),n&&ue(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function de(t){"@babel/helpers - typeof";return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ve(t,e){return(ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function me(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ge(t);if(e){var o=ge(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===de(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ge(t){return(ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var we=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ve(t,e)}(i,jt);var e,r,n,o=me(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.LineString"],e.CLASS_NAME="SuperMap.Geometry.MultiLineString",e.geometryType="MultiLineString",e}return e=i,r&&be(e.prototype,r),n&&be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function _e(t){"@babel/helpers - typeof";return(_e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Se(t,e){return(Se=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xe(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Pe(t);if(e){var o=Pe(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_e(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Pe(t){return(Pe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ee=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Se(t,e)}(i,jt);var e,r,n,o=xe(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.Polygon"],e.CLASS_NAME="SuperMap.Geometry.MultiPolygon",e.geometryType="MultiPolygon",e}return e=i,r&&Oe(e.prototype,r),n&&Oe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}();function ke(t){"@babel/helpers - typeof";return(ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Te(t,e){return(Te=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ce(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ae(t);if(e){var o=Ae(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ae(t){return(Ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Me=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Te(t,e)}(i,jt);var e,r,n,o=Ce(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).componentTypes=["SuperMap.Geometry.LinearRing"],e.CLASS_NAME="SuperMap.Geometry.Polygon",e.geometryType="Polygon",e}return e=i,(r=[{key:"getArea",value:function(){var t=0;if(this.components&&this.components.length>0){t+=Math.abs(this.components[0].getArea());for(var e=1,r=this.components.length;e<r;e++)t-=Math.abs(this.components[e].getArea())}return t}}])&&je(e.prototype,r),n&&je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Re(t){"@babel/helpers - typeof";return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Le(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ne(t,e){return(Ne=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ie(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=De(t);if(e){var o=De(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Re(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function De(t){return(De=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fe=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ne(t,e)}(i,nt);var e,r,n,o=Ie(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).x=t,a.y=e,a.width=r,a.height=n,a.CLASS_NAME="SuperMap.Geometry.Rectangle",a.geometryType="Rectangle",a}return e=i,(r=[{key:"calculateBounds",value:function(){this.bounds=new _t(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Le(e.prototype,r),n&&Le(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Be(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ge=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=e||"",this.name=r||"token",this.CLASS_NAME="SuperMap.Credential"}var e,r,n;return e=t,(r=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Be(e.prototype,r),n&&Be(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();Ge.CREDENTIAL=null;var Ue={toISOString:function(){if("toISOString"in Date.prototype)return function(t){return t.toISOString()};var t=function(t,e){for(var r=t+"";r.length<e;)r="0"+r;return r};return function(e){return isNaN(e.getTime())?"Invalid Date":e.getUTCFullYear()+"-"+t(e.getUTCMonth()+1,2)+"-"+t(e.getUTCDate(),2)+"T"+t(e.getUTCHours(),2)+":"+t(e.getUTCMinutes(),2)+":"+t(e.getUTCSeconds(),2)+"."+t(e.getUTCMilliseconds(),3)+"Z"}}(),parse:function(t){var e,r=t.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(r&&(r[1]||r[7])){var n=parseInt(r[1],10)||0,o=parseInt(r[2],10)-1||0,i=parseInt(r[3],10)||1;e=new Date(Date.UTC(n,o,i));var a=r[7];if(a){var s=parseInt(r[4],10),l=parseInt(r[5],10),u=parseFloat(r[6]),c=0|u,f=Math.round(1e3*(u-c));if(e.setUTCHours(s,l,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(r[8],10)||0));e=new Date(e.getTime()+h)}}}else e=new Date("invalid");return e}},ze={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(t){return t.target||t.srcElement},isSingleTouch:function(t){return t.touches&&1===t.touches.length},isMultiTouch:function(t){return t.touches&&t.touches.length>1},isLeftClick:function(t){return t.which&&1===t.which||t.button&&1===t.button},isRightClick:function(t){return t.which&&3===t.which||t.button&&2===t.button},stop:function(t,e){e||(t.preventDefault?t.preventDefault():t.returnValue=!1),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0},findElement:function(t,e){for(var r=ze.element(t);r.parentNode&&(!r.tagName||r.tagName.toUpperCase()!=e.toUpperCase());)r=r.parentNode;return r},observe:function(t,e,r,n){var o=dt.getElement(t);if(n=n||!1,"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.attachEvent)&&(e="keydown"),this.observers||(this.observers={}),!o._eventCacheID){var i="eventCacheID_";o.id&&(i=o.id+"_"+i),o._eventCacheID=dt.createUniqueID(i)}var a=o._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:o,name:e,observer:r,useCapture:n}),o.addEventListener?"mousewheel"===e?o.addEventListener(e,r,{useCapture:n,passive:!1}):o.addEventListener(e,r,n):o.attachEvent&&o.attachEvent("on"+e,r)},stopObservingElement:function(t){var e=dt.getElement(t)._eventCacheID;this._removeElementObservers(ze.observers[e])},_removeElementObservers:function(t){if(t)for(var e=t.length-1;e>=0;e--){var r=t[e],n=new Array(r.element,r.name,r.observer,r.useCapture);ze.stopObserving.apply(this,n)}},stopObserving:function(t,e,r,n){n=n||!1;var o=dt.getElement(t),i=o._eventCacheID;"keypress"===e&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(e="keydown");var a=!1,s=ze.observers[i];if(s)for(var l=0;!a&&l<s.length;){var u=s[l];if(u.name===e&&u.observer===r&&u.useCapture===n){s.splice(l,1),0==s.length&&delete ze.observers[i],a=!0;break}l++}return a&&(o.removeEventListener?o.removeEventListener(e,r,n):o&&o.detachEvent&&o.detachEvent("on"+e,r)),a},unloadCache:function(){if(ze&&ze.observers){for(var t in ze.observers){var e=ze.observers[t];ze._removeElementObservers.apply(this,[e])}ze.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Ve(t){"@babel/helpers - typeof";return(Ve="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Je(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}ze.observe(window,"resize",ze.unloadCache,!1);var qe=function(){function t(e,r,n,o,i){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=e,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=o,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,dt.extend(this,i),null!=n)for(var a=0,s=n.length;a<s;a++)this.addEventType(n[a]);null!=r&&this.attachToElement(r),this.CLASS_NAME="SuperMap.Events"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){for(var t in this.extensions)"boolean"!=typeof this.extensions[t]&&this.extensions[t].destroy();this.extensions=null,this.element&&(ze.stopObservingElement(this.element),this.element.hasScrollEvent&&ze.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(t){this.listeners[t]||(this.eventTypes.push(t),this.listeners[t]=[])}},{key:"attachToElement",value:function(t){this.element?ze.stopObservingElement(this.element):(this.eventHandler=tt.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=tt.bind(this.clearMouseCache,this)),this.element=t;for(var e=0,r=this.BROWSER_EVENTS.length;e<r;e++){var n=this.BROWSER_EVENTS[e];this.addEventType(n),ze.observe(t,n,this.eventHandler)}ze.observe(t,"dragstart",ze.stop)}},{key:"on",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.register(e,t.scope,t[e])}},{key:"register",value:function(e,r,n,o){if(e in t&&!this.extensions[e]&&(this.extensions[e]=new t[e](this)),null!=n&&-1!==dt.indexOf(this.eventTypes,e)){null==r&&(r=this.object);var i=this.listeners[e];i||(i=[],this.listeners[e]=i,this.extensionCount[e]=0);var a={obj:r,func:n};o?(i.splice(this.extensionCount[e],0,a),"object"===Ve(o)&&o.extension&&this.extensionCount[e]++):i.push(a)}}},{key:"registerPriority",value:function(t,e,r){this.register(t,e,r,!0)}},{key:"un",value:function(t){for(var e in t)"scope"!==e&&t.hasOwnProperty(e)&&this.unregister(e,t.scope,t[e])}},{key:"unregister",value:function(t,e,r){null==e&&(e=this.object);var n=this.listeners[t];if(null!=n)for(var o=0,i=n.length;o<i;o++)if(n[o].obj===e&&n[o].func===r){n.splice(o,1);break}}},{key:"remove",value:function(t){null!=this.listeners[t]&&(this.listeners[t]=[])}},{key:"triggerEvent",value:function(t,e){var r=this.listeners[t];if(r&&0!=r.length){var n;null==e&&(e={}),e.object=this.object,e.element=this.element,e.type||(e.type=t);for(var o=0,i=(r=r.slice()).length;o<i;o++){var a=r[o];if(void 0!=(n=a.func.apply(a.obj,[e]))&&!1===n)break}return this.fallThrough||ze.stop(e,!0),n}}},{key:"handleBrowserEvent",value:function(t){var e=t.type,r=this.listeners[e];if(r&&0!=r.length){var n=t.touches;if(n&&n[0]){for(var o,i=0,a=0,s=n.length,l=0;l<s;++l)i+=(o=n[l]).clientX,a+=o.clientY;t.clientX=i/s,t.clientY=a/s}this.includeXY&&(t.xy=this.getMousePosition(t)),this.triggerEvent(e,t)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var t=document.body;t&&(0==t.scrollTop&&0==t.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(t){if(this.includeXY?this.element.hasScrollEvent||(ze.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var e=dt.getViewportElement();this.element.scrolls=[e.scrollLeft,e.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=dt.pagePosition(this.element)),new X(t.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],t.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Je(e.prototype,r),n&&Je(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function He(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}qe.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];var We=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.Feature",this.layer=e,this.id=dt.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=r,this.data=null!=n?n:{}}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&He(e.prototype,r),n&&He(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ye(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Xe=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.red=e||0==e?e:255,this.green=r||0,this.blue=n||0,this.CLASS_NAME="SuperMap.ServerColor"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e){var r=new t,n=255;null!==e.red&&(n=Number(e.red)),r.red=n;var o=0;null!==e.green&&(o=Number(e.green)),r.green=o;var i=0;return null!==e.blue&&(i=Number(e.blue)),r.blue=i,r}}}],(r=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&Ye(e.prototype,r),n&&Ye(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qe(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ze=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillBackColor=new Xe(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new Xe(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new Xe(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ServerStyle"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({fillBackColor:Xe.fromJson(e.fillBackColor),fillBackOpaque:e.fillBackOpaque,fillForeColor:Xe.fromJson(e.fillForeColor),fillGradientMode:e.fillGradientMode,fillGradientAngle:e.fillGradientAngle,fillGradientOffsetRatioX:e.fillGradientOffsetRatioX,fillGradientOffsetRatioY:e.fillGradientOffsetRatioY,fillOpaqueRate:e.fillOpaqueRate,fillSymbolID:e.fillSymbolID,lineColor:Xe.fromJson(e.lineColor),lineSymbolID:e.lineSymbolID,lineWidth:e.lineWidth,markerAngle:e.markerAngle,markerSize:e.markerSize,markerSymbolID:e.markerSymbolID})}}],(r=[{key:"destroy",value:function(){var t=this;t.fillBackColor&&(t.fillBackColor.destroy(),t.fillBackColor=null),t.fillBackOpaque=null,t.fillForeColor&&(t.fillForeColor.destroy(),t.fillForeColor=null),t.fillGradientMode=null,t.fillGradientAngle=null,t.fillGradientOffsetRatioX=null,t.fillGradientOffsetRatioY=null,t.fillOpaqueRate=null,t.fillSymbolID=null,t.lineColor&&(t.lineColor.destroy(),t.lineColor=null),t.lineSymbolID=null,t.lineWidth=null,t.markerAngle=null,t.markerSize=null,t.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var t={};return t=dt.copyAttributes(t,this)}}])&&Qe(e.prototype,r),n&&Qe(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ke(t){"@babel/helpers - typeof";return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $e(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tr(t,e){return(tr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function er(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nr(t);if(e){var o=nr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ke(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rr(t)}(this,r)}}function rr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function nr(t){return(nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var or=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tr(t,e)}(i,Wt);var e,r,n,o=er(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).measure=null,t&&dt.extend(rr(e),t),e.CLASS_NAME="SuperMap.PointWithMeasure",e}return e=i,n=[{key:"fromJson",value:function(t){if(t)return new i({x:t.x,y:t.y,measure:t.measure})}}],(r=[{key:"equals",value:function(t){var e=!1;if(null!=t){var r=this.x===t.x&&this.y===t.y&&this.measure===t.measure,n=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),o=isNaN(t.x)&&isNaN(t.y)&&isNaN(t.measure);e=r||n&&o}return e}},{key:"toJson",value:function(){var t="{";return null!=this.measure&&void 0!=this.measure&&(t+='"measure":'+this.measure+","),t+='"x":'+this.x+",",t+='"y":'+this.y,t+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&$e(e.prototype,r),n&&$e(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ir(t){"@babel/helpers - typeof";return(ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ar(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sr(t,e){return(sr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cr(t);if(e){var o=cr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ir(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ur(t)}(this,r)}}function ur(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cr(t){return(cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sr(t,e)}(i,jt);var e,r,n,o=lr(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],e&&dt.extend(ur(r),e),r.CLASS_NAME="SuperMap.Route",r.geometryType="LINEM",r}return e=i,n=[{key:"fromJson",value:function(t){if(t){var e=t.parts||[],r=t.points||[],n=e.length,o=[];if(!(n>0))return null;for(var a=0,s=0,l=[];a<n;a++){for(var u=0;u<e[a];u++)l.push(or.fromJson(r[s+u]));s+=e[a],l[0].equals(l[e[a]-1])?o.push(new ye(l)):o.push(new te(l)),l=[]}return new i(o,{id:t.id,center:t.center,style:t.style,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type,parts:t.parts})}}}],(r=[{key:"toJson",value:function(){var t="{";if(null!=this.id&&void 0!=this.id&&(t+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(t+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(t+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(t+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(t+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(t+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(t+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){t+='"parts":['+this.parts[0];for(var e=1;e<this.parts.length;e++)t+=","+this.parts[e];t+="],"}if(null!=this.components&&this.components.length>0){t+='"points":[';for(var r=0,n=this.components.length;r<n;r++)for(var o=0,i=this.components[r].components.length;o<i;o++)t+=this.components[r].components[o].toJson()+",";t=t.replace(/,$/g,""),t+="]"}return t=t.replace(/,$/g,""),t+="}"}},{key:"destroy",value:function(){var t=this;t.id=null,t.center=null,t.style=null,t.length=null,t.maxM=null,t.minM=null,t.type=null,t.parts=null,t.components.length=0,t.components=null,t.componentTypes=null}}])&&ar(e.prototype,r),n&&ar(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ServerGeometry"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({id:e.id,style:Ze.fromJson(e.style),parts:e.parts,partTopo:e.partTopo,points:e.points,center:e.center,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type})}},{key:"fromGeometry",value:function(e){if(e){var r=0,n=[],o=[],i=null,s=e.components,l=e.CLASS_NAME,u={epsgCode:e.SRID};if(isNaN(e.id)||(r=e.id),"SuperMap.Geometry.LinearRing"!=l&&"SuperMap.Geometry.LineString"!=l&&(e instanceof Lt||e instanceof we)){for(var c=s.length,f=0;f<c;f++){var h=s[f].getVertices(),p=h.length;n.push(p);for(var y=0;y<p;y++)o.push(new Wt(h[y].x,h[y].y))}i="SuperMap.Geometry.MultiPoint"==l?a.POINT:a.LINE}else if(e instanceof Ee){for(var d=s.length,b=0;b<d;b++)for(var v=s[b].components,m=v.length,g=0;g<m;g++){var w=v[g].getVertices(),_=w.length+1;n.push(_);for(var O=0;O<_-1;O++)o.push(new Wt(w[O].x,w[O].y));o.push(new Wt(w[0].x,w[0].y))}i=a.REGION}else if(e instanceof Me){for(var S=s.length,x=0;x<S;x++){var P=s[x].getVertices(),E=P.length+1;n.push(E);for(var k=0;k<E-1;k++)o.push(new Wt(P[k].x,P[k].y));o.push(new Wt(P[0].x,P[0].y))}i=a.REGION}else{for(var j=e.getVertices(),T=j.length,C=0;C<T;C++)o.push(new Wt(j[C].x,j[C].y));e instanceof ye&&(o.push(new Wt(j[0].x,j[0].y)),T++),n.push(T),i=e instanceof Wt?a.POINT:a.LINE}return new t({id:r,style:null,parts:n,points:o,type:i,prjCoordSys:u})}}},{key:"IsClockWise",value:function(t){var e=t.length;if(e<3)return 0;var r=t[0].y*(t[e-1].x-t[1].x);t.push(t[0]);for(var n=1;n<e;n++)r+=t[n].y*(t[n-1].x-t[n+1].x);return.5*r}},{key:"bubbleSort",value:function(t,e,r,n){for(var o=0;o<t.length;o++)for(var i=0;i<t.length;i++)if(t[o]>t[i]){var a=t[i];t[i]=t[o],t[o]=a;var s=e[i];if(e[i]=e[o],e[o]=s,r&&r.length>0){var l=r[i];r[i]=r[o],r[o]=l}if(n&&n.length>0){var u=n[i];n[i]=n[o],n[o]=u}}}}],(r=[{key:"destroy",value:function(){var t=this;t.id=null,t.style=null,t.parts=null,t.partTopo=null,t.points=null,t.type=null,t.prjCoordSys=null}},{key:"toGeometry",value:function(){var t=this;switch(t.type.toUpperCase()){case a.POINT:return t.toGeoPoint();case a.LINE:return t.toGeoLine();case a.LINEM:return t.toGeoLinem();case a.REGION:return t.toGeoRegion();case a.POINTEPS:return t.toGeoPoint();case a.LINEEPS:return t.toGeoLineEPS();case a.REGIONEPS:return t.toGeoRegionEPS();case a.GEOCOMPOUND:return t.transformGeoCompound()}}},{key:"toGeoPoint",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r)return new Wt(e[0].x,e[0].y);for(var n=[],o=0;o<r;o++)n.push(new Wt(e[o].x,e[o].y));return new Lt(n)}return null}},{key:"toGeoLine",value:function(){var t=this.parts||[],e=this.points||[],r=t.length;if(r>0){if(1===r){for(var n=[],o=0;o<t[0];o++)n.push(new Wt(e[o].x,e[o].y));return n[0].equals(n[t[0]-1])?new ye(n):new te(n)}for(var i=[],a=0;a<r;a++){for(var s=[],l=0;l<t[a];l++)s.push(new Wt(e[l].x,e[l].y));i.push(new te(s)),e.splice(0,t[a])}return new we(i)}return null}},{key:"toGeoLineEPS",value:function(){var t,e,r,n,o,i=this.parts||[],a=this.points||[],s=i.length;if(s>0){if(1===s){for(t=0,r=[];t<i[0];t++)r.push(new Wt(a[t].x,a[t].y,a[t].type));return r[0].equals(r[i[0]-1])?(o=te.createLineEPS(r),new ye(o)):(o=te.createLineEPS(r),new te(o))}for(t=0,n=[];t<s;t++){for(e=0,r=[];e<i[t];e++)r.push(new Wt(a[e].x,a[e].y));o=te.createLineEPS(r),n.push(new te(o)),a.splice(0,i[t])}return new we(n)}return null}},{key:"toGeoLinem",value:function(){return fr.fromJson(this)}},{key:"toGeoRegion",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i=[],a=[];if(1==o){for(var s=0;s<n.length;s++)a.push(new Wt(n[s].x,n[s].y));return i.push(new Me([new ye(a)])),new Ee(i)}for(var l=[],u=[],c=[],f=[],h=[],p=0,y=0;p<o;p++){for(var d=0;d<e[p];d++)a.push(new Wt(n[y+d].x,n[y+d].y));y+=e[p];var b=new Me([new ye(a)]);a=[],c.push(b),0===r.length&&f.push(b.getBounds()),h.push(1),u.push(b.getArea())}if(0===r.length){t.bubbleSort(u,c,r,f);for(var v=[],m=1;m<c.length;m++)for(var g=m-1;g>=0;g--)if(v[m]=-1,f[g].containsBounds(f[m])){h[m]=-1*h[g],h[m]<0&&(v[m]=g);break}for(var w=0;w<c.length;w++)h[w]>0?i.push(c[w]):(i[v[w]].components=i[v[w]].components.concat(c[w].components),i.push(""))}else{i=new Array;for(var _=0;_<c.length;_++)if(r[_]&&-1==r[_]?l=l.concat(c[_].components):(l.length>0&&i.length>0&&(i[i.length-1].components=i[i.length-1].components.concat(l),l=[]),i.push(c[_])),_==o-1){var O=i.length;if(O)i[O-1].components=i[O-1].components.concat(l);else for(var S=0,x=l.length;S<x;S++)i.push(new Me(l))}}return new Ee(i)}},{key:"toGeoRegionEPS",value:function(){var e=this.parts||[],r=this.partTopo||[],n=this.points||[],o=e.length;if(o<=0)return null;var i,a=[],s=[];if(1==o){for(var l=0;l<n.length;l++)s.push(new Wt(n[l].x,n[l].y));return i=te.createLineEPS(s),a.push(new Me([new ye(i)])),new Ee(a)}for(var u=[],c=[],f=[],h=[],p=[],y=0,d=0;y<o;y++){for(var b=0;b<e[y];b++)s.push(new Wt(n[d+b].x,n[d+b].y));d+=e[y],i=te.createLineEPS(s);var v=new Me([new ye(i)]);s=[],f.push(v),0===r.length&&h.push(v.getBounds()),p.push(1),c.push(v.getArea())}if(0===r.length){t.bubbleSort(c,f,r,h);for(var m=[],g=1;g<f.length;g++)for(var w=g-1;w>=0;w--)if(m[g]=-1,h[w].containsBounds(h[g])){p[g]=-1*p[w],p[g]<0&&(m[g]=w);break}for(var _=0;_<f.length;_++)p[_]>0?a.push(f[_]):(a[m[_]].components=a[m[_]].components.concat(f[_].components),a.push(""))}else{a=new Array;for(var O=0;O<f.length;O++)if(r[O]&&-1==r[O]?u=u.concat(f[O].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[O])),O==o-1){var S=a.length;if(S)a[S-1].components=a[S-1].components.concat(u);else for(var x=0,P=u.length;x<P;x++)a.push(new Me(u))}}return new Ee(a)}},{key:"transformGeoCompound",value:function(){var e=this.geoParts||[],r=e.length;if(r<=0)return null;for(var n=[],o=0;o<r;o++){var i=e[o];n.push(new t(i).toGeometry())}return new jt(n)}}])&&hr(e.prototype,r),n&&hr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yr(t){"@babel/helpers - typeof";return(yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function br(t,e){return(br=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gr(t);if(e){var o=gr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return mr(t)}(this,r)}}function mr(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function gr(t){return(gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&br(t,e)}(i,pr);var e,r,n,o=vr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.Geometry3D",e.position=null,e.rotationX=null,e.rotationY=null,e.rotationZ=null,e.scaleX=null,e.scaleY=null,e.scaleZ=null,dt.extend(mr(e),t),e}return e=i,(r=[{key:"destroy",value:function(){this.position=null,this.rotationX=null,this.rotationY=null,this.rotationZ=null,this.scaleX=null,this.scaleY=null,this.scaleZ=null}}])&&dr(e.prototype,r),n&&dr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _r(t){"@babel/helpers - typeof";return(_r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Or(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sr(){return(Sr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Er(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xr(t,e){return(xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Er(t);if(e){var o=Er(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Er(t){return(Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kr="Unknown",jr="Insert",Tr="Update",Cr="Delete",Ar=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xr(t,e)}(i,We);var e,r,n,o=Pr(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,null,null,e)).fid=null,n.geometry=t||null,n.attributes={},e&&(n.attributes=dt.extend(n.attributes,e)),n.bounds=null,n.state=null,n.style=r||null,n.url=null,n.lonlat=null,n.CLASS_NAME="SuperMap.Feature.Vector",i.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},n}return e=i,(r=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Sr(Er(i.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new i(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(t){if(t===Tr)switch(this.state){case kr:case Cr:this.state=t}else if(t===jr)switch(this.state){case kr:break;default:this.state=t}else if(t===Cr)switch(this.state){case jr:case Cr:break;case kr:case Tr:this.state=t}else t===kr&&(this.state=t)}}])&&Or(e.prototype,r),n&&Or(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Rr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.data=null,this.keepData=!1,dt.extend(this,e),this.options=e,this.CLASS_NAME="SuperMap.Format"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"read",value:function(t){}},{key:"write",value:function(t){}}])&&Mr(e.prototype,r),n&&Mr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lr(t){"@babel/helpers - typeof";return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ir(t,e){return(Ir=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Dr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fr(t);if(e){var o=Fr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Lr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fr(t){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Br=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ir(t,e)}(i,Rr);var e,r,n,o=Dr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).indent="    ",e.space=" ",e.newline="\n",e.level=0,e.pretty=!1,e.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),e.CLASS_NAME="SuperMap.Format.JSON",e.serialize={object:function(t){if(null==t)return"null";if(t.constructor===Date)return this.serialize.date.apply(this,[t]);if(t.constructor===Array)return this.serialize.array.apply(this,[t]);var e,r,n,o=["{"];this.level+=1;var i=!1;for(e in t)t.hasOwnProperty(e)&&(r=this.write.apply(this,[e,this.pretty]),n=this.write.apply(this,[t[e],this.pretty]),null!=r&&null!=n&&(i&&o.push(","),o.push(this.writeNewline(),this.writeIndent(),r,":",this.writeSpace(),n),i=!0));return this.level-=1,o.push(this.writeNewline(),this.writeIndent(),"}"),o.join("")},array:function(t){var e,r=["["];this.level+=1;for(var n=0,o=t.length;n<o;++n)null!=(e=this.write.apply(this,[t[n],this.pretty]))&&(n>0&&r.push(","),r.push(this.writeNewline(),this.writeIndent(),e));return this.level-=1,r.push(this.writeNewline(),this.writeIndent(),"]"),r.join("")},string:function(t){var e={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(t)?'"'+t.replace(/([\x00-\x1f\\"])/g,function(t,r){var n=e[r];return n||(n=r.charCodeAt(),"\\u00"+Math.floor(n/16).toString(16)+(n%16).toString(16))})+'"':'"'+t+'"'},number:function(t){return isFinite(t)?String(t):"null"},boolean:function(t){return String(t)},date:function(t){function e(t){return t<10?"0"+t:t}return'"'+t.getFullYear()+"-"+e(t.getMonth()+1)+"-"+e(t.getDate())+"T"+e(t.getHours())+":"+e(t.getMinutes())+":"+e(t.getSeconds())+'"'}},e}return e=i,(r=[{key:"read",value:function(t,e){var r;if(this.nativeJSON)try{r=JSON.parse(t,e)}catch(e){return{data:t}}return this.keepData&&(this.data=r),r}},{key:"write",value:function(t,e){this.pretty=!!e;var r=null,n=Lr(t);if(this.serialize[n])try{r=!this.pretty&&this.nativeJSON?JSON.stringify(t):this.serialize[n].apply(this,[t])}catch(t){}return r}},{key:"writeIndent",value:function(){var t=[];if(this.pretty)for(var e=0;e<this.level;++e)t.push(this.indent);return t.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&Nr(e.prototype,r),n&&Nr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Gr(t){"@babel/helpers - typeof";return(Gr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ur(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zr(){return(zr="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qr(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vr(t,e){return(Vr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qr(t);if(e){var o=qr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vr(t,e)}(i,Br);var e,r,n,o=Jr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).ignoreExtraDims=!0,e.CLASS_NAME="SuperMap.Format.GeoJSON",e.parseCoords={point:function(t){if(!1===this.ignoreExtraDims&&2!=t.length)throw"Only 2D points are supported: "+t;return new Wt(t[0],t[1])},multipoint:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Lt(e)},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new te(e)},multilinestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.linestring.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new we(e)},polygon:function(t){for(var e,r,n=[],o=0,i=t.length;o<i;++o){try{r=this.parseCoords.linestring.apply(this,[t[o]])}catch(t){throw t}e=new ye(r.components),n.push(e)}return new Me(n)},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=this.parseCoords.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return new Ee(e)},box:function(t){if(2!=t.length)throw"GeoJSON box coordinates must have 2 elements";return new Me([new ye([new Wt(t[0][0],t[0][1]),new Wt(t[1][0],t[0][1]),new Wt(t[1][0],t[1][1]),new Wt(t[0][0],t[1][1]),new Wt(t[0][0],t[0][1])])])}},e.extract={feature:function(t){var e=this.extract.geometry.apply(this,[t.geometry]),r={type:"Feature",properties:this.createAttributes(t),geometry:e};return t.geometry&&"TEXT"===t.geometry.type&&(r.properties.texts=t.geometry.texts,r.properties.textStyle=t.geometry.textStyle),t.fid&&(r.id=t.fid),t.ID&&(r.id=t.ID),r},geometry:function(t){if(null==t)return null;!t.parts&&t.points&&(t.parts=[t.points.length]);var e,r=t.hasOwnProperty("geometryType")?t:new pr(t).toGeometry()||t,n=r.geometryType||r.type;return"LinearRing"===n&&(n="LineString"),"LINEM"===n&&(n="MultiLineString"),e=this.extract[n.toLowerCase()].apply(this,[r]),"Collection"===(n="TEXT"===n?"Point":n)?{type:"GeometryCollection",geometries:e}:{type:n,coordinates:e}},point:function(t){var e=[t.x,t.y];for(var r in t)"x"===r||"y"===r||null===t[r]||isNaN(t[r])||e.push(t[r]);return e},text:function(t){return[t.points[0].x,t.points[0].y]},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.linestring.apply(this,[t.components[r]]));return e},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.polygon.apply(this,[t.components[r]]));return e},collection:function(t){for(var e=t.components.length,r=new Array(e),n=0;n<e;++n)r[n]=this.extract.geometry.apply(this,[t.components[n]]);return r}},e}return e=i,(r=[{key:"read",value:function(t,e,r){e=e||"FeatureCollection";var n=null,o=null;if(o="string"==typeof t?zr(qr(i.prototype),"read",this).call(this,t,r):t){if("string"!=typeof o.type);else if(this.isValidType(o,e))switch(e){case"Geometry":try{n=this.parseGeometry(o)}catch(t){}break;case"Feature":try{(n=this.parseFeature(o)).type="Feature"}catch(t){}break;case"FeatureCollection":switch(n=[],o.type){case"Feature":try{n.push(this.parseFeature(o))}catch(t){n=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{n.push(this.parseFeature(o.features[a]))}catch(t){n=null}break;default:try{var l=this.parseGeometry(o);n.push(new Ar(l))}catch(t){n=null}}}}else;return n}},{key:"write",value:function(t,e){return zr(qr(i.prototype),"write",this).call(this,this.toGeoJSON(t),e)}},{key:"fromGeoJSON",value:function(t,e,r){var n=this,o=this.read(t,e,r);return dt.isArray(o)?o.map(function(t){return n._toiSevrerFeature(t)}):this._toiSevrerFeature(o)}},{key:"toGeoJSON",value:function(t){var e={type:null};if(dt.isArray(t)){e.type="FeatureCollection";var r=t.length;e.features=new Array(r);for(var n=0;n<r;++n){var o=t[n];if(s(o)){var i={};i.geometry=o,e.features[n]=this.extract.feature.apply(this,[i])}else e.features[n]=this.extract.feature.apply(this,[o])}}else if(s(t)){var a={};a.geometry=t,e=this.extract.feature.apply(this,[a])}else e=this.extract.feature.apply(this,[t]);function s(t){return t.hasOwnProperty("parts")&&t.hasOwnProperty("points")||t.hasOwnProperty("geoParts")}return e}},{key:"isValidType",value:function(t,e){var r=!1;switch(e){case"Geometry":-1==dt.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],t.type)||(r=!0);break;case"FeatureCollection":r=!0;break;default:t.type==e&&(r=!0)}return r}},{key:"parseFeature",value:function(t){var e,r,n,o;n=t.properties?t.properties:{},o=t.geometry&&t.geometry.bbox||t.bbox;try{r=this.parseGeometry(t.geometry)}catch(t){throw t}return e=new Ar(r,n),o&&(e.bounds=_t.fromArray(o)),t.id&&(e.geometry.id=t.id,e.fid=t.id),e}},{key:"parseGeometry",value:function(t){if(null==t)return null;var e;if("GeometryCollection"==t.type){if(!dt.isArray(t.geometries))throw"GeometryCollection must have geometries array: "+t;for(var r=t.geometries.length,n=new Array(r),o=0;o<r;++o)n[o]=this.parseGeometry.apply(this,[t.geometries[o]]);e=new jt(n)}else{if(!dt.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!this.parseCoords[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{e=this.parseCoords[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(t){throw t}}return e}},{key:"createCRSObject",value:function(t){var e=t.layer.projection.toString(),r={};if(e.match(/epsg:/i)){var n=parseInt(e.substring(e.indexOf(":")+1));r=4326==n?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+n}}}return r}},{key:"_toiSevrerFeature",value:function(t){var e=t.attributes,r=[],n=[];for(var o in e)r.push(o),n.push(e[o]);var i={fieldNames:r,fieldValues:n,geometry:pr.fromGeometry(t.geometry)};return i.geometry.id=t.fid,i}},{key:"createAttributes",value:function(t){if(!t)return null;var e={};!function(t,e){if(!t.hasOwnProperty("fieldNames")||!t.hasOwnProperty("fieldValues"))return;var r=t.fieldNames,n=t.fieldValues;for(var o in r)e[r[o]]=n[o]}(t,e);var r=["fieldNames","fieldValues","geometry","stringID","ID"];for(var n in t)r.indexOf(n)>-1||(e[n]=t[n]);return e}}])&&Ur(e.prototype,r),n&&Ur(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wr(t){"@babel/helpers - typeof";return(Wr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yr(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xr(t,e){return(Xr=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qr(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Zr(t);if(e){var o=Zr(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wr(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Zr(t){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kr=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xr(t,e)}(i,Rr);var e,r,n,o=Qr(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},e.CLASS_NAME="SuperMap.Format.WKT",e.extract={point:function(t){return t.x+" "+t.y},multipoint:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.point.apply(this,[t.components[r]])+")");return e.join(",")},linestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extract.point.apply(this,[t.components[r]]));return e.join(",")},multilinestring:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},polygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.linestring.apply(this,[t.components[r]])+")");return e.join(",")},multipolygon:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push("("+this.extract.polygon.apply(this,[t.components[r]])+")");return e.join(",")},collection:function(t){for(var e=[],r=0,n=t.components.length;r<n;++r)e.push(this.extractGeometry.apply(this,[t.components[r]]));return e.join(",")}},e.parse={point:function(t){var e=K.trim(t).split(this.regExes.spaces);return new Ar(new Wt(e[0],e[1]))},multipoint:function(t){for(var e,r=K.trim(t).split(","),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.point.apply(this,[e]).geometry);return new Ar(new Lt(n))},linestring:function(t){for(var e=K.trim(t).split(","),r=[],n=0,o=e.length;n<o;++n)r.push(this.parse.point.apply(this,[e[n]]).geometry);return new Ar(new te(r))},multilinestring:function(t){for(var e,r=K.trim(t).split(this.regExes.parenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.linestring.apply(this,[e]).geometry);return new Ar(new we(n))},polygon:function(t){for(var e,r,n,o=K.trim(t).split(this.regExes.parenComma),i=[],a=0,s=o.length;a<s;++a)e=o[a].replace(this.regExes.trimParens,"$1"),r=this.parse.linestring.apply(this,[e]).geometry,n=new ye(r.components),i.push(n);return new Ar(new Me(i))},multipolygon:function(t){for(var e,r=K.trim(t).split(this.regExes.doubleParenComma),n=[],o=0,i=r.length;o<i;++o)e=r[o].replace(this.regExes.trimParens,"$1"),n.push(this.parse.polygon.apply(this,[e]).geometry);return new Ar(new Ee(n))},geometrycollection:function(t){t=t.replace(/,\s*([A-Za-z])/g,"|$1");for(var e=K.trim(t).split("|"),r=[],n=0,o=e.length;n<o;++n)r.push(this.read(e[n]));return r}},e}return e=i,(r=[{key:"read",value:function(t){var e,r,n;t=t.replace(/[\n\r]/g," ");var o=this.regExes.typeStr.exec(t);return o&&(r=o[1].toLowerCase(),n=o[2],this.parse[r]&&(e=this.parse[r].apply(this,[n]))),e}},{key:"write",value:function(t){var e,r,n;t.constructor===Array?(e=t,n=!0):(e=[t],n=!1);var o=[];n&&o.push("GEOMETRYCOLLECTION(");for(var i=0,a=e.length;i<a;++i)n&&i>0&&o.push(","),r=e[i].geometry,o.push(this.extractGeometry(r));return n&&o.push(")"),o.join("")}},{key:"extractGeometry",value:function(t){var e=t.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[e]?("collection"===e?"GEOMETRYCOLLECTION":e.toUpperCase())+"("+this.extract[e].apply(this,[t])+")":null}}])&&Yr(e.prototype,r),n&&Yr(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $r(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var r=this;e=e||{},this.speed=e.speed&&e.speed>=0?e.speed:1,this.frequency=e.speed&&e.frequency>=0?e.frequency:1e3,this.startTime=e.startTime&&null!=e.startTime?e.startTime:0,this.endTime=e.endTime&&null!=e.endTime&&e.endTime>=r.startTime?e.endTime:+new Date,this.repeat=void 0===e.repeat||e.repeat,this.reverse=void 0!==e.reverse&&e.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],r.events=new qe(this,null,this.EVENT_TYPES),r.speed=Number(r.speed),r.frequency=Number(r.frequency),r.startTime=Number(r.startTime),r.endTime=Number(r.endTime),r.startTime=Date.parse(new Date(r.startTime)),r.endTime=Date.parse(new Date(r.endTime)),r.currentTime=r.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var e,r,n;return e=t,(r=[{key:"updateOptions",value:function(t){var e=this;(t=t||{}).speed&&t.speed>=0&&(e.speed=t.speed,e.speed=Number(e.speed)),t.speed&&t.frequency>=0&&(e.frequency=t.frequency,e.frequency=Number(e.frequency)),t.startTime&&null!=t.startTime&&(e.startTime=t.startTime,e.startTime=Date.parse(new Date(e.startTime))),t.endTime&&null!=t.endTime&&t.endTime>=e.startTime&&(e.endTime=t.endTime,e.endTime=Date.parse(new Date(e.endTime))),null!=t.repeat&&(e.repeat=t.repeat),null!=t.reverse&&(e.reverse=t.reverse)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.tick(),t.events.triggerEvent("start",t.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var t=this;t.currentTime=t.startTime,t.running&&(t.running=!1),t.events.triggerEvent("stop",t.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(t){return t>=0&&(this.speed=t,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(t){return t>=0&&(this.frequency=t,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(t){var e=this;return!((t=Date.parse(new Date(t)))>e.endTime)&&(e.startTime=t,e.currentTime<e.startTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(t){var e=this;return e.endTime=Date.parse(new Date(e.endTime)),!(t<e.startTime)&&(e.endTime=t,e.currentTime>=e.endTime&&(e.currentTime=e.startTime,e.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(t){var e=this;return e.currentTime=Date.parse(new Date(e.currentTime)),t>=e.startTime&&t<=e.endTime&&(e.currentTime=t,e.startTime=e.currentTime,e.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(t){this.repeat=t}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(t){this.reverse=t}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var t=this;t.speed=null,t.frequency=null,t.startTime=null,t.endTime=null,t.currentTime=null,t.repeat=null,t.running=!1,t.reverse=null}},{key:"tick",value:function(){}}])&&$r(e.prototype,r),n&&$r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function en(t){"@babel/helpers - typeof";return(en="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nn(){return(nn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ln(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function on(t,e){return(on=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function an(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ln(t);if(e){var o=ln(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===en(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sn(t)}(this,r)}}function sn(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ln(t){return(ln=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var un,cn,fn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&on(t,e)}(i,tn);var e,r,n,o=an(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=sn(r=o.call(this,e));return n.callback=t,Function.prototype.bind||(Function.prototype.bind=function(t){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var e=Array.prototype.slice.call(arguments,1),r=this,n=function(){},o=function(){return r.apply(this instanceof n&&t?this:t,e.concat(Array.prototype.slice.call(arguments)))};return n.prototype=this.prototype,o.prototype=new n,o}),n.update=n.update.bind(n),n.oldTime=n.currentTime,n.CLASS_NAME="SuperMap.TimeFlowControl",r}return e=i,(r=[{key:"updateOptions",value:function(t){t=t||{},nn(ln(i.prototype),"updateOptions",this).call(this,t)}},{key:"start",value:function(){var t=this;t.running||(t.running=!0,t.reverse?t.currentTime===t.startTime&&(t.oldTime=t.endTime,t.currentTime=t.oldTime):t.oldTime===t.endTime&&(t.currentTime=t.startTime,t.oldTime=t.currentTime),t.tick())}},{key:"stop",value:function(){nn(ln(i.prototype),"stop",this).call(this);var t=this;t.oldTime=t.currentTime,t.running&&(t.running=!1),t.intervalId&&window.clearTimeout(t.intervalId)}},{key:"destroy",value:function(){nn(ln(i.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var t=this;t.intervalId&&window.clearInterval(t.intervalId),t.intervalId=null,t.update(),t.intervalId=window.setInterval(t.update,t.frequency)}},{key:"update",value:function(){var t=this;if(t.running)if(t.callback&&t.callback(t.currentTime),t.reverse){if(t.currentTime===t.startTime){if(!t.repeat)return t.running=!1,null;t.oldTime=t.endTime,t.currentTime=t.oldTime}else t.currentTime=t.oldTime,t.oldTime-=t.speed;t.oldTime<=t.startTime&&(t.oldTime=t.startTime)}else{if(t.currentTime===t.endTime){if(!t.repeat)return t.running=!1,t.stop(),null;t.stop(),t.currentTime=t.startTime,t.oldTime=t.currentTime,t.start()}else t.oldTime=t.currentTime,t.currentTime+=t.speed;t.currentTime>=t.endTime&&(t.currentTime=t.endTime)}}}])&&rn(e.prototype,r),n&&rn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),hn=(r(9957),r(5937),r(4238)),pn=r.n(hn),yn=window.fetch,dn={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(t){for(var e in t){this.queryKeys.push(e),"string"!=typeof t[e]&&(t[e]=dt.toJSON(t[e]));var r=encodeURIComponent(t[e]);this.queryValues.push(r)}},issue:function(t){for(var e=this,r=e.getUid(),n=t.url,o=[],i=n,a=0,s=e.queryKeys?e.queryKeys.length:0,l=0;l<s;l++)if(i.length+e.queryKeys[l].length+2>=e.limitLength){if(0==a)return!1;o.push(i),i=n,a=0,l--}else if(i.length+e.queryKeys[l].length+2+e.queryValues[l].length>e.limitLength)for(var u=e.queryValues[l];u.length>0;){var c=e.limitLength-i.length-e.queryKeys[l].length-2;i.indexOf("?")>-1?i+="&":i+="?";var f=u.substring(0,c);"%"===f.substring(c-1,c)?(c-=1,f=u.substring(0,c)):"%"===f.substring(c-2,c-1)&&(c-=2,f=u.substring(0,c)),i+=e.queryKeys[l]+"="+f,u=u.substring(c),f.length>0&&(o.push(i),i=n,a=0)}else a++,i.indexOf("?")>-1?i+="&":i+="?",i+=e.queryKeys[l]+"="+e.queryValues[l];return o.push(i),e.send(o,"SuperMapJSONPCallbacks_"+r,t&&t.proxy)},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(t,e,r){var n=t.length;if(n>0)return new Promise(function(o){for(var i=(new Date).getTime(),a=0;a<n;a++){var s=t[a];s.indexOf("?")>-1?s+="&":s+="?",s+="sectionCount="+n,s+="&sectionIndex="+a,s+="&jsonpUserID="+i,r&&(s=decodeURIComponent(s),s=r+encodeURIComponent(s)),pn()(s,{jsonpCallbackFunction:e,timeout:3e4}).then(function(t){o(t.json())})}})},GET:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(t.params),this.issue(t)},POST:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},PUT:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)},DELETE:function(t){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:t.data}),this.issue(t)}},bn=function(){return void 0!=un?un:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest},vn=function(){return cn||45e3},mn={commit:function(t,e,r,n){switch(t=t?t.toUpperCase():t){case"GET":return this.get(e,r,n);case"POST":return this.post(e,r,n);case"PUT":return this.put(e,r,n);case"DELETE":return this.delete(e,r,n);default:return this.get(e,r,n)}},supportDirectRequest:function(t,e){return!!dt.isInTheSameDomain(t)||(void 0!=e.crossOrigin?e.crossOrigin:bn()||e.proxy)},get:function(t,e,r){r=r||{};if(t=dt.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){var n={url:t=t.replace(".json",".jsonp"),data:e};return dn.GET(n)}return this.urlIsLong(t)?this._postSimulatie("GET",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"GET")},delete:function(t,e,r){r=r||{};if(t=dt.urlAppend(t,this._getParameterString(e||{})),t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=DELETE",data:e};return dn.DELETE(n)}return this.urlIsLong(t)?this._postSimulatie("DELETE",t.substring(0,t.indexOf("?")),e,r):this._fetch(t,e,r,"DELETE")},post:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:dt.urlAppend(t,"_method=POST"),data:e};return dn.POST(n)}return this._fetch(t,e,r,"POST")},put:function(t,e,r){if(r=r||{},t=this._processUrl(t,r),!this.supportDirectRequest(t,r)){t=t.replace(".json",".jsonp");var n={url:t+="&_method=PUT",data:e};return dn.PUT(n)}return this._fetch(t,e,r,"PUT")},urlIsLong:function(t){for(var e=0,r=null,n=0,o=t.length;n<o;n++)(r=t.charCodeAt(n))<127?e++:128<=r&&r<=2047?e+=2:2048<=r&&r<=65535&&(e+=3);return!(e<2e3)},_postSimulatie:function(t,e,r,n){return e+=(e.indexOf("?")>-1?"&":"?")+"_method="+t,"string"!=typeof r&&(r=JSON.stringify(r)),this.post(e,r,n)},_processUrl:function(t,e){if(this._isMVTRequest(t))return t;if(-1===t.indexOf(".json")&&!e.withoutFormatSuffix)if(t.indexOf("?")<0)t+=".json";else{var r=t.split("?");2===r.length&&(t=r[0]+".json?"+r[1])}return e&&e.proxy&&("function"==typeof e.proxy?t=e.proxy(t):(t=decodeURIComponent(t),t=e.proxy+encodeURIComponent(t))),t},_fetch:function(t,e,r,n){return(r=r||{}).headers=r.headers||{},r.headers["Content-Type"]||FormData.prototype.isPrototypeOf(e)||(r.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),r.timeout?this._timeout(r.timeout,yn(t,{method:n,headers:r.headers,body:"PUT"===n||"POST"===n?e:void 0,credentials:this._getWithCredentials(r),mode:"cors",timeout:vn()}).then(function(t){return t})):yn(t,{method:n,body:"PUT"===n||"POST"===n?e:void 0,headers:r.headers,credentials:this._getWithCredentials(r),mode:"cors",timeout:vn()}).then(function(t){return t})},_getWithCredentials:function(t){return!0===t.withCredentials?"include":!1===t.withCredentials?"omit":"same-origin"},_fetchJsonp:function(t,e){return e=e||{},pn()(t,{method:"GET",timeout:e.timeout}).then(function(t){return t})},_timeout:function(t,e){return new Promise(function(r,n){setTimeout(function(){n(new Error("timeout"))},t),e.then(r,n)})},_getParameterString:function(t){var e=[];for(var r in t){var n,o=t[r];if(null!=o&&"function"!=typeof o)n=Array.isArray(o)||"[object Object]"===o.toString()?encodeURIComponent(JSON.stringify(o)):encodeURIComponent(o),e.push(encodeURIComponent(r)+"="+n)}return e.join("&")},_isMVTRequest:function(t){return t.indexOf(".mvt")>-1||t.indexOf(".pbf")>-1}};function gn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"generateToken",value:function(t,e){var r=this.servers[t];if(r)return mn.post(r.tokenServiceUrl,JSON.stringify(e.toJSON())).then(function(t){return t.text()})}},{key:"registerServers",value:function(t){this.servers=this.servers||{},dt.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++){var r=t[e];this.servers[r.server]=r}}},{key:"registerToken",value:function(t,e){if(this.tokens=this.tokens||{},t&&e){var r=this._getTokenStorageKey(t);this.tokens[r]=e}}},{key:"registerKey",value:function(t,e){if(this.keys=this.keys||{},t&&!(t.length<1)&&e){t=dt.isArray(t)?t:[t];for(var r=0;r<t.length;r++){var n=this._getUrlRestString(t[0])||t[0];this.keys[n]=e}}}},{key:"getServerInfo",value:function(t){return this.servers=this.servers||{},this.servers[t]}},{key:"getToken",value:function(t){if(t){this.tokens=this.tokens||{};var e=this._getTokenStorageKey(t);return this.tokens[e]}}},{key:"getKey",value:function(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;return this.keys[e]}},{key:"loginiServer",value:function(t,e,r,n){t=dt.urlPathAppend(t,"services/security/login");var o={username:e&&e.toString(),password:r&&r.toString(),rememberme:n};o=JSON.stringify(o);return mn.post(t,o,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(t){return t.json()})}},{key:"logoutiServer",value:function(t){t=dt.urlPathAppend(t,"services/security/logout");return mn.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(e,r){var n=t.SSO+"/login?service="+e;this._open(n,r)}},{key:"loginiPortal",value:function(t,e,r){t=dt.urlPathAppend(t,"web/login");var n={username:e&&e.toString(),password:r&&r.toString()};n=JSON.stringify(n);return mn.post(t,n,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!1}).then(function(t){return t.json()})}},{key:"logoutiPortal",value:function(t){t=dt.urlPathAppend(t,"services/security/logout");return mn.get(t,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(t,e){var r=dt.urlPathAppend(t,"/security/tokens"),n=e||{},o={username:n.userName&&n.userName.toString(),password:n.password&&n.password.toString()};o=JSON.stringify(o);var i=this;return mn.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json; charset=UTF-8"}}).then(function(t){return t.text()}).then(function(t){return i.imanagerToken=t,t})}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(t){if(t){var e=this._getTokenStorageKey(t);this.tokens=this.tokens||{},this.tokens[e]&&delete this.tokens[e]}}},{key:"destroyKey",value:function(t){if(t){this.keys=this.keys||{};var e=this._getUrlRestString(t)||t;this.keys[e]&&delete this.keys[e]}}},{key:"appendCredential",value:function(t){var e=t,r=this.getToken(t),n=r?new Ge(r,"token"):null;return n||(n=(r=this.getKey(t))?new Ge(r,"key"):null),n&&(e=dt.urlAppend(e,n.getUrlParameters())),e}},{key:"_open",value:function(t,e){e=null==e||e;var r=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,n=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,o="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+n+", left="+r+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";e?window.open(t,"login"):window.open(t,"login",o)}},{key:"_getTokenStorageKey",value:function(t){var e=t.match(/(.*?):\/\/([^\/]+)/i);return e?e[0]:t}},{key:"_getUrlRestString",value:function(t){if(!t)return t;var e=t.match(/(http|https):\/\/(.*\/rest)/i);return e?e[0]:t}}],(r=null)&&gn(e.prototype,r),n&&gn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _n(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}wn.INNER_WINDOW_WIDTH=600,wn.INNER_WINDOW_HEIGHT=600,wn.SSO="https://sso.supermap.com",wn.ONLINE="https://www.supermapol.com";var On=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e){var n=e.substr(e.length-1,1);this.serviceUrl="/"===n?e.substr(0,e.length-2):e}this.options=r||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r,n){(n=n||{headers:{Accept:"*/*","Content-Type":"application/json"}}).crossOrigin=this.options.crossOrigin,n.headers=this.options.headers;var o=wn.imanagerToken;return o&&(n.headers||(n.headers={}),n.headers["X-Auth-Token"]=o),r&&(r=JSON.stringify(r)),mn.commit(t,e,r,n).then(function(t){return t.json()})}}])&&_n(e.prototype,r),n&&_n(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Sn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xn=function(t,e,r){return e&&Sn(t.prototype,e),r&&Sn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",dt.extend(this,e)});function Pn(t){"@babel/helpers - typeof";return(Pn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function En(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kn(t,e){return(kn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Tn(t);if(e){var o=Tn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Tn(t){return(Tn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kn(t,e)}(i,On);var e,r,n,o=jn(i);function i(t){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,t)}return e=i,(r=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/server.json",new xn(t))}},{key:"createIPortal",value:function(t){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new xn(t))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/cloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/started.json",t)}},{key:"stopNodes",value:function(t){return this.request("POST",this.serviceUrl+"/cloud/web/nodes/stopped.json",t)}}])&&En(e.prototype,r),n&&En(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function An(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Mn=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),r=r||{},this.serviceUrl=e,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=r.withCredentials||!1,this.crossOrigin=r.crossOrigin,this.headers=r.headers}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return e=wn.appendCredential(e),mn.commit(t,e,r,n).then(function(t){return t.json()})}}])&&An(e.prototype,r),n&&An(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ln=function(t,e,r){return e&&Rn(t.prototype,e),r&&Rn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],dt.extend(this,e)});function Nn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var In=function(t,e,r){return e&&Nn(t.prototype,e),r&&Nn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,dt.extend(this,e)});function Dn(t){"@babel/helpers - typeof";return(Dn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bn(t,e){return(Bn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zn(t);if(e){var o=zn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Dn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Un(t)}(this,r)}}function Un(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zn(t){return(zn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bn(t,e)}(i,Mn);var e,r,n,o=Gn(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t),e=e||{},r.authorizeSetting=[],r.bounds="",r.bounds4326="",r.checkStatus="",r.createTime=0,r.description=null,r.dirId=null,r.epsgCode=0,r.heatLevel=0,r.id=0,r.name="",r.personalDirId=null,r.resourceId=0,r.resourceSubType=null,r.resourceType=null,r.serviceRootUrlId=null,r.tags=null,r.thumbnail=null,r.updateTime=0,r.userName="",r.sourceJSON={},dt.extend(Un(r),e),r.resourceUrl=t+"/web/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId,r.withCredentials&&(r.resourceUrl=t+"/web/mycontent/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId),r}return e=i,(r=[{key:"load",value:function(){var t=this;return t.request("GET",t.resourceUrl+".json").then(function(e){if(e.error)return e;t.sourceJSON=e})}},{key:"update",value:function(){var t=this.resourceType.replace("_","").toLowerCase();"data"===t&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var e=JSON.stringify(this.sourceJSON);if("service"===t){var r={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};e=JSON.stringify(r)}return this.request("PUT",this.resourceUrl,e,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&Fn(e.prototype,r),n&&Fn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var qn=function(t,e,r){return e&&Jn(t.prototype,e),r&&Jn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.ids=[],this.entities=[],this.resourceType="",dt.extend(this,e)});function Hn(t){"@babel/helpers - typeof";return(Hn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yn(t,e){return(Yn=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xn(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qn(t);if(e){var o=Qn(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Hn(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Qn(t){return(Qn=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zn=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yn(t,e)}(i,Mn);var e,r,n,o=Xn(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).iportalUrl=t,e=e||{},r.withCredentials=e.withCredentials||!1,r}return e=i,(r=[{key:"load",value:function(){return mn.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(t){if(!(t instanceof Ln))return new Promise(function(t){t("queryParams is not instanceof iPortalQueryParam !")});var e=this,r=this.iportalUrl+"/gateway/catalog/resource/search.json";return t.t=(new Date).getTime(),this.request("GET",r,t).then(function(t){var r=[];(t.content||[]).forEach(function(t){r.push(new Vn(e.iportalUrl,t))});var n=new In;return n.content=r,n.total=t.total,n.currentPage=t.currentPage,n.pageSize=t.pageSize,n.aggregations=t.aggregations,n})}},{key:"updateResourcesShareSetting",value:function(t){if(!(t instanceof qn))return new Promise(function(t){t("shareParams is not instanceof iPortalShareParam !")});var e=t.resourceType.replace("_","").toLowerCase()+"s";"datas"===e&&(e="mycontent/"+e);var r={ids:t.ids,entities:t.entities},n=this.iportalUrl+"/web/"+e+"/sharesetting.json";return this.request("PUT",n,JSON.stringify(r)).then(function(t){return t})}}])&&Wn(e.prototype,r),n&&Wn(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Kn(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $n=function(t,e,r){return e&&Kn(t.prototype,e),r&&Kn(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,dt.extend(this,e)});function to(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var eo=function(t,e,r){return e&&to(t.prototype,e),r&&to(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.rootUrl="",this.tags=[],this.entities=[],dt.extend(this,e)});function ro(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var no=function(t,e,r){return e&&ro(t.prototype,e),r&&ro(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.tags=[],this.entities=[],this.metadata={},this.addedMapNames=[],this.addedSceneNames=[],dt.extend(this,e)});function oo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var io=function(t,e,r){return e&&oo(t.prototype,e),r&&oo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fileName="",this.type="",this.tags=[],this.dataMetaInfo={},dt.extend(this,e)});function ao(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var so=function(t,e,r){return e&&ao(t.prototype,e),r&&ao(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.xField="",this.yField="",this.fileEncoding="UTF-8",this.xIndex=1,this.yIndex=1,this.fieldTypes=[],this.separator="",this.firstRowIsHead=!0,this.url="",this.dataStoreInfo={},dt.extend(this,e)});function lo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var uo=function(t,e,r){return e&&lo(t.prototype,e),r&&lo(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type="",this.url="",this.connectionInfo={},dt.extend(this,e)});function co(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fo=function(t,e,r){return e&&co(t.prototype,e),r&&co(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.dataBase="",this.server="",dt.extend(this,e)});function ho(t){"@babel/helpers - typeof";return(ho="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function yo(t,e){return(yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function bo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vo(t);if(e){var o=vo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ho(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function vo(t){return(vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var mo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yo(t,e)}(i,Mn);var e,r,n,o=bo(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).iportalUrl=t,e}return e=i,(r=[{key:"deleteResources",value:function(t){var e=t.resourceType.replace("_","").toLowerCase(),r=this.iportalUrl+"/web/"+e+"s.json?ids="+encodeURI(JSON.stringify(t.ids));return"data"===e?(r=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",r,JSON.stringify(t.ids))):this.request("DELETE",r)}},{key:"addMap",value:function(t){if(!(t instanceof eo))return this.getErrMsgPromise("addMapParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/maps/batchaddmaps.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"addScene",value:function(t){if(!(t instanceof eo))return this.getErrMsgPromise("addSceneParams is not instanceof IPortalAddResourceParam !");var e={rootUrl:t.rootUrl,tags:t.tags,authorizeSetting:t.entities},r=this.iportalUrl+"/web/scenes/batchaddscenes.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"registerService",value:function(t){if(!(t instanceof no))return this.getErrMsgPromise("registerParams is not instanceof IPortalRegisterServiceParam !");var e={type:t.type,tags:t.tags,authorizeSetting:t.entities,metadata:t.metadata,addedMapNames:t.addedMapNames,addedSceneNames:t.addedSceneNames},r=this.iportalUrl+"/web/services.json";return this.request("POST",r,JSON.stringify(e)).then(function(t){return t})}},{key:"getErrMsgPromise",value:function(t){return new Promise(function(e){e(t)})}},{key:"uploadDataRequest",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/upload.json";return this.request("POST",r,e)}},{key:"addData",value:function(t,e){var r=this;if(!(t instanceof io))return this.getErrMsgPromise("params is not instanceof iPortalAddDataParam !");var n,o=this.iportalUrl+"/web/mycontent/datas.json",i={fileName:t.fileName,tags:t.tags,type:t.type},a=t.type.toLowerCase();if("excel"===a||"csv"===a){if(!(t.dataMetaInfo instanceof so))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");n={xField:t.dataMetaInfo.xField,yField:t.dataMetaInfo.yField},"csv"===a&&(n.fileEncoding=t.dataMetaInfo.fileEncoding),i.coordType="WGS84",i.dataMetaInfo=n}else if("hdfs"===a||"hbase"===a){if(!(t.dataMetaInfo instanceof so))return this.getErrMsgPromise("params.dataMetaInfo is not instanceof iPortalDataMetaInfoParam !");if(!(t.dataMetaInfo.dataStoreInfo instanceof uo))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo is not instanceof iPortalDataStoreInfoParam !");var s={type:t.dataMetaInfo.dataStoreInfo.type};switch(a){case"hdfs":s.url=t.dataMetaInfo.dataStoreInfo.url,n={url:t.dataMetaInfo.url,dataStoreInfo:s};break;case"hbase":if(!(t.dataMetaInfo.dataStoreInfo.connectionInfo instanceof fo))return this.getErrMsgPromise("params.dataMetaInfo.dataStoreInfo.connectionInfo is not instanceof iPortalDataConnectionInfoParam !");s.connectionInfo={dataBase:t.dataMetaInfo.dataStoreInfo.connectionInfo.dataBase,server:t.dataMetaInfo.dataStoreInfo.connectionInfo.server,engineType:"HBASE"},s.datastoreType="SPATIAL",n={dataStoreInfo:s}}i.dataMetaInfo=n}return this.request("POST",o,JSON.stringify(i)).then(function(t){return"hdfs"===a||"hbase"===a?t:t.childID?r.uploadDataRequest(t.childID,e):t.customResult})}},{key:"publishOrUnpublish",value:function(t,e){if(!t.dataId||!t.serviceType)return this.getErrMsgPromise("option.dataID and option.serviceType are Required!");var r=t.dataId,n=t.dataServiceId,o=t.serviceType,i=this.iportalUrl+"/web/mycontent/datas/"+r+"/publishstatus.json?serviceType="+o;return n&&(i+="&dataServiceId="+n),this.request("PUT",i,JSON.stringify(e)).then(function(t){return e?(n||(n=t.customResult),n):t})}},{key:"getDataPublishedStatus",value:function(t,e){var r=this.iportalUrl+"/web/mycontent/datas/"+t+"/publishstatus.json?dataServiceId="+e+"&forPublish=true";return this.request("GET",r)}},{key:"unPublishDataService",value:function(t){return this.publishOrUnpublish(t,!1)}},{key:"publishDataService",value:function(t){return this.publishOrUnpublish(t,!0)}}])&&po(e.prototype,r),n&&po(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function go(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function wo(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?go(Object(r),!0).forEach(function(e){_o(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):go(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Oo(t){"@babel/helpers - typeof";return(Oo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function So(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xo=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);var n=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.index=null,this.length=null,this.totalTimes=null,this.POLLING_TIMES=3,this.isInTheSameDomain=null,this.withCredentials=!1,dt.isArray(e)?(n.urls=e,n.length=e.length,n.totalTimes=n.length,1===n.length?n.url=e[0]:(n.index=parseInt(Math.random()*n.length),n.url=e[n.index])):(n.totalTimes=1,n.url=e),dt.isArray(e)&&!n.isServiceSupportPolling()&&(n.url=e[0],n.totalTimes=1),r=r||{},this.crossOrigin=r.crossOrigin,this.headers=r.headers,dt.extend(this,r),n.isInTheSameDomain=dt.isInTheSameDomain(n.url),n.events=new qe(n,null,n.EVENT_TYPES,!0),n.eventListeners instanceof Object&&n.events.on(n.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;dt.isArray(t.urls)&&(t.urls=null,t.index=null,t.length=null,t.totalTimes=null),t.url=null,t.isInTheSameDomain=null,t.EVENT_TYPES=null,t.events&&(t.events.destroy(),t.events=null),t.eventListeners&&(t.eventListeners=null)}},{key:"request",value:function(t){var e=t.scope.format;if("string"==typeof t.success&&(t.scope.format=t.success,e=t.success,t.success=null,t.failure=null),e&&!this.supportDataFormat(e))throw new Error("".concat(this.CLASS_NAME," is not surport ").concat(e," format!"));var r=this;return t.url=t.url||r.url,this._returnContent(t)&&!t.url.includes("returnContent=true")&&(t.url=dt.urlAppend(t.url,"returnContent=true")),t.proxy=t.proxy||r.proxy,t.withCredentials=void 0!=t.withCredentials?t.withCredentials:r.withCredentials,t.crossOrigin=void 0!=t.crossOrigin?t.crossOrigin:r.crossOrigin,t.headers=t.headers||r.headers,t.isInTheSameDomain=r.isInTheSameDomain,t.withoutFormatSuffix=t.scope.withoutFormatSuffix||!1,t.url=wn.appendCredential(t.url),r.calculatePollingTimes(),t.scope=r,r.totalTimes>0?(r.totalTimes--,r.ajaxPolling(t)):r._commit(t)}},{key:"ajaxPolling",value:function(t){var e=this,r=t.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;return e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],r=r.replace(n,n.exec(e.url)[0]),t.url=r,t.isInTheSameDomain=dt.isInTheSameDomain(r),e._commit(t)}},{key:"calculatePollingTimes",value:function(){var t=this;t.times?t.totalTimes>t.POLLING_TIMES?t.times>t.POLLING_TIMES?t.totalTimes=t.POLLING_TIMES:t.totalTimes=t.times:t.times<t.totalTimes&&(t.totalTimes=t.times):t.totalTimes>t.POLLING_TIMES&&(t.totalTimes=t.POLLING_TIMES),t.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"transformResult",value:function(t,e){return{result:t=dt.transformResult(t),options:e}}},{key:"transformErrorResult",value:function(t,e){return{error:(t=dt.transformResult(t)).error||t,options:e}}},{key:"serviceProcessCompleted",value:function(t,e){t=this.transformResult(t).result,this.events.triggerEvent("processCompleted",{result:t,options:e})}},{key:"serviceProcessFailed",value:function(t,e){var r=(t=this.transformErrorResult(t).error).error||t;this.events.triggerEvent("processFailed",{error:r,options:e})}},{key:"_returnContent",value:function(t){return t.scope.format!==o.FGB&&!!t.scope.returnContent}},{key:"supportDataFormat",value:function(t){return this.dataFormat().includes(t)}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER]}},{key:"_commit",value:function(t){var e=this;if("POST"===t.method||"PUT"===t.method||"PATCH"===t.method)if(t.params&&(t.url=dt.urlAppend(t.url,dt.getParameterString(t.params||{}))),"object"===Oo(t.data))try{t.params=dt.toJSON(t.data)}catch(t){console.log("不是json对象")}else t.params=t.data;return mn.commit(t.method,t.url,t.params,{headers:t.headers,withoutFormatSuffix:t.withoutFormatSuffix,withCredentials:t.withCredentials,crossOrigin:t.crossOrigin,timeout:t.async?0:null,proxy:t.proxy}).then(function(t){return t.text?t.text():t.json?t.json():t}).then(function(e){var r=e;return"string"==typeof e&&(r=(new Br).read(e)),(!r||r.error||r.code>=300&&304!==r.code)&&(r=r&&r.error?{error:r.error}:{error:r}),r&&t.scope.format===o.FGB&&(r.newResourceLocation=r.newResourceLocation.replace(".json","")+".fgb"),r}).catch(function(t){return{error:t}}).then(function(r){var n={object:e};if(r.error){var o="processFailed";if(e.events&&e.events.listeners[o]&&e.events.listeners[o].length){var i=t.failure&&(t.scope?tt.bind(t.failure,t.scope):t.failure);i?i(r,t):e.serviceProcessFailed(r,t)}else(n=wo(wo({},n),e.transformErrorResult(r,t))).type=o,t.failure&&t.failure(n)}else{var a="processCompleted";if(e.events&&e.events.listeners[a]&&e.events.listeners[a].length){var s=t.success&&(t.scope?tt.bind(t.success,t.scope):t.success);s?s(r,t):e.serviceProcessCompleted(r,t)}else r.succeed=void 0==r.succeed||r.succeed,(n=wo(wo({},n),e.transformResult(r,t))).type=a,t.success&&t.success(n)}return n})}}])&&So(e.prototype,r),n&&So(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Po(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Eo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&"string"==typeof e.filters&&(e.filters=e.filters.split(",")),this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&Po(e.prototype,r),n&&Po(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ko(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jo=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e.filters&&(e.filters=e.filters.split(",")),this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&ko(e.prototype,r),n&&ko(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function To(t){"@babel/helpers - typeof";return(To="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Co(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ao(){return(Ao="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Mo(t,e){return(Mo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ro(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Lo(t);if(e){var o=Lo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===To(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Lo(t){return(Lo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var No=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mo(t,e)}(i,xo);var e,r,n,o=Ro(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},r.CLASS_NAME="SuperMap.AddressMatchService",r}return e=i,(r=[{key:"destroy",value:function(){Ao(Lo(i.prototype),"destroy",this).call(this)}},{key:"code",value:function(t,e,r){if(e instanceof Eo)return this.processAsync(t,e,r)}},{key:"decode",value:function(t,e,r){if(e instanceof jo)return this.processAsync(t,e,r)}},{key:"processAsync",value:function(t,e,r){return this.request({method:"GET",url:t,params:e,scope:this,success:r,failure:r})}},{key:"transformResult",value:function(t,e){return t.succeed&&delete t.succeed,{result:t,options:e}}}])&&Co(e.prototype,r),n&&Co(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Io(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Do=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.aggName=null,this.aggFieldName=null,this.CLASS_NAME="SuperMap.AggregationParameter",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.aggName=null,this.aggFieldName=null,this.aggType=null}}])&&Io(e.prototype,r),n&&Io(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fo(t){"@babel/helpers - typeof";return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bo(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Go(t,e){return(Go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Uo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Vo(t);if(e){var o=Vo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Fo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zo(t)}(this,r)}}function zo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vo(t){return(Vo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Jo=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Go(t,e)}(i,Do);var e,r,n,o=Uo(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).subAggs=null,e.aggType=null,e.CLASS_NAME="SuperMap.BucketAggParameter",dt.extend(zo(e),t),e}return e=i,(r=[{key:"destroy",value:function(){this.subAggs&&(this.subAggs=null)}}])&&Bo(e.prototype,r),n&&Bo(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qo(t){"@babel/helpers - typeof";return(qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ho(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Wo(){return(Wo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zo(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Yo(t,e){return(Yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xo(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Zo(t);if(e){var o=Zo(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qo(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Qo(t)}(this,r)}}function Qo(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zo(t){return(Zo=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ko=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yo(t,e)}(i,Do);var e,r,n,o=Xo(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).aggType=z.AVG,dt.extend(Qo(e),t),e.CLASS_NAME="SuperMap.MetricsAggParameter",e}return e=i,(r=[{key:"destroy",value:function(){Wo(Zo(i.prototype),"destroy",this).call(this);this.aggType=null}}])&&Ho(e.prototype,r),n&&Ho(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $o(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ti=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){var r={};for(var n in t){if("dataset"!==n)"latitude"===n||"timeMode"===n||"dayStart"===n||("dayEnd"===n||"hourStart"===n||"hourEnd"===n)||("transmittance"===n||"hourInterval"===n||"dayInterval"===n)?r[n]=t[n]:e[n]=t[n]}e.parameter=r}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&$o(e.prototype,r),n&&$o(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ei(t){"@babel/helpers - typeof";return(ei="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ri(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ni(){return(ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ai(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function oi(t,e){return(oi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ii(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ai(t);if(e){var o=ai(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ei(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ai(t){return(ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var si=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oi(t,e)}(a,xo);var e,r,n,i=ii(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).format=e&&e.format||o.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}return e=a,(r=[{key:"destroy",value:function(){ni(ai(a.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;if((t=dt.transformResult(t))&&this.format===o.GEOJSON&&"function"==typeof this.toGeoJSONResult)if(dt.isArray(t)){for(var n=0;n<t.length;n++)t[n]=this.toGeoJSONResult(t[n]);r=t}else r=this.toGeoJSONResult(t);return r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;t.result&&t.result.resultGeometry&&(t=t.result);var e=new Hr;if(t.recordsets)for(var r=0,n=t.recordsets,o=n.length;r<o;r++)n[r].features&&(n[r].features=e.toGeoJSON(n[r].features));else t.recordset&&t.recordset.features&&(t.recordset.features=e.toGeoJSON(t.recordset.features));return t.resultGeometry&&(t.resultGeometry=e.toGeoJSON(t.resultGeometry)),t.regions&&(t.regions=e.toGeoJSON(t.regions)),t}}])&&ri(e.prototype,r),n&&ri(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function li(t){"@babel/helpers - typeof";return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ui(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ci(){return(ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fi(t,e){return(fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=pi(t);if(e){var o=pi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===li(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pi(t){return(pi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fi(t,e)}(i,si);var e,r,n,o=hi(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.AreaSolarRadiationService",r}return e=i,(r=[{key:"destroy",value:function(){ci(pi(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof ti){var r=this,n={};t instanceof ti&&(r.url=dt.urlPathAppend(r.url,"datasets/".concat(t.dataset,"/solarradiation"))),r.url=dt.urlAppend(r.url,"returnContent=true"),ti.toObject(t,n);var o=dt.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}}])&&ui(e.prototype,r),n&&ui(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function di(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.exp=null,this.value=100,dt.extend(this,e),this.CLASS_NAME="SuperMap.BufferDistance"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&di(e.prototype,r),n&&di(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endType=O.FLAT,this.leftDistance=new bi,this.rightDistance=new bi,this.semicircleLineSegment=4,this.radiusUnit=f.METER,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.BufferSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.endType=null,t.leftDistance&&(t.leftDistance.destroy(),t.leftDistance=null),t.rightDistance&&(t.rightDistance.destroy(),t.rightDistance=null),t.semicircleLineSegment=null,t.radiusUnit=null}}])&&vi(e.prototype,r),n&&vi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.bufferSetting=new mi,dt.extend(this,e),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&gi(e.prototype,r),n&&gi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Oi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=k.RECORDSET_ONLY,this.deleteExistResultDataset=!0,dt.extend(this,e),this.CLASS_NAME="SuperMap.DataReturnOption"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&_i(e.prototype,r),n&&_i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Si(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.FilterParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.attributeFilter=null,t.name=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.linkItems){for(var o=0,i=t.linkItems,a=i.length;o<a;o++)i[o].destroy();t.linkItems=null}t.ids=null,t.orderBy=null,t.groupBy=null,t.fields=null}}])&&Si(e.prototype,r),n&&Si(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pi(t){"@babel/helpers - typeof";return(Pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ei(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ki(){return(ki="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ai(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ji(t,e){return(ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ti(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ai(t);if(e){var o=Ai(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pi(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ci(t)}(this,r)}}function Ci(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ai(t){return(Ai=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Mi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ji(t,e)}(i,wi);var e,r,n,o=Ti(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataset=null,e.filterQueryParameter=new xi,e.resultSetting=new Oi,e.isAttributeRetained=!0,e.isUnion=!1,dt.extend(Ci(e),t),e.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r)t.bufferSetting.radiusUnit=t.bufferSetting.radiusUnit.toUpperCase(),e.bufferAnalystParameter=t.bufferSetting;else if("resultSetting"===r)e.dataReturnOption=t.resultSetting;else{if("dataset"===r)continue;e[r]=t[r]}}}],(r=[{key:"destroy",value:function(){ki(Ai(i.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.isAttributeRetained=null,t.isUnion=null}}])&&Ei(e.prototype,r),n&&Ei(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ri(t){"@babel/helpers - typeof";return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Li(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ni(){return(Ni="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ii(t,e){return(Ii=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Di(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Bi(t);if(e){var o=Bi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ri(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Fi(t)}(this,r)}}function Fi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Bi(t){return(Bi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ii(t,e)}(i,wi);var e,r,n,o=Di(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).sourceGeometry=null,e.sourceGeometrySRID=null,t&&dt.extend(Fi(e),t),e.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("bufferSetting"===r){var n={};for(var o in t.bufferSetting)n[o]=t.bufferSetting[o];e.analystParameter=n}else"sourceGeometry"===r?e.sourceGeometry=pr.fromGeometry(t.sourceGeometry):e[r]=t[r]}}],(r=[{key:"destroy",value:function(){Ni(Bi(i.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&Li(e.prototype,r),n&&Li(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ui(t){"@babel/helpers - typeof";return(Ui="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vi(){return(Vi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wi(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ji(t,e){return(Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qi(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wi(t);if(e){var o=Wi(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ui(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hi(t)}(this,r)}}function Hi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wi(t){return(Wi=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yi=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ji(t,e)}(a,si);var e,r,n,i=qi(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).mode=null,e&&dt.extend(Hi(r),e),r.CLASS_NAME="SuperMap.BufferAnalystService",r}return e=a,(r=[{key:"destroy",value:function(){Vi(Wi(a.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof Mi?(n.mode="datasets",n.url=dt.urlPathAppend(n.url,"datasets/"+t.dataset+"/buffer"),Mi.toObject(t,r)):t instanceof Gi&&(n.mode="geometry",n.url=dt.urlPathAppend(n.url,"geometry/buffer"),Gi.toObject(t,r));var o=dt.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&zi(e.prototype,r),n&&zi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Xi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.alias=null,t.connect=null,t.dataBase=null,t.driver=null,t.engineType=null,t.exclusive=null,t.OpenLinkTable=null,t.password=null,t.readOnly=null,t.server=null,t.user=null}}])&&Xi(e.prototype,r),n&&Xi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zi(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ki=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=x.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",dt.extend(this,e),this.CLASS_NAME="SuperMap.OutputSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.type=null,t.datasetName=null,t.outputPath=null,t.datasourceInfo instanceof Qi&&(t.datasourceInfo.destroy(),t.datasourceInfo=null)}}])&&Zi(e.prototype,r),n&&Zi(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function $i(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ta=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.items=null,this.numericPrecision=1,this.rangeMode=b.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=v.YELLOW_RED,dt.extend(this,e),this.CLASS_NAME="SuperMap.MappingParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.numericPrecision=null,t.rangeMode=null,t.rangeCount=null,t.colorGradientType=null}}])&&$i(e.prototype,r),n&&$i(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ea(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ra=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=D.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!e)return this;dt.extend(this,e),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"bounds"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ea(e.prototype,r),n&&ea(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function na(t){"@babel/helpers - typeof";return(na="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ia(){return(ia="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=la(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aa(t,e){return(aa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=la(t);if(e){var o=la(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===na(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function la(t){return(la=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ua=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aa(t,e)}(i,xo);var e,r,n,o=sa(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ProcessingServiceBase",r}return e=i,(r=[{key:"destroy",value:function(){ia(la(i.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(t,e){var r=this;return mn.get(wn.appendCredential(t),null,{proxy:r.proxy}).then(function(t){return t.json()}).then(function(t){var n={result:t,object:r,type:"processCompleted"};return e(n),n}).catch(function(t){var n={error:t,object:r,type:"processFailed"};return e(n),n})}},{key:"addJob",value:function(t,e,r,n,o,i){var a=this,s=null;e&&e instanceof r&&(s=new Object,r.toObject(e,s));var l=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},a.headers||{}),u={proxy:a.proxy,headers:l,withCredentials:a.withCredentials,crossOrigin:a.crossOrigin,isInTheSameDomain:a.isInTheSameDomain};return mn.post(wn.appendCredential(t),JSON.stringify(s),u).then(function(t){return t.json()}).then(function(t){return t.succeed?a.transformResult(t,n,o,i):((t=a.transformErrorResult(t)).options=a,t.type="processFailed",o(t),t)}).catch(function(t){return(t=a.transformErrorResult({error:t})).options=a,t.type="processFailed",o(t),t})}},{key:"transformResult",value:function(t,e,r,n){t=dt.transformResult(t),e=e||1e3;var o=this;if(t)return new Promise(function(i){var a=setInterval(function(){mn.get(wn.appendCredential(t.newResourceLocation),{_t:(new Date).getTime()}).then(function(t){return t.json()}).then(function(t){if(i({object:o,id:t.id,state:t.state}),n({id:t.id,state:t.state,object:o}),"LOST"===t.state.runState||"KILLED"===t.state.runState||"FAILED"===t.state.runState){clearInterval(a);var e={error:t.state.errorMsg,state:t.state.runState,object:o,type:"processFailed"};i(e),r(e)}if("FINISHED"===t.state.runState&&t.setting.serviceInfo){clearInterval(a);var s={result:t,object:o,type:"processCompleted"};i(s),r(s)}}).catch(function(t){clearInterval(a);var e={error:t,object:o,type:"processFailed"};i(e),r(e)})},e)})}}])&&oa(e.prototype,r),n&&oa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ca(t){"@babel/helpers - typeof";return(ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ha(){return(ha="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=da(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pa(t,e){return(pa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ya(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=da(t);if(e){var o=da(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ca(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function da(t){return(da=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ba=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pa(t,e)}(i,ua);var e,r,n,o=ya(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/buffers"),r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}return e=i,(r=[{key:"destroy",value:function(){ha(da(i.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(t){return ha(da(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getBuffersJob",value:function(t,e){return ha(da(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addBuffersJob",value:function(t,e,r,n){return ha(da(i.prototype),"addJob",this).call(this,this.url,t,ra,e,r,n)}}])&&fa(e.prototype,r),n&&fa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function va(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ma=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&va(e.prototype,r),n&&va(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ga(t){"@babel/helpers - typeof";return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function wa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _a(){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=xa(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Oa(t,e){return(Oa=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Sa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=xa(t);if(e){var o=xa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ga(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function xa(t){return(xa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Pa=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oa(t,e)}(a,xo);var e,r,n,i=Sa(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).format=o.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}return e=a,(r=[{key:"destroy",value:function(){_a(xa(a.prototype),"destroy",this).call(this),this.format=null}},{key:"transformResult",value:function(t,e){var r;return(t=dt.transformResult(t))&&this.format===o.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(r=this.toGeoJSONResult(t)),r||(r=t),{result:r,options:e}}},{key:"toGeoJSONResult",value:function(t){return null}}])&&wa(e.prototype,r),n&&wa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ea(t){"@babel/helpers - typeof";return(Ea="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ka(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ja(){return(ja="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Aa(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ta(t,e){return(Ta=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ca(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Aa(t);if(e){var o=Aa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ea(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Aa(t){return(Aa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ma=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ta(t,e)}(i,Pa);var e,r,n,o=Ca(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){ja(Aa(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(!(t instanceof ma))return null;var r;if(this.url=dt.urlPathAppend(this.url,"burstAnalyse"),r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},null!==t.edgeID&&null!==t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===t.edgeID&&null===t.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}])&&ka(e.prototype,r),n&&ka(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ra(t){"@babel/helpers - typeof";return(Ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function La(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Na(){return(Na="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fa(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ia(t,e){return(Ia=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Da(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fa(t);if(e){var o=Fa(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ra(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fa(t){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ba=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ia(t,e)}(i,xo);var e,r,n,o=Da(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}return e=i,(r=[{key:"destroy",value:function(){Na(Fa(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t){return this.isTempLayers||dt.urlPathAppend(this.url,"chartFeatureInfoSpecs"),this.request({method:"GET",params:null,scope:this,success:t,failure:t})}}])&&La(e.prototype,r),n&&La(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ga(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ua=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isQueryPoint=null,t.isQueryLine=null,t.isQueryRegion=null,t.attributeFilter=null,t.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var t="";return t+='"isQueryPoint":'+this.isQueryPoint+",",t+='"isQueryLine":'+this.isQueryLine+",",t+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(t+='"attributeFilter": "'+this.attributeFilter+'",'),t="{"+(t+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Ga(e.prototype,r),n&&Ga(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function za(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Va=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.queryMode=null,t.bounds=null,t.chartLayerNames=null,t.chartQueryFilterParameters=null,t.returnContent=!0,t.startRecord=0,t.expectCount=null}},{key:"getVariablesJson",value:function(){var t="";if(t+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var e=[],r=this.chartLayerNames.length,n=0;n<r;n++)e.push('"'+this.chartLayerNames[n]+'"');t+='"chartLayerNames":'+("["+e.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(t+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var o=[],i=this.chartQueryFilterParameters.length,a=0;a<i;a++){var s=this.chartQueryFilterParameters[a];s instanceof Ua&&o.push(s.toJson())}var l="["+o.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",t+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return t="{"+t+"}"}}])&&za(e.prototype,r),n&&za(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ja(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var qa=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=a.LINE,this.queryOption=s.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.QueryParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.customParams=null,t.expectCount=null,t.networkType=null,t.queryOption=null,t.queryParams){for(var e=0,r=t.queryParams,n=r.length;e<n;e++)r[e].destroy();t.queryParams=null}t.startRecord=null,t.holdTime=null,t.returnCustomResult=null,t.prjCoordSys=null}}])&&Ja(e.prototype,r),n&&Ja(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ha(t){"@babel/helpers - typeof";return(Ha="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wa(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ya(t,e){return(Ya=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Xa(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ka(t);if(e){var o=Ka(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Qa(this,r)}}function Qa(t,e){if(e&&("object"===Ha(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Za(t)}function Za(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ka(t){return(Ka=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $a=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ya(t,e)}(a,xo);var e,r,n,i=Xa(a);function a(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,t,e),e=e||{},r.returnContent=null,r.format=o.GEOJSON,dt.extend(Za(r),e);var n=Za(r);return e.format&&(n.format=e.format.toUpperCase()),n.url?(n.url=dt.urlPathAppend(n.url,"queryResults"),r.CLASS_NAME="SuperMap.ChartQueryService",r):Qa(r)}return e=a,(r=[{key:"destroy",value:function(){xo.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof Va){var r,n=this;return n.returnContent=t.returnContent,r=t.getVariablesJson(),n.returnContent&&(n.url=dt.urlAppend(n.url,"returnContent=true")),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){if((t=dt.transformResult(t))&&t.recordsets&&this.format===o.GEOJSON)for(var r=0,n=t.recordsets,i=n.length;r<i;r++)if(n[r].features){var a=new Hr;n[r].features=a.toGeoJSON(n[r].features)}return{result:t,options:e}}},{key:"getQueryParameters",value:function(t){return new qa({queryMode:t.queryMode,bounds:t.bounds,chartLayerNames:t.chartLayerNames,chartQueryFilterParameters:t.chartQueryFilterParameters,returnContent:t.returnContent})}}])&&Wa(e.prototype,r),n&&Wa(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ts(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var es=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ClipParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipDatasetName=null,t.clipDatasourceName=null,t.clipRegion=null,t.isClipInRegion=null,t.isExactClip=null}},{key:"toJSON",value:function(){return dt.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:pr.fromGeometry(this.clipRegion)})}}])&&ts(e.prototype,r),n&&ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ns=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.elevation=null,this.color=null,dt.extend(this,e);var r=this.color;r&&(this.color=new Xe(r.red,r.green,r.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){dt.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return t=dt.copyAttributes(t,this)}}])&&rs(e.prototype,r),n&&rs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function os(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var is=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.returnEdgeFeatures=null,t.returnEdgeGeometry=null,t.returnEdgeIDs=null,t.returnNodeFeatures=null,t.returnNodeGeometry=null,t.returnNodeIDs=null,t.returnPathGuides=null,t.returnRoutes=null}}])&&os(e.prototype,r),n&&os(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function as(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ss=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new is,dt.extend(this,e),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.barrierEdgeIDs=null,t.barrierNodeIDs=null,t.weightFieldName=null,t.turnWeightField=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.barrierPoints&&t.barrierPoints.length)for(var e in t.barrierPoints)t.barrierPoints[e].destroy();t.barrierPoints=null}}])&&as(e.prototype,r),n&&as(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ls(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var us=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ss,dt.extend(this,e),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&ls(e.prototype,r),n&&ls(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function cs(t){"@babel/helpers - typeof";return(cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hs(){return(hs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ds(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ps(t,e){return(ps=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ys(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ds(t);if(e){var o=ds(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ds(t){return(ds=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bs=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ps(t,e)}(i,Pa);var e,r,n,o=ys(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}return e=i,(r=[{key:"destroy",value:function(){hs(ds(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof us){var r,n=this;return n.url=dt.urlPathAppend(n.url,"weightmatrix"),r={parameter:dt.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}}])&&fs(e.prototype,r),n&&fs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function vs(t){"@babel/helpers - typeof";return(vs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ms(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gs(t,e){return(gs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ws(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Os(t);if(e){var o=Os(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _s(t)}(this,r)}}function _s(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Os(t){return(Os=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ss=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gs(t,e)}(i,xo);var e,r,n,o=ws(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=e||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketClosed","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketClosed","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],(r=o.call(this,t,e)).geometry=null,r.prjCoordSys=null,r.excludeField=null,dt.extend(_s(r),e),r.CLASS_NAME="SuperMap.DataFlowService",r}return e=i,(r=[{key:"initBroadcast",value:function(){var t=this;return this.broadcastWebSocket=this._connect(dt.urlPathAppend(t.url,"broadcast")),this.broadcastWebSocket.onopen=function(e){t.broadcastWebSocket.isOpen=!0,e.eventType="broadcastSocketConnected",t.events.triggerEvent("broadcastSocketConnected",e)},this.broadcastWebSocket.onclose=function(e){t.broadcastWebSocket&&(t.broadcastWebSocket.isOpen=!1),e.eventType="broadcastSocketClosed",t.events.triggerEvent("broadcastSocketClosed",e)},this.broadcastWebSocket.onerror=function(e){e.eventType="broadcastSocketError",t.events.triggerEvent("broadcastSocketError",e)},this}},{key:"broadcast",value:function(t){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(t)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var t=this;return this.subscribeWebSocket=this._connect(dt.urlPathAppend(t.url,"subscribe")),this.subscribeWebSocket.onopen=function(e){t.subscribeWebSocket.send(t._getFilterParams()),e.eventType="subscribeSocketConnected",t.events.triggerEvent("subscribeSocketConnected",e)},this.subscribeWebSocket.onclose=function(e){e.eventType="subscribeWebSocketClosed",t.events.triggerEvent("subscribeWebSocketClosed",e)},this.subscribeWebSocket.onerror=function(e){e.eventType="subscribeSocketError",t.events.triggerEvent("subscribeSocketError",e)},this.subscribeWebSocket.onmessage=function(e){t._onMessage(e)},this}},{key:"setExcludeField",value:function(t){return this.excludeField=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(t){return this.geometry=t,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){xo.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var t={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return dt.toJSON(t)}},{key:"_onMessage",value:function(t){if(t.data&&t.data.indexOf("filterParam")>=0){var e=JSON.parse(t.data);return t.filterParam=e,t.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",t)}var r=JSON.parse(t.data);t.featureResult=r,t.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",t)}},{key:"_connect",value:function(t){return t=wn.appendCredential(t),"WebSocket"in window?new WebSocket(t):"MozWebSocket"in window?new(0,window.MozWebSocket)(t):(console.log("no WebSocket"),null)}}])&&ms(e.prototype,r),n&&ms(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ps=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,dt.extend(this,e);var r=this.bounds;r&&(this.bounds=new _t(r.leftBottom.x,r.leftBottom.y,r.rightTop.x,r.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){dt.reset(this)}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&xs(e.prototype,r),n&&xs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Es(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ks=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.operation=S.UNION,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.operation=null}}])&&Es(e.prototype,r),n&&Es(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function js(t){"@babel/helpers - typeof";return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ts(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cs(){return(Cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ls(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function As(t,e){return(As=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ms(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ls(t);if(e){var o=Ls(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===js(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rs(t)}(this,r)}}function Rs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ls(t){return(Ls=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ns=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&As(t,e)}(i,ks);var e,r,n,o=Ms(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).operateDataset=null,e.operateDatasetFields=[],e.operateDatasetFilter=new xi,e.operateRegions=[],e.sourceDataset=null,e.sourceDatasetFields=[],e.sourceDatasetFilter=new xi,e.tolerance=0,e.resultSetting=new Oi,dt.extend(Rs(e),t),e.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceDataset"!==r)if("operateRegions"===r){e.operateRegions=[];var n=t.operateRegions;for(var o in n)n.hasOwnProperty(o)&&(e.operateRegions[o]=pr.fromGeometry(n[o]))}else"resultSetting"===r?e.dataReturnOption=t.resultSetting:e[r]=t[r]}}],(r=[{key:"destroy",value:function(){Cs(Ls(i.prototype),"destroy",this).call(this);var t=this;if(t.operateDataset=null,t.operateDatasetFields=null,t.operateDatasetFilter&&(t.operateDatasetFilter.destroy(),t.operateDatasetFilter=null),t.operateRegions){for(var e=0,r=t.operateRegions,n=r.length;e<n;e++)r[e].destroy();t.operateRegions=null}t.sourceDataset=null,t.sourceDatasetFields=null,t.sourceDatasetFilter&&(t.sourceDatasetFilter.destroy(),t.sourceDatasetFilter=null),t.tolerance=null,t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null)}}])&&Ts(e.prototype,r),n&&Ts(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Is(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ds=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=P.BSPLINE,this.smoothness=0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.datumValue=null,t.expectedZValues=null,t.interval=null,t.resampleTolerance=null,t.smoothMethod=null,t.smoothness=null}},{key:"toJSON",value:function(){var t="'datumValue':"+dt.toJSON(this.datumValue);if(t+=",'interval':"+dt.toJSON(this.interval),t+=",'resampleTolerance':"+dt.toJSON(this.resampleTolerance),t+=",'smoothMethod':"+dt.toJSON(this.smoothMethod),t+=",'smoothness':"+dt.toJSON(this.smoothness),null!=this.expectedZValues&&(t+=",'expectedZValues':"+dt.toJSON(this.expectedZValues)),null!=this.clipRegion){var e=this.clipRegion;this.clipRegion instanceof nt&&this.clipRegion.components&&(e=pr.fromGeometry(this.clipRegion)),t+=",'clipRegion':"+dt.toJSON(e)}return"{"+t+"}"}}])&&Is(e.prototype,r),n&&Is(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Bs=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolution=0,this.extractParameter=new Ds,this.resultSetting=new Oi,this.surfaceAnalystMethod=E.ISOLINE,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.resolution=null,t.extractParameter&&(t.extractParameter.destroy(),t.extractParameter=null),t.resultSetting&&(t.resultSetting.destroy(),t.resultSetting=null),t.surfaceAnalystMethod=null}}])&&Fs(e.prototype,r),n&&Fs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Gs(t){"@babel/helpers - typeof";return(Gs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Us(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zs(){return(zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hs(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vs(t,e){return(Vs=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Js(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Hs(t);if(e){var o=Hs(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qs(t)}(this,r)}}function qs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hs(t){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ws=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vs(t,e)}(i,Bs);var e,r,n,o=Js(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataset=null,e.filterQueryParameter=new xi,e.zValueFieldName=null,t&&dt.extend(qs(e),t),e.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("filterQueryParameter"===r&&(e.filterQueryParameter=t.filterQueryParameter),"extractParameter"===r)t.extractParameter.clipRegion instanceof nt&&t.extractParameter.clipRegion.components&&(t.extractParameter.clipRegion=pr.fromGeometry(t.extractParameter.clipRegion)),e.extractParameter=t.extractParameter;else{if("dataset"===r)continue;if("surfaceAnalystMethod"===r)continue;e[r]=t[r]}}}],(r=[{key:"destroy",value:function(){zs(Hs(i.prototype),"destroy",this).call(this);var t=this;t.dataset=null,t.filterQueryParameter&&(t.filterQueryParameter.destroy(),t.filterQueryParameter=null),t.zValueFieldName=null}}])&&Us(e.prototype,r),n&&Us(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ys(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Xs=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,dt.extend(this,e),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.clipRegion&&(t.clipRegion.destroy(),t.clipRegion=null),t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.returnResultRegion=null}}])&&Ys(e.prototype,r),n&&Ys(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qs(t){"@babel/helpers - typeof";return(Qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zs(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ks(){return(Ks="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $s(t,e){return($s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rl(t);if(e){var o=rl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Qs(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return el(t)}(this,r)}}function el(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rl(t){return(rl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$s(t,e)}(i,Xs);var e,r,n,o=tl(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).filterQueryParameter=null,e.dataset=null,t&&dt.extend(el(e),t),e.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=pr.fromGeometry(t.clipRegion):e[r]=t[r]}}],(r=[{key:"destroy",value:function(){Ks(rl(i.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&Zs(e.prototype,r),n&&Zs(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ol(t){"@babel/helpers - typeof";return(ol="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function il(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function al(){return(al="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sl(t,e){return(sl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ll(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cl(t);if(e){var o=cl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ol(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ul(t)}(this,r)}}function ul(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cl(t){return(cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sl(t,e)}(i,xo);var e,r,n,o=ll(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(ul(r),e),r.CLASS_NAME="SuperMap.DatasourceService",r}return e=i,(r=[{key:"destroy",value:function(){al(cl(i.prototype),"destroy",this).call(this)}},{key:"getDatasourceService",value:function(t,e){var r=dt.urlPathAppend(this.url,"datasources/name/".concat(t));return this.processAsync(r,"GET",e)}},{key:"getDatasourcesService",value:function(t){var e=dt.urlPathAppend(this.url,"datasources");return this.processAsync(e,"GET",t)}},{key:"setDatasourceService",value:function(t,e){if(t){var r=dt.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName));return this.processAsync(r,"PUT",e,t)}}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=dt.toJSON(n)),this.request(o)}}])&&il(e.prototype,r),n&&il(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.fieldName=null,t.resultGridDatasetResolution=null,t.searchRadius=null,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&hl(e.prototype,r),n&&hl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yl(t){"@babel/helpers - typeof";return(yl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bl(){return(bl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vl(t,e){return(vl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ml(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wl(t);if(e){var o=wl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gl(t)}(this,r)}}function gl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wl(t){return(wl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vl(t,e)}(i,si);var e,r,n,o=ml(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&dt.extend(gl(r),e),r.CLASS_NAME="SuperMap.DensityAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){bl(wl(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this,n=new Object;t instanceof pl&&(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/densityanalyst/kernel"),r.mode="kernel"),pl.toObject(t,n);var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&dl(e.prototype,r),n&&dl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ol(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Sl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=j.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var e,r,n;return e=t,n=[{key:"toJsonParameters",value:function(t){var e,r,n;if(t.editType===j.DELETE){if(null===t.IDs)return;n={ids:t.IDs}}else if(n=[],t.features){r=t.features.length;for(var o=0;o<r;o++)(e=t.features[o]).geometry=pr.fromGeometry(e.geometry),n.push(e)}return dt.toJSON(n)}}],(r=[{key:"destroy",value:function(){var t=this;t.dataSourceName=null,t.dataSetName=null,t.features=null,t.editType=null,t.IDs=null,t.returnContent=null}}])&&Ol(e.prototype,r),n&&Ol(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xl(t){"@babel/helpers - typeof";return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function El(){return(El="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kl(t,e){return(kl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Cl(t);if(e){var o=Cl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tl(t)}(this,r)}}function Tl(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cl(t){return(Cl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Al=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kl(t,e)}(i,xo);var e,r,n,o=jl(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).returnContent=!1,r.isUseBatch=!1,e&&dt.extend(Tl(r),e),r.url=dt.urlPathAppend(r.url,"features"),r.CLASS_NAME="SuperMap.EditFeaturesService",r}return e=i,(r=[{key:"destroy",value:function(){El(Cl(i.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(t,e){if(t instanceof Sl){var r=this,n="POST",o="",i=t.editType,a=null;if(r.returnContent=t.returnContent,r.isUseBatch=t.isUseBatch,a=Sl.toJsonParameters(t),i===j.DELETE){a=o=dt.toJSON(t.IDs);var s=dt.urlAppend(r.url,dt.getParameterString({ids:o}));mn.urlIsLong(s)?(r.url=dt.urlAppend(r.url,dt.getParameterString({_method:"DELETE"})),n="POST"):(r.url=s,n="DELETE")}else i===j.UPDATE?n="PUT":(r.isUseBatch&&(r.url=dt.urlAppend(r.url,"isUseBatch=".concat(r.isUseBatch)),r.returnContent=!1),r.returnContent&&(r.url=dt.urlAppend(r.url,"returnContent=true"),n="POST"));return r.request({method:n,data:a,scope:r,success:e,failure:e})}}},{key:"getMetaData",value:function(t,e){var r=t.featureId;return this.url=dt.urlPathAppend(this.url,r+"/metadata"),this.request({method:"GET",data:null,scope:this,success:e,failure:e})}}])&&Pl(e.prototype,r),n&&Pl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ml(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Rl=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&Ml(e.prototype,r),n&&Ml(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ll(t){"@babel/helpers - typeof";return(Ll="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Il(){return(Il="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Bl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Dl(t,e){return(Dl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Bl(t);if(e){var o=Bl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ll(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Bl(t){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Gl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dl(t,e)}(i,Rl);var e,r,n,o=Fl(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Il(Bl(i.prototype),"destroy",this).call(this)}}])&&Nl(e.prototype,r),n&&Nl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ul(t){"@babel/helpers - typeof";return(Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vl(t,e){return(Vl=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ql(t);if(e){var o=ql(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ul(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ql(t){return(ql=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hl=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vl(t,e)}(i,xo);var e,r,n,o=Jl(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}return e=i,(r=[{key:"destroy",value:function(){xo.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(t,e){if(t instanceof Gl){var r;return this.url=dt.urlPathAppend(this.url,"sinks"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&zl(e.prototype,r),n&&zl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Wl(t){"@babel/helpers - typeof";return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yl(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xl(){return(Xl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kl(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ql(t,e){return(Ql=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zl(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Kl(t);if(e){var o=Kl(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wl(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Kl(t){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var $l=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ql(t,e)}(i,Rl);var e,r,n,o=Zl(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Xl(Kl(i.prototype),"destroy",this).call(this)}}])&&Yl(e.prototype,r),n&&Yl(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function tu(t){"@babel/helpers - typeof";return(tu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ru(){return(ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nu(t,e){return(nu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ou(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iu(t);if(e){var o=iu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function iu(t){return(iu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var au=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nu(t,e)}(i,xo);var e,r,n,o=ou(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}return e=i,(r=[{key:"destroy",value:function(){ru(iu(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof $l){var r;return this.url=dt.urlPathAppend(this.url,"sources"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&eu(e.prototype,r),n&&eu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function su(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lu=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.isUncertainDirectionValid=null,t.type=null}}])&&su(e.prototype,r),n&&su(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uu(t){"@babel/helpers - typeof";return(uu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fu(){return(fu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hu(t,e){return(hu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yu(t);if(e){var o=yu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===uu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yu(t){return(yu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var du=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hu(t,e)}(i,Pa);var e,r,n,o=pu(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}return e=i,(r=[{key:"destroy",value:function(){fu(yu(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof lu){var r,n=this;if(0===t.queryType)n.url=dt.urlPathAppend(n.url,"upstreamcirticalfaclilities");else{if(1!==t.queryType)return;n.url=dt.urlPathAppend(n.url,"downstreamcirticalfaclilities")}if(r={sourceNodeIDs:t.sourceNodeIDs,isUncertainDirectionValid:t.isUncertainDirectionValid},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}}])&&cu(e.prototype,r),n&&cu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bu(t){"@babel/helpers - typeof";return(bu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mu(){return(mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_u(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gu(t,e){return(gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_u(t);if(e){var o=_u(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _u(t){return(_u=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ou=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gu(t,e)}(i,Rl);var e,r,n,o=wu(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){mu(_u(i.prototype),"destroy",this).call(this)}}])&&vu(e.prototype,r),n&&vu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Su(t){"@babel/helpers - typeof";return(Su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pu(){return(Pu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ju(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Eu(t,e){return(Eu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ku(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ju(t);if(e){var o=ju(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Su(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ju(t){return(ju=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eu(t,e)}(i,xo);var e,r,n,o=ku(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}return e=i,(r=[{key:"destroy",value:function(){Pu(ju(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Ou){var r;return this.url=dt.urlPathAppend(this.url,"tracedownresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&xu(e.prototype,r),n&&xu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Cu(t){"@babel/helpers - typeof";return(Cu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Au(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mu(){return(Mu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ru(t,e){return(Ru=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Nu(t);if(e){var o=Nu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Cu(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nu(t){return(Nu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Iu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ru(t,e)}(i,Rl);var e,r,n,o=Lu(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Mu(Nu(i.prototype),"destroy",this).call(this)}}])&&Au(e.prototype,r),n&&Au(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Du(t){"@babel/helpers - typeof";return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bu(){return(Bu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gu(t,e){return(Gu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Uu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zu(t);if(e){var o=zu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Du(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function zu(t){return(zu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gu(t,e)}(i,xo);var e,r,n,o=Uu(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}return e=i,(r=[{key:"destroy",value:function(){Bu(zu(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Iu){var r;return this.url=dt.urlPathAppend(this.url,"traceupresult"),r={edgeID:t.edgeID,nodeID:t.nodeID,weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&Fu(e.prototype,r),n&&Fu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ju(t){"@babel/helpers - typeof";return(Ju="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qu(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hu(){return(Hu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qu(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wu(t,e){return(Wu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yu(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qu(t);if(e){var o=Qu(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ju(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xu(t)}(this,r)}}function Xu(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qu(t){return(Qu=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zu=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wu(t,e)}(i,Rl);var e,r,n,o=Yu(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t=t||{},e.sourceNodeIDs=null,dt.extend(Xu(e),t),e.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",e}return e=i,(r=[{key:"destroy",value:function(){Hu(Qu(i.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&qu(e.prototype,r),n&&qu(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ku(t){"@babel/helpers - typeof";return(Ku="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $u(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tc(){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ec(t,e){return(ec=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nc(t);if(e){var o=nc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ku(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nc(t){return(nc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ec(t,e)}(i,xo);var e,r,n,o=rc(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}return e=i,(r=[{key:"destroy",value:function(){tc(nc(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Zu){var r;return this.url=dt.urlPathAppend(this.url,"upstreamcirticalfaclilities"),r={sourceNodeIDs:t.sourceNodeIDs,edgeID:t.edgeID,nodeID:t.nodeID,isUncertainDirectionValid:t.isUncertainDirectionValid},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&$u(e.prototype,r),n&&$u(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ic(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ac=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasource=null,this.dataset=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.FieldParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&ic(e.prototype,r),n&&ic(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sc(t){"@babel/helpers - typeof";return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uc(t,e){return(uc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hc(t);if(e){var o=hc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fc(t)}(this,r)}}function fc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hc(t){return(hc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uc(t,e)}(i,ac);var e,r,n,o=cc(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).fieldName=null,e.statisticMode=null,t&&dt.extend(fc(e),t),e.CLASS_NAME="SuperMap.FieldStatisticsParameters",e}return e=i,(r=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&lc(e.prototype,r),n&&lc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yc(t){"@babel/helpers - typeof";return(yc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bc(){return(bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vc(t,e){return(vc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wc(t);if(e){var o=wc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gc(t)}(this,r)}}function gc(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wc(t){return(wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _c=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vc(t,e)}(i,xo);var e,r,n,o=mc(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,e&&dt.extend(gc(r),e),r.CLASS_NAME="SuperMap.FieldStatisticService",r}return e=i,(r=[{key:"destroy",value:function(){bc(wc(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(t){var e=this,r="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;return e.url=dt.urlPathAppend(e.url,r),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&dc(e.prototype,r),n&&dc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Oc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Sc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new ss,dt.extend(this,e),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.event=null,t.expectFacilityCount=null,t.facilities=null,t.fromEvent=null,t.isAnalyzeById=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Oc(e.prototype,r),n&&Oc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xc(t){"@babel/helpers - typeof";return(xc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ec(){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kc(t,e){return(kc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Tc(t);if(e){var o=Tc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Tc(t){return(Tc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kc(t,e)}(i,Pa);var e,r,n,o=jc(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}return e=i,(r=[{key:"destroy",value:function(){Ec(Tc(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Sc){var r,n=this;return n.url=dt.urlPathAppend(n.url,"closestfacility"),r={expectFacilityCount:t.expectFacilityCount,fromEvent:t.fromEvent,maxWeight:t.maxWeight,parameter:dt.toJSON(t.parameter),event:dt.toJSON(t.event),facilities:n.getJson(t.isAnalyzeById,t.facilities)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.facilityPathList)return t;var e=new Hr;return t.facilityPathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&Pc(e.prototype,r),n&&Pc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ac(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Mc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.FindLocationParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.expectedSupplyCenterCount=null,t.isFromCenter=null,t.turnWeightField=null,t.weightName=null,t.supplyCenters){for(var e=0,r=t.supplyCenters,n=r.length;e<n;e++)r[e].destroy();t.supplyCenters=null}}}])&&Ac(e.prototype,r),n&&Ac(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Rc(t){"@babel/helpers - typeof";return(Rc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Lc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Nc(){return(Nc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ic(t,e){return(Ic=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Dc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fc(t);if(e){var o=Fc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Rc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Fc(t){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ic(t,e)}(i,Pa);var e,r,n,o=Dc(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindLocationService",r}return e=i,(r=[{key:"destroy",value:function(){Nc(Fc(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Mc){var r,n=this;return n.url=dt.urlPathAppend(n.url,"location"),r={isFromCenter:t.isFromCenter,expectedSupplyCenterCount:t.expectedSupplyCenterCount,weightName:t.weightName,turnWeightField:t.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:dt.toJSON(t.mapParameter),supplyCenters:n.getCentersJson(t.supplyCenters)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getCentersJson",value:function(t){for(var e="[",r=t?t.length:0,n=0;n<r;n++)n>0&&(e+=","),e+=dt.toJSON(t[n]);return e+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Hr;return t.demandResults&&(t.demandResults=e.toGeoJSON(t.demandResults)),t.supplyResults&&(t.supplyResults=e.toGeoJSON(t.supplyResults)),t}}])&&Lc(e.prototype,r),n&&Lc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Gc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Uc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ss,dt.extend(this,e),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.centers=null,t.hasLeastTotalCost=null,t.isAnalyzeById=null,t.nodes=null,t.maxWeight=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Gc(e.prototype,r),n&&Gc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zc(t){"@babel/helpers - typeof";return(zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jc(){return(Jc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wc(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qc(t,e){return(qc=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hc(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wc(t);if(e){var o=Wc(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wc(t){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yc=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qc(t,e)}(i,Pa);var e,r,n,o=Hc(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindMTSPPathsService",r}return e=i,(r=[{key:"destroy",value:function(){Jc(Wc(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Uc){var r,n=this,o=n.getJson(t.isAnalyzeById,t.centers),i=n.getJson(t.isAnalyzeById,t.nodes);return n.url=dt.urlPathAppend(n.url,"mtsppath"),r={centers:o,nodes:i,parameter:dt.toJSON(t.parameter),hasLeastTotalCost:t.hasLeastTotalCost},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList)return null;var e=new Hr;return t.pathList.map(function(t){return t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t}),t}}])&&Vc(e.prototype,r),n&&Vc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qc=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new ss,dt.extend(this,e),this.CLASS_NAME="SuperMap.FindPathParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.hasLeastEdgeCount=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&Xc(e.prototype,r),n&&Xc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zc(t){"@babel/helpers - typeof";return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kc(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $c(){return($c="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tf(t,e){return(tf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ef(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rf(t);if(e){var o=rf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zc(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rf(t){return(rf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tf(t,e)}(i,Pa);var e,r,n,o=ef(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindPathService",r}return e=i,(r=[{key:"destroy",value:function(){$c(rf(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Qc){var r,n=this;return n.url=dt.urlPathAppend(n.url,"path"),r={hasLeastEdgeCount:t.hasLeastEdgeCount,parameter:dt.toJSON(t.parameter),nodes:n.getJson(t.isAnalyzeById,t.nodes)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.pathList||t.pathList.length<1)return null;var e=new Hr;return t.pathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&Kc(e.prototype,r),n&&Kc(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function of(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var af=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new ss,dt.extend(this,e),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.isAnalyzeById=null,t.isCenterMutuallyExclusive=null,t.centers=null,t.isFromCenter=null,t.weights=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&of(e.prototype,r),n&&of(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sf(t){"@babel/helpers - typeof";return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uf(){return(uf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cf(t,e){return(cf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ff(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hf(t);if(e){var o=hf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function hf(t){return(hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cf(t,e)}(i,Pa);var e,r,n,o=ff(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindServiceAreasService",r}return e=i,(r=[{key:"destroy",value:function(){uf(hf(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof af){var r,n=this;return n.url=dt.urlPathAppend(n.url,"servicearea"),r={isFromCenter:t.isFromCenter,isCenterMutuallyExclusive:t.isCenterMutuallyExclusive,parameter:dt.toJSON(t.parameter),centers:n.getJson(t.isAnalyzeById,t.centers),weights:n.getJson(!0,t.weights)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getJson",value:function(t,e){var r="[",n=e?e.length:0;if(!1===t)for(var o=0;o<n;o++)o>0&&(r+=","),r+='{"x":'+e[o].x+',"y":'+e[o].y+"}";else if(!0===t)for(var i=0;i<n;i++)i>0&&(r+=","),r+=e[i];return r+="]"}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.serviceAreaList)return t;var e=new Hr;return t.serviceAreaList.map(function(t){return t.serviceRegion&&(t.serviceRegion=e.toGeoJSON(t.serviceRegion)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures)),t.routes&&(t.routes=e.toGeoJSON(t.routes)),t}),t}}])&&lf(e.prototype,r),n&&lf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var df=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new ss,dt.extend(this,e),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.endNodeAssigned=null,t.isAnalyzeById=null,t.nodes=null,t.parameter&&(t.parameter.destroy(),t.parameter=null)}}])&&yf(e.prototype,r),n&&yf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bf(t){"@babel/helpers - typeof";return(bf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mf(){return(mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_f(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gf(t,e){return(gf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_f(t);if(e){var o=_f(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _f(t){return(_f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Of=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gf(t,e)}(i,Pa);var e,r,n,o=wf(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.FindTSPPathsService",r}return e=i,(r=[{key:"destroy",value:function(){mf(_f(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof df){var r,n=this;return n.url=dt.urlPathAppend(n.url,"tsppath"),r={parameter:dt.toJSON(t.parameter),endNodeAssigned:t.endNodeAssigned,nodes:n.getNodesJson(t)},n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"getNodesJson",value:function(t){var e,r,n,o,i="";if(!1===t.isAnalyzeById){for(e="[",r=0,n=(o=t.nodes).length;r<n;r++)r>0&&(e+=","),e+='{"x":'+o[r].x+',"y":'+o[r].y+"}";i+=e+="]"}else if(!0===t.isAnalyzeById){for(var a="[",s=t.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];i+=a+="]"}return i}},{key:"toGeoJSONResult",value:function(t){if(!t||!t.tspPathList)return null;var e=new Hr;return t.tspPathList.forEach(function(t){t.route&&(t.route=e.toGeoJSON(t.route)),t.pathGuideItems&&(t.pathGuideItems=e.toGeoJSON(t.pathGuideItems)),t.edgeFeatures&&(t.edgeFeatures=e.toGeoJSON(t.edgeFeatures)),t.nodeFeatures&&(t.nodeFeatures=e.toGeoJSON(t.nodeFeatures))}),t}}])&&vf(e.prototype,r),n&&vf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Sf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xf=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.routeTable&&(t.routeTable=null),t.routeIDField=null,t.attributeFilter=null,t.eventTable=null,t.eventRouteIDField=null,t.measureField=null,t.measureStartField=null,t.measureEndField=null,t.measureOffsetField=null,t.errorInfoField=null,t.dataReturnOption&&(t.dataReturnOption.destroy(),t.dataReturnOption=null)}}])&&Sf(e.prototype,r),n&&Sf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pf(t){"@babel/helpers - typeof";return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ef(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kf(){return(kf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jf(t,e){return(jf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Tf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Cf(t);if(e){var o=Cf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Cf(t){return(Cf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Af=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jf(t,e)}(i,si);var e,r,n,o=Tf(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GenerateSpatialDataService",r}return e=i,(r=[{key:"destroy",value:function(){kf(Cf(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof xf){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="datasets/"+t.routeTable+"/linearreferencing/generatespatialdata";return this.url=dt.urlPathAppend(this.url,e),this.url=dt.urlAppend(this.url,"returnContent=true"),dt.toJSON(t)}}])&&Ef(e.prototype,r),n&&Ef(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mf(t){"@babel/helpers - typeof";return(Mf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lf(){return(Lf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ff(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Nf(t,e){return(Nf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function If(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ff(t);if(e){var o=Ff(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Df(t)}(this,r)}}function Df(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ff(t){return(Ff=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nf(t,e)}(i,Jo);var e,r,n,o=If(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this)).precision=5,dt.extend(Df(e),t),e.aggType=U.GEOHASH_GRID,e.CLASS_NAME="SuperMap.GeoHashGridAggParameter",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e={aggName:t.aggName,aggFieldName:t.aggFieldName,aggType:t.aggType,precision:t.precision};return dt.toJson(e)}}],(r=[{key:"destroy",value:function(){Lf(Ff(i.prototype),"destroy",this).call(this),this.aggType=null,this.precision=null}}])&&Rf(e.prototype,r),n&&Rf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Gf(t){"@babel/helpers - typeof";return(Gf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Uf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zf(){return(zf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hf(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vf(t,e){return(Vf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Hf(t);if(e){var o=Hf(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Gf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qf(t)}(this,r)}}function qf(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hf(t){return(Hf=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wf=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vf(t,e)}(i,ks);var e,r,n,o=Jf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t&&t.operateGeometry&&(e.operateGeometry=t.operateGeometry),t&&t.sourceGeometry&&(e.sourceGeometry=t.sourceGeometry),t&&t.operateGeometries&&(e.operateGeometries=t.operateGeometries),t&&t.sourceGeometries&&(e.sourceGeometries=t.sourceGeometries),t&&dt.extend(qf(e),t),e.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("sourceGeometry"===r)e.sourceGeometry=pr.fromGeometry(t.sourceGeometry);else if("sourceGeometries"===r){for(var n=[],o=0;o<t.sourceGeometries.length;o++)n.push(pr.fromGeometry(t.sourceGeometries[o]));e.sourceGeometries=n}else if("operateGeometry"===r)e.operateGeometry=pr.fromGeometry(t.operateGeometry);else if("operateGeometries"===r){for(var i=[],a=0;a<t.operateGeometries.length;a++)i.push(pr.fromGeometry(t.operateGeometries[a]));e.operateGeometries=i}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){zf(Hf(i.prototype),"destroy",this).call(this);var t=this;t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.sourceGeometries&&(t.sourceGeometries.destroy(),t.sourceGeometries=null),t.sourceGeometry&&(t.sourceGeometry.destroy(),t.sourceGeometry=null),t.operateGeometries&&(t.operateGeometries.destroy(),t.operateGeometries=null)}}])&&Uf(e.prototype,r),n&&Uf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Yf(t){"@babel/helpers - typeof";return(Yf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Qf(){return(Qf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=th(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Zf(t,e){return(Zf=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Kf(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=th(t);if(e){var o=th(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Yf(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $f(t)}(this,r)}}function $f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function th(t){return(th=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zf(t,e)}(i,Bs);var e,r,n,o=Kf(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).points=null,e.zValues=null,t&&dt.extend($f(e),t),e.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){Qf(th(i.prototype),"destroy",this).call(this);if(this.points){for(var t=0,e=this.points,r=e.length;t<r;t++)e[t].destroy();this.points=null}this.zValues=null}}])&&Xf(e.prototype,r),n&&Xf(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rh(t){"@babel/helpers - typeof";return(rh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function nh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function oh(){return(oh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ih(t,e){return(ih=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ah(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lh(t);if(e){var o=lh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===rh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return sh(t)}(this,r)}}function sh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function lh(t){return(lh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ih(t,e)}(i,Xs);var e,r,n,o=ah(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).points=null,t&&dt.extend(sh(e),t),e.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)"clipRegion"===r?e.clipRegion=pr.fromGeometry(t.clipRegion):e[r]=t[r]}}],(r=[{key:"destroy",value:function(){oh(lh(i.prototype),"destroy",this).call(this);if(this.points){for(var t=this.points.length-1;t>=0;t--)this.points[t].destroy();this.points=null}}}])&&nh(e.prototype,r),n&&nh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ch(t){"@babel/helpers - typeof";return(ch="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hh(t,e){return(hh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ph(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yh(t);if(e){var o=yh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ch(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yh(t){return(yh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hh(t,e)}(i,xo);var e,r,n,o=ph(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=e||{},(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GeoprocessingService",r.headers={},r.crossOrigin=!0,r}return e=i,(r=[{key:"getTools",value:function(t){return this._processAsync({url:"".concat(this.url,"/list"),callback:t})}},{key:"getTool",value:function(t,e){return this._processAsync({url:"".concat(this.url,"/").concat(t),callback:e})}},{key:"execute",value:function(t,e,r,n){var o={parameter:e=e||null,environment:r=r||null};return this._processAsync({url:"".concat(this.url,"/").concat(t,"/execute"),executeParamter:o,callback:n})}},{key:"submitJob",value:function(t,e,r,n){e=e||null,r=r||null;var o=JSON.stringify({parameter:e,environments:r});return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs"),method:"POST",callback:n,params:o})}},{key:"waitForJobCompletion",value:function(t,e,r,n){var o=this,i=setInterval(function(){o._processAsync({url:"".concat(o.url,"/").concat(e,"/jobs/").concat(t),callback:function(t){var e=t.result.state.runState;t.options.statusCallback&&t.options.statusCallback(e),-1!==["FINISHED","FAILED","CANCELED"].indexOf(e)&&(clearInterval(i),n(t))}})},r.interval)}},{key:"getJobInfo",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e),callback:r})}},{key:"cancelJob",value:function(t,e,r){return this._processAsync({url:"".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/cancel"),callback:r})}},{key:"getJobs",value:function(t,e){var r="".concat(this.url,"/jobs");t&&"string"==typeof t?r="".concat(this.url,"/").concat(t,"/jobs"):e=t,this._processAsync({url:r,callback:e})}},{key:"getResults",value:function(t,e,r,n){var o="".concat(this.url,"/").concat(t,"/jobs/").concat(e,"/results");return r&&("string"==typeof r?o="".concat(o,"/").concat(r):n=r),this._processAsync({url:o,callback:n})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.paramter;return this.request({url:e,method:r||"GET",params:o,headers:{"Content-type":"application/json"},scope:this,success:n,failure:n})}}])&&fh(e.prototype,r),n&&fh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceFilter&&t.sourceFilter.destroy(),t.sourceFilter=null,t.referenceFilter&&t.referenceFilter.destroy(),t.referenceFilter=null,t.dataset=null,t.spatialRelationType=null,t.isBorderInside=null,t.returnFeature=null,t.returnGeoRelatedOnly=null,t.startRecord=null,t.expectCount=null}}])&&bh(e.prototype,r),n&&bh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mh(t){"@babel/helpers - typeof";return(mh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wh(){return(wh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _h(t,e){return(_h=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Oh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Sh(t);if(e){var o=Sh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Sh(t){return(Sh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_h(t,e)}(i,si);var e,r,n,o=Oh(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GeoRelationAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){wh(Sh(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof vh){var r=this;r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/georelation");var n=dt.toJSON(t);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}}])&&gh(e.prototype,r),n&&gh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ph(t){"@babel/helpers - typeof";return(Ph="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Eh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kh(){return(kh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Mh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jh(t,e){return(jh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Th(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Mh(t);if(e){var o=Mh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ch(this,r)}}function Ch(t,e){if(e&&("object"===Ph(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ah(t)}function Ah(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Mh(t){return(Mh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Rh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jh(t,e)}(i,xo);var e,r,n,o=Th(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e?(r.datasource=null,r.dataset=null,e&&dt.extend(Ah(r),e),r.CLASS_NAME="SuperMap.DatasetService",r):Ch(r)}return e=i,(r=[{key:"destroy",value:function(){kh(Mh(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"getDatasetsService",value:function(t,e){var r=dt.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets"));return this.processAsync(r,"GET",e)}},{key:"getDatasetService",value:function(t,e,r){var n=dt.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"GET",r)}},{key:"setDatasetService",value:function(t,e){if(t){var r=dt.urlPathAppend(this.url,"datasources/name/".concat(t.datasourceName,"/datasets/name/").concat(t.datasetName));return delete t.datasourceName,this.processAsync(r,"PUT",e,t)}}},{key:"deleteDatasetService",value:function(t,e,r){var n=dt.urlPathAppend(this.url,"datasources/name/".concat(t,"/datasets/name/").concat(e));return this.processAsync(n,"DELETE",r)}},{key:"processAsync",value:function(t,e,r,n){var o={url:t,method:e,scope:this,success:r,failure:r};return n&&(o.data=dt.toJSON(n)),this.request(o)}}])&&Eh(e.prototype,r),n&&Eh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Lh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Nh=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.hasGeometry=!0,this.aggregations=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasetNames=null,t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.hasGeometry=null,t.maxFeatures=null,t.targetEpsgCode=null,t.targetPrj=null,t.aggregation&&(t.aggregation=null)}}])&&Lh(e.prototype,r),n&&Lh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ih(t){"@babel/helpers - typeof";return(Ih="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Fh(){return(Fh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Bh(t,e){return(Bh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Gh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zh(t);if(e){var o=zh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ih(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Uh(t)}(this,r)}}function Uh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zh(t){return(zh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bh(t,e)}(i,Nh);var e,r,n,o=Gh(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode=i.getFeatureMode.BOUNDS,e.bounds=null,e.fields=null,e.attributeFilter=null,e.spatialQueryMode=l.CONTAIN,dt.extend(Uh(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r,n;return r={leftBottom:{x:t.bounds.left,y:t.bounds.bottom},rightTop:{x:t.bounds.right,y:t.bounds.top}},n={datasetNames:t.datasetNames,getFeatureMode:i.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new xi).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode=i.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),dt.toJSON(n)}}],(r=[{key:"destroy",value:function(){Fh(zh(i.prototype),"destroy",this).call(this);var t=this;if(t.bounds&&(t.bounds.destroy(),t.bounds=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&Dh(e.prototype,r),n&&Dh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jh(t){"@babel/helpers - typeof";return(Jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qh(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hh(){return(Hh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qh(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wh(t,e){return(Wh=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yh(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qh(t);if(e){var o=Qh(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Jh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xh(t)}(this,r)}}function Xh(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qh(t){return(Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}Vh.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"};var Zh=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wh(t,e)}(a,xo);var e,r,n,i=Yh(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),r=i.call(this,t,e),e=e||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.hasGeometry=!0,r.maxFeatures=null,r.format=o.GEOJSON,dt.extend(Xh(r),e),r.url=dt.urlPathAppend(r.url,"featureResults"),r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}return e=a,(r=[{key:"destroy",value:function(){Hh(Qh(a.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.fromIndex=null,t.toIndex=null,t.maxFeatures=null,t.format=null,t.hasGeometry=null}},{key:"processAsync",value:function(t,e){if(t){var r,n=this,o=!0;return n.returnContent=t.returnContent,n.fromIndex=t.fromIndex,n.toIndex=t.toIndex,n.maxFeatures=t.maxFeatures,n.hasGeometry=t.hasGeometry,n.returnContent&&(o=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!o&&(n.url=dt.urlAppend(n.url,"fromIndex=".concat(n.fromIndex,"&toIndex=").concat(n.toIndex))),t.returnCountOnly&&(n.url=dt.urlAppend(n.url,"&returnCountOnly="+t.returnContent)),r=n.getJsonParameters(t),n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){if(t=dt.transformResult(t),this.format===o.GEOJSON&&t.features){var r=new Hr;t.features=r.toGeoJSON(t.features)}return{result:t,options:e}}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&qh(e.prototype,r),n&&qh(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Kh(t){"@babel/helpers - typeof";return(Kh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $h(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tp(){return(tp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=np(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ep(t,e){return(ep=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=np(t);if(e){var o=np(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Kh(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function np(t){return(np=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var op=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ep(t,e)}(i,Zh);var e,r,n,o=rp(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}return e=i,(r=[{key:"destroy",value:function(){tp(np(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return Vh.toJsonParameters(t)}}])&&$h(e.prototype,r),n&&$h(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ip(t){"@babel/helpers - typeof";return(ip="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ap(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function sp(){return(sp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function lp(t,e){return(lp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function up(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fp(t);if(e){var o=fp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ip(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return cp(t)}(this,r)}}function cp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fp(t){return(fp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lp(t,e)}(i,Nh);var e,r,n,o=up(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).bufferDistance=null,e.attributeFilter=null,e.geometry=null,e.fields=null,dt.extend(cp(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r,n;return n=pr.fromGeometry(t.geometry),r={datasetNames:t.datasetNames,getFeatureMode:"BUFFER",bufferDistance:t.bufferDistance,geometry:n},t.fields&&((e=new xi).name=t.datasetNames,e.fields=t.fields,r.queryParameter=e),t.attributeFilter&&(r.attributeFilter=t.attributeFilter,r.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(r.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(r.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(r.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(r.targetPrj=t.targetPrj),dt.toJSON(r)}}],(r=[{key:"destroy",value:function(){sp(fp(i.prototype),"destroy",this).call(this);var t=this;if(t.bufferDistance=null,t.attributeFilter=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&ap(e.prototype,r),n&&ap(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pp(t){"@babel/helpers - typeof";return(pp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dp(){return(dp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bp(t,e){return(bp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mp(t);if(e){var o=mp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mp(t){return(mp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bp(t,e)}(i,Zh);var e,r,n,o=vp(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}return e=i,(r=[{key:"destroy",value:function(){dp(mp(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof hp)return hp.toJsonParameters(t)}}])&&yp(e.prototype,r),n&&yp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wp(t){"@babel/helpers - typeof";return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _p(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Op(){return(Op="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ep(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Sp(t,e){return(Sp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ep(t);if(e){var o=Ep(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===wp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Pp(t)}(this,r)}}function Pp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ep(t){return(Ep=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Sp(t,e)}(i,Nh);var e,r,n,o=xp(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode="SPATIAL",e.geometry=null,e.fields=null,e.attributeFilter=null,e.spatialQueryMode=l.CONTAIN,dt.extend(Pp(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r,n;return r=pr.fromGeometry(t.geometry),n={datasetNames:t.datasetNames,getFeatureMode:"SPATIAL",geometry:r,spatialQueryMode:t.spatialQueryMode},t.fields&&((e=new xi).name=t.datasetNames,e.fields=t.fields,n.queryParameter=e),t.attributeFilter&&(n.attributeFilter=t.attributeFilter,n.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),t.maxFeatures&&!isNaN(t.maxFeatures)&&(n.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(n.hasGeometry=t.hasGeometry),t.targetEpsgCode&&(n.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(n.targetPrj=t.targetPrj),t.aggregations&&(n.aggregations=t.aggregations),dt.toJSON(n)}}],(r=[{key:"destroy",value:function(){Op(Ep(i.prototype),"destroy",this).call(this);var t=this;if(t.geometry&&(t.geometry.destroy(),t.geometry=null),t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}t.attributeFilter=null,t.spatialQueryMode=null,t.getFeatureMode=null}}])&&_p(e.prototype,r),n&&_p(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function jp(t){"@babel/helpers - typeof";return(jp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cp(){return(Cp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Rp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ap(t,e){return(Ap=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Rp(t);if(e){var o=Rp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Rp(t){return(Rp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Lp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ap(t,e)}(i,Zh);var e,r,n,o=Mp(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}return e=i,(r=[{key:"destroy",value:function(){Cp(Rp(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return kp.toJsonParameters(t)}}])&&Tp(e.prototype,r),n&&Tp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Np(t){"@babel/helpers - typeof";return(Np="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ip(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Dp(){return(Dp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Up(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Fp(t,e){return(Fp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Bp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Up(t);if(e){var o=Up(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Np(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Gp(t)}(this,r)}}function Gp(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Up(t){return(Up=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var zp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fp(t,e)}(i,Nh);var e,r,n,o=Bp(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode="ID",e.IDs=null,e.fields=null,dt.extend(Gp(e),t),e.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e,r;return e={datasetNames:t.datasetNames,getFeatureMode:"ID",ids:t.IDs},t.fields&&((r=new xi).name=t.datasetNames,r.fields=t.fields,e.queryParameter=r),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),dt.toJSON(e)}}],(r=[{key:"destroy",value:function(){Dp(Up(i.prototype),"destroy",this).call(this);var t=this;if(t.IDs=null,t.getFeatureMode=null,t.fields){for(;t.fields.length>0;)t.fields.pop();t.fields=null}}}])&&Ip(e.prototype,r),n&&Ip(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Vp(t){"@babel/helpers - typeof";return(Vp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function qp(){return(qp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Yp(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Hp(t,e){return(Hp=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Wp(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Yp(t);if(e){var o=Yp(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Vp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Yp(t){return(Yp=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Xp=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hp(t,e)}(i,Zh);var e,r,n,o=Wp(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}return e=i,(r=[{key:"destroy",value:function(){qp(Yp(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return zp.toJsonParameters(t)}}])&&Jp(e.prototype,r),n&&Jp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Qp(t){"@babel/helpers - typeof";return(Qp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zp(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kp(){return(Kp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ry(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function $p(t,e){return($p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ty(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ry(t);if(e){var o=ry(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Qp(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ey(t)}(this,r)}}function ey(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ry(t){return(ry=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ny=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$p(t,e)}(i,Nh);var e,r,n,o=ty(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).getFeatureMode="SQL",e.queryParameter=null,dt.extend(ey(e),t),e.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",e}return e=i,n=[{key:"toJsonParameters",value:function(t){var e={datasetNames:t.datasetNames,getFeatureMode:"SQL",queryParameter:t.queryParameter};return t.maxFeatures&&!isNaN(t.maxFeatures)&&(e.maxFeatures=t.maxFeatures),"boolean"==typeof t.hasGeometry&&(e.hasGeometry=t.hasGeometry),t.aggregations&&(e.aggregations=t.aggregations),t.targetEpsgCode&&(e.targetEpsgCode=t.targetEpsgCode),!t.targetEpsgCode&&t.targetPrj&&(e.targetPrj=t.targetPrj),t.aggregations&&(e.aggregations=t.aggregations),dt.toJSON(e)}}],(r=[{key:"destroy",value:function(){Kp(ry(i.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&Zp(e.prototype,r),n&&Zp(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oy(t){"@babel/helpers - typeof";return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ay(){return(ay="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sy(t,e){return(sy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ly(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uy(t);if(e){var o=uy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function uy(t){return(uy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sy(t,e)}(i,Zh);var e,r,n,o=ly(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}return e=i,(r=[{key:"destroy",value:function(){ay(uy(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){return ny.toJsonParameters(t)}}])&&iy(e.prototype,r),n&&iy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fy(t){"@babel/helpers - typeof";return(fy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function py(){return(py="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=vy(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yy(t,e){return(yy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=vy(t);if(e){var o=vy(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return by(t)}(this,r)}}function by(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vy(t){return(vy=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var my=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yy(t,e)}(i,xo);var e,r,n,o=dy(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).datasource=null,r.dataset=null,e&&dt.extend(by(r),e),r.CLASS_NAME="SuperMap.GetFieldsService",r}return e=i,(r=[{key:"destroy",value:function(){py(vy(i.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(t){var e=this;return e.url=dt.urlPathAppend(e.url,"datasources/".concat(e.datasource,"/datasets/").concat(e.dataset,"/fields")),e.request({method:"GET",data:null,scope:e,success:t,failure:t})}}])&&hy(e.prototype,r),n&&hy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function gy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&gy(e.prototype,r),n&&gy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _y(t){"@babel/helpers - typeof";return(_y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Oy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sy(){return(Sy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ky(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xy(t,e){return(xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Py(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ky(t);if(e){var o=ky(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_y(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ey(t)}(this,r)}}function Ey(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ky(t){return(ky=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jy=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xy(t,e)}(i,xo);var e,r,n,o=Py(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,e&&dt.extend(Ey(r),e),r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}return e=i,(r=[{key:"destroy",value:function(){Sy(ky(i.prototype),"destroy",this).call(this);var t=this;t.X=null,t.Y=null,t.datasetName=null,t.dataSourceName=null,t.datasetType=null}},{key:"processAsync",value:function(t,e){if(t instanceof wy){dt.extend(this,t);var r=this;return r.url=dt.urlPathAppend(r.url,"datasources/".concat(r.dataSourceName,"/datasets/").concat(r.datasetName)),r.request({method:"GET",data:null,scope:r,success:function(t){var n=t.result;e&&r.getDatasetInfoCompleted(n,e)},failure:e}).then(function(t){var e=t.result;return r.getDatasetInfoCompleted(e)})}}},{key:"getDatasetInfoCompleted",value:function(t,e){return t=dt.transformResult(t),this.datasetType=t.datasetInfo.type,this.queryGridInfos(e)}},{key:"queryGridInfos",value:function(t){var e=this,r=dt.urlPathAppend(e.url,"GRID"==e.datasetType?"gridValue":"imageValue");return null!=e.X&&null!=e.Y&&(r=dt.urlAppend(r,"x=".concat(e.X,"&y=").concat(e.Y))),e.request({url:r,method:"GET",data:null,scope:e,success:t,failure:t})}}])&&Oy(e.prototype,r),n&&Oy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ty(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Cy=function(){function t(e,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.memoryData=null,this.type=e,r&&dt.extend(this,r),this.CLASS_NAME="SuperMap.Theme"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&Ty(e.prototype,r),n&&Ty(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ay(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var My=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.align=m.BASELINECENTER,this.backColor=new Xe(255,255,255),this.foreColor=new Xe(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ServerTextStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t(e);return dt.copy(r,e),r.backColor=Xe.fromJson(e.backColor),r.foreColor=Xe.fromJson(e.foreColor),r}}],(r=[{key:"destroy",value:function(){var t=this;t.align=null,t.backColor&&(t.backColor.destroy(),t.backColor=null),t.foreColor&&(t.foreColor.destroy(),t.foreColor=null),t.backOpaque=null,t.sizeFixed=null,t.fontHeight=null,t.fontWidth=null,t.fontWeight=null,t.fontName=null,t.bold=null,t.italic=null,t.italicAngle=null,t.shadow=null,t.strikeout=null,t.outline=null,t.opaqueRate=null,t.underline=null,t.rotation=null}}])&&Ay(e.prototype,r),n&&Ay(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ry(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ly=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new My,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&Ry(e.prototype,r),n&&Ry(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ny(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Iy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.style=new Ze,this.unique=null,this.visible=!0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return dt.copy(r,e),r.style=Ze.fromJson(e.style),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Ny(e.prototype,r),n&&Ny(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Dy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeOffset"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&Dy(e.prototype,r),n&&Dy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function By(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Gy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new My,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t,n=e.styles;if(dt.copy(r,e),r.defaultStyle=new My(e.defaultStyle),n){r.styles=[];for(var o=0,i=n.length;o<i;o++)r.styles.push(new My(n[o]))}return r}}}],(r=[{key:"destroy",value:function(){var t=this;if(t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null),t.separator=null,t.separatorEnabled=null,t.splitIndexes&&(t.splitIndexes=null),t.styles){for(var e=0,r=t.styles,n=r.length;e<n;e++)r[e].destroy();t.styles=null}}}])&&By(e.prototype,r),n&&By(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Uy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new My,this.uniformMixedStyle=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelText"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.uniformStyle=My.fromObj(e.uniformStyle),r.uniformMixedStyle=Gy.fromObj(e.uniformMixedStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.maxTextHeight=null,t.maxTextWidth=null,t.minTextHeight=null,t.minTextWidth=null,t.uniformStyle&&(t.uniformStyle.destroy(),t.uniformStyle=null),t.uniformMixedStyle&&(t.uniformMixedStyle.destroy(),t.uniformMixedStyle=null)}}])&&Uy(e.prototype,r),n&&Uy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Vy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Jy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.isAlongLine=!0,this.alongLineDirection=g.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.isAlongLine=null,t.alongLineDirection=null,t.angleFixed=null,t.repeatedLabelAvoided=null,t.repeatIntervalFixed=null,t.labelRepeatInterval=null}}])&&Vy(e.prototype,r),n&&Vy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hy=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.labelBackShape=w.NONE,this.backStyle=new Ze,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return r.labelBackShape=e.labelBackShape,r.backStyle=Ze.fromJson(e.backStyle),r}}}],(r=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&qy(e.prototype,r),n&&qy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wy(t){"@babel/helpers - typeof";return(Wy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yy(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xy(){return(Xy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$y(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qy(t,e){return(Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zy(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$y(t);if(e){var o=$y(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Wy(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Ky(t)}(this,r)}}function Ky(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $y(t){return($y=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var td=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qy(t,e)}(i,Cy);var e,r,n,o=Zy(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"LABEL",t)).alongLine=new Jy,e.background=new Hy,e.items=null,e.uniqueItems=null,e.labelExpression=null,e.labelOverLengthMode=_.NONE,e.matrixCells=null,e.maxLabelLength=256,e.numericPrecision=0,e.offset=new Fy,e.overlapAvoided=!0,e.rangeExpression=null,e.uniqueExpression=null,e.smallGeometryLabeled=!1,e.text=new zy,e.textSpace=0,t&&dt.extend(Ky(e),t),e.CLASS_NAME="SuperMap.ThemeLabel",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i,r=t.items,n=t.uniqueItems,o=t.matrixCells;if(t.matrixCells=null,dt.copy(e,t),e.alongLine=Jy.fromObj(t),e.background=Hy.fromObj(t),r){e.items=[];for(var a=0,s=r.length;a<s;a++)e.items.push(Ly.fromObj(r[a]))}if(n){e.uniqueItems=[];for(var l=0,u=n.length;l<u;l++)e.uniqueItems.push(Iy.fromObj(n[l]))}if(o){e.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return e.offset=Fy.fromObj(t),e.text=zy.fromObj(t),e}}}],(r=[{key:"destroy",value:function(){Xy($y(i.prototype),"destroy",this).call(this);var t=this;if(t.alongLine=null,t.background&&(t.background.destroy(),t.background=null),t.items){for(var e=0,r=t.items,n=r.length;e<n;e++)r[e].destroy();t.items=null}if(t.uniqueItems){for(var o=0,a=t.uniqueItems,s=a.length;o<s;o++)a[o].destory();t.uniqueItems=null}t.labelExpression=null,t.labelOverLengthMode=null,t.matrixCells=null,t.maxLabelLength=null,t.numericPrecision=null,t.overlapAvoided=null,t.rangeExpression=null,t.uniqueExpression=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.smallGeometryLabeled=null,t.text&&(t.text.destroy(),t.text=null),t.textSpace=null}},{key:"toJSON",value:function(){return dt.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,this.alongLine&&(t.alongLine=this.alongLine.isAlongLine,t.alongLineDirection=this.alongLine.alongLineDirection,t.angleFixed=this.alongLine.angleFixed,t.isLabelRepeated=this.alongLine.isLabelRepeated,t.labelRepeatInterval=this.alongLine.labelRepeatInterval,t.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,t.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.text&&(t.maxTextHeight=this.text.maxTextHeight,t.maxTextWidth=this.text.maxTextWidth,t.minTextHeight=this.text.minTextHeight,t.minTextWidth=this.text.minTextWidth,t.uniformStyle=this.text.uniformStyle,t.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(t.labelBackShape=this.background.labelBackShape,t.backStyle=this.background.backStyle),t.labelOverLengthMode=this.labelOverLengthMode,t.maxLabelLength=this.maxLabelLength,t.smallGeometryLabeled=this.smallGeometryLabeled,t.rangeExpression=this.rangeExpression,t.uniqueExpression=this.uniqueExpression,t.numericPrecision=this.numericPrecision,t.items=this.items,t.uniqueItems=this.uniqueItems,t.labelExpression=this.labelExpression,t.overlapAvoided=this.overlapAvoided,t.matrixCells=this.matrixCells,t.textSpace=this.textSpace,t}}])&&Yy(e.prototype,r),n&&Yy(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ed(t){"@babel/helpers - typeof";return(ed="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function rd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function nd(){return(nd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=sd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function od(t,e){return(od=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function id(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=sd(t);if(e){var o=sd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ed(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ad(t)}(this,r)}}function ad(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sd(t){return(sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ld=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&od(t,e)}(i,Cy);var e,r,n,o=id(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"UNIQUE",t)).defaultStyle=new Ze,e.items=null,e.uniqueExpression=null,e.colorGradientType=v.YELLOW_RED,t&&dt.extend(ad(e),t),e.CLASS_NAME="SuperMap.ThemeUnique",e}return e=i,n=[{key:"fromObj",value:function(t){var e=new i,r=t.items,n=r?r.length:0;dt.extend(e,t),e.items=[],e.defaultStyle=Ze.fromJson(t.defaultStyle);for(var o=0;o<n;o++)e.items.push(Iy.fromObj(r[o]));return e}}],(r=[{key:"destroy",value:function(){nd(sd(i.prototype),"destroy",this).call(this);var t=this;if(t.uniqueExpression=null,t.colorGradientType=null,t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultStyle&&(t.defaultStyle.destroy(),t.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=dt.copyAttributes(t,this)).defaultStyle&&t.defaultStyle.toServerJSONObject&&(t.defaultStyle=t.defaultStyle.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&rd(e.prototype,r),n&&rd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ud(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.axesColor=new Xe(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new My,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.axesColor=Xe.fromJson(e.axesColor),r.axesTextStyle=My.fromObj(e.axesTextStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.axesColor&&(t.axesColor.destroy(),t.axesColor=null),t.axesDisplayed=null,t.axesGridDisplayed=null,t.axesTextDisplayed=null,t.axesTextStyle&&(t.axesTextStyle.destroy(),t.axesTextStyle=null)}}])&&ud(e.prototype,r),n&&ud(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxGraphSize=0,this.minGraphSize=0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return dt.copy(r,e),r}}],(r=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&fd(e.prototype,r),n&&fd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graphTextDisplayed=!1,this.graphTextFormat=h.CAPTION,this.graphTextStyle=new My,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphText"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return dt.copy(r,e),r.graphTextStyle=My.fromObj(e.graphTextStyle),r}}],(r=[{key:"destroy",value:function(){var t=this;t.graphTextDisplayed=null,t.graphTextFormat=null,t.graphTextStyle&&(t.graphTextStyle.destroy(),t.graphTextStyle=null)}}])&&pd(e.prototype,r),n&&pd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new Ze,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.uniformStyle=Ze.fromJson(e.uniformStyle),r}}}],(r=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&dd(e.prototype,r),n&&dd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vd(t){"@babel/helpers - typeof";return(vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function md(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gd(){return(gd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wd(t,e){return(wd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _d(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Sd(t);if(e){var o=Sd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Od(t)}(this,r)}}function Od(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sd(t){return(Sd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wd(t,e)}(i,Cy);var e,r,n,o=_d(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRAPH",t)).barWidth=0,e.graduatedMode=d.CONSTANT,e.graphAxes=new cd,e.graphSize=new hd,e.graphSizeFixed=!1,e.graphText=new yd,e.graphType=p.AREA,e.graphAxesTextDisplayMode=y.NONE,e.items=null,e.memoryKeys=null,e.negativeDisplayed=!1,e.offset=new Fy,e.overlapAvoided=!0,e.roseAngle=0,e.startAngle=0,t&&dt.extend(Od(e),t),e.CLASS_NAME="SuperMap.ThemeGraph",e}return e=i,n=[{key:"fromObj",value:function(t){var e=new i,r=t.items,n=r?r.length:0;dt.copy(e,t),e.items=[],e.graphAxes=cd.fromObj(t),e.graphSize=hd.fromObj(t),e.graphText=yd.fromObj(t),e.offset=Fy.fromObj(t);for(var o=0;o<n;o++)e.items.push(bd.fromObj(r[o]));return e}}],(r=[{key:"destroy",value:function(){gd(Sd(i.prototype),"destroy",this).call(this);var t=this;if(t.barWidth=null,t.graduatedMode=null,t.graphAxes&&(t.graphAxes.destroy(),t.graphAxes=null),t.graphSize&&(t.graphSize.destroy(),t.graphSize=null),t.graphSizeFixed=null,t.graphText&&(t.graphText.destroy(),t.graphText=null),t.graphType=null,t.items){for(var e=0,r=t.items,n=r.length;e<n;e++)r[e].destroy();t.items=null}t.memoryKeys=null,t.negativeDisplayed=null,t.offset&&(t.offset.destroy(),t.offset=null),t.overlapAvoided=null,t.roseAngle=null,t.startAngle=null,t.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return dt.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,this.graphText&&(t.graphTextDisplayed=this.graphText.graphTextDisplayed,t.graphTextFormat=this.graphText.graphTextFormat,t.graphTextStyle=this.graphText.graphTextStyle),this.graphAxes&&(t.axesColor=this.graphAxes.axesColor,t.axesDisplayed=this.graphAxes.axesDisplayed,t.axesGridDisplayed=this.graphAxes.axesGridDisplayed,t.axesTextDisplayed=this.graphAxes.axesTextDisplayed,t.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(t.maxGraphSize=this.graphSize.maxGraphSize,t.minGraphSize=this.graphSize.minGraphSize),this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),t.barWidth=this.barWidth,t.graduatedMode=this.graduatedMode,t.graphSizeFixed=this.graphSizeFixed,t.graphType=this.graphType,t.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,t.items=this.items,t.memoryKeys=this.memoryKeys,t.negativeDisplayed=this.negativeDisplayed,t.overlapAvoided=this.overlapAvoided,t.roseAngle=this.roseAngle,t.startAngle=this.startAngle,t}}])&&md(e.prototype,r),n&&md(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Pd(t){"@babel/helpers - typeof";return(Pd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ed(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kd(t,e){return(kd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Cd(t);if(e){var o=Cd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Td(t)}(this,r)}}function Td(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cd(t){return(Cd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ad=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kd(t,e)}(i,Cy);var e,r,n,o=jd(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"DOTDENSITY",t)).dotExpression=null,e.style=new Ze,e.value=null,t&&dt.extend(Td(e),t),e.CLASS_NAME="SuperMap.ThemeDotDensity",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;return dt.copy(e,t),e.style=Ze.fromJson(t.style),e}}}],(r=[{key:"destroy",value:function(){var t=this;t.dotExpression=null,t.value=null,t.style&&(t.style.destroy(),t.style=null)}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Ed(e.prototype,r),n&&Ed(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Md(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Rd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.negativeDisplayed=!1,this.negativeStyle=new Ze,this.positiveStyle=new Ze,this.zeroDisplayed=!1,this.zeroStyle=new Ze,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.negativeStyle=Ze.fromJson(e.negativeStyle),r.positiveStyle=Ze.fromJson(e.positiveStyle),r.zeroStyle=Ze.fromJson(e.zeroStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.negativeDisplayed=null,t.negativeStyle=null,t.positiveStyle=null,t.zeroDisplayed=null,t.zeroStyle=null}}])&&Md(e.prototype,r),n&&Md(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ld(t){"@babel/helpers - typeof";return(Ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Nd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Id(){return(Id="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Gd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Dd(t,e){return(Dd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Fd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Gd(t);if(e){var o=Gd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ld(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Bd(t)}(this,r)}}function Bd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Gd(t){return(Gd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ud=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Dd(t,e)}(i,Cy);var e,r,n,o=Fd(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRADUATEDSYMBOL",t)).baseValue=0,e.expression=null,e.graduatedMode=d.CONSTAN,e.offset=new Fy,e.style=new Rd,t&&dt.extend(Bd(e),t),e.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;return dt.copy(e,t),e.offset=Fy.fromObj(t),e.style=Rd.fromObj(t),e}}}],(r=[{key:"destroy",value:function(){Id(Gd(i.prototype),"destroy",this).call(this);var t=this;t.expression=null,t.graduatedMode=d.CONSTANT,t.offset&&(t.offset.destroy(),t.offset=null),t.style&&(t.style.destroy(),t.style=null)}},{key:"toJSON",value:function(){return dt.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var t={};return t.type=this.type,t.memoryData=this.memoryData,t.baseValue=this.baseValue,t.expression=this.expression,t.graduatedMode=this.graduatedMode,this.offset&&(t.offsetFixed=this.offset.offsetFixed,t.offsetX=this.offset.offsetX,t.offsetY=this.offset.offsetY),this.style&&(t.negativeStyle=this.style.negativeStyle,t.negativeDisplayed=this.style.negativeDisplayed,t.positiveStyle=this.style.positiveStyle,t.zeroDisplayed=this.style.zeroDisplayed,t.zeroStyle=this.style.zeroStyle),t}}])&&Nd(e.prototype,r),n&&Nd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function zd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Vd=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.end=0,this.start=0,this.style=new Ze,this.visible=!0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.style=Ze.fromJson(e.style),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&zd(e.prototype,r),n&&zd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Jd(t){"@babel/helpers - typeof";return(Jd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hd(){return(Hd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qd(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wd(t,e){return(Wd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yd(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qd(t);if(e){var o=Qd(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Jd(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xd(t)}(this,r)}}function Xd(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qd(t){return(Qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zd=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wd(t,e)}(i,Cy);var e,r,n,o=Yd(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"RANGE",t)).precision="1.0E-12",e.items=null,e.rangeExpression=null,e.rangeMode=b.EQUALINTERVAL,e.rangeParameter=0,e.colorGradientType=v.YELLOW_RED,t&&dt.extend(Xd(e),t),e.CLASS_NAME="SuperMap.ThemeRange",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;dt.copy(e,t);var r=t.items,n=r?r.length:0;e.items=[];for(var o=0;o<n;o++)e.items.push(Vd.fromObj(r[o]));return e}}}],(r=[{key:"destroy",value:function(){Hd(Qd(i.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.rangeExpression=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&qd(e.prototype,r),n&&qd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Kd(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $d=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.UGCLayer"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){dt.reset(this)}},{key:"fromJson",value:function(t){t=t||{},dt.extend(this,t);var e=this.bounds;e&&(this.bounds=new _t(e.leftBottom.x,e.leftBottom.y,e.rightTop.x,e.rightTop.y))}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).bounds&&t.bounds.toServerJSONObject&&(t.bounds=t.bounds.toServerJSONObject()),t}}])&&Kd(e.prototype,r),n&&Kd(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tb(t){"@babel/helpers - typeof";return(tb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rb(){return(rb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ib(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nb(t,e){return(nb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ob(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ib(t);if(e){var o=ib(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ib(t){return(ib=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ab=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nb(t,e)}(i,$d);var e,r,n,o=ob(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).completeLineSymbolDisplayed=null,e.maxScale=null,e.minScale=null,e.minVisibleGeometrySize=null,e.opaqueRate=null,e.symbolScalable=null,e.symbolScale=null,e.overlapDisplayed=null,e.overlapDisplayedOptions=null,e.CLASS_NAME="SuperMap.UGCMapLayer",e}return e=i,(r=[{key:"destroy",value:function(){rb(ib(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"fromJson",value:function(t){rb(ib(i.prototype),"fromJson",this).call(this,t)}},{key:"toServerJSONObject",value:function(){return rb(ib(i.prototype),"toServerJSONObject",this).call(this)}}])&&eb(e.prototype,r),n&&eb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lb=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.JoinItem"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var t={};return t=dt.copyAttributes(t,this)}}])&&sb(e.prototype,r),n&&sb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ub(t){"@babel/helpers - typeof";return(ub="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fb(){return(fb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hb(t,e){return(hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yb(t);if(e){var o=yb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ub(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yb(t){return(yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var db=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hb(t,e)}(i,ab);var e,r,n,o=pb(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).datasetInfo=null,e.displayFilter=null,e.joinItems=null,e.representationField=null,e.ugcLayerType=null,e.CLASS_NAME="SuperMap.UGCSubLayer",e}return e=i,(r=[{key:"fromJson",value:function(t){if(fb(yb(i.prototype),"fromJson",this).call(this,t),this.datasetInfo&&(this.datasetInfo=new Ps(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var e=[],r=0;r<this.joinItems.length;r++)e[r]=new lb(this.joinItems[r]);this.joinItems=e}}},{key:"destroy",value:function(){fb(yb(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"toServerJSONObject",value:function(){var t=fb(yb(i.prototype),"toServerJSONObject",this).call(this);if(t.joinItems){for(var e=[],r=0;r<t.joinItems.length;r++)t.joinItems[r].toServerJSONObject&&(e[r]=t.joinItems[r].toServerJSONObject());t.joinItems=e}return t.datasetInfo&&t.datasetInfo.toServerJSONObject&&(t.datasetInfo=t.datasetInfo.toServerJSONObject()),t}}])&&cb(e.prototype,r),n&&cb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bb(t){"@babel/helpers - typeof";return(bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mb(){return(mb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_b(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gb(t,e){return(gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_b(t);if(e){var o=_b(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _b(t){return(_b=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ob=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gb(t,e)}(i,db);var e,r,n,o=wb(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).theme=null,e.themeElementPosition=null,e.CLASS_NAME="SuperMap.ServerTheme",e}return e=i,(r=[{key:"destroy",value:function(){mb(_b(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"fromJson",value:function(t){mb(_b(i.prototype),"fromJson",this).call(this,t);var e=this.theme;switch(e&&e.type){case"LABEL":this.theme=td.fromObj(e);break;case"UNIQUE":this.theme=ld.fromObj(e);break;case"GRAPH":this.theme=xd.fromObj(e);break;case"DOTDENSITY":this.theme=Ad.fromObj(e);break;case"GRADUATEDSYMBOL":this.theme=Ud.fromObj(e);break;case"RANGE":this.theme=Zd.fromObj(e)}this.themeElementPosition&&(this.themeElementPosition=new gt(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var t=mb(_b(i.prototype),"toServerJSONObject",this).call(this);return t.themeElementPosition&&t.themeElementPosition.toServerJSONObject&&(t.themeElementPosition=t.themeElementPosition.toServerJSONObject()),t.theme&&t.theme.toServerJSONObject&&(t.theme=t.theme.toServerJSONObject()),t}}])&&vb(e.prototype,r),n&&vb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Sb(t){"@babel/helpers - typeof";return(Sb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Pb(){return(Pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Eb(t,e){return(Eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jb(t);if(e){var o=jb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Sb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function jb(t){return(jb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eb(t,e)}(i,db);var e,r,n,o=kb(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).colorDictionarys=null,e.brightness=null,e.colorGradientType=null,e.colors=null,e.contrast=null,e.dashStyle=null,e.gridType=null,e.horizontalSpacing=null,e.sizeFixed=null,e.solidStyle=null,e.specialColor=null,e.specialValue=null,e.specialValueTransparent=null,e.verticalSpacing=null,e.CLASS_NAME="SuperMap.Grid",e}return e=i,(r=[{key:"destroy",value:function(){Pb(jb(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"fromJson",value:function(t){if(Pb(jb(i.prototype),"fromJson",this).call(this,t),this.specialColor&&(this.specialColor=new Xe(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var e,r=[];for(var n in this.colors)e=this.colors[n],r.push(new Xe(e.red,e.green,e.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new Ze(this.dashStyle)),this.solidStyle&&(this.solidStyle=new Ze(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new ns({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var t=Pb(jb(i.prototype),"toServerJSONObject",this).call(this);return t.dashStyle&&t.dashStyle.toServerJSONObject&&(t.dashStyle=t.dashStyle.toServerJSONObject()),t.solidStyle&&t.solidStyle.toServerJSONObject&&(t.solidStyle=t.solidStyle.toServerJSONObject()),t}}])&&xb(e.prototype,r),n&&xb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Cb(t){"@babel/helpers - typeof";return(Cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ab(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mb(){return(Mb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Nb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rb(t,e){return(Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Nb(t);if(e){var o=Nb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Cb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Nb(t){return(Nb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ib=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rb(t,e)}(i,db);var e,r,n,o=Lb(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).brightness=null,e.colorSpaceType=null,e.contrast=null,e.displayBandIndexes=null,e.transparent=null,e.transparentColor=null,e.transparentColorTolerance=null,e.CLASS_NAME="SuperMap.Image",e}return e=i,(r=[{key:"destroy",value:function(){Mb(Nb(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"fromJson",value:function(t){Mb(Nb(i.prototype),"fromJson",this).call(this,t),this.transparentColor&&(this.transparentColor=new Xe(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return Mb(Nb(i.prototype),"toServerJSONObject",this).call(this)}}])&&Ab(e.prototype,r),n&&Ab(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Db(t){"@babel/helpers - typeof";return(Db="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Bb(){return(Bb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Gb(t,e){return(Gb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ub(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zb(t);if(e){var o=zb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Db(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function zb(t){return(zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Vb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gb(t,e)}(i,db);var e,r,n,o=Ub(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).style=null,e.CLASS_NAME="SuperMap.Vector",e}return e=i,(r=[{key:"destroy",value:function(){Bb(zb(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"fromJson",value:function(t){Bb(zb(i.prototype),"fromJson",this).call(this,t);var e=this.style;e&&(this.style=new Ze(e))}},{key:"toServerJSONObject",value:function(){var t=Bb(zb(i.prototype),"toServerJSONObject",this).call(this);return t.style&&t.style.toServerJSONObject&&(t.style=t.style.toServerJSONObject()),t}}])&&Fb(e.prototype,r),n&&Fb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Jb(t){"@babel/helpers - typeof";return(Jb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Hb(){return(Hb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Qb(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Wb(t,e){return(Wb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Yb(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Qb(t);if(e){var o=Qb(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Jb(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Xb(t)}(this,r)}}function Xb(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Qb(t){return(Qb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Zb=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wb(t,e)}(i,xo);var e,r,n,o=Yb(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).isTempLayers=!1,e&&dt.extend(Xb(r),e),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}return e=i,(r=[{key:"destroy",value:function(){Hb(Qb(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t){var e=this;return e.isTempLayers||(e.url=dt.urlPathAppend(e.url,"layers")),e.request({method:"GET",params:null,scope:e,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r,n;return n=(r=!!(t=dt.transformResult(t))&&t.length>0?t[0].subLayers.layers:null)?r.length:0,this.handleLayers(n,r),{result:t[0],options:e}}},{key:"handleLayers",value:function(t,e){var r;if(t)for(var n=0;n<t;n++){if(e[n].subLayers&&e[n].subLayers.layers&&e[n].subLayers.layers.length>0)this.handleLayers(e[n].subLayers.layers.length,e[n].subLayers.layers);else switch(e[n].ugcLayerType){case"THEME":(r=new Ob).fromJson(e[n]),e[n]=r;break;case"GRID":(r=new Tb).fromJson(e[n]),e[n]=r;break;case"IMAGE":(r=new Ib).fromJson(e[n]),e[n]=r;break;case"VECTOR":(r=new Vb).fromJson(e[n]),e[n]=r}}}}])&&qb(e.prototype,r),n&&qb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Kb(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $b=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)if("inputPoints"===r&&"geometry"===t.InterpolationAnalystType){for(var n=[],o=0;o<t.inputPoints.length;o++){var i=t.inputPoints[o],a={x:i.x,y:i.y,z:i.tag};n.push(a)}e[r]=n}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){var t=this;t.bounds=null,t.searchRadius=null,t.zValueFieldName=null,t.zValueScale=null,t.resolution=null,t.filterQueryParameter=null,t.outputDatasetName=null,t.pixelFormat=null}}])&&Kb(e.prototype,r),n&&Kb(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tv(t){"@babel/helpers - typeof";return(tv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ev(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function rv(){return(rv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=av(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function nv(t,e){return(nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ov(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=av(t);if(e){var o=av(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===tv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return iv(t)}(this,r)}}function iv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function av(t){return(av=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&nv(t,e)}(i,$b);var e,r,n,o=ov(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).smooth=.1,e.tension=40,e.searchMode=null,e.expectedCount=12,e.maxPointCountForInterpolation=200,e.maxPointCountInNode=50,t&&dt.extend(iv(e),t),e.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)e[r]=t[r]}}],(r=[{key:"destroy",value:function(){rv(av(i.prototype),"destroy",this).call(this);var t=this;t.smooth=null,t.tension=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&ev(e.prototype,r),n&&ev(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function lv(t){"@babel/helpers - typeof";return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cv(){return(cv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fv(t,e){return(fv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yv(t);if(e){var o=yv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return pv(t)}(this,r)}}function pv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function yv(t){return(yv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fv(t,e)}(i,$b);var e,r,n,o=hv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t&&dt.extend(pv(e),t),e.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){cv(yv(i.prototype),"destroy",this).call(this)}}])&&uv(e.prototype,r),n&&uv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bv(t){"@babel/helpers - typeof";return(bv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mv(){return(mv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ov(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gv(t,e){return(gv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ov(t);if(e){var o=Ov(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return _v(t)}(this,r)}}function _v(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ov(t){return(Ov=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gv(t,e)}(i,$b);var e,r,n,o=wv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).power=2,e.searchMode=null,e.expectedCount=12,t&&dt.extend(_v(e),t),e.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){mv(Ov(i.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&vv(e.prototype,r),n&&vv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xv(t){"@babel/helpers - typeof";return(xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Ev(){return(Ev="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Cv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kv(t,e){return(kv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Cv(t);if(e){var o=Cv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tv(t)}(this,r)}}function Tv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cv(t){return(Cv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Av=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kv(t,e)}(i,$b);var e,r,n,o=jv(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type=null,e.mean=null,e.angle=0,e.nugget=0,e.range=0,e.sill=0,e.variogramMode=A.SPHERICAL,e.exponent=M.EXP1,e.searchMode=null,e.expectedCount=12,e.maxPointCountForInterpolation=200,e.maxPointCountInNode=50,t&&dt.extend(Tv(e),t),e.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){Ev(Cv(i.prototype),"destroy",this).call(this);var t=this;t.type=null,t.mean=null,t.angle=null,t.nugget=null,t.range=null,t.sill=null,t.variogramMode=null,t.exponent=null,t.searchMode=null,t.expectedCount=null,t.maxPointCountForInterpolation=null,t.maxPointCountInNode=null}}])&&Pv(e.prototype,r),n&&Pv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mv(t){"@babel/helpers - typeof";return(Mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lv(){return(Lv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Nv(t,e){return(Nv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Iv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Fv(t);if(e){var o=Fv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Dv(t)}(this,r)}}function Dv(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Fv(t){return(Fv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Bv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nv(t,e)}(i,si);var e,r,n,o=Iv(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).mode=null,e&&dt.extend(Dv(r),e),r}return e=i,(r=[{key:"destroy",value:function(){Lv(Fv(i.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof dv?(n.mode="Density","geometry"===t.InterpolationAnalystType?n.url=dt.urlPathAppend(n.url,"geometry/interpolation/density"):n.url=dt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/density")):t instanceof Sv?(n.mode="IDW","geometry"===t.InterpolationAnalystType?n.url=dt.urlPathAppend(n.url,"geometry/interpolation/idw"):n.url=dt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/idw")):t instanceof sv?(n.mode="RBF","geometry"===t.InterpolationAnalystType?n.url=dt.urlPathAppend(n.url,"geometry/interpolation/rbf"):n.url=dt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/rbf")):t instanceof Av&&(n.mode="Kriging","geometry"===t.InterpolationAnalystType?n.url=dt.urlPathAppend(n.url,"geometry/interpolation/kriging"):n.url=dt.urlPathAppend(n.url,"datasets/"+t.dataset+"/interpolation/kriging")),$b.toObject(t,r);var o=dt.toJSON(r);return n.url=dt.urlAppend(n.url,"returnContent=true"),n.request({method:"POST",data:o,scope:n,success:e,failure:e})}}])&&Rv(e.prototype,r),n&&Rv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Gv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Uv=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=D.METER,this.radiusUnit=D.METER,this.areaUnit=I.SQUAREMILE,this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Gv(e.prototype,r),n&&Gv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zv(t){"@babel/helpers - typeof";return(zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Vv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Jv(){return(Jv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wv(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qv(t,e){return(qv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Hv(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wv(t);if(e){var o=Wv(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Wv(t){return(Wv=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Yv=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qv(t,e)}(i,ua);var e,r,n,o=Hv(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/density"),r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}return e=i,(r=[{key:"destroy",value:function(){Jv(Wv(i.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(t){return Jv(Wv(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getKernelDensityJob",value:function(t,e){return Jv(Wv(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){return Jv(Wv(i.prototype),"addJob",this).call(this,this.url,t,Uv,e,r,n)}}])&&Vv(e.prototype,r),n&&Vv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qv=function(t,e,r){return e&&Xv(t.prototype,e),r&&Xv(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="LabelMatrixCell"});function Zv(t){"@babel/helpers - typeof";return(Zv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Kv(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $v(t,e){return($v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rm(t);if(e){var o=rm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zv(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return em(t)}(this,r)}}function em(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function rm(t){return(rm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$v(t,e)}(i,Qv);var e,r,n,o=tm(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).height=0,e.pathField=null,e.rotation=0,e.width=0,e.sizeFixed=!1,e.type="IMAGE",t&&dt.extend(em(e),t),e.CLASS_NAME="SuperMap.LabelImageCell",e}return e=i,(r=[{key:"destroy",value:function(){var t=this;t.height=null,t.pathField=null,t.rotation=null,t.width=null,t.sizeFixed=null}}])&&Kv(e.prototype,r),n&&Kv(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function om(t){"@babel/helpers - typeof";return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function im(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function am(t,e){return(am=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=um(t);if(e){var o=um(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===om(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return lm(t)}(this,r)}}function lm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function um(t){return(um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&am(t,e)}(i,Qv);var e,r,n,o=sm(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).style=new Ze,e.symbolIDField=null,e.type="SYMBOL",t&&dt.extend(lm(e),t),e.CLASS_NAME="SuperMap.LabelSymbolCell",e}return e=i,(r=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&im(e.prototype,r),n&&im(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fm(t){"@babel/helpers - typeof";return(fm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pm(t,e){return(pm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ym(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=bm(t);if(e){var o=bm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return dm(t)}(this,r)}}function dm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function bm(t){return(bm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pm(t,e)}(i,Qv);var e,r,n,o=ym(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).themeLabel=new td,e.type="THEME",t&&dt.extend(dm(e),t),e.CLASS_NAME=" SuperMap.LabelThemeCell",e}return e=i,(r=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&hm(e.prototype,r),n&&hm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.LayerStatus"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var t="{";t+='"type":"UGC",';var e=[];return this.layerName&&(e.push('"name":"'+this.layerName+'"'),e.push('"visible":'+this.isVisible)),this.displayFilter&&e.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&e.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&e.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&e.push('"fieldValuesDisplayFilter":'+dt.toJSON(this.fieldValuesDisplayFilter)),t+=e,t+="}"}}])&&mm(e.prototype,r),n&&mm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function wm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _m=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.LinkItem"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasourceConnectionInfo instanceof Qi&&(t.datasourceConnectionInfo.destroy(),t.datasourceConnectionInfo=null),t.foreignKeys=null,t.foreignTable=null,t.linkFields=null,t.linkFilter=null,t.name=null,t.primaryKeys=null}}])&&wm(e.prototype,r),n&&wm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Om(t){"@babel/helpers - typeof";return(Om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xm(){return(xm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pm(t,e){return(Pm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Em(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jm(t);if(e){var o=jm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Om(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return km(t)}(this,r)}}function km(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jm(t){return(jm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pm(t,e)}(i,xo);var e,r,n,o=Em(i);function i(t,e){var r;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).projection=null,r.CLASS_NAME="SuperMap.MapService",e&&dt.extend(km(r),e);var n=km(r);if(n.projection){var a=n.projection.split(":");a instanceof Array&&(2===a.length&&(n.url=dt.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[1],'"}'))))),1===a.length&&(n.url=dt.urlAppend(n.url,"prjCoordSys=".concat(encodeURIComponent('{"epsgCode":"'.concat(a[0],'"}'))))))}return r}return e=i,(r=[{key:"destroy",value:function(){xm(jm(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){return this.request({method:"GET",scope:this,success:t,failure:t})}},{key:"transformResult",value:function(t,e){var r=(t=dt.transformResult(t)).code>=200&&t.code<300||0==t.code||304===t.code,n=t.code&&r;return!t.code||n?{result:t,options:e}:{error:t,options:e}}}])&&Sm(e.prototype,r),n&&Sm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Cm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Am=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)if("dataset"!==r&&(e[r]=t[r]),"extractRegion"===r&&t[r]){for(var n=t[r].components[0].components,o={},i=[],a=n.length,s=0;s<a-1;s++){var l={};l.x=n[s].x,l.y=n[s].y,i.push(l)}o.points=i,o.type="REGION",e[r]=o}}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.bounds=null,t.expression=null,t.isZip=!0,t.ignoreNoValue=!0,t.targetDatasource=null,t.resultGridName=null,t.deleteExistResultDataset=null}}])&&Cm(e.prototype,r),n&&Cm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Mm(t){"@babel/helpers - typeof";return(Mm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Lm(){return(Lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Nm(t,e){return(Nm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Im(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Dm(t);if(e){var o=Dm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Mm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Dm(t){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fm=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Nm(t,e)}(i,si);var e,r,n,o=Im(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}return e=i,(r=[{key:"destroy",value:function(){Lm(Dm(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof Am&&(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/mathanalyst")),Am.toObject(t,n);var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Rm(e.prototype,r),n&&Rm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Bm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Gm=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.geometry=e,this.unit=c.METER,this.prjCoordSys=null,this.distanceMode=null,r&&dt.extend(this,r),this.CLASS_NAME="SuperMap.MeasureParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&Bm(e.prototype,r),n&&Bm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Um(t){"@babel/helpers - typeof";return(Um="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function zm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Vm(){return(Vm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Wm(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Jm(t,e){return(Jm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function qm(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Wm(t);if(e){var o=Wm(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Um(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Hm(t)}(this,r)}}function Hm(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Wm(t){return(Wm=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Ym=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Jm(t,e)}(i,xo);var e,r,n,o=qm(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).measureMode=u.DISTANCE,e&&dt.extend(Hm(r),e),r.CLASS_NAME="SuperMap.MeasureService",r}return e=i,(r=[{key:"destroy",value:function(){Vm(Wm(i.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(t,e){if(t instanceof Gm){var r,n,o=this,i=t.geometry;if(i){o.url=dt.urlPathAppend(o.url,o.measureMode===u.AREA?"area":"distance");var a,s,l,c=pr.fromGeometry(i);if(c)return r=c.parts[0],n=c.points.splice(0,r),t.prjCoordSys?("object"===Um(t.prjCoordSys)?a='{"epsgCode"'+(s=t.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof t.prjCoordSys&&(a='{"epsgCode"'+t.prjCoordSys.substring(t.prjCoordSys.indexOf(":"),t.prjCoordSys.length)+"}"),l={point2Ds:dt.toJSON(n),unit:t.unit,prjCoordSys:a,distanceMode:t.distanceMode||"Geodesic"}):l={point2Ds:dt.toJSON(n),unit:t.unit,distanceMode:t.distanceMode||"Geodesic"},o.request({method:"GET",params:l,scope:o,success:e,failure:e})}}}}])&&zm(e.prototype,r),n&&zm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Xm(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Qm=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,dt.extend(this,e),this.ugcLayer=new $d(e),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){dt.reset(this)}},{key:"fromJson",value:function(t){this.ugcLayer.fromJson.apply(this,[t])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var t=this.ugcLayer.toServerJSONObject.apply(this,arguments),e="{";for(var r in t)t.hasOwnProperty(r)&&(e+="'"+r+"':"+t[r]+",");return e=e.substr(0,e.length-1),e+="}"}}])&&Xm(e.prototype,r),n&&Xm(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Zm(t){"@babel/helpers - typeof";return(Zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Km(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $m(){return($m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ng(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tg(t,e){return(tg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ng(t);if(e){var o=ng(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Zm(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return rg(t)}(this,r)}}function rg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ng(t){return(ng=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var og=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tg(t,e)}(a,si);var e,r,n,i=eg(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).mode=null,e&&dt.extend(rg(r),e),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}return e=a,(r=[{key:"destroy",value:function(){$m(ng(a.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof Ns?(n.mode="datasets",n.url=dt.urlPathAppend(n.url,"datasets/"+t.sourceDataset+"/overlay"),Ns.toObject(t,r)):t instanceof Wf&&(n.mode="geometry",t.operateGeometries&&t.sourceGeometries?(n.url=dt.urlPathAppend(n.url,"geometry/overlay/batch"),n.url=dt.urlAppend(n.url,"ignoreAnalystParam=true")):n.url=dt.urlPathAppend(n.url,"geometry/overlay"),Wf.toObject(t,r)),this.returnContent=!0;var o=dt.toJSON(r);return n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&Km(e.prototype,r),n&&Km(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function ig(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ag=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!=r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ig(e.prototype,r),n&&ig(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sg(t){"@babel/helpers - typeof";return(sg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ug(){return(ug="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cg(t,e){return(cg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hg(t);if(e){var o=hg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function hg(t){return(hg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cg(t,e)}(i,ua);var e,r,n,o=fg(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/overlay"),r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}return e=i,(r=[{key:"destroy",value:function(){ug(hg(i.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(t){return ug(hg(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getOverlayGeoJob",value:function(t,e){return ug(hg(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){return ug(hg(i.prototype),"addJob",this).call(this,this.url,t,ag,e,r,n)}}])&&lg(e.prototype,r),n&&lg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yg(t){"@babel/helpers - typeof";return(yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bg(){return(bg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vg(t,e){return(vg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wg(t);if(e){var o=wg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gg(t)}(this,r)}}function gg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wg(t){return(wg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _g=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vg(t,e)}(i,qa);var e,r,n,o=mg(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).returnContent=!0,e.bounds=null,dt.extend(gg(e),t),e.CLASS_NAME="SuperMap.QueryByBoundsParameters",e}return e=i,(r=[{key:"destroy",value:function(){bg(wg(i.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&dg(e.prototype,r),n&&dg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Og(t){"@babel/helpers - typeof";return(Og="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xg(){return(xg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Tg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pg(t,e){return(Pg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Eg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Tg(t);if(e){var o=Tg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return kg(this,r)}}function kg(t,e){if(e&&("object"===Og(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jg(t)}function jg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Tg(t){return(Tg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Cg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pg(t,e)}(a,xo);var e,r,n,i=Eg(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).returnContent=!1,r.format=o.GEOJSON,r.returnFeatureWithFieldCaption=!1,e&&dt.extend(jg(r),e),r.CLASS_NAME="SuperMap.QueryService",r.url?(e&&e.format&&(r.format=e.format.toUpperCase()),r.url=dt.urlPathAppend(r.url,"queryResults"),r):kg(r)}return e=a,(r=[{key:"destroy",value:function(){xg(Tg(a.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(t,e){if(t instanceof qa){var r,n=this,o=null;return n.returnContent=t.returnContent,r=n.getJsonParameters(t),n.returnContent||(o=t.returnCustomResult)&&(n.url=dt.urlAppend(n.url,"returnCustomResult="+o)),n.returnFeatureWithFieldCaption=t.returnFeatureWithFieldCaption,n.request({method:"POST",data:r,scope:n,success:e,failure:e})}}},{key:"transformResult",value:function(t,e){t=dt.transformResult(t);var r=new Hr;if(t&&t.recordsets)for(var n=0,i=t.recordsets,a=i.length;n<a;n++)i[n].features&&(!0===this.returnFeatureWithFieldCaption&&i[n].features.map(function(t){return t.fieldNames=i[n].fieldCaptions,t}),this.format===o.GEOJSON&&(i[n].features=r.toGeoJSON(i[n].features)));return{result:t,options:e}}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}},{key:"getQueryParameters",value:function(t){return new qa({customParams:t.customParams,expectCount:t.expectCount,networkType:t.networkType,queryOption:t.queryOption,queryParams:t.queryParams,startRecord:t.startRecord,prjCoordSys:t.prjCoordSys,holdTime:t.holdTime})}}])&&Sg(e.prototype,r),n&&Sg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function Ag(t){"@babel/helpers - typeof";return(Ag="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rg(){return(Rg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ig(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lg(t,e){return(Lg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ng(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ig(t);if(e){var o=Ig(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ag(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ig(t){return(Ig=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lg(t,e)}(i,Cg);var e,r,n,o=Ng(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryByBoundsService",r}return e=i,(r=[{key:"destroy",value:function(){Rg(Ig(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(!(t instanceof _g))return null;var e,r="",n=t.bounds;return e=this.getQueryParameters(t),r+="'queryMode':'BoundsQuery','queryParameters':",r+=dt.toJSON(e),r="{"+(r+=",'bounds': {'rightTop':{'y':"+n.top+",'x':"+n.right+"},'leftBottom':{'y':"+n.bottom+",'x':"+n.left+"}}")+"}"}}])&&Mg(e.prototype,r),n&&Mg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Fg(t){"@babel/helpers - typeof";return(Fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gg(){return(Gg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ug(t,e){return(Ug=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Jg(t);if(e){var o=Jg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Fg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vg(t)}(this,r)}}function Vg(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jg(t){return(Jg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ug(t,e)}(i,qa);var e,r,n,o=zg(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).geometry=null,e.isNearest=null,e.returnContent=!0,dt.extend(Vg(e),t),e.CLASS_NAME="SuperMap.QueryByDistanceParameters",e}return e=i,(r=[{key:"destroy",value:function(){Gg(Jg(i.prototype),"destroy",this).call(this);var t=this;t.returnContent=null,t.distance=null,t.isNearest=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}}])&&Bg(e.prototype,r),n&&Bg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Hg(t){"@babel/helpers - typeof";return(Hg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Wg(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yg(){return(Yg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Zg(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Xg(t,e){return(Xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Qg(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Zg(t);if(e){var o=Zg(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Hg(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Zg(t){return(Zg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Kg=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xg(t,e)}(i,Cg);var e,r,n,o=Qg(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryByDistanceService",r}return e=i,(r=[{key:"destroy",value:function(){Yg(Zg(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof qg){var e="",r=this.getQueryParameters(t),n=pr.fromGeometry(t.geometry);return e+=t.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",e+=dt.toJSON(r),e="{"+(e+=",'geometry':"+dt.toJSON(n)+",'distance':"+t.distance)+"}"}}}])&&Wg(e.prototype,r),n&&Wg(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $g(t){"@babel/helpers - typeof";return($g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ew(){return(ew="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=iw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rw(t,e){return(rw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=iw(t);if(e){var o=iw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$g(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return ow(t)}(this,r)}}function ow(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iw(t){return(iw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var aw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rw(t,e)}(i,qa);var e,r,n,o=nw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).returnContent=!0,e.geometry=null,e.spatialQueryMode=l.INTERSECT,dt.extend(ow(e),t),e.CLASS_NAME="SuperMap.QueryByGeometryParameters",e}return e=i,(r=[{key:"destroy",value:function(){ew(iw(i.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&tw(e.prototype,r),n&&tw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function sw(t){"@babel/helpers - typeof";return(sw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uw(){return(uw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function cw(t,e){return(cw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function fw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hw(t);if(e){var o=hw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function hw(t){return(hw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&cw(t,e)}(i,Cg);var e,r,n,o=fw(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryByGeometryService",r}return e=i,(r=[{key:"destroy",value:function(){uw(hw(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof aw){var e,r="",n=t.geometry,o=pr.fromGeometry(n);return e=this.getQueryParameters(t),r+="'queryMode':'SpatialQuery','queryParameters':",r="{"+(r+=dt.toJSON(e)+",'geometry':"+dt.toJSON(o)+",'spatialQueryMode':"+dt.toJSON(t.spatialQueryMode))+"}"}}}])&&lw(e.prototype,r),n&&lw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function yw(t){"@babel/helpers - typeof";return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bw(){return(bw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ww(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vw(t,e){return(vw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ww(t);if(e){var o=ww(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gw(t)}(this,r)}}function gw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ww(t){return(ww=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _w=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vw(t,e)}(i,qa);var e,r,n,o=mw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).returnContent=!0,dt.extend(gw(e),t),e.CLASS_NAME="SuperMap.QueryBySQLParameters",e}return e=i,(r=[{key:"destroy",value:function(){bw(ww(i.prototype),"destroy",this).call(this);this.returnContent=null}}])&&dw(e.prototype,r),n&&dw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ow(t){"@babel/helpers - typeof";return(Ow="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Sw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xw(){return(xw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Pw(t,e){return(Pw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Ew(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kw(t);if(e){var o=kw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ow(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kw(t){return(kw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Pw(t,e)}(i,Cg);var e,r,n,o=Ew(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.QueryBySQLService",r}return e=i,(r=[{key:"destroy",value:function(){xw(kw(i.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(t){if(t instanceof _w){var e,r="";return e=this.getQueryParameters(t),r+="'queryMode':'SqlQuery','queryParameters':",r="{"+(r+=dt.toJSON(e))+"}"}}}])&&Sw(e.prototype,r),n&&Sw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Tw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Cw=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.referenceDatasetName=null,this.referenceFilterQueryParameter=null,this.createResultDataset=null,this.resultDatasetName=null,this.resultDatasourceName=null,this.minDistance=null,this.maxDistance=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.MinDistanceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.referenceDatasetName=null,t.dataset=null,t.referenceFilterQueryParameter=null,t.createResultDataset=null,t.resultDatasetName=null,t.resultDatasourceName=null,t.minDistance=null,t.maxDistance=null}}])&&Tw(e.prototype,r),n&&Tw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Aw(t){"@babel/helpers - typeof";return(Aw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Mw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Rw(){return(Rw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Dw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Lw(t,e){return(Lw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Nw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Dw(t);if(e){var o=Dw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Aw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Iw(t)}(this,r)}}function Iw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Dw(t){return(Dw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Fw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lw(t,e)}(i,Cw);var e,r,n,o=Nw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).dataset=null,e.inputFilterQueryParameter=null,t&&dt.extend(Iw(e),t),e.CLASS_NAME="SuperMap.DatasetMinDistanceAnalystParameters",e}return e=i,(r=[{key:"destroy",value:function(){Rw(Dw(i.prototype),"destroy",this).call(this);this.dataset=null,this.inputFilterQueryParameter=null}}])&&Mw(e.prototype,r),n&&Mw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Bw(t){"@babel/helpers - typeof";return(Bw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Gw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Uw(){return(Uw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=qw(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zw(t,e){return(zw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Vw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=qw(t);if(e){var o=qw(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Bw(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Jw(t)}(this,r)}}function Jw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function qw(t){return(qw=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Hw=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zw(t,e)}(i,Cw);var e,r,n,o=Vw(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).inputGeometries=null,t&&dt.extend(Jw(e),t),e.CLASS_NAME="SuperMap.GeometryMinDistanceAnalystParameters",e}return e=i,n=[{key:"toObject",value:function(t,e){for(var r in t)if("inputGeometries"===r&&t.inputGeometries){for(var n=[],o=0;o<t.inputGeometries.length;o++)n.push(pr.fromGeometry(t.inputGeometries[o]));e.inputGeometries=n}else e[r]=t[r]}}],(r=[{key:"destroy",value:function(){Uw(qw(i.prototype),"destroy",this).call(this);this.inputGeometries=null}}])&&Gw(e.prototype,r),n&&Gw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ww(t){"@babel/helpers - typeof";return(Ww="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yw(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Xw(){return(Xw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=$w(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Qw(t,e){return(Qw=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Zw(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=$w(t);if(e){var o=$w(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ww(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Kw(t)}(this,r)}}function Kw(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $w(t){return($w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var t_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qw(t,e)}(i,si);var e,r,n,o=Zw(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(Kw(r),e),r.CLASS_NAME="SuperMap.MinDistanceAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){Xw($w(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof Fw?(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/mindistance"),n=t):t instanceof Hw&&(r.url=dt.urlPathAppend(r.url,"geometry/mindistance"),Hw.toObject(t,n));var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&Yw(e.prototype,r),n&&Yw(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function e_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.cutFillType="GRID",this.afterCutFillDataset=null,this.resultDataset=null,this.buildPyramid=null,this.deleteExistResultDataset=null,this.bufferRadius=null,this.isRoundHead=null,this.line3D=null,this.region=null,this.region3D=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCutFillCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.cutFillType=null,t.afterCutFillDataset=null,t.resultDataset=null,t.buildPyramid=null,t.deleteExistResultDataset=null,t.bufferRadius=null,t.isRoundHead=null,t.line3D=null,t.region=null,t.region3D=null}}])&&e_(e.prototype,r),n&&e_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function n_(t){"@babel/helpers - typeof";return(n_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function i_(){return(i_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=l_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function a_(t,e){return(a_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function s_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=l_(t);if(e){var o=l_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===n_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function l_(t){return(l_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var u_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&a_(t,e)}(i,si);var e,r,n,o=s_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainCutFillCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){i_(l_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof r_&&(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/cutfill")),r_.toObject(t,n);var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&o_(e.prototype,r),n&&o_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function c_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainAspectCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null}}])&&c_(e.prototype,r),n&&c_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function h_(t){"@babel/helpers - typeof";return(h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function y_(){return(y_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=v_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function d_(t,e){return(d_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function b_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=v_(t);if(e){var o=v_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===h_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function v_(t){return(v_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var m_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&d_(t,e)}(i,si);var e,r,n,o=b_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainAspectCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){y_(v_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof f_&&(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/aspect")),f_.toObject(t,n);var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&p_(e.prototype,r),n&&p_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function g_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var w_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.terrainAnalystSetting=null,this.resultDatasetName=null,this.deleteExistResultDataset=null,this.zFactor=null,this.slopeType=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainSlopeCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.terrainAnalystSetting=null,t.resultDatasetName=null,t.deleteExistResultDataset=null,t.zFactor=null,t.slopeType=null}}])&&g_(e.prototype,r),n&&g_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function __(t){"@babel/helpers - typeof";return(__="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function O_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function S_(){return(S_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=E_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function x_(t,e){return(x_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function P_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=E_(t);if(e){var o=E_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===__(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function E_(t){return(E_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var k_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&x_(t,e)}(i,si);var e,r,n,o=P_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainSlopeCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){S_(E_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof w_&&(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/slope")),w_.toObject(t,n);var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&O_(e.prototype,r),n&&O_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function j_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var T_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.model=null,this.resultSetting=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ConvexHullAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.model=null,this.resultSetting=null}}])&&j_(e.prototype,r),n&&j_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function C_(t){"@babel/helpers - typeof";return(C_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function M_(){return(M_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=I_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function R_(t,e){return(R_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function L_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=I_(t);if(e){var o=I_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===C_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return N_(t)}(this,r)}}function N_(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function I_(t){return(I_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var D_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&R_(t,e)}(i,si);var e,r,n,o=L_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(N_(r),e),r.CLASS_NAME="SuperMap.ConvexHullAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){M_(I_(i.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r=this;r.url=dt.urlPathAppend(r.url,"geometry/3d/convexhull");var n=dt.toJSON(t);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:n,scope:r,success:e,failure:e})}}])&&A_(e.prototype,r),n&&A_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function F_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var B_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edgeID=null,this.nodeID=null,this.weightName=null,this.returnFeatures=!0,this.isUncertainDirectionValid=!0,this.traceType=null,this.withIndex=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TraceAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeID=null,t.nodeID=null,t.weightName=null,t.returnFeatures=null,t.isUncertainDirectionValid=null,t.type=null,t.withIndex=null}}])&&F_(e.prototype,r),n&&F_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function G_(t){"@babel/helpers - typeof";return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function U_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function z_(){return(z_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=q_(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function V_(t,e){return(V_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function J_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=q_(t);if(e){var o=q_(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===G_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function q_(t){return(q_=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var H_=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&V_(t,e)}(i,Pa);var e,r,n,o=J_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TraceAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){z_(q_(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof B_){var r,n=this;if(0===t.traceType)n.url=dt.urlPathAppend(n.url,"traceup");else{if(1!==t.traceType)return;n.url=dt.urlPathAppend(n.url,"tracedown")}if(r={weightName:t.weightName,isUncertainDirectionValid:t.isUncertainDirectionValid,returnFeatures:t.returnFeatures},!(null!==t.edgeID&&null!==t.nodeID||null===t.edgeID&&null===t.nodeID))return null!==t.edgeID?r.edgeID=t.edgeID:r.nodeID=t.nodeID,n.request({method:"GET",params:r,scope:n,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Hr;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&U_(e.prototype,r),n&&U_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function W_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Y_=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.connected=null,this.returnFeatures=!0,this.edgeIDs=null,this.nodeIDs=null,this.withIndex=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.ConnectedEdgesAnalystParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.edgeIDs=null,t.nodeIDs=null,t.connected=null,t.returnFeatures=null,t.withIndex=null}}])&&W_(e.prototype,r),n&&W_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function X_(t){"@babel/helpers - typeof";return(X_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Q_(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Z_(){return(Z_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function K_(t,e){return(K_=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $_(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=tO(t);if(e){var o=tO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===X_(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function tO(t){return(tO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&K_(t,e)}(i,Pa);var e,r,n,o=$_(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.ConnectedEdgesAnalystService",r}return e=i,(r=[{key:"destroy",value:function(){Z_(tO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Y_){var r;if(this.url=dt.urlPathAppend(this.url,"connectededges"),r={connected:t.connected,returnFeatures:t.returnFeatures},!(null!==t.edgeIDs&&null!==t.nodeIDs||null===t.edgeIDs&&null===t.nodeIDs))return null!==t.edgeIDs?r.edgeIDs=t.edgeIDs:r.nodeIDs=t.nodeIDs,this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}},{key:"toGeoJSONResult",value:function(t){if(!t)return null;var e=new Hr;return t.edgesFeatures&&(t.edgesFeatures=e.toGeoJSON(t.edgesFeatures)),t.nodesFeatures&&(t.nodesFeatures=e.toGeoJSON(t.nodesFeatures)),t}}])&&Q_(e.prototype,r),n&&Q_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=null,this.layers=null,this.transparent=null,this.mapScale=null,this.returnVisibleOnly=null,this.width=null,this.height=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.GetLayersLegendInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.bbox=null,t.layers=null,t.transparent=null,t.mapScale=null,t.returnVisibleOnly=null,t.width=null,t.height=null}}])&&rO(e.prototype,r),n&&rO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oO(t){"@babel/helpers - typeof";return(oO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aO(){return(aO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sO(t,e){return(sO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cO(t);if(e){var o=cO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uO(t)}(this,r)}}function uO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cO(t){return(cO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sO(t,e)}(i,xo);var e,r,n,o=lO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(uO(r),e),r.CLASS_NAME="SuperMap.GetLayersLegendInfoService",r}return e=i,(r=[{key:"destroy",value:function(){aO(cO(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t,e){return this.url=dt.urlPathAppend(this.url,"/legend"),this.request({method:"GET",params:t,scope:this,success:e,failure:e})}}])&&iO(e.prototype,r),n&&iO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pO=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.options=r||{},this.url=e}var e,r,n;return e=t,(r=[{key:"queryByBounds",value:function(t,e,r){var n=this;return new Dg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"queryByDistance",value:function(t,e,r){var n=this;return new Kg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryBySQL",value:function(t,e,r){var n=this;return new jw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"queryByGeometry",value:function(t,e,r){var n=this;return new pw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&hO(e.prototype,r),n&&hO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dO=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.point=null,t.tolerance&&(t.tolerance=null),t.isIgnoreGap&&(t.isIgnoreGap=!1)}}])&&yO(e.prototype,r),n&&yO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bO(t){"@babel/helpers - typeof";return(bO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mO(){return(mO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_O(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gO(t,e){return(gO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_O(t);if(e){var o=_O(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _O(t){return(_O=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var OO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gO(t,e)}(i,si);var e,r,n,o=wO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}return e=i,(r=[{key:"destroy",value:function(){mO(_O(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof dO){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){return this.url=dt.urlPathAppend(this.url,"geometry/calculatemeasure"),this.url=dt.urlAppend(this.url,"returnContent=true"),dt.toJSON(t)}}])&&vO(e.prototype,r),n&&vO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function SO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xO=function(){function t(e){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!e)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var r=e.sourceRoute,n={};if(r&&r instanceof nt&&r.components){n.type=r.type,n.parts=r.parts;for(var o=[],i=0,a=r.components.length;i<a;i++)o=o.concat(r.components[i].components);n.points=o,e.sourceRoute=n}dt.extend(this,e),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.sourceRoute=null,t.type=null,t.measure=null,t.offset=0,t.isIgnoreGap=!1,t.startMeasure=null,t.endMeasure=null,t.dataset=null,t.routeID=null,t.routeIDField=null}}])&&SO(e.prototype,r),n&&SO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function PO(t){"@babel/helpers - typeof";return(PO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function EO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kO(){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jO(t,e){return(jO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function TO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=CO(t);if(e){var o=CO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===PO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function CO(t){return(CO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jO(t,e)}(i,si);var e,r,n,o=TO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.RouteLocatorService",r}return e=i,(r=[{key:"destroy",value:function(){kO(CO(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof xO){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="geometry/routelocator";return t.dataset&&(e="datasets/"+t.dataset+"/linearreferencing/routelocator",t.sourceRoute=null),this.url=dt.urlPathAppend(this.url,e),this.url=dt.urlAppend(this.url,"returnContent=true"),dt.toJSON(t)}}])&&EO(e.prototype,r),n&&EO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function MO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var RO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fieldNames=null,this.fieldValues=null,this.geometry=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ServerFeature"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){var r=null;if(e)return(r=e.geometry)&&(r=pr.fromJson(r)),new t({fieldNames:e.fieldNames,fieldValues:e.fieldValues,geometry:r})}}],(r=[{key:"destroy",value:function(){var t=this;t.fieldNames=null,t.fieldValues=null,t.geometry&&(t.geometry.destroy(),t.geometry=null)}},{key:"toFeature",value:function(){var t,e,r,n,o={},i=this;for(var a in t=i.fieldNames,e=i.fieldValues,t)o[t[a]]=e[a];return i.geometry&&(r=i.geometry.toGeometry()),n=new Ar(r,o),i.geometry&&i.geometry.id&&(n.fid=i.geometry.id),n}}])&&MO(e.prototype,r),n&&MO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function LO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var NO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.SetDatasourceParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.description=null,this.coordUnit=null,this.distanceUnit=null}}])&&LO(e.prototype,r),n&&LO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function IO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var DO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&IO(e.prototype,r),n&&IO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function FO(t){"@babel/helpers - typeof";return(FO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GO(){return(GO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JO(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UO(t,e){return(UO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=JO(t);if(e){var o=JO(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===FO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return VO(t)}(this,r)}}function VO(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function JO(t){return(JO=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qO=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UO(t,e)}(i,xo);var e,r,n,o=zO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(VO(r),e),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}return e=i,(r=[{key:"destroy",value:function(){GO(JO(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r=dt.toJSON(t);return this.request({method:"PUT",data:r,scope:this,success:e,failure:e})}}}])&&BO(e.prototype,r),n&&BO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var WO=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&HO(e.prototype,r),n&&HO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function YO(t){"@babel/helpers - typeof";return(YO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function XO(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function QO(){return(QO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=tS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ZO(t,e){return(ZO=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function KO(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=tS(t);if(e){var o=tS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===YO(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return $O(t)}(this,r)}}function $O(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tS(t){return(tS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var eS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ZO(t,e)}(i,xo);var e,r,n,o=KO(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).resourceID=null,r.isTempLayers=!1,e&&dt.extend($O(r),e),r.CLASS_NAME="SuperMap.SetLayersInfoService",r}return e=i,(r=[{key:"destroy",value:function(){QO(tS(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t,e){if(t){var r,n=[],o=this,i="";o.isTempLayers?(o.url=dt.urlPathAppend(o.url,"tempLayersSet/"+o.resourceID),i="PUT"):(o.url=dt.urlPathAppend(o.url,"tempLayersSet"),i="POST"),t.subLayers||(t.subLayers={layers:[]}),t.subLayers.layers||(t.subLayers.layers=[]);var a=t.subLayers.layers,s=a.length;for(var l in a){if("GRID"===a[l].ugcLayerType){var u={},c=a[l].colorDictionarys;for(var f in c){u[c[f].elevation]=c[f].color}}a[l].colorDictionary=u,delete a[l].colorDictionarys}for(var h=0;h<s;h++)a[h].toJsonObject?n.push(a[h].toJsonObject()):n.push(a[h]);(r=dt.extend(r,t)).subLayers={layers:n},r.object=null;var p=dt.toJSON([r]);return o.request({method:i,data:p,scope:o,success:e,failure:e})}}}])&&XO(e.prototype,r),n&&XO(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function rS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,e&&dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var t="{";t+='"layers":[';for(var e=[],r=0,n=this.layerStatusList.length;r<n;r++)e.push(this.layerStatusList[r].toJSON());return t+=e,t+="]",t+="}"}}])&&rS(e.prototype,r),n&&rS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oS(t){"@babel/helpers - typeof";return(oS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aS(){return(aS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=cS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sS(t,e){return(sS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cS(t);if(e){var o=cS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uS(t)}(this,r)}}function uS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cS(t){return(cS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sS(t,e)}(i,xo);var e,r,n,o=lS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).lastparams=null,r.mapUrl=t,e&&dt.extend(uS(r),e),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}return e=i,(r=[{key:"destroy",value:function(){aS(cS(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof nS){var r=this;if(r.url=r.mapUrl,null==t.resourceID)return r.url=dt.urlPathAppend(r.url,"tempLayersSet"),r.lastparams=t,r.request({method:"POST",scope:r,success:r.createTempLayerComplete.bind(r,e),failure:e});r.url=dt.urlPathAppend(r.url,"tempLayersSet/"+t.resourceID),r.url=dt.urlAppend(r.url,"elementRemain=true&reference="+t.resourceID+"&holdTime="+t.holdTime.toString());var n="[{";return n+='"type":"UGC",',null!=t.layerStatusList&&t.layerStatusList.length>0&&(n+='"subLayers":'+t.toJSON()),n+=',"visible":true,',n+='"name":"'+this.getMapName(this.mapUrl)+'"',n+="}]",r.request({method:"PUT",data:n,scope:r,success:e,failure:e})}}},{key:"createTempLayerComplete",value:function(t,e){return e.result=dt.transformResult(e.result),e.result.succeed&&(this.lastparams.resourceID=e.result.newResourceID),this.processAsync(this.lastparams,t)}},{key:"getMapName",value:function(t){var e=t;"/"===e.charAt(e.length-1)&&(e=e.substr(0,e.length-1));var r=e.lastIndexOf("/");return e.substring(r+1,e.length)}},{key:"transformResult",value:function(t,e){return null!=(t=dt.transformResult(t))&&null!=this.lastparams&&null!=this.lastparams.resourceID&&(t.newResourceID=this.lastparams.resourceID),{result:t,options:e}}}])&&iS(e.prototype,r),n&&iS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function hS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var pS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=l.CONTAIN,this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&hS(e.prototype,r),n&&hS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function yS(t){"@babel/helpers - typeof";return(yS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bS(){return(bS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=gS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vS(t,e){return(vS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gS(t);if(e){var o=gS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function gS(t){return(gS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vS(t,e)}(i,ua);var e,r,n,o=mS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/query"),r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}return e=i,(r=[{key:"destroy",value:function(){bS(gS(i.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(t){return bS(gS(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getQueryJob",value:function(t,e){return bS(gS(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addQueryJob",value:function(t,e,r,n){return bS(gS(i.prototype),"addJob",this).call(this,this.url,t,pS,e,r,n)}}])&&dS(e.prototype,r),n&&dS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _S(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.keyWord=null,this.returnPosition=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.StopQueryParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){dt.reset(this)}}])&&_S(e.prototype,r),n&&_S(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SS(t){"@babel/helpers - typeof";return(SS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PS(){return(PS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=TS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function ES(t,e){return(ES=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=TS(t);if(e){var o=TS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return jS(t)}(this,r)}}function jS(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function TS(t){return(TS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ES(t,e)}(i,xo);var e,r,n,o=kS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e=e||{},dt.extend(jS(r),e),r.CLASS_NAME="SuperMap.StopQueryService",r}return e=i,(r=[{key:"destroy",value:function(){PS(TS(i.prototype),"destroy",this).call(this),dt.reset(this)}},{key:"processAsync",value:function(t,e){if(t instanceof OS){return this.url=dt.urlPathAppend(this.url,"stops/keyword/"+t.keyWord),this.request({method:"GET",params:{returnPosition:t.returnPosition},scope:this,success:e,failure:e})}}}])&&xS(e.prototype,r),n&&xS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function AS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var MS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&AS(e.prototype,r),n&&AS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function RS(t){"@babel/helpers - typeof";return(RS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NS(){return(NS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=FS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function IS(t,e){return(IS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function DS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=FS(t);if(e){var o=FS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function FS(t){return(FS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var BS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&IS(t,e)}(i,ua);var e,r,n,o=DS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/summaryattributes"),r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}return e=i,(r=[{key:"destroy",value:function(){NS(FS(i.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(t){return NS(FS(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryAttributesJob",value:function(t,e){return NS(FS(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){return NS(FS(i.prototype),"addJob",this).call(this,this.url,t,MS,e,r,n)}}])&&LS(e.prototype,r),n&&LS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function GS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var US=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=F.AVERAGE,this.fields="",this.type=B.SUMMARYMESH,this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r?"output"!==r?("SUMMARYMESH"===t.type&&"regionDataset"!==r||"SUMMARYREGION"===t.type&&!n(["meshType","resolution","query"],r))&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r]);function n(t,e){for(var r=t.length;r--;)if(t[r]===e)return!0;return!1}}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&GS(e.prototype,r),n&&GS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zS(t){"@babel/helpers - typeof";return(zS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JS(){return(JS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WS(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qS(t,e){return(qS=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HS(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=WS(t);if(e){var o=WS(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function WS(t){return(WS=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YS=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qS(t,e)}(i,ua);var e,r,n,o=HS(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/aggregatepoints"),r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}return e=i,(r=[{key:"destroy",value:function(){JS(WS(i.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(t){return JS(WS(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryMeshJob",value:function(t,e){return JS(WS(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){return JS(WS(i.prototype),"addJob",this).call(this,this.url,t,US,e,r,n)}}])&&VS(e.prototype,r),n&&VS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var QS=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=D.METER,this.type=B.SUMMARYMESH,this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"type"!==r&&"type"!==r?"output"!==r?("SUMMARYREGION"===t.type||"SUMMARYMESH"===t.type&&"regionDataset"!==r)&&(e.analyst=e.analyst||{},"query"===r&&t[r]?e.analyst[r]=t[r].toBBOX():e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):e.type=t[r]:(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&XS(e.prototype,r),n&&XS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ZS(t){"@babel/helpers - typeof";return(ZS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KS(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $S(){return($S="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tx(t,e){return(tx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ex(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rx(t);if(e){var o=rx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ZS(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rx(t){return(rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tx(t,e)}(i,ua);var e,r,n,o=ex(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/summaryregion"),r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}return e=i,(r=[{key:"destroy",value:function(){$S(rx(i.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(t){return $S(rx(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getSummaryRegionJob",value:function(t,e){return $S(rx(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){return $S(rx(i.prototype),"addJob",this).call(this,this.url,t,QS,e,r,n)}}])&&KS(e.prototype,r),n&&KS(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ox(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ix=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.SupplyCenter"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({maxWeight:e.maxWeight,nodeID:e.nodeID,resourceValue:e.resourceValue,type:e.type})}}],(r=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&ox(e.prototype,r),n&&ox(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ax(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var sx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bounds=null,this.boundsType=J.MAX,this.cellSize=null,this.cellSizeType=q.UNION,dt.extend(this,e),this.CLASS_NAME="SuperMap.terrainAnalystSetting"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.bounds=null,this.boundsType=null,this.cellSize=null,this.cellSizeType=null}}])&&ax(e.prototype,r),n&&ax(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lx(t){"@babel/helpers - typeof";return(lx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ux(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cx(){return(cx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=px(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fx(t,e){return(fx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=px(t);if(e){var o=px(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function px(t){return(px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fx(t,e)}(a,si);var e,r,n,i=hx(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).CLASS_NAME="SuperMap.SurfaceAnalystService",r}return e=a,(r=[{key:"destroy",value:function(){cx(px(a.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Bs){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e="",r={};if(t instanceof Ws)this.url=dt.urlPathAppend(this.url,"datasets/"+t.dataset+"/"+t.surfaceAnalystMethod.toLowerCase()),Ws.toObject(t,r),e=dt.toJSON(r);else{if(!(t instanceof eh))return;this.url=dt.urlPathAppend(this.url,"geometry/"+t.surfaceAnalystMethod.toLowerCase()),e=dt.toJSON(t)}return this.returnContent=!0,e}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&ux(e.prototype,r),n&&ux(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function dx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,dt.extend(this,e),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"dataset"!==r&&(e[r]=t[r])}}],(r=[{key:"destroy",value:function(){var t=this;t.dataset=null,t.zFactor=1,t.averageCurvatureName=null,t.profileCurvatureName=null,t.planCurvatureName=null,t.deleteExistResultDataset=!0}}])&&dx(e.prototype,r),n&&dx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vx(t){"@babel/helpers - typeof";return(vx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gx(){return(gx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ox(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wx(t,e){return(wx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _x(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ox(t);if(e){var o=Ox(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function Ox(t){return(Ox=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Sx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wx(t,e)}(i,si);var e,r,n,o=_x(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}return e=i,(r=[{key:"destroy",value:function(){gx(Ox(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){var r=this,n={};t instanceof bx&&(r.url=dt.urlPathAppend(r.url,"datasets/"+t.dataset+"/terraincalculation/curvature")),bx.toObject(t,n);var o=dt.toJSON(n);return r.url=dt.urlAppend(r.url,"returnContent=true"),r.request({method:"POST",data:o,scope:r,success:e,failure:e})}}])&&mx(e.prototype,r),n&&mx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Px=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new Ze,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeFlow"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.leaderLineStyle=Ze.fromJson(e.leaderLineStyle),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.flowEnabled=null,t.leaderLineDisplayed=null,t.leaderLineStyle&&(t.leaderLineStyle.destroy(),t.leaderLineStyle=null)}}])&&xx(e.prototype,r),n&&xx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ex(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new Xe,this.end=0,this.start=0,this.visible=!0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r.color=Xe.fromJson(e.color),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.end=null,t.start=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&Ex(e.prototype,r),n&&Ex(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jx(t){"@babel/helpers - typeof";return(jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Tx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Cx(){return(Cx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Lx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ax(t,e){return(Ax=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Mx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Lx(t);if(e){var o=Lx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Rx(t)}(this,r)}}function Rx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lx(t){return(Lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Nx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ax(t,e)}(i,Cy);var e,r,n,o=Mx(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRIDRANGE",t)).items=null,e.rangeMode=b.EQUALINTERVAL,e.rangeParameter=0,e.colorGradientType=v.YELLOW_RED,e.reverseColor=!1,t&&dt.extend(Rx(e),t),e.CLASS_NAME="SuperMap.ThemeGridRange",e}return e=i,n=[{key:"fromObj",value:function(t){if(t){var e=new i;dt.copy(e,t);var r=t.items,n=r?r.length:0;e.items=[];for(var o=0;o<n;o++)e.items.push(kx.fromObj(r[o]));return e}}}],(r=[{key:"destroy",value:function(){Cx(Lx(i.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.reverseColor=null,t.rangeMode=null,t.rangeParameter=null,t.colorGradientType=null}}])&&Tx(e.prototype,r),n&&Tx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ix(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Dx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.color=new Xe,this.unique=null,this.visible=!0,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){var r=new t;return dt.copy(r,e),r.color=Xe.fromJson(e.color),r}}],(r=[{key:"destroy",value:function(){var t=this;t.caption=null,t.unique=null,t.color&&(t.color.destroy(),t.color=null),t.visible=null}},{key:"toServerJSONObject",value:function(){var t={};return(t=dt.copyAttributes(t,this)).color&&t.color.toServerJSONObject&&(t.color=t.color.toServerJSONObject()),t}}])&&Ix(e.prototype,r),n&&Ix(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fx(t){"@babel/helpers - typeof";return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Gx(){return(Gx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Jx(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Ux(t,e){return(Ux=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zx(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Jx(t);if(e){var o=Jx(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Fx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Vx(t)}(this,r)}}function Vx(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jx(t){return(Jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qx=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ux(t,e)}(i,Cy);var e,r,n,o=zx(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,"GRIDUNIQUE",t)).defaultcolor=new Xe,e.items=null,t&&dt.extend(Vx(e),t),e.CLASS_NAME="SuperMap.ThemeGridUnique",e}return e=i,n=[{key:"fromObj",value:function(t){var e=new i,r=t.items,n=r?r.length:0;dt.extend(e,t),e.items=[],e.defaultcolor=Xe.fromJson(t.defaultcolor);for(var o=0;o<n;o++)e.items.push(Dx.fromObj(r[o]));return e}}],(r=[{key:"destroy",value:function(){Gx(Jx(i.prototype),"destroy",this).call(this);var t=this;if(t.items){if(t.items.length>0)for(var e in t.items)t.items[e].destroy(),t.items[e]=null;t.items=null}t.defaultcolor&&(t.defaultcolor.destroy(),t.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var t={};if((t=dt.copyAttributes(t,this)).defaultcolor&&t.defaultcolor.toServerJSONObject&&(t.defaultcolor=t.defaultcolor.toServerJSONObject()),t.items){for(var e=[],r=t.items.length,n=0;n<r;n++)e.push(t.items[n].toServerJSONObject());t.items=e}return t}}])&&Bx(e.prototype,r),n&&Bx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Hx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Wx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new My,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var e,r,n;return e=t,n=[{key:"fromObj",value:function(e){if(e){var r=new t;return dt.copy(r,e),r}}}],(r=[{key:"destroy",value:function(){var t=this;t.unique=null,t.caption=null,t.offsetX=null,t.offsetY=null,t.style&&(t.style.destroy(),t.style=null),t.visible=null}}])&&Hx(e.prototype,r),n&&Hx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Yx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Xx=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.srcData=e,this.targetData=r,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var t="",e=Math.min(this.srcData.length,this.targetData.length),r=0;r<e;r++)t+="'"+this.srcData[r]+"':'"+this.targetData[r]+"',";return r>0&&(t=t.substring(0,t.length-1)),"{"+t+"}"}return null}}])&&Yx(e.prototype,r),n&&Yx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qx(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zx=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.ThemeParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;if(t.datasetNames=null,t.dataSourceNames=null,t.joinItems){for(var e=0,r=t.joinItems,n=r.length;e<n;e++)r[e].destroy();t.joinItems=null}if(t.themes){for(var o=0,i=t.themes,a=i.length;o<a;o++)i[o].destroy();t.themes=null}}}])&&Qx(e.prototype,r),n&&Qx(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kx(t){"@babel/helpers - typeof";return(Kx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $x(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tP(){return(tP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eP(t,e){return(eP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=oP(t);if(e){var o=oP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Kx(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return nP(t)}(this,r)}}function nP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function oP(t){return(oP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eP(t,e)}(i,xo);var e,r,n,o=rP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(nP(r),e),r.url=dt.urlPathAppend(r.url,"tempLayersSet"),r.CLASS_NAME="SuperMap.ThemeService",r}return e=i,(r=[{key:"destroy",value:function(){tP(oP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof Zx){var r;return r=this.getJsonParameters(t),this.request({method:"POST",data:r,scope:this,success:e,failure:e})}}},{key:"getJsonParameters",value:function(t){var e,r="",n=null,o=null,i=null;r+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<t.themes.length;a++){n=t.themes[a];var s=dt.toJSON(n);if(r+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(o=t.displayFilters)&&o.length>0&&(1===o.length?r+="'displayFilter':\""+o[0]+'",':r+="'displayFilter':\""+o[a]+'",'),(i=t.displayOrderBy)&&i.length>0&&(1===i.length?r+="'displayOrderBy':'"+i[0]+"',":r+="'displayOrderBy':'"+i[a]+"',"),(e=t.fieldValuesDisplayFilter)&&(r+="'fieldValuesDisplayFilter':"+dt.toJSON(e)+","),t.joinItems&&t.joinItems.length>0&&t.joinItems[a]&&(r+="'joinItems':["+dt.toJSON(t.joinItems[a])+"],"),t.datasetNames&&t.dataSourceNames){var l=t.datasetNames[a]?a:t.datasetNames.length-1,u=t.dataSourceNames[a]?a:t.dataSourceNames.length-1;r+="'datasetInfo': {'name': '"+t.datasetNames[l]+"','dataSourceName': '"+t.dataSourceNames[u]+"'}},"}else r+="},"}t.themes&&t.themes.length>0&&(r=r.substring(0,r.length-1)),r+="]},";var c=this.url.split("/");return r+="'name': '"+c[c.length-2]+"'}]"}}])&&$x(e.prototype,r),n&&$x(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function aP(t){"@babel/helpers - typeof";return(aP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lP(){return(lP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=hP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uP(t,e){return(uP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=hP(t);if(e){var o=hP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===aP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return fP(t)}(this,r)}}function fP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function hP(t){return(hP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var pP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uP(t,e)}(a,si);var e,r,n,i=cP(a);function a(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r=i.call(this,t,e)).mode=null,e&&dt.extend(fP(r),e),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}return e=a,(r=[{key:"destroy",value:function(){lP(hP(a.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(t,e){var r={},n=this;t instanceof nl?(n.mode="datasets",n.url=dt.urlPathAppend(n.url,"datasets/"+t.dataset+"/thiessenpolygon"),nl.toObject(t,r)):t instanceof uh&&(n.mode="geometry",n.url=dt.urlPathAppend(n.url,"geometry/thiessenpolygon"),uh.toObject(t,r));var o=dt.toJSON(r);return this.returnContent=!0,n.request({method:"POST",data:o,scope:n,success:e,failure:e})}},{key:"dataFormat",value:function(){return[o.GEOJSON,o.ISERVER,o.FGB]}}])&&sP(e.prototype,r),n&&sP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),a}();function yP(t){"@babel/helpers - typeof";return(yP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function bP(){return(bP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=wP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function vP(t,e){return(vP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wP(t);if(e){var o=wP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===yP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return gP(t)}(this,r)}}function gP(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wP(t){return(wP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _P=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vP(t,e)}(i,si);var e,r,n,o=mP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(gP(r),e),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}return e=i,(r=[{key:"processAsync",value:function(t,e){var r=this;r.url=dt.urlPathAppend(r.url,"geometry/batchanalyst"),r.url=dt.urlAppend(r.url,"returnContent=true&ignoreAnalystParam=true");var n=r._processParams(t),o=dt.toJSON(n);return r.request({method:"POST",data:o,scope:r,success:e,failure:e})}},{key:"_processParams",value:function(t){var e=this;if(dt.isArray(t)){var r=[];return t.map(function(t){return r.push(e._toJSON(t)),t}),r}}},{key:"_toJSON",value:function(t){var e={};if("buffer"===t.analystName)e.analystName="buffer",e.param={},Gi.toObject(t.param,e.param);else if("overlay"===t.analystName)e.analystName="overlay",e.param={},Wf.toObject(t.param,e.param);else if("interpolationDensity"===t.analystName)e.analystName="interpolationDensity",e.param={},$b.toObject(t.param,e.param);else if("interpolationidw"===t.analystName)e.analystName="interpolationidw",e.param={},$b.toObject(t.param,e.param);else if("interpolationRBF"===t.analystName)e.analystName="interpolationRBF",e.param={},$b.toObject(t.param,e.param);else if("interpolationKriging"===t.analystName)e.analystName="interpolationKriging",e.param={},$b.toObject(t.param,e.param);else{if("thiessenpolygon"!==t.analystName)return t;e.analystName="thiessenpolygon",e.param={},uh.toObject(t.param,e.param)}return e}},{key:"destroy",value:function(){bP(wP(i.prototype),"destroy",this).call(this)}}])&&dP(e.prototype,r),n&&dP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function OP(t){"@babel/helpers - typeof";return(OP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xP(){return(xP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=kP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function PP(t,e){return(PP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function EP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=kP(t);if(e){var o=kP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===OP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function kP(t){return(kP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var jP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&PP(t,e)}(i,xo);var e,r,n,o=EP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TilesetsService",r}return e=i,(r=[{key:"destroy",value:function(){xP(kP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t){if(this.url){return this.url=dt.urlPathAppend(this.url,"tilesets"),this.request({method:"GET",scope:this,success:t,failure:t})}}}])&&SP(e.prototype,r),n&&SP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function TP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var CP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=G.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&TP(e.prototype,r),n&&TP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function AP(t){"@babel/helpers - typeof";return(AP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RP(){return(RP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LP(t,e){return(LP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function NP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IP(t);if(e){var o=IP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===AP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function IP(t){return(IP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LP(t,e)}(i,ua);var e,r,n,o=NP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/topologyvalidator"),r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}return e=i,(r=[{key:"destroy",value:function(){RP(IP(i.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(t){return RP(IP(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getTopologyValidatorJob",value:function(t,e){return RP(IP(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){return RP(IP(i.prototype),"addJob",this).call(this,this.url,t,CP,e,r,n)}}])&&MP(e.prototype,r),n&&MP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var BP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TransferLine"}var e,r,n;return e=t,n=[{key:"fromJson",value:function(e){if(e)return new t({lineID:e.lineID,lineName:e.lineName,lineAliasName:e.lineAliasName,startStopIndex:e.startStopIndex,startStopName:e.startStopName,startStopAliasName:e.startStopAliasName,endStopIndex:e.endStopIndex,endStopName:e.endStopName,endStopAliasName:e.endStopAliasName})}}],(r=[{key:"destroy",value:function(){dt.reset(this)}}])&&FP(e.prototype,r),n&&FP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function GP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var UP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.transferLines=null,this.points=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TransferPathParameters"}var e,r,n;return e=t,n=[{key:"toJson",value:function(t){if(t)return dt.toJSON(t)}}],(r=[{key:"destroy",value:function(){dt.reset(this)}}])&&GP(e.prototype,r),n&&GP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zP(t){"@babel/helpers - typeof";return(zP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function VP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function JP(){return(JP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=WP(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function qP(t,e){return(qP=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function HP(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=WP(t);if(e){var o=WP(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===zP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function WP(t){return(WP=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var YP=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qP(t,e)}(i,xo);var e,r,n,o=HP(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TransferPathService",r}return e=i,(r=[{key:"destroy",value:function(){JP(WP(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof UP){var r;return this.url=dt.urlPathAppend(this.url,"path"),r={points:dt.toJSON(t.points),transferLines:dt.toJSON(t.transferLines)},this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&VP(e.prototype,r),n&&VP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function XP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var QP=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.solutionCount=6,this.transferPreference=C.NONE,this.transferTactic=T.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var e,r,n;return e=t,n=[{key:"toJson",value:function(t){if(t)return dt.toJSON(t)}}],(r=[{key:"destroy",value:function(){dt.reset(this)}}])&&XP(e.prototype,r),n&&XP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ZP(t){"@babel/helpers - typeof";return(ZP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KP(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $P(){return($P="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tE(t,e){return(tE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rE(t);if(e){var o=rE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ZP(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rE(t){return(rE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tE(t,e)}(i,xo);var e,r,n,o=eE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.TransferSolutionService",r}return e=i,(r=[{key:"destroy",value:function(){$P(rE(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof QP){var r;return this.url=dt.urlPathAppend(this.url,"solutions"),r={points:dt.toJSON(t.points),walkingRatio:t.walkingRatio,transferTactic:t.transferTactic,solutionCount:t.solutionCount,transferPreference:t.transferPreference},t.evadeLines&&(r.evadeLines=dt.toJSON(t.evadeLines)),t.evadeStops&&(r.evadeStops=dt.toJSON(t.evadeStops)),t.priorLines&&(r.priorLines=dt.toJSON(t.priorLines)),t.priorStops&&(r.priorStops=dt.toJSON(t.priorStops)),t.travelTime&&(r.travelTime=t.travelTime),this.request({method:"GET",params:r,scope:this,success:e,failure:e})}}}])&&KP(e.prototype,r),n&&KP(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var iE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",dt.extend(this,e),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&oE(e.prototype,r),n&&oE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function aE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var sE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.datasetType=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.CreateDatasetParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.datasourceName=null,this.datasetName=null,this.datasetType=null}}])&&aE(e.prototype,r),n&&aE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lE(t){"@babel/helpers - typeof";return(lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function cE(){return(cE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=pE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function fE(t,e){return(fE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=pE(t);if(e){var o=pE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===lE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pE(t){return(pE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fE(t,e)}(i,Pa);var e,r,n,o=hE(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}return e=i,(r=[{key:"destroy",value:function(){cE(pE(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof iE){var r=this,n=r.parse(t);r.url=dt.urlPathAppend(r.url,n);var o=t.edgeWeight?t.edgeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"edgeWeight"!==t[r])switch(r){case"edgeId":e+="/edgeweight/"+t[r];break;case"fromNodeId":e+="/fromnode/"+t[r];break;case"toNodeId":e+="/tonode/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&uE(e.prototype,r),n&&uE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",dt.extend(this,e),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&dE(e.prototype,r),n&&dE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vE(t){"@babel/helpers - typeof";return(vE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gE(){return(gE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wE(t,e){return(wE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _E(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=OE(t);if(e){var o=OE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function OE(t){return(OE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var SE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wE(t,e)}(i,Pa);var e,r,n,o=_E(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}return e=i,(r=[{key:"destroy",value:function(){gE(OE(i.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(t,e){if(t instanceof bE){var r=this,n=r.parse(t);r.url=dt.urlPathAppend(r.url,n);var o=t.turnNodeWeight?t.turnNodeWeight:null;return r.request({method:"PUT",scope:r,data:o,success:e,failure:e})}}},{key:"parse",value:function(t){if(t){var e="";for(var r in t)if(""!==t[r]&&"turnNodeWeight"!==t[r])switch(r){case"nodeId":e+="/turnnodeweight/"+t[r];break;case"fromEdgeId":e+="/fromedge/"+t[r];break;case"toEdgeId":e+="/toedge/"+t[r];break;case"weightField":e+="/weightfield/"+t[r]}return e}}}])&&mE(e.prototype,r),n&&mE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var PE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.datasourceName=null,this.datasetName=null,this.isFileCache=null,this.description=null,this.prjCoordSys=null,this.charset=null,this.palette=null,this.noValue=null,e&&dt.extend(this,e),this.CLASS_NAME="SuperMap.UpdateDatasetParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){var t=this;t.datasourceName=null,t.datasetName=null,t.isFileCache=null,t.prjCoordSys=null,t.charset=null,t.palette=null,t.noValue=null}}])&&xE(e.prototype,r),n&&xE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function EE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=N.CLIP,this.output=null,this.mappingParameters=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var e,r,n;return e=t,n=[{key:"toObject",value:function(t,e){for(var r in t)"datasetName"!==r?"output"!==r?(e.analyst=e.analyst||{},e.analyst[r]=t[r],"mappingParameters"===r&&(e.analyst[r]=e.analyst[r]||{},e.analyst.mappingParameters=t[r])):(e.output=e.output||{},e.output=t[r]):(e.input=e.input||{},e.input[r]=t[r])}}],(r=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof Ki&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof ta&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&EE(e.prototype,r),n&&EE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jE(t){"@babel/helpers - typeof";return(jE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function TE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function CE(){return(CE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function AE(t,e){return(AE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function ME(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=RE(t);if(e){var o=RE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===jE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function RE(t){return(RE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AE(t,e)}(i,ua);var e,r,n,o=ME(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).url=dt.urlPathAppend(r.url,"spatialanalyst/vectorclip"),r.CLASS_NAME="SuperMap.VectorClipJobsService",r}return e=i,(r=[{key:"destroy",value:function(){CE(RE(i.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(t){return CE(RE(i.prototype),"getJobs",this).call(this,this.url,t)}},{key:"getVectorClipJob",value:function(t,e){return CE(RE(i.prototype),"getJobs",this).call(this,dt.urlPathAppend(this.url,t),e)}},{key:"addVectorClipJob",value:function(t,e,r,n){return CE(RE(i.prototype),"addJob",this).call(this,this.url,t,kE,e,r,n)}}])&&TE(e.prototype,r),n&&TE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function NE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var IE=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.type=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.type=null}}])&&NE(e.prototype,r),n&&NE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function DE(t){"@babel/helpers - typeof";return(DE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function BE(){return(BE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function GE(t,e){return(GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function UE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=VE(t);if(e){var o=VE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===DE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return zE(t)}(this,r)}}function zE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function VE(t){return(VE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GE(t,e)}(i,IE);var e,r,n,o=UE(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).redIndex=0,e.nirIndex=1,e.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",e.type=V.NDVI,dt.extend(zE(e),t),e.CLASS_NAME="SuperMap.NDVIParameter",e}return e=i,(r=[{key:"destroy",value:function(){BE(VE(i.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&FE(e.prototype,r),n&&FE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qE(t){"@babel/helpers - typeof";return(qE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HE(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WE(){return(WE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZE(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function YE(t,e){return(YE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XE(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ZE(t);if(e){var o=ZE(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qE(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return QE(t)}(this,r)}}function QE(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZE(t){return(ZE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var KE=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YE(t,e)}(i,IE);var e,r,n,o=XE(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).altitude=45,e.azimuth=315,e.zFactor=1,e.type=V.HILLSHADE,dt.extend(QE(e),t),e.CLASS_NAME="SuperMap.HillshadeParameter",e}return e=i,(r=[{key:"destroy",value:function(){WE(ZE(i.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&HE(e.prototype,r),n&&HE(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $E(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobCustomItems",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.name=null,this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={name:this.name};return this.title&&(t.title=this.title),this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),dt.toJSON(t)}}])&&$E(e.prototype,r),n&&$E(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ek(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobImage",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl&&(t.picAsUrl=this.picAsUrl),this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),dt.toJSON(t)}}])&&ek(e.prototype,r),n&&ek(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ok=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.layerType=null,this.url=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayers",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.name=null,this.layerType=null,this.url=null}}])&&nk(e.prototype,r),n&&nk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function ik(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ak=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers=null,this.customItems=null,this.CLASS_NAME="SuperMap.WebPrintingJobLegendOptions",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.title=null,this.picAsUrl=null,this.picAsBase64=null,this.layers instanceof ok&&(this.layers.destroy(),this.layers=null),this.customItems instanceof tk&&(this.customItems.destroy(),this.customItems=null)}},{key:"toJSON",value:function(){var t={title:this.title||""};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64?t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,""):this.customItems&&(t.customItems=this.customItems),dt.toJSON(t)}}])&&ik(e.prototype,r),n&&ik(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=null,this.scale=null,this.layerNames=null,this.image=null,this.layers=null,this.CLASS_NAME="SuperMap.WebPrintingJobLittleMapOptions",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.center=null,this.scale=null,this.layerNames=null,this.image instanceof rk&&(this.image.destroy(),this.image=null),this.layers instanceof ok&&(this.layers.destroy(),this.layers=null)}},{key:"toJSON",value:function(){var t={scale:this.scale,center:this.center};return this.layerNames?t.layerNames=this.layerNames:this.layers&&(t.layers=this.layers),this.image&&(t.image=this.image),dt.toJSON(t)}}])&&sk(e.prototype,r),n&&sk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ck=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.picAsUrl=null,this.picAsBase64=null,this.CLASS_NAME="SuperMap.WebPrintingJobNorthArrowOptions",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.picAsUrl=null,this.picAsBase64=null}},{key:"toJSON",value:function(){var t={};return this.picAsUrl?t.picAsUrl=this.picAsUrl:this.picAsBase64&&(t.picAsBase64=this.picAsBase64.replace(/^data:.+;base64,/,"")),dt.toJSON(t)}}])&&uk(e.prototype,r),n&&uk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var hk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null,this.CLASS_NAME="SuperMap.WebPrintingJobScaleBarOptions",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.scaleText=null,this.orientation=null,this.type=null,this.intervals=null,this.unit=null}},{key:"toJSON",value:function(){var t={scaleText:this.scaleText||"",type:this.type||"BAR",intervals:this.intervals||"",unit:this.unit||"METER"};return this.orientation&&(t.orientation=this.orientation),dt.toJSON(t)}}])&&fk(e.prototype,r),n&&fk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function pk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=null,this.url=null,this.token=null,this.value=null,this.CLASS_NAME="SuperMap.WebPrintingJobContent",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.type="WEBMAP",this.url=null,this.token=null,this.value=null}},{key:"toJSON",value:function(){var t={type:this.type};return this.token&&(t.token=this.token),this.url?t.url=this.url:this.value&&(t.value=this.value),dt.toJSON(t)}}])&&pk(e.prototype,r),n&&pk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions=null,this.northArrowOptions=null,this.littleMapOptions=null,this.legendOptions=null,this.CLASS_NAME="SuperMap.WebPrintingJobLayoutOptions",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.templateName=null,this.title=null,this.subTitle=null,this.author=null,this.copyright=null,this.scaleBarOptions instanceof hk&&(this.scaleBarOptions.destroy(),this.scaleBarOptions=null),this.northArrowOptions instanceof ck&&(this.northArrowOptions.destroy(),this.northArrowOptions=null),this.littleMapOptions instanceof lk&&(this.littleMapOptions.destroy(),this.littleMapOptions=null),this.legendOptions instanceof ak&&(this.legendOptions.destroy(),this.legendOptions=null)}},{key:"toJSON",value:function(){var t={templateName:this.templateName,title:this.title,subTitle:this.subTitle,author:this.author,copyright:this.copyright};return this.scaleBarOptions&&(t.scaleBarOptions=this.scaleBarOptions),this.northArrowOptions&&(t.northArrowOptions=this.northArrowOptions),this.littleMapOptions&&(t.littleMapOptions=this.littleMapOptions),this.legendOptions&&(t.legendOptions=this.legendOptions),dt.toJSON(t)}}])&&dk(e.prototype,r),n&&dk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var mk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.format=null,this.dpi=96,this.scale=null,this.rotation=null,this.center=null,this.CLASS_NAME="SuperMap.WebPrintingJobExportOptions",dt.extend(this,e)}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.format=null,this.dpi=null,this.scale=null,this.rotation=null,this.center=null,this.outputSize=null}},{key:"toJSON",value:function(){var t={format:this.format||"PDF",dpi:this.dpi,scale:this.scale,center:this.center};return this.rotation&&(t.rotation=this.rotation),this.outputSize&&(t.outputSize=this.outputSize),dt.toJSON(t)}}])&&vk(e.prototype,r),n&&vk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function gk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var wk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&(this.content=null,this.layoutOptions=null,this.exportOptions=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.WebPrintingJobParameters")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.content instanceof yk&&(this.content.destroy(),this.content=null),this.layoutOptions instanceof bk&&(this.layoutOptions.destroy(),this.layoutOptions=null),this.exportOptions instanceof mk&&(this.exportOptions.destroy(),this.exportOptions=null)}}])&&gk(e.prototype,r),n&&gk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function _k(t){"@babel/helpers - typeof";return(_k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ok(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Sk(){return(Sk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function xk(t,e){return(xk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Pk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jk(t);if(e){var o=jk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return Ek(this,r)}}function Ek(t,e){if(e&&("object"===_k(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return kk(t)}function kk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function jk(t){return(jk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Tk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xk(t,e)}(i,xo);var e,r,n,o=Pk(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t,e),e&&dt.extend(kk(r),e),r.CLASS_NAME="SuperMap.WebPrintingService",r.url?r:Ek(r)}return e=i,(r=[{key:"destroy",value:function(){Sk(jk(i.prototype),"destroy",this).call(this)}},{key:"createWebPrintingJob",value:function(t,e){if(t)return t.layoutOptions&&t.layoutOptions.legendOptions&&(!t.layoutOptions.legendOptions.title&&(t.layoutOptions.legendOptions.title=""),t.layoutOptions.legendOptions.picAsBase64=t.layoutOptions.legendOptions.picAsBase64&&t.layoutOptions.legendOptions.picAsBase64.replace(/^data:.+;base64,/,""),t.layoutOptions.legendOptions.customItems&&t.layoutOptions.legendOptions.customItems.hasOwnProperty("picAsBase64")&&(t.layoutOptions.legendOptions.customItems.picAsBase64=t.layoutOptions.legendOptions.customItems.picAsBase64.replace(/^data:.+;base64,/,""))),this.processAsync("jobs","POST",e,t)}},{key:"getPrintingJob",value:function(t,e){var r=this;r.processAsync("jobs/".concat(t),"GET",function(n){r.rollingProcess(n,r._processUrl("jobs/".concat(t)),e)})}},{key:"getPrintingJobResult",value:function(t,e){return this.processAsync("jobs/".concat(t,"/result"),"GET",e)}},{key:"getLayoutTemplates",value:function(t){return this.processAsync("layouts","GET",t)}},{key:"rollingProcess",value:function(t,e,r){var n=this;t&&(this.id&&clearInterval(this.id),this.id=setInterval(function(){n.request({url:e,method:"GET",scope:n,success:r,failure:r})},1e3))}},{key:"processAsync",value:function(t,e,r,n){var o={url:this._processUrl(t),method:e,scope:this,success:r,failure:r};return n&&(o.data=dt.toJSON(n)),this.request(o)}},{key:"transformResult",value:function(t,e){return"FINISHED"!==(t=dt.transformResult(t)).status&&"ERROR"!==t.status||clearInterval(this.id),{result:t,options:e}}},{key:"_processUrl",value:function(t){return t?dt.urlPathAppend(this.url,t):this.url}}])&&Ok(e.prototype,r),n&&Ok(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Ck(t){"@babel/helpers - typeof";return(Ck="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ak(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Mk(){return(Mk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ik(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Rk(t,e){return(Rk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Lk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Ik(t);if(e){var o=Ik(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Ck(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Nk(t)}(this,r)}}function Nk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ik(t){return(Ik=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Dk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Rk(t,e)}(i,xo);var e,r,n,o=Lk(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},e&&dt.extend(Nk(r),e),r.CLASS_NAME="SuperMap.ImageCollectionService",r}return e=i,(r=[{key:"destroy",value:function(){Mk(Ik(i.prototype),"destroy",this).call(this)}},{key:"getLegend",value:function(t,e){var r={collectionId:this.options.collectionId};"function"==typeof t&&(e=t,t=null);var n=dt.convertPath("/collections/{collectionId}/legend",r),o=dt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",params:t,callback:e})}},{key:"getStatistics",value:function(t){var e={collectionId:this.options.collectionId},r=dt.convertPath("/collections/{collectionId}/statistics",e),n=dt.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"getTileInfo",value:function(t){var e={collectionId:this.options.collectionId},r=dt.convertPath("/collections/{collectionId}/tileInfo",e),n=dt.urlPathAppend(this.url,r);return this._processAsync({url:n,method:"GET",callback:t})}},{key:"deleteItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=dt.convertPath("/collections/{collectionId}/items/{featureId}",r),o=dt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"DELETE",callback:e})}},{key:"getItemByID",value:function(t,e){var r={collectionId:this.options.collectionId,featureId:t},n=dt.convertPath("/collections/{collectionId}/items/{featureId}",r),o=dt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"GET",callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.params;return this.request({method:r||"GET",url:e,params:o,scope:this,success:n,failure:n})}}])&&Ak(e.prototype,r),n&&Ak(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Fk(t){"@babel/helpers - typeof";return(Fk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Bk(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function Gk(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Uk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zk(){return(zk="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Hk(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function Vk(t,e){return(Vk=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function Jk(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Hk(t);if(e){var o=Hk(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Fk(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return qk(t)}(this,r)}}function qk(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Hk(t){return(Hk=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Wk=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vk(t,e)}(i,xo);var e,r,n,o=Jk(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},e&&dt.extend(qk(r),e),r.CLASS_NAME="SuperMap.ImageService",r}return e=i,(r=[{key:"destroy",value:function(){zk(Hk(i.prototype),"destroy",this).call(this)}},{key:"getCollections",value:function(t){var e=dt.convertPath("/collections"),r=dt.urlPathAppend(this.url,e);return this._processAsync({url:r,mehtod:"GET",callback:t})}},{key:"getCollectionByID",value:function(t,e){var r={collectionId:t},n=dt.convertPath("/collections/{collectionId}",r),o=dt.urlPathAppend(this.url,n);return this._processAsync({url:o,mehtod:"GET",callback:e})}},{key:"search",value:function(t,e){var r=function(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?Bk(Object(r),!0).forEach(function(e){Gk(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Bk(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}({},t||{}),n=dt.convertPath("/search"),o=dt.urlPathAppend(this.url,n);return this._processAsync({url:o,method:"POST",data:r,callback:e})}},{key:"_processAsync",value:function(t){var e=t.url,r=t.method,n=t.callback,o=t.data;return this.request({method:r||"GET",url:e,data:o,scope:this,success:n,failure:n})}}])&&Uk(e.prototype,r),n&&Uk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Yk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Xk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.include=void 0,this.exclude=void 0,this.CLASS_NAME="SuperMap.FieldsFilter",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("include")&&(r.include=e.include),e.hasOwnProperty("exclude")&&(r.exclude=e.exclude)),r}}],(r=[{key:"destroy",value:function(){this.include=void 0,this.exclude=void 0}}])&&Yk(e.prototype,r),n&&Yk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zk=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.field=void 0,this.direction=t.Direction.ASC,this.CLASS_NAME="SuperMap.Sortby",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("field")&&(r.field=e.field),e.hasOwnProperty("direction")&&(r.direction=e.direction)),r}}],(r=[{key:"destroy",value:function(){this.field=void 0,this.direction="ASC"}}])&&Qk(e.prototype,r),n&&Qk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kk(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}Zk.Direction={ASC:"ASC",DESC:"DESC"};var $k=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bbox=void 0,this.collections=void 0,this.ids=void 0,this.limit=void 0,this.fields=void 0,this.query=void 0,this.sortby=void 0,this.CLASS_NAME="SuperMap.ImageSearchParameter",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("bbox")&&(r.bbox=e.bbox),e.hasOwnProperty("collections")&&(r.collections=e.collections),e.hasOwnProperty("ids")&&(r.ids=e.ids),e.hasOwnProperty("limit")&&(r.limit=e.limit),e.hasOwnProperty("fields")&&(r.fields=Xk.constructFromObject&&Xk.constructFromObject(e.fields,{})||e.fields),e.hasOwnProperty("query")&&(r.query=e.query),e.hasOwnProperty("sortby")&&(r.sortby=e.sortby,e.sortby&&(r.sortby=e.sortby.map(function(t){return Zk.constructFromObject&&Zk.constructFromObject(t,{})||t})))),r}}],(r=[{key:"destroy",value:function(){var t=this;t.bbox=void 0,t.collections=void 0,t.ids=void 0,t.limit=void 0,t.fields=void 0,t.query=void 0,t.sortby=void 0}}])&&Kk(e.prototype,r),n&&Kk(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function tj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var ej=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stretchType=void 0,this.stdevCoefficient=void 0,this.gaussianCoefficient=void 0,this.useMedianValue=void 0,this.minPercent=void 0,this.maxPercent=void 0,this.CLASS_NAME="SuperMap.ImageStretchOption",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("stretchType")&&(r.stretchType=e.stretchType),e.hasOwnProperty("stdevCoefficient")&&(r.stdevCoefficient=e.stdevCoefficient),e.hasOwnProperty("gaussianCoefficient")&&(r.gaussianCoefficient=e.gaussianCoefficient),e.hasOwnProperty("useMedianValue")&&(r.useMedianValue=e.useMedianValue),e.hasOwnProperty("minPercent")&&(r.minPercent=e.minPercent),e.hasOwnProperty("maxPercent")&&(r.maxPercent=e.maxPercent)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.stretchType=void 0,t.stdevCoefficient=void 0,t.gaussianCoefficient=void 0,t.useMedianValue=void 0,t.minPercent=void 0,t.maxPercent=void 0}}])&&tj(e.prototype,r),n&&tj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function rj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}ej.StretchType={NONE:"NONE",GAUSSIAN:"GAUSSIAN",PERCENTCLIP:"PERCENTCLIP",MINIMUMMAXIMUM:"MINIMUMMAXIMUM",STANDARDDEVIATION:"STANDARDDEVIATION"};var nj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.displayMode=void 0,this.displayBands=void 0,this.stretchOption=void 0,this.interpolationMode=void 0,this.colorScheme=void 0,this.colorTable=void 0,this.brightness=void 0,this.contrast=void 0,this.noData=void 0,this.noDataColor=void 0,this.noDataTransparent=void 0,this.backgroundValue=void 0,this.backgroundColor=void 0,this.backgroundTransparent=void 0,this.gridFunctions=void 0,this.CLASS_NAME="SuperMap.ImageRenderingRule",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("displayMode")&&(r.displayMode=e.displayMode),e.hasOwnProperty("displayBands")&&(r.displayBands=e.displayBands),e.hasOwnProperty("stretchOption")&&(r.stretchOption=ej.constructFromObject&&ej.constructFromObject(e.stretchOption,{})||e.stretchOption),e.hasOwnProperty("interpolationMode")&&(r.interpolationMode=e.interpolationMode),e.hasOwnProperty("colorScheme")&&(r.colorScheme=e.colorScheme),e.hasOwnProperty("colorTable")&&(r.colorTable=e.colorTable),e.hasOwnProperty("brightness")&&(r.brightness=e.brightness),e.hasOwnProperty("contrast")&&(r.contrast=e.contrast),e.hasOwnProperty("noData")&&(r.noData=e.noData),e.hasOwnProperty("noDataColor")&&(r.noDataColor=e.noDataColor),e.hasOwnProperty("backgroundValue")&&(r.backgroundValue=e.backgroundValue),e.hasOwnProperty("noDataTransparent")&&(r.noDataTransparent=e.noDataTransparent),e.hasOwnProperty("backgroundColor")&&(r.backgroundColor=e.backgroundColor),e.hasOwnProperty("backgroundTransparent")&&(r.backgroundTransparent=e.backgroundTransparent),e.hasOwnProperty("gridFunctions")&&(r.gridFunctions=e.gridFunctions)),r}}],(r=[{key:"destroy",value:function(){var t=this;t.displayMode=void 0,t.displayBands=void 0,t.stretchOption=void 0,t.interpolationMode=void 0,t.colorScheme=void 0,t.colorTable=void 0,t.brightness=void 0,t.contrast=void 0,t.noData=void 0,t.noDataColor=void 0,t.noDataTransparent=void 0,t.backgroundValue=void 0,t.backgroundColor=void 0,t.backgroundTransparent=void 0,t.gridFuncOptions=void 0}}])&&rj(e.prototype,r),n&&rj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function oj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}nj.DisplayMode={COMPOSITE:"COMPOSITE",STRETCHED:"Stretched"},nj.InterpolationMode={NEARESTNEIGHBOR:"NEARESTNEIGHBOR",HIGHQUALITYBILINEAR:"HIGHQUALITYBILINEAR",DEFAULT:"DEFAULT"};var ij=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFHillShade",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFHillShade",this.Azimuth=315,this.Altitude=45,this.ZFactor=1}}])&&oj(e.prototype,r),n&&oj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function aj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var sj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFAspect",this.Azimuth=void 0,this.CLASS_NAME="SuperMap.ImageGFAspect",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Azimuth")&&(r.Azimuth=e.Azimuth)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFAspect",this.Azimuth=void 0}}])&&aj(e.prototype,r),n&&aj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var uj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFOrtho",this.CLASS_NAME="SuperMap.ImageGFOrtho",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFOrtho"}}])&&lj(e.prototype,r),n&&lj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function cj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1,this.CLASS_NAME="SuperMap.ImageGFSlope",dt.extend(this,e)}var e,r,n;return e=t,n=[{key:"constructFromObject",value:function(e,r){return e&&(r=r||new t,e.hasOwnProperty("girdFuncName")&&(r.girdFuncName=e.girdFuncName),e.hasOwnProperty("Altitude")&&(r.Altitude=e.Altitude),e.hasOwnProperty("ZFactor")&&(r.ZFactor=e.ZFactor)),r}}],(r=[{key:"destroy",value:function(){this.girdFuncName="GFSlope",this.Altitude=45,this.ZFactor=1}}])&&cj(e.prototype,r),n&&cj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hj(t){"@babel/helpers - typeof";return(hj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function pj(){pj=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==hj(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function yj(t){return function(t){if(Array.isArray(t))return dj(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return dj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dj(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function bj(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function vj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mj(){return(mj="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_j(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gj(t,e){return(gj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_j(t);if(e){var o=_j(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===hj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _j(t){return(_j=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Oj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gj(t,e)}(i,xo);var e,r,n,o=wj(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).options=e||{},r.CLASS_NAME="SuperMap.KnowledgeGraphService",r}return e=i,(r=[{key:"destroy",value:function(){mj(_j(i.prototype),"destroy",this).call(this)}},{key:"query",value:function(t,e){var r=dt.urlAppend(this.url+"/query.json","".concat("cypherQuery","=").concat(encodeURI(t)));this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMaps",value:function(t){var e=this.url+"/graphmaps.json";this.processAsync({url:e,method:"GET",callback:t})}},{key:"getGraphMap",value:function(t,e){var r=this.url+"/graphmaps/".concat(t,".json");this.processAsync({url:r,method:"GET",callback:e})}},{key:"getGraphMapData",value:function(){var t,e=(t=pj().mark(function t(e){var r,n,o,i,a,s,l,u,c;return pj().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],t.next=3,this._getGraphMapData(e);case 3:if(n=t.sent){t.next=6;break}return t.abrupt("return");case 6:o=n.dataContent.queries&&n.dataContent.queries.query||[],i=[],i="string"==typeof o?[o]:o,(a=this._getGraphMapExpandQuery(n)).length&&(s=i).push.apply(s,yj(a)),l=0;case 12:if(!(l<i.length)){t.next=21;break}return u=i[l],t.next=16,this._queryDataBySql(u);case 16:c=t.sent,r=r.concat([],c);case 18:l++,t.next=12;break;case 21:return t.abrupt("return",{data:r,graphMap:n});case 22:case"end":return t.stop()}},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){bj(i,n,o,a,s,"next",t)}function s(t){bj(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t){return e.apply(this,arguments)}}()},{key:"_getGraphMapExpandQuery",value:function(t){var e=[];return(t.dataContent.expand&&JSON.parse(t.dataContent.expand)||[]).forEach(function(t){e.push("match p=(n)-[]-(m) where id(n)=".concat(t," return p;"))}),e}},{key:"processAsync",value:function(t){var e=t.url,r=t.params,n=t.method,o=t.callback,i={method:n,url:e,scope:this,success:o,failure:o};return r&&(i.params=r),this.request(i)}},{key:"_getGraphMapData",value:function(t){var e=this;return new Promise(function(r,n){e.getGraphMap(t,function(t){"processFailed"===t.type?n(t.error):""===t.result.data?n("无数据"):r(t.result.graphMap)})})}},{key:"_queryDataBySql",value:function(t){var e=this;return new Promise(function(r,n){e.query(t,function(t){"processFailed"===t.type?n(t.error):r(t.result)})})}}])&&vj(e.prototype,r),n&&vj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Sj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},dt.extend(this,e),this.CLASS_NAME="SuperMap.OnlineServiceBase"}var e,r,n;return e=t,(r=[{key:"request",value:function(t,e,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return e=wn.appendCredential(e),n.crossOrigin=this.options.crossOrigin,n.headers=this.options.headers,mn.commit(t,e,r,n).then(function(t){return t.json()})}}])&&Sj(e.prototype,r),n&&Sj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Pj(t){"@babel/helpers - typeof";return(Pj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ej(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kj(t,e){return(kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jj(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=Cj(t);if(e){var o=Cj(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===Pj(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return Tj(t)}(this,r)}}function Tj(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Cj(t){return(Cj=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var Aj=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kj(t,e)}(i,xj);var e,r,n,o=jj(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,t),e=e||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,dt.extend(Tj(r),e),r.id&&(r.serviceUrl=t+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}return e=i,(r=[{key:"load",value:function(){if(this.serviceUrl){var t=this;return t.request("GET",this.serviceUrl).then(function(e){dt.extend(t,e)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&Ej(e.prototype,r),n&&Ej(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function Mj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Rj=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var e=this.webUrl+"/mycontent";this.mDatasUrl=e+"/datas",this.CLASS_NAME="SuperMap.Online"}var e,r,n;return e=t,(r=[{key:"load",value:function(){return mn.get(this.rootUrl).then(function(t){return t})}},{key:"login",value:function(){wn.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(t){var e=this,r=e.mDatasUrl;return t&&(t=t.toJSON()),mn.get(r,t).then(function(t){if(t&&t.content&&!(t.content.length<1)){for(var r=[],n=t.content,o=n.length,i=0;i<o;i++){var a=n[i],s=new Aj(e.mDatasUrl,a);r.push(s)}return r}})}}])&&Mj(e.prototype,r),n&&Mj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Lj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Nj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){var t=this,e={types:t.types,fileName:t.fileName,serviceStatuses:t.serviceStatuses,serviceId:t.serviceId,ids:t.ids,keywords:t.keywords,orderBy:t.orderBy,tags:t.tags,filterFields:t.filterFields};for(var r in e)null==e[r]&&delete e[r];return e}}])&&Lj(e.prototype,r),n&&Lj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Ij(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Dj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.name=null,this.serviceIds=null,this.clientType=R.SERVER,this.limitation=null,dt.extend(this,e),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&Ij(e.prototype,r),n&&Ij(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Fj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Bj=function(t,e,r){return e&&Fj(t.prototype,e),r&&Fj(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,dt.extend(this,r),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||i.ISERVER,this.server||console.error("server url require is not  undefined");var n="/services/security/tokens";this.type===i.ISERVER&&this.server.indexOf("iserver")<0&&(n="/iserver"+n),this.tokenServiceUrl||(this.tokenServiceUrl=dt.urlPathAppend(this.server,n)),this.keyServiceUrl||(this.type===i.IPORTAL?this.keyServiceUrl=dt.urlPathAppend(this.server,"/web/mycontent/keys/register"):this.type===i.ONLINE&&(this.keyServiceUrl=dt.urlPathAppend(this.server,"/web/mycontent/keys")))});function Gj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Uj=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.userName=null,this.password=null,this.clientType=R.NONE,this.ip=null,this.referer=null,this.expiration=60,dt.extend(this,e),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var e,r,n;return e=t,(r=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&Gj(e.prototype,r),n&&Gj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function zj(t){return function(t){if(Array.isArray(t))return Vj(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return Vj(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Vj(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vj(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function Jj(t){"@babel/helpers - typeof";return(Jj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Hj=function(){function t(e,r,n){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!r||"function"!=typeof r&&"object"!==Jj(r)||"function"!=typeof r.Client)throw Error("Please enter the global variable of @elastic/elasticsearch@5.6.22 or elasticsearch@16.7.3 for the second parameter!");n=n||{},this.url=e;try{this.client=new r.Client({host:this.url})}catch(t){this.client=new r.Client({node:{url:new URL(this.url)}})}this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new qe(this,null,this.EVENT_TYPES),this.eventListeners=null,dt.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var e,r,n;return e=t,(r=[{key:"setGeoFence",value:function(t){this.geoFence=t}},{key:"bulk",value:function(t,e){return this.client.bulk(t,this._handleCallback(e))}},{key:"clearScroll",value:function(t,e){return this.client.clearScroll(t,this._handleCallback(e))}},{key:"count",value:function(t,e){return this.client.count(t,this._handleCallback(e))}},{key:"create",value:function(t,e){return this.client.create(t,this._handleCallback(e))}},{key:"delete",value:function(t,e){return this.client.delete(t,this._handleCallback(e))}},{key:"deleteByQuery",value:function(t,e){return this.client.deleteByQuery(t,this._handleCallback(e))}},{key:"deleteScript",value:function(t,e){return this.client.deleteScript(t,this._handleCallback(e))}},{key:"deleteTemplate",value:function(t,e){return this.client.deleteTemplate(t,this._handleCallback(e))}},{key:"exists",value:function(t,e){return this.client.exists(t,this._handleCallback(e))}},{key:"existsSource",value:function(t,e){return this.client.existsSource(t,this._handleCallback(e))}},{key:"explain",value:function(t,e){return this.client.explain(t,this._handleCallback(e))}},{key:"fieldCaps",value:function(t,e){return this.client.fieldCaps(t,this._handleCallback(e))}},{key:"get",value:function(t,e){return this.client.get(t,this._handleCallback(e))}},{key:"getScript",value:function(t,e){return this.client.getScript(t,this._handleCallback(e))}},{key:"getSource",value:function(t,e){return this.client.getSource(t,this._handleCallback(e))}},{key:"getTemplate",value:function(t,e){return this.client.getTemplate(t,this._handleCallback(e))}},{key:"index",value:function(t,e){return this.client.index(t,this._handleCallback(e))}},{key:"info",value:function(t,e){return this.client.info(t,this._handleCallback(e))}},{key:"mget",value:function(t,e){return this.client.mget(t,this._handleCallback(e))}},{key:"msearch",value:function(t,e){var r=this;return r.client.msearch(t).then(function(t){return t=t.body||t,r._update(t.responses,e),t},function(t){return e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"msearchTemplate",value:function(t,e){return this.client.msearchTemplate(t,this._handleCallback(e))}},{key:"mtermvectors",value:function(t,e){return this.client.mtermvectors(t,this._handleCallback(e))}},{key:"ping",value:function(t,e){return this.client.ping(t,this._handleCallback(e))}},{key:"putScript",value:function(t,e){return this.client.putScript(t,this._handleCallback(e))}},{key:"putTemplate",value:function(t,e){return this.client.putTemplate(t,this._handleCallback(e))}},{key:"reindex",value:function(t,e){return this.client.reindex(t,this._handleCallback(e))}},{key:"reindexRessrottle",value:function(t,e){return this.client.reindexRessrottle(t,this._handleCallback(e))}},{key:"renderSearchTemplate",value:function(t,e){return this.client.renderSearchTemplate(t,this._handleCallback(e))}},{key:"scroll",value:function(t,e){return this.client.scroll(t,this._handleCallback(e))}},{key:"search",value:function(t,e){var r=this;return r.client.search(t).then(function(t){return t=t.body||t,r._update(t,e),t},function(t){return e&&e(t),r.events.triggerEvent("error",{error:t}),t})}},{key:"searchShards",value:function(t,e){return this.client.searchShards(t,this._handleCallback(e))}},{key:"searchTemplate",value:function(t,e){return this.client.searchTemplate(t,this._handleCallback(e))}},{key:"suggest",value:function(t,e){return this.client.suggest(t,this._handleCallback(e))}},{key:"termvectors",value:function(t,e){return this.client.termvectors(t,this._handleCallback(e))}},{key:"update",value:function(t,e){return this.client.update(t,this._handleCallback(e))}},{key:"updateByQuery",value:function(t,e){return this.client.updateByQuery(t,this._handleCallback(e))}},{key:"_handleCallback",value:function(t){return function(){var e=Array.from(arguments),r=e.shift(),n=e.shift(),o=n&&n.body;if(o){var i=n;e=[i.statusCode,i.headers],n=o}t.call.apply(t,[this,r,n].concat(zj(e)))}}},{key:"_update",value:function(t,e){var r=this;t&&(r.data=t,r.openGeoFence&&r.geoFence&&r._validateDatas(t),r.events.triggerEvent("change",{data:r.data}),r.change?r.change&&r.change(t):e&&e(void 0,{responses:t}))}},{key:"_validateDatas",value:function(t){if(t){t instanceof Array||(t=[t]);var e,r=t.length;for(e=0;e<r;e++)this._validateData(t[e])}}},{key:"_validateData",value:function(t){var e=this;t.hits.hits.map(function(r){var n=r._source,o=e._getMeterPerMapUnit(e.geoFence.unit),i=e.geoFence.center[0]*o,a=e.geoFence.center[1]*o,s=n.x*o,l=n.y*o;return e._distance(s,l,i,a)>e.geoFence.radius&&(e.outOfGeoFence&&e.outOfGeoFence(t),e.events.triggerEvent("outOfGeoFence",{data:t})),r})}},{key:"_distance",value:function(t,e,r,n){return Math.sqrt((t-r)*(t-r)+(e-n)*(e-n))}},{key:"_getMeterPerMapUnit",value:function(t){var e;return"meter"===t?e=1:"degree"===t&&(e=2*Math.PI*6378137/360),e}}])&&qj(e.prototype,r),n&&qj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wj(t){"@babel/helpers - typeof";return(Wj="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Xj=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var e,r,n;return e=t,(r=[{key:"clone",value:function(t){var e=this.BUILTIN_OBJECT;if("object"==Wj(t)&&null!==t){var r=t;if(t instanceof Array){r=[];for(var n=0,o=t.length;n<o;n++)r[n]=this.clone(t[n])}else if(!e[Object.prototype.toString.call(t)])for(var i in r={},t)t.hasOwnProperty(i)&&(r[i]=this.clone(t[i]));return r}return t}},{key:"mergeItem",value:function(t,e,r,n){var o=this.BUILTIN_OBJECT;e.hasOwnProperty(r)&&("object"!=Wj(t[r])||o[Object.prototype.toString.call(t[r])]?!n&&r in t||(t[r]=e[r]):this.merge(t[r],e[r],n))}},{key:"merge",value:function(t,e,r){for(var n in e)this.mergeItem(t,e,n,r);return t}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(t,e){var r,n=this._canvas,o=this._pixelCtx,i=this._width,a=this._height,s=this._offsetX,l=this._offsetY;t+s>i&&(i=t+s+100,n.width=i,r=!0),e+l>a&&(a=e+l+100,n.height=a,r=!0),t<-s&&(i+=s=100*Math.ceil(-t/100),n.width=i,r=!0),e<-l&&(a+=l=100*Math.ceil(-e/100),n.height=a,r=!0),r&&o.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(t,e){if(t.indexOf)return t.indexOf(e);for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}},{key:"inherits",value:function(t,e){var r=t.prototype;function n(){}for(var o in n.prototype=e.prototype,t.prototype=new n,r)t.prototype[o]=r[o];t.constructor=t}}])&&Yj(e.prototype,r),n&&Yj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Zj=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new Xj,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var e,r,n;return e=t,(r=[{key:"customPalette",value:function(t){this.palette=t}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(t,e){return t|=0,(e=e||this.palette)[t%e.length]}},{key:"customHighlight",value:function(t){this.highlightColor=t}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(t,e,r,n,o,i,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(t,e,r,n,o,i),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(t,e,r,n,o){var i=this.util;this._ctx||(this._ctx=i.getContext());for(var a=this._ctx.createLinearGradient(t,e,r,n),s=0,l=o.length;s<l;s++)a.addColorStop(o[s][0],o[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(t,e,r){t=this.toRGBA(t),e=this.toRGBA(e),t=this.getData(t);for(var n=[],o=((e=this.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,l=0,u=t[0],c=t[1],f=t[2],h=t[3];l<r;l++)n[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),u+=o,c+=i,f+=a,h+=s;return u=e[0],c=e[1],f=e[2],h=e[3],n[l]=this.toColor([u,c,f,h],"rgba"),n}},{key:"getGradientColors",value:function(t,e){var r=[],n=t.length;if(void 0===e&&(e=20),1===n)r=this.getStepColors(t[0],t[0],e);else if(n>1)for(var o=0,i=n-1;o<i;o++){var a=this.getStepColors(t[o],t[o+1],e);o<i-1&&a.pop(),r=r.concat(a)}return r}},{key:"toColor",value:function(t,e){if(e=e||"rgb",t&&(3===t.length||4===t.length)){if(t=this.map(t,function(t){return t>1?Math.ceil(t):t}),e.indexOf("hex")>-1)return"#"+((1<<24)+(t[0]<<16)+(t[1]<<8)+ +t[2]).toString(16).slice(1);if(e.indexOf("hs")>-1){var r=this.map(t.slice(1,3),function(t){return t+"%"});t[1]=r[0],t[2]=r[1]}return e.indexOf("a")>-1?(3===t.length&&t.push(1),t[3]=this.adjust(t[3],[0,1]),e+"("+t.slice(0,4).join(",")+")"):e+"("+t.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(t){(t=this.trim(t)).indexOf("rgba")<0&&(t=this.toRGBA(t));var e=[],r=0;return t.replace(/[\d.]+/g,function(t){r<3?t|=0:t=+t,e[r++]=t}),e}},{key:"convert",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=this.getData(t),n=r[3];return void 0===n&&(n=1),t.indexOf("hsb")>-1?r=this._HSV_2_RGB(r):t.indexOf("hsl")>-1&&(r=this._HSL_2_RGB(r)),e.indexOf("hsb")>-1||e.indexOf("hsv")>-1?r=this._RGB_2_HSB(r):e.indexOf("hsl")>-1&&(r=this._RGB_2_HSL(r)),r[3]=n,this.toColor(r,e)}},{key:"toRGBA",value:function(t){return this.convert(t,"rgba")}},{key:"toRGB",value:function(t){return this.convert(t,"rgb")}},{key:"toHex",value:function(t){return this.convert(t,"hex")}},{key:"toHSVA",value:function(t){return this.convert(t,"hsva")}},{key:"toHSV",value:function(t){return this.convert(t,"hsv")}},{key:"toHSBA",value:function(t){return this.convert(t,"hsba")}},{key:"toHSB",value:function(t){return this.convert(t,"hsb")}},{key:"toHSLA",value:function(t){return this.convert(t,"hsla")}},{key:"toHSL",value:function(t){return this.convert(t,"hsl")}},{key:"toName",value:function(t){for(var e in this._nameColors)if(this.toHex(this._nameColors[e])===this.toHex(t))return e;return null}},{key:"trim",value:function(t){return String(t).replace(/\s+/g,"")}},{key:"normalize",value:function(t){if(this._nameColors[t]&&(t=this._nameColors[t]),t=(t=this.trim(t)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(t)){var e=(3840&(t=parseInt(t.slice(1),16)))<<8,r=(240&t)<<4,n=15&t;t="#"+((1<<24)+(e<<4)+e+(r<<4)+r+(n<<4)+n).toString(16).slice(1)}return t}},{key:"lift",value:function(t,e){if(!this.isCalculableColor(t))return t;var r=e>0?1:-1;void 0===e&&(e=0),e=Math.abs(e)>1?1:Math.abs(e),t=this.toRGB(t);for(var n=this.getData(t),o=0;o<3;o++)n[o]=1===r?n[o]*(1-e)|0:(255-n[o])*e+n[o]|0;return"rgb("+n.join(",")+")"}},{key:"reverse",value:function(t){if(!this.isCalculableColor(t))return t;var e=this.getData(this.toRGBA(t));return e=this.map(e,function(t){return 255-t}),this.toColor(e,"rgb")}},{key:"mix",value:function(t,e,r){if(!this.isCalculableColor(t)||!this.isCalculableColor(e))return t;void 0===r&&(r=.5);for(var n=2*(r=1-this.adjust(r,[0,1]))-1,o=this.getData(this.toRGBA(t)),i=this.getData(this.toRGBA(e)),a=o[3]-i[3],s=((n*a==-1?n:(n+a)/(1+n*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=o[c]*s+i[c]*l;var f=o[3]*r+i[3]*(1-r);return f=Math.max(0,Math.min(1,f)),1===o[3]&&1===i[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(e){var r,n,o=(e=this.normalize(e)).match(this.colorRegExp);if(null===o)throw new Error("The color format error");var i,a=[];if(o[2])i=[(r=o[2].replace("#","").split(""))[0]+r[1],r[2]+r[3],r[4]+r[5]],a=this.map(i,function(e){return t.prototype.adjust.call(this,parseInt(e,16),[0,255])});else if(o[4]){var s=o[4].split(",");n=s[3],i=s.slice(0,3),a=this.map(i,function(e){return e=Math.floor(e.indexOf("%")>0?2.55*parseInt(e,0):e),t.prototype.adjust.call(this,e,[0,255])}),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}else if(o[5]||o[6]){var l=(o[5]||o[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];n=l[3],(a=this.map([c,f],function(e){return t.prototype.adjust.call(this,parseFloat(e)/100,[0,1])})).unshift(u),void 0!==n&&a.push(this.adjust(parseFloat(n),[0,1]))}return a}},{key:"alpha",value:function(t,e){if(!this.isCalculableColor(t))return t;null===e&&(e=1);var r=this.getData(this.toRGBA(t));return r[3]=this.adjust(Number(e).toFixed(4),[0,1]),this.toColor(r,"rgba")}},{key:"map",value:function(t,e){if("function"!=typeof e)throw new TypeError;for(var r=t?t.length:0,n=0;n<r;n++)t[n]=e(t[n]);return t}},{key:"adjust",value:function(t,e){return t<=e[0]?t=e[0]:t>=e[1]&&(t=e[1]),t}},{key:"isCalculableColor",value:function(t){return t instanceof Array||"string"==typeof t}},{key:"_HSV_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s=6*o;6===s&&(s=0);var l=0|s,u=a*(1-i),c=a*(1-i*(s-l)),f=a*(1-i*(1-(s-l))),h=0,p=0,y=0;0===l?(h=a,p=f,y=u):1===l?(h=c,p=a,y=u):2===l?(h=u,p=a,y=f):3===l?(h=u,p=c,y=a):4===l?(h=f,p=u,y=a):(h=a,p=u,y=c),e=255*h,r=255*p,n=255*y}return[e,r,n]}},{key:"_HSL_2_RGB",value:function(t){var e,r,n,o=t[0],i=t[1],a=t[2];if(0===i)e=255*a,r=255*a,n=255*a;else{var s,l=2*a-(s=a<.5?a*(1+i):a+i-i*a);e=255*this._HUE_2_RGB(l,s,o+1/3),r=255*this._HUE_2_RGB(l,s,o),n=255*this._HUE_2_RGB(l,s,o-1/3)}return[e,r,n]}},{key:"_HUE_2_RGB",value:function(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),6*r<1?t+6*(e-t)*r:2*r<1?e:3*r<2?t+(e-t)*(2/3-r)*6:t}},{key:"_RGB_2_HSB",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=s;if(0===l)e=0,r=0;else{r=l/s;var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;n===s?e=h-f:o===s?e=1/3+c-h:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(t){var e,r,n=t[0]/255,o=t[1]/255,i=t[2]/255,a=Math.min(n,o,i),s=Math.max(n,o,i),l=s-a,u=(s+a)/2;if(0===l)e=0,r=0;else{r=u<.5?l/(s+a):l/(2-s-a);var c=((s-n)/6+l/2)/l,f=((s-o)/6+l/2)/l,h=((s-i)/6+l/2)/l;n===s?e=h-f:o===s?e=1/3+c-h:i===s&&(e=2/3+f-c),e<0&&(e+=1),e>1&&(e-=1)}return[e*=360,r*=100,u*=100]}}])&&Qj(e.prototype,r),n&&Qj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Kj(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var $j=new Zj,tT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"createCanvas",value:function(t,e){var r=document.createElement("canvas");return r.height=t,r.width=e,r.getContext("2d")}},{key:"getLinearGradient",value:function(t,e,r,n,o){this._ctx||(this._ctx=this.getContext());for(var i=this._ctx.createLinearGradient(t,e,r,n),a=o.length,s=1/(a-1),l=0,u=0;u<a;u++)i.addColorStop(l,o[u]),l+=s;return i.__nonRecursion=!0,i}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(t,e,r){t=$j.toRGBA(t),e=$j.toRGBA(e),t=$j.getData(t);for(var n=[],o=((e=$j.getData(e))[0]-t[0])/r,i=(e[1]-t[1])/r,a=(e[2]-t[2])/r,s=(e[3]-t[3])/r,l=0,u=t[0],c=t[1],f=t[2],h=t[3];l<r;l++)n[l]=$j.toColor([$j.adjust(Math.floor(u),[0,255]),$j.adjust(Math.floor(c),[0,255]),$j.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),u+=o,c+=i,f+=a,h+=s;return u=e[0],c=e[1],f=e[2],h=e[3],n[l]=$j.toColor([u,c,f,h],"hex"),n}},{key:"getGradientColors",value:function(t,e,r){var n,o,i,a=[],s=t.length;if(void 0!==e){if(s>=e)if("RANGE"===r)for(o=0;o<e;o++)a.push(t[o]);else for(o=0;o<e;o++){var l=Math.floor(o/2);if(o%2==0)a.push(t[l]);else{var u=t.length-1-l;a.push(t[u])}}else{for(n=Math.ceil(e/(s-1)),o=0,i=s-1;o<i;o++){var c=this.getStepColors(t[o],t[o+1],n);o<i-1&&c.pop(),a=a.concat(c)}for(var f=a.length-e,h=0;h<f;h++)a.splice(2,1)}return a}}}],(r=null)&&Kj(e.prototype,r),n&&Kj(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(t){var e=this.newInstance();return e.setSerie(t),e}},{key:"getArrayStatistic",value:function(t,e){return t.length?"Sum"===e||"求和"===e?this.getSum(t):"Maximum"===e||"最大值"===e?this.getMax(t):"Minimum"===e||"最小值"===e?this.getMin(t):"Average"===e||"平均值"===e?this.getMean(t):"Median"===e||"中位数"===e?this.getMedian(t):"times"===e||"计数"===e?this.getTimes(t):void 0:0}},{key:"getArraySegments",value:function(t,e,r){return"offset"===e?this.getEqInterval(t,r):"jenks"===e?this.getJenks(t,r):"square"===e?this.getMin(t)>=0&&this.getSqrtInterval(t,r):"logarithm"===e?this.getMin(t)>0&&this.getGeometricProgression(t,r):void 0}},{key:"getSum",value:function(t){return this.getInstance(t).sum()}},{key:"getMax",value:function(t){return this.getInstance(t).max()}},{key:"getMin",value:function(t){return this.getInstance(t).min()}},{key:"getMean",value:function(t){return this.getInstance(t).mean()}},{key:"getMedian",value:function(t){return this.getInstance(t).median()}},{key:"getTimes",value:function(t){return t.length}},{key:"getEqInterval",value:function(t,e){return this.getInstance(t).getClassEqInterval(e)}},{key:"getJenks",value:function(t,e){return this.getInstance(t).getClassJenks(e)}},{key:"getSqrtInterval",value:function(t,e){return t=t.map(function(t){return Math.sqrt(t)}),this.getInstance(t).getClassEqInterval(e).map(function(t){return t*t})}},{key:"getGeometricProgression",value:function(t,e){return this.getInstance(t).getClassGeometricProgression(e)}}],(r=null)&&eT(e.prototype,r),n&&eT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),nT=function(t){var e;if(t===c.METER)e=1;else if(t===c.DEGREE)e=2*Math.PI*6378137/360;else if(t===c.KILOMETER)e=.001;else if(t===c.INCH)e=1/.025399999918;else{if(t!==c.FOOT)return e;e=.3048}return e};function oT(t,e,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:22,i=[];if(t&&t.length>0)for(var a=0;a<t.length;a++)i.push(iT(t[a],r,n));else for(var s=Math.abs(e.left-e.right)/256,l=0;l<o;l++)i.push(s/Math.pow(2,l));return i.sort(function(t,e){return e-t})}function iT(t,e,r){return 1/(t*e*(1/.0254)*nT(r))}var aT=r(7820),sT=r.n(aT);function lT(t){"@babel/helpers - typeof";return(lT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fT(t,e,r){return e&&cT(t.prototype,e),r&&cT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var hT=function(){function t(e){uT(this,t),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof e&&(this.cartoStr=e,this.env={frames:[],errors:[],error:function(t){this.errors.push(t)}},this.parser=this.getParser(this.env),this.parse(e),this.shaders=this.toShaders())}return fT(t,[{key:"getParser",value:function(e){var r,n,o,i,a,s,l,u,c,f=this;function h(){i=l[o],a=n,u=n}function p(){l[o]=i,u=n=a}function y(){n>u&&(l[o]=l[o].slice(n-u),u=n)}function d(t){var e,i,a,s;if(t instanceof Function)return t.call(c.parsers);if("string"==typeof t)e=r.charAt(n)===t?t:null,i=1,y();else{if(y(),!(e=t.exec(l[o])))return null;i=e[0].length}if(e){var f=n+=i;for(s=n+l[o].length-i;n<s&&(32===(a=r.charCodeAt(n))||10===a||9===a);)n++;return l[o]=l[o].slice(i+(n-f)),u=n,0===l[o].length&&o<l.length-1&&o++,"string"==typeof e?e:1===e.length?e[0]:e}}function b(t){var n,o={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var i in o)0===t[i]&&(t[i]=o[i]);n=t.filename&&f.env.inputs&&f.env.inputs[t.filename]?f.env.inputs[t.filename]:r,t.line=(n.slice(0,t.index).match(/\n/g)||"").length+1;for(var a=t.index;a>=0&&"\n"!==n.charAt(a);a--)t.column++;return new Error([t.filename,t.line,t.column,t.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(i){var a,c=null;if(n=o=u=s=0,l=[],r=i.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=r),l=function(t){for(var e,n,o,i,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=t[0],p=0;p<r.length;)if(s.lastIndex=p,(e=s.exec(r))&&e.index===p&&(p+=e[0].length,h.push(e[0])),o=r.charAt(p),l.lastIndex=u.lastIndex=p,(e=u.exec(r))&&e.index===p)p+=e[0].length,h.push(e[0]);else if(n||"/"!==o||"/"!==(i=r.charAt(p+1))&&"*"!==i||!(e=l.exec(r))||e.index!==p){switch(o){case"{":if(!n){f++,h.push(o);break}case"}":if(!n){f--,h.push(o),t[++a]=h=[];break}case"(":if(!n){n=!0,h.push(o);break}case")":if(n){n=!1,h.push(o);break}default:h.push(o)}p++}else p+=e[0].length,h.push(e[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),t.map(function(t){return t.join("")})}([[]]),c)throw b(c);var h=function(t,e){var r=t.specificity,n=e.specificity;return r[0]!=n[0]?n[0]-r[0]:r[1]!=n[1]?n[1]-r[1]:r[2]!=n[2]?n[2]-r[2]:n[3]-r[3]};return(a=new t.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(t){t.error=function(e){t.errors||(t.errors=new Error("")),t.errors.message?t.errors.message+="\n"+b(e).message:t.errors.message=b(e).message},t.frames=t.frames||[];var e=this.flatten([],[],t);return e.sort(h),e},a},parsers:{primary:function(){for(var t,e=[];(t=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(t=d(this.invalid));)t&&e.push(t);return e},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new t.Tree.Invalid(e,a)},comment:function(){var e;if("/"===r.charAt(n))return"/"===r.charAt(n+1)?new t.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new t.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===r.charAt(n)||"'"===r.charAt(n)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new t.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new t.Tree.Field(e[1]):void 0}},comparison:function(){var t=d(/^=~|=|!=|<=|>=|<|>/);if(t)return t},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new t.Tree.Keyword(e)},call:function(){var e,r;if(e=/^([\w\-]+|%)\(/.exec(l[o])){if("url"===(e=e[1]))return null;n+=e.length;if(d("("),r=d(this.entities.arguments),d(")"))return e?new t.Tree.Call(e,r,n):void 0}},arguments:function(){for(var t,e=[];t=d(this.expression);){e.push(t);if(!d(","))break}return e},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===r.charAt(n)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@_match\/.&=:;#+?~]+/)||"";return d(")")?new t.Tree.URL(void 0!==e.value||e instanceof t.Tree.Variable?e:new t.Tree.Quoted(e)):new t.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var o,i=n;if("@"===r.charAt(n)&&(o=d(/^@[\w-]+/)))return new t.Tree.Variable(o,i,e.filename)},hexcolor:function(){var e;if("#"===r.charAt(n)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new t.Tree.Color(e[1])},keywordcolor:function(){var e=l[o].match(/^[a-z]+/);if(e&&e[0]in t.Tree.Reference.data.colors)return new t.Tree.Color(t.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=r.charCodeAt(n);if(!(e>57||e<45||47===e)){var o=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return o?new t.Tree.Dimension(o[1],o[2],a):void 0}}},variable:function(){var t;if("@"===r.charAt(n)&&(t=d(/^(@[\w-]+)\s*:/)))return t[1]},entity:function(){var t=d(this.entities.call)||d(this.entities.literal),e=d(this.entities.field)||d(this.entities.variable),r=d(this.entities.url)||d(this.entities.keyword);return t||e||r},end:function(){var t;return d(";")||("string"==typeof(t="}")?r.charAt(n)===t:!!t.test(l[o]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new t.Tree.Element(e)},attachment:function(){var t=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(t)return t[1]},selector:function(){for(var e,o,i,s,l,u=[],c=new t.Tree.Filterset,f=[],h=0,p=0;(i=d(this.element))||(l=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(h++,i)u.push(i);else if(l)f.push(l),p++;else if(s){var y=c.add(s);if(y)throw b({message:y,index:n-1});p++}else{if(o)throw b({message:"Encountered second attachment name.",index:n-1});o=e}var v=r.charAt(n);if("{"===v||"}"===v||";"===v||","===v)break}if(h)return new t.Tree.Selector(c,f,u,o,p,a)},filter:function(){h();var r,n,o;if(d("[")&&(r=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(r instanceof t.Tree.Quoted&&(r=new t.Tree.Field(r.toString())),(n=d(this.entities.comparison))&&(o=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw b({message:"Missing closing ] of filter.",index:a-1});return r.is||(r=new t.Tree.Field(r)),new t.Tree.Filter(r,n,o,a,e.filename)}},zoom:function(){h();var e,r;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(r=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new t.Tree.Zoom(e,r,a);p()},block:function(){var t;if(d("{")&&(t=d(this.primary))&&d("}"))return t},ruleset:function(){var e,r,n=[];for(h();e=d(this.selector);){for(n.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(n.length>0&&(r=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var o=new t.Tree.Ruleset(n,r);return o.isMap=!0,o}return new t.Tree.Ruleset(n,r)}p()},rule:function(){var o,i,l=r.charAt(n);if(h(),"."!==l&&"#"!==l&&(o=d(this.variable)||d(this.property))){if((i=d(this.value))&&d(this.end))return new t.Tree.Rule(o,i,a,e.filename);s=n,p()}},font:function(){for(var e,r=[],n=[];e=d(this.entity);)n.push(e);if(r.push(new t.Tree.Expression(n)),d(","))for(;(e=d(this.expression))&&(r.push(e),d(",")););return new t.Tree.Value(r)},value:function(){for(var e,r=[];(e=d(this.expression))&&(r.push(e),d(",")););return r.length>1?new t.Tree.Value(r.map(function(t){return t.value[0]})):1===r.length?new t.Tree.Value(r):void 0},sub:function(){var t;if(d("(")&&(t=d(this.expression))&&d(")"))return t},multiplication:function(){var e,r,n,o;if(e=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(r=d(this.operand));)o=new t.Tree.Operation(n,[o||e,r],a);return o||e}},addition:function(){var e,o,i,s;if(e=d(this.multiplication)){for(;(i=d(/^[-+]\s+/)||" "!=r.charAt(n-1)&&(d("+")||d("-")))&&(o=d(this.multiplication));)s=new t.Tree.Operation(i,[s||e,o],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,r=[];e=d(this.addition)||d(this.entity);)r.push(e);if(r.length>0)return new t.Tree.Expression(r)},property:function(){var t=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(t)return t[1]}}}}},{key:"parse",value:function(t){var e=this.parser;return this.ruleSet=e.parse(t)}},{key:"toShaders",value:function(){if(this.ruleSet){var t=this.ruleSet;if(t){var e=t.toList(this.env);e.reverse();var r={},n=[];this._toShaders(r,n,e);for(var o=[],i={},a=0,s=e.length;a<s;++a){var l=e[a],u=l.attachment,c=r[n[a]],f=[];if(!i[u]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var y=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[h++]=function(t,e){if(!Array.isArray(t))return t;var r=t.join("\n"),n='attributes["FEATUREID"]&&attributes["FEATUREID"]',o=r.indexOf(n);if(o>=0){if(!e.featureFilter){var i=o+n.length,a=r.indexOf(")",i+1),s="featureId&&(featureId"+r.substring(i,a)+")";Object.defineProperty(e,"featureFilter",{configurable:!0,enumerable:!1,value:function(t){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+r+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+r+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),o.push(f),i[n[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return o}}return null}},{key:"_toShaders",value:function(e,r,n){for(var o=0,i=n.length;o<i;++o){for(var a=n[o],s=[],l=0,u=a.elements.length;l<u;l++)s.push(a.elements[l]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");r.push(p);var y=e[p]=e[p]||{};y.zoom=t.Tree.Zoom.all;var d=a.toJS(this.env);for(var b in d)(y[b]=y[b]||[]).push(d[b].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),t}(),pT={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}};function yT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}hT.mapnik_reference={version:{latest:pT,"2.1.1":pT}},hT.Tree={},hT.Tree.operate=function(t,e,r){switch(t){case"+":return e+r;case"-":return e-r;case"*":return e*r;case"%":return e%r;case"/":return e/r}},hT.Tree.functions={rgb:function(t,e,r){return this.rgba(t,e,r,1)},rgba:function(t,e,r,n){var o=this,i=[t,e,r].map(function(t){return o.number(t)});return n=o.number(n),i.some(isNaN)||isNaN(n)?null:new hT.Tree.Color(i,n)},stop:function(t){var e,r;return arguments.length>1&&(e=arguments[1]),arguments.length>2&&(r=arguments[2]),{is:"tag",val:t,color:e,mode:r,toString:function(n){return'\n\t<stop value="'+t.ev(n)+'"'+(e?' color="'+e.ev(n)+'" ':"")+(r?' mode="'+r.ev(n)+'" ':"")+"/>"}}},hsl:function(t,e,r){return this.hsla(t,e,r,1)},hsla:function(t,e,r,n){if([t=this.number(t)%360/360,e=this.number(e),r=this.number(r),n=this.number(n)].some(isNaN))return null;var o=r<=.5?r*(e+1):r+e-r*e,i=2*r-o;return this.rgba(255*a(t+1/3),255*a(t),255*a(t-1/3),n);function a(t){return 6*(t=t<0?t+1:t>1?t-1:t)<1?i+(o-i)*t*6:2*t<1?o:3*t<2?i+(o-i)*(2/3-t)*6:i}},hue:function(t){return"toHSL"in t?new hT.Tree.Dimension(Math.round(t.toHSL().h)):null},saturation:function(t){return"toHSL"in t?new hT.Tree.Dimension(Math.round(100*t.toHSL().s),"%"):null},lightness:function(t){return"toHSL"in t?new hT.Tree.Dimension(Math.round(100*t.toHSL().l),"%"):null},alpha:function(t){return"toHSL"in t?new hT.Tree.Dimension(t.toHSL().a):null},saturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s+=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},desaturate:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.s-=e.value/100,r.s=this.clamp(r.s),this.hsla_simple(r)},lighten:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l+=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},darken:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.l-=e.value/100,r.l=this.clamp(r.l),this.hsla_simple(r)},fadein:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a+=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},fadeout:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL();return r.a-=e.value/100,r.a=this.clamp(r.a),this.hsla_simple(r)},spin:function(t,e){if(!("toHSL"in t))return null;var r=t.toHSL(),n=(r.h+e.value)%360;return r.h=n<0?360+n:n,this.hsla_simple(r)},replace:function(t,e,r){return"field"===t.is?t.toString+".replace("+e.toString()+", "+r.toString()+")":t.replace(e,r)},mix:function(t,e,r){var n=r.value/100,o=2*n-1,i=t.toHSL().a-e.toHSL().a,a=((o*i==-1?o:(o+i)/(1+o*i))+1)/2,s=1-a,l=[t.rgb[0]*a+e.rgb[0]*s,t.rgb[1]*a+e.rgb[1]*s,t.rgb[2]*a+e.rgb[2]*s],u=t.alpha*n+e.alpha*(1-n);return new hT.Tree.Color(l,u)},greyscale:function(t){return this.desaturate(t,new hT.Tree.Dimension(100))},"%":function(t){for(var e=Array.prototype.slice.call(arguments,1),r=t.value,n=0;n<e.length;n++)r=r.replace(/%s/,e[n].value).replace(/%[da]/,e[n].toString());return r=r.replace(/%%/g,"%"),new hT.Tree.Quoted(r)},hsla_simple:function(t){return this.hsla(t.h,t.s,t.l,t.a)},number:function(t){return t instanceof hT.Tree.Dimension?parseFloat("%"===t.unit?t.value/100:t.value):"number"==typeof t?t:NaN},clamp:function(t){return Math.min(1,Math.max(0,t))}},hT.Tree.Call=function(){function t(e,r,n){uT(this,t),this.is="call",this.name=e,this.args=r,this.index=n}return fT(t,[{key:"ev",value:function(t){for(var e=this.args.map(function(e){return e.ev(t)}),r=0;r<e.length;r++)if("undefined"===e[r].is)return{is:"undefined",value:"undefined"};if(this.name in hT.Tree.functions){if(hT.Tree.functions[this.name].length<=e.length){var n=hT.Tree.functions[this.name].apply(hT.Tree.functions,e);return null===n?(t.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n}return t.error({message:"incorrect number of arguments for "+this.name+"(). "+hT.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=hT.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var i=sT()(hT.Tree.Reference.mapnikFunctions),a=this.name,s=i.map(function(t){return[t[0],hT.Tree.Reference.editDistance(a,t[0]),t[1]]}).sort(function(t,e){return t[1]-e[1]});return t.error({message:"unknown function "+this.name+"(), did you mean "+s[0][0]+"("+s[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==e.length&&-1!==o?(t.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+e.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=e,this)}},{key:"toString",value:function(t,e){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),t}(),hT.Tree.Color=function(){function t(e,r){uT(this,t),this.is="color",Array.isArray(e)?this.rgb=e.slice(0,3):6==e.length?this.rgb=e.match(/.{2}/g).map(function(t){return parseInt(t,16)}):this.rgb=e.split("").map(function(t){return parseInt(t+t,16)}),"number"==typeof r?this.alpha=r:4===e.length?this.alpha=e[3]:this.alpha=1}return fT(t,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(t){return Math.round(t)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(t,e,r){var n=[];r instanceof hT.Tree.Color||(r=r.toColor());for(var o=0;o<3;o++)n[o]=hT.Tree.operate(e,this.rgb[o],r.rgb[o]);return new hT.Tree.Color(n)}},{key:"toHSL",value:function(){var t,e,r=this.rgb[0]/255,n=this.rgb[1]/255,o=this.rgb[2]/255,i=this.alpha,a=Math.max(r,n,o),s=Math.min(r,n,o),l=(a+s)/2,u=a-s;if(a===s)t=e=0;else{switch(e=l>.5?u/(2-a-s):u/(a+s),a){case r:t=(n-o)/u+(n<o?6:0);break;case n:t=(o-r)/u+2;break;case o:t=(r-n)/u+4}t/=6}return{h:360*t,s:e,l:l,a:i}}}]),t}(),hT.Tree.Comment=function(){function t(e,r){uT(this,t),this.value=e,this.silent=!!r}return fT(t,[{key:"toString",value:function(t){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),t}(),hT.Tree.Definition=function(){function t(e,r){uT(this,t),this.elements=e.elements,this.rules=r,this.ruleIndex={};for(var n=0;n<this.rules.length;n++)"zoom"in this.rules[n]&&(this.rules[n]=this.rules[n].clone()),this.rules[n].zoom=e.zoom,this.ruleIndex[this.rules[n].updateID()]=!0;this.filters=e.filters,this.zoom=e.zoom,this.attachment=e.attachment||"__default__",this.specificity=e.specificity()}return fT(t,[{key:"toString",value:function(){for(var t=this.filters.toString(),e=0;e<this.rules.length;e++)t+="\n    "+this.rules[e];return t}},{key:"toJS",value:function(t){var e={},r=this.zoom,n=this.filters.toJS(t),o=[r];function i(r){if(r instanceof hT.Tree.Rule)e[r.name]=e[r.name]||[],n?e[r.name].push("if("+n+"){"+r.value.toJS(t)+"}"):e[r.name].push(r.value.toJS(t));else if(r instanceof hT.Tree.Ruleset){var o=r.toJS(t);for(var i in o)for(var a in e[i]=e[i]||[],o[i])e[i].push(o[i][a])}}for(var a in n&&o.push(n),n=o.join(" && "),this.rules)i(this.rules[a]);return e}}]),t}(),hT.Tree.Dimension=function(){function t(e,r,n){uT(this,t),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(e),this.unit=r||null,this.index=n}return fT(t,[{key:"ev",value:function(t){if(this.unit&&this.all_units.indexOf(this.unit)<0)return t.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!t.ppi)return t.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*t.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new hT.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(t,e,r){return"%"===this.unit&&"%"!==r.unit?(t.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===r.unit?"*"===e||"/"===e||"%"===e?(t.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new hT.Tree.Dimension(hT.Tree.operate(e,this.value,this.value*r.value*.01),this.unit):new hT.Tree.Dimension(hT.Tree.operate(e,this.value,r.value),this.unit||r.unit)}}]),t}(),hT.Tree.Element=function(){function t(e){uT(this,t),this.value=e.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return fT(t,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),t}(),hT.Tree.Expression=function(){function t(e){uT(this,t),this.is="expression",this.value=e}return fT(t,[{key:"ev",value:function(t){return this.value.length>1?new hT.Tree.Expression(this.value.map(function(e){return e.ev(t)})):this.value[0].ev(t)}},{key:"toString",value:function(t){return this.value.map(function(e){return e.toString(t)}).join(" ")}}]),t}(),hT.Tree.Field=function(){function t(e){uT(this,t),this.is="field",this.value=e||""}return fT(t,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),t}(),hT.Tree.Filter=function(){function t(e,r,n,o,i){uT(this,t),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=e,this.op=r,this.val=n,this.index=o,this.filename=i,this.id=this.key+this.op+this.val}return fT(t,[{key:"ev",value:function(t){return this.key=this.key.ev(t),this.val=this.val.ev(t),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),t}(),hT.Tree.Filterset=function(){function t(){uT(this,t),this.filters={}}return fT(t,[{key:"toJS",value:function(t){function e(t){var e=t.op;"="===e&&(e="==");var r=t.val;void 0!==t._val&&(r=t._val.toString(!0)),t.key&&"scale"===t.key.value?r=+r:"string"!=typeof r&&"object"!==lT(r)||(r="'"+r+"'");var n="attributes";return n+"&&"+n+t.key+"&&"+n+t.key+" "+e+r}var r=[];for(var n in this.filters)r.push(e(this.filters[n]));return r.join(" && ")}},{key:"toString",value:function(){var t=[];for(var e in this.filters)t.push(this.filters[e].id);return t.sort().join("\t")}},{key:"ev",value:function(t){for(var e in this.filters)this.filters[e].ev(t);return this}},{key:"clone",value:function(){var t=new hT.Tree.Filterset;for(var e in this.filters)t.filters[e]=this.filters[e];return t}},{key:"cloneWith",value:function(t){var e=[];for(var r in t.filters){var n=this.addable(t.filters[r]);if(!1===n)return!1;!0===n&&e.push(t.filters[r])}if(!e.length)return null;var o=new hT.Tree.Filterset;for(r in this.filters)o.filters[r]=this.filters[r];for(;r=e.shift();)o.add(r);return o}},{key:"addable",value:function(t){var e=t.key.toString(),r=t.val.toString();switch(r.match(/^[0-9]+(\.[0-9]*)?_match/)&&(r=parseFloat(r)),t.op){case"=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val.toString()==r&&null:void 0===this.filters[e+"!="+r]&&(!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r))));case"=~":return!0;case"!=":return void 0!==this.filters[e+"="]?this.filters[e+"="].val!==r&&null:void 0!==this.filters[e+"!="+r]?null:void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null;case">":return e+"="in this.filters?!(this.filters[e+"="].val<=r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)||null));case">=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val<r)&&null:!(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r)&&(!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)&&(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r?null:!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)||null));case"<":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>=r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>=r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<r)||null));case"<=":return void 0!==this.filters[e+"="]?!(this.filters[e+"="].val>r)&&null:!(void 0!==this.filters[e+">"]&&this.filters[e+">"].val>=r)&&(!(void 0!==this.filters[e+">="]&&this.filters[e+">="].val>r)&&(void 0!==this.filters[e+"<"]&&this.filters[e+"<"].val<=r?null:!(void 0!==this.filters[e+"<="]&&this.filters[e+"<="].val<=r)||null))}}},{key:"conflict",value:function(t){var e=t.key.toString(),r=t.val.toString();return isNaN(parseFloat(r))||(r=parseFloat(r)),("="===t.op&&void 0!==this.filters[e+"="]&&r!=this.filters[e+"="].val.toString()||"!="===t.op&&void 0!==this.filters[e+"="]&&r==this.filters[e+"="].val.toString()||"="===t.op&&void 0!==this.filters[e+"!="]&&r===this.filters[e+"!="].val.toString())&&t.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(t,e){var r,n=t.key.toString(),o=t.op,i=this.conflict(t);if(i)return i;if("="===o){for(var a in this.filters)this.filters[a].key===n&&delete this.filters[a];this.filters[n+"="]=t}else if("!="===o)this.filters[n+"!="+t.val]=t;else if("=~"===o)this.filters[n+"=~"+t.val]=t;else if(">"===o){for(var s in this.filters)this.filters[s].key===n&&this.filters[s].val<=t.val&&delete this.filters[s];this.filters[n+">"]=t}else if(">="===o){for(var l in this.filters)r=+this.filters[l].val.toString(),this.filters[l].key===n&&r<t.val&&delete this.filters[l];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op=">",this.filters[n+">"]=t):this.filters[n+">="]=t}else if("<"===o){for(var u in this.filters)r=+this.filters[u].val.toString(),this.filters[u].key===n&&r>=t.val&&delete this.filters[u];this.filters[n+"<"]=t}else if("<="===o){for(var c in this.filters)r=+this.filters[c].val.toString(),this.filters[c].key===n&&r>t.val&&delete this.filters[c];void 0!==this.filters[n+"!="+t.val]?(delete this.filters[n+"!="+t.val],t.op="<",this.filters[n+"<"]=t):this.filters[n+"<="]=t}}}]),t}(),hT.Tree.Fontset=fT(function t(e,r){uT(this,t),this.fonts=r,this.name="fontset-"+e.effects.length}),hT.Tree.Invalid=function(){function t(e,r,n){uT(this,t),this.is="invalid",this.chunk=e,this.index=r,this.type="syntax",this.message=n||"Invalid code: "+this.chunk}return fT(t,[{key:"ev",value:function(t){return t.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),t}(),hT.Tree.Keyword=function(){function t(e){uT(this,t),this.value=e;var r={transparent:"color",true:"boolean",false:"boolean"};this.is=r[e]?r[e]:"keyword"}return fT(t,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return this.value}}]),t}(),hT.Tree.Literal=function(){function t(e){uT(this,t),this.value=e||"",this.is="field"}return fT(t,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),t}(),hT.Tree.Operation=function(){function t(e,r,n){uT(this,t),this.is="operation",this.op=e.trim(),this.operands=r,this.index=n}return fT(t,[{key:"ev",value:function(t){var e,r=this.operands[0].ev(t),n=this.operands[1].ev(t);return"undefined"===r.is||"undefined"===n.is?{is:"undefined",value:"undefined"}:(r instanceof hT.Tree.Dimension&&n instanceof hT.Tree.Color&&("*"===this.op||"+"===this.op?(e=n,n=r,r=e):t.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),r instanceof hT.Tree.Quoted&&n instanceof hT.Tree.Quoted&&"+"!==this.op?(t.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r instanceof hT.Tree.Field||n instanceof hT.Tree.Field||r instanceof hT.Tree.Literal||n instanceof hT.Tree.Literal?"color"===r.is||"color"===n.is?(t.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new hT.Tree.Literal(r.ev(t).toString(!0)+this.op+n.ev(t).toString(!0)):void 0===r.operate?(t.error({message:"Cannot do math with type "+r.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):r.operate(t,this.op,n))}}]),t}(),hT.Tree.Quoted=function(){function t(e){uT(this,t),this.is="string",this.value=e||""}return fT(t,[{key:"toString",value:function(t){var e=this.value.replace(/&/g,"&amp;"),r=e.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===t?"'"+r+"'":e}},{key:"ev",value:function(){return this}},{key:"operate",value:function(t,e,r){return new hT.Tree.Quoted(hT.Tree.operate(e,this.toString(),r.toString(this.contains_field)))}}]),t}(),hT.Tree.Reference={_validateValue:{font:function(t,e){return!t.validation_data||!t.validation_data.fonts||-1!=t.validation_data.fonts.indexOf(e)}},setData:function(t){this.data=t,this.selector_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])t.symbolizers[r][n].hasOwnProperty("css")&&(e[t.symbolizers[r][n].css]=[t.symbolizers[r][n],r,n]);return e}(t),this.mapnikFunctions=function(t){var e={};for(var r in t.symbolizers)for(var n in t.symbolizers[r])if("functions"===t.symbolizers[r][n].type)for(var o=0;o<t.symbolizers[r][n].functions.length;o++){var i=t.symbolizers[r][n].functions[o];e[i[0]]=i[1]}return e}(t),this.required_cache=function(t){var e={};for(var r in t.symbolizers)for(var n in e[r]=[],t.symbolizers[r])t.symbolizers[r][n].required&&e[r].push(t.symbolizers[r][n].css);return e}(t)},setVersion:function(t){return!!hT.mapnik_reference.version.hasOwnProperty(t)&&(this.setData(hT.mapnik_reference.version[t]),!0)},selectorData:function(t,e){if(this.selector_cache&&this.selector_cache[t])return this.selector_cache[t][e]},validSelector:function(t){return!!this.selector_cache[t]},selectorName:function(t){return this.selectorData(t,2)},selector:function(t){return this.selectorData(t,0)},symbolizer:function(t){return this.selectorData(t,1)},requiredProperties:function(t,e){var r=this.required_cache[t];for(var n in r)if(!(r[n]in e))return"Property "+r[n]+" required for defining "+t+" styles."},isFont:function(t){return"font"===this.selector(t).validate},editDistance:function(t,e){if(0===t.length)return e.length;if(0===e.length)return t.length;for(var r=[],n=0;n<=e.length;n++)r[n]=[n];for(var o=0;o<=t.length;o++)r[0][o]=o;for(n=1;n<=e.length;n++)for(o=1;o<=t.length;o++)e.charAt(n-1)===t.charAt(o-1)?r[n][o]=r[n-1][o-1]:r[n][o]=Math.min(r[n-1][o-1]+1,Math.min(r[n][o-1]+1,r[n-1][o]+1));return r[e.length][t.length]},validValue:function(t,e,r){var n;if(this.selector(e)){if("keyword"===r.value[0].is)return function(t,e){return"object"===lT(this.selector(e).type)?-1!==this.selector(e).type.indexOf(t.value[0].value):"string"===this.selector(e).type}(r,e);if("undefined"===r.value[0].is)return!0;if("numbers"===this.selector(e).type){for(n in r.value)if("float"!==r.value[n].is)return!1;return!0}if("tags"===this.selector(e).type){if(!r.value)return!1;if(!r.value[0].value)return"tag"===r.value[0].is;for(n=0;n<r.value[0].value.length;n++)if("tag"!==r.value[0].value[n].is)return!1;return!0}if("functions"==this.selector(e).type)return function(t,e){if("string"===t.value[0].is)return!0;for(var r in t.value)for(var n in t.value[r].value){if("call"!==t.value[r].value[n].is)return!1;var o=find(this.selector(e).functions,function(e){return e[0]===t.value[r].value[n].name});if(!(o&&-1===o[1]||o&&o[1]===t.value[r].value[n].args.length))return!1}return!0}(r,e);if("expression"===this.selector(e).type)return!0;if("unsigned"===this.selector(e).type)return"float"===r.value[0].is&&(r.value[0].round(),!0);if(this.selector(e).validate){for(n=0;n<r.value.length;n++)if(this.selector(e).type===r.value[n].is&&this._validateValue[this.selector(e).validate](t,r.value[n].value))return!0;return!1}return this.selector(e).type===r.value[0].is}return!1}},hT.Tree.Reference.setVersion("latest"),hT.Tree.Rule=function(){function t(e,r,n,o){uT(this,t),this.is="rule";var i=e.split("/");this.name=i.pop(),this.instance=i.length?i[0]:"__default__",this.value=r instanceof hT.Tree.Value?r:new hT.Tree.Value([r]),this.index=n,this.symbolizer=hT.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===e.charAt(0)}return fT(t,[{key:"clone",value:function(){var t=Object.create(hT.Tree.Rule.prototype);return t.name=this.name,t.value=this.value,t.index=this.index,t.instance=this.instance,t.symbolizer=this.symbolizer,t.filename=this.filename,t.variable=this.variable,t}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+hT.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(t){return new hT.Tree.Rule(this.name,this.value.ev(t),this.index,this.filename)}}]),t}(),hT.Tree.Ruleset=function(){function t(e,r){uT(this,t),this.is="ruleset",this.selectors=e,this.rules=r,this._lookups={}}return fT(t,[{key:"ev",value:function(t){var e,r,n=new hT.Tree.Ruleset(this.selectors,this.rules.slice(0));for(n.root=this.root,t.frames.unshift(n),e=0;e<n.rules.length;e++)r=n.rules[e],n.rules[e]=r.ev?r.ev(t):r;return t.frames.shift(),n}},{key:"match",value:function(t){return!t||0===t.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(t,e){return e instanceof hT.Tree.Rule&&!0===e.variable&&(t[e.name]=e),t},{})}},{key:"variable",value:function(t){return this.variables()[t]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(t){return t instanceof hT.Tree.Ruleset})}},{key:"find",value:function(t,e){e=e||this;var r=[],n=t.toString();return n in this._lookups?this._lookups[n]:(this.rulesets().forEach(function(n){if(n!==e)for(var o=0;o<n.selectors.length;o++)if(t.match(n.selectors[o])){t.elements.length>1?Array.prototype.push.apply(r,n.find(new hT.Tree.Selector(null,null,t.elements.slice(1)),e)):r.push(n);break}}),this._lookups[n]=r)}},{key:"evZooms",value:function(t){for(var e=0;e<this.selectors.length;e++){for(var r=hT.Tree.Zoom.all,n=0;n<this.selectors[e].zoom.length;n++)r=this.selectors[e].zoom[n].ev(t).zoom;this.selectors[e].zoom=r}}},{key:"flatten",value:function(t,e,r){var n,o,i=[];for(0===this.selectors.length&&(r.frames=r.frames.concat(this.rules)),this.evZooms(r),n=0;n<this.selectors.length;n++){var a=this.selectors[n];if(a.filters)if(e.length)for(o=0;o<e.length;o++){var s=e[o],l=s.filters.cloneWith(a.filters);if(null===l){if(s.zoom===a.zoom&&s.attachment===a.attachment&&s.elements.join()===a.elements.join()){i.push(s);continue}l=s.filters}else if(!l)continue;var u=Object.create(hT.Tree.Selector.prototype);u.filters=l,u.zoom=a.zoom,u.elements=s.elements.concat(a.elements),s.attachment&&a.attachment?u.attachment=s.attachment+"/"+a.attachment:u.attachment=a.attachment||s.attachment,u.conditions=s.conditions+a.conditions,u.index=a.index,i.push(u)}else i.push(a)}var c=[];for(n=0;n<this.rules.length;n++){var f=this.rules[n];f instanceof hT.Tree.Ruleset?f.flatten(t,i,r):f instanceof hT.Tree.Rule?c.push(f):f instanceof hT.Tree.Invalid&&r.error(f)}var h=!!c.length&&c[0].index;for(n=0;n<i.length;n++)!1!==h&&(i[n].index=h),t.push(new hT.Tree.Definition(i[n],c.slice()));return t}}]),t}(),hT.Tree.Selector=function(){function t(e,r,n,o,i,a){uT(this,t),this.elements=n||[],this.attachment=o,this.filters=e||{},this.zoom=void 0!==r?r:hT.Tree.Zoom.all,this.conditions=i,this.index=a}return fT(t,[{key:"specificity",value:function(){return this.elements.reduce(function(t,e){var r=e.specificity();return t[0]+=r[0],t[1]+=r[1],t},[0,0,this.conditions,this.index])}}]),t}(),hT.Tree.URL=function(){function t(e,r){uT(this,t),this.is="uri",this.value=e,this.paths=r}return fT(t,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(t){return new hT.Tree.URL(this.value.ev(t),this.paths)}}]),t}(),hT.Tree.Value=function(){function t(e){uT(this,t),this.is="value",this.value=e}return fT(t,[{key:"ev",value:function(t){return 1===this.value.length?this.value[0].ev(t):new hT.Tree.Value(this.value.map(function(e){return e.ev(t)}))}},{key:"toJS",value:function(t){var e=this.ev(t),r=e.toString();return"color"===e.is||"uri"===e.is||"string"===e.is||"keyword"===e.is?r="'"+r+"'":"field"===e.is?r=r.replace(/\[(.*)\]/g,"attributes['_match1']"):e.value&&"object"===lT(e.value)&&(r="["+r+"]"),"_value = "+r+";"}},{key:"toString",value:function(t,e,r,n){return this.value.map(function(e){return e.toString(t,n)}).join(r||", ")}},{key:"clone",value:function(){var t=Object.create(hT.Tree.Value.prototype);return Array.isArray(t)?t.value=this.value.slice():t.value=this.value,t.is=this.is,t}}]),t}(),hT.Tree.Variable=function(){function t(e,r,n){uT(this,t),this.is="variable",this.name=e,this.index=r,this.filename=n}return fT(t,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(t){if(this._css)return this._css;var e=t.frames.filter(function(t){return t.name===this.name}.bind(this));return e.length?e[0].value.ev(t):(t.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),t}(),hT.Tree.Zoom=function(){function t(e,r,n){uT(this,t),this.op=e,this.value=r,this.index=n}return fT(t,[{key:"setZoom",value:function(t){return this.zoom=t,this}},{key:"ev",value:function(t){var e=parseInt(this.value.ev(t).toString(),10);switch((e>hT.Tree.Zoom.maxZoom||e<0)&&t.error({message:"Only zoom levels between 0 and "+hT.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+e,this;case">":this.zoom="zoom && zoom > "+e;break;case">=":this.zoom="zoom && zoom >= "+e;break;case"<":this.zoom="zoom && zoom < "+e;break;case"<=":this.zoom="zoom && zoom <= "+e}return this}},{key:"toString",value:function(){for(var t="",e=0;e<=hT.Tree.Zoom.maxZoom;e++)t+=this.zoom&1<<e?"X":".";return t}}]),t}(),hT.Tree.Zoom.all=23,hT.Tree.Zoom.maxZoom=22,hT.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};var dT=function(t,e,r){return e&&yT(t.prototype,e),r&&yT(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,dt.extend(this,e)});function bT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var vT=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&bT(e.prototype,r),n&&bT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function mT(t){"@babel/helpers - typeof";return(mT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wT(){return(wT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ST(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _T(t,e){return(_T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ST(t);if(e){var o=ST(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===mT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ST(t){return(ST=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var xT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_T(t,e)}(i,vT);var e,r,n,o=OT(i);function i(t,e){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(r=o.call(this,t,e)).x=isNaN(t)?0:t,r.y=isNaN(e)?0:e,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,wT(ST(i.prototype),"destroy",this).call(this)}}])&&gT(e.prototype,r),n&&gT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function PT(t){"@babel/helpers - typeof";return(PT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ET(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function kT(){return(kT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=CT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function jT(t,e){return(jT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function TT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=CT(t);if(e){var o=CT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===PT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function CT(t){return(CT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var AT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&jT(t,e)}(i,vT);var e,r,n,o=TT(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).pointList=t,e.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",e}return e=i,(r=[{key:"destroy",value:function(){this.pointList=null,kT(CT(i.prototype),"destroy",this).call(this)}}])&&ET(e.prototype,r),n&&ET(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function MT(t){"@babel/helpers - typeof";return(MT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function RT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function LT(){return(LT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=DT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function NT(t,e){return(NT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function IT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DT(t);if(e){var o=DT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===MT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DT(t){return(DT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NT(t,e)}(i,vT);var e,r,n,o=IT(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).pointList=t,e.holePolygonPointLists=null,e.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",e}return e=i,(r=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,LT(DT(i.prototype),"destroy",this).call(this)}}])&&RT(e.prototype,r),n&&RT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function BT(t){"@babel/helpers - typeof";return(BT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function UT(){return(UT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=JT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function zT(t,e){return(zT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function VT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=JT(t);if(e){var o=JT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===BT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function JT(t){return(JT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var qT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zT(t,e)}(i,vT);var e,r,n,o=VT(i);function i(t,e,r,n){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(a=o.call(this,t,e,r,n)).x=isNaN(t)?0:t,a.y=isNaN(t)?0:e,a.width=isNaN(r)?0:r,a.height=isNaN(n)?0:n,a.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",a}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,UT(JT(i.prototype),"destroy",this).call(this)}}])&&GT(e.prototype,r),n&&GT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function HT(t){"@babel/helpers - typeof";return(HT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WT(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YT(){return(YT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ZT(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function XT(t,e){return(XT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function QT(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ZT(t);if(e){var o=ZT(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===HT(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function ZT(t){return(ZT=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var KT=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&XT(t,e)}(i,vT);var e,r,n,o=QT(i);function i(t,e,r,n,a,s,l){var u;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(u=o.call(this,t,e,r,n,a,s,l)).x=isNaN(t)?0:t,u.y=isNaN(e)?0:e,u.r=isNaN(r)?0:r,u.startAngle=isNaN(n)?0:n,u.endAngle=isNaN(a)?0:a,u.r0=isNaN(s)?0:s,u.clockWise=l,u.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",u}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,YT(ZT(i.prototype),"destroy",this).call(this)}}])&&WT(e.prototype,r),n&&WT(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $T(t){"@babel/helpers - typeof";return($T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function tC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function eC(){return(eC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=oC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function rC(t,e){return(rC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function nC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=oC(t);if(e){var o=oC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===$T(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function oC(t){return(oC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var iC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&rC(t,e)}(i,vT);var e,r,n,o=nC(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).x=t,n.y=e,n.text=r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",n}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,eC(oC(i.prototype),"destroy",this).call(this)}}])&&tC(e.prototype,r),n&&tC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function aC(t){"@babel/helpers - typeof";return(aC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function sC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lC(){return(lC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function uC(t,e){return(uC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fC(t);if(e){var o=fC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===aC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fC(t){return(fC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uC(t,e)}(i,vT);var e,r,n,o=cC(i);function i(t,e,r,n,a,s,l,u,c){var f;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(f=o.call(this,t,e,r,n,a,s,l,u,c)).x=t,f.y=e,f.image=r,f.width=n,f.height=a,f.sx=s,f.sy=l,f.sWidth=u,f.sHeight=c,f.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",f}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,lC(fC(i.prototype),"destroy",this).call(this)}}])&&sC(e.prototype,r),n&&sC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function pC(t){"@babel/helpers - typeof";return(pC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function dC(){return(dC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=mC(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function bC(t,e){return(bC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function vC(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=mC(t);if(e){var o=mC(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===pC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function mC(t){return(mC=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var gC=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bC(t,e)}(i,vT);var e,r,n,o=vC(i);function i(t,e,r){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).x=isNaN(t)?0:t,n.y=isNaN(e)?0:e,n.r=isNaN(r)?0:r,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",n}return e=i,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,dC(mC(i.prototype),"destroy",this).call(this)}}])&&yC(e.prototype,r),n&&yC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function wC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var _C=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!0,ctx:r||this}),this):this}},{key:"bind",value:function(t,e,r){var n=this._handlers;return e&&t?(n[t]||(n[t]=[]),n[t].push({h:e,one:!1,ctx:r||this}),this):this}},{key:"unbind",value:function(t,e){var r=this._handlers;if(!t)return this._handlers={},this;if(e){if(r[t]){for(var n=[],o=0,i=r[t].length;o<i;o++)r[t][o].h!=e&&n.push(r[t][o]);r[t]=n}r[t]&&0===r[t].length&&delete r[t]}else delete r[t];return this}},{key:"dispatch",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>3&&(e=Array.prototype.slice.call(e,1));for(var n=this._handlers[t],o=n.length,i=0;i<o;){switch(r){case 1:n[i].h.call(n[i].ctx);break;case 2:n[i].h.call(n[i].ctx,e[1]);break;case 3:n[i].h.call(n[i].ctx,e[1],e[2]);break;default:n[i].h.apply(n[i].ctx,e)}n[i].one?(n.splice(i,1),o--):i++}}return this}},{key:"dispatchWithContext",value:function(t){if(this._handlers[t]){var e=arguments,r=e.length;r>4&&(e=Array.prototype.slice.call(e,1,e.length-1));for(var n=e[e.length-1],o=this._handlers[t],i=o.length,a=0;a<i;){switch(r){case 1:o[a].h.call(n);break;case 2:o[a].h.call(n,e[1]);break;case 3:o[a].h.call(n,e[1],e[2]);break;default:o[a].h.apply(n,e)}o[a].one?(o.splice(a,1),i--):a++}}return this}}])&&wC(e.prototype,r),n&&wC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function OC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var SC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var e,r,n;return e=t,(r=[{key:"create",value:function(t,e){var r=new(0,this.ArrayCtor)(2);return r[0]=t||0,r[1]=e||0,r}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t}},{key:"set",value:function(t,e,r){return t[0]=e,t[1]=r,t}},{key:"add",value:function(t,e,r){return t[0]=e[0]+r[0],t[1]=e[1]+r[1],t}},{key:"scaleAndAdd",value:function(t,e,r,n){return t[0]=e[0]+r[0]*n,t[1]=e[1]+r[1]*n,t}},{key:"sub",value:function(t,e,r){return t[0]=e[0]-r[0],t[1]=e[1]-r[1],t}},{key:"len",value:function(t){return Math.sqrt(this.lenSquare(t))}},{key:"lenSquare",value:function(t){return t[0]*t[0]+t[1]*t[1]}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0],t[1]=e[1]*r[1],t}},{key:"div",value:function(t,e,r){return t[0]=e[0]/r[0],t[1]=e[1]/r[1],t}},{key:"dot",value:function(t,e){return t[0]*e[0]+t[1]*e[1]}},{key:"scale",value:function(t,e,r){return t[0]=e[0]*r,t[1]=e[1]*r,t}},{key:"normalize",value:function(t,e){var r=this.len(e);return 0===r?(t[0]=0,t[1]=0):(t[0]=e[0]/r,t[1]=e[1]/r),t}},{key:"distance",value:function(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}},{key:"distanceSquare",value:function(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}},{key:"negate",value:function(t,e){return t[0]=-e[0],t[1]=-e[1],t}},{key:"lerp",value:function(t,e,r,n){return t[0]=e[0]+n*(r[0]-e[0]),t[1]=e[1]+n*(r[1]-e[1]),t}},{key:"applyTransform",value:function(t,e,r){var n=e[0],o=e[1];return t[0]=r[0]*n+r[2]*o+r[4],t[1]=r[1]*n+r[3]*o+r[5],t}},{key:"min",value:function(t,e,r){return t[0]=Math.min(e[0],r[0]),t[1]=Math.min(e[1],r[1]),t}},{key:"max",value:function(t,e,r){return t[0]=Math.max(e[0],r[0]),t[1]=Math.max(e[1],r[1]),t}},{key:"length",value:function(t){return this.len(t)}},{key:"lengthSquare",value:function(t){return this.lenSquare(t)}},{key:"dist",value:function(t,e){return this.distance(t,e)}},{key:"distSquare",value:function(t,e){return this.distanceSquare(t,e)}}])&&OC(e.prototype,r),n&&OC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var PC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vector=new SC,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var e,r,n;return e=t,(r=[{key:"isAroundZero",value:function(t){return t>-this.EPSILON&&t<this.EPSILON}},{key:"isNotAroundZero",value:function(t){return t>this.EPSILON||t<-this.EPSILON}},{key:"cubicAt",value:function(t,e,r,n,o){var i=1-o;return i*i*(i*t+3*o*e)+o*o*(o*n+3*i*r)}},{key:"cubicDerivativeAt",value:function(t,e,r,n,o){var i=1-o;return 3*(((e-t)*i+2*(r-e)*o)*i+(n-r)*o*o)}},{key:"cubicRootAt",value:function(t,e,r,n,o,i){var a=n+3*(e-r)-t,s=3*(r-2*e+t),l=3*(e-t),u=t-o,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))i[0]=0;else{var y=-l/s;y>=0&&y<=1&&(i[p++]=y)}else{var d=f*f-4*c*h;if(this.isAroundZero(d)){var b=f/c,v=-s/a+b,m=-b/2;v>=0&&v<=1&&(i[p++]=v),m>=0&&m<=1&&(i[p++]=m)}else if(d>0){var g=Math.sqrt(d),w=c*s+1.5*a*(-f+g),_=c*s+1.5*a*(-f-g),O=(-s-((w=w<0?-Math.pow(-w,this.ONE_THIRD):Math.pow(w,this.ONE_THIRD))+(_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))))/(3*a);O>=0&&O<=1&&(i[p++]=O)}else{var S=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),x=Math.acos(S)/3,P=Math.sqrt(c),E=Math.cos(x),k=(-s-2*P*E)/(3*a),j=(-s+P*(E+this.THREE_SQRT*Math.sin(x)))/(3*a),T=(-s+P*(E-this.THREE_SQRT*Math.sin(x)))/(3*a);k>=0&&k<=1&&(i[p++]=k),j>=0&&j<=1&&(i[p++]=j),T>=0&&T<=1&&(i[p++]=T)}}return p}},{key:"cubicExtrema",value:function(t,e,r,n,o){var i=6*r-12*e+6*t,a=9*e+3*n-3*t-9*r,s=3*e-3*t,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(i)){var u=-s/i;u>=0&&u<=1&&(o[l++]=u)}}else{var c=i*i-4*a*s;if(this.isAroundZero(c))o[0]=-i/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-i+f)/(2*a),p=(-i-f)/(2*a);h>=0&&h<=1&&(o[l++]=h),p>=0&&p<=1&&(o[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(t,e,r,n,o,i){var a=(e-t)*o+t,s=(r-e)*o+e,l=(n-r)*o+r,u=(s-a)*o+a,c=(l-s)*o+s,f=(c-u)*o+u;i[0]=t,i[1]=a,i[2]=u,i[3]=f,i[4]=f,i[5]=c,i[6]=l,i[7]=n}},{key:"cubicProjectPoint",value:function(t,e,r,n,o,i,a,s,l,u,c){var f,h=this.vector.create(),p=this.vector.create(),y=this.vector.create(),d=.005,b=1/0;h[0]=l,h[1]=u;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(t,r,o,a,v),p[1]=this.cubicAt(e,n,i,s,v);var m=this.vector.distSquare(h,p);m<b&&(f=v,b=m)}b=1/0;for(var g=0;g<32&&!(d<this.EPSILON);g++){var w=f-d,_=f+d;p[0]=this.cubicAt(t,r,o,a,w),p[1]=this.cubicAt(e,n,i,s,w);var O=this.vector.distSquare(p,h);if(w>=0&&O<b)f=w,b=O;else{y[0]=this.cubicAt(t,r,o,a,_),y[1]=this.cubicAt(e,n,i,s,_);var S=this.vector.distSquare(y,h);_<=1&&S<b?(f=_,b=S):d*=.5}}return c&&(c[0]=this.cubicAt(t,r,o,a,f),c[1]=this.cubicAt(e,n,i,s,f)),Math.sqrt(b)}},{key:"quadraticAt",value:function(t,e,r,n){var o=1-n;return o*(o*t+2*n*e)+n*n*r}},{key:"quadraticDerivativeAt",value:function(t,e,r,n){return 2*((1-n)*(e-t)+n*(r-e))}},{key:"quadraticRootAt",value:function(t,e,r,n,o){var i=t-2*e+r,a=2*(e-t),s=t-n,l=0;if(this.isAroundZero(i)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(o[l++]=u)}}else{var c=a*a-4*i*s;if(this.isAroundZero(c)){var f=-a/(2*i);f>=0&&f<=1&&(o[l++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*i),y=(-a-h)/(2*i);p>=0&&p<=1&&(o[l++]=p),y>=0&&y<=1&&(o[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(t,e,r){var n=t+r-2*e;return 0===n?.5:(t-e)/n}},{key:"quadraticProjectPoint",value:function(t,e,r,n,o,i,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(t,r,o,d),f[1]=this.quadraticAt(e,n,i,d);var b=this.vector.distSquare(c,f);b<y&&(u=d,y=b)}y=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var m=u-p,g=u+p;f[0]=this.quadraticAt(t,r,o,m),f[1]=this.quadraticAt(e,n,i,m);var w=this.vector.distSquare(f,c);if(m>=0&&w<y)u=m,y=w;else{h[0]=this.quadraticAt(t,r,o,g),h[1]=this.quadraticAt(e,n,i,g);var _=this.vector.distSquare(h,c);g<=1&&_<y?(u=g,y=_):p*=.5}}return l&&(l[0]=this.quadraticAt(t,r,o,u),l[1]=this.quadraticAt(e,n,i,u)),Math.sqrt(y)}}])&&xC(e.prototype,r),n&&xC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function EC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var kC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.util=new Xj,this.curve=new PC,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var e,r,n;return e=t,(r=[{key:"normalizeRadian",value:function(t){return(t%=this.PI2)<0&&(t+=this.PI2),t}},{key:"isInside",value:function(t,e,r,n){if(!e||!t)return!1;var o=t.type;this._ctx=this._ctx||this.util.getContext();var i=this._mathMethod(t,e,r,n);if(void 0!==i)return i;if(t.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(t,this._ctx,e,r,n);switch(o){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==e.location?e.r1+e.r2+e.d:e.r1-e.r2+e.d;return this.isInsideCircle(e,r,n,a);case"rose":return this.isInsideCircle(e,r,n,e.maxr);default:return!1}}},{key:"_mathMethod",value:function(t,e,r,n){switch(t.type){case"bezier-curve":return void 0===e.cpX2?this.isInsideQuadraticStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.xEnd,e.yEnd,e.lineWidth,r,n):this.isInsideCubicStroke(e.xStart,e.yStart,e.cpX1,e.cpY1,e.cpX2,e.cpY2,e.xEnd,e.yEnd,e.lineWidth,r,n);case"line":return this.isInsideLine(e.xStart,e.yStart,e.xEnd,e.yEnd,e.lineWidth,r,n);case"broken-line":return this.isInsideBrokenLine(e.pointList,e.lineWidth,r,n);case"smicbroken-line":var o=r,i=n;return t.refOriginalPosition&&(o=r-t.refOriginalPosition[0],i=n-t.refOriginalPosition[1]),this.isInsideBrokenLine(e.pointList,e.lineWidth,o,i);case"ring":return this.isInsideRing(e.x,e.y,e.r0,e.r,r,n);case"smicring":var a=e.x,s=e.y;return t.refOriginalPosition&&(a=e.x+t.refOriginalPosition[0],s=e.y+t.refOriginalPosition[1]),this.isInsideRing(a,s,e.r0,e.r,r,n);case"circle":return this.isInsideCircle(e.x,e.y,e.r,r,n);case"smicpoint":var l=r,u=n;return t.refOriginalPosition&&(l=r-t.refOriginalPosition[0],u=n-t.refOriginalPosition[1]),this.isInsideCircle(e.x,e.y,e.r,l,u);case"sector":var c=e.startAngle*Math.PI/180,f=e.endAngle*Math.PI/180;return e.clockWise||(c=-c,f=-f),this.isInsideSector(e.x,e.y,e.r0,e.r,c,f,!e.clockWise,r,n);case"smicsector":var h=e.startAngle*Math.PI/180,p=e.endAngle*Math.PI/180;e.clockWise||(h=-h,p=-p);var y=e.x,d=e.y;return t.refOriginalPosition&&(y=e.x+t.refOriginalPosition[0],d=e.y+t.refOriginalPosition[1]),this.isInsideSector(y,d,e.r0,e.r,h,p,!e.clockWise,r,n);case"path":return this.isInsidePath(e.pathArray,Math.max(e.lineWidth,5),e.brushType,r,n);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(e.pointList,r,n);case"smicpolygon":var b=r,v=n;if(t.refOriginalPosition&&(b=r-t.refOriginalPosition[0],v=n-t.refOriginalPosition[1]),t.holePolygonPointLists&&t.holePolygonPointLists.length>0){for(var m=this.isInsidePolygon(e.pointList,b,v),g=t.holePolygonPointLists,w=!1,_=0,O=g.length;_<O;_++){var S=g[_];!0===this.isInsidePolygon(S,b,v)&&(w=!0)}return!0===m&&!1===w}return this.isInsidePolygon(e.pointList,b,v);case"text":var x=e.__rect||t.getRect(e);return this.isInsideRect(x.x,x.y,x.width,x.height,r,n);case"smictext":var P=t.getTextBackground(e);return this.isInsidePolygon(P,r,n);case"rectangle":case"image":return this.isInsideRect(e.x,e.y,e.width,e.height,r,n);case"smicimage":var E=e.x,k=e.y;return t.refOriginalPosition&&(E=e.x+t.refOriginalPosition[0],k=e.y+t.refOriginalPosition[1]),this.isInsideRect(E,k,e.width,e.height,r,n)}}},{key:"_buildPathMethod",value:function(t,e,r,n,o){return e.beginPath(),t.buildPath(e,r),e.closePath(),e.isPointInPath(n,o)}},{key:"isOutside",value:function(t,e,r,n){return!this.isInside(t,e,r,n)}},{key:"isInsideLine",value:function(t,e,r,n,o,i,a){if(0===o)return!1;var s=Math.max(o,5),l=0;if(a>e+s&&a>n+s||a<e-s&&a<n-s||i>t+s&&i>r+s||i<t-s&&i<r-s)return!1;if(t===r)return Math.abs(i-t)<=s/2;var u=(l=(e-n)/(t-r))*i-a+(t*n-r*e)/(t-r);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(t,e,r,n,o,i,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>e+f&&c>n+f&&c>i+f&&c>s+f||c<e-f&&c<n-f&&c<i-f&&c<s-f||u>t+f&&u>r+f&&u>o+f&&u>a+f||u<t-f&&u<r-f&&u<o-f&&u<a-f)&&this.curve.cubicProjectPoint(t,e,r,n,o,i,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(t,e,r,n,o,i,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>e+u&&l>n+u&&l>i+u||l<e-u&&l<n-u&&l<i-u||s>t+u&&s>r+u&&s>o+u||s<t-u&&s<r-u&&s<o-u)&&this.curve.quadraticProjectPoint(t,e,r,n,o,i,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(t,e,r,n,o,i,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=t,l-=e;var f=Math.sqrt(s*s+l*l);if(f-c>r||f+c<r)return!1;if(Math.abs(n-o)>=u)return!0;if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),p>=n&&p<=o||p+u>=n&&p+u<=o}},{key:"isInsideBrokenLine",value:function(t,e,r,n){for(var o=Math.max(e,10),i=0,a=t.length-1;i<a;i++){var s=t[i][0],l=t[i][1],u=t[i+1][0],c=t[i+1][1];if(this.isInsideLine(s,l,u,c,o,r,n))return!0}return!1}},{key:"isInsideRing",value:function(t,e,r,n,o,i){var a=(o-t)*(o-t)+(i-e)*(i-e);return a<n*n&&a>r*r}},{key:"isInsideRect",value:function(t,e,r,n,o,i){return o>=t&&o<=t+r&&i>=e&&i<=e+n}},{key:"isInsideCircle",value:function(t,e,r,n,o){return(n-t)*(n-t)+(o-e)*(o-e)<r*r}},{key:"isInsideSector",value:function(t,e,r,n,o,i,a,s,l){return this.isInsideArcStroke(t,e,(r+n)/2,o,i,a,n-r,s,l)}},{key:"isInsidePolygon",value:function(t,e,r){for(var n=t.length,o=0,i=0,a=n-1;i<n;i++){var s=t[a][0],l=t[a][1],u=t[i][0],c=t[i][1];o+=this.windingLine(s,l,u,c,e,r),a=i}return 0!==o}},{key:"windingLine",value:function(t,e,r,n,o,i){return i>e&&i>n||i<e&&i<n?0:n==e?0:(i-e)/(n-e)*(r-t)+t>o?n<e?1:-1:0}},{key:"swapExtrema",value:function(){var t=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=t}},{key:"windingCubic",value:function(t,e,r,n,o,i,a,s,l,u){var c=this.curve,f=this.roots,h=this.extrema;if(u>e&&u>n&&u>i&&u>s||u<e&&u<n&&u<i&&u<s)return 0;var p=c.cubicRootAt(e,n,i,s,u,f);if(0===p)return 0;for(var y,d,b=0,v=-1,m=0;m<p;m++){var g=f[m];c.cubicAt(t,r,o,a,g)<l||(v<0&&(v=c.cubicExtrema(e,n,i,s,h),h[1]<h[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(e,n,i,s,h[0]),v>1&&(d=c.cubicAt(e,n,i,s,h[1]))),2==v?g<h[0]?b+=y<e?1:-1:g<h[1]?b+=d<y?1:-1:b+=s<d?1:-1:g<h[0]?b+=y<e?1:-1:b+=s<y?1:-1)}return b}},{key:"windingQuadratic",value:function(t,e,r,n,o,i,a,s){var l=this.curve,u=this.roots;if(s>e&&s>n&&s>i||s<e&&s<n&&s<i)return 0;var c=l.quadraticRootAt(e,n,i,s,u);if(0===c)return 0;var f=l.quadraticExtremum(e,n,i);if(f>=0&&f<=1){for(var h=0,p=l.quadraticAt(e,n,i,f),y=0;y<c;y++){l.quadraticAt(t,r,o,u[y])>a||(u[y]<f?h+=p<e?1:-1:h+=i<p?1:-1)}return h}return l.quadraticAt(t,r,o,u[0])>a?0:i<e?1:-1}},{key:"windingArc",value:function(t,e,r,n,o,i,a,s){var l=this.roots,u=this.PI2;if((s-=e)>r||s<-r)return 0;var c=Math.sqrt(r*r-s*s);if(l[0]=-c,l[1]=c,Math.abs(n-o)>=u){n=0,o=u;var f=i?1:-1;return a>=l[0]+t&&a<=l[1]+t?f:0}if(i){var h=n;n=this.normalizeRadian(o),o=this.normalizeRadian(h)}else n=this.normalizeRadian(n),o=this.normalizeRadian(o);n>o&&(o+=u);for(var p=0,y=0;y<2;y++){var d=l[y];if(d+t>a){var b=Math.atan2(s,d),v=i?1:-1;b<0&&(b=u+b),(b>=n&&b<=o||b+u>=n&&b+u<=o)&&(b>Math.PI/2&&b<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(t,e,r,n,o){for(var i=0,a=0,s=0,l=0,u=0,c=!0,f=!0,h="stroke"===(r=r||"fill")||"both"===r,p="fill"===r||"both"===r,y=0;y<t.length;y++){var d=t[y],b=d.points;if(c||"M"===d.command){if(y>0&&(p&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i))return!0;l=b[b.length-2],u=b[b.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=l,s=u)}switch(d.command){case"M":a=b[0],s=b[1];break;case"L":if(h&&this.isInsideLine(a,s,b[0],b[1],e,n,o))return!0;p&&(i+=this.windingLine(a,s,b[0],b[1],n,o)),a=b[0],s=b[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,b[0],b[1],b[2],b[3],b[4],b[5],e,n,o))return!0;p&&(i+=this.windingCubic(a,s,b[0],b[1],b[2],b[3],b[4],b[5],n,o)),a=b[4],s=b[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,b[0],b[1],b[2],b[3],e,n,o))return!0;p&&(i+=this.windingQuadratic(a,s,b[0],b[1],b[2],b[3],n,o)),a=b[2],s=b[3];break;case"A":var v=b[0],m=b[1],g=b[2],w=b[3],_=b[4],O=b[5],S=Math.cos(_)*g+v,x=Math.sin(_)*w+m;f?(f=!1,l=S,u=x):i+=this.windingLine(a,s,S,x);var P=(n-v)*w/g+v;if(h&&this.isInsideArcStroke(v,m,w,_,_+O,1-b[7],e,P,o))return!0;p&&(i+=this.windingArc(v,m,w,_,_+O,1-b[7],P,o)),a=Math.cos(_+O)*g+v,s=Math.sin(_+O)*w+m;break;case"z":if(h&&this.isInsideLine(a,s,l,u,e,n,o))return!0;c=!0}}return p&&(i+=this.windingLine(a,s,l,u,n,o)),0!==i}},{key:"getTextWidth",value:function(t,e){var r=t+":"+e;if(this._textWidthCache[r])return this._textWidthCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e);for(var n=0,o=0,i=(t=(t+"").split("\n")).length;o<i;o++)n=Math.max(this._ctx.measureText(t[o]).width,n);return this._ctx.restore(),this._textWidthCache[r]=n,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),n}},{key:"getTextHeight",value:function(t,e){var r=t+":"+e;if(this._textHeightCache[r])return this._textHeightCache[r];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),e&&(this._ctx.font=e),t=(t+"").split("\n");var n=(this._ctx.measureText("ZH").width+2)*t.length;return this._ctx.restore(),this._textHeightCache[r]=n,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),n}}])&&EC(e.prototype,r),n&&EC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function jC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var TC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var e,r,n;return e=t,(r=[{key:"computeBoundingBox",value:function(t,e,r){if(0!==t.length){for(var n=t[0][0],o=t[0][0],i=t[0][1],a=t[0][1],s=1;s<t.length;s++){var l=t[s];l[0]<n&&(n=l[0]),l[0]>o&&(o=l[0]),l[1]<i&&(i=l[1]),l[1]>a&&(a=l[1])}e[0]=n,e[1]=i,r[0]=o,r[1]=a}}},{key:"cubeBezier",value:function(t,e,r,n,o,i){var a=new PC,s=[];a.cubicExtrema(t[0],e[0],r[0],n[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(t[0],e[0],r[0],n[0],s[l]);var u=[];a.cubicExtrema(t[1],e[1],r[1],n[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(t[1],e[1],r[1],n[1],u[c]);s.push(t[0],n[0]),u.push(t[1],n[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,u),y=Math.max.apply(null,u);o[0]=f,o[1]=p,i[0]=h,i[1]=y}},{key:"quadraticBezier",value:function(t,e,r,n,o){var i=new PC,a=i.quadraticExtremum(t[0],e[0],r[0]),s=i.quadraticExtremum(t[1],e[1],r[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*t[0]+2*l*a*e[0]+a*a*r[0],f=l*l*t[1]+2*l*a*e[1]+a*a*r[1],h=u*u*t[0]+2*u*s*e[0]+s*s*r[0],p=u*u*t[1]+2*u*s*e[1]+s*s*r[1];n[0]=Math.min(t[0],r[0],c,h),n[1]=Math.min(t[1],r[1],f,p),o[0]=Math.max(t[0],r[0],c,h),o[1]=Math.max(t[1],r[1],f,p)}},{key:"arc",value:function(t,e,r,n,o,i,a,s){var l=new SC,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(n)*r+t,u[1]=Math.sin(n)*r+e,c[0]=Math.cos(o)*r+t,c[1]=Math.sin(o)*r+e,l.min(a,u,c),l.max(s,u,c),(n%=2*Math.PI)<0&&(n+=2*Math.PI),(o%=2*Math.PI)<0&&(o+=2*Math.PI),n>o&&!i?o+=2*Math.PI:n<o&&i&&(n+=2*Math.PI),i){var h=o;o=n,n=h}for(var p=0;p<o;p+=Math.PI/2)p>n&&(f[0]=Math.cos(p)*r+t,f[1]=Math.sin(p)*r+e,l.min(a,f,a),l.max(s,f,s))}}])&&jC(e.prototype,r),n&&jC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function CC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var AC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var e,r,n,o,i,a,s,l,u,c,f,h,p,y,d,b,v,m,g,w,_,O=this;return e=navigator.userAgent,r=O.os={},n=O.browser={},o=e.match(/Web[kK]it[\/]{0,1}([\d.]+)/),i=e.match(/(Android);?[\s\/]+([\d.]+)?/),a=e.match(/(iPad).*OS\s([\d_]+)/),s=e.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&e.match(/(iPhone\sOS)\s([\d_]+)/),u=e.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&e.match(/TouchPad/),f=e.match(/Kindle\/([\d.]+)/),h=e.match(/Silk\/([\d._]+)/),p=e.match(/(BlackBerry).*Version\/([\d.]+)/),y=e.match(/(BB10).*Version\/([\d.]+)/),d=e.match(/(RIM\sTablet\sOS)\s([\d.]+)/),b=e.match(/PlayBook/),v=e.match(/Chrome\/([\d.]+)/)||e.match(/CriOS\/([\d.]+)/),m=e.match(/Firefox\/([\d.]+)/),g=e.match(/MSIE ([\d.]+)/),w=o&&e.match(/Mobile\//)&&!v,_=e.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(n.webkit=!!o)&&(n.version=o[1]),i&&(r.android=!0,r.version=i[2]),l&&!s&&(r.ios=r.iphone=!0,r.version=l[2].replace(/_/g,".")),a&&(r.ios=r.ipad=!0,r.version=a[2].replace(/_/g,".")),s&&(r.ios=r.ipod=!0,r.version=s[3]?s[3].replace(/_/g,"."):null),u&&(r.webos=!0,r.version=u[2]),c&&(r.touchpad=!0),p&&(r.blackberry=!0,r.version=p[2]),y&&(r.bb10=!0,r.version=y[2]),d&&(r.rimtabletos=!0,r.version=d[2]),b&&(n.playbook=!0),f&&(r.kindle=!0,r.version=f[1]),h&&(n.silk=!0,n.version=h[1]),!h&&r.android&&e.match(/Kindle Fire/)&&(n.silk=!0),v&&(n.chrome=!0,n.version=v[1]),m&&(n.firefox=!0,n.version=m[1]),g&&(n.ie=!0,n.version=g[1]),w&&(e.match(/Safari/)||r.ios)&&(n.safari=!0),_&&(n.webview=!0),g&&(n.ie=!0,n.version=g[1]),r.tablet=!!(a||b||i&&!e.match(/Mobile/)||m&&e.match(/Tablet/)||g&&!e.match(/Phone/)&&e.match(/Touch/)),r.phone=!(r.tablet||r.ipod||!(i||l||u||p||y||v&&e.match(/Android/)||v&&e.match(/CriOS\/([\d.]+)/)||m&&e.match(/Mobile/)||g&&e.match(/Touch/))),{browser:n,os:r,canvasSupported:!!document.createElement("canvas").getContext}}var e,r,n;return e=t,(r=[{key:"destory",value:function(){return!0}}])&&CC(e.prototype,r),n&&CC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function MC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var RC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stop="function"==typeof window.addEventListener?function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0}:function(t){t.returnValue=!1,t.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var e,r,n;return e=t,(r=[{key:"getX",value:function(t){return void 0!==t.zrenderX&&t.zrenderX||void 0!==t.offsetX&&t.offsetX||void 0!==t.layerX&&t.layerX||void 0!==t.clientX&&t.clientX}},{key:"getY",value:function(t){return void 0!==t.zrenderY&&t.zrenderY||void 0!==t.offsetY&&t.offsetY||void 0!==t.layerY&&t.layerY||void 0!==t.clientY&&t.clientY}},{key:"getDelta",value:function(t){return void 0!==t.zrenderDelta&&t.zrenderDelta||void 0!==t.wheelDelta&&t.wheelDelta||void 0!==t.detail&&-t.detail}}])&&MC(e.prototype,r),n&&MC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function LC(t){"@babel/helpers - typeof";return(LC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function NC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var IC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var e,r,n;return e=t,(r=[{key:"get",value:function(t,e,r){if("object"===LC(t)){var n=t;t=n.url,e=n.onsuccess,r=n.onerror}var o=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");o.open("GET",t,!0),o.onreadystatechange=function(){4==o.readyState&&(o.status>=200&&o.status<300||304===o.status?e&&e(o.responseText):r&&r(),o.onreadystatechange=new Function,o=null)},o.send(null)}}])&&NC(e.prototype,r),n&&NC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function DC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var FC=function(t,e,r){return e&&DC(t.prototype,e),r&&DC(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)});function BC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}FC.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},FC.catchBrushException=!1,FC.debugMode=0;var GC=function(){function t(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!=+FC.debugMode)if(1==+FC.debugMode)for(var t in arguments)throw new Error(arguments[t]);else if(+FC.debugMode>1)for(var e in arguments)console.log(arguments[e])}}var e,r,n;return e=t,(r=[{key:"destory",value:function(){return!0}}])&&BC(e.prototype,r),n&&BC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function UC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var e,r,n;return e=t,(r=[{key:"sin",value:function(t,e){return window.Math.sin(e?t*this._radians:t)}},{key:"cos",value:function(t,e){return window.Math.cos(e?t*this._radians:t)}},{key:"degreeToRadian",value:function(t){return t*this._radians}},{key:"radianToDegree",value:function(t){return t/this._radians}}])&&UC(e.prototype,r),n&&UC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function VC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var JC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var e,r,n;return e=t,(r=[{key:"create",value:function(){var t=new(0,this.ArrayCtor)(6);return this.identity(t),t}},{key:"identity",value:function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}},{key:"copy",value:function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}},{key:"mul",value:function(t,e,r){return t[0]=e[0]*r[0]+e[2]*r[1],t[1]=e[1]*r[0]+e[3]*r[1],t[2]=e[0]*r[2]+e[2]*r[3],t[3]=e[1]*r[2]+e[3]*r[3],t[4]=e[0]*r[4]+e[2]*r[5]+e[4],t[5]=e[1]*r[4]+e[3]*r[5]+e[5],t}},{key:"translate",value:function(t,e,r){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+r[0],t[5]=e[5]+r[1],t}},{key:"rotate",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],l=e[5],u=Math.sin(r),c=Math.cos(r);return t[0]=n*c+a*u,t[1]=-n*u+a*c,t[2]=o*c+s*u,t[3]=-o*u+c*s,t[4]=c*i+u*l,t[5]=c*l-u*i,t}},{key:"scale",value:function(t,e,r){var n=r[0],o=r[1];return t[0]=e[0]*n,t[1]=e[1]*o,t[2]=e[2]*n,t[3]=e[3]*o,t[4]=e[4]*n,t[5]=e[5]*o,t}},{key:"invert",value:function(t,e){var r=e[0],n=e[2],o=e[4],i=e[1],a=e[3],s=e[5],l=r*a-i*n;return l?(l=1/l,t[0]=a*l,t[1]=-i*l,t[2]=-n*l,t[3]=r*l,t[4]=(n*s-a*o)*l,t[5]=(i*o-r*s)*l,t):null}},{key:"mulVector",value:function(t,e,r){var n=e[0],o=e[2],i=e[4],a=e[1],s=e[3],l=e[5];return t[0]=r[0]*n+r[1]*o+i,t[1]=r[0]*a+r[1]*s+l,t}}])&&VC(e.prototype,r),n&&VC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function qC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var HC=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"SUtil_smoothBezier",value:function(e,r,n,o,i){i&&2===i.length||(i=[0,0]);var a,s,l=i,u=[],c=[],f=[],h=[],p=!!o;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=e.length,d=0;d<y;d++)t.Util_vector.min(a,a,[e[d][0]+l[0],e[d][1]+l[1]]),t.Util_vector.max(s,s,[e[d][0]+l[0],e[d][1]+l[1]]);t.Util_vector.min(a,a,o[0]),t.Util_vector.max(s,s,o[1])}for(var b=e.length,v=0;v<b;v++){var m=[e[v][0]+l[0],e[v][1]+l[1]],g=void 0,w=void 0;if(n)g=[e[v?v-1:b-1][0]+l[0],e[v?v-1:b-1][1]+l[1]],w=[e[(v+1)%b][0]+l[0],e[(v+1)%b][1]+l[1]];else{if(0===v||v===b-1){u.push([e[v][0]+l[0],e[v][1]+l[1]]);continue}g=[e[v-1][0]+l[0],e[v-1][1]+l[1]],w=[e[v+1][0]+l[0],e[v+1][1]+l[1]]}t.Util_vector.sub(c,w,g),t.Util_vector.scale(c,c,r);var _=t.Util_vector.distance(m,g),O=t.Util_vector.distance(m,w),S=_+O;0!==S&&(_/=S,O/=S),t.Util_vector.scale(f,c,-_),t.Util_vector.scale(h,c,O);var x=t.Util_vector.add([],m,f),P=t.Util_vector.add([],m,h);p&&(t.Util_vector.max(x,x,a),t.Util_vector.min(x,x,s),t.Util_vector.max(P,P,a),t.Util_vector.min(P,P,s)),u.push(x),u.push(P)}return n&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(e,r,n,o){o&&2===o.length||(o=[0,0]);for(var i=o,a=e.length,s=[],l=0,u=1;u<a;u++)l+=t.Util_vector.distance([e[u-1][0]+i[0],e[u-1][1]+i[1]],[e[u][0]+i[0],e[u][1]+i[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(r?a:a-1),p=Math.floor(h),y=h-p,d=void 0,b=[e[p%a][0]+i[0],e[p%a][1]+i[1]],v=void 0,m=void 0;r?(d=[e[(p-1+a)%a][0]+i[0],e[(p-1+a)%a][1]+i[1]],v=[e[(p+1)%a][0]+i[0],e[(p+1)%a][1]+i[1]],m=[e[(p+2)%a][0]+i[0],e[(p+2)%a][1]+i[1]]):(d=[e[0===p?p:p-1][0]+i[0],e[0===p?p:p-1][1]+i[1]],v=[e[p>a-2?a-1:p+1][0]+i[0],e[p>a-2?a-1:p+1][1]+i[1]],m=[e[p>a-3?a-1:p+2][0]+i[0],e[p>a-3?a-1:p+2][1]+i[1]]);var g=y*y,w=y*g;s.push([_(d[0],b[0],v[0],m[0],y,g,w),_(d[1],b[1],v[1],m[1],y,g,w)])}return s;function _(t,e,r,n,o,i,a){var s=.5*(r-t),l=.5*(n-e);return(2*(e-r)+s+l)*a+(-3*(e-r)-2*s-l)*i+s*o+e}}},{key:"SUtil_dashedLineTo",value:function(t,e,r,n,o,i,a){var s=[5,5];if(i="number"!=typeof i?5:i,t.setLineDash)return s[0]=i,s[1]=i,a&&a instanceof Array?t.setLineDash(a):t.setLineDash(s),t.moveTo(e,r),void t.lineTo(n,o);var l=n-e,u=o-r,c=Math.floor(Math.sqrt(l*l+u*u)/i);l/=c,u/=c;for(var f=!0,h=0;h<c;++h)f?t.moveTo(e,r):t.lineTo(e,r),f=!f,e+=l,r+=u;t.lineTo(n,o)}}],(r=null)&&qC(e.prototype,r),n&&qC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function WC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}HC.Util_area=new kC,HC.Util_color=new Zj,HC.Util_computeBoundingBox=new TC,HC.Util_curve=new PC,HC.Util_env=new AC,HC.Util_event=new RC,HC.Util_http=new IC,HC.Util_log=new GC,HC.Util_math=new zC,HC.Util_matrix=new JC,HC.Util=new Xj,HC.Util_vector=new SC;var YC=function(){function t(){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(e=HC.Util_vector.create(),function(t){this.transform||(this.transform=HC.Util_matrix.create());var r=this.transform;function n(t){return t>-5e-5&&t<5e-5}HC.Util_vector.sub(e,t,this.position),n(e[0])&&n(e[1])||(HC.Util_vector.normalize(e,e),r[2]=e[0]*this.scale[1],r[3]=e[1]*this.scale[1],r[0]=e[1]*this.scale[0],r[1]=-e[0]*this.scale[0],r[4]=this.position[0],r[5]=this.position[1],this.decomposeTransform())})}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function t(t){return t>5e-5||t<-5e-5}this.needLocalTransform=t(this.rotation[0])||t(this.position[0])||t(this.position[1])||t(this.scale[0]-1)||t(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var t=[0,0],e=this.transform||HC.Util_matrix.create();if(HC.Util_matrix.identity(e),this.needLocalTransform){if(o(this.scale[0])||o(this.scale[1])){t[0]=-this.scale[2]||0,t[1]=-this.scale[3]||0;var r=o(t[0])||o(t[1]);r&&HC.Util_matrix.translate(e,e,t),HC.Util_matrix.scale(e,e,this.scale),r&&(t[0]=-t[0],t[1]=-t[1],HC.Util_matrix.translate(e,e,t))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){t[0]=-this.rotation[1]||0,t[1]=-this.rotation[2]||0;var n=o(t[0])||o(t[1]);n&&HC.Util_matrix.translate(e,e,t),HC.Util_matrix.rotate(e,e,this.rotation[0]),n&&(t[0]=-t[0],t[1]=-t[1],HC.Util_matrix.translate(e,e,t))}}else 0!=+this.rotation&&HC.Util_matrix.rotate(e,e,this.rotation);(o(this.position[0])||o(this.position[1]))&&HC.Util_matrix.translate(e,e,this.position)}this.transform=e,this.parent&&this.parent.needTransform&&(this.needLocalTransform?HC.Util_matrix.mul(this.transform,this.parent.transform,this.transform):HC.Util_matrix.copy(this.transform,this.parent.transform))}function o(t){return t>5e-5||t<-5e-5}}},{key:"setTransform",value:function(t){if(this.needTransform){var e=this.transform;t.transform(e[0],e[1],e[2],e[3],e[4],e[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var t=this.transform,e=t[0]*t[0]+t[1]*t[1],r=this.position,n=this.scale,o=this.rotation;a(e-1)&&(e=Math.sqrt(e));var i=t[2]*t[2]+t[3]*t[3];a(i-1)&&(i=Math.sqrt(i)),r[0]=t[4],r[1]=t[5],n[0]=e,n[1]=i,n[2]=n[3]=0,o[0]=Math.atan2(-t[1]/i,t[0]/e),o[1]=o[2]=0}function a(t){return t>5e-5||t<-5e-5}}}])&&WC(e.prototype,r),n&&WC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function XC(t){"@babel/helpers - typeof";return(XC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function QC(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function ZC(){return(ZC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=eA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function KC(t,e){return(KC=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function $C(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eA(t);if(e){var o=eA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===XC(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return tA(t)}(this,r)}}function tA(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function eA(t){return(eA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&KC(t,e)}(i,Z(_C,YC));var e,r,n,o=$C(i);function i(t){var e,r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t=t||{},e.id=null,e.style={},e.highlightStyle=null,e.parent=null,e.__dirty=!0,e.__clipShapes=[],e.invisible=!1,e.ignore=!1,e.zlevel=0,e.draggable=!1,e.clickable=!1,e.hoverable=!0,e.z=0,e.refOriginalPosition=[0,0],e.refDataID=null,e.isHoverByRefDataID=!1,e.refDataHoverGroup=null,e.dataInfo=null,dt.extend(tA(e),t),e.id=e.id||dt.createUniqueID("smShape_"),e.CLASS_NAME="SuperMap.LevelRenderer.Shape",e.getTansform=(r=[],function(t,e){var n=[t,e];return this.needTransform&&this.transform&&(HC.Util_matrix.invert(r,this.transform),HC.Util_matrix.mulVector(n,r,[t,e,1]),t==n[0]&&e==n[1]&&this.updateNeedTransform()),n}),e}return e=i,n=[{key:"_fillText",value:function(t,e,r,n,o,a,s){o&&(t.font=o),t.textAlign=a,t.textBaseline=s;var l=i._getTextRect(e,r,n,o,a,s);e=(e+"").split("\n");var u=HC.Util_area.getTextHeight("ZH",o);switch(s){case"top":n=l.y;break;case"bottom":n=l.y+u;break;default:n=l.y+u/2}for(var c=0,f=e.length;c<f;c++)t.fillText(e[c],r,n),n+=u}},{key:"_getTextRect",value:function(t,e,r,n,o,i){var a=HC.Util_area.getTextWidth(t,n),s=HC.Util_area.getTextHeight("ZH",n);switch(t=(t+"").split("\n"),o){case"end":case"right":e-=a;break;case"center":e-=a/2}switch(i){case"top":break;case"bottom":r-=s*t.length;break;default:r-=s*t.length/2}return{x:e,y:r,width:a,height:s*t.length}}}],(r=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,ZC(eA(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){var r=this.beforeBrush(t,e);switch(t.beginPath(),this.buildPath(t,r),r.brushType){case"both":this.setCtxGlobalAlpha(t,"fill",r),t.fill(),r.lineWidth>0&&(this.setCtxGlobalAlpha(t,"stroke",r),t.stroke()),this.setCtxGlobalAlpha(t,"reset",r);break;case"stroke":this.setCtxGlobalAlpha(t,"stroke",r),r.lineWidth>0&&t.stroke(),this.setCtxGlobalAlpha(t,"reset",r);break;default:this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)}this.drawText(t,r,this.style),this.afterBrush(t)}},{key:"beforeBrush",value:function(t,e){var r=this.style;return this.brushTypeOnly&&(r.brushType=this.brushTypeOnly),e&&(r=this.getHighlightStyle(r,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(r.strokeColor=r.strokeColor||r.color),t.save(),this.doClip(t),this.setContext(t,r),this.setTransform(t),r}},{key:"afterBrush",value:function(t){t.restore()}},{key:"setContext",value:function(t,e){for(var r=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],n=0,o=r.length;n<o;n++){var i=e[r[n][0]],a=r[n][1];void 0!==i&&(t[a]=i)}}},{key:"doClip",value:function(t){var e=HC.Util_matrix.create();if(this.__clipShapes)for(var r=0;r<this.__clipShapes.length;r++){var n=this.__clipShapes[r];if(n.needTransform){var o=n.transform;HC.Util_matrix.invert(e,o),t.transform(o[0],o[1],o[2],o[3],o[4],o[5])}if(t.beginPath(),n.buildPath(t,n.style),t.clip(),n.needTransform){var i=e;t.transform(i[0],i[1],i[2],i[3],i[4],i[5])}}}},{key:"getHighlightStyle",value:function(t,e,r){var n={};for(var o in t)n[o]=t[o];var i=HC.Util_color.getHighlightColor();for(var a in"stroke"!=t.brushType?(n.strokeColor=i,n.lineWidth=t.lineWidth||1,n.brushType="both"):"stroke"!=r?(n.strokeColor=i,n.lineWidth=t.lineWidth||1):n.strokeColor=e.strokeColor||HC.Util_color.mix(t.strokeColor,HC.Util_color.toRGB(i)),e)void 0!==e[a]&&(n[a]=e[a]);return n}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(t,e){this.position[0]+=t,this.position[1]+=e}},{key:"buildPath",value:function(t,e){HC.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(t){HC.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(t,e){var r=this.getTansform(t,e);t=r[0],e=r[1];var n=this.style.__rect;return n||(n=this.style.__rect=this.getRect(this.style)),t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height&&HC.Util_area.isInside(this,this.style,t,e)}},{key:"drawText",value:function(t,e,r){if(void 0!==e.text&&!1!==e.text){var n=e.textColor||e.color||e.strokeColor;t.fillStyle=n;var o,a,s,l,u=10,c=e.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(r||e).__rect||this.getRect(r||e);switch(c){case"inside":s=h.x+h.width/2,l=h.y+h.height/2,o="center",a="middle","stroke"!=e.brushType&&n==e.color&&(t.fillStyle="#fff");break;case"left":s=h.x-u,l=h.y+h.height/2,o="end",a="middle";break;case"right":s=h.x+h.width+u,l=h.y+h.height/2,o="start",a="middle";break;case"top":s=h.x+h.width/2,l=h.y-u,o="center",a="bottom";break;case"bottom":s=h.x+h.width/2,l=h.y+h.height+u,o="center",a="top"}}break;case"start":case"end":var p=0,y=0,d=0,b=0;if(void 0!==e.pointList){var v=e.pointList;if(v.length<2)return;var m=v.length;switch(c){case"start":p=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],b=v[1][1]+f[1];break;case"end":p=v[m-2][0]+f[0],y=v[m-1][0]+f[0],d=v[m-2][1]+f[1],b=v[m-1][1]+f[1]}}else p=e.xStart+f[0]||0,y=e.xEnd+f[0]||0,d=e.yStart+f[1]||0,b=e.yEnd+f[1]||0;switch(c){case"start":o=p<y?"end":"start",a=d<b?"bottom":"top",s=p,l=d;break;case"end":o=p<y?"start":"end",a=d<b?"top":"bottom",s=y,l=b}u-=4,p&&y&&p!=y?s-="end"==o?u:-u:o="center",d!=b?l-="bottom"==a?u:-u:a="middle";break;case"specific":s=e.textX||0,l=e.textY||0,o="start",a="middle"}e.labelXOffset&&!isNaN(e.labelXOffset)&&(s+=e.labelXOffset),e.labelYOffset&&!isNaN(e.labelYOffset)&&(l+=e.labelYOffset),null!=s&&null!=l&&i._fillText(t,e.text,s,l,e.textFont,e.textAlign||o,e.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(t,e,r){t.globalAlpha="fill"===e?void 0===r.fillOpacity?void 0===r.opacity?1:r.opacity:r.fillOpacity:"stroke"===e?void 0===r.strokeOpacity?void 0===r.opacity?1:r.opacity:r.strokeOpacity:void 0===r.opacity?1:r.opacity}}])&&QC(e.prototype,r),n&&QC(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nA(t){"@babel/helpers - typeof";return(nA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iA(){return(iA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=lA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function aA(t,e){return(aA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function sA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=lA(t);if(e){var o=lA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function lA(t){return(lA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var uA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&aA(t,e)}(i,rA);var e,r,n,o=sA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicpoint",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,iA(lA(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;t.arc(e.x+r[0],e.y+r[1],e.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-t.r-e/2),y:Math.round(t.y+r[1]-t.r-e/2),width:2*t.r+e,height:2*t.r+e},t.__rect)}}])&&oA(e.prototype,r),n&&oA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function cA(t){"@babel/helpers - typeof";return(cA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function fA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function hA(){return(hA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function pA(t,e){return(pA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function yA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=dA(t);if(e){var o=dA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===cA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function dA(t){return(dA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var bA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&pA(t,e)}(i,rA);var e,r,n,o=yA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smictext",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,hA(dA(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=this.style;if(e&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),void 0!==n.text&&!1!==n.text){t.save(),this.doClip(t),this.setContext(t,n),this.setTransform(t),n.textFont&&(t.font=n.textFont),t.textAlign=n.textAlign||"start",t.textBaseline=n.textBaseline||"middle";var o,i=(n.text+"").split("\n"),a=HC.Util_area.getTextHeight("ZH",n.textFont),s=this.getRectNoRotation(n),l=n.x+r[0];o="top"==n.textBaseline?s.y:"bottom"==n.textBaseline?s.y+a:s.y+a/2;for(var u=n.x+r[0],c=n.y+r[1],f=0,h=i.length;f<h;f++){switch(n.labelRect&&(t.fillRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.strokeColor,t.strokeRect(s.x-2,s.y,s.width+4,s.height),t.fillStyle=n.textColor),n.brushType){case"stroke":this.setCtxGlobalAlpha(t,"stroke",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(u,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*f,n.maxWidth):t.strokeText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.strokeText(i[f],l,o,n.maxWidth):t.strokeText(i[f],l,o),this.setCtxGlobalAlpha(t,"reset",n);break;case"both":n.textRotation&&0!==n.textRotation?(t.save(),t.translate(u,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*f),this.setCtxGlobalAlpha(t,"reset",n)):"bottom"==n.textBaseline?n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(t,"reset",n)):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(t,"reset",n)),t.restore()):n.maxWidth?(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],l,o,n.maxWidth),this.setCtxGlobalAlpha(t,"reset",n)):(this.setCtxGlobalAlpha(t,"fill",n),t.fillText(i[f],l,o),this.setCtxGlobalAlpha(t,"reset",n),this.setCtxGlobalAlpha(t,"stroke",n),t.strokeText(i[f],l,o),this.setCtxGlobalAlpha(t,"reset",n));break;default:this.setCtxGlobalAlpha(t,"fill",n),n.textRotation&&0!==n.textRotation?(t.save(),t.translate(u,c),t.rotate(n.textRotation*Math.PI/180),"top"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*f,n.maxWidth):t.fillText(i[f],0,a*f):"bottom"==n.textBaseline?n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height):n.maxWidth?t.fillText(i[f],0,a*(f+1)-s.height/2-a/2,n.maxWidth):t.fillText(i[f],0,a*(f+1)-s.height/2-a/2),t.restore()):n.maxWidth?t.fillText(i[f],l,o,n.maxWidth):t.fillText(i[f],l,o),this.setCtxGlobalAlpha(t,"reset",n)}o+=a}t.restore()}}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;for(var e,r,n,o,i=this.getTextBackground(t,!0),a=0,s=i.length;a<s;a++){var l=i[a];0==a?(e=l[0],n=l[0],r=l[1],o=l[1]):(l[0]<e&&(e=l[0]),l[0]>n&&(n=l[0]),l[1]<r&&(r=l[1]),l[1]>o&&(o=l[1]))}return t.__rect={x:e,y:r,width:n-e,height:o-r},t.__rect}},{key:"getRectNoRotation",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=HC.Util_area.getTextHeight("ZH",t.textFont),o=HC.Util_area.getTextWidth(t.text,t.textFont),i=HC.Util_area.getTextHeight(t.text,t.textFont),a=t.x+r[0];"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2),e="top"==t.textBaseline?t.y+r[1]:"bottom"==t.textBaseline?t.y+r[1]-i:t.y+r[1]-i/2;var s,l=!1;if(t.maxWidth){var u=parseInt(t.maxWidth);u<o&&(s=o,l=!0,o=u),a=t.x+r[0],"end"==t.textAlign||"right"==t.textAlign?a-=o:"center"==t.textAlign&&(a-=o/2)}t.textFont&&(t.textFont.toLowerCase().indexOf("italic")>-1&&(o+=!0===l?n/3*(o/s):n/3));return{x:a,y:e,width:o,height:i}}},{key:"getTextBackground",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;if(!e&&t.__textBackground)return t.__textBackground;var n=this.getRectNoRotation(t),o=t.x+r[0],i=t.y+r[1],a=[];if(t.textRotation&&0!==t.textRotation){var s=t.textRotation,l=this.getRotatedLocation(n.x,n.y,o,i,s),u=this.getRotatedLocation(n.x+n.width,n.y,o,i,s),c=this.getRotatedLocation(n.x+n.width,n.y+n.height,o,i,s),f=this.getRotatedLocation(n.x,n.y+n.height,o,i,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var h=[n.x,n.y],p=[n.x+n.width,n.y],y=[n.x+n.width,n.y+n.height],d=[n.x,n.y+n.height];a.push(h),a.push(p),a.push(y),a.push(d)}return t.__textBackground=a,t.__textBackground}},{key:"getRotatedLocation",value:function(t,e,r,n,o){var i,a,s=new Array;return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s[0]=i,s[1]=-a,s}}])&&fA(e.prototype,r),n&&fA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function vA(t){"@babel/helpers - typeof";return(vA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function mA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gA(){return(gA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=OA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function wA(t,e){return(wA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function _A(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=OA(t);if(e){var o=OA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===vA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function OA(t){return(OA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var SA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wA(t,e)}(i,rA);var e,r,n,o=_A(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smiccircle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,gA(OA(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1];return t.moveTo(n+e.r,o),t.arc(n,o,e.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition,n=t.x+r[0],o=t.y+r[1],i=t.r;return e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(n-i-e/2),y:Math.round(o-i-e/2),width:2*i+e,height:2*i+e},t.__rect}}])&&mA(e.prototype,r),n&&mA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function xA(t){"@babel/helpers - typeof";return(xA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function PA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function EA(){return(EA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=TA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function kA(t,e){return(kA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function jA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=TA(t);if(e){var o=TA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===xA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function TA(t){return(TA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var CA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&kA(t,e)}(i,rA);var e,r,n,o=jA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicpolygon",e.holePolygonPointLists=null,e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,EA(TA(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.style;e&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),t.save(),this.setContext(t,r),this.setTransform(t);var n=!1;"fill"!=r.brushType&&"both"!=r.brushType&&void 0!==r.brushType||(t.beginPath(),"dashed"==r.lineType||"dotted"==r.lineType||"dot"==r.lineType||"dash"==r.lineType||"dashdot"==r.lineType||"longdash"==r.lineType||"longdashdot"==r.lineType?this.buildPath(t,{lineType:"solid",lineWidth:r.lineWidth,pointList:r.pointList}):(this.buildPath(t,r),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",r),t.fill(),this.setCtxGlobalAlpha(t,"reset",r)),r.lineWidth>0&&("stroke"==r.brushType||"both"==r.brushType)&&(n||(t.beginPath(),this.buildPath(t,r)),this.setCtxGlobalAlpha(t,"stroke",r),t.stroke(),this.setCtxGlobalAlpha(t,"reset",r)),this.drawText(t,r,this.style);var o=dt.cloneObject(r);if(o.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var i=this.holePolygonPointLists,a=i.length,s=0;s<a;s++){var l=i[s];o.pointList=l,t.globalCompositeOperation="destination-out",n=!1,"fill"!=o.brushType&&"both"!=o.brushType&&void 0!==o.brushType||(t.beginPath(),"dashed"==o.lineType||"dotted"==o.lineType||"dot"==o.lineType||"dash"==o.lineType||"dashdot"==o.lineType||"longdash"==o.lineType||"longdashdot"==o.lineType?this.buildPath(t,{lineType:"solid",lineWidth:o.lineWidth,pointList:o.pointList}):(this.buildPath(t,o),n=!0),t.closePath(),this.setCtxGlobalAlpha(t,"fill",o),t.fill(),this.setCtxGlobalAlpha(t,"reset",o)),o.lineWidth>0&&("stroke"==o.brushType||"both"==o.brushType)?(n||(t.beginPath(),this.buildPath(t,o)),t.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(t,"stroke",o),t.stroke(),this.setCtxGlobalAlpha(t,"reset",o)):t.globalCompositeOperation="source-over"}t.restore()}},{key:"buildPath",value:function(t,e){e.showShadow&&(t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2))if(e.smooth&&"spline"!==e.smooth){var o,i,a,s=HC.SUtil_smoothBezier(n,e.smooth,!0,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var l=n.length,u=0;u<l;u++)o=s[2*u],i=s[2*u+1],a=[n[(u+1)%l][0]+r[0],n[(u+1)%l][1]+r[1]],t.bezierCurveTo(o[0],o[1],i[0],i[1],a[0],a[1])}else if("spline"===e.smooth&&(n=HC.SUtil_smoothSpline(n,!0,null,r)),e.lineType&&"solid"!=e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=c;var f=e.lineWidth||1,h=f,p=f;"dashed"===e.lineType&&(h*=5,p*=5,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=f),"dot"===e.lineType&&(p*=4,e.lineCap&&"butt"!==e.lineCap&&(h=1,p+=f)),"dash"===e.lineType&&(h*=4,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),"longdash"===e.lineType&&(h*=8,p*=4,e.lineCap&&"butt"!==e.lineCap&&(h-=f,p+=f)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var y=1;y<n.length;y++)HC.SUtil_dashedLineTo(t,n[y-1][0]+r[0],n[y-1][1]+r[1],n[y][0]+r[0],n[y][1]+r[1],f,[h,p]);HC.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],f,[h,p])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var d=e._dashLength||(e.lineWidth||1)*("dashed"==e.lineType?5:1);e._dashLength=d;var b=e.lineWidth||1,v=b,m=b,g=b,w=b;"dashdot"===e.lineType&&(v*=4,m*=4,w*=4,e.lineCap&&"butt"!==e.lineCap&&(v-=b,m+=b,g=1,w+=b)),"longdashdot"===e.lineType&&(v*=8,m*=4,w*=4,e.lineCap&&"butt"!==e.lineCap&&(v-=b,m+=b,g=1,w+=b)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var _=1;_<n.length;_++)HC.SUtil_dashedLineTo(t,n[_-1][0]+r[0],n[_-1][1]+r[1],n[_][0]+r[0],n[_][1]+r[1],b,[v,m,g,w]);HC.SUtil_dashedLineTo(t,n[n.length-1][0]+r[0],n[n.length-1][1]+r[1],n[0][0]+r[0],n[0][1]+r[1],b,[v,m,g,w])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var O=1;O<n.length;O++)t.lineTo(n[O][0]+r[0],n[O][1]+r[1]);t.lineTo(n[0][0]+r[0],n[0][1]+r[1])}}},{key:"getRect",value:function(t,e){var r;if(e?r=e:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),r=this.refOriginalPosition),t.__rect)return t.__rect;for(var n,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=t.pointList,u=0,c=l.length;u<c;u++)l[u][0]+r[0]<o&&(o=l[u][0]+r[0]),l[u][0]+r[0]>i&&(i=l[u][0]+r[0]),l[u][1]+r[1]<a&&(a=l[u][1]+r[1]),l[u][1]+r[1]>s&&(s=l[u][1]+r[1]);return n="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(o-n/2),y:Math.round(a-n/2),width:i-o+n,height:s-a+n},t.__rect}}])&&PA(e.prototype,r),n&&PA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function AA(t){"@babel/helpers - typeof";return(AA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function MA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function RA(){return(RA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=IA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function LA(t,e){return(LA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function NA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=IA(t);if(e){var o=IA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===AA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function IA(t){return(IA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var DA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&LA(t,e)}(i,rA);var e,r,n,o=NA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).brushTypeOnly="stroke",e.textPosition="end",e.type="smicbroken-line",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",e}return e=i,(r=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,RA(IA(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.pointList;if(!(n.length<2)){var o=Math.min(e.pointList.length,Math.round(e.pointListLength||e.pointList.length));if(e.smooth&&"spline"!==e.smooth){var i,a,s,l=HC.SUtil_smoothBezier(n,e.smooth,!1,e.smoothConstraint,r);t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var u=0;u<o-1;u++)i=l[2*u],a=l[2*u+1],s=[n[u+1][0]+r[0],n[u+1][1]+r[1]],t.bezierCurveTo(i[0],i[1],a[0],a[1],s[0],s[1])}else if("spline"===e.smooth&&(o=(n=HC.SUtil_smoothSpline(n,null,null,r)).length),e.lineType&&"solid"!==e.lineType){if("dashed"===e.lineType||"dotted"===e.lineType||"dot"===e.lineType||"dash"===e.lineType||"longdash"===e.lineType){var c=e.lineWidth||1,f=c,h=c;"dashed"===e.lineType&&(f*=5,h*=5,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),"dotted"===e.lineType&&e.lineCap&&"butt"!==e.lineCap&&(f=1,h+=c),"dot"===e.lineType&&(h*=4,e.lineCap&&"butt"!==e.lineCap&&(f=1,h+=c)),"dash"===e.lineType&&(f*=4,h*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),"longdash"===e.lineType&&(f*=8,h*=4,e.lineCap&&"butt"!==e.lineCap&&(f-=c,h+=c)),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var p=1;p<o;p++)HC.SUtil_dashedLineTo(t,n[p-1][0]+r[0],n[p-1][1]+r[1],n[p][0]+r[0],n[p][1]+r[1],c,[f,h])}else if("dashdot"===e.lineType||"longdashdot"===e.lineType){var y=e.lineWidth||1,d=y,b=y,v=y,m=y;"dashdot"===e.lineType&&(d*=4,b*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,b+=y,v=1,m+=y)),"longdashdot"===e.lineType&&(d*=8,b*=4,m*=4,e.lineCap&&"butt"!==e.lineCap&&(d-=y,b+=y,v=1,m+=y)),y=(e.lineWidth||1)*("dashed"===e.lineType?5:1),t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var g=1;g<o;g++)HC.SUtil_dashedLineTo(t,n[g-1][0]+r[0],n[g-1][1]+r[1],n[g][0]+r[0],n[g][1]+r[1],y,[d,b,v,m])}}else{t.moveTo(n[0][0]+r[0],n[0][1]+r[1]);for(var w=1;w<o;w++)t.lineTo(n[w][0]+r[0],n[w][1]+r[1])}}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return CA.prototype.getRect.apply(this,[t,e])}}])&&MA(e.prototype,r),n&&MA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function FA(t){"@babel/helpers - typeof";return(FA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function BA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GA(){return(GA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=VA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function UA(t,e){return(UA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=VA(t);if(e){var o=VA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===FA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function VA(t){return(VA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UA(t,e)}(i,rA);var e,r,n,o=zA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicimage",e._imageCache={},e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,GA(VA(i.prototype),"destroy",this).call(this)}},{key:"brush",value:function(t,e,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,o=this.style||{};e&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(i._refreshTimeout),i._needsRefresh.push(s),i._refreshTimeout=setTimeout(function(){r&&r(i._needsRefresh),i._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=o.width||a.width,c=o.height||a.height,f=o.x+n[0],h=o.y+n[1];if(!a.width||!a.height)return;if(t.save(),this.doClip(t),this.setContext(t,o),this.setTransform(t),o.sWidth&&o.sHeight){var p=o.sx+n[0]||0,y=o.sy+n[1]||0;t.drawImage(a,p,y,o.sWidth,o.sHeight,f,h,u,c)}else if(o.sx&&o.sy){var d=o.sx+n[0],b=o.sy+n[1],v=u-d,m=c-b;t.drawImage(a,d,b,v,m,f,h,u,c)}else t.drawImage(a,f,h,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(t,o,this.style),t.restore()}}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition;return{x:t.x+e[0],y:t.y+e[1],width:t.width,height:t.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&BA(e.prototype,r),n&&BA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qA(t){"@babel/helpers - typeof";return(qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HA(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WA(){return(WA="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=QA(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function YA(t,e){return(YA=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XA(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=QA(t);if(e){var o=QA(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function QA(t){return(QA=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}JA._needsRefresh=[],JA._refreshTimeout=null;var ZA=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YA(t,e)}(i,rA);var e,r,n,o=XA(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicrectangle",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,WA(QA(i.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r,n,o,i,a,s=this.refOriginalPosition,l=e.x+s[0],u=e.y+s[1],c=e.width,f=e.height,h=e.radius;"number"==typeof h?r=n=o=i=h:h instanceof Array?1===h.length?r=n=o=i=h[0]:2===h.length?(r=o=h[0],n=i=h[1]):3===h.length?(r=h[0],n=i=h[1],o=h[2]):(r=h[0],n=h[1],o=h[2],i=h[3]):r=n=o=i=0,r+n>c&&(r*=c/(a=r+n),n*=c/a),o+i>c&&(o*=c/(a=o+i),i*=c/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),t.moveTo(l+r,u),t.lineTo(l+c-n,u),0!==n&&t.quadraticCurveTo(l+c,u,l+c,u+n),t.lineTo(l+c,u+f-o),0!==o&&t.quadraticCurveTo(l+c,u+f,l+c-o,u+f),t.lineTo(l+i,u+f),0!==i&&t.quadraticCurveTo(l,u+f,l,u+f-i),t.lineTo(l,u+r),0!==r&&t.quadraticCurveTo(l,u,l+r,u)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition;e.radius?this._buildRadiusPath(t,e):(t.moveTo(e.x+r[0],e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]),t.lineTo(e.x+r[0]+e.width,e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1]+e.height),t.lineTo(e.x+r[0],e.y+r[1])),t.closePath()}},{key:"getRect",value:function(t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e,r=this.refOriginalPosition;return t.__rect?t.__rect:(e="stroke"==t.brushType||"fill"==t.brushType?t.lineWidth||1:0,t.__rect={x:Math.round(t.x+r[0]-e/2),y:Math.round(t.y+r[1]-e/2),width:t.width+e,height:t.height+e},t.__rect)}}])&&HA(e.prototype,r),n&&HA(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function KA(t){"@babel/helpers - typeof";return(KA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function $A(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function tM(){return(tM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=nM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function eM(t,e){return(eM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function rM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=nM(t);if(e){var o=nM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===KA(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function nM(t){return(nM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var oM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eM(t,e)}(i,rA);var e,r,n,o=rM(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).type="smicsector",e.refOriginalPosition&&2===e.refOriginalPosition.length||(e.refOriginalPosition=[0,0]),e.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",e}return e=i,(r=[{key:"destroy",value:function(){this.type=null,tM(nM(i.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(t,e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var r=this.refOriginalPosition,n=e.x+r[0],o=e.y+r[1],i=e.r0||0,a=e.r,s=e.startAngle,l=e.endAngle,u=e.clockWise||!1;s=HC.Util_math.degreeToRadian(s),l=HC.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=HC.Util_math.cos(s),f=HC.Util_math.sin(s);t.moveTo(c*i+n,f*i+o),t.lineTo(c*a+n,f*a+o),t.arc(n,o,a,s,l,!u),t.lineTo(HC.Util_math.cos(l)*i+n,HC.Util_math.sin(l)*i+o),0!==i&&t.arc(n,o,i,l,s,u),t.closePath()}},{key:"getRect",value:function(t){if(t.__rect)return t.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var e=this.refOriginalPosition,r=HC.Util_vector.create(),n=HC.Util_vector.create(),o=HC.Util_vector.create(),i=HC.Util_vector.create(),a=t.x+e[0],s=t.y+e[1],l=t.r0||0,u=t.r,c=HC.Util_math.degreeToRadian(t.startAngle),f=HC.Util_math.degreeToRadian(t.endAngle),h=t.clockWise;return h||(c=-c,f=-f),l>1?HC.Util_computeBoundingBox.arc(a,s,l,c,f,!h,r,o):(r[0]=o[0]=a,r[1]=o[1]=s),HC.Util_computeBoundingBox.arc(a,s,u,c,f,!h,n,i),HC.Util_vector.min(r,r,n),HC.Util_vector.max(o,o,i),t.__rect={x:r[0],y:r[1],width:o[0]-r[0],height:o[1]-r[1]},t.__rect}}])&&$A(e.prototype,r),n&&$A(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function iM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var aM=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shapeParameters=e,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var e,r,n;return e=t,n=[{key:"transformStyle",value:function(t){var e={},r=["normal","normal","normal","12","arial,sans-serif"],n=[!0,!1];for(var o in t)switch(o){case"fill":n[0]=t[o];break;case"fillColor":e.color=t[o];break;case"stroke":n[1]=t[o];break;case"strokeWidth":e.lineWidth=t[o];break;case"strokeLinecap":e.lineCap=t[o];break;case"strokeLineJoin":e.lineJoin=t[o];break;case"strokeDashstyle":e.lineType=t[o];break;case"pointRadius":e.r=t[o];break;case"label":e.text=t[o];break;case"labelRect":e.labelRect=t[o];break;case"fontColor":e.textColor=t[o];break;case"fontStyle":r[0]=t[o];break;case"fontVariant":r[1]=t[o];break;case"fontWeight":r[2]=t[o];break;case"fontSize":var i="";t[o]&&t[o].toString().indexOf("px")<0&&(i="px"),r[3]=t[o]+i;break;case"fontFamily":r[4]=t[o];break;case"fontOpacity":e.opacity=t[o];break;case"labelPosition":e.textPosition=t[o];break;case"labelAlign":e.textAlign=t[o];break;case"labelBaseline":e.textBaseline=t[o];break;case"labelRotation":e.textRotation=t[o];break;default:e[o]=t[o]}return e.textFont=r.join(" "),!0===n[0]&&!1===n[1]?e.brushType="fill":!1===n[0]&&!0===n[1]?e.brushType="stroke":!0===n[0]&&!0===n[1]?e.brushType="both":e.brushType="fill",null==e.lineWidth&&(e.lineWidth=1),e}},{key:"Background",value:function(t,e,r){var n=r||{},o=new qT(e[0],e[3],Math.abs(e[2]-e[0]),Math.abs(e[3]-e[1]));return o.style={fillColor:"#f3f3f3"},n.backgroundStyle&&dt.copyAttributesWithClip(o.style,n.backgroundStyle),n.backgroundRadius&&(o.style.radius=n.backgroundRadius),o.clickable=!1,o.hoverable=!1,t.createShape(o)}},{key:"GraphAxis",value:function(t,e,r,n){var o=e,i=r||{},a=[],s=[],l=!!i.useXReferenceLine&&i.useXReferenceLine,u=i.axisYTick&&!isNaN(i.axisYTick)?i.axisYTick:0,c=[],f=[];if(0==u){if(f.push([o[0],o[3]-5]),f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var h=parseInt(i.axis3DParameter),p=[o[0]-h,o[1]+h];i.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}else{var y=Math.abs(o[1]-o[3])/u,d=o[3];f.push([o[0],d-5]);for(var b=0;b<u;b++){if(f.push([o[0],d]),f.push([o[0]-5,d]),f.push([o[0],d]),l){var v=new AT([[o[0],d],[o[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,i.xReferenceLineStyle&&dt.copyAttributesWithClip(v.style,i.xReferenceLineStyle),a.push(t.createShape(v))}d+=y}if(f.push([o[0],o[1]]),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var m=parseInt(i.axis3DParameter),g=[o[0]-m,o[1]+m];i.axisUseArrow?(c.push([g[0]+1.5,g[1]-7.5]),c.push([g[0]-1,g[1]+1]),c.push([g[0]+7.5,g[1]-1.5]),f.push([g[0],g[1]])):f.push([g[0],g[1]]),f.push([o[0],o[1]])}f.push([o[2]+5,o[1]])}if(i.axisUseArrow){var w=[[o[2]+5,o[1]+4],[o[2]+13,o[1]],[o[2]+5,o[1]-4]],_=[[o[0]-4,o[3]-5],[o[0],o[3]-13],[o[0]+4,o[3]-5]],O=new FT(w);O.style={fillColor:"#008acd"},dt.copyAttributesWithClip(O.style,i.axisStyle),s.push(t.createShape(O));var S=new FT(_);if(S.style={fillColor:"#008acd"},dt.copyAttributesWithClip(S.style,i.axisStyle),s.push(t.createShape(S)),i.axis3DParameter&&!isNaN(i.axis3DParameter)&&i.axis3DParameter>=15){var x=new FT(c);x.style={fillColor:"#008acd"},dt.copyAttributesWithClip(x.style,i.axisStyle),s.push(t.createShape(x))}}var P=new AT(f);P.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},i.axisStyle&&dt.copyAttributesWithClip(P.style,i.axisStyle),P.clickable=!1,P.hoverable=!1;var E=[t.createShape(P)],k=[];if(i.axisYLabels&&i.axisYLabels.length&&i.axisYLabels.length>0){var j=i.axisYLabels,T=j.length,C=[0,0];if(i.axisYLabelsOffset&&i.axisYLabelsOffset.length&&(C=i.axisYLabelsOffset),1==T){var A=new iC(o[0]-5+C[0],o[3]+C[1],j[0]);A.style={labelAlign:"right"},i.axisYLabelsStyle&&dt.copyAttributesWithClip(A.style,i.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,k.push(t.createShape(A))}else for(var M=o[3],R=Math.abs(o[1]-o[3])/(T-1),L=0;L<T;L++){var N=new iC(o[0]-5+C[0],M+C[1],j[L]);N.style={labelAlign:"right"},i.axisYLabelsStyle&&dt.copyAttributesWithClip(N.style,i.axisYLabelsStyle),N.clickable=!1,N.hoverable=!1,k.push(t.createShape(N)),M+=R}}var I=[];if(i.axisXLabels&&i.axisXLabels.length&&i.axisXLabels.length>0){var D=i.axisXLabels,F=D.length,B=[0,0];if(i.axisXLabelsOffset&&i.axisXLabelsOffset.length&&(B=i.axisXLabelsOffset),n&&n.xPositions&&n.xPositions.length&&n.xPositions.length==F)for(var G=n.xPositions,U=0;U<F;U++){var z=new iC(G[U]+B[0],o[1]+B[1],D[U]);z.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&dt.copyAttributesWithClip(z.style,i.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,I.push(t.createShape(z))}else if(1==F){var V=new iC(o[0]-5+B[0],o[1]+B[0],D[0]);V.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&dt.copyAttributesWithClip(V.style,i.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,I.push(t.createShape(V))}else for(var J=o[0],q=Math.abs(o[2]-o[0])/(F-1),H=0;H<F;H++){var W=new iC(J+B[0],o[1]+B[1],D[H]);W.style={labelAlign:"center",labelBaseline:"top"},i.axisXLabelsStyle&&dt.copyAttributesWithClip(W.style,i.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,I.push(t.createShape(W)),J+=q}}return a.concat(E).concat(k).concat(I).concat(s)}},{key:"ShapeStyleTool",value:function(t,e,r,n,o,i){var a=t||{};if(e&&dt.copyAttributesWithClip(a,e),r&&r.length&&void 0!==o&&!isNaN(o)&&o>=0&&r[o]&&dt.copyAttributesWithClip(a,r[o]),n&&n.length&&void 0!==i)for(var s=n,l=s.length,u=parseFloat(i),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){dt.copyAttributesWithClip(a,s[c].style);break}return a}}],(r=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(e){if(e&&(this.shapeParameters=e),!this.shapeParameters)return null;var r=this.shapeParameters;if(r instanceof xT){var n=new Object;n.x=r.x,n.y=r.y,n.r=r.r,n=dt.copyAttributesWithClip(n,r.style,["x","y"]);var o=new uA;return o.style=t.transformStyle(n),o.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(o,r,["x","y","style","highlightStyle"]),o}if(r instanceof AT){if(!r.pointList)return null;var i=new Object;i.pointList=r.pointList,i=dt.copyAttributesWithClip(i,r.style,["pointList"]);var a=new DA;return a.style=t.transformStyle(i),a.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(a,r,["pointList","style","highlightStyle"]),a}if(r instanceof FT){if(!r.pointList)return null;var s=new Object;s.pointList=r.pointList,s=dt.copyAttributesWithClip(s,r.style,["pointList"]);var l=new CA;return l.style=t.transformStyle(s),l.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(l,r,["pointList","style","highlightStyle"]),l}if(r instanceof qT){if(!r.x&&!r.y&!r.width&!r.height)return null;var u=new Object;u.x=r.x,u.y=r.y,u.width=r.width,u.height=r.height,u=dt.copyAttributesWithClip(u,r.style,["x","y","width","height"]);var c=new ZA;return c.style=t.transformStyle(u),c.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(c,r,["x","y","width","height","style","highlightStyle"]),c}if(r instanceof KT){var f=new Object;f.x=r.x,f.y=r.y,f.r=r.r,f.startAngle=r.startAngle,f.endAngle=r.endAngle,r.r0&&(f.r0=r.r0),r.clockWise&&(f.clockWise=r.clockWise),f=dt.copyAttributesWithClip(f,r.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new oM;return h.style=t.transformStyle(f),h.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(h,r,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(r instanceof iC){var p=new Object;p.x=r.x,p.y=r.y,p.text=r.text,p=dt.copyAttributesWithClip(p,r.style,["x","y","text"]);var y=new bA;return y.style=t.transformStyle(p),y.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(y,r,["x","y","text","style","highlightStyle"]),y}if(r instanceof hC){var d=new Object;d.x=r.x,d.y=r.y,r.image&&(d.image=r.image),r.width&&(d.width=r.width),r.height&&(d.height=r.height),r.sx&&(d.sx=r.sx),r.sy&&(d.sy=r.sy),r.sWidth&&(d.sWidth=r.sWidth),r.sHeight&&(d.sHeight=r.sHeight),d=dt.copyAttributesWithClip(d,r.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var b=new JA;return b.style=t.transformStyle(d),b.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(b,r,["x","y","image","width","height","style","highlightStyle"]),b}if(r instanceof gC){var v=new Object;v.x=r.x,v.r=r.r,v.y=r.y,v=dt.copyAttributesWithClip(v,r.style,["x","y","r"]);var m=new SA;return m.style=t.transformStyle(v),m.highlightStyle=t.transformStyle(r.highlightStyle),dt.copyAttributesWithClip(m,r,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),m}return null}}])&&iM(e.prototype,r),n&&iM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function sM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var lM=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e&&r&&r.map&&r.renderer&&(this.id=dt.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=e,this.shapes=[],this.layer=r,this.CLASS_NAME="SuperMap.Feature.Theme")}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(t){var e=this.layer.map.getResolution(),r=this.layer.map.getExtent();return t instanceof Wt||t instanceof se?[t.x/e+-r.left/e,r.top/e-t.y/e]:t instanceof gt?[t.lon/e+-r.left/e,r.top/e-t.lat/e]:null}}])&&sM(e.prototype,r),n&&sM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function uM(t){"@babel/helpers - typeof";return(uM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fM(){return(fM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=yM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function hM(t,e){return(hM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function pM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=yM(t);if(e){var o=yM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===uM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function yM(t){return(yM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var dM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&hM(t,e)}(i,lM);var e,r,n,o=pM(i);function i(t,e,r,n,a,s){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,t,e,r,n,a,s)).shapeFactory=new aM,l.shapeParameters=null,l.RelativeCoordinate=!1,l.setting=null,l.origonPoint=null,l.chartBox=null,l.chartBounds=null,l.width=null,l.height=null,l.XOffset=0,l.YOffset=0,l.DVBParameter=null,l.dataViewBox=null,l.DVBCodomain=null,l.DVBCenterPoint=null,l.DVBUnitValue=null,l.DVBOrigonPoint=null,l.DVBWidth=null,l.DVBHeight=null,l.origonPointOffset=null,l.fields=r||[],l.dataValues=null,l.lonlat=a||l.data.geometry.getBounds().getCenterLonLat(),n&&n.width&&n.height&&n.codomain&&(l.setting=n),l.CLASS_NAME="SuperMap.Feature.Theme.Graph",l}return e=i,(r=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,fM(yM(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;if(!(t.width&&t.height&&t.codomain))return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=lM.getDataValues(this.data,this.fields,e);this.dataValues=r||[],this.width=parseFloat(t.width),this.height=parseFloat(t.height),this.DVBCodomain=t.codomain,this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var n=this.width,o=this.height,i=this.location;this.origonPoint=[i[0]-n/2,i[1]-o/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+o,a[0]+n,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(t){t&&(this.lonlat=t);var e=this.getLocalXY(this.lonlat);e[0]+=this.XOffset,e[1]+=this.YOffset,this.location=e;var r=this.width,n=this.height,o=this.location;return this.chartBounds=new _t(o[0]-r/2,o[1]+n/2,o[0]+r/2,o[1]-n/2),this.resetLinearGradient(),o}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var t=this.shapes,e=this.location,r=0,n=t.length;r<n;r++){t[r].refOriginalPosition=e;var o=t[r].style;for(var i in o)switch(i){case"pointList":for(var a=o[i],s=0,l=a.length;s<l;s++)a[s][0]-=e[0],a[s][1]-=e[1];break;case"x":o[i]-=e[0];break;case"y":o[i]-=e[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&cM(e.prototype,r),n&&cM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function bM(t){"@babel/helpers - typeof";return(bM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mM(){return(mM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_M(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function gM(t,e){return(gM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function wM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=_M(t);if(e){var o=_M(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function _M(t){return(_M=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}lM.getDataValues=function(t,e,r){if(!t.attributes)return!1;for(var n=[],o=t.attributes,i=0;i<e.length;i++)for(var a in o)if(a===e[i])try{!isNaN(r)&&r>=0?n.push(parseFloat(o[a].toString()).toFixed(r)):n.push(parseFloat(o[a].toString()))}catch(t){throw new Error("not a number")}return n.length===e.length&&n};var OM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&gM(t,e)}(i,dM);var e,r,n,o=wM(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar",s}return e=i,(r=[{key:"destroy",value:function(){mM(_M(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},e=this.setting;if(e.barLinearGradient||(e.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.dataViewBox,o=this.dataValues;if(!(o.length<1)){for(var i=0,a=o.length;i<a;i++)if(o[i]<r[0]||o[i]>r[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(aM.Background(this.shapeFactory,this.chartBox,e)),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(aM.GraphAxis(this.shapeFactory,n,e,s)));for(var c=0;c<o.length;c++){var f=n[1]-(o[c]-r[0])/this.DVBUnitValue,h=[[l[c]-u/2,n[1]-1],[l[c]+u/2,n[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],p=new FT(h);if(void 0===e.showShadow||e.showShadow){if(e.barShadowStyle){var y=e.barShadowStyle;y.shadowBlur&&(t.shadowBlur=y.shadowBlur),y.shadowColor&&(t.shadowColor=y.shadowColor),y.shadowOffsetX&&(t.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(t.shadowOffsetY=y.shadowOffsetY)}p.style={},dt.copyAttributesWithClip(p.style,t)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:o[c]},void 0!==e.barHoverAble&&(p.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(p.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=t[0]+i/2:l+=i+t[1],o.push(e[0]+l);return{xPositions:o,width:i}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var t=this.shapes.length,e=this.setting.barLinearGradient,r=-1,n=0;n<t;n++){var o=this.shapes[n];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===o.CLASS_NAME){var i=o.style,a=this.location[0]+i.pointList[0][0],s=this.location[0]+i.pointList[1][0];++r>=e.length&&(r%=e.length);var l=e[r][0],u=e[r][1],c=(new Zj).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);o.style.color=c}}}}])&&vM(e.prototype,r),n&&vM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function SM(t){"@babel/helpers - typeof";return(SM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function PM(){return(PM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=jM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function EM(t,e){return(EM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function kM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=jM(t);if(e){var o=jM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===SM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function jM(t){return(jM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var TM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&EM(t,e)}(i,dM);var e,r,n,o=kM(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",s}return e=i,(r=[{key:"destroy",value:function(){PM(jM(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,25,20,20]:t.dataViewBoxParameter=[5,5,5,5]),t.axisUseArrow=void 0===t.axisUseArrow||t.axisUseArrow,t.axisXLabelsOffset=void 0!==t.axisXLabelsOffset?t.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var e=this.DVBCodomain;this.DVBUnitValue=(e[1]-e[0])/this.DVBHeight;var r=this.dataViewBox,n=this.dataValues;if(!(n.length<1)){for(var o=0,i=n.length;o<i;o++)if(n[o]<e[0]||n[o]>e[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(aM.Background(this.shapeFactory,this.chartBox,t)),(!t.axis3DParameter||isNaN(t.axis3DParameter)||t.axis3DParameter<15)&&(t.axis3DParameter=20),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(aM.GraphAxis(this.shapeFactory,r,t,a)));for(var u=t.bar3DParameter&&!isNaN(t.bar3DParameter)?t.bar3DParameter:10,c=0;c<n.length;c++){var f=r[1]-(n[c]-e[0])/this.DVBUnitValue,h=s[c]-l/2,p=s[c]+l/2,y=[[h,f],[p,f],[p-u,f+u],[h-u,f+u]],d=[[p,f],[p-u,f+u],[p-u,r[1]+u],[p,r[1]]],b=[[h-u,r[1]+u],[p-u,r[1]+u],[p-u,f+u],[h-u,f+u]];u<=0&&(b=[[h,r[1]],[p,r[1]],[p,f],[h,f]]);var v=new FT(y),m=new FT(d),g=new FT(b);t.barSideStyle=t.barSideStyle?t.barSideStyle:t.barFaceStyle,t.barSideStyleByFields=t.barSideStyleByFields?t.barSideStyleByFields:t.barFaceStyleByFields,t.barSideStyleByCodomain=t.barSideStyleByCodomain?t.barSideStyleByCodomain:t.barFaceStyleByCodomain,t.barTopStyle=t.barTopStyle?t.barTopStyle:t.barFaceStyle,t.barTopStyleByFields=t.barTopStyleByFields?t.barTopStyleByFields:t.barFaceStyleByFields,t.barTopStyleByCodomain=t.barTopStyleByCodomain?t.barTopStyleByCodomain:t.barFaceStyleByCodomain,g.style=aM.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barFaceStyle,t.barFaceStyleByFields,t.barFaceStyleByCodomain,c,n[c]),m.style=aM.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barSideStyle,t.barSideStyleByFields,t.barSideStyleByCodomain,c,n[c]),v.style=aM.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},t.barTopStyle,t.barTopStyleByFields,t.barTopStyleByCodomain,c,n[c]),t.barSideHoverStyle=t.barSideHoverStyle?t.barSideHoverStyle:t.barFaceHoverStyle,t.barTopHoverStyle=t.barTopHoverStyle?t.barTopHoverStyle:t.barFaceHoverStyle,g.highlightStyle=aM.ShapeStyleTool({stroke:!0},t.barFaceHoverStyle),m.highlightStyle=aM.ShapeStyleTool({stroke:!0},t.barSideHoverStyle),v.highlightStyle=aM.ShapeStyleTool({stroke:!0},t.barTopHoverStyle),v.refDataID=m.refDataID=g.refDataID=this.data.id,v.isHoverByRefDataID=m.isHoverByRefDataID=g.isHoverByRefDataID=!0,v.refDataHoverGroup=m.refDataHoverGroup=g.refDataHoverGroup=dt.createUniqueID("lr_shg"),v.dataInfo=m.dataInfo=g.dataInfo={field:this.fields[c],value:n[c]},void 0!==t.barHoverAble&&(v.hoverable=m.hoverable=g.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(v.clickable=m.clickable=g.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(m)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(g))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=0,a=this.DVBWidth;if(r.xShapeBlank&&r.xShapeBlank.length&&3==r.xShapeBlank.length){var s=a-((t=r.xShapeBlank)[0]+t[2]+(n-1)*t[1]);if(s<=n)return null;i=s/n}else t=[i=a/(2*n+1),i,i];for(var l=0,u=0;u<n;u++)0==u?l=t[0]+i/2:l+=i+t[1],o.push(e[0]+l);return{xPositions:o,width:i}}}])&&xM(e.prototype,r),n&&xM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function CM(t){"@babel/helpers - typeof";return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function AM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function MM(){return(MM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=NM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function RM(t,e){return(RM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function LM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=NM(t);if(e){var o=NM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===CM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function NM(t){return(NM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var IM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&RM(t,e)}(i,dM);var e,r,n,o=LM(i);function i(t,e,r,n,a,s){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,t,e,r,n,a,s)).setting=null,n&&n.codomain&&(l.setting=n,l.DVBCodomain=l.setting.codomain),l.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",l}return e=i,(r=[{key:"destroy",value:function(){this.setting=null,MM(NM(i.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var t=this.setting;t.XOffset&&(this.XOffset=t.XOffset),t.YOffset&&(this.YOffset=t.YOffset),this.XOffset=t.XOffset?t.XOffset:0,this.YOffset=t.YOffset?t.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=t.dataViewBoxParameter?t.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var e=this.width,r=this.height,n=this.location;this.origonPoint=[n[0]-e/2,n[1]-r/2];var o=this.origonPoint;this.chartBox=[o[0],o[1]+r,o[0]+e,o[1]];var i=this.chartBox,a=this.DVBParameter;this.dataViewBox=[i[0]+a[0],i[1]-a[1],i[2]-a[2],i[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-o[0],this.DVBOrigonPoint[1]-o[1]],!0)}}])&&AM(e.prototype,r),n&&AM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function DM(t){"@babel/helpers - typeof";return(DM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function BM(){return(BM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function GM(t,e){return(GM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function UM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=zM(t);if(e){var o=zM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===DM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function zM(t){return(zM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var VM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&GM(t,e)}(i,IM);var e,r,n,o=UM(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Circle",s}return e=i,(r=[{key:"destroy",value:function(){BM(zM(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var t=this.setting;if(!t.codomain)return!1;var e=void 0===t.decimalNumber||isNaN(t.decimalNumber)?-1:t.decimalNumber,r=lM.getDataValues(this.data,this.fields,e);this.dataValues=r||[];var n=this.dataValues;t.maxR||(t.maxR=100),t.minR||(t.minR=0);var o=this.DVBCodomain;o&&o[1]-o[0]>0?this.DVBUnitValue=t.maxR/(o[1]-o[0]):this.DVBUnitValue=t.maxR;var i=this.DVBUnitValue,a=n[0]*i+t.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!o||!(n[0]<o[0]||n[0]>o[1]))){var s=this.DVBCenterPoint,l=new gC(s[0],s[1],a);l.style=aM.ShapeStyleTool(null,t.circleStyle,null,null,0),void 0!==t.fillColor?l.style.fillColor=t.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=aM.ShapeStyleTool(null,t.circleHoverStyle),void 0!==t.circleHoverAble&&(l.hoverable=t.circleHoverAble),void 0!==t.circleClickAble&&(l.clickable=t.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:n[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&FM(e.prototype,r),n&&FM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function JM(t){"@babel/helpers - typeof";return(JM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function HM(){return(HM="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=XM(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function WM(t,e){return(WM=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function YM(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=XM(t);if(e){var o=XM(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===JM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function XM(t){return(XM=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QM=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WM(t,e)}(i,dM);var e,r,n,o=YM(i);function i(t,e,r,n,a,s){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,t,e,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Line",l}return e=i,(r=[{key:"destroy",value:function(){HM(XM(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues;if(!(o.length<1)){var i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(aM.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(aM.GraphAxis(this.shapeFactory,e,t,i));for(var u=[],c=[],f=0,h=o.length;f<h;f++){if(o[f]<r[0]||o[f]>r[1])return null;a=l[f],s=e[1]-(o[f]-r[0])/n;var p=new xT(a,s);p.style=aM.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,f,o[f]),p.highlightStyle=aM.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(p.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(p.clickable=t.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:o[f]},c.push(this.shapeFactory.createShape(p));var y=[a,s];u.push(y)}var d=new AT(u);d.style=aM.ShapeStyleTool({strokeColor:"#ee9900"},t.lineStyle),d.clickable=!1,d.hoverable=!1;var b=this.shapeFactory.createShape(d);this.shapes.push(b),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=t[0]:l+=a,o.push(e[0]+l);return{xPositions:o,width:0}}}])&&qM(e.prototype,r),n&&qM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ZM(t){"@babel/helpers - typeof";return(ZM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KM(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $M(){return($M="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function tR(t,e){return(tR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function eR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=rR(t);if(e){var o=rR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ZM(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function rR(t){return(rR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var nR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&tR(t,e)}(i,dM);var e,r,n,o=eR(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Pie",s}return e=i,(r=[{key:"destroy",value:function(){$M(rR(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting,e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){t.useBackground&&this.shapes.push(aM.Background(this.shapeFactory,this.chartBox,t));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<r.length;p++){var y=Math.abs(r[p]);(c=0===p?u+y*s:p===y.length-1?f:u+y*s)-u>=360&&(c=359.9999999);var d=new KT(l[0],l[1],h,u,c);if(void 0===t.sectorStyleByFields){var b=p%e.length;d.style=aM.ShapeStyleTool(null,t.sectorStyle,e,null,b)}else d.style=aM.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,p,r[p]);d.highlightStyle=aM.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(d.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(d.clickable=t.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:r[p]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&KM(e.prototype,r),n&&KM(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function oR(t){"@babel/helpers - typeof";return(oR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aR(){return(aR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=uR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function sR(t,e){return(sR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=uR(t);if(e){var o=uR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function uR(t){return(uR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var cR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sR(t,e)}(i,dM);var e,r,n,o=lR(i);function i(t,e,r,n,a,s){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(l=o.call(this,t,e,r,n,a,s)).CLASS_NAME="SuperMap.Feature.Theme.Point",l}return e=i,(r=[{key:"destroy",value:function(){aR(uR(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var t=this.setting;if(t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var e=this.dataViewBox,r=this.DVBCodomain;this.DVBUnitValue=(r[1]-r[0])/this.DVBHeight;var n=this.DVBUnitValue,o=this.dataValues,i=this.calculateXShapeInfo();if(i){var a,s,l=i.xPositions;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(aM.Background(this.shapeFactory,this.chartBox,t)),this.shapes=this.shapes.concat(aM.GraphAxis(this.shapeFactory,e,t,i));for(var u=0,c=o.length;u<c;u++){if(o[u]<r[0]||o[u]>r[1])return null;a=l[u],s=e[1]-(o[u]-r[0])/n;var f=new xT(a,s);f.style=aM.ShapeStyleTool({fillColor:"#ee9900"},t.pointStyle,t.pointStyleByFields,t.pointStyleByCodomain,u,o[u]),f.highlightStyle=aM.ShapeStyleTool(null,t.pointHoverStyle),void 0!==t.pointHoverAble&&(f.hoverable=t.pointHoverAble),void 0!==t.pointClickAble&&(f.clickable=t.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:o[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var t,e=this.dataViewBox,r=this.setting,n=this.dataValues.length;if(n<1)return null;var o=[],i=this.DVBWidth,a=0;if(r.xShapeBlank&&r.xShapeBlank.length&&2==r.xShapeBlank.length){var s=i-((t=r.xShapeBlank)[0]+t[1]);if(s<=n)return null;a=s/(n-1)}else t=[a=i/(n+1),a,a];for(var l=0,u=0;u<n;u++)0==u?l=t[0]:l+=a,o.push(e[0]+l);return{xPositions:o,width:0}}}])&&iR(e.prototype,r),n&&iR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function fR(t){"@babel/helpers - typeof";return(fR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function hR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function pR(){return(pR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=bR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function yR(t,e){return(yR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function dR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=bR(t);if(e){var o=bR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===fR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function bR(t){return(bR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var vR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yR(t,e)}(i,dM);var e,r,n,o=dR(i);function i(t,e,r,n,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(s=o.call(this,t,e,r,n,a)).CLASS_NAME="SuperMap.Feature.Theme.Ring",s}return e=i,(r=[{key:"destroy",value:function(){pR(bR(i.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],e=this.setting;e.useBackground&&this.shapes.push(aM.Background(this.shapeFactory,this.chartBox,e));var r=this.dataValues;if(!(r.length<1)){for(var n=this.DVBCodomain,o=0;o<r.length;o++)if(r[o]<n[0]||r[o]>n[1])return;for(var i=0,a=0;a<r.length;a++)i+=Math.abs(r[a]);this.DVBUnitValue=360/i;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=e.innerRingRadius>=0&&e.innerRingRadius<h,y=void 0!==e.innerRingRadius&&!isNaN(e.innerRingRadius)&&p?e.innerRingRadius:0,d=0;d<r.length;d++){var b=Math.abs(r[d]);c=0===d?u+b*s:d===b.length-1?f:u+b*s;var v=new KT(l[0],l[1],h,u,c,y);if(void 0===e.sectorStyleByFields){var m=d%t.length;v.style=aM.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else v.style=aM.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,d,r[d]);v.highlightStyle=aM.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(v.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(v.clickable=e.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:r[d]},this.shapes.push(this.shapeFactory.createShape(v)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&hR(e.prototype,r),n&&hR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function mR(t){"@babel/helpers - typeof";return(mR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function gR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function wR(){return(wR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=PR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function _R(t,e){return(_R=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function OR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PR(t);if(e){var o=PR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return SR(this,r)}}function SR(t,e){if(e&&("object"===mR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return xR(t)}function xR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function PR(t){return(PR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var ER=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_R(t,e)}(i,lM);var e,r,n,o=OR(i);function i(t,e,r,n,a){var s;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),s=o.call(this,t,e),!t.geometry)return SR(s);if(!(t.geometry instanceof nt))return SR(s);s.dataBounds=t.geometry.getBounds(),s.nodesClipPixel=2,s.isHoverAble=!0,s.isMultiHover=!0,s.isClickAble=!0,s.highlightStyle=null,s.shapeOptions={},s.style=r||{},s.CLASS_NAME="SuperMap.Feature.Theme.Vector",s.style=r||{},n&&dt.copyAttributesWithClip(xR(s),n,["shapeOptions","dataBounds"]),a&&dt.copyAttributesWithClip(s.shapeOptions,a);var l=t.geometry;return s.lonlat=s.dataBounds.getCenterLonLat(),s.location=s.getLocalXY(s.lonlat),l instanceof ye?s.lineToTF(l):l instanceof te?s.lineToTF(l):l instanceof Gt||(l instanceof Lt?s.multiPointToTF(l):l instanceof we?s.multiLineStringToTF(l):l instanceof Ee?s.multiPolygonToTF(l):l instanceof Me?s.polygonToTF(l):l instanceof jt||(l instanceof Wt?s.pointToTF(l):l instanceof Fe?s.rectangleToTF(l):l instanceof se&&s.geoTextToTF(l))),s}return e=i,(r=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,wR(PR(i.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var l=e[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n)}if(i.length<2)return null;var c=new Object;(c=dt.copyAttributesWithClip(c,this.style,["pointList"])).pointList=i;var f=new DA({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&dt.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=this.nodesClipPixel,s=0;s<e.length;s++){var l=e[s];if(n=[],r=this.getLocalXY(l),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var u=i[i.length-1];if(Math.abs(u[0]-n[0])<=a&&Math.abs(u[1]-n[1])<=a)continue}i.push(n);var c=new Object;c.r=6,(c=dt.copyAttributesWithClip(c,this.style)).x=n[0],c.y=n[1];var f=new uA({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=o,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&dt.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.lineToTF(n)}}},{key:"multiPolygonToTF",value:function(t){for(var e=t.components,r=0;r<e.length;r++){var n=e[r];this.polygonToTF(n)}}},{key:"pointToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=dt.copyAttributesWithClip(n,this.style)).x=r[0]-e[0],n.y=r[1]-e[1];var o=new uA({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&dt.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"polygonToTF",value:function(t){for(var e=t.components,r=[],n=[],o=this.location,i=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<e.length;u++){var c=e[u].components;if(0===u){i=[];for(var f=0;f<c.length;f++){if(n=[],r=this.getLocalXY(c[f]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],i.length>0){var h=i[i.length-1];if(Math.abs(h[0]-n[0])<=l&&Math.abs(h[1]-n[1])<=l)continue}i.push(n)}}else{a=[];for(var p=0;p<c.length;p++){if(n=[],r=this.getLocalXY(c[p]),n[0]=r[0]-o[0],n[1]=r[1]-o[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-n[0])<=l&&Math.abs(y[1]-n[1])<=l)continue}a.push(n)}}a.length<2||s.push(a)}if(!(i.length<2)){var d={};(d=dt.copyAttributesWithClip(d,this.style,["pointList"])).pointList=i;var b=new CA({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(b.highlightStyle=this.highlightStyle),b.refOriginalPosition=this.location,b.refDataID=this.data.id,b.isHoverByRefDataID=this.isMultiHover,s.length>0&&(b.holePolygonPointLists=s),this.shapeOptions&&dt.copyAttributesWithClip(b,this.shapeOptions),this.shapes.push(b)}}},{key:"rectangleToTF",value:function(t){var e=this.location,r=new gt(t.x,t.y),n=this.layer.map.getResolution(),o=this.getLocalXY(r),i=new Object;i.r=6,(i=dt.copyAttributesWithClip(i,this.style)).x=o[0]-e[0],i.y=o[1]-e[1]-2*t.width/n,i.width=t.width/n,i.height=t.height/n;var a=new ZA({style:i,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=e,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&dt.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(t){var e=this.location,r=this.getLocalXY(t),n=new Object;n.r=6,(n=dt.copyAttributesWithClip(n,this.style,["x","y","text"])).x=r[0]-e[0],n.y=r[1]-e[1],n.text=t.text;var o=new bA({style:n,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(o.highlightStyle=this.highlightStyle),o.refOriginalPosition=e,o.refDataID=this.data.id,o.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&dt.copyAttributesWithClip(o,this.shapeOptions),this.shapes.push(o)}},{key:"updateAndAddShapes",value:function(){var t=this.getLocalXY(this.lonlat);this.location=t;for(var e=this.layer.renderer,r=0,n=this.shapes.length;r<n;r++){var o=this.shapes[r];o.refOriginalPosition=t,e.addShape(o)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(t){return this.layer.getLocalXY(t)}}])&&gR(e.prototype,r),n&&gR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kR(t){"@babel/helpers - typeof";return(kR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TR(){return(TR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=RR(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CR(t,e){return(CR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=RR(t);if(e){var o=RR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return MR(t)}(this,r)}}function MR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function RR(t){return(RR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CR(t,e)}(i,Z(_C,YC));var e,r,n,o=AR(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t),t=t||{},e.id=null,e.type="group",e.clipShape=null,e._children=[],e._storage=null,e.__dirty=!0,e.ignore=!1,dt.extend(MR(e),t),e.id=e.id||dt.createUniqueID("smShapeGroup_"),e.CLASS_NAME="SuperMap.LevelRenderer.Group",e}return e=i,(r=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,TR(RR(i.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(t){return this._children[t]}},{key:"addChild",value:function(t){t!=this&&t.parent!=this&&(t.parent&&t.parent.removeChild(t),this._children.push(t),t.parent=this,this._storage&&this._storage!==t._storage&&(this._storage.addToMap(t),t instanceof i&&t.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(t){var e=dt.indexOf(this._children,t);this._children.splice(e,1),t.parent=null,this._storage&&(this._storage.delFromMap(t.id),t instanceof i&&t.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o)}}},{key:"traverse",value:function(t,e){for(var r=!!e,n=0;n<this._children.length;n++){var o=this._children[n];r?t.call(e,o):t(o),"group"===o.type&&o.traverse(t,e)}}},{key:"addChildrenToStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.addToMap(r),"group"===r.type&&r.addChildrenToStorage(t)}}},{key:"delChildrenFromStorage",value:function(t){for(var e=0;e<this._children.length;e++){var r=this._children[e];t.delFromMap(r.id),"group"===r.type&&r.delChildrenFromStorage(t)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&jR(e.prototype,r),n&&jR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function NR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var IR=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var e,r,n;return e=t,n=[{key:"shapeCompareFunc",value:function(t,e){return t.zlevel==e.zlevel?t.z==e.z?t.__renderidx-e.__renderidx:t.z-e.z:t.zlevel-e.zlevel}}],(r=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(t,e){if(!e){e={hover:!1,normal:"down",update:!1}}if(e.hover)for(var r=0,n=this._hoverElements.length;r<n;r++){var o=this._hoverElements[r];if(o.updateTransform(),t(o))return this}switch(e.update&&this.updateShapeList(),e.normal){case"down":for(var i=this._shapeList.length;i--;)if(t(this._shapeList[i]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(t(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(e){for(var r=[],n=this._hoverElements.length,o=0;o<n;o++){r.push(this._hoverElements[o]);var i=this._hoverElements[o].hoverConnect;if(i)for(var a,s=0,l=(i=i instanceof Array?i:[i]).length;s<l;s++)(a=i[s].id?i[s]:this.get(i[s]))&&r.push(a)}if(r.sort(t.shapeCompareFunc),e)for(var u=0,c=r.length;u<c;u++)r[u].updateTransform();return r}},{key:"getShapeList",value:function(t){return t&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var e=this._roots.length,r=0;r<e;r++){var n=this._roots[r];this._updateAndAddShape(n)}this._shapeList.length=this._shapeListOffset;for(var o=this._shapeList.length,i=0;i<o;i++)this._shapeList[i].__renderidx=i;this._shapeList.sort(t.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(t,e){if(!t.ignore)if(t.updateTransform(),"group"==t.type){t.clipShape&&(t.clipShape.parent=t,t.clipShape.updateTransform(),e?(e=e.slice()).push(t.clipShape):e=[t.clipShape]);for(var r=0;r<t._children.length;r++){var n=t._children[r];n.__dirty=t.__dirty||n.__dirty,this._updateAndAddShape(n,e)}t.__dirty=!1}else t.__clipShapes=e,this._shapeList[this._shapeListOffset++]=t}},{key:"mod",value:function(t,e){var r=this._elements[t];if(r&&(r.modSelf(),e))if(e.parent||e._storage||e.__startClip){var n={};for(var o in e)"parent"!=o&&"_storage"!=o&&"__startClip"!=o&&e.hasOwnProperty(o)&&(n[o]=e[o]);(new Xj).merge(r,n,!0)}else(new Xj).merge(r,e,!0);return this}},{key:"drift",value:function(t,e,r){var n=this._elements[t];return n&&(n.needTransform=!0,"horizontal"===n.draggable?r=0:"vertical"===n.draggable&&(e=0),(!n.ondrift||n.ondrift&&!n.ondrift(e,r))&&n.drift(e,r)),this}},{key:"addHover",value:function(t){return t.updateNeedTransform(),this._hoverElements.push(t),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(t){t instanceof LR&&t.addChildrenToStorage(this),this.addToMap(t),this._roots.push(t)}},{key:"delRoot",value:function(t){if(void 0===t){for(var e=0;e<this._roots.length;e++){var r=this._roots[e];r instanceof LR&&r.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(t instanceof Array)for(var n=t.length,o=0;o<n;o++)this.delRoot(t[o]);else{var i;i="string"==typeof t?this._elements[t]:t;var a=(new Xj).indexOf(this._roots,i);a>=0&&(this.delFromMap(i.id),this._roots.splice(a,1),i instanceof LR&&i.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(t){return t instanceof LR&&(t._storage=this),t.modSelf(),this._elements[t.id]=t,this}},{key:"get",value:function(t){return this._elements[t]}},{key:"delFromMap",value:function(t){var e=this._elements[t];return e&&(delete this._elements[t],e instanceof LR&&(e._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&NR(e.prototype,r),n&&NR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function DR(t){"@babel/helpers - typeof";return(DR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function FR(t,e){return(FR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function BR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=GR(t);if(e){var o=GR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===DR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function GR(t){return(GR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function UR(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function zR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function VR(t,e,r){return e&&zR(t.prototype,e),r&&zR(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var JR=function(){function t(e,r){UR(this,t),this.root=e,this.storage=r,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,t.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var n=document.createElement("div");this._domRoot=n,n.style.position="relative",n.style.overflow="hidden",n.style.width=this._width+"px",n.style.height=this._height+"px",this.root.appendChild(n),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=t.createDom(dt.createUniqueID("SuperMap.Theme_background_"),"div",this),n.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var o=new qR(dt.createUniqueID("_highLightLayer_"),this);this._layers.hover=o,n.appendChild(o.dom),o.initContext(),o.dom.onselectstart=a,o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none";var i=this;function a(){return!1}this.updatePainter=function(t,e){i.refreshShapes(t,e)}}return VR(t,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(t){return this.refresh(t,!0),this}},{key:"refresh",value:function(t,e){var r=this.storage.getShapeList(!0);return this._paintList(r,e),"function"==typeof t&&t(),this}},{key:"_paintList",value:function(t,e){var r,n,o;for(var i in void 0===e&&(e=!1),this._updateLayerStatus(t),this._layers)"hover"!==i&&(this._layers[i].unusedCount++,this._layers[i].updateTransform());for(var a=[],s=0,l=t.length;s<l;s++){var u=t[s];if(n!==u.zlevel&&(r&&r.needTransform&&o.restore(),o=(r=this.getLayer(u.zlevel)).ctx,n=u.zlevel,r.unusedCount=0,(r.dirty||e)&&r.clear(),r.needTransform&&(o.save(),r.setTransform(o))),o&&u.__startClip){var c=u.__startClip;if(o.save(),c.needTransform){var f=c.transform;HC.Util_matrix.invert(a,f),o.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(o.beginPath(),c.buildPath(o,c.style),o.clip(),c.needTransform){var h=a;o.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((r&&r.dirty||e)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(o,!1)))if(FC.catchBrushException)try{u.brush(o,!1,this.updatePainter)}catch(t){HC.Util_log(t,"brush error of "+u.type,u)}else u.brush(o,!1,this.updatePainter);o&&u.__stopClip&&o.restore(),u.__dirty=!1}for(var p in o&&r&&r.needTransform&&o.restore(),this._layers)if("hover"!==p){var y=this._layers[p];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(t){var e=this._layers[t];if(!e){var r=this._zlevelList.length,n=null,o=-1;if(r>0&&t>this._zlevelList[0]){for(o=0;o<r-1&&!(this._zlevelList[o]<t&&this._zlevelList[o+1]>t);o++);n=this._layers[this._zlevelList[o]]}this._zlevelList.splice(o+1,0,t),e=new qR(dt.createUniqueID("_levelLayer_"+t),this);var i=n?n.dom:this._bgDom;i.nextSibling?i.parentNode.insertBefore(e.dom,i.nextSibling):i.parentNode.appendChild(e.dom),e.initContext(),this._layers[t]=e,this._layerConfig[t]&&(new Xj).merge(e,this._layerConfig[t],!0),e.updateTransform()}return e}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(t){var e=this._layers,r={};for(var n in e)"hover"!==n&&(r[n]=e[n].elCount,e[n].elCount=0);for(var o=0;o<t.length;o++){var i=t[o],a=e[i.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=i.__dirty}}for(var s in e)"hover"!==s&&r[s]!==e[s].elCount&&(e[s].dirty=!0)}},{key:"refreshShapes",value:function(t,e){for(var r=0,n=t.length;r<n;r++){var o=t[r];this.storage.mod(o.id)}return this.refresh(e),this}},{key:"clear",value:function(){for(var t in this._layers)"hover"!=t&&this._layers[t].clear();return this}},{key:"modLayer",value:function(t,e){if(e){this._layerConfig[t]?(new Xj).merge(this._layerConfig[t],e,!0):this._layerConfig[t]=e;var r=this._layers[t];r&&(new Xj).merge(r,this._layerConfig[t],!0)}}},{key:"delLayer",value:function(t){var e=this._layers[t];e&&(this.modLayer(t,{position:e.position,rotation:e.rotation,scale:e.scale}),e.dom.parentNode.removeChild(e.dom),delete this._layers[t],this._zlevelList.splice((new Xj).indexOf(this._zlevelList,t),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var t=this.storage.getHoverShapes(!0),e=0,r=t.length;e<r;e++)this._brushHover(t[e]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var t=this._layers.hover;return t&&t.clear(),this}},{key:"resize",value:function(){var t=this._domRoot;t.style.display="none";var e=this._getWidth(),r=this._getHeight();if(t.style.display="",this._width!=e||r!=this._height){for(var n in this._width=e,this._height=r,t.style.width=e+"px",t.style.height=r+"px",this._layers)this._layers[n].resize(e,r);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(t){var e=this._layers[t];e&&e.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(e,r,n){var o=t.createDom(dt.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(o);var i=o.getContext("2d");1!=t.devicePixelRatio&&i.scale(t.devicePixelRatio,t.devicePixelRatio),i.fillStyle=r||"#fff",i.rect(0,0,this._width*t.devicePixelRatio,this._height*t.devicePixelRatio),i.fill();var a=this;this.storage.iterShape(function(t){if(!t.invisible&&(!t.onbrush||t.onbrush&&!t.onbrush(i,!1)))if(FC.catchBrushException)try{t.brush(i,!1,a.updatePainter)}catch(e){HC.Util_log(e,"brush error of "+t.type,t)}else t.brush(i,!1,a.updatePainter)},{normal:"up",update:!0});var s=o.toDataURL(e,n);return i=null,this._bgDom.removeChild(o),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientWidth||parseInt(e.width,10))-parseInt(e.paddingLeft,10)-parseInt(e.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var t=this.root,e=t.currentStyle||document.defaultView.getComputedStyle(t);return((t.clientHeight||parseInt(e.height,10))-parseInt(e.paddingTop,10)-parseInt(e.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(t){var e=this._layers.hover.ctx;if(!t.onbrush||t.onbrush&&!t.onbrush(e,!0)){var r=this.getLayer(t.zlevel);if(r.needTransform&&(e.save(),r.setTransform(e)),FC.catchBrushException)try{t.brush(e,!0,this.updatePainter)}catch(e){HC.Util_log(e,"hoverBrush error of "+t.type,t)}else t.brush(e,!0,this.updatePainter);r.needTransform&&e.restore()}}},{key:"_shapeToImage",value:function(t,e,r,n,o){var i=document.createElement("canvas"),a=i.getContext("2d"),s=o||window.devicePixelRatio||1;i.style.width=r+"px",i.style.height=n+"px",i.setAttribute("width",r*s),i.setAttribute("height",n*s),a.clearRect(0,0,r*s,n*s);var l={position:e.position,rotation:e.rotation,scale:e.scale};e.position=[0,0,0],e.rotation=0,e.scale=[1,1],e&&e.brush(a,!1);var u=new JA({id:t,style:{x:0,y:0,image:i}});return null!=l.position&&(u.position=e.position=l.position),null!=l.rotation&&(u.rotation=e.rotation=l.rotation),null!=l.scale&&(u.scale=e.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var e=this;return function(r,n,o,i){return e._shapeToImage(r,n,o,i,t.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(t){if(!(t instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var e=0;e<t.length;e++)this.storage.addHover(t[e]),this._brushHover(t[e])}}],[{key:"createDom",value:function(e,r,n){var o=document.createElement(r),i=n._width,a=n._height;return o.style.position="absolute",o.style.left=0,o.style.top=0,o.style.width=i+"px",o.style.height=a+"px",o.setAttribute("width",i*t.devicePixelRatio),o.setAttribute("height",a*t.devicePixelRatio),o.setAttribute("id",e),o}}]),t}(),qR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&FR(t,e)}(r,YC);var e=BR(r);function r(t,n){var o;return UR(this,r),(o=e.call(this,t,n)).dom=null,o.domBack=null,o.ctxBack=null,o.painter=n,o.unusedCount=0,o.config=null,o.dirty=!0,o.elCount=0,o.clearColor=0,o.motionBlur=!1,o.lastFrameAlpha=.7,o.zoomable=!1,o.panable=!1,o.maxZoom=1/0,o.minZoom=0,o.ctx=null,o.dom=JR.createDom(dt.createUniqueID("SuperMap.Theme"+t),"canvas",n),o.dom.onselectstart=function(){return!1},o.dom.style["-webkit-user-select"]="none",o.dom.style["user-select"]="none",o.dom.style["-webkit-touch-callout"]="none",o.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",o}return VR(r,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,YC.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=JR.devicePixelRatio&&this.ctx.scale(JR.devicePixelRatio,JR.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=JR.createDom(dt.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=JR.devicePixelRatio&&this.ctxBack.scale(JR.devicePixelRatio,JR.devicePixelRatio)}},{key:"resize",value:function(t,e){this.dom.style.width=t+"px",this.dom.style.height=e+"px",this.dom.setAttribute("width",t*JR.devicePixelRatio),this.dom.setAttribute("height",e*JR.devicePixelRatio),1!=JR.devicePixelRatio&&this.ctx.scale(JR.devicePixelRatio,JR.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",t*JR.devicePixelRatio),this.domBack.setAttribute("height",e*JR.devicePixelRatio),1!=JR.devicePixelRatio&&this.ctxBack.scale(JR.devicePixelRatio,JR.devicePixelRatio))}},{key:"clear",value:function(){var t=this.dom,e=this.ctx,r=t.width,n=t.height,o=this.clearColor,i=this.motionBlur,a=this.lastFrameAlpha;if(i&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(t,0,0,r/JR.devicePixelRatio,n/JR.devicePixelRatio)),o?(e.save(),e.fillStyle=this.config.clearColor,e.fillRect(0,0,r/JR.devicePixelRatio,n/JR.devicePixelRatio),e.restore()):e.clearRect(0,0,r/JR.devicePixelRatio,n/JR.devicePixelRatio),i){var s=this.domBack;e.save(),e.globalAlpha=a,e.drawImage(s,0,0,r/JR.devicePixelRatio,n/JR.devicePixelRatio),e.restore()}}}]),r}();function HR(t){"@babel/helpers - typeof";return(HR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WR(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function YR(t,e){return(YR=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function XR(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=ZR(t);if(e){var o=ZR(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===HR(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return QR(t)}(this,r)}}function QR(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ZR(t){return(ZR=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var KR=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&YR(t,e)}(i,_C);var e,r,n,o=XR(i);function i(t,e,r){var n,a,s;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(n=o.call(this,t,e,r)).root=t,n.storage=e,n.painter=r,n._lastX=0,n._lastY=0,n._mouseX=0,n._mouseY=0,n._findHover=null,n._domHover=null,n._findHover=(a=function(t,e,r){var n=this;if(n._draggingTarget&&n._draggingTarget.id==t.id||t.isSilent())return!1;var o=n._event;if(t.isCover(e,r)){if(t.hoverable)if(t.isHoverByRefDataID&&!0===t.isHoverByRefDataID){if(t.refDataID){var i=t.refDataID,a=null;t.refDataHoverGroup&&(a=t.refDataHoverGroup);for(var s=n.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&i===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&n.storage.addHover(c):n.storage.addHover(c))}}}else n.storage.addHover(t);for(var f=t.parent;f;){if(f.clipShape&&!f.clipShape.isCover(n._mouseX,n._mouseY))return!1;f=f.parent}return n._lastHover!=t&&(n._processOutShape(o),n._processDragLeave(o),n._lastHover=t,n._processDragEnter(o)),n._processOverShape(o),n._processDragOver(o),n._hasfound=1,!0}return!1},s=QR(n),function(t,e,r){return a.call(s,t,e,r)}),n._domHover=r.getDomHover(),n.CLASS_NAME="SuperMap.LevelRenderer.Handler";var l={resize:function(t){t=t||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(FC.EVENT.RESIZE,t)},click:function(t){t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<10&&this._dispatchAgency(e,FC.EVENT.CLICK,t),this._mousemoveHandler(t)},dblclick:function(t){t=t||window.event,t=this._zrenderEventFixed(t);var e=this._lastHover;(e&&e.clickable||!e)&&this._clickThreshold<5&&this._dispatchAgency(e,FC.EVENT.DBLCLICK,t),this._mousemoveHandler(t)},mousewheel:function(t){var e=((t=this._zrenderEventFixed(t)).wheelDelta||-t.detail)>0?1.1:1/1.1,r=this.painter.getLayers(),n=!1;for(var o in r)if("hover"!==o){var i=r[o],a=i.position;if(i.zoomable){i.__zoom=i.__zoom||1;var s=i.__zoom;s*=e,e=(s=Math.max(Math.min(i.maxZoom,s),i.minZoom))/i.__zoom,i.__zoom=s,a[0]-=(this._mouseX-a[0])*(e-1),a[1]-=(this._mouseY-a[1])*(e-1),i.scale[0]*=e,i.scale[1]*=e,i.dirty=!0,n=!0}}n&&this.painter.refresh(),this._dispatchAgency(this._lastHover,FC.EVENT.MOUSEWHEEL,t),this._mousemoveHandler(t)},mousemove:function(t){this._clickThreshold++,t=this._zrenderEventFixed(t),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=HC.Util_event.getX(t),this._mouseY=HC.Util_event.getY(t);var e=this._mouseX-this._lastX,r=this._mouseY-this._lastY;this._processDragStart(t),this._hasfound=0,this._event=t,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(t),this._processDragLeave(t)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var n="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,e,r),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var o=this.painter.getLayers(),i=!1;for(var a in o)if("hover"!==a){var s=o[a];s.panable&&(n="move",s.position[0]+=e,s.position[1]+=r,i=!0,s.dirty=!0)}i&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?n="move":this._hasfound&&this._lastHover.clickable&&(n="pointer"),this.root.style.cursor=n,this._dispatchAgency(this._lastHover,FC.EVENT.MOUSEMOVE,t),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(t){var e=(t=this._zrenderEventFixed(t)).toElement||t.relatedTarget;if(e!=this.root)for(;e&&9!=e.nodeType;){if(e==this.root)return void this._mousemoveHandler(t);e=e.parentNode}t.zrenderX=this._lastX,t.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(t),this._processDrop(t),this._processDragEnd(t),this.painter.refreshHover(),this.dispatch(FC.EVENT.GLOBALOUT,t)},mousedown:function(t){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=t.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,t=this._zrenderEventFixed(t),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,FC.EVENT.MOUSEDOWN,t),this._lastDownButton=t.button},mouseup:function(t){t=this._zrenderEventFixed(t),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,FC.EVENT.MOUSEUP,t),this._processDrop(t),this._processDragEnd(t)},touchstart:function(t){t=this._zrenderEventFixed(t,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(t),this._mousedownHandler(t)},touchmove:function(t){t=this._zrenderEventFixed(t,!0),this._mousemoveHandler(t),this._isDragging&&HC.Util_event.stop(t)},touchend:function(t){t=this._zrenderEventFixed(t,!0),this._mouseupHandler(t);var e=new Date;e-this._lastTouchMoment<FC.EVENT.touchClickDelay&&(this._mobildFindFixed(t),this._clickHandler(t),e-this._lastClickMoment<FC.EVENT.touchClickDelay/2&&(this._dblclickHandler(t),this._lastHover&&this._lastHover.clickable&&HC.Util_event.stop(t)),this._lastClickMoment=e),this.painter.clearHover()}};function u(t,e){return function(r){return t.call(e,r)}}return function(t){var e=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],r=e.length;for(;r--;){var n=e[r];t["_"+n+"Handler"]=u(l[n],t)}}(QR(n)),window.addEventListener?(window.addEventListener("resize",n._resizeHandler),HC.Util_env.os.tablet||HC.Util_env.os.phone?(t.addEventListener("touchstart",n._touchstartHandler),t.addEventListener("touchmove",n._touchmoveHandler),t.addEventListener("touchend",n._touchendHandler)):(t.addEventListener("click",n._clickHandler),t.addEventListener("dblclick",n._dblclickHandler),t.addEventListener("mousewheel",n._mousewheelHandler),t.addEventListener("mousemove",n._mousemoveHandler),t.addEventListener("mousedown",n._mousedownHandler),t.addEventListener("mouseup",n._mouseupHandler)),t.addEventListener("DOMMouseScroll",n._mousewheelHandler),t.addEventListener("mouseout",n._mouseoutHandler)):(window.attachEvent("onresize",n._resizeHandler),t.attachEvent("onclick",n._clickHandler),t.ondblclick=n._dblclickHandler,t.attachEvent("onmousewheel",n._mousewheelHandler),t.attachEvent("onmousemove",n._mousemoveHandler),t.attachEvent("onmouseout",n._mouseoutHandler),t.attachEvent("onmousedown",n._mousedownHandler),t.attachEvent("onmouseup",n._mouseupHandler)),n}return e=i,(r=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,_C.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(t,e){return this.bind(t,e),this}},{key:"un",value:function(t,e){return this.unbind(t,e),this}},{key:"trigger",value:function(t,e){var r=FC.EVENT;switch(t){case r.RESIZE:case r.CLICK:case r.DBLCLICK:case r.MOUSEWHEEL:case r.MOUSEMOVE:case r.MOUSEDOWN:case r.MOUSEUP:case r.MOUSEOUT:this["_"+t+"Handler"](e)}}},{key:"dispose",value:function(){var t=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),HC.Util_env.os.tablet||HC.Util_env.os.phone?(t.removeEventListener("touchstart",this._touchstartHandler),t.removeEventListener("touchmove",this._touchmoveHandler),t.removeEventListener("touchend",this._touchendHandler)):(t.removeEventListener("click",this._clickHandler),t.removeEventListener("dblclick",this._dblclickHandler),t.removeEventListener("mousewheel",this._mousewheelHandler),t.removeEventListener("mousemove",this._mousemoveHandler),t.removeEventListener("mousedown",this._mousedownHandler),t.removeEventListener("mouseup",this._mouseupHandler)),t.removeEventListener("DOMMouseScroll",this._mousewheelHandler),t.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),t.detachEvent("onclick",this._clickHandler),t.detachEvent("dblclick",this._dblclickHandler),t.detachEvent("onmousewheel",this._mousewheelHandler),t.detachEvent("onmousemove",this._mousemoveHandler),t.detachEvent("onmouseout",this._mouseoutHandler),t.detachEvent("onmousedown",this._mousedownHandler),t.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(t){var e=this._lastHover;if(this._isMouseDown&&e&&e.draggable&&!this._draggingTarget&&this._mouseDownTarget==e){if(e.dragEnableTime&&new Date-this._lastMouseDownMoment<e.dragEnableTime)return;var r=e;this._draggingTarget=r,this._isDragging=1,r.invisible=!0,this.storage.mod(r.id),this._dispatchAgency(r,FC.EVENT.DRAGSTART,t),this.painter.refresh()}}},{key:"_processDragEnter",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,FC.EVENT.DRAGENTER,t,this._draggingTarget)}},{key:"_processDragOver",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,FC.EVENT.DRAGOVER,t,this._draggingTarget)}},{key:"_processDragLeave",value:function(t){this._draggingTarget&&this._dispatchAgency(this._lastHover,FC.EVENT.DRAGLEAVE,t,this._draggingTarget)}},{key:"_processDrop",value:function(t){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,FC.EVENT.DROP,t,this._draggingTarget))}},{key:"_processDragEnd",value:function(t){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,FC.EVENT.DRAGEND,t),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(t){this._dispatchAgency(this._lastHover,FC.EVENT.MOUSEOVER,t)}},{key:"_processOutShape",value:function(t){this._dispatchAgency(this._lastHover,FC.EVENT.MOUSEOUT,t)}},{key:"_dispatchAgency",value:function(t,e,r,n){var o="on"+e,i={type:e,event:r,target:t,cancelBubble:!1},a=t;for(n&&(i.dragged=n);a&&(a[o]&&(i.cancelBubble=a[o](i)),a.dispatch(e,i),a=a.parent,!i.cancelBubble););t?i.cancelBubble||this.dispatch(e,i):n||this.dispatch(e,{type:e,event:r})}},{key:"_iterateAndFindHover",value:function(){for(var t,e=HC.Util_matrix.create(),r=this.storage.getShapeList(),n=[0,0],o=r.length-1;o>=0;o--){var i=r[o];if(void 0!==i.zlevel&&(t=this.painter.getLayer(i.zlevel,t),n[0]=this._mouseX,n[1]=this._mouseY,t.needTransform&&(HC.Util_matrix.invert(e,t.transform),HC.Util_vector.applyTransform(n,n,e))),this._findHover(i,n[0],n[1]))break}}},{key:"_mobildFindFixed",value:function(t){var e=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=t.zrenderX,this._mouseY=t.zrenderY,this._event=t,this._iterateAndFindHover();for(var r=0;!this._lastHover&&r<e.length;r++){var n=e[r];n.x&&(this._mouseX+=n.x),n.y&&(this._mouseX+=n.y),this._iterateAndFindHover()}this._lastHover&&(t.zrenderX=this._mouseX,t.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(t,e){if(t.zrenderFixed)return t;if(e){var r="touchend"!=t.type?t.targetTouches[0]:t.changedTouches[0];if(r){var n=this.root.getBoundingClientRect();t.zrenderX=r.clientX-n.left,t.zrenderY=r.clientY-n.top}}else{var o=(t=t||window.event).toElement||t.relatedTarget||t.srcElement||t.target;o&&o!=this._domHover&&(t.zrenderX=(void 0!==t.offsetX?t.offsetX:t.layerX)+o.offsetLeft,t.zrenderY=(void 0!==t.offsetY?t.offsetY:t.layerY)+o.offsetTop)}return t.zrenderFixed=1,t}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&WR(e.prototype,r),n&&WR(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function $R(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var tL=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"Linear",value:function(t){return t}},{key:"QuadraticIn",value:function(t){return t*t}},{key:"QuadraticOut",value:function(t){return t*(2-t)}},{key:"QuadraticInOut",value:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},{key:"CubicIn",value:function(t){return t*t*t}},{key:"CubicOut",value:function(t){return--t*t*t+1}},{key:"CubicInOut",value:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},{key:"QuarticIn",value:function(t){return t*t*t*t}},{key:"QuarticOut",value:function(t){return 1- --t*t*t*t}},{key:"QuarticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},{key:"QuinticIn",value:function(t){return t*t*t*t*t}},{key:"QuinticOut",value:function(t){return--t*t*t*t*t+1}},{key:"QuinticInOut",value:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},{key:"SinusoidalIn",value:function(t){return 1-Math.cos(t*Math.PI/2)}},{key:"SinusoidalOut",value:function(t){return Math.sin(t*Math.PI/2)}},{key:"SinusoidalInOut",value:function(t){return.5*(1-Math.cos(Math.PI*t))}},{key:"ExponentialIn",value:function(t){return 0===t?0:Math.pow(1024,t-1)}},{key:"ExponentialOut",value:function(t){return 1===t?1:1-Math.pow(2,-10*t)}},{key:"ExponentialInOut",value:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},{key:"CircularIn",value:function(t){return 1-Math.sqrt(1-t*t)}},{key:"CircularOut",value:function(t){return Math.sqrt(1- --t*t)}},{key:"CircularInOut",value:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},{key:"ElasticIn",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),-r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),r*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(t){var e,r=.1;return 0===t?0:1===t?1:(r<1?(r=1,e=.1):e=.4*Math.asin(1/r)/(2*Math.PI),(t*=2)<1?r*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:r*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(t){var e=1.70158;return t*t*((e+1)*t-e)}},{key:"BackOut",value:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1}},{key:"BackInOut",value:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},{key:"BounceIn",value:function(t){return 1-this.BounceOut(1-t)}},{key:"BounceOut",value:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375}},{key:"BounceInOut",value:function(t){return t<.5?.5*this.BounceIn(2*t):.5*this.BounceOut(2*t-1)+.5}}])&&$R(e.prototype,r),n&&$R(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._targetPool=e.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=e.life||1e3,this._delay=e.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==e.loop&&e.loop,this.gap=e.gap||0,this.easing=e.easing||"Linear",this.onframe=e.onframe,this.ondestroy=e.ondestroy,this.onrestart=e.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){}},{key:"step",value:function(t){var e=new tL,r=(t-this._startTime)/this._life;if(!(r<0)){r=Math.min(r,1);var n="string"==typeof this.easing?e[this.easing]:this.easing,o="function"==typeof n?n(r):r;return this.fire("frame",o),1==r?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var t=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-t+this.gap}},{key:"fire",value:function(t,e){for(var r=0,n=this._targetPool.length;r<n;r++)this["on"+t]&&this["on"+t](this._targetPool[r],e)}}])&&eL(e.prototype,r),n&&eL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function nL(t){"@babel/helpers - typeof";return(nL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oL(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function iL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function aL(t,e,r){return e&&iL(t.prototype,e),r&&iL(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function sL(t,e){return(sL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function lL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cL(t);if(e){var o=cL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return uL(t)}(this,r)}}function uL(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function cL(t){return(cL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&sL(t,e)}(r,_C);var e=lL(r);function r(t){var n;return oL(this,r),n=e.call(this,t),t=t||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,dt.extend(uL(n),t),n.CLASS_NAME="SuperMap.LevelRenderer.Animation",n}return aL(r,[{key:"add",value:function(t){this._clips.push(t)}},{key:"remove",value:function(t){var e=(new Xj).indexOf(this._clips,t);e>=0&&this._clips.splice(e,1)}},{key:"_update",value:function(){for(var t=(new Date).getTime(),e=t-this._time,r=this._clips,n=r.length,o=[],i=[],a=0;a<n;a++){var s=r[a],l=s.step(t);l&&(o.push(l),i.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<n;)r[u]._needsRemove?(r[u]=r[n-1],r.pop(),n--):u++;n=o.length;for(var c=0;c<n;c++)i[c].fire(o[c]);this._time=t,this.onframe(e),this.dispatch("frame",e)}},{key:"start",value:function(){var t=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){setTimeout(t,16)},e=this;this._running=!0,this._time=(new Date).getTime(),t(function r(){e._running&&(e._update(),t(r))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(t,e){var r=new hL(t,(e=e||{}).loop,e.getter,e.setter);return r.animation=this,r}}],[{key:"_interpolateNumber",value:function(t,e,r){return(e-t)*r+t}},{key:"_interpolateArray",value:function(t,e,n,o,i){var a=t.length;if(1==i)for(var s=0;s<a;s++)o[s]=r._interpolateNumber(t[s],e[s],n);else for(var l=t[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)o[u][c]=r._interpolateNumber(t[u][c],e[u][c],n)}},{key:"_isArrayLike",value:function(t){switch(nL(t)){case"undefined":case"string":return!1}return void 0!==t.length}},{key:"_catmullRomInterpolateArray",value:function(t,e,n,o,i,a,s,l,u){var c=t.length;if(1==u)for(var f=0;f<c;f++)l[f]=r._catmullRomInterpolate(t[f],e[f],n[f],o[f],i,a,s);else for(var h=t[0].length,p=0;p<c;p++)for(var y=0;y<h;y++)l[p][y]=r._catmullRomInterpolate(t[p][y],e[p][y],n[p][y],o[p][y],i,a,s)}},{key:"_catmullRomInterpolate",value:function(t,e,r,n,o,i,a){var s=.5*(r-t),l=.5*(n-e);return(2*(e-r)+s+l)*a+(-3*(e-r)-2*s-l)*i+s*o+e}},{key:"_cloneValue",value:function(t){var e=Array.prototype.slice;if(r._isArrayLike(t)){var n=t.length;if(r._isArrayLike(t[0])){for(var o=[],i=0;i<n;i++)o.push(e.call(t[i]));return o}return e.call(t)}return t}},{key:"rgba2String",value:function(t){return t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.floor(t[2]),"rgba("+t.join(",")+")"}}]),r}(),hL=function(){function t(e,r,n,o){oL(this,t),this._tracks={},this._target=e,this._loop=r||!1,this._getter=n||function(t,e){return t[e]},this._setter=o||function(t,e,r){t[e]=r},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return aL(t,[{key:"when",value:function(t,e){for(var r in e)this._tracks[r]||(this._tracks[r]=[],0!==t&&this._tracks[r].push({time:0,value:fL._cloneValue(this._getter(this._target,r))})),this._tracks[r].push({time:parseInt(t,10),value:e[r]});return this}},{key:"during",value:function(t){return this._onframeList.push(t),this}},{key:"start",value:function(t){var e=this,r=this._setter,n=this._getter,o=e._onframeList.length,i="spline"===t,a=function(){if(e._clipCount--,0===e._clipCount){e._tracks={};for(var t=e._doneList.length,r=0;r<t;r++)e._doneList[r].call(e)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=fL._isArrayLike(c),h=!1,p=f&&fL._isArrayLike(c[0])?2:1;s.sort(function(t,e){return t.time-e.time});for(var y=s[u-1].time,d=[],b=[],v=0;v<u;v++){d.push(s[v].time/y);var m=s[v].value;"string"==typeof m&&(0===(m=HC.Util_color.toArray(m)).length&&(m[0]=m[1]=m[2]=0,m[3]=1),h=!0),b.push(m)}var g,w,_,O,S,x,P,E=0,k=0;if(h)var j=[0,0,0,0];var T=new rL({target:e._target,life:y,loop:e._loop,delay:e._delay,onframe:function(t,a){if(a<k){for(g=Math.min(E+1,u-1),w=g;w>=0&&!(d[w]<=a);w--);w=Math.min(w,u-2)}else{for(w=E;w<u&&!(d[w]>a);w++);w=Math.min(w-1,u-2)}E=w,k=a;var s=d[w+1]-d[w];if(0!==s){var c,y;for(_=(a-d[w])/s,i?(S=b[w],O=b[0===w?w:w-1],x=b[w>u-2?u-1:w+1],P=b[w>u-3?u-1:w+2],f?fL._catmullRomInterpolateArray(O,S,x,P,_,_*_,_*_*_,n(t,l),p):(c=h?fL.rgba2String(j):fL._catmullRomInterpolate(O,S,x,P,_,_*_,_*_*_),r(t,l,c))):f?fL._interpolateArray(b[w],b[w+1],_,n(t,l),p):(h?(fL._interpolateArray(b[w],b[w+1],_,j,1),y=fL.rgba2String(j)):y=fL._interpolateNumber(b[w],b[w+1],_),r(t,l,y)),w=0;w<o;w++)e._onframeList[w](t,a)}},ondestroy:a});t&&"spline"!==t&&(T.easing=t),e._clipList.push(T),e._clipCount++,e.animation.add(T)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var t=0;t<this._clipList.length;t++){var e=this._clipList[t];this.animation.remove(e)}this._clipList=[]}},{key:"delay",value:function(t){return this._delay=t,this}},{key:"done",value:function(t){return t&&this._doneList.push(t),this}}]),t}();function pL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yL=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.storage=new IR,this.painter=new JR(r,this.storage),this.handler=new KR(r,this.storage,this.painter),this.animatingElements=[],this.animation=new fL({stage:{update:t.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var e,r,n;return e=t,n=[{key:"getFrameCallback",value:function(t){return function(){var e=t.animatingElements;if(e instanceof Array){for(var r=0,n=e.length;r<n;r++)t.storage.mod(e[r].id);(e.length||t._needsRefreshNextFrame)&&t.refresh()}}}}],(r=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(t){return this.storage.addRoot(t),this}},{key:"addGroup",value:function(t){return this.storage.addRoot(t),this}},{key:"delShape",value:function(t){return this.storage.delRoot(t),this}},{key:"delGroup",value:function(t){return this.storage.delRoot(t),this}},{key:"modShape",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modGroup",value:function(t,e){return this.storage.mod(t,e),this}},{key:"modLayer",value:function(t,e){return this.painter.modLayer(t,e),this}},{key:"addHoverShape",value:function(t){return this.storage.addHover(t),this}},{key:"render",value:function(t){return this.painter.render(t),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(t){return this.painter.refresh(t),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(t){return this.painter.refreshHover(t),this}},{key:"refreshShapes",value:function(t,e){return this.painter.refreshShapes(t,e),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(t,e,r){if("string"==typeof t&&(t=this.storage.get(t)),t){var n;if(e){for(var o=e.split("."),i=t,a=0,s=o.length;a<s;a++)i&&(i=i[o[a]]);i&&(n=i)}else n=t;if(!n)return void HC.Util_log('Property "'+e+'" is not existed in element '+t.id);var l=this.animatingElements;return void 0===t.__aniCount&&(t.__aniCount=0),0===t.__aniCount&&l.push(t),t.__aniCount++,this.animation.animate(n,{loop:r}).done(function(){if(t.__aniCount--,0===t.__aniCount){var e=(new Xj).indexOf(l,t);l.splice(e,1)}})}HC.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(t,e,r){return this.painter.toDataURL(t,e,r)}},{key:"shapeToImage",value:function(t,e,r){var n=dt.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(n,t,e,r)}},{key:"on",value:function(t,e){return this.handler.on(t,e),this}},{key:"un",value:function(t,e){return this.handler.un(t,e),this}},{key:"trigger",value:function(t,e){return this.handler.trigger(t,e),this.handler.dispatch(t,e),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(t){return this.painter.updateHoverLayer(t),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&pL(e.prototype,r),n&&pL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function dL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var bL=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),t._instances={},t.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var e,r,n;return e=t,(r=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(e){var r=new yL(dt.createUniqueID("LRenderer_"),e);return t._instances[r.id]=r,r}},{key:"dispose",value:function(e){if(e)e.dispose(),this.delInstance(e.id);else{for(var r in t._instances)t._instances[r].dispose();t._instances={}}return this}},{key:"getInstance",value:function(e){return t._instances[e]}},{key:"delInstance",value:function(e){return delete t._instances[e],this}}])&&dL(e.prototype,r),n&&dL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function vL(t,e,r){if(t===r||t===e)return t;var n=r-e;return((t-e)%n+n)%n+e}function mL(t){return t*Math.PI/180}Math.PI,Math.PI;var gL={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},wL={fileMaxSize:10485760};function _L(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var OL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.FileTypes=gL,this.FileConfig=wL,this.loadFileObject=e&&e.loadFileObject?e.loadFileObject:[]}var e,r,n;return e=t,(r=[{key:"set",value:function(t,e){this[t]=e}},{key:"get",value:function(t){return this[t]}}])&&_L(e.prototype,r),n&&_L(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function SL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xL=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initView()}var e,r,n;return e=t,(r=[{key:"_initView",value:function(){var t=document.createElement("div");t.hidden=!0,t.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var e=document.createElement("div");e.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),e.appendChild(this.icon),t.appendChild(e);var r=document.createElement("div");r.setAttribute("class","component-messagebox"),r.innerHTML="",t.appendChild(r),this.messageBox=r;var n=document.createElement("div");n.setAttribute("class","component-messagebox__cancelbtncontainer");var o=document.createElement("button");o.setAttribute("class","component-messagebox__cancelBtn"),o.innerHTML="x",o.onclick=this.closeView.bind(this),n.appendChild(o),t.appendChild(n),this.messageBoxContainer=t,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===e?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===e?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===e&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=t,this.messageBoxContainer.hidden=!1}}])&&SL(e.prototype,r),n&&SL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),PL=function(){try{return echarts}catch(t){return{}}}(),EL={"en-US":{title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"},"zh-CN":{title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"},code:null,defaultCode:"en-US",getCode:function(){return EL.code||EL.setCode(),EL.code},setCode:function(){var t=this.getLanguageFromCookie();t||(t=EL.defaultCode,t="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage),0===t.indexOf("zh")&&(t="zh-CN"),0===t.indexOf("en")&&(t="en-US"),EL.code=t},getLanguageFromCookie:function(){for(var t=document.cookie.split(";"),e=0;e<t.length;e++){for(var r=t[e];" "===r.charAt(0);)r=r.substring(1);if(-1!==r.indexOf("language="))return r.substring("language=".length,r.length)}return""},i18n:function(t){var e=EL[EL.getCode()],r=e&&e[t];return r||(r=t),r}},kL=function(){try{return XLSX}catch(t){return{}}}(),jL={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(t,e,r,n,o){gL.JSON===t||gL.GEOJSON===t?this.readTextFile(e,r,n,o):gL.EXCEL!==t&&gL.CSV!==t||this.readXLSXFile(e,r,n,o)},readTextFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){e&&e.call(n,t.target.result)},o.onerror=function(t){r&&r.call(n,t)},this.rAT?o.readAsText(t.file,"utf-8"):o.readAsBinaryString(t.file)},readXLSXFile:function(t,e,r,n){var o=new FileReader;o.onloadend=function(t){var o=new Uint8Array(t.target.result),i=kL.read(o,{type:"array"});try{if(i&&i.SheetNames&&i.SheetNames.length>0){var a=i.SheetNames[0],s=kL.utils.sheet_to_csv(i.Sheets[a]);e&&e.call(n,s)}}catch(t){r&&r.call(n,t)}},o.onerror=function(t){r&&r.call(n,t)},this.rABF&&o.readAsArrayBuffer(t.file)},processDataToGeoJson:function(t,e,r,n,o){var i=null;if("EXCEL"===t||"CSV"===t)i=this.processExcelDataToGeoJson(e),r&&r.call(o,i);else if("JSON"===t||"GEOJSON"===t){var a=e;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?i=a.data.recordsets[0].features:"FeatureCollection"===a.type?i=a:n&&n.call(o,EL.i18n("msg_dataInWrongGeoJSONFormat")),r&&r.call(o,i)}else n&&n.call(o,EL.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(t){for(var e=this.string2Csv(t),r=e.colTitles,n=-1,o=-1,i=0,a=r.length;i<a;i++)this.isXField(r[i])&&(n=i),this.isYField(r[i])&&(o=i);for(var s=[],l=0,u=e.rows.length;l<u;l++){var c=e.rows[l],f=Number(c[n]),h=Number(c[o]),p={};for(var y in e.colTitles){p[e.colTitles[y]]=e.rows[l][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(d)}return s},isXField:function(t){var e=t.toLowerCase();return"x"===e||"smx"===e||"jd"===e||"经度"===e||"东经"===e||"longitude"===e||"lot"===e||"lon"===e||"lng"===e||"x坐标"===e},isYField:function(t){var e=t.toLowerCase();return"y"===e||"smy"===e||"wd"===e||"纬度"===e||"北纬"===e||"latitude"===e||"lat"===e||"y坐标"===e},string2Csv:function(t,e){var r=t.split("\n"),n={};n.colTitles=e?[]:r[0].split(","),n.rows=[];for(var o=e?0:1;o<r.length;o++)r[o]&&n.rows.push(r[o].split(","));return n}};function TL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var CL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e,this.EVENT_TYPES=["getdatafailed"],this.events=new qe(this,null,this.EVENT_TYPES)}var e,r,n;return e=t,(r=[{key:"getDatasetInfo",value:function(t){var e=this.datasets.url,r=this;mn.get(e).then(function(t){return t.json()}).then(function(e){if(e.datasetInfo){var n=e.datasetInfo;r.datasetsInfo={dataSourceName:n.dataSourceName,datasetName:n.name,mapName:e.name},t({result:r.datasetsInfo})}}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDataFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.datasetName+"@"+o.dataSourceName};Object.assign(i,this.datasets.queryInfo),r=new xi(i),n=new ny({queryParameter:r,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new cy(o.dataUrl).processAsync(n,e)}},{key:"getLayerFeatures",value:function(t,e){var r,n,o=t.result,i={name:o.mapName};Object.assign(i,this.datasets.queryInfo),r=new xi(i),n=new _w({queryParams:[r],expectCount:1e5}),new jw(o.dataUrl).processAsync(n,e)}},{key:"getDataInfoByIptl",value:function(t){this.getServiceInfo(this.datasets.url,t)}},{key:"getServiceInfo",value:function(t,e){var r=this;mn.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(n){var o;!1!==n.succeed?n.dataItemServices&&n.dataItemServices.length>0?(n.dataItemServices.forEach(function(n){if("RESTDATA"===n.serviceType&&"PUBLISHED"===n.serviceStatus)o=n;else{if("RESTMAP"!==n.serviceType||"PUBLISHED"!==n.serviceStatus)return void r.getDatafromContent(t,e);o=n}}),o&&r.getDatafromRest(o.serviceType,o.address,e)):r.getDatafromContent(t,e):r._fireFailedEvent(n)}).catch(function(t){console.log(t),r._fireFailedEvent(t)})}},{key:"getDatafromContent",value:function(t,e){var r=this,n={result:{}},o=this;t+="/content.json?pageSize=9999999&currentPage=1",mn.get(t,null,{withCredentials:this.datasets.withCredentials}).then(function(t){return t.json()}).then(function(t){if(!1!==t.succeed){if(t.type){if("JSON"===t.type||"GEOJSON"===t.type){if(t.content=JSON.parse(t.content.trim()),!t.content.features)return void console.log(EL.i18n("msg_jsonResolveFiled"));var i=r._formatGeoJSON(t.content);n.result.features={type:t.content.type,features:i}}else if("EXCEL"===t.type||"CSV"===t.type){var a=r._excelData2Feature(t.content);n.result.features={type:"FeatureCollection",features:a}}e(n,"content")}}else o._fireFailedEvent(t)},this).catch(function(t){console.log(t),o._fireFailedEvent(t)})}},{key:"getDatafromRest",value:function(t,e,r){var n=this,o=this.datasets.withCredentials;if("RESTDATA"===t){var i,a,s="".concat(e,"/data/datasources");mn.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){i=t.datasourceNames[0],s="".concat(e,"/data/datasources/").concat(i,"/datasets"),mn.get(s,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return a=t.datasetNames[0],n.getDatafromRestData("".concat(e,"/data"),[i+":"+a],r),[i+":"+a]}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}else{var l,u,c,f="".concat(e,"/maps");mn.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){l=t[0].name,c=t[0].path,f=f="".concat(e,"/maps/").concat(l,"/layers"),mn.get(f,null,{withCredentials:o}).then(function(t){return t.json()}).then(function(t){return u=t[0].subLayers.layers[0].caption,n.getDatafromRestMap(u,c,r),u}).catch(function(t){n._fireFailedEvent(t)})}).catch(function(t){n._fireFailedEvent(t)})}}},{key:"getDatafromRestData",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(t,e,this.datasets.queryInfo,function(t){r(t,"RESTDATA")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"getDatafromRestMap",value:function(t,e,r){var n=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(e,t,this.datasets.queryInfo,null,null,function(t){r(t,"RESTMAP")},function(t){console.log(t),n._fireFailedEvent(t)})}},{key:"_getFeatureBySQL",value:function(t,e,r,n,o){var i,a,s={name:e.join().replace(":","@")};Object.assign(s,r),i=new xi(s),a=new ny({queryParameter:i,datasetNames:e,fromIndex:0,toIndex:1e5,returnContent:!0}),new cy(t).processAsync(a,function(t){"processCompleted"===t.type?n&&n(t):o&&o(t)})}},{key:"_queryFeatureBySQL",value:function(t,e,r,n,o,i,a,l,u,c){var f,h,p={name:e};Object.assign(p,r),f=new xi(p),n&&(f.fields=n);var y={queryParams:[f]};c&&(y.queryOption=s.ATTRIBUTE),l&&(y.startRecord=l),u&&(y.expectCount=u),o&&(y.prjCoordSys={epsgCode:o}),h=new _w(y),this._queryBySQL(t,h,function(t){"processCompleted"===t.type?i(t):a(t)})}},{key:"_queryBySQL",value:function(t,e,r,n){new jw(t,{format:this._processFormat(n)}).processAsync(e,r)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}},{key:"_formatGeoJSON",value:function(t){var e=t.features;return e.forEach(function(t,e){t.properties.index=e}),e}},{key:"_excelData2Feature",value:function(t){for(var e=t.colTitles,r=-1,n=-1,o=0,i=e.length;o<i;o++)jL.isXField(e[o])&&(r=o),jL.isYField(e[o])&&(n=o);for(var a=[],s=0,l=t.rows.length;s<l;s++){var u=t.rows[s],c=Number(u[r]),f=Number(u[n]),h={};for(var p in t.colTitles){h[t.colTitles[p]]=t.rows[s][p]}h.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(t){var e=t?{error:t,message:EL.i18n("msg_getdatafailed")}:{message:EL.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",e)}}])&&TL(e.prototype,r),n&&TL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function AL(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return ML(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return ML(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function ML(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function RL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var LL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.datasets=e.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=e.type||"bar",this._initXYField(e.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new qe(this,null,this.EVENT_TYPES)}var e,r,n;return e=t,(r=[{key:"_initXYField",value:function(t){var e=this;t&&t.length>0&&t.forEach(function(t){t.xAxis&&e.xField.push({field:t.xAxis.field,name:t.xAxis.name}),t.yAxis&&e.yField.push({field:t.yAxis.field,name:t.yAxis.name})})}},{key:"getDatasetInfo",value:function(t){var e=this;this.createChart=t,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new CL(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(t){e.events.triggerEvent("getdatafailed",t)}}))}},{key:"_getDatasetInfoSuccess",value:function(t){var e=this.datasets.url,r=e.indexOf("rest");if(r>0){var n=e.indexOf("/",r+5),o=e.substring(r+5,n),i=e.substring(0,r+4)+"/data";if("maps"===o){var a=e.indexOf("/",n+1),s=e.substring(n+1,a);i=e.substring(0,r+4)+"/maps/"+s,t.result.dataUrl=i,this._getLayerFeatures(t)}else"data"===o&&(t.result.dataUrl=i,this._getDataFeatures(t))}}},{key:"_getDataInfoSuccess",value:function(t,e){"RESTMAP"===e?this._getChartDatasFromLayer(t):this._getChartDatas(t)}},{key:"_getDataFeatures",value:function(t){this.chartModel.getDataFeatures(t,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(t){this.chartModel.getLayerFeatures(t,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(t){if(t){this.features=t.result.features;var e=this.features.features,r={};if(e.length){var n=e[0],o=[],i=[];for(var a in n.properties)o.push(a),i.push(this._getDataType(n.properties[a]));for(var s in r={features:e,fieldCaptions:o,fieldTypes:i,fieldValues:[]},i){var l=[];for(var u in e){var c=e[u],f=r.fieldCaptions[s],h=c.properties[f];l.push(h)}r.fieldValues.push(l)}this.createChart(r)}}}},{key:"_getChartDatasFromLayer",value:function(t){if(t.result.recordsets){var e=t.result.recordsets[0],r=e.features.features;this.features=e.features;var n={};if(r.length){for(var o in(n={features:e.features,fieldCaptions:e.fieldCaptions,fieldTypes:e.fieldTypes,fieldValues:[]}).fieldCaptions){var i=[];for(var a in r){var s=r[a],l=n.fieldCaptions[o],u=s.properties[l];i.push(u)}n.fieldValues.push(i)}this.createChart(n)}}}},{key:"_createChartOptions",value:function(t){return this.calculatedData=this._createChartDatas(t),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(t){if(t!==this.chartType)return this.chartType=t,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(t,e,r){this.updateChart=r,this.xField=[],this.yField=[],this._initXYField(e),t.type=t.type||"iServer",t.withCredentials=t.withCredentials||!1,this.datasets=t,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(t){var e=this._createChartOptions(t);this.updateChart(e)}},{key:"updateChartOptions",value:function(t,e){if(this.calculatedData){var r=this.grid,n=this._createChartSeries(this.calculatedData,t),o=[];for(var i in this.calculatedData.XData)o.push({value:this.calculatedData.XData[i].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:o,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return e&&(e.grid&&(r=e.grid),e.tooltip&&(l=e.tooltip),e.backgroundColor&&(u=e.backgroundColor)),{backgroundColor:u,grid:r,series:n,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(t){var e=0,r=[],n=t.fieldCaptions,o=this;n.forEach(function(t,r){o.xField[0]&&t===o.xField[0].field&&(e=r)}),this.yFieldName="",this.yField.forEach(function(t,e){0!==e&&(o.yFieldName=o.yFieldName+","),o.yFieldName=o.yFieldName+t.name,n.forEach(function(e,n){e===t.field&&r.push(n)})});var i=this._getAttrData(t,e),a=[];if(r.length>0)r.forEach(function(e){var r=[];for(var n in t.fieldValues[e])r.push({value:t.fieldValues[e][n]});a.push(r)});else{for(var s=[],l=[],u=i.length,c=0;c<u;c++){for(var f=!1,h=0,p=l.length;h<p;h++)if(i[c].fieldsData===l[h].fieldsData){s[h].value++,l[h].recordIndexs.push(c),f=!0;break}f||i[c].fieldsData&&(l.push({fieldsData:i[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}i=l,a=[s]}return{XData:i,YData:a}}},{key:"_getAttrData",value:function(t,e){0===e&&(this.xField=[{field:t.fieldCaptions[e],name:t.fieldCaptions[e]}]);for(var r=[],n=0,o=t.fieldValues[e].length;n<o;n++){var i=t.fieldValues[e][n];r.push({recordIndexs:n,fieldsData:i})}return r}},{key:"_createChartSeries",value:function(t,e){var r=[];return t.YData.forEach(function(t){var n,o=0,i=[],a=AL(t);try{for(a.s();!(n=a.n()).done;){o=n.value.value,i.push({value:o})}}catch(t){a.e(t)}finally{a.f()}var s={type:e,data:i,name:"y"};r.push(s)}),r}},{key:"_isDate",value:function(t){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(t)}},{key:"_isNumber",value:function(t){var e=Number(t);return 0===e||!isNaN(e)}},{key:"_getDataType",value:function(t){if(null!==t&&void 0!==t&&""!==t){if(this._isDate(t))return"DATE";if(this._isNumber(t))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(t){return!(""===t||!this._isMatchUrl(t))&&(!/^http[s]?:\/\/localhost/.test(t)&&!/^http[s]?:\/\/127.0.0.1/.test(t))}},{key:"_isMatchUrl",value:function(t){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(t)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(t){return this.updateChartOptions(this.chartType,t)}}])&&RL(e.prototype,r),n&&RL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function NL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var IL=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.domID=e,this.chartType=r.type||"bar",r.datasets.type=r.datasets.type||"iServer",r.datasets.withCredentials=r.datasets.withCredentials||!1,this.viewModel=new LL(r),this._fillDataToView()}var e,r,n;return e=t,(r=[{key:"onAdd",value:function(t){this.addChart=t}},{key:"_fillDataToView",value:function(){var t=new xL;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(e){t.showView(e.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(t){var e=this.viewModel.setStyle(t);this._updateChart(e)}},{key:"changeType",value:function(t){if(this.chartType!==t){this.chartType=t;var e=this.viewModel.changeType(t);this._updateChart(e)}}},{key:"updateData",value:function(t,e){var r=this;this.viewModel.updateData(t,e,function(t){r._updateChart(t),r.addChart&&r.addChart()})}},{key:"_createChart",value:function(t){this.echart=PL.init(document.getElementById(this.domID),null,{renderer:"canvas"});var e=this.viewModel._createChartOptions(t);this.echart.setOption(e),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(t){this.echart&&(this.echart.clear(),this.echart.setOption(t))}}])&&NL(e.prototype,r),n&&NL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function DL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var FL=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},this.id=e.id?e.id:null,this.rootContainer=null}var e,r,n;return e=t,(r=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&DL(e.prototype,r),n&&DL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function BL(t){"@babel/helpers - typeof";return(BL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function GL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function UL(t,e){return(UL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function zL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=VL(t);if(e){var o=VL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===BL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function VL(t){return(VL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var JL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&UL(t,e)}(i,FL);var e,r,n,o=zL(i);function i(t){var e;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),e=o.call(this,t);var r=t.title?t.title:"";return e._initView(r),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-container");var r=document.createElement("div");r.setAttribute("class","component-title");var n=document.createElement("div");n.innerHTML=t,r.appendChild(n),e.appendChild(r);var o=document.createElement("div");return o.setAttribute("class","component-content"),e.appendChild(o),this.content=o,this.rootContainer=e,e}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&GL(e.prototype,r),n&&GL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function qL(t){"@babel/helpers - typeof";return(qL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function HL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function WL(t,e){return(WL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function YL(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=XL(t);if(e){var o=XL(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===qL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function XL(t){return(XL=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var QL=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&WL(t,e)}(i,FL);var e,r,n,o=YL(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._initView(t),e}return e=i,(r=[{key:"_initView",value:function(t){var e=this._createElement("div","component-selecttool");t.labelName&&(this._createElement("label","component-selecttool__lable--describe",e).innerHTML=t.labelName);var r=this._createElement("div","component-selecttool--chart",e);r.setAttribute("tabindex","1");var n=this._createElement("div","component-selecttool__name",r);n.title=t.optionsArr[0],n.innerHTML=t.optionsArr[0];var o=this._createElement("div","component-selecttool__trianglebtn--chart",r),i=this._createElement("div","component-triangle-down-img",o),a=this._createElement("div","component-selecttool__content",r),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,t.optionsArr),this.optionClickEvent(l,n,t.optionsClickCb),this._selectClickEvent(r,a,i),this.rootContainer=e}},{key:"createOptions",value:function(t,e){for(var r in e){var n=this._createElement("div","component-selecttool__option",t);n.title=e[r],n.innerHTML=e[r]}}},{key:"_selectClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())},t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}},{key:"optionClickEvent",value:function(t,e,r){for(var n=function(){var n=t.children[o];n.onclick=function(){e.innerHTML=n.innerHTML,e.title=n.title,n.getAttribute("data-value")&&e.setAttribute("data-value",n.getAttribute("data-value")),r&&r(n)}},o=0;o<t.children.length;o++)n()}}])&&HL(e.prototype,r),n&&HL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function ZL(t){"@babel/helpers - typeof";return(ZL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function KL(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function $L(t,e){return($L=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function tN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=eN(t);if(e){var o=eN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===ZL(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function eN(t){return(eN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var rN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$L(t,e)}(i,FL);var e,r,n,o=tN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._initView(t),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.className="component-dropdownbox--container";var r=document.createElement("div");r.setAttribute("tabindex","1"),r.className="component-dropdownbox",e.appendChild(r);var n=document.createElement("div");r.appendChild(n),this._createDropDownOption(t[0],n);var o=document.createElement("div");o.className="component-dropdownbox__triangle-btn",r.appendChild(o);var i=document.createElement("div");i.className="component-triangle-down-img",o.appendChild(i);var a={parentEle:r,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:t,triangleBtn:i,dropDownTopContainer:n};this._createDropDownBox(a),this.rootContainer=e}},{key:"_createDropDownBox",value:function(t){var e=t.parentEle,r=t.dropDownTopContainer,n=document.createElement("div");n.className=t.dropDownContent[0],e.appendChild(n);var o=document.createElement("div");o.className=t.scrollareaContent,n.appendChild(o);for(var i=t.optionsArr,a=0;a<i.length;a++)this._createDropDownOption(i[a],o);var s=t.triangleBtn;this._dropDownClickEvent(e,n,s),this._eleOnblur(e,n,s);for(var l=o.children,u=function(t){l[t].onclick=function(){r.innerHTML=l[t].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(t,e){var r=document.createElement("div");r.className="component-dropdownbox__item";var n=t;n.dataValue&&r.setAttribute("data-value",n.dataValue),e.appendChild(r);var o=document.createElement("div");o.className="component-dropdownbox__item__img",r.appendChild(o);var i=document.createElement("div");n.icon.className&&(i.className=n.icon.className),n.icon.background&&(i.style.background=n.icon.background),o.appendChild(i);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=n.title,a.innerHTML=n.title,r.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=n.remark,s.innerHTML=n.remark,r.appendChild(s)}},{key:"_dropDownClickEvent",value:function(t,e,r){t.onclick=function(t){"block"===e.style.display?(e.style.display="none",r.className="component-triangle-down-img"):(e.style.display="block",r.className="triangle-up-img"),t.preventDefault(),t.stopPropagation()},t.onmousedown=function(t){t.target!==this&&(this.focus(),t.preventDefault(),t.stopPropagation())}}},{key:"_eleOnblur",value:function(t,e,r){t.onblur=function(){e.style.display="none",r.className="component-triangle-down-img"}}},{key:"_createElement",value:function(t,e,r){var n=document.createElement(t||"div");return e&&(n.className=e),r&&r.appendChild(n),n}}])&&KL(e.prototype,r),n&&KL(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function nN(t){"@babel/helpers - typeof";return(nN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function oN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function iN(t,e){return(iN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function aN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=sN(t);if(e){var o=sN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===nN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function sN(t){return(sN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var lN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&iN(t,e)}(i,FL);var e,r,n,o=aN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},e=o.call(this,t),t.title=t.title?t.title:"",e._initView(t.title),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-popcontainer");var r=document.createElement("div");r.setAttribute("class","component-popcontainer__header");var n=document.createElement("label");n.setAttribute("class","component-popcontainer__header__title"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),o.onclick=this.closeView.bind(this),e.appendChild(o),e.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-popcontainer__content"),this.content=i,e.appendChild(i),this.rootContainer=e}},{key:"appendContent",value:function(t){this.content.appendChild(t)}}])&&oN(e.prototype,r),n&&oN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function uN(t){"@babel/helpers - typeof";return(uN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function cN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function fN(t,e){return(fN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function hN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=pN(t);if(e){var o=pN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===uN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function pN(t){return(pN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var yN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fN(t,e)}(i,lN);var e,r,n,o=hN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t.title=t.title?t.title:"属性",(e=o.call(this,t)).rootContainer.firstChild.hidden=!0,t.attributes=t.attributes?t.attributes:[],e._createAttributesTable(t.attributes),e}return e=i,(r=[{key:"_createAttributesTable",value:function(t){var e=document.createElement("table");e.setAttribute("class","component-popcontainer__content__table");var r=document.createElement("tbody"),n=!0;for(var o in t){var i=document.createElement("tr");n&&i.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=o,a.appendChild(s);var l=document.createElement("td");l.innerHTML=t[o],i.appendChild(a),i.appendChild(l),r.appendChild(i),n=!n}e.appendChild(r),this.appendContent(e)}}])&&cN(e.prototype,r),n&&cN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function dN(t){"@babel/helpers - typeof";return(dN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function vN(t,e){return(vN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function mN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=gN(t);if(e){var o=gN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===dN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function gN(t){return(gN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var wN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vN(t,e)}(i,FL);var e,r,n,o=mN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t))._initView(),e}return e=i,(r=[{key:"_initView",value:function(){var t=document.createElement("div");t.setAttribute("class","component-tabpage");var e=document.createElement("ul");this.header=e;var r=document.createElement("div");r.setAttribute("class","component-tabpage__content"),this.content=r,t.appendChild(e),t.appendChild(r),this.rootContainer=t}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.header.appendChild(r),this.content.appendChild(n)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.header.children.length;t>0;t--)this.header.removeChild(this.header.children[t]),this.content.removeChild(this.content.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.header.children.length;r++)this.header.children[r].setAttribute("class",""),this.content.children[r].hidden=!0,r===e&&(this.header.children[r].setAttribute("class","on"),this.content.children[r].hidden=!1)}}])&&bN(e.prototype,r),n&&bN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function _N(t){"@babel/helpers - typeof";return(_N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ON(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function SN(t,e){return(SN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function xN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=PN(t);if(e){var o=PN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===_N(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function PN(t){return(PN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var EN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&SN(t,e)}(i,wN);var e,r,n,o=xN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),e.config=t.config,dt.isArray(e.config)?(e.header.hidden=!0,e._createCityItem("城市",e.config),e.content.style.border="none"):(e._createTabs(),e.header.onclick=function(t){for(var r=0;r<e.header.children.length;r++)e.header.children[r].setAttribute("class","");t.target.setAttribute("class","on"),e._createCityContent(t.target.innerHTML)}),e}return e=i,(r=[{key:"_createTabs",value:function(){if(dt.isArray(this.config))for(var t=0;t<this.config.length;t++){var e="";for(var r in this.config[t])e+=r;var n=document.createElement("li");n.innerHTML=e,this.header.appendChild(n)}else for(var o in this.config){var i=document.createElement("li");i.innerHTML=o,this.header.appendChild(i)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(t){for(var e=this.content.children.length;e>0;e--)this.content.removeChild(this.content.children[e-1]);var r=this.config[t];for(var n in r)this._createCityItem(n,r[n])}},{key:"_createCityItem",value:function(t,e){var r=document.createElement("div"),n=document.createElement("div");n.setAttribute("class","component-citytabpag__py-key"),n.innerHTML=t,r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-citytabpag__content");for(var i=0;i<e.length;i++){var a=document.createElement("span");a.innerHTML=e[i],o.appendChild(a)}"HOT"===t&&(o.style.width="428px"),r.appendChild(o),this.content.appendChild(r)}}])&&ON(e.prototype,r),n&&ON(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function kN(t){"@babel/helpers - typeof";return(kN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TN(t,e){return(TN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function CN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=AN(t);if(e){var o=AN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===kN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function AN(t){return(AN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var MN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&TN(t,e)}(i,FL);var e,r,n,o=CN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),(e=o.call(this,t)).navTabsTitle=null,e.navTabsContent=null,t.tabs=t.tabs?t.tabs:[],e._initView(t.tabs),e}return e=i,(r=[{key:"_initView",value:function(t){var e=document.createElement("div");e.setAttribute("class","component-navtabspage");var r=document.createElement("span");r.setAttribute("class","supermapol-icons-close"),r.onclick=this.closeView.bind(this),e.appendChild(r);var n=document.createElement("div");this.navTabsTitle=n,n.setAttribute("class","component-navtabspage__title"),e.appendChild(n);var o=document.createElement("div");this.navTabsContent=o,o.setAttribute("class","component-navtabspage__content"),e.appendChild(o),t.length>0&&this.appendTabs(t),this.rootContainer=e}},{key:"setTabs",value:function(t){this.removeAllTabs(),this.appendTabs(t)}},{key:"appendTabs",value:function(t){for(var e=0;e<t.length;e++){var r=document.createElement("span");r.index=e,r.appendChild(document.createTextNode(t[e].title)),r.onclick=this._changeTabsPage.bind(this);var n=t[e].content;n.index=e,n.hidden=!0,this.navTabsTitle.appendChild(r),this.navTabsContent.appendChild(n)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(t){this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"removeAllTabs",value:function(){for(var t=this.navTabsTitle.children.length;t>0;t--)this.navTabsTitle.removeChild(this.navTabsTitle.children[t]),this.navTabsContent.removeChild(this.navTabsContent.children[t])}},{key:"_changeTabsPage",value:function(t){for(var e=t.target.index,r=0;r<this.navTabsTitle.children.length;r++)this.navTabsTitle.children[r].setAttribute("class",""),this.navTabsContent.children[r].hidden=!0,r===e&&(this.navTabsTitle.children[r].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[r].hidden=!1)}}])&&jN(e.prototype,r),n&&jN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function RN(t){"@babel/helpers - typeof";return(RN="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LN(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function NN(t,e){return(NN=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function IN(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=DN(t);if(e){var o=DN(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===RN(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function DN(t){return(DN=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var FN=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&NN(t,e)}(i,FL);var e,r,n,o=IN(i);function i(t){var e;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),t=t||{},(e=o.call(this,t)).currentPage=0,e.pageNumberLis=[],e.currentPageNumberLis=[],e.linkageEvent=null,t.contents=t.contents?t.contents:null,t.pageCounts=t.pageCounts?t.pageCounts:0,e._initView(t.contents,t.pageCounts),e}return e=i,(r=[{key:"setLinkageEvent",value:function(t){this.linkageEvent=t}},{key:"_initView",value:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-pagination");var n=document.createElement("div");n.setAttribute("class","component-pagination__content"),r.appendChild(n),this.content=n;var o=document.createElement("ul");o.setAttribute("class","component-pagination__link"),o.onclick=this._changePageEvent.bind(this),r.appendChild(o),this._createLink(o),this.link=o,t&&this.setContent(t),0!==e&&this.setPageLink(e),this.rootContainer=r}},{key:"setContent",value:function(t){this.clearContent(),this.appendContent(t)}},{key:"appendContent",value:function(t){this.content.appendChild(t)}},{key:"clearContent",value:function(){for(var t=this.content.children.length-1;t>=0;t--)this.content.removeChild(this.content.children[t])}},{key:"setPageLink",value:function(t){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(t),this._appendPageLink()}},{key:"_createPageLi",value:function(t){for(var e=0;e<t;e++){var r=document.createElement("li");r.innerHTML=e+1,this.pageNumberLis.push(r)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,t<5)this.currentPageNumberLis=this.pageNumberLis;else for(var n=0;n<5;n++)this.currentPageNumberLis.push(this.pageNumberLis[n])}},{key:"_appendPageLink",value:function(){for(var t=0;t<this.currentPageNumberLis.length;t++)this.link.insertBefore(this.currentPageNumberLis[t],this.link.childNodes[this.link.children.length-2]);for(var e=0;e<this.currentPageNumberLis.length;e++)this.currentPageNumberLis[e].setAttribute("class",""),Number(this.currentPageNumberLis[e].innerHTML)===this.currentPage&&this.currentPageNumberLis[e].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var t=this.link.children.length-3;t>1;t--)this.link.removeChild(this.link.children[t])}},{key:"_createLink",value:function(t){for(var e=0;e<4;e++){var r=document.createElement("li");r.setAttribute("class","disable");var n=document.createElement("span");r.appendChild(n),0===e?(n.id="first",n.setAttribute("class","supermapol-icons-first")):1===e?(n.id="prev",n.setAttribute("class","supermapol-icons-prev")):2===e?(n.id="next",n.setAttribute("class","supermapol-icons-next")):3===e&&(n.id="last",n.setAttribute("class","supermapol-icons-last")),t.appendChild(r)}}},{key:"_changePageEvent",value:function(t){var e=t.target;if("disable"!==e.parentElement.classList[0]){var r;if(e.id)r=e.id;else{if(!Number(e.innerHTML))return;r=Number(e.innerHTML)}this._prePageNum(r),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(t){var e=[];if(this.currentPage="first"===t?1:"last"===t?this.pageNumberLis.length:"prev"===t?this.currentPage-1:"next"===t?this.currentPage+1:t,this.pageNumberLis.length<=5)for(var r=0;r<this.pageNumberLis.length;r++)e.push(this.pageNumberLis[r]);else if(this.currentPage<=3)for(var n=0;n<5;n++)e.push(this.pageNumberLis[n]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var o=this.pageNumberLis.length-5;o<this.pageNumberLis.length;o++)e.push(this.pageNumberLis[o]);else for(var i=this.currentPage-3;i<=this.currentPage+1;i++)e.push(this.pageNumberLis[i]);e.length>0&&(this.currentPageNumberLis=e)}}])&&LN(e.prototype,r),n&&LN(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),BN=function(t){return/^.*\.(?:xls|xlsx)$/i.test(t)?gL.EXCEL:/^.*\.(?:csv)$/i.test(t)?gL.CSV:/^.*\.(?:geojson|json)$/i.test(t)?gL.GEOJSON:null},GN=r(9819),UN=r.n(GN);function zN(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function VN(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?zN(Object(r),!0).forEach(function(e){JN(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):zN(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function JN(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function qN(t){return function(t){if(Array.isArray(t))return HN(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return HN(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return HN(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function HN(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function WN(t,e){var r=e&&e.styles&&e.styles.style,n=e&&e.captionFields&&e.captionFields.captionField,o={nodes:[],edges:[]};return t.forEach(function(t){var e=t.path;if(e){var i,a,s=function(t,e,r){var n={nodes:[],edges:[]};return t.forEach(function(t){if(XN(t)){var o=ZN(t,e);n.edges.push(o)}else{var i=QN(t,e,r);n.nodes.push(i)}}),n}(e,r,n),l=s.nodes,u=s.edges;(i=o.nodes).push.apply(i,qN(l)),(a=o.edges).push.apply(a,qN(u))}else if(XN(t)){var c=ZN(t,r);o.edges.push(c)}else{var f=QN(t,r,n);o.nodes.push(f)}}),{nodes:YN(o.nodes),edges:YN(o.edges,"edgeId")}}function YN(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id";return UN()(t,e)}function XN(t){return t.hasOwnProperty("start")&&t.hasOwnProperty("end")}function QN(t,e,r){var n=t.id,o=t.properties,i=t.lables,a=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.labels,o=e.filter(function(t){return"entity"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,l=a.textColor,u=a.font,c=a.size,f=a.entityTypes,h=a.entityIds,p=JSON.parse(h||"[]"),y=JSON.parse(f||"[]");if(p.includes(r)||y.includes(n[0]))return VN(VN({fillColor:s,fontSize:u.fontSize,fill:l,size:c},$N(u.fontName)),KN(u.fontStyle))}return{}}(t,e):{},s=function(t,e){var r=t.id,n=t.labels,o=t.properties;if(e)for(var i=e instanceof Array?e:[e],a=0;a<i.length;a++){var s=i[a],l=s.name,u=s.entityTypes,c=s.entityIds,f=JSON.parse(c||"[]"),h=JSON.parse(u||"[]"),p=n&&n.join("&");if(f.includes(r)||h.includes(p))return o[l]||""}return o[o._labelfieldname]||""}(t,r),l=a.fillColor||"",u={id:n+"",label:s,properties:o,lables:i};return a.size&&(u.size=a.size,delete a.size),a.fillColor&&(u.style={fill:l,stroke:l},delete a.fillColor),0!==Object.keys(a).length&&(u.labelCfg={style:a}),u}function ZN(t,e){var r=t.start,n=t.end,o=t.id,i=t.type,a=t.properties,s=e?function(t,e){if(!e)return{};for(var r=t.id,n=t.type,o=e.filter(function(t){return"relationShip"===t.type}),i=0;i<o.length;i++){var a=o[i],s=a.color,l=a.width,u=a.textColor,c=a.font,f=a.relationTypes,h=a.relationIds,p=JSON.parse(h||"[]"),y=JSON.parse(f||"[]");if(p.includes(r)||y.includes(n))return VN(VN({stroke:s,lineWidth:1.4*Number(l),fontSize:c.fontSize,fill:u},$N(c.fontName)),KN(c.fontStyle))}return{}}(t,e):{},l={source:r+"",target:n+"",edgeId:o+"",label:i,style:{},labelCfg:{},properties:a};return s.stroke&&(l.style.stroke=s.stroke,l.style.endArrow={path:"M 0,0 L 4,2 L 4,-2 Z",fill:s.stroke},delete s.stroke),s.lineWidth&&(l.style.lineWidth=s.lineWidth,delete s.lineWidth),l.labelCfg={style:s},l}function KN(t){return 1===t||"bold"===t?{fontWeight:"bold"}:2===t||"italic"===t?{fontStyle:"italic"}:"bolditalic"===t?{fontWeight:"bold",fontStyle:"italic"}:{}}function $N(t){if(!t)return{};var e=t.split(".");return VN({fontFamily:e[0]},KN(e[1]))}var tI=function(){try{return G6}catch(t){return{}}}(),eI=r.n(tI),rI=r(8813),nI=r.n(rI);function oI(t){return function(t){if(Array.isArray(t))return iI(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return iI(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return iI(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function iI(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function aI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function sI(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?aI(Object(r),!0).forEach(function(e){lI(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):aI(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function lI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function uI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cI=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.config=null,this.graph=null,this.data=null,this.collpasedData={},this.importG6(),this.CLASS_NAME="SuperMap.G6Render"}var e,r,n;return e=t,(r=[{key:"importG6",value:function(){eI()||console.log("please import g6, eg：https://gw.alipayobjects.com/os/lib/antv/g6/4.3.2/dist/g6.min.js")}},{key:"initGraph",value:function(t){var e=new(eI().Graph)(t);return this.graph=e,t&&!1===t.highlightNode||this.highlightNode(e),t&&!1===t.highlightEdge||this.highlightEdge(e),!1===t.dragCanvas&&!1===t.dragNode||this.stopDefaultEventPropagation(),e}},{key:"_getContextMenu",value:function(){var t=this;return new(eI().Menu)({shouldBegin:function(t){return!!(t.target&&t.target.isCanvas&&t.target.isCanvas())||!!t.item},getContent:function(e){var r=e.item;if(!(e.target&&e.target.isCanvas&&e.target.isCanvas())&&r){var n=r.getType(),o=r.getModel();return n&&o&&"node"===n?t.isCollpased(o.id)?"<ul>\n              <li id='expand'>展开</li>\n            </ul>":"<ul>\n              <li id='collapse'>折叠</li>\n            </ul>":void 0}},handleMenuClick:function(e,r){switch(e.id.split("-")[0]){case"hide":t.hideItem(r);break;case"expand":t.expandNode(r);break;case"collapse":t.collapseNode(r);break;case"show":t.showItem(r)}},offsetX:26,offsetY:0,itemTypes:["node","edge","canvas"]})}},{key:"_getGraphConfig",value:function(t){var e=this,r={speed:120,maxIteration:83,tick:function(){e.refreshPositions()}},n={type:"fruchterman",gravity:5},o={},i={type:"line",style:{endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#e0e0e0"},lineWidth:.5},labelCfg:{autoRotate:!0,style:{fontSize:4,fill:"#333"}}},a={default:["drag-canvas","zoom-canvas","drag-node"]},s=this._getContextMenu(),l=[new(eI().ToolBar),s],u={lineWidth:3,stroke:"#b4d6ff"},c={stroke:"#b4d6ff",shadowColor:"#b4d6ff",shadowBlur:5,endArrow:{path:"M 0,0 L 4,2 L 4,-2 Z",fill:"#b4d6ff"}};if(!t)return this._setToolBarStyle(),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"knowledgeGraph",e=document.querySelector("#".concat(t));return{container:t,width:e.scrollWidth,height:e.scrollHeight,plugins:l,modes:a,layout:sI(sI({},n),r),defaultNode:o,defaultEdge:i,nodeStateStyles:{hover:u},edgeStateStyles:{hover:c}}}();t.container=t.container||"knowledgeGraph";var f="string"==typeof t.container?document.querySelector("#".concat(t.container)):t.container;return t.width=t.width||f.scrollWidth,t.height=t.height||f.scrollHeight,t.layout=sI(sI(sI({},n),t.layout||{}),!1!==t.animate?r:{}),t.defaultNode=sI(sI({},o),t.defaultNode||{}),t.defaultEdge=sI(sI({},i),t.defaultEdge||{}),t.modes={default:[!1!==t.dragCanvas&&"drag-canvas",!1!==t.zoomCanvas&&"zoom-canvas",!1!==t.dragNode&&"drag-node"]},t.nodeStateStyles={hover:sI(sI({},u),t.nodeHighlightStyle||{})},t.edgeStateStyles={hover:sI(sI({},c),t.edgeHighlightStyle||{})},!1!==t.showToolBar&&(t.plugins=[new(eI().ToolBar)],this._setToolBarStyle()),!1!==t.showContextMenu&&(t.plugins=[].concat(oI(t.plugins||[]),[s]),this._setToolBarStyle()),t}},{key:"changeSize",value:function(t,e){return this.graph.changeSize(t,e)}},{key:"autoResize",value:function(){var t=this,e=this.getContainer();window.addEventListener("resize",function(){var r=e.scrollWidth,n=e.scrollHeight;t.graph.changeSize(r,n),t.graph.refresh()})}},{key:"zoom",value:function(t,e,r,n){this.graph.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graph.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graph.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graph.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graph.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graph.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graph.getZoom()}},{key:"getMinZoom",value:function(){return this.graph.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graph.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graph.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graph.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graph.getWidth()}},{key:"getHeight",value:function(){return this.graph.getHeight()}},{key:"setCenter",value:function(t){var e=this.graph.getWidth()/2,r=this.graph.getHeight()/2,n=this.graph.getCanvasByPoint(t.x,t.y);this.graph.translate(e-n.x,r-n.y)}},{key:"_setToolBarStyle",value:function(){nI()("\n      .g6-component-toolbar li[code='redo'],\n      .g6-component-toolbar li[code='undo'],\n      .g6-component-toolbar li[code='realZoom'] {\n        display: none;\n      }\n      .g6-component-contextmenu {\n        position: absolute;\n        z-index: 2;\n        list-style-type: none;\n        border-radius: 6px;\n        font-size: 14px;\n        width: fit-content;\n        transition: opacity .2s;\n        text-align: center;\n        box-shadow: 0 5px 18px 0 rgba(0, 0, 0, 0.6);\n        border: 0px;\n      }\n      .g6-component-contextmenu ul {\n        padding-left: 0px;\n        margin: 0;\n      }\n      .g6-component-contextmenu li {\n        cursor: pointer;\n        list-style-type: none;\n        list-style: none;\n        margin-left: 0;\n        line-height: 38px;\n        padding: 0px 35px;\n      }\n      .g6-component-contextmenu li:hover {\n        color: #333;\n        background: #aaaaaa45;\n      }\n    ")}},{key:"highlightNode",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:mouseenter",function(e){var r=e.item;t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.setItemState(r,"hover",!0),t.paint(),t.setAutoPaint(!0)}),t.on("node:mouseleave",function(){t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.paint(),t.setAutoPaint(!0)})}},{key:"highlightEdge",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("edge:mouseenter",function(e){var r=e.item;t.setAutoPaint(!1),t.getNodes().forEach(function(e){t.clearItemStates(e)}),t.setItemState(r,"hover",!0),t.paint(),t.setAutoPaint(!0)}),t.on("edge:mouseleave",function(){t.setAutoPaint(!1),t.getEdges().forEach(function(e){t.clearItemStates(e)}),t.paint(),t.setAutoPaint(!0)})}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data?e.changeData(t):e.data(t),this.data=t}},{key:"render",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).render()}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;this.data=t,e.changeData(t)}},{key:"refresh",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refresh()}},{key:"getContainer",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getContainer()}},{key:"getCanvas",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).get("canvas")}},{key:"getNodes",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getNodes()}},{key:"getEdges",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).getEdges()}},{key:"getNeighbors",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).getNeighbors(t,e)}},{key:"findById",value:function(t){return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).findById(t)}},{key:"find",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).find(t,e)}},{key:"findAll",value:function(t,e){return(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return t.getEdges()}},{key:"getInEdges",value:function(t){return t.getInEdges()}},{key:"getOutEdges",value:function(t){return t.getOutEdges()}},{key:"getSourceByEdge",value:function(t){return t.getSource()}},{key:"getTargetByEdge",value:function(t){return t.getTarget()}},{key:"expandNode",value:function(t){var e=t.getModel().id;this._expandCollapseNode(this.collpasedData[e],"show"),delete this.collpasedData[e]}},{key:"collapseNode",value:function(t){var e=t.getModel().id,r=[];this._collapseFunc(t,r),this.collpasedData[e]=r,this._expandCollapseNode(r)}},{key:"isCollpased",value:function(t){return!!this.collpasedData[t]}},{key:"_collapseFunc",value:function(t){for(var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=this.getNeighbors(t,"target"),n=this.getNeighbors(t,"source"),o=0;o<r.length;o++){var i=r[o],a=i.getModel();1===this.getNeighbors(i).length&&e.push({id:a.id})}for(var s=0;s<n.length;s++){var l=n[s],u=l.getModel(),c=this.getNeighbors(l),f=this.getNeighbors(l,"source");if(1===c.length||0===f.length)e.push({id:u.id});else{var h=[];this._collapseFunc(l,h),e.push({id:u.id,children:h})}}return e}},{key:"_expandCollapseNode",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"hide";t&&t.forEach(function(t){"hide"===r?e.hideItem(t.id):(e.showItem(t.id),e.isCollpased(t.id)&&delete e.collpasedData[t.id]),t.children&&e._expandCollapseNode(t.children,r)})}},{key:"showItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).showItem(t,e)}},{key:"hideItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).hideItem(t,e)}},{key:"show",value:function(t){t.show()}},{key:"hide",value:function(t){t.hide()}},{key:"changeVisibility",value:function(t,e){t.changeVisibility(e)}},{key:"isVisible",value:function(t){return t.isVisible()}},{key:"getModel",value:function(t){return t.getModel()}},{key:"addItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).addItem(t,e)}},{key:"removeItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).removeItem(t)}},{key:"updateItem",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).updateItem(t,e)}},{key:"refreshItem",value:function(t){(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph).refreshItem(t)}},{key:"refreshPositions",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).refreshPositions()}},{key:"on",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).on(t,e)}},{key:"off",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).off(t,e)}},{key:"toDataURL",value:function(t,e){(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.graph).toDataURL(t,e)}},{key:"bindNodeDefaultDragEvent",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("node:dragstart",function(t){fI(t)}),t.on("node:drag",function(t){fI(t)}),t.on("node:dragend",function(t){t.item.get("model").fx=null,t.item.get("model").fy=null})}},{key:"stopDefaultEventPropagation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t.on("click",function(t){t.stopPropagation()}),t.on("mousedown",function(t){t.stopPropagation()}),t.on("mouseover",function(t){t.stopPropagation()}),t.on("mouseout",function(t){t.stopPropagation()})}},{key:"clear",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).clear()}},{key:"destroy",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph).destroy()}}])&&uI(e.prototype,r),n&&uI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fI(t){var e=t.item.get("model");return e.fx=t.x,e.fy=t.y,e.x=t.x,e.y=t.y,e}var hI=r(2138),pI=r.n(hI);function yI(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dI=function(){function t(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"G6";!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.graph=null,this.config=pI()(e),this.graphRender=null,this.type=r,this.createGraphRender(this.type),this.config=this.graphRender._getGraphConfig(this.config),this.createGraph(this.config),this.CLASS_NAME="SuperMap.KnowledgeGraph"}var e,r,n;return e=t,n=[{key:"dataFromGraphMap",value:function(t,e){return WN(t,e)}},{key:"dataFromKnowledgeGraphQuery",value:function(t){return WN(t)}}],(r=[{key:"handleNodeStatus",value:function(t){var e=t.expand,r=t.collapse,n=t.hidden;this.expandNodes(e),this.collapseNodes(r),this.hideNodes(n)}},{key:"expandNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.expandNode(t+"")})}},{key:"collapseNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.collapseNode(t+"")})}},{key:"hideNodes",value:function(t){var e=this;t&&t.forEach(function(t){e.hideItem(t+"")})}},{key:"createGraphRender",value:function(t){"G6"===t&&(this.graphRender=new cI)}},{key:"createGraph",value:function(t){var e=this.initGraph(t);return this.graph=e,this.autoResize(),e}},{key:"getGraph",value:function(){return this.graph}},{key:"autoResize",value:function(){this.config&&!1!==this.config.autoResize&&this.graphRender.autoResize()}},{key:"zoom",value:function(t,e,r,n){this.graphRender.zoom(t,e,r,n)}},{key:"zoomTo",value:function(t,e,r,n){this.graphRender.zoomTo(t,e,r,n)}},{key:"fitView",value:function(t,e,r,n){this.graphRender.fitView(t,e,r,n)}},{key:"fitCenter",value:function(t,e){this.graphRender.fitCenter(t,e)}},{key:"getGraphCenterPoint",value:function(){return this.graphRender.getGraphCenterPoint()}},{key:"getViewPortCenterPoint",value:function(){return this.graphRender.getViewPortCenterPoint()}},{key:"getZoom",value:function(){return this.graphRender.getZoom()}},{key:"getMinZoom",value:function(){return this.graphRender.getMinZoom()}},{key:"setMinZoom",value:function(t){this.graphRender.setMinZoom(t)}},{key:"getMaxZoom",value:function(){return this.graphRender.getMaxZoom()}},{key:"setMaxZoom",value:function(t){this.graphRender.setMaxZoom(t)}},{key:"getWidth",value:function(){return this.graphRender.getWidth()}},{key:"getHeight",value:function(){return this.graphRender.getHeight()}},{key:"initGraph",value:function(t){var e=this,r=this.graphRender.initGraph(t);this.graph=r;return this.graph.on("beforelayout",function(){void 0!==e.config.zoom&&e.zoom(e.config.zoom),void 0!==e.config.center&&e.graphRender.setCenter({x:e.config.center[0],y:e.config.center[1]})}),r}},{key:"setData",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;t=t||{nodes:[],edges:[]},this.config&&this.config.nodeLabelMaxWidth&&(t.nodes=this.nodeLabelOpenEllipsis(this.config.nodeLabelMaxWidth,t.nodes)),this.graphRender.setData(t,e),this.render(e),this.data=t}},{key:"render",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&this.graphRender.render(t)}},{key:"updateGraph",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.graph;e&&this.graphRender.updateGraph(t,e)}},{key:"refresh",value:function(){return this.graphRender.refresh()}},{key:"changeSize",value:function(t,e){return this.graphRender.changeSize(t,e)}},{key:"resize",value:function(t,e){this.graphRender.changeSize(t,e),this.graphRender.refresh()}},{key:"getContainer",value:function(){return this.graphRender.getContainer()}},{key:"getCanvas",value:function(){return this.graphRender.getCanvas()}},{key:"getNodes",value:function(){return this.graphRender.getNodes()}},{key:"getEdges",value:function(){return this.graphRender.getEdges()}},{key:"getNeighbors",value:function(t,e){return this.graphRender.getNeighbors(t,e)}},{key:"findById",value:function(t){return this.graphRender.findById(t)}},{key:"find",value:function(t,e){return this.graphRender.find(t,e)}},{key:"findAll",value:function(t,e){return this.graphRender.findAll(t,e)}},{key:"getEdgesByNode",value:function(t){return this.graphRender.getEdgesByNode(t)}},{key:"getInEdges",value:function(t){return this.graphRender.getInEdges(t)}},{key:"getOutEdges",value:function(t){return this.graphRender.getOutEdges(t)}},{key:"getSourceByEdge",value:function(t){return this.graphRender.getSourceByEdge(t)}},{key:"getTargetByEdge",value:function(t){return this.graphRender.getTargetByEdge(t)}},{key:"expandNode",value:function(t){var e=this.findById(t);e&&this.graphRender.expandNode(e)}},{key:"collapseNode",value:function(t){var e=this.findById(t);e&&this.graphRender.collapseNode(e)}},{key:"showItem",value:function(t,e){this.graphRender.showItem(t,e)}},{key:"hideItem",value:function(t,e){this.graphRender.hideItem(t,e)}},{key:"show",value:function(t){this.graphRender.show(t)}},{key:"hide",value:function(t){this.graphRender.hide(t)}},{key:"changeVisibility",value:function(t,e){this.graphRender.changeVisibility(t,e)}},{key:"isVisible",value:function(t){return this.graphRender.isVisible(t)}},{key:"getModel",value:function(t){return this.graphRender.getModel(t)}},{key:"addItem",value:function(t,e){return this.graphRender.addItem(t,e)}},{key:"removeItem",value:function(t){return this.graphRender.removeItem(t)}},{key:"updateItem",value:function(t,e){return this.graphRender.updateItem(t,e)}},{key:"refreshItem",value:function(t){return this.graphRender.refreshItem(t)}},{key:"refreshPositions",value:function(){return this.graphRender.refreshPositions()}},{key:"on",value:function(t,e){this.graphRender.on(t,e)}},{key:"off",value:function(t,e){this.graphRender.off(t,e)}},{key:"toDataURL",value:function(t,e){this.graphRender.toDataURL(t,e)}},{key:"nodeLabelOpenEllipsis",value:function(t,e){var r=this;return e?t?e.map(function(e){var n=e.labelCfg&&e.labelCfg.fontSize||r.defaultNode&&r.defaultNode.labelCfg&&r.defaultNode.labelCfg.fontSize||14;return e.label=function(t,e,r){var n=1*r;e*=1.6;if(function(t){for(var e=0,r=0;r<t.length;r++)t.charCodeAt(r)>0&&t.charCodeAt(r)<128?e++:e+=2;return e}(t)*n>e){var o=Math.floor((e-20)/n),i=t.substring(0,o);return(t.substring(o).length+"…".length)*n>e?i+"\n"+t.substring(o,o+o-2)+"…":0==t.substring(o).length?i:i+"\n"+t.substring(o)}return t}(e.label,t,n),e}):e:[]}},{key:"clear",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.clear()}},{key:"destroy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.graph;t&&t.destroy()}}])&&yI(e.prototype,r),n&&yI(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function bI(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function vI(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?bI(Object(r),!0).forEach(function(e){mI(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):bI(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function mI(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}n.Lang=EL,n.i18n=n.Lang.i18n,n.Util=vI(vI({},n.Util),dt),n.Browser=ht,n.INCHES_PER_UNIT=bt,n.METERS_PER_INCH=vt,n.DOTS_PER_INCH=96,n.IS_GECKO=yt,n.setCORS=function(t){un=t},n.isCORS=bn,n.setRequestTimeout=function(t){return cn=t},n.getRequestTimeout=vn,n.FetchRequest=mn,n.inherit=function(t,e){var r,n,o,i=function(){};for(i.prototype=e.prototype,t.prototype=new i,r=2,n=arguments.length;r<n;r++)"function"==typeof(o=arguments[r])&&(o=o.prototype),dt.extend(t.prototype,o)},n.mixin=Z,n.String=K,n.Number=$,n.Function=tt,n.Array=et,n.Date=Ue,n.Event=ze,n.Bounds=_t,n.Credential=Ge,n.Events=qe,n.Feature=We,n.Geometry=nt,n.Geometry3D=wr,n.Pixel=X,n.Size=W,n.Feature.Vector=Ar,n.Geometry.Collection=jt,n.Geometry.Curve=Gt,n.Geometry.GeoText=se,n.Geometry.LinearRing=ye,n.Geometry.LineString=te,n.Geometry.MultiLineString=we,n.Geometry.MultiPoint=Lt,n.Geometry.MultiPolygon=Ee,n.Geometry.Point=Wt,n.Geometry.Polygon=Me,n.Geometry.Rectangle=Fe,n.Components.Chart=IL,n.Components.ChartViewModel=LL,n.Components.MessageBox=xL,n.Components.AttributesPopContainer=yN,n.Components.CityTabsPage=EN,n.Components.CommonContainer=JL,n.Components.DropDownBox=rN,n.Components.IndexTabsPageContainer=wN,n.Components.NavTabsPage=MN,n.Components.PaginationContainer=FN,n.Components.PopContainer=lN,n.Components.Select=QL,n.Components.TemplateBase=FL,n.Components.FileReaderUtil=jL,n.TimeControlBase=tn,n.TimeFlowControl=fn,n.Format=n.Format||Rr,n.Format.GeoJSON=Hr,n.Format.JSON=Br,n.Format.WKT=Kr,n.iManager=Cn,n.iManagerCreateNodeParam=xn,n.iManagerServiceBase=On,n.iPortal=Zn,n.iPortalAddDataParam=io,n.iPortalAddResourceParam=eo,n.iPortalDataConnectionInfoParam=fo,n.iPortalDataMetaInfoParam=so,n.iPortalDataStoreInfoParam=uo,n.iPortalQueryParam=Ln,n.iPortalQueryResult=In,n.iPortalRegisterServiceParam=no,n.iPortalResource=Vn,n.iPortalServiceBase=Mn,n.iPortalShareEntity=$n,n.iPortalShareParam=qn,n.iPortalUser=mo,n.AddressMatchService=No,n.AggregationParameter=Do,n.AreaSolarRadiationParameters=ti,n.AreaSolarRadiationService=yi,n.BucketAggParameter=Jo,n.BufferAnalystParameters=wi,n.BufferAnalystService=Yi,n.BufferDistance=bi,n.BuffersAnalystJobsParameter=ra,n.BuffersAnalystJobsService=ba,n.BufferSetting=mi,n.BurstPipelineAnalystParameters=ma,n.BurstPipelineAnalystService=Ma,n.ChartFeatureInfoSpecsService=Ba,n.ChartQueryFilterParameter=Ua,n.ChartQueryParameters=Va,n.ChartQueryService=$a,n.ClipParameter=es,n.ColorDictionary=ns,n.CommonServiceBase=xo,n.ComputeWeightMatrixParameters=us,n.ComputeWeightMatrixService=bs,n.CreateDatasetParameters=sE,n.DataFlowService=Ss,n.DataReturnOption=Oi,n.DatasetBufferAnalystParameters=Mi,n.DatasetInfo=Ps,n.DatasetOverlayAnalystParameters=Ns,n.DatasetService=Rh,n.DatasetSurfaceAnalystParameters=Ws,n.DatasetThiessenAnalystParameters=nl,n.DatasourceConnectionInfo=Qi,n.DatasourceService=fl,n.DensityAnalystService=_l,n.DensityKernelAnalystParameters=pl,n.EditFeaturesParameters=Sl,n.EditFeaturesService=Al,n.FacilityAnalyst3DParameters=Rl,n.FacilityAnalystSinks3DParameters=Gl,n.FacilityAnalystSinks3DService=Hl,n.FacilityAnalystSources3DParameters=$l,n.FacilityAnalystSources3DService=au,n.FacilityAnalystStreamParameters=lu,n.FacilityAnalystStreamService=du,n.FacilityAnalystTracedown3DParameters=Ou,n.FacilityAnalystTracedown3DService=Tu,n.FacilityAnalystTraceup3DParameters=Iu,n.FacilityAnalystTraceup3DService=Vu,n.FacilityAnalystUpstream3DParameters=Zu,n.FacilityAnalystUpstream3DService=oc,n.FieldParameters=ac,n.FieldsFilter=Xk,n.FieldStatisticService=_c,n.FieldStatisticsParameters=pc,n.FilterParameter=xi,n.FindClosestFacilitiesParameters=Sc,n.FindClosestFacilitiesService=Cc,n.FindLocationParameters=Mc,n.FindLocationService=Bc,n.FindMTSPPathsParameters=Uc,n.FindMTSPPathsService=Yc,n.FindPathParameters=Qc,n.FindPathService=nf,n.FindServiceAreasParameters=af,n.FindServiceAreasService=pf,n.FindTSPPathsParameters=df,n.FindTSPPathsService=Of,n.GenerateSpatialDataParameters=xf,n.GenerateSpatialDataService=Af,n.GeoCodingParameter=Eo,n.GeoDecodingParameter=jo,n.GeoHashGridAggParameter=Bf,n.GeometryBatchAnalystService=_P,n.GeometryBufferAnalystParameters=Gi,n.GeometryOverlayAnalystParameters=Wf,n.GeometrySurfaceAnalystParameters=eh,n.GeometryThiessenAnalystParameters=uh,n.GeoprocessingService=dh,n.GeoRelationAnalystParameters=vh,n.GeoRelationAnalystService=xh,n.GetFeaturesByBoundsParameters=Vh,n.GetFeaturesByBoundsService=op,n.GetFeaturesByBufferParameters=hp,n.GetFeaturesByBufferService=gp,n.GetFeaturesByGeometryParameters=kp,n.GetFeaturesByGeometryService=Lp,n.GetFeaturesByIDsParameters=zp,n.GetFeaturesByIDsService=Xp,n.GetFeaturesBySQLParameters=ny,n.GetFeaturesBySQLService=cy,n.GetFeaturesParametersBase=Nh,n.GetFeaturesServiceBase=Zh,n.GetFieldsService=my,n.GetGridCellInfosParameters=wy,n.GetGridCellInfosService=jy,n.GetLayersInfoService=Zb,n.Grid=Tb,n.HillshadeParameter=KE,n.Image=Ib,n.ImageCollectionService=Dk,n.ImageGFAspect=sj,n.ImageGFHillShade=ij,n.ImageGFOrtho=uj,n.ImageGFSlope=fj,n.ImageRenderingRule=nj,n.ImageSearchParameter=$k,n.ImageService=Wk,n.ImageStretchOption=ej,n.InterpolationAnalystParameters=$b,n.InterpolationAnalystService=Bv,n.InterpolationDensityAnalystParameters=dv,n.InterpolationIDWAnalystParameters=Sv,n.InterpolationKrigingAnalystParameters=Av,n.InterpolationRBFAnalystParameters=sv,n.JoinItem=lb,n.KernelDensityJobParameter=Uv,n.KernelDensityJobsService=Yv,n.LabelImageCell=nm,n.LabelMatrixCell=Qv,n.LabelMixedTextStyle=Gy,n.LabelSymbolCell=cm,n.LabelThemeCell=vm,n.LayerStatus=gm,n.LinkItem=_m,n.MappingParameters=ta,n.MapService=Tm,n.MathExpressionAnalysisParameters=Am,n.MathExpressionAnalysisService=Fm,n.MeasureParameters=Gm,n.MeasureService=Ym,n.MetricsAggParameter=Ko,n.NDVIParameter=JE,n.NetworkAnalystServiceBase=Pa,n.OutputSetting=Ki,n.OverlapDisplayedOptions=Qm,n.OverlayAnalystParameters=ks,n.OverlayAnalystService=og,n.OverlayGeoJobParameter=ag,n.OverlayGeoJobsService=pg,n.PointWithMeasure=or,n.ProcessingServiceBase=ua,n.QueryByBoundsParameters=_g,n.QueryByBoundsService=Dg,n.QueryByDistanceParameters=qg,n.QueryByDistanceService=Kg,n.QueryByGeometryParameters=aw,n.QueryByGeometryService=pw,n.QueryBySQLParameters=_w,n.QueryBySQLService=jw,n.DatasetMinDistanceAnalystParameters=Fw,n.MinDistanceAnalystService=t_,n.TerrainCutFillCalculationParameters=r_,n.TerrainCutFillCalculationService=u_,n.terrainAnalystSetting=sx,n.TerrainAspectCalculationParameters=f_,n.TerrainAspectCalculationService=m_,n.TerrainSlopeCalculationParameters=w_,n.TerrainSlopeCalculationService=k_,n.GeometryMinDistanceAnalystParameters=Hw,n.ConvexHullAnalystParameters=T_,n.ConvexHullAnalystService=D_,n.TraceAnalystParameters=B_,n.TraceAnalystService=H_,n.ConnectedEdgesAnalystParameters=Y_,n.ConnectedEdgesAnalystService=eO,n.GetLayersLegendInfoParameters=nO,n.GetLayersLegendInfoService=fO,n.QueryParameters=qa,n.QueryService=pO,n.RasterFunctionParameter=IE,n.Route=fr,n.RouteCalculateMeasureParameters=dO,n.RouteCalculateMeasureService=OO,n.RouteLocatorParameters=xO,n.RouteLocatorService=AO,n.ServerColor=Xe,n.ServerFeature=RO,n.ServerGeometry=pr,n.ServerStyle=Ze,n.ServerTextStyle=My,n.ServerTheme=Ob,n.SetDatasourceParameters=NO,n.SetLayerInfoParameters=DO,n.SetLayerInfoService=qO,n.SetLayersInfoParameters=WO,n.SetLayersInfoService=eS,n.SetLayerStatusParameters=nS,n.SetLayerStatusService=fS,n.SingleObjectQueryJobsParameter=pS,n.SingleObjectQueryJobsService=wS,n.Sortby=Zk,n.SpatialAnalystBase=si,n.StopQueryParameters=OS,n.StopQueryService=CS,n.SummaryAttributesJobsParameter=MS,n.SummaryAttributesJobsService=BS,n.SummaryMeshJobParameter=US,n.SummaryMeshJobsService=YS,n.SummaryRegionJobParameter=QS,n.SummaryRegionJobsService=nx,n.SupplyCenter=ix,n.SurfaceAnalystParameters=Bs,n.SurfaceAnalystParametersSetting=Ds,n.SurfaceAnalystService=yx,n.TerrainCurvatureCalculationParameters=bx,n.TerrainCurvatureCalculationService=Sx,n.Theme=Cy,n.ThemeDotDensity=Ad,n.ThemeFlow=Px,n.ThemeGraduatedSymbol=Ud,n.ThemeGraduatedSymbolStyle=Rd,n.ThemeGraph=xd,n.ThemeGraphAxes=cd,n.ThemeGraphItem=bd,n.ThemeGraphSize=hd,n.ThemeGraphText=yd,n.ThemeGridRange=Nx,n.ThemeGridRangeItem=kx,n.ThemeGridUnique=qx,n.ThemeGridUniqueItem=Dx,n.ThemeLabel=td,n.ThemeLabelAlongLine=Jy,n.ThemeLabelBackground=Hy,n.ThemeLabelItem=Ly,n.ThemeLabelText=zy,n.ThemeLabelUniqueItem=Wx,n.ThemeMemoryData=Xx,n.ThemeOffset=Fy,n.ThemeParameters=Zx,n.ThemeRange=Zd,n.ThemeRangeItem=Vd,n.ThemeService=iP,n.ThemeUnique=ld,n.ThemeUniqueItem=Iy,n.ThiessenAnalystParameters=Xs,n.ThiessenAnalystService=pP,n.TilesetsService=jP,n.TopologyValidatorJobsParameter=CP,n.TopologyValidatorJobsService=DP,n.TransferLine=BP,n.TransferPathParameters=UP,n.TransferPathService=YP,n.TransferSolutionParameters=QP,n.TransferSolutionService=nE,n.TransportationAnalystParameter=ss,n.TransportationAnalystResultSetting=is,n.UGCLayer=$d,n.UGCMapLayer=ab,n.UGCSubLayer=db,n.UpdateDatasetParameters=PE,n.UpdateEdgeWeightParameters=iE,n.UpdateEdgeWeightService=yE,n.UpdateTurnNodeWeightParameters=bE,n.UpdateTurnNodeWeightService=SE,n.Vector=Vb,n.VectorClipJobsParameter=kE,n.VectorClipJobsService=LE,n.WebPrintingJobContent=yk,n.WebPrintingJobCustomItems=tk,n.WebPrintingJobExportOptions=mk,n.WebPrintingJobImage=rk,n.WebPrintingJobLayers=ok,n.WebPrintingJobLayoutOptions=bk,n.WebPrintingJobLegendOptions=ak,n.WebPrintingJobLittleMapOptions=lk,n.WebPrintingJobNorthArrowOptions=ck,n.WebPrintingJobParameters=wk,n.WebPrintingJobScaleBarOptions=hk,n.WebPrintingService=Tk,n.Online=Rj,n.OnlineData=Aj,n.OnlineQueryDatasParameter=Nj,n.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},n.DataItemType={GEOJSON:"GEOJSON",UGCV5_MVT:"UGCV5_MVT",JSON:"JSON",AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},n.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},n.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"},n.OnlineServiceBase=xj,n.Feature=n.Feature||{},n.Feature.Theme=lM,n.Feature.Theme.Bar=OM,n.Feature.Theme.Bar3D=TM,n.Feature.Theme.Circle=VM,n.Feature.Theme.Graph=dM,n.Feature.Theme.Line=QM,n.Feature.Theme.Pie=nR,n.Feature.Theme.Point=cR,n.Feature.Theme.RankSymbol=IM,n.Feature.Theme.Ring=vR,n.Feature.Theme.ThemeVector=ER,n.Feature.ShapeParameters=vT,n.Feature.ShapeParameters.Circle=gC,n.Feature.ShapeParameters.Image=hC,n.Feature.ShapeParameters.Label=iC,n.Feature.ShapeParameters.Line=AT,n.Feature.ShapeParameters.Point=xT,n.Feature.ShapeParameters.Polygon=FT,n.Feature.ShapeParameters.Rectangle=qT,n.Feature.ShapeParameters.Sector=KT,n.Feature.ShapeFactory=aM,n.LevelRenderer=bL,n.KeyServiceParameter=Dj,n.SecurityManager=wn,n.ServerInfo=Bj,n.TokenServiceParameter=Uj,n.ThemeStyle=dT,n.CartoCSS=hT,n.ElasticSearch=Hj,n.ArrayStatistic=rT,n.ColorsPickerUtil=tT,n.DataFormat=o,n.ServerType=i,n.GeometryType=a,n.QueryOption=s,n.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},n.SpatialQueryMode=l,n.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},n.MeasureMode=u,n.Unit=c,n.BufferRadiusUnit=f,n.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},n.ThemeGraphTextFormat=h,n.ThemeGraphType=p,n.GraphAxesTextDisplayMode=y,n.GraduatedMode=d,n.RangeMode=b,n.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},n.ColorGradientType=v,n.TextAlignment=m,n.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},n.AlongLineDirection=g,n.LabelBackShape=w,n.LabelOverLengthMode=_,n.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},n.OverlayOperationType=S,n.OutputType=x,n.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},n.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},n.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},n.BufferEndType=O,n.SmoothMethod=P,n.SurfaceAnalystMethod=E,n.DataReturnMode=k,n.EditType=j,n.TransferTactic=T,n.TransferPreference=C,n.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},n.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},n.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},n.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},n.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},n.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},n.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},n.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},n.VariogramMode=A,n.Exponent=M,n.ClientType=R,n.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},n.ClipAnalystMode=N,n.AnalystAreaUnit=I,n.AnalystSizeUnit=D,n.StatisticAnalystMode=F,n.SummaryType=B,n.TopologyValidatorRule=G,n.BucketAggType=U,n.MetricsAggType=z,n.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},n.RasterFunctionType=V,n.ResourceType={MAP:"MAP",SERVICE:"SERVICE",SCENE:"SCENE",DATA:"DATA",INSIGHTS_WORKSPACE:"INSIGHTS_WORKSPACE",MAP_DASHBOARD:"MAP_DASHBOARD"},n.OrderBy={UPDATETIME:"UPDATETIME",HEATLEVEL:"HEATLEVEL",RELEVANCE:"RELEVANCE"},n.OrderType={ASC:"ASC",DESC:"DESC"},n.SearchType={PUBLIC:"PUBLIC",MY_RES:"MY_RES",MYGROUP_RES:"MYGROUP_RES",MYDEPARTMENT_RES:"MYDEPARTMENT_RES",SHARETOME_RES:"SHARETOME_RES"},n.AggregationTypes={TAG:"TAG",TYPE:"TYPE"},n.PermissionType={SEARCH:"SEARCH",READ:"READ",READWRITE:"READWRITE",DELETE:"DELETE",DOWNLOAD:"DOWNLOAD"},n.EntityType={DEPARTMENT:"DEPARTMENT",GROUP:"GROUP",IPORTALGROUP:"IPORTALGROUP",ROLE:"ROLE",USER:"USER"},n.WebExportFormatType={PNG:"PNG",PDF:"PDF"},n.WebScaleOrientationType={HORIZONTALLABELSBELOW:"HORIZONTALLABELSBELOW",HORIZONTALLABELSABOVE:"HORIZONTALLABELSABOVE",VERTICALLABELSLEFT:"VERTICALLABELSLEFT",VERTICALLABELSRIGHT:"VERTICALLABELSRIGHT"},n.WebScaleType={LINE:"LINE",BAR:"BAR",BAR_SUB:"BAR_SUB"},n.WebScaleUnit={METER:"METER",FOOT:"FOOT",DEGREES:"DEGREES"},n.KnowledgeGraph=dI,n.BoundsType=J,n.CellSizeType=q;var gI=L,wI=r.n(gI);var _I=1,OI=2,SI=3,xI=4,PI=5,EI=6378137,kI=6356752.314,jI=.0066943799901413165,TI=484813681109536e-20,CI=Math.PI/2,AI=.16666666666666666,MI=.04722222222222222,RI=.022156084656084655,LI=1e-10,NI=.017453292519943295,II=57.29577951308232,DI=Math.PI/4,FI=2*Math.PI,BI=3.14159265359,GI={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},UI={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},zI=/[\s_\-\/\(\)]/g;function VI(t,e){if(t[e])return t[e];for(var r,n=Object.keys(t),o=e.toLowerCase().replace(zI,""),i=-1;++i<n.length;)if((r=n[i]).toLowerCase().replace(zI,"")===o)return t[r]}function JI(t){var e,r,n,o={},i=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var r=e.split("=");return r.push(!0),t[r[0].toLowerCase()]=r[1],t},{}),a={proj:"projName",datum:"datumCode",rf:function(t){o.rf=parseFloat(t)},lat_0:function(t){o.lat0=t*NI},lat_1:function(t){o.lat1=t*NI},lat_2:function(t){o.lat2=t*NI},lat_ts:function(t){o.lat_ts=t*NI},lon_0:function(t){o.long0=t*NI},lon_1:function(t){o.long1=t*NI},lon_2:function(t){o.long2=t*NI},alpha:function(t){o.alpha=parseFloat(t)*NI},gamma:function(t){o.rectified_grid_angle=parseFloat(t)},lonc:function(t){o.longc=t*NI},x_0:function(t){o.x0=parseFloat(t)},y_0:function(t){o.y0=parseFloat(t)},k_0:function(t){o.k0=parseFloat(t)},k:function(t){o.k0=parseFloat(t)},a:function(t){o.a=parseFloat(t)},b:function(t){o.b=parseFloat(t)},r_a:function(){o.R_A=!0},zone:function(t){o.zone=parseInt(t,10)},south:function(){o.utmSouth=!0},towgs84:function(t){o.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){o.to_meter=parseFloat(t)},units:function(t){o.units=t;var e=VI(UI,t);e&&(o.to_meter=e.to_meter)},from_greenwich:function(t){o.from_greenwich=t*NI},pm:function(t){var e=VI(GI,t);o.from_greenwich=(e||parseFloat(t))*NI},nadgrids:function(t){"@null"===t?o.datumCode="none":o.nadgrids=t},axis:function(t){3===t.length&&-1!=="ewnsud".indexOf(t.substr(0,1))&&-1!=="ewnsud".indexOf(t.substr(1,1))&&-1!=="ewnsud".indexOf(t.substr(2,1))&&(o.axis=t)},approx:function(){o.approx=!0}};for(e in i)r=i[e],e in a?"function"==typeof(n=a[e])?n(r):o[n]=r:o[e]=r;return"string"==typeof o.datumCode&&"WGS84"!==o.datumCode&&(o.datumCode=o.datumCode.toLowerCase()),o}var qI=function(t){return new KI(t).output()},HI=1,WI=/\s/,YI=/[A-Za-z]/,XI=/[A-Za-z84_]/,QI=/[,\]]/,ZI=/[\d\.E\-\+]/;function KI(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=HI}function $I(t,e,r){Array.isArray(e)&&(r.unshift(e),e=null);var n=e?{}:t,o=r.reduce(function(t,e){return tD(e,t),t},n);e&&(t[e]=o)}function tD(t,e){if(Array.isArray(t)){var r=t.shift();if("PARAMETER"===r&&(r=t.shift()),1===t.length)return Array.isArray(t[0])?(e[r]={},void tD(t[0],e[r])):void(e[r]=t[0]);if(t.length)if("TOWGS84"!==r){if("AXIS"===r)return r in e||(e[r]=[]),void e[r].push(t);var n;switch(Array.isArray(r)||(e[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[r]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&tD(t[2],e[r]));case"SPHEROID":case"ELLIPSOID":return e[r]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&tD(t[3],e[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return t[0]=["name",t[0]],void $I(e,r,t);default:for(n=-1;++n<t.length;)if(!Array.isArray(t[n]))return tD(t,e[r]);return $I(e,r,t)}}else e[r]=t;else e[r]=!0}else e[t]=!0}function eD(t){"@babel/helpers - typeof";return(eD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}KI.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;WI.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case HI:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},KI.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(QI.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},KI.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=HI)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=HI,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},KI.prototype.number=function(t){if(!ZI.test(t)){if(QI.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},KI.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},KI.prototype.keyword=function(t){if(XI.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=HI)}if(!QI.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},KI.prototype.neutral=function(t){if(YI.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(ZI.test(t))return this.word=t,void(this.state=3);if(!QI.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},KI.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var rD=.017453292519943295;function nD(t){return t*rD}function oD(t){var e=qI(t),r=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",r]);var o={};return tD(e,o),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"===eD(t.PROJECTION)?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",r=0,n=t.AXIS.length;r<n;++r){var o=[t.AXIS[r][0].toLowerCase(),t.AXIS[r][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":-1===o[0].indexOf("west")&&("x"!==o[0]&&"lon"!==o[0]||"west"!==o[1])||(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var i=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(i=t),i&&(i.DATUM?t.datumCode=i.DATUM.name.toLowerCase():t.datumCode=i.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==t.datumCode&&"new_zealand_1949"!==t.datumCode||(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),i.DATUM&&i.DATUM.SPHEROID&&(t.ellps=i.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=i.DATUM.SPHEROID.a,t.rf=parseFloat(i.DATUM.SPHEROID.rf,10)),i.DATUM&&i.DATUM.TOWGS84&&(t.datum_params=i.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",nD],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",nD],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",nD],["lat0","latitude_of_origin",nD],["lat0","standard_parallel_1",nD],["lat1","standard_parallel_1",nD],["lat2","standard_parallel_2",nD],["azimuth","Azimuth"],["alpha","azimuth",nD],["srsCode","name"]].forEach(function(e){return r=t,o=(n=e)[0],i=n[1],void(!(o in r)&&i in r&&(r[o]=r[i],3===n.length&&(r[o]=n[2](r[o]))));var r,n,o,i}),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=nD(t.lat0>0?90:-90)):(t.lat0=nD(t.lat1>0?90:-90),t.lat_ts=t.lat1)}(o),o}function iD(t){var e=this;if(2===arguments.length){var r=arguments[1];"string"==typeof r?"+"===r.charAt(0)?iD[t]=JI(arguments[1]):iD[t]=oD(arguments[1]):iD[t]=r}else if(1===arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?iD.apply(e,t):iD(t)});if("string"==typeof t){if(t in iD)return iD[t]}else"EPSG"in t?iD["EPSG:"+t.EPSG]=t:"ESRI"in t?iD["ESRI:"+t.ESRI]=t:"IAU2000"in t?iD["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(iD);var aD=iD;var sD=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var lD=["3857","900913","3785","102113"];var uD=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in aD}(t))return aD[t];if(function(t){return sD.some(function(e){return t.indexOf(e)>-1})}(t)){var e=oD(t);if(function(t){var e=VI(t,"authority");if(e){var r=VI(e,"epsg");return r&&lD.indexOf(r)>-1}}(e))return aD["EPSG:3857"];var r=function(t){var e=VI(t,"extension");if(e)return VI(e,"proj4")}(e);return r?JI(r):e}return function(t){return"+"===t[0]}(t)?JI(t):void 0};function cD(t,e){var r,n;if(t=t||{},!e)return t;for(n in e)void 0!==(r=e[n])&&(t[n]=r);return t}function fD(t,e,r){var n=t*e;return r/Math.sqrt(1-n*n)}function hD(t){return t<0?-1:1}function pD(t){return Math.abs(t)<=BI?t:t-hD(t)*FI}function yD(t,e,r){var n=t*r,o=.5*t;return n=Math.pow((1-n)/(1+n),o),Math.tan(.5*(CI-e))/n}function dD(t,e){for(var r,n,o=.5*t,i=CI-2*Math.atan(e),a=0;a<=15;a++)if(r=t*Math.sin(i),i+=n=CI-2*Math.atan(e*Math.pow((1-r)/(1+r),o))-i,Math.abs(n)<=1e-10)return i;return-9999}function bD(t){return t}var vD=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=fD(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,r,n=t.x,o=t.y;if(o*II>90&&o*II<-90&&n*II>180&&n*II<-180)return null;if(Math.abs(Math.abs(o)-CI)<=LI)return null;if(this.sphere)e=this.x0+this.a*this.k0*pD(n-this.long0),r=this.y0+this.a*this.k0*Math.log(Math.tan(DI+.5*o));else{var i=Math.sin(o),a=yD(this.e,o,i);e=this.x0+this.a*this.k0*pD(n-this.long0),r=this.y0-this.a*this.k0*Math.log(a)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n=t.x-this.x0,o=t.y-this.y0;if(this.sphere)r=CI-2*Math.atan(Math.exp(-o/(this.a*this.k0)));else{var i=Math.exp(-o/(this.a*this.k0));if(-9999===(r=dD(this.e,i)))return null}return e=pD(this.long0+n/(this.a*this.k0)),t.x=e,t.y=r,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:bD,inverse:bD,names:["longlat","identity"]}],mD={},gD=[];function wD(t,e){var r=gD.length;return t.names?(gD[r]=t,t.names.forEach(function(t){mD[t.toLowerCase()]=r}),this):(console.log(e),!0)}var _D={start:function(){vD.forEach(wD)},add:wD,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==mD[e]&&gD[mD[e]]?gD[mD[e]]:void 0}},OD={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},SD=OD.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};OD.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var xD={};xD.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},xD.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},xD.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},xD.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},xD.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},xD.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},xD.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},xD.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},xD.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},xD.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},xD.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},xD.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},xD.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},xD.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},xD.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},xD.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},xD.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var PD=function(t,e,r,n,o,i,a){var s={};return s.datum_type=void 0===t||"none"===t?PI:xI,e&&(s.datum_params=e.map(parseFloat),0===s.datum_params[0]&&0===s.datum_params[1]&&0===s.datum_params[2]||(s.datum_type=_I),s.datum_params.length>3&&(0===s.datum_params[3]&&0===s.datum_params[4]&&0===s.datum_params[5]&&0===s.datum_params[6]||(s.datum_type=OI,s.datum_params[3]*=TI,s.datum_params[4]*=TI,s.datum_params[5]*=TI,s.datum_params[6]=s.datum_params[6]/1e6+1))),a&&(s.datum_type=SI,s.grids=a),s.a=r,s.b=n,s.es=o,s.ep2=i,s},ED={};function kD(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:ED[t]||null,isNull:!1}}function jD(t){return t/3600*Math.PI/180}function TD(t,e,r){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,r)))}function CD(t){return t.map(function(t){return[jD(t.longitudeShift),jD(t.latitudeShift)]})}function AD(t,e,r){return{name:TD(t,e+8,e+16).trim(),parent:TD(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,r),upperLatitude:t.getFloat64(e+88,r),lowerLongitude:t.getFloat64(e+104,r),upperLongitude:t.getFloat64(e+120,r),latitudeInterval:t.getFloat64(e+136,r),longitudeInterval:t.getFloat64(e+152,r),gridNodeCount:t.getInt32(e+168,r)}}function MD(t,e,r,n){for(var o=e+176,i=[],a=0;a<r.gridNodeCount;a++){var s={latitudeShift:t.getFloat32(o+16*a,n),longitudeShift:t.getFloat32(o+16*a+4,n),latitudeAccuracy:t.getFloat32(o+16*a+8,n),longitudeAccuracy:t.getFloat32(o+16*a+12,n)};i.push(s)}return i}function RD(t){"@babel/helpers - typeof";return(RD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function LD(t,e){if(!(this instanceof LD))return new LD(t);e=e||function(t){if(t)throw t};var r=uD(t);if("object"===RD(r)){var n=LD.projections.get(r.projName);if(n){if(r.datumCode&&"none"!==r.datumCode){var o=VI(xD,r.datumCode);o&&(r.datum_params=r.datum_params||(o.towgs84?o.towgs84.split(","):null),r.ellps=o.ellipse,r.datumName=o.datumName?o.datumName:r.datumCode)}r.k0=r.k0||1,r.axis=r.axis||"enu",r.ellps=r.ellps||"wgs84",r.lat1=r.lat1||r.lat0;var i,a,s,l,u,c,f,h=function(t,e,r,n,o){if(!t){var i=VI(OD,n);i||(i=SD),t=i.a,e=i.b,r=i.rf}return r&&!e&&(e=(1-1/r)*t),(0===r||Math.abs(t-e)<LI)&&(o=!0,e=t),{a:t,b:e,rf:r,sphere:o}}(r.a,r.b,r.rf,r.ellps,r.sphere),p=(i=h.a,a=h.b,h.rf,s=r.R_A,c=((l=i*i)-(u=a*a))/l,f=0,s?(l=(i*=1-c*(AI+c*(MI+c*RI)))*i,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(l-u)/u}),y=function(t){return void 0===t?null:t.split(",").map(kD)}(r.nadgrids),d=r.datum||PD(r.datumCode,r.datum_params,h.a,h.b,p.es,p.ep2,y);cD(this,r),cD(this,n),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=d,this.init(),e(null,this)}else e(t)}else e(t)}LD.projections=_D,LD.projections.start();var ND=LD;function ID(t,e,r){var n,o,i,a,s=t.x,l=t.y,u=t.z?t.z:0;if(l<-CI&&l>-1.001*CI)l=-CI;else if(l>CI&&l<1.001*CI)l=CI;else{if(l<-CI)return{x:-1/0,y:-1/0,z:t.z};if(l>CI)return{x:1/0,y:1/0,z:t.z}}return s>Math.PI&&(s-=2*Math.PI),o=Math.sin(l),a=Math.cos(l),i=o*o,{x:((n=r/Math.sqrt(1-e*i))+u)*a*Math.cos(s),y:(n+u)*a*Math.sin(s),z:(n*(1-e)+u)*o}}function DD(t,e,r,n){var o,i,a,s,l,u,c,f,h,p,y,d,b,v,m,g=t.x,w=t.y,_=t.z?t.z:0;if(o=Math.sqrt(g*g+w*w),i=Math.sqrt(g*g+w*w+_*_),o/r<1e-12){if(v=0,i/r<1e-12)return CI,m=-n,{x:t.x,y:t.y,z:t.z}}else v=Math.atan2(w,g);a=_/i,f=(s=o/i)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*s*s)),h=a*l,b=0;do{b++,u=e*(c=r/Math.sqrt(1-e*h*h))/(c+(m=o*f+_*h-c*(1-e*h*h))),d=(y=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*f-(p=s*(1-u)*l)*h,f=p,h=y}while(d*d>1e-24&&b<30);return{x:v,y:Math.atan(y/Math.abs(p)),z:m}}function FD(t){return t===_I||t===OI}function BD(t,e,r){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===_I?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==OI||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return r;if(t.datum_type===PI||e.datum_type===PI)return r;var n=t.a,o=t.es;if(t.datum_type===SI){if(0!==GD(t,!1,r))return;n=EI,o=jI}var i=e.a,a=e.b,s=e.es;if(e.datum_type===SI&&(i=EI,a=kI,s=jI),o===s&&n===i&&!FD(t.datum_type)&&!FD(e.datum_type))return r;if((r=ID(r,o,n),FD(t.datum_type)&&(r=function(t,e,r){if(e===_I)return{x:t.x+r[0],y:t.y+r[1],z:t.z+r[2]};if(e===OI){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],l=r[5],u=r[6];return{x:u*(t.x-l*t.y+s*t.z)+n,y:u*(l*t.x+t.y-a*t.z)+o,z:u*(-s*t.x+a*t.y+t.z)+i}}}(r,t.datum_type,t.datum_params)),FD(e.datum_type)&&(r=function(t,e,r){if(e===_I)return{x:t.x-r[0],y:t.y-r[1],z:t.z-r[2]};if(e===OI){var n=r[0],o=r[1],i=r[2],a=r[3],s=r[4],l=r[5],u=r[6],c=(t.x-n)/u,f=(t.y-o)/u,h=(t.z-i)/u;return{x:c+l*f-s*h,y:-l*c+f+a*h,z:s*c-a*f+h}}}(r,e.datum_type,e.datum_params)),r=DD(r,s,i,a),e.datum_type===SI)&&0!==GD(e,!0,r))return;return r}function GD(t,e,r){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var n={x:-r.x,y:r.y},o={x:Number.NaN,y:Number.NaN},i=[],a=0;a<t.grids.length;a++){var s=t.grids[a];if(i.push(s.name),s.isNull){o=n;break}if(s.mandatory,null!==s.grid){var l=s.grid.subgrids[0],u=(Math.abs(l.del[1])+Math.abs(l.del[0]))/1e4,c=l.ll[0]-u,f=l.ll[1]-u,h=l.ll[0]+(l.lim[0]-1)*l.del[0]+u,p=l.ll[1]+(l.lim[1]-1)*l.del[1]+u;if(!(f>n.y||c>n.x||p<n.y||h<n.x||(o=UD(n,e,l),isNaN(o.x))))break}else if(s.mandatory)return console.log("Unable to find mandatory grid '"+s.name+"'"),-1}return isNaN(o.x)?(console.log("Failed to find a grid shift table for location '"+-n.x*II+" "+n.y*II+" tried: '"+i+"'"),-1):(r.x=-o.x,r.y=o.y,0)}function UD(t,e,r){var n={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return n;var o={x:t.x,y:t.y};o.x-=r.ll[0],o.y-=r.ll[1],o.x=pD(o.x-Math.PI)+Math.PI;var i=zD(o,r);if(e){if(isNaN(i.x))return n;i.x=o.x-i.x,i.y=o.y-i.y;var a,s,l=9;do{if(s=zD(i,r),isNaN(s.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}a={x:o.x-(s.x+i.x),y:o.y-(s.y+i.y)},i.x+=a.x,i.y+=a.y}while(l--&&Math.abs(a.x)>1e-12&&Math.abs(a.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),n;n.x=pD(i.x+r.ll[0]),n.y=i.y+r.ll[1]}else isNaN(i.x)||(n.x=t.x+i.x,n.y=t.y+i.y);return n}function zD(t,e){var r,n={x:t.x/e.del[0],y:t.y/e.del[1]},o=Math.floor(n.x),i=Math.floor(n.y),a=n.x-1*o,s=n.y-1*i,l={x:Number.NaN,y:Number.NaN};if(o<0||o>=e.lim[0])return l;if(i<0||i>=e.lim[1])return l;r=i*e.lim[0]+o;var u=e.cvs[r][0],c=e.cvs[r][1];r++;var f=e.cvs[r][0],h=e.cvs[r][1];r+=e.lim[0];var p=e.cvs[r][0],y=e.cvs[r][1];r--;var d=e.cvs[r][0],b=e.cvs[r][1],v=a*s,m=a*(1-s),g=(1-a)*(1-s),w=(1-a)*s;return l.x=g*u+m*f+w*d+v*p,l.y=g*c+m*h+w*b+v*y,l}function VD(t,e,r){var n,o,i,a=r.x,s=r.y,l=r.z||0,u={};for(i=0;i<3;i++)if(!e||2!==i||void 0!==r.z)switch(0===i?(n=a,o=-1!=="ew".indexOf(t.axis[i])?"x":"y"):1===i?(n=s,o=-1!=="ns".indexOf(t.axis[i])?"y":"x"):(n=l,o="z"),t.axis[i]){case"e":u[o]=n;break;case"w":u[o]=-n;break;case"n":u[o]=n;break;case"s":u[o]=-n;break;case"u":void 0!==r[o]&&(u.z=n);break;case"d":void 0!==r[o]&&(u.z=-n);break;default:return null}return u}function JD(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function qD(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function HD(t,e,r,n){var o,i=void 0!==(r=Array.isArray(r)?JD(r):{x:r.x,y:r.y,z:r.z,m:r.m}).z;if(function(t){qD(t.x),qD(t.y)}(r),t.datum&&e.datum&&function(t,e){return(t.datum.datum_type===_I||t.datum.datum_type===OI||t.datum.datum_type===SI)&&"WGS84"!==e.datumCode||(e.datum.datum_type===_I||e.datum.datum_type===OI||e.datum.datum_type===SI)&&"WGS84"!==t.datumCode}(t,e)&&(r=HD(t,o=new ND("WGS84"),r,n),t=o),n&&"enu"!==t.axis&&(r=VD(t,!1,r)),"longlat"===t.projName)r={x:r.x*NI,y:r.y*NI,z:r.z||0};else if(t.to_meter&&(r={x:r.x*t.to_meter,y:r.y*t.to_meter,z:r.z||0}),!(r=t.inverse(r)))return;if(t.from_greenwich&&(r.x+=t.from_greenwich),r=BD(t.datum,e.datum,r))return e.from_greenwich&&(r={x:r.x-e.from_greenwich,y:r.y,z:r.z||0}),"longlat"===e.projName?r={x:r.x*II,y:r.y*II,z:r.z||0}:(r=e.forward(r),e.to_meter&&(r={x:r.x/e.to_meter,y:r.y/e.to_meter,z:r.z||0})),n&&"enu"!==e.axis?VD(e,!0,r):(i||delete r.z,r)}var WD=ND("WGS84");function YD(t,e,r,n){var o,i,a;return Array.isArray(r)?(o=HD(t,e,r,n)||{x:NaN,y:NaN},r.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof o.z?[o.x,o.y,o.z].concat(r.splice(3)):[o.x,o.y,r[2]].concat(r.splice(3)):[o.x,o.y].concat(r.splice(2)):[o.x,o.y]):(i=HD(t,e,r,n),2===(a=Object.keys(r)).length?i:(a.forEach(function(n){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===n||"y"===n||"z"===n)return}else if("x"===n||"y"===n)return;i[n]=r[n]}),i))}function XD(t){return t instanceof ND?t:t.oProj?t.oProj:ND(t)}var QD=function(t,e,r){t=XD(t);var n,o=!1;return void 0===e?(e=t,t=WD,o=!0):(void 0!==e.x||Array.isArray(e))&&(r=e,e=t,t=WD,o=!0),e=XD(e),r?YD(t,e,r):(n={forward:function(r,n){return YD(t,e,r,n)},inverse:function(r,n){return YD(e,t,r,n)}},o&&(n.oProj=e),n)},ZD=6,KD="AJSAJS",$D="AFAFAF",tF=65,eF=73,rF=79,nF=86,oF=90,iF={forward:aF,inverse:function(t){var e=cF(hF(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:sF};function aF(t,e){return e=e||5,function(t,e){var r="00000"+t.easting,n="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(p=t.easting,y=t.northing,d=t.zoneNumber,b=fF(d),v=Math.floor(p/1e5),m=Math.floor(y/1e5)%20,o=v,i=m,a=b,s=a-1,l=KD.charCodeAt(s),u=$D.charCodeAt(s),c=l+o-1,f=u+i,h=!1,c>oF&&(c=c-oF+tF-1,h=!0),(c===eF||l<eF&&c>eF||(c>eF||l<eF)&&h)&&c++,(c===rF||l<rF&&c>rF||(c>rF||l<rF)&&h)&&++c===eF&&c++,c>oF&&(c=c-oF+tF-1),f>nF?(f=f-nF+tF-1,h=!0):h=!1,(f===eF||u<eF&&f>eF||(f>eF||u<eF)&&h)&&f++,(f===rF||u<rF&&f>rF||(f>rF||u<rF)&&h)&&++f===eF&&f++,f>nF&&(f=f-nF+tF-1),String.fromCharCode(c)+String.fromCharCode(f))+r.substr(r.length-5,e)+n.substr(n.length-5,e);var o,i,a,s,l,u,c,f,h;var p,y,d,b,v,m}(function(t){var e,r,n,o,i,a,s,l=t.lat,u=t.lon,c=6378137,f=lF(l),h=lF(u);s=Math.floor((u+180)/6)+1,180===u&&(s=60);l>=56&&l<64&&u>=3&&u<12&&(s=32);l>=72&&l<84&&(u>=0&&u<9?s=31:u>=9&&u<21?s=33:u>=21&&u<33?s=35:u>=33&&u<42&&(s=37));a=lF(6*(s-1)-180+3),.006739496752268451,e=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),r=Math.tan(f)*Math.tan(f),n=.006739496752268451*Math.cos(f)*Math.cos(f),o=Math.cos(f)*(h-a),i=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var p=.9996*e*(o+(1-r+n)*o*o*o/6+(5-18*r+r*r+72*n-.39089081163157013)*o*o*o*o*o/120)+5e5,y=.9996*(i+e*Math.tan(f)*(o*o/2+(5-r+9*n+4*n*n)*o*o*o*o/24+(61-58*r+r*r+600*n-2.2240339282485886)*o*o*o*o*o*o/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(p),zoneNumber:s,zoneLetter:function(t){var e="Z";84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C");return e}(l)}}({lat:t[1],lon:t[0]}),e)}function sF(t){var e=cF(hF(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function lF(t){return t*(Math.PI/180)}function uF(t){return t/Math.PI*180}function cF(t){var e=t.northing,r=t.easting,n=t.zoneLetter,o=t.zoneNumber;if(o<0||o>60)return null;var i,a,s,l,u,c,f,h,p=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=r-5e5,b=e;n<"N"&&(b-=1e7),c=6*(o-1)-180+3,h=(f=b/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),i=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),l=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),u=d/(.9996*i);var v=h-i*Math.tan(h)/l*(u*u/2-(5+3*a+10*s-4*s*s-.06065547077041606)*u*u*u*u/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*u*u*u*u*u*u/720);v=uF(v);var m,g=(u-(1+2*a+s)*u*u*u/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*u*u*u*u*u/120)/Math.cos(h);if(g=c+uF(g),t.accuracy){var w=cF({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});m={top:w.lat,right:w.lon,bottom:v,left:g}}else m={lat:v,lon:g};return m}function fF(t){var e=t%ZD;return 0===e&&(e=ZD),e}function hF(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,r=t.length,n=null,o="",i=0;!/[A-Z]/.test(e=t.charAt(i));){if(i>=2)throw"MGRSPoint bad conversion from: "+t;o+=e,i++}var a=parseInt(o,10);if(0===i||i+3>r)throw"MGRSPoint bad conversion from: "+t;var s=t.charAt(i++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+t;n=t.substring(i,i+=2);for(var l=fF(a),u=function(t,e){var r=KD.charCodeAt(e-1),n=1e5,o=!1;for(;r!==t.charCodeAt(0);){if(++r===eF&&r++,r===rF&&r++,r>oF){if(o)throw"Bad character: "+t;r=tF,o=!0}n+=1e5}return n}(n.charAt(0),l),c=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var r=$D.charCodeAt(e-1),n=0,o=!1;for(;r!==t.charCodeAt(0);){if(++r===eF&&r++,r===rF&&r++,r>nF){if(o)throw"Bad character: "+t;r=tF,o=!0}n+=1e5}return n}(n.charAt(1),l);c<pF(s);)c+=2e6;var f=r-i;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var h,p,y,d=f/2,b=0,v=0;return d>0&&(h=1e5/Math.pow(10,d),p=t.substring(i,i+d),b=parseFloat(p)*h,y=t.substring(i+d),v=parseFloat(y)*h),{easting:b+u,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function pF(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function yF(t){"@babel/helpers - typeof";return(yF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function dF(t,e,r){if(!(this instanceof dF))return new dF(t,e,r);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"===yF(t))this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var n=t.split(",");this.x=parseFloat(n[0],10),this.y=parseFloat(n[1],10),this.z=parseFloat(n[2],10)||0}else this.x=t,this.y=e,this.z=r||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}dF.fromMGRS=function(t){return new dF(sF(t))},dF.prototype.toMGRS=function(t){return aF([this.x,this.y],t)};var bF=dF,vF=1,mF=.25,gF=.046875,wF=.01953125,_F=.01068115234375,OF=.75,SF=.46875,xF=.013020833333333334,PF=.007120768229166667,EF=.3645833333333333,kF=.005696614583333333,jF=.3076171875;function TF(t){var e=[];e[0]=vF-t*(mF+t*(gF+t*(wF+t*_F))),e[1]=t*(OF-t*(gF+t*(wF+t*_F)));var r=t*t;return e[2]=r*(SF-t*(xF+t*PF)),r*=t,e[3]=r*(EF-t*kF),e[4]=r*t*jF,e}function CF(t,e,r,n){return r*=e,e*=e,n[0]*t-r*(n[1]+e*(n[2]+e*(n[3]+e*n[4])))}var AF=20;function MF(t,e,r){for(var n=1/(1-e),o=t,i=AF;i;--i){var a=Math.sin(o),s=1-e*a*a;if(o-=s=(CF(o,a,Math.cos(o),r)-t)*(s*Math.sqrt(s))*n,Math.abs(s)<LI)return o}return o}var RF={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=TF(this.es),this.ml0=CF(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,r,n,o=t.x,i=t.y,a=pD(o-this.long0),s=Math.sin(i),l=Math.cos(i);if(this.es){var u=l*a,c=Math.pow(u,2),f=this.ep2*Math.pow(l,2),h=Math.pow(f,2),p=Math.abs(l)>LI?Math.tan(i):0,y=Math.pow(p,2),d=Math.pow(y,2);e=1-this.es*Math.pow(s,2),u/=Math.sqrt(e);var b=CF(i,s,l,this.en);r=this.a*(this.k0*u*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,n=this.a*(this.k0*(b-this.ml0+s*a*u/2*(1+c/12*(5-y+9*f+4*h+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var v=l*Math.sin(a);if(Math.abs(Math.abs(v)-1)<LI)return 93;if(r=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,n=l*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(n))>=1){if(v-1>LI)return 93;n=0}else n=Math.acos(n);i<0&&(n=-n),n=this.a*this.k0*(n-this.lat0)+this.y0}return t.x=r,t.y=n,t},inverse:function(t){var e,r,n,o,i=(t.x-this.x0)*(1/this.a),a=(t.y-this.y0)*(1/this.a);if(this.es)if(r=MF(e=this.ml0+a/this.k0,this.es,this.en),Math.abs(r)<CI){var s=Math.sin(r),l=Math.cos(r),u=Math.abs(l)>LI?Math.tan(r):0,c=this.ep2*Math.pow(l,2),f=Math.pow(c,2),h=Math.pow(u,2),p=Math.pow(h,2);e=1-this.es*Math.pow(s,2);var y=i*Math.sqrt(e)/this.k0,d=Math.pow(y,2);n=r-(e*=u)*d/(1-this.es)*.5*(1-d/12*(5+3*h-9*c*h+c-4*f-d/30*(61+90*h-252*c*h+45*p+46*c-d/56*(1385+3633*h+4095*p+1574*p*h)))),o=pD(this.long0+y*(1-d/6*(1+2*h+c-d/20*(5+28*h+24*p+8*c*h+6*c-d/42*(61+662*h+1320*p+720*p*h))))/l)}else n=CI*hD(a),o=0;else{var b=Math.exp(i/this.k0),v=.5*(b-1/b),m=this.lat0+a/this.k0,g=Math.cos(m);e=Math.sqrt((1-Math.pow(g,2))/(1+Math.pow(v,2))),n=Math.asin(e),a<0&&(n=-n),o=0===v&&0===g?0:pD(Math.atan2(v,g)+this.long0)}return t.x=o,t.y=n,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function LF(t){var e=Math.exp(t);return e=(e-1/e)/2}function NF(t,e){t=Math.abs(t),e=Math.abs(e);var r=Math.max(t,e),n=Math.min(t,e)/(r||1);return r*Math.sqrt(1+Math.pow(n,2))}function IF(t){var e=Math.abs(t);return e=function(t){var e=1+t,r=e-1;return 0===r?t:t*Math.log(e)/r}(e*(1+e/(NF(1,e)+1))),t<0?-e:e}function DF(t,e){for(var r,n=2*Math.cos(2*e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return e+r*Math.sin(2*e)}function FF(t,e,r){for(var n,o,i=Math.sin(e),a=Math.cos(e),s=LF(r),l=function(t){var e=Math.exp(t);return e=(e+1/e)/2}(r),u=2*a*l,c=-2*i*s,f=t.length-1,h=t[f],p=0,y=0,d=0;--f>=0;)n=y,o=p,h=u*(y=h)-n-c*(p=d)+t[f],d=c*y-o+u*p;return[(u=i*l)*h-(c=a*s)*d,u*d+c*h]}var BF={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(RF.init.apply(this),this.forward=RF.forward,this.inverse=RF.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),r=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),r*=e,this.cgb[1]=r*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=r*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),r*=e,this.cgb[2]=r*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=r*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),r*=e,this.cgb[3]=r*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=r*(1237/630+e*(e*(-24832/14175)-2.4)),r*=e,this.cgb[4]=r*(4174/315+e*(-144838/6237)),this.cbg[4]=r*(-734/315+e*(109598/31185)),r*=e,this.cgb[5]=r*(601676/22275),this.cbg[5]=r*(444337/155925),r=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+r*(.25+r*(1/64+r/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=r*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=r*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),r*=e,this.utg[2]=r*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=r*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),r*=e,this.utg[3]=r*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=r*(49561/161280+e*(-179/168+e*(6601661/7257600))),r*=e,this.utg[4]=r*(-4583/161280+e*(108847/3991680)),this.gtu[4]=r*(34729/80640+e*(-3418889/1995840)),r*=e,this.utg[5]=-.03233083094085698*r,this.gtu[5]=.6650675310896665*r;var n=DF(this.cbg,this.lat0);this.Zb=-this.Qn*(n+function(t,e){for(var r,n=2*Math.cos(e),o=t.length-1,i=t[o],a=0;--o>=0;)r=n*i-a+t[o],a=i,i=r;return Math.sin(e)*r}(this.gtu,2*n))},forward:function(t){var e=pD(t.x-this.long0),r=t.y;r=DF(this.cbg,r);var n=Math.sin(r),o=Math.cos(r),i=Math.sin(e),a=Math.cos(e);r=Math.atan2(n,a*o),e=Math.atan2(i*o,NF(n,o*a)),e=IF(Math.tan(e));var s,l,u=FF(this.gtu,2*r,2*e);return r+=u[0],e+=u[1],Math.abs(e)<=2.623395162778?(s=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*r+this.Zb)+this.y0):(s=1/0,l=1/0),t.x=s,t.y=l,t},inverse:function(t){var e,r,n=(t.x-this.x0)*(1/this.a),o=(t.y-this.y0)*(1/this.a);if(o=(o-this.Zb)/this.Qn,n/=this.Qn,Math.abs(n)<=2.623395162778){var i=FF(this.utg,2*o,2*n);o+=i[0],n+=i[1],n=Math.atan(LF(n));var a=Math.sin(o),s=Math.cos(o),l=Math.sin(n),u=Math.cos(n);o=Math.atan2(a*u,NF(l,u*s)),e=pD((n=Math.atan2(l,u*s))+this.long0),r=DF(this.cgb,o)}else e=1/0,r=1/0;return t.x=e,t.y=r,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"]};var GF={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(pD(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*NI,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,BF.init.apply(this),this.forward=BF.forward,this.inverse=BF.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function UF(t,e){return Math.pow((1-t)/(1+t),e)}var zF=20;var VF={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+DI)/(Math.pow(Math.tan(.5*this.lat0+DI),this.C)*UF(this.e*t,this.ratexp))},forward:function(t){var e=t.x,r=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*r+DI),this.C)*UF(this.e*Math.sin(r),this.ratexp))-CI,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,r=t.y,n=Math.pow(Math.tan(.5*r+DI)/this.K,1/this.C),o=zF;o>0&&(r=2*Math.atan(n*UF(this.e*Math.sin(t.y),-.5*this.e))-CI,!(Math.abs(r-t.y)<1e-14));--o)t.y=r;return o?(t.x=e,t.y=r,t):null},names:["gauss"]};var JF={init:function(){VF.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,r,n,o;return t.x=pD(t.x-this.long0),VF.forward.apply(this,[t]),e=Math.sin(t.y),r=Math.cos(t.y),n=Math.cos(t.x),o=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*r*n),t.x=o*r*Math.sin(t.x),t.y=o*(this.cosc0*e-this.sinc0*r*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,r,n,o,i;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,i=Math.sqrt(t.x*t.x+t.y*t.y)){var a=2*Math.atan2(i,this.R2);e=Math.sin(a),r=Math.cos(a),o=Math.asin(r*this.sinc0+t.y*e*this.cosc0/i),n=Math.atan2(t.x*e,i*this.cosc0*r-t.y*this.sinc0*e)}else o=this.phic0,n=0;return t.x=n,t.y=o,VF.inverse.apply(this,[t]),t.x=pD(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var qF={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=LI&&(this.k0=.5*(1+hD(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=LI&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=LI&&(this.k0=.5*this.cons*fD(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/yD(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=fD(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-CI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,r,n,o,i,a,s=t.x,l=t.y,u=Math.sin(l),c=Math.cos(l),f=pD(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=LI&&Math.abs(l+this.lat0)<=LI?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(f)),t.x=this.a*e*c*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*u-this.sinlat0*c*Math.cos(f))+this.y0,t):(r=2*Math.atan(this.ssfn_(l,u,this.e))-CI,o=Math.cos(r),n=Math.sin(r),Math.abs(this.coslat0)<=LI?(i=yD(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*i/this.cons,t.x=this.x0+a*Math.sin(s-this.long0),t.y=this.y0-this.con*a*Math.cos(s-this.long0),t):(Math.abs(this.sinlat0)<LI?(e=2*this.a*this.k0/(1+o*Math.cos(f)),t.y=e*n):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*n+this.cosX0*o*Math.cos(f))),t.y=e*(this.cosX0*n-this.sinX0*o*Math.cos(f))+this.y0),t.x=e*o*Math.sin(f)+this.x0,t))},inverse:function(t){var e,r,n,o,i;t.x-=this.x0,t.y-=this.y0;var a=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return e=this.long0,r=this.lat0,a<=LI?(t.x=e,t.y=r,t):(r=Math.asin(Math.cos(s)*this.sinlat0+t.y*Math.sin(s)*this.coslat0/a),e=Math.abs(this.coslat0)<LI?this.lat0>0?pD(this.long0+Math.atan2(t.x,-1*t.y)):pD(this.long0+Math.atan2(t.x,t.y)):pD(this.long0+Math.atan2(t.x*Math.sin(s),a*this.coslat0*Math.cos(s)-t.y*this.sinlat0*Math.sin(s))),t.x=e,t.y=r,t)}if(Math.abs(this.coslat0)<=LI){if(a<=LI)return r=this.lat0,e=this.long0,t.x=e,t.y=r,t;t.x*=this.con,t.y*=this.con,n=a*this.cons/(2*this.a*this.k0),r=this.con*dD(this.e,n),e=this.con*pD(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else o=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,a<=LI?i=this.X0:(i=Math.asin(Math.cos(o)*this.sinX0+t.y*Math.sin(o)*this.cosX0/a),e=pD(this.long0+Math.atan2(t.x*Math.sin(o),a*this.cosX0*Math.cos(o)-t.y*this.sinX0*Math.sin(o)))),r=-1*dD(this.e,Math.tan(.5*(CI+i)));return t.x=e,t.y=r,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(t,e,r){return e*=r,Math.tan(.5*(CI+t))*Math.pow((1-e)/(1+e),.5*r)}};var HF={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),r=this.a,n=1/this.rf,o=2*n-Math.pow(n,2),i=this.e=Math.sqrt(o);this.R=this.k0*r*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+i*e)/(1-i*e));this.K=a-this.alpha*s+this.alpha*i/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),r=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),n=-this.alpha*(e+r)+this.K,o=2*(Math.atan(Math.exp(n))-Math.PI/4),i=this.alpha*(t.x-this.lambda0),a=Math.atan(Math.sin(i)/(Math.sin(this.b0)*Math.tan(o)+Math.cos(this.b0)*Math.cos(i))),s=Math.asin(Math.cos(this.b0)*Math.sin(o)-Math.sin(this.b0)*Math.cos(o)*Math.cos(i));return t.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,t.x=this.R*a+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,r=t.y-this.y0,n=e/this.R,o=2*(Math.atan(Math.exp(r/this.R))-Math.PI/4),i=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(n)),a=Math.atan(Math.sin(n)/(Math.cos(this.b0)*Math.cos(n)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,l=0,u=i,c=-1e3,f=0;Math.abs(u-c)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+i/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=u,t},names:["somerc"]};function WF(t){"@babel/helpers - typeof";return(WF="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var YF=1e-7;var XF={init:function(){var t,e,r,n,o,i,a,s,l,u,c,f,h,p=0,y=0,d=0,b=0,v=0,m=0,g=0;this.no_off=(h="object"===WF((f=this).PROJECTION)?Object.keys(f.PROJECTION)[0]:f.PROJECTION,"no_uoff"in f||"no_off"in f||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(h)),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),w&&(g=this.alpha),_&&(p=this.rectified_grid_angle*NI),w||_)y=this.longc;else if(d=this.long1,v=this.lat1,b=this.long2,m=this.lat2,Math.abs(v-m)<=YF||(t=Math.abs(v))<=YF||Math.abs(t-CI)<=YF||Math.abs(Math.abs(this.lat0)-CI)<=YF||Math.abs(Math.abs(m)-CI)<=YF)throw new Error;var O=1-this.es;e=Math.sqrt(O),Math.abs(this.lat0)>LI?(s=Math.sin(this.lat0),r=Math.cos(this.lat0),t=1-this.es*s*s,this.B=r*r,this.B=Math.sqrt(1+this.es*this.B*this.B/O),this.A=this.B*this.k0*e/t,(o=(n=this.B*e/(r*Math.sqrt(t)))*n-1)<=0?o=0:(o=Math.sqrt(o),this.lat0<0&&(o=-o)),this.E=o+=n,this.E*=Math.pow(yD(this.e,this.lat0,s),this.B)):(this.B=1/e,this.A=this.k0,this.E=n=o=1),w||_?(w?(c=Math.asin(Math.sin(g)/n),_||(p=g)):(c=p,g=Math.asin(n*Math.sin(c))),this.lam0=y-Math.asin(.5*(o-1/o)*Math.tan(c))/this.B):(i=Math.pow(yD(this.e,v,Math.sin(v)),this.B),a=Math.pow(yD(this.e,m,Math.sin(m)),this.B),o=this.E/i,l=(a-i)/(a+i),u=((u=this.E*this.E)-a*i)/(u+a*i),(t=d-b)<-Math.pi?b-=FI:t>Math.pi&&(b+=FI),this.lam0=pD(.5*(d+b)-Math.atan(u*Math.tan(.5*this.B*(d-b))/l)/this.B),c=Math.atan(2*Math.sin(this.B*pD(d-this.lam0))/(o-1/o)),p=g=Math.asin(n*Math.sin(c))),this.singam=Math.sin(c),this.cosgam=Math.cos(c),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(n*n-1)/Math.cos(g))),this.lat0<0&&(this.u_0=-this.u_0)),o=.5*c,this.v_pole_n=this.ArB*Math.log(Math.tan(DI-o)),this.v_pole_s=this.ArB*Math.log(Math.tan(DI+o))},forward:function(t){var e,r,n,o,i,a,s,l,u={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-CI)>LI){if(e=.5*((i=this.E/Math.pow(yD(this.e,t.y,Math.sin(t.y)),this.B))-(a=1/i)),r=.5*(i+a),o=Math.sin(this.B*t.x),n=(e*this.singam-o*this.cosgam)/r,Math.abs(Math.abs(n)-1)<LI)throw new Error;l=.5*this.ArB*Math.log((1-n)/(1+n)),a=Math.cos(this.B*t.x),s=Math.abs(a)<YF?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+o*this.singam,a)}else l=t.y>0?this.v_pole_n:this.v_pole_s,s=this.ArB*t.y;return this.no_rot?(u.x=s,u.y=l):(s-=this.u_0,u.x=l*this.cosrot+s*this.sinrot,u.y=s*this.cosrot-l*this.sinrot),u.x=this.a*u.x+this.x0,u.y=this.a*u.y+this.y0,u},inverse:function(t){var e,r,n,o,i,a,s,l={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(r=t.y,e=t.x):(r=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((n=Math.exp(-this.BrA*r))-1/n),i=.5*(n+1/n),s=((a=Math.sin(this.BrA*e))*this.cosgam+o*this.singam)/i,Math.abs(Math.abs(s)-1)<LI)l.x=0,l.y=s<0?-CI:CI;else{if(l.y=this.E/Math.sqrt((1+s)/(1-s)),l.y=dD(this.e,Math.pow(l.y,1/this.B)),l.y===1/0)throw new Error;l.x=-this.rB*Math.atan2(o*this.cosgam-a*this.singam,Math.cos(this.BrA*e))}return l.x+=this.lam0,l},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var QF={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<LI)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),r=Math.cos(this.lat1),n=fD(this.e,e,r),o=yD(this.e,this.lat1,e),i=Math.sin(this.lat2),a=Math.cos(this.lat2),s=fD(this.e,i,a),l=yD(this.e,this.lat2,i),u=yD(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>LI?this.ns=Math.log(n/s)/Math.log(o/l):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(o,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,r=t.y;Math.abs(2*Math.abs(r)-Math.PI)<=LI&&(r=hD(r)*(CI-2*LI));var n,o,i=Math.abs(Math.abs(r)-CI);if(i>LI)n=yD(this.e,r,Math.sin(r)),o=this.a*this.f0*Math.pow(n,this.ns);else{if((i=r*this.ns)<=0)return null;o=0}var a=this.ns*pD(e-this.long0);return t.x=this.k0*(o*Math.sin(a))+this.x0,t.y=this.k0*(this.rh-o*Math.cos(a))+this.y0,t},inverse:function(t){var e,r,n,o,i,a=(t.x-this.x0)/this.k0,s=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+s*s),r=1):(e=-Math.sqrt(a*a+s*s),r=-1);var l=0;if(0!==e&&(l=Math.atan2(r*a,r*s)),0!==e||this.ns>0){if(r=1/this.ns,n=Math.pow(e/(this.a*this.f0),r),-9999===(o=dD(this.e,n)))return null}else o=-CI;return i=pD(l/this.ns+this.long0),t.x=i,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var ZF={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,r,n,o,i,a,s,l=t.x,u=t.y,c=pD(l-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),r=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),n=-c*this.alfa,o=Math.asin(Math.cos(this.ad)*Math.sin(r)+Math.sin(this.ad)*Math.cos(r)*Math.cos(n)),i=Math.asin(Math.cos(r)*Math.sin(n)/Math.cos(o)),a=this.n*i,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(o/2+this.s45),this.n),t.y=s*Math.cos(a)/1,t.x=s*Math.sin(a)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,r,n,o,i,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),i=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),n=2*(Math.atan(Math.pow(this.ro0/i,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(n)-Math.sin(this.ad)*Math.cos(n)*Math.cos(o)),r=Math.asin(Math.cos(n)*Math.sin(o)/Math.cos(e)),t.x=this.long0-r/this.alfa,a=e,s=0;var u=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-t.y)<1e-10&&(s=1),a=t.y,u+=1}while(0===s&&u<15);return u>=15?null:t},names:["Krovak","krovak"]};function KF(t,e,r,n,o){return t*o-e*Math.sin(2*o)+r*Math.sin(4*o)-n*Math.sin(6*o)}function $F(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function tB(t){return.375*t*(1+.25*t*(1+.46875*t))}function eB(t){return.05859375*t*t*(1+.75*t)}function rB(t){return t*t*t*(35/3072)}function nB(t,e,r){var n=e*r;return t/Math.sqrt(1-n*n)}function oB(t){return Math.abs(t)<CI?t:t-hD(t)*Math.PI}function iB(t,e,r,n,o){var i,a;i=t/e;for(var s=0;s<15;s++)if(i+=a=(t-(e*i-r*Math.sin(2*i)+n*Math.sin(4*i)-o*Math.sin(6*i)))/(e-2*r*Math.cos(2*i)+4*n*Math.cos(4*i)-6*o*Math.cos(6*i)),Math.abs(a)<=1e-10)return i;return NaN}var aB={init:function(){this.sphere||(this.e0=$F(this.es),this.e1=tB(this.es),this.e2=eB(this.es),this.e3=rB(this.es),this.ml0=this.a*KF(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,r,n=t.x,o=t.y;if(n=pD(n-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(o)*Math.sin(n)),r=this.a*(Math.atan2(Math.tan(o),Math.cos(n))-this.lat0);else{var i=Math.sin(o),a=Math.cos(o),s=nB(this.a,this.e,i),l=Math.tan(o)*Math.tan(o),u=n*Math.cos(o),c=u*u,f=this.es*a*a/(1-this.es);e=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120)),r=this.a*KF(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*i/a*c*(.5+(5-l+6*f)*c/24)}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n=t.x/this.a,o=t.y/this.a;if(this.sphere){var i=o+this.lat0;e=Math.asin(Math.sin(i)*Math.cos(n)),r=Math.atan2(Math.tan(n),Math.cos(i))}else{var a=iB(this.ml0/this.a+o,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(a)-CI)<=LI)return t.x=this.long0,t.y=CI,o<0&&(t.y*=-1),t;var s=nB(this.a,this.e,Math.sin(a)),l=s*s*s/this.a/this.a*(1-this.es),u=Math.pow(Math.tan(a),2),c=n*this.a/s,f=c*c;e=a-s*Math.tan(a)/l*c*c*(.5-(1+3*u)*c*c/24),r=c*(1-f*(u/3+(1+3*u)*u*f/15))/Math.cos(a)}return t.x=pD(r+this.long0),t.y=oB(e),t},names:["Cassini","Cassini_Soldner","cass"]};function sB(t,e){var r;return t>1e-7?(1-t*t)*(e/(1-(r=t*e)*r)-.5/t*Math.log((1-r)/(1+r))):2*e}var lB=.3333333333333333,uB=.17222222222222222,cB=.10257936507936508,fB=.06388888888888888,hB=.0664021164021164,pB=.016415012942191543;var yB={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-CI)<LI?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<LI?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=sB(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,r=[];return r[0]=t*lB,e=t*t,r[0]+=e*uB,r[1]=e*fB,e*=t,r[0]+=e*cB,r[1]+=e*hB,r[2]=e*pB,r}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=sB(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,r,n,o,i,a,s,l,u,c,f=t.x,h=t.y;if(f=pD(f-this.long0),this.sphere){if(i=Math.sin(h),c=Math.cos(h),n=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((r=this.mode===this.EQUIT?1+c*n:1+this.sinph0*i+this.cosph0*c*n)<=LI)return null;e=(r=Math.sqrt(2/r))*c*Math.sin(f),r*=this.mode===this.EQUIT?i:this.cosph0*i-this.sinph0*c*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(h+this.lat0)<LI)return null;r=DI-.5*h,e=(r=2*(this.mode===this.S_POLE?Math.cos(r):Math.sin(r)))*Math.sin(f),r*=n}}else{switch(s=0,l=0,u=0,n=Math.cos(f),o=Math.sin(f),i=Math.sin(h),a=sB(this.e,i),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*n;break;case this.EQUIT:u=1+l*n;break;case this.N_POLE:u=CI+h,a=this.qp-a;break;case this.S_POLE:u=h-CI,a=this.qp+a}if(Math.abs(u)<LI)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),r=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*n):(u=Math.sqrt(2/(1+l*n)))*s*this.ymf,e=this.xmf*u*l*o;break;case this.N_POLE:case this.S_POLE:a>=0?(e=(u=Math.sqrt(a))*o,r=n*(this.mode===this.S_POLE?u:-u)):e=r=0}}return t.x=this.a*e+this.x0,t.y=this.a*r+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,r,n,o,i,a,s,l,u,c,f=t.x/this.a,h=t.y/this.a;if(this.sphere){var p,y=0,d=0;if((r=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(r=2*Math.asin(r),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(r),y=Math.cos(r)),this.mode){case this.EQUIT:r=Math.abs(p)<=LI?0:Math.asin(h*d/p),f*=d,h=y*p;break;case this.OBLIQ:r=Math.abs(p)<=LI?this.lat0:Math.asin(y*this.sinph0+h*d*this.cosph0/p),f*=d*this.cosph0,h=(y-Math.sin(r)*this.sinph0)*p;break;case this.N_POLE:h=-h,r=CI-r;break;case this.S_POLE:r-=CI}e=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<LI)return t.x=this.long0,t.y=this.lat0,t;o=2*Math.asin(.5*a/this.rq),n=Math.cos(o),f*=o=Math.sin(o),this.mode===this.OBLIQ?(s=n*this.sinb1+h*o*this.cosb1/a,i=this.qp*s,h=a*this.cosb1*n-h*this.sinb1*o):(s=h*o/a,i=this.qp*s,h=a*n)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(i=f*f+h*h))return t.x=this.long0,t.y=this.lat0,t;s=1-i/this.qp,this.mode===this.S_POLE&&(s=-s)}e=Math.atan2(f,h),l=Math.asin(s),u=this.apa,c=l+l,r=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return t.x=pD(this.long0+e),t.y=r,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function dB(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var bB={init:function(){Math.abs(this.lat1+this.lat2)<LI||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=fD(this.e3,this.sin_po,this.cos_po),this.qs1=sB(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=fD(this.e3,this.sin_po,this.cos_po),this.qs2=sB(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=sB(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>LI?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,r=t.y;this.sin_phi=Math.sin(r),this.cos_phi=Math.cos(r);var n=sB(this.e3,this.sin_phi),o=this.a*Math.sqrt(this.c-this.ns0*n)/this.ns0,i=this.ns0*pD(e-this.long0),a=o*Math.sin(i)+this.x0,s=this.rh-o*Math.cos(i)+this.y0;return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),n=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),n=-1),o=0,0!==e&&(o=Math.atan2(n*t.x,n*t.y)),n=e*this.ns0/this.a,this.sphere?a=Math.asin((this.c-n*n)/(2*this.ns0)):(r=(this.c-n*n)/this.ns0,a=this.phi1z(this.e3,r)),i=pD(o/this.ns0+this.long0),t.x=i,t.y=a,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var r,n,o,i,a,s=dB(.5*e);if(t<LI)return s;for(var l=t*t,u=1;u<=25;u++)if(r=Math.sin(s),n=Math.cos(s),s+=a=.5*(i=1-(o=t*r)*o)*i/n*(e/(1-l)-r/i+.5/t*Math.log((1-o)/(1+o))),Math.abs(a)<=1e-7)return s;return null}};var vB={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,r,n,o,i,a,s,l=t.x,u=t.y;return n=pD(l-this.long0),e=Math.sin(u),r=Math.cos(u),o=Math.cos(n),(i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=LI?(a=this.x0+1*this.a*r*Math.sin(n)/i,s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)/i):(a=this.x0+this.infinity_dist*r*Math.sin(n),s=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(o=Math.atan2(e,this.rc),r=Math.sin(o),a=dB((n=Math.cos(o))*this.sin_p14+t.y*r*this.cos_p14/e),i=Math.atan2(t.x*r,e*this.cos_p14*n-t.y*this.sin_p14*r),i=pD(this.long0+i)):(a=this.phic0,i=0),t.x=i,t.y=a,t},names:["gnom"]};var mB={init:function(){this.sphere||(this.k0=fD(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,r,n=t.x,o=t.y,i=pD(n-this.long0);if(this.sphere)e=this.x0+this.a*i*Math.cos(this.lat_ts),r=this.y0+this.a*Math.sin(o)/Math.cos(this.lat_ts);else{var a=sB(this.e,Math.sin(o));e=this.x0+this.a*this.k0*i,r=this.y0+this.a*a*.5/this.k0}return t.x=e,t.y=r,t},inverse:function(t){var e,r;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=pD(this.long0+t.x/this.a/Math.cos(this.lat_ts)),r=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(r=function(t,e){var r=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-r)<1e-6)return e<0?-1*CI:CI;for(var n,o,i,a,s=Math.asin(.5*e),l=0;l<30;l++)if(o=Math.sin(s),i=Math.cos(s),a=t*o,s+=n=Math.pow(1-a*a,2)/(2*i)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(n)<=1e-10)return s;return NaN}(this.e,2*t.y*this.k0/this.a),e=pD(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=r,t},names:["cea"]};var gB={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,r=t.y,n=pD(e-this.long0),o=oB(r-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*o,t},inverse:function(t){var e=t.x,r=t.y;return t.x=pD(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=oB(this.lat0+(r-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},wB=20;var _B={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=$F(this.es),this.e1=tB(this.es),this.e2=eB(this.es),this.e3=rB(this.es),this.ml0=this.a*KF(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,r,n,o=t.x,i=t.y,a=pD(o-this.long0);if(n=a*Math.sin(i),this.sphere)Math.abs(i)<=LI?(e=this.a*a,r=-1*this.a*this.lat0):(e=this.a*Math.sin(n)/Math.tan(i),r=this.a*(oB(i-this.lat0)+(1-Math.cos(n))/Math.tan(i)));else if(Math.abs(i)<=LI)e=this.a*a,r=-1*this.ml0;else{var s=nB(this.a,this.e,Math.sin(i))/Math.tan(i);e=s*Math.sin(n),r=this.a*KF(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*(1-Math.cos(n))}return t.x=e+this.x0,t.y=r+this.y0,t},inverse:function(t){var e,r,n,o,i,a,s,l,u;if(n=t.x-this.x0,o=t.y-this.y0,this.sphere)if(Math.abs(o+this.a*this.lat0)<=LI)e=pD(n/this.a+this.long0),r=0;else{var c;for(a=this.lat0+o/this.a,s=n*n/this.a/this.a+a*a,l=a,i=wB;i;--i)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=LI){r=l;break}e=pD(this.long0+Math.asin(n*Math.tan(l)/this.a)/Math.sin(r))}else if(Math.abs(o+this.ml0)<=LI)r=0,e=pD(this.long0+n/this.a);else{var f,h,p,y,d;for(a=(this.ml0+o)/this.a,s=n*n/this.a/this.a+a*a,l=a,i=wB;i;--i)if(d=this.e*Math.sin(l),f=Math.sqrt(1-d*d)*Math.tan(l),h=this.a*KF(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(f*(y=h/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*l)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*p-2/Math.sin(2*l))-p),Math.abs(u)<=LI){r=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(r),2))*Math.tan(r),e=pD(this.long0+Math.asin(n*f/this.a)/Math.sin(r))}return t.x=e,t.y=r,t},names:["Polyconic","poly"]};var OB={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,r=t.x,n=t.y-this.lat0,o=r-this.long0,i=n/TI*1e-5,a=o,s=1,l=0;for(e=1;e<=10;e++)s*=i,l+=this.A[e]*s;var u,c=l,f=a,h=1,p=0,y=0,d=0;for(e=1;e<=6;e++)u=p*c+h*f,h=h*c-p*f,p=u,y=y+this.B_re[e]*h-this.B_im[e]*p,d=d+this.B_im[e]*h+this.B_re[e]*p;return t.x=d*this.a+this.x0,t.y=y*this.a+this.y0,t},inverse:function(t){var e,r,n=t.x,o=t.y,i=n-this.x0,a=(o-this.y0)/this.a,s=i/this.a,l=1,u=0,c=0,f=0;for(e=1;e<=6;e++)r=u*a+l*s,l=l*a-u*s,u=r,c=c+this.C_re[e]*l-this.C_im[e]*u,f=f+this.C_im[e]*l+this.C_re[e]*u;for(var h=0;h<this.iterations;h++){var p,y=c,d=f,b=a,v=s;for(e=2;e<=6;e++)p=d*c+y*f,y=y*c-d*f,d=p,b+=(e-1)*(this.B_re[e]*y-this.B_im[e]*d),v+=(e-1)*(this.B_im[e]*y+this.B_re[e]*d);y=1,d=0;var m=this.B_re[1],g=this.B_im[1];for(e=2;e<=6;e++)p=d*c+y*f,y=y*c-d*f,d=p,m+=e*(this.B_re[e]*y-this.B_im[e]*d),g+=e*(this.B_im[e]*y+this.B_re[e]*d);var w=m*m+g*g;c=(b*m+v*g)/w,f=(v*m-b*g)/w}var _=c,O=f,S=1,x=0;for(e=1;e<=9;e++)S*=_,x+=this.D[e]*S;var P=this.lat0+x*TI*1e5,E=this.long0+O;return t.x=E,t.y=P,t},names:["New_Zealand_Map_Grid","nzmg"]};var SB={init:function(){},forward:function(t){var e=t.x,r=t.y,n=pD(e-this.long0),o=this.x0+this.a*n,i=this.y0+this.a*Math.log(Math.tan(Math.PI/4+r/2.5))*1.25;return t.x=o,t.y=i,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=pD(this.long0+t.x/this.a),r=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=r,t},names:["Miller_Cylindrical","mill"]},xB=20;var PB={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=TF(this.es)},forward:function(t){var e,r,n=t.x,o=t.y;if(n=pD(n-this.long0),this.sphere){if(this.m)for(var i=this.n*Math.sin(o),a=xB;a;--a){var s=(this.m*o+Math.sin(o)-i)/(this.m+Math.cos(o));if(o-=s,Math.abs(s)<LI)break}else o=1!==this.n?Math.asin(this.n*Math.sin(o)):o;e=this.a*this.C_x*n*(this.m+Math.cos(o)),r=this.a*this.C_y*o}else{var l=Math.sin(o),u=Math.cos(o);r=this.a*CF(o,l,u,this.en),e=this.a*n*u/Math.sqrt(1-this.es*l*l)}return t.x=e,t.y=r,t},inverse:function(t){var e,r,n;return t.x-=this.x0,r=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,r/=this.C_x*(this.m+Math.cos(e)),this.m?e=dB((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=dB(Math.sin(e)/this.n)),r=pD(r+this.long0),e=oB(e)):(e=MF(t.y/this.a,this.es,this.en),(n=Math.abs(e))<CI?(n=Math.sin(e),r=pD(this.long0+t.x*Math.sqrt(1-this.es*n*n)/(this.a*Math.cos(e)))):n-LI<CI&&(r=this.long0)),t.x=r,t.y=e,t},names:["Sinusoidal","sinu"]};var EB={init:function(){},forward:function(t){for(var e=t.x,r=t.y,n=pD(e-this.long0),o=r,i=Math.PI*Math.sin(r);;){var a=-(o+Math.sin(o)-i)/(1+Math.cos(o));if(o+=a,Math.abs(a)<LI)break}o/=2,Math.PI/2-Math.abs(r)<LI&&(n=0);var s=.900316316158*this.a*n*Math.cos(o)+this.x0,l=1.4142135623731*this.a*Math.sin(o)+this.y0;return t.x=s,t.y=l,t},inverse:function(t){var e,r;t.x-=this.x0,t.y-=this.y0,r=t.y/(1.4142135623731*this.a),Math.abs(r)>.999999999999&&(r=.999999999999),e=Math.asin(r);var n=pD(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));n<-Math.PI&&(n=-Math.PI),n>Math.PI&&(n=Math.PI),r=(2*e+Math.sin(2*e))/Math.PI,Math.abs(r)>1&&(r=1);var o=Math.asin(r);return t.x=n,t.y=o,t},names:["Mollweide","moll"]};var kB={init:function(){Math.abs(this.lat1+this.lat2)<LI||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=$F(this.es),this.e1=tB(this.es),this.e2=eB(this.es),this.e3=rB(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=fD(this.e,this.sinphi,this.cosphi),this.ml1=KF(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<LI?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=fD(this.e,this.sinphi,this.cosphi),this.ml2=KF(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=KF(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,r=t.x,n=t.y;if(this.sphere)e=this.a*(this.g-n);else{var o=KF(this.e0,this.e1,this.e2,this.e3,n);e=this.a*(this.g-o)}var i=this.ns*pD(r-this.long0),a=this.x0+e*Math.sin(i),s=this.y0+this.rh-e*Math.cos(i);return t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(r=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(r=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var i=0;return 0!==r&&(i=Math.atan2(e*t.x,e*t.y)),this.sphere?(o=pD(this.long0+i/this.ns),n=oB(this.g-r/this.a),t.x=o,t.y=n,t):(n=iB(this.g-r/this.a,this.e0,this.e1,this.e2,this.e3),o=pD(this.long0+i/this.ns),t.x=o,t.y=n,t)},names:["Equidistant_Conic","eqdc"]};var jB={init:function(){this.R=this.a},forward:function(t){var e,r,n=t.x,o=t.y,i=pD(n-this.long0);Math.abs(o)<=LI&&(e=this.x0+this.R*i,r=this.y0);var a=dB(2*Math.abs(o/Math.PI));(Math.abs(i)<=LI||Math.abs(Math.abs(o)-CI)<=LI)&&(e=this.x0,r=o>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/i-i/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),f=c/(u+c-1),h=f*f,p=f*(2/u-1),y=p*p,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(l*(f-y)*(f-y)-(y+l)*(h-y)))/(y+l);i<0&&(d=-d),e=this.x0+d;var b=l+f;return d=Math.PI*this.R*(p*b-s*Math.sqrt((y+l)*(l+1)-b*b))/(y+l),r=o>=0?this.y0+d:this.y0-d,t.x=e,t.y=r,t},inverse:function(t){var e,r,n,o,i,a,s,l,u,c,f,h;return t.x-=this.x0,t.y-=this.y0,f=Math.PI*this.R,i=(n=t.x/f)*n+(o=t.y/f)*o,f=3*(o*o/(l=-2*(a=-Math.abs(o)*(1+i))+1+2*o*o+i*i)+(2*(s=a-2*o*o+n*n)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,r=t.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI,e=Math.abs(n)<LI?this.long0:pD(this.long0+Math.PI*(i-1+Math.sqrt(1+2*(n*n-o*o)+i*i))/2/n),t.x=e,t.y=r,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var TB={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,l,u,c,f,h,p,y,d,b,v,m,g,w,_,O,S=t.x,x=t.y,P=Math.sin(t.y),E=Math.cos(t.y),k=pD(S-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=LI?(t.x=this.x0+this.a*(CI-x)*Math.sin(k),t.y=this.y0-this.a*(CI-x)*Math.cos(k),t):Math.abs(this.sin_p12+1)<=LI?(t.x=this.x0+this.a*(CI+x)*Math.sin(k),t.y=this.y0+this.a*(CI+x)*Math.cos(k),t):(m=this.sin_p12*P+this.cos_p12*E*Math.cos(k),v=(b=Math.acos(m))?b/Math.sin(b):1,t.x=this.x0+this.a*v*E*Math.sin(k),t.y=this.y0+this.a*v*(this.cos_p12*P-this.sin_p12*E*Math.cos(k)),t):(e=$F(this.es),r=tB(this.es),n=eB(this.es),o=rB(this.es),Math.abs(this.sin_p12-1)<=LI?(i=this.a*KF(e,r,n,o,CI),a=this.a*KF(e,r,n,o,x),t.x=this.x0+(i-a)*Math.sin(k),t.y=this.y0-(i-a)*Math.cos(k),t):Math.abs(this.sin_p12+1)<=LI?(i=this.a*KF(e,r,n,o,CI),a=this.a*KF(e,r,n,o,x),t.x=this.x0+(i+a)*Math.sin(k),t.y=this.y0+(i+a)*Math.cos(k),t):(s=P/E,l=nB(this.a,this.e,this.sin_p12),u=nB(this.a,this.e,P),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*E)),g=0===(f=Math.atan2(Math.sin(k),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(k)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=LI?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(k)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),b=l*g*(1-(w=g*g)*(d=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-d)/6+(_=w*g)/8*(y=h*p)*(1-2*d)+(O=_*g)/120*(d*(4-7*d)-3*h*h*(1-7*d))-O*g/48*y),t.x=this.x0+b*Math.sin(f),t.y=this.y0+b*Math.cos(f),t))},inverse:function(t){var e,r,n,o,i,a,s,l,u,c,f,h,p,y,d,b,v,m,g,w,_,O,S;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*CI*this.a)return;return r=e/this.a,n=Math.sin(r),o=Math.cos(r),i=this.long0,Math.abs(e)<=LI?a=this.lat0:(a=dB(o*this.sin_p12+t.y*n*this.cos_p12/e),s=Math.abs(this.lat0)-CI,i=Math.abs(s)<=LI?this.lat0>=0?pD(this.long0+Math.atan2(t.x,-t.y)):pD(this.long0-Math.atan2(-t.x,t.y)):pD(this.long0+Math.atan2(t.x*n,e*this.cos_p12*o-t.y*this.sin_p12*n))),t.x=i,t.y=a,t}return l=$F(this.es),u=tB(this.es),c=eB(this.es),f=rB(this.es),Math.abs(this.sin_p12-1)<=LI?(a=iB(((h=this.a*KF(l,u,c,f,CI))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,l,u,c,f),i=pD(this.long0+Math.atan2(t.x,-1*t.y)),t.x=i,t.y=a,t):Math.abs(this.sin_p12+1)<=LI?(h=this.a*KF(l,u,c,f,CI),a=iB(((e=Math.sqrt(t.x*t.x+t.y*t.y))-h)/this.a,l,u,c,f),i=pD(this.long0+Math.atan2(t.x,t.y)),t.x=i,t.y=a,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),d=Math.atan2(t.x,t.y),p=nB(this.a,this.e,this.sin_p12),b=Math.cos(d),m=-(v=this.e*this.cos_p12*b)*v/(1-this.es),g=3*this.es*(1-m)*this.sin_p12*this.cos_p12*b/(1-this.es),O=1-m*(_=(w=e/p)-m*(1+m)*Math.pow(w,3)/6-g*(1+3*m)*Math.pow(w,4)/24)*_/2-w*_*_*_/6,y=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*b),i=pD(this.long0+Math.asin(Math.sin(d)*Math.sin(_)/Math.cos(y))),S=Math.sin(y),a=Math.atan2((S-this.es*O*this.sin_p12)*Math.tan(y),S*(1-this.es)),t.x=i,t.y=a,t)},names:["Azimuthal_Equidistant","aeqd"]};var CB={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,r,n,o,i,a,s,l=t.x,u=t.y;return n=pD(l-this.long0),e=Math.sin(u),r=Math.cos(u),o=Math.cos(n),((i=this.sin_p14*e+this.cos_p14*r*o)>0||Math.abs(i)<=LI)&&(a=1*this.a*r*Math.sin(n),s=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*r*o)),t.x=a,t.y=s,t},inverse:function(t){var e,r,n,o,i,a,s;return t.x-=this.x0,t.y-=this.y0,r=dB((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),n=Math.sin(r),o=Math.cos(r),a=this.long0,Math.abs(e)<=LI?(s=this.lat0,t.x=a,t.y=s,t):(s=dB(o*this.sin_p14+t.y*n*this.cos_p14/e),i=Math.abs(this.lat0)-CI,Math.abs(i)<=LI?(a=this.lat0>=0?pD(this.long0+Math.atan2(t.x,-t.y)):pD(this.long0-Math.atan2(-t.x,t.y)),t.x=a,t.y=s,t):(a=pD(this.long0+Math.atan2(t.x*n,e*this.cos_p14*o-t.y*this.sin_p14*n)),t.x=a,t.y=s,t))},names:["ortho"]},AB={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},MB={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function RB(t,e,r,n){var o;return t<LI?(n.value=MB.AREA_0,o=0):(o=Math.atan2(e,r),Math.abs(o)<=DI?n.value=MB.AREA_0:o>DI&&o<=CI+DI?(n.value=MB.AREA_1,o-=CI):o>CI+DI||o<=-(CI+DI)?(n.value=MB.AREA_2,o=o>=0?o-BI:o+BI):(n.value=MB.AREA_3,o+=CI)),o}function LB(t,e){var r=t+e;return r<-BI?r+=FI:r>+BI&&(r-=FI),r}var NB={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=CI-DI/2?this.face=AB.TOP:this.lat0<=-(CI-DI/2)?this.face=AB.BOTTOM:Math.abs(this.long0)<=DI?this.face=AB.FRONT:Math.abs(this.long0)<=CI+DI?this.face=this.long0>0?AB.RIGHT:AB.LEFT:this.face=AB.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,r,n,o,i,a,s={x:0,y:0},l={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,r=t.x,this.face===AB.TOP)o=CI-e,r>=DI&&r<=CI+DI?(l.value=MB.AREA_0,n=r-CI):r>CI+DI||r<=-(CI+DI)?(l.value=MB.AREA_1,n=r>0?r-BI:r+BI):r>-(CI+DI)&&r<=-DI?(l.value=MB.AREA_2,n=r+CI):(l.value=MB.AREA_3,n=r);else if(this.face===AB.BOTTOM)o=CI+e,r>=DI&&r<=CI+DI?(l.value=MB.AREA_0,n=-r+CI):r<DI&&r>=-DI?(l.value=MB.AREA_1,n=-r):r<-DI&&r>=-(CI+DI)?(l.value=MB.AREA_2,n=-r-CI):(l.value=MB.AREA_3,n=r>0?-r+BI:-r-BI);else{var u,c,f,h,p,y;this.face===AB.RIGHT?r=LB(r,+CI):this.face===AB.BACK?r=LB(r,+BI):this.face===AB.LEFT&&(r=LB(r,-CI)),h=Math.sin(e),p=Math.cos(e),y=Math.sin(r),u=p*Math.cos(r),c=p*y,f=h,this.face===AB.FRONT?n=RB(o=Math.acos(u),f,c,l):this.face===AB.RIGHT?n=RB(o=Math.acos(c),f,-u,l):this.face===AB.BACK?n=RB(o=Math.acos(-u),f,-c,l):this.face===AB.LEFT?n=RB(o=Math.acos(-c),f,u,l):(o=n=0,l.value=MB.AREA_0)}return a=Math.atan(12/BI*(n+Math.acos(Math.sin(n)*Math.cos(DI))-CI)),i=Math.sqrt((1-Math.cos(o))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(n))))),l.value===MB.AREA_1?a+=CI:l.value===MB.AREA_2?a+=BI:l.value===MB.AREA_3&&(a+=1.5*BI),s.x=i*Math.cos(a),s.y=i*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,t.x=s.x,t.y=s.y,t},inverse:function(t){var e,r,n,o,i,a,s,l,u,c,f,h,p={lam:0,phi:0},y={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,r=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?y.value=MB.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(y.value=MB.AREA_1,e-=CI):t.x<0&&-t.x>=Math.abs(t.y)?(y.value=MB.AREA_2,e=e<0?e+BI:e-BI):(y.value=MB.AREA_3,e+=CI),u=BI/12*Math.tan(e),i=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(i),(s=1-(n=Math.cos(e))*n*(o=Math.tan(r))*o*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===AB.TOP)l=Math.acos(s),p.phi=CI-l,y.value===MB.AREA_0?p.lam=a+CI:y.value===MB.AREA_1?p.lam=a<0?a+BI:a-BI:y.value===MB.AREA_2?p.lam=a-CI:p.lam=a;else if(this.face===AB.BOTTOM)l=Math.acos(s),p.phi=l-CI,y.value===MB.AREA_0?p.lam=-a+CI:y.value===MB.AREA_1?p.lam=-a:y.value===MB.AREA_2?p.lam=-a-CI:p.lam=a<0?-a-BI:-a+BI;else{var d,b,v;u=(d=s)*d,b=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),y.value===MB.AREA_1?(u=b,b=-v,v=u):y.value===MB.AREA_2?(b=-b,v=-v):y.value===MB.AREA_3&&(u=b,b=v,v=-u),this.face===AB.RIGHT?(u=d,d=-b,b=u):this.face===AB.BACK?(d=-d,b=-b):this.face===AB.LEFT&&(u=d,d=b,b=-u),p.phi=Math.acos(-v)-CI,p.lam=Math.atan2(b,d),this.face===AB.RIGHT?p.lam=LB(p.lam,-CI):this.face===AB.BACK?p.lam=LB(p.lam,-BI):this.face===AB.LEFT&&(p.lam=LB(p.lam,+CI))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,t.x=p.lam,t.y=p.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},IB=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],DB=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],FB=.8487,BB=1.3523,GB=II/5,UB=1/GB,zB=18,VB=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},JB=function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])};var qB={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=pD(t.x-this.long0),r=Math.abs(t.y),n=Math.floor(r*GB);n<0?n=0:n>=zB&&(n=zB-1),r=II*(r-UB*n);var o={x:VB(IB[n],r)*e,y:VB(DB[n],r)};return t.y<0&&(o.y=-o.y),o.x=o.x*this.a*FB+this.x0,o.y=o.y*this.a*BB+this.y0,o},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*FB),y:Math.abs(t.y-this.y0)/(this.a*BB)};if(e.y>=1)e.x/=IB[zB][0],e.y=t.y<0?-CI:CI;else{var r=Math.floor(e.y*zB);for(r<0?r=0:r>=zB&&(r=zB-1);;)if(DB[r][0]>e.y)--r;else{if(!(DB[r+1][0]<=e.y))break;++r}var n=DB[r],o=5*(e.y-n[0])/(DB[r+1][0]-n[0]);o=function(t,e,r,n){for(var o=e;n;--n){var i=t(o);if(o-=i,Math.abs(i)<r)break}return o}(function(t){return(VB(n,t)-e.y)/JB(n,t)},o,LI,100),e.x/=VB(IB[r],o),e.y=(5*r+o)*NI,t.y<0&&(e.y=-e.y)}return e.x=pD(e.x+this.long0),e},names:["Robinson","robin"]};var HB={init:function(){this.name="geocent"},forward:function(t){return ID(t,this.es,this.a)},inverse:function(t){return DD(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},WB={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},YB={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var XB={init:function(){if(Object.keys(YB).forEach(function(t){if(void 0===this[t])this[t]=YB[t].def;else{if(YB[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);YB[t].num&&(this[t]=parseFloat(this[t]))}YB[t].degrees&&(this[t]=this[t]*NI)}.bind(this)),Math.abs(Math.abs(this.lat0)-CI)<LI?this.mode=this.lat0<0?WB.S_POLE:WB.N_POLE:Math.abs(this.lat0)<LI?this.mode=WB.EQUIT:(this.mode=WB.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,r,n,o,i=Math.sin(t.y),a=Math.cos(t.y),s=Math.cos(t.x);switch(this.mode){case WB.OBLIQ:r=this.sinph0*i+this.cosph0*a*s;break;case WB.EQUIT:r=a*s;break;case WB.S_POLE:r=-i;break;case WB.N_POLE:r=i}switch(e=(r=this.pn1/(this.p-r))*a*Math.sin(t.x),this.mode){case WB.OBLIQ:r*=this.cosph0*i-this.sinph0*a*s;break;case WB.EQUIT:r*=i;break;case WB.N_POLE:r*=-a*s;break;case WB.S_POLE:r*=a*s}return o=1/((n=r*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-r*this.sg)*this.cw*o,r=n*o,t.x=e*this.a,t.y=r*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,r,n,o={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,r=this.pn1*t.y*this.cw*n,t.x=e*this.cg+r*this.sg,t.y=r*this.cg-e*this.sg;var i=NF(t.x,t.y);if(Math.abs(i)<LI)o.x=0,o.y=t.y;else{var a,s;switch(s=1-i*i*this.pfact,s=(this.p-Math.sqrt(s))/(this.pn1/i+i/this.pn1),a=Math.sqrt(1-s*s),this.mode){case WB.OBLIQ:o.y=Math.asin(a*this.sinph0+t.y*s*this.cosph0/i),t.y=(a-this.sinph0*Math.sin(o.y))*i,t.x*=s*this.cosph0;break;case WB.EQUIT:o.y=Math.asin(t.y*s/i),t.y=a*i,t.x*=s;break;case WB.N_POLE:o.y=Math.asin(a),t.y=-t.y;break;case WB.S_POLE:o.y=-Math.asin(a)}o.x=Math.atan2(t.x,t.y)}return t.x=o.x+this.long0,t.y=o.y,t},names:["Tilted_Perspective","tpers"]};var QB={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,r,n,o,i=t.x,a=t.y;if(i-=this.long0,"ellipse"===this.shape){a=Math.atan(this.radius_p2*Math.tan(a));var s=this.radius_p/NF(this.radius_p*Math.cos(a),Math.sin(a));if(r=s*Math.cos(i)*Math.cos(a),n=s*Math.sin(i)*Math.cos(a),o=s*Math.sin(a),(this.radius_g-r)*r-n*n-o*o*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/NF(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/NF(n,e)))}else"sphere"===this.shape&&(e=Math.cos(a),r=Math.cos(i)*e,n=Math.sin(i)*e,o=Math.sin(a),e=this.radius_g-r,this.flip_axis?(t.x=this.radius_g_1*Math.atan(n/NF(o,e)),t.y=this.radius_g_1*Math.atan(o/e)):(t.x=this.radius_g_1*Math.atan(n/e),t.y=this.radius_g_1*Math.atan(o/NF(n,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,r,n,o,i=-1,a=0,s=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*NF(1,s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*NF(1,a));var l=s/this.radius_p;if(e=a*a+l*l+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(s=Math.tan(t.y/this.radius_g_1),a=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+s*s)):(a=Math.tan(t.x/this.radius_g_1),s=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+a*a)),e=a*a+s*s+i*i,(n=(r=2*this.radius_g*i)*r-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;o=(-r-Math.sqrt(n))/(2*e),i=this.radius_g+o*i,a*=o,s*=o,t.x=Math.atan2(a,i),t.y=Math.atan(s*Math.cos(t.x)/i)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]};QD.defaultDatum="WGS84",QD.Proj=ND,QD.WGS84=new QD.Proj("WGS84"),QD.Point=bF,QD.toPoint=JD,QD.defs=aD,QD.nadgrid=function(t,e){var r=new DataView(e),n=function(t){var e=t.getInt32(8,!1);return 11!==e&&(11!==(e=t.getInt32(8,!0))&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0)}(r),o=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:TD(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(r,n);o.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var i={header:o,subgrids:function(t,e,r){for(var n=[],o=0;o<e.nSubgrids;o++){var i=AD(t,176,r),a=MD(t,176,i,r),s=Math.round(1+(i.upperLongitude-i.lowerLongitude)/i.longitudeInterval),l=Math.round(1+(i.upperLatitude-i.lowerLatitude)/i.latitudeInterval);n.push({ll:[jD(i.lowerLongitude),jD(i.lowerLatitude)],del:[jD(i.longitudeInterval),jD(i.latitudeInterval)],lim:[s,l],count:i.gridNodeCount,cvs:CD(a)})}return n}(r,o,n)};return ED[t]=i,i},QD.transform=HD,QD.mgrs=iF,QD.version="__VERSION__",function(t){t.Proj.projections.add(RF),t.Proj.projections.add(BF),t.Proj.projections.add(GF),t.Proj.projections.add(JF),t.Proj.projections.add(qF),t.Proj.projections.add(HF),t.Proj.projections.add(XF),t.Proj.projections.add(QF),t.Proj.projections.add(ZF),t.Proj.projections.add(aB),t.Proj.projections.add(yB),t.Proj.projections.add(bB),t.Proj.projections.add(vB),t.Proj.projections.add(mB),t.Proj.projections.add(gB),t.Proj.projections.add(_B),t.Proj.projections.add(OB),t.Proj.projections.add(SB),t.Proj.projections.add(PB),t.Proj.projections.add(EB),t.Proj.projections.add(kB),t.Proj.projections.add(jB),t.Proj.projections.add(TB),t.Proj.projections.add(CB),t.Proj.projections.add(NB),t.Proj.projections.add(qB),t.Proj.projections.add(HB),t.Proj.projections.add(XB),t.Proj.projections.add(QB)}(QD);var ZB=QD;function KB(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return $B(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $B(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $B(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}window.proj4=ZB,window.Proj4js=ZB,wI().Proj=wI().Proj||{},wI().Proj._isProj4Obj=function(t){return void 0!==t.inverse&&void 0!==t.forward},wI().Proj.Projection=wI().Class.extend({initialize:function(t,e,r,n){var o=wI().Proj._isProj4Obj(t);this._proj=o?t:this._projFromCodeDef(t,e);var i=r;wI().Util.isArray(r)&&(i=wI().bounds(r)),this.bounds=o?e:i,this.wrapLng=n},project:function(t){var e=this._proj.forward([t.lng,t.lat]);return new(wI().Point)(e[0],e[1])},unproject:function(t,e){this.bounds&&!this.wrapLng&&(t.x=t.x<this.bounds.min.x?this.bounds.min.x:t.x>this.bounds.max.x?this.bounds.max.x:t.x,t.y=t.y<this.bounds.min.y?this.bounds.min.y:t.y>this.bounds.max.y?this.bounds.max.y:t.y);var r=this._proj.inverse([t.x,t.y]);return new(wI().LatLng)(r[1],r[0],e)},_projFromCodeDef:function(t,e){if(e)ZB.defs(t,e);else if(void 0===ZB.defs[t]){var r=t.split(":");if(r.length>3&&(t=r[r.length-3]+":"+r[r.length-1]),void 0===ZB.defs[t])throw"No projection definition for code "+t}return ZB(t)},getUnits:function(){return this._proj.oProj.units||"degrees"}});var tG=wI().Class.extend({includes:wI().CRS,options:{transformation:new(wI().Transformation)(1,0,-1,0)},initialize:function(t,e){var r,n,o;if(e.bounds&&4===e.bounds.length){var i=KB(e.bounds,4),a=i[0],s=i[1],l=i[2],u=i[3];e.bounds=[[a,s],[l,u]]}if(wI().Proj._isProj4Obj(t)?(r=(n=t).srsCode,e=e||{},this.projection=new(wI().Proj.Projection)(n,e.bounds,e.wrapLng)):(r=t,o=(e=e||{}).def||"",this.projection=new(wI().Proj.Projection)(r,o,e.bounds,e.wrapLng)),wI().Util.setOptions(this,e),this.options.wrapLng&&(this.wrapLng=this.options.wrapLng),this.code=r,this.transformation=this.options.transformation,this.options.dpi=this.options.dpi||96,this.options.bounds&&(this.options.bounds=wI().bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof wI().Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new(wI().Transformation)(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this.scales=this.options.scales,this._scales=this._toProj4Scales(this.options.scales,this.options.dpi);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){this.scales=[];for(var c=0;c<this.options.scaleDenominators.length;c++)this.scales[c]=1/this.options.scaleDenominators[c];this._scales=this._toProj4Scales(this.scales,this.options.dpi)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(var f=this.options.resolutions.length-1;f>=0;f--)this.options.resolutions[f]&&(this._scales[f]=1/this.options.resolutions[f])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this._rectify(),this.infinite=!this.options.bounds},_rectify:function(){if(this._scales&&(this.resolutions||(this.resolutions=[],this.resolutions=this._proj4ScalesToResolutions(this._scales)),!this.scales)){this.scales=[];for(var t=0;t<this.resolutions.length;t++){var e=this.resolutions[t]*this.options.dpi*(1/.0254)*this._getMeterPerMapUnit(this.projection.getUnits());this.scales[t]=1/e}}},scale:function(t){var e,r=Math.floor(t);return t===r?this._scales[t]:(e=this._scales[r])+(this._scales[r+1]-e)*(t-r)},zoom:function(t){var e,r,n=this._closestElement(this._scales,t),o=this._scales.indexOf(n);return n?t===n?o:(r=o+1,void 0===(e=this._scales[r])?o:(t-n)/(e-n)+o):0},distance:wI().CRS.Earth.distance,R:wI().CRS.Earth.R,_closestElement:function(t,e){for(var r,n=t.length;n--;)t[n]<=e&&(void 0===r||r<t[n])&&(r=t[n]);return r},_proj4ScalesToResolutions:function(t){var e=[];if(!t)return e;for(var r=0;r<t.length;r++)e[r]=1/t[r];return e},_toProj4Scales:function(t,e){var r=[];if(!t)return r;for(var n=0;n<t.length;n++){var o=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;r[n]=1/(.0254/((e||96)*t[n])/o)}return r},_getMeterPerMapUnit:function(t){var e=1;return"meter"===t?e=1:"degrees"===t||"degree"===t?e=2*Math.PI*6378137/360:"kilometer"===t?e=.001:"inch"===t?e=1/.025399999918:"feet"===t&&(e=.3048),e},_getDefaultProj4ScalesByBounds:function(t){if(!t)return[];for(var e=t.getSize(),r=Math.max(e.x,e.y)/256,n=[],o=0;o<23;o++)n[o]=Math.pow(2,o)/r;return n}}),eG=function(t,e){return new tG(t,e)},rG={Prefix:"Leaflet with <span>© <a href='https://iclient.supermap.io' title='SuperMap iClient' target='_blank'>SuperMap iClient</a></span>",Common:{attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' title='SuperMap iServer' target='_blank'>SuperMap iServer</a></span>"},Online:{attribution:"Map Data <span>© <a href='https://www.supermapol.com' title='SuperMap Online' target='_blank'>SuperMap Online</a></span>"},ECharts:{attribution:"© 2018 百度 ECharts"},MapV:{attribution:"© 2018 百度 MapV "},Turf:{attribution:"<span>© <a href='https://turfjs.org/' title='turfjs' target='_blank'>turfjs</a></span>"},Baidu:{attribution:"Map Data © 2018 Baidu - GS(2016)2089号 - Data © 长地万方"},Cloud:{attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo"},Tianditu:{attribution:"Map Data <a href='https://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='https://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a>"}};wI().Control.Attribution.include({options:{position:"bottomright",prefix:rG.Prefix}}),wI().Map.include({latLngToAccurateContainerPoint:function(t){var e=this.project(wI().latLng(t))._subtract(this.getPixelOrigin());return wI().point(e).add(this._getMapPanePos())}}),[wI().Polyline,wI().Polygon,wI().Marker,wI().CircleMarker,wI().Circle,wI().LayerGroup].map(function(t){return t.defaultFunction=t.prototype.toGeoJSON,t.include({toGeoJSON:function(e){return t.defaultFunction.call(this,e||10)}}),t});var nG=wI().Evented.extend({options:{url:null,proxy:null,withCredentials:!1,crossOrigin:null},initialize:function(t,e){t&&(t=t.indexOf("/")!==t.length-1?t:t.substr(0,t.length-1)),this.url=t,wI().setOptions(this,e),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}}),oG=nG.extend({options:{projection:null},initialize:function(t,e){e=e||{},wI().setOptions(this,e),e.projection&&(this.options.projection=e.projection),nG.prototype.initialize.call(this,t,e)},getMapInfo:function(t){var e=this;return new Tm(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)},getWKT:function(t){var e=this;return new Tm("".concat(e.url,"/prjCoordSys.wkt"),{proxy:e.options.proxy,withCredentials:e.options.withCredentials,withoutFormatSuffix:!0,crossOrigin:e.options.crossOrigin,headers:e.options.headers,projection:e.options.projection}).processAsync(t)},getTilesets:function(t){var e=this;return new jP(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}}),iG=wI().Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal",switch:!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var t=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),t},setContent:function(t){var e=wI().Util.extend({},t);this.setVersionName(e.desc).setToolTip(e.desc)},setVersionName:function(t){var e=t;return t||(e=this.getValue()),this._sliderValue.innerHTML=e,this},setToolTip:function(t){return this.tooltip.innerHTML=t,this},updateLength:function(t){t>0&&(this.length=t,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(t){t&&(this.options.layer=t);var e=this,r=e.options.layer;r.on("tilesetsinfoloaded",function(t){var r=t&&t.tileVersions;e.update(r)}),r.on("tileversionschanged",function(t){var r=t&&t.tileVersion;e.setContent(r)}),e.getTileSetsInfo()},update:function(t){this.tileVersions=t||[],this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var t=this;t.options.layer&&new oG(t.options.layer._url).getTilesets(function(e){t.options.layer.setTileSetsInfo(e.result)})},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1,this):parseInt(this.slider.value)>this.max-1?this:(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion(),this)},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1?this:(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion(),this)},tilesVersion:function(t){for(var e=this.options.layer,r=this.tileVersions,n=r.length,o=0;o<n;o++)if(r[o].name==t){e.updateCurrentTileSetsIndex(o),e.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var t=this.tileVersions[this.getValue()];return t&&t.name},_initLayout:function(){var t="leaflet-control-ctv";this._container=wI().DomUtil.create("div",t+" "+t+"-"+this.options.orientation),this._sliderBtn=wI().DomUtil.create("a",t+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=wI().DomUtil.create("p",t+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;return this._sliderContent=wI().DomUtil.create("div","leaflet-ctv-slider-main  tooltip",this._container),this.tooltip=wI().DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options.switch&&(this._next=wI().DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-next",this._sliderContent),this._next.innerHTML=this.options.nextText,wI().DomEvent.on(this._next,"click",this.nextTilesVersion,this),wI().DomUtil.addClass(this._container,t+"-incdec")),this._sliderContainer=wI().DomUtil.create("div","leaflet-ctv-slider-container",this._sliderContent),this.slider=wI().DomUtil.create("input","leaflet-ctv-slider",this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?wI().DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options.switch&&(this._last=wI().DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-last",this._sliderContent),this._last.innerHTML=this.options.lastText,wI().DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",wI().DomEvent.disableClickPropagation(this._container),this.options.collapsed?(wI().Browser.android||wI().DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),wI().Browser.touch?wI().DomEvent.on(this._sliderBtn,"click",wI().DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):wI().DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){wI().DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){wI().DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var t=this.getVersion();this.tilesVersion(t)}});wI().Map.mergeOptions({changeTileVersionControl:!1}),wI().Map.addInitHook(function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new iG,this.addControl(this.changeTileVersionControl))});var aG=wI().Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var t=wI().DomUtil.create("div","iclient-leaflet-logo");t.style.marginTop=0,t.style.marginBottom=0,t.style.marginLeft=0,t.style.marginRight=0;var e="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.options.imageUrl&&(e=this.options.imageUrl);var r=this.options.alt,n="94px",o="29px",i="width:"+n+";height:"+o+";";this.options.imageUrl&&(i="width:"+(n=this.options.width)+";height:"+(o=this.options.height)+";",n&&o||(i=""));var a=this.options.link;return t.innerHTML="<a href='"+a+"' target='_blank' style='border: none;display: block;'><img src="+e+" alt='"+r+"' style='border: none;"+i+"margin-right:5px;margin-bottom:2px;white-space: nowrap'></a>",t}});wI().Map.mergeOptions({logoControl:!0}),wI().Map.addInitHook(function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new aG:this.options.logoControl instanceof wI().Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))});for(var sG,lG=function(t){return"[object Array]"==Object.prototype.toString.call(t)},uG={toSuperMapBounds:function(t){return t&&-1!==["FeatureCollection","Feature"].indexOf(t.type)&&(t=wI().geoJSON(t).getBounds()),t instanceof wI().LatLngBounds?new _t(t.getSouthWest().lng,t.getSouthWest().lat,t.getNorthEast().lng,t.getNorthEast().lat):t instanceof wI().Bounds?new _t(t.min.x,t.min.y,t.max.x,t.max.y):lG(t)?new _t(t[0],t[1],t[2],t[3]):new _t},isArray:lG,toProcessingParam:function(t){var e={};if(t.length<1)e="";else{for(var r=[],n=0;n<t.length;n++){var o={};o.x=t[n][0],o.y=t[n][1],r.push(o)}e.type="REGION",e.points=r}return e}},cG=wI().extend({},wI().CRS.EPSG3857,{code:"Baidu",scale:function(t){return 6378137*Math.PI*2/Math.pow(2,18-t)},transformation:(sG=.5/(6378137*Math.PI),new(wI().Transformation)(sG,0,-sG,0))}),fG=[],hG=1;hG<19;hG++)fG.push(1.40625/Math.pow(2,hG));for(var pG=eG("EPSG:4326",{origin:[-180,90],resolutions:fG,bounds:wI().bounds([-180,-90],[180,90]),wrapLng:[-180,180]}),yG=2*Math.PI*6378137,dG=yG/2,bG=[],vG=1;vG<19;vG++)bG.push(yG/256/Math.pow(2,vG));var mG=eG("EPSG:3857",{origin:[-dG,dG],resolutions:bG,bounds:wI().bounds([-dG,-dG],[dG,dG]),wrapLng:[-180,180]}),gG=wI().Class.extend({initialize:function(t){this.bounds=t},project:function(t){return new(wI().Point)(t.lng,t.lat)},unproject:function(t){return new(wI().LatLng)(t.y,t.x)}}),wG=function(t){return new gG(t)},_G=wI().Class.extend({includes:wI().CRS,initialize:function(t){t.origin&&(this.transformation=new(wI().Transformation)(1,-t.origin.x,-1,t.origin.y)),this.projection=wG(t.bounds),this.bounds=t.bounds,this.origin=t.origin,this.resolutions=t.resolutions},scale:function(t){return this.resolutions&&0!==this.resolutions.length?this.resolutions[t]?1/this.resolutions[t]:1/this.resolutions[0]*Math.pow(2,t):1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256)*Math.pow(2,t)},zoom:function(t){var e;if(!this.resolutions||0===this.resolutions.length)return e=1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256),Math.log(t/e)/Math.LN2;var r=this.resolutions.indexOf(1/t);return r>-1?r:Math.log(t/(1/this.resolutions[0]))/Math.LN2},distance:function(t,e){var r=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(r*r+n*n)},infinite:!1}),OG=function(t){return new _G(t)},SG=function(t){return t?(new Hr).toGeoJSON(t):t},xG=function(t){if(!t)return t;var e,r=new Hr;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t.type))e=r.read(t,t.type);else if("function"==typeof t.toGeoJSON){var n=t.toGeoJSON();e=n?r.read(n,n.type):t}var o=e||t;return wI().Util.isArray(e)&&(1===e.length?o=e[0]:e.length>1&&(o=[],e.map(function(t){return o.push(t.geometry),t}))),o&&o.geometry?o.geometry:o},PG=nT,EG=function(t,e,r){var n=t*e*(1/.0254)*PG(r);return n=1/n},kG=function(t,e,r){var n=t*e*(1/.0254)*PG(r);return n=1/n},jG=function(t){return t>1?1/t:t},TG=function(t,e,r,n){return n=n||6378137,r=r||"",t>0&&e>0?(t=jG(t),"degree"===r.toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()?254/e/t/(2*Math.PI*n/360)/1e4:254/e/t/1e4):-1},CG=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:wI().CRS.EPSG4326,r=arguments.length>2?arguments[2]:void 0,n=null,o=null;if(-1===["FeatureCollection","Feature","Geometry"].indexOf(t.type))if(t.toGeoJSON)t=t.toGeoJSON();else if(t instanceof wI().LatLngBounds)t=wI().rectangle(t).toGeoJSON();else{if(!(t instanceof wI().Bounds))throw new Error("This tool only supports data conversion in geojson format or Vector Layers of Leaflet.");t=wI().rectangle([[t.getTopLeft().x,t.getTopLeft().y],[t.getBottomRight().x,t.getBottomRight().y]]).toGeoJSON()}var i={point:function(t){return o(t)},multipoint:function(t){return i.linestring.apply(this,[t])},linestring:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=i.point.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return e},multilinestring:function(t){return i.polygon.apply(this,[t])},polygon:function(t){for(var e,r=[],n=0,o=t.length;n<o;++n){try{e=i.linestring.apply(this,[t[n]])}catch(t){throw t}r.push(e)}return r},multipolygon:function(t){for(var e=[],r=null,n=0,o=t.length;n<o;++n){try{r=i.polygon.apply(this,[t[n]])}catch(t){throw t}e.push(r)}return e}};return function(t,e){if(n=t,o=e,"Feature"===t.type)n=a(t);else if("FeatureCollection"===t.type){for(var r=[],i=0;i<t.features.length;++i)try{r.push(a(t.features[i]))}catch(t){r=null}n.features=r}return n}(t,function(t){var n=e.unproject({x:t[0],y:t[1]}),o=r.project(n);return[o.x,o.y]});function a(t){var e=t.geometry;if(!dt.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!i[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{e.coordinates=i[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(t){throw t}return t.geometry=e,t}},AG=wI().TileLayer.extend({url:"https://maponline{num}.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:wI().latLngBounds(wI().latLng(-85.0511287798,-180),wI().latLng(85.0511287798,180)),retina:wI().Browser.retina,attribution:rG.Baidu.attribution},initialize:function(t,e){t&&(this.url=t),wI().setOptions(this,e),this.options.retina&&(this.options.maxZoom=18),wI().stamp(this)},getTileUrl:function(t){var e=wI().Util.template(this.url,{num:Math.abs((t.x+t.y)%4),x:t.x,y:-t.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}}),MG=function(t,e){return new AG(t,e)},RG=wI().TileLayer.extend({defaultURL:"http://t2.dituhui.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:rG.Cloud.attribution},initialize:function(t,e){wI().setOptions(this,e);var r=t||this.defaultURL;this._url=r+"?map="+this.options.mapName+"&type="+this.options.type,wI().stamp(this)},getTileUrl:function(t){var e=this._url+"&x="+t.x+"&y="+t.y+"&z="+t.z;return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),e}}),LG=function(t,e){return new RG(t,e)},NG=gI.Layer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:"",attribution:rG.Common.attribution,updateInterval:150,tileProxy:null,format:"png"},initialize:function(t,e){this._url=t,gI.Util.setOptions(this,e)},onAdd:function(t){this.update=gI.Util.throttle(this.update,this.options.updateInterval,this),t.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?t.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(t){return this.options.opacity=t,this._currentImage&&this._currentImage.setOpacity(t),this},getImageUrl:function(t){var e=dt.urlPathAppend(this._url,"image.".concat(this.options.format)),r=e+gI.Util.getParamString(Object.assign({},this._initAllRequestParams(),t),e);return r=wn.appendCredential(r),this.options.tileProxy&&(r=this.options.tileProxy+encodeURIComponent(r)),this.options.cacheEnabled||(r+="&_t="+(new Date).getTime()),r},_getImageParams:function(t){var e=this._calculateImageSize(t);return{viewBounds:this._compriseBounds(this._calculateBounds(t)),width:e.x,height:e.y}},_initAllRequestParams:function(){var t=this.options||{},e={},r=!0===t.redirect&&t.redirect;e.redirect=r;var n=!0===t.transparent&&t.transparent;e.transparent=n;var o=!1!==t.cacheEnabled||t.cacheEnabled;return e.cacheEnabled=o,t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID),t.rasterfunction&&(e.rasterfunction=JSON.stringify(t.rasterfunction)),t.clipRegionEnabled&&t.clipRegion&&(e.clipRegionEnabled=t.clipRegionEnabled,e.clipRegion=JSON.stringify(pr.fromGeometry(xG(t.clipRegion)))),!1===t.overlapDisplayed?(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):e.overlapDisplayed=!0,e},_requestImage:function(t,e){var r=this.getImageUrl(t);this._loadImage(r,e)},_loadImage:function(t,e){if(this._map){var r=new gI.ImageOverlay(t,e,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),n=function(t){r.off("error",o,this);var n=this._map;if(n){var i=t.target,a=this._currentImage;i._bounds&&i._bounds.equals(e)&&i._bounds.equals(n.getBounds())?(this._currentImage=i,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),a&&n.removeLayer(a),a&&a._map&&a._map.removeLayer(a)):n.removeLayer(i),this.fire("load",{bounds:e})}},o=function(){this._map.removeLayer(r),this.fire("error"),r.off("load",n,this)};r.once("load",n,this),r.once("error",o,this),this.fire("loading",{bounds:e})}},update:function(){if(this._map){var t=this._map.getZoom(),e=this._map.getBounds();if(t>(this._map.options.maxZoom||18)||t<(this._map.options.minZoom||0))this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var r=this._getImageParams(e);r?this._requestImage(r,e):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(t){var e=this._map.options.crs.project(t.getNorthEast()),r=this._map.options.crs.project(t.getSouthWest());return wI().bounds(e,r)},_compriseBounds:function(t){var e={leftBottom:{x:t.getBottomLeft().x,y:t.getTopRight().y},rightTop:{x:t.getTopRight().x,y:t.getBottomLeft().y}};return JSON.stringify(e)},_calculateImageSize:function(t){return new(wI().Bounds)(this._map.latLngToLayerPoint(t.getNorthWest()),this._map.latLngToLayerPoint(t.getSouthEast())).getSize()}}),IG=wI().TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:"",noWrap:!0},initialize:function(t,e){this._url=t,wI().setOptions(this,e);var r=this.options;if("REST"===r.requestEncoding){this.formatSuffix="."+({"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"}[r.format]||r.format.split("/").pop()||"png")}else r.requestEncoding="KVP"},getTileUrl:function(t){var e=this._getZoomForUrl(),r=this.options.matrixIds?this.options.matrixIds[e].identifier:e,n=this._url.indexOf("?"),o=n>-1?this._url.substring(0,this._url.indexOf("?")):this._url,i=n>-1?this._url.substring(this._url.indexOf("?")):"";o=wI().Util.template(o,{s:this._getSubdomain(t)});var a={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:r,tilerow:t.y,tilecol:t.x};if(this.options.tileProxy&&(o=this.options.tileProxy+o),"KVP"===this.options.requestEncoding)o+=wI().Util.getParamString(a,o);else if("REST"===this.options.requestEncoding){o+="/"+a.layer+"/"+a.style+"/"+a.tilematrixSet+"/"+a.tilematrix+"/"+a.tilerow+"/"+a.tilecol+this.formatSuffix}return o=dt.urlAppend(o,i),o=wn.appendCredential(o)}}),DG=function(t,e){return new IG(t,e)},FG=IG.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:rG.Tianditu.attribution,url:"https://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,key:"",dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7],bounds:[[-90,-180],[90,180]],noWrap:!0},initialize:function(t){t=t||{},wI().setOptions(this,t),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,IG.prototype.initialize.call(this,this.options.url,this.options),wI().stamp(this),this.options.key&&(this._url="".concat(this._url,"tk=").concat(this.options.key))},onAdd:function(t){this.options.tilematrixSet="EPSG:4326"===t.options.crs.code?"c":"w",this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),IG.prototype.onAdd.call(this,t)},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var r=this._globalTileRange;if((!e.wrapLng||this.options.noWrap)&&(t.x<r.min.x||t.x>r.max.x)||!e.wrapLat&&(t.y<r.min.y||t.y>r.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return wI().latLngBounds(this.options.bounds).overlaps(n)}}),BG=wI().TileLayer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,format:"png",tileProxy:null,attribution:rG.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,wI().TileLayer.prototype.initialize.apply(this,arguments),wI().setOptions(this,e),wI().stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(t){this._crs=this.options.crs||t.options.crs,wI().TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this.getScaleFromCoords(t),r=this._getLayerUrl()+"&scale="+e+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(r=this.options.tileProxy+encodeURIComponent(r)),this.options.cacheEnabled||(r+="&_t="+(new Date).getTime()),this.options.subdomains&&(r=wI().Util.template(r,{s:this._getSubdomain(t)})),r},getScale:function(t){var e=t||this._map.getZoom();return this.scales[e]},getScaleFromCoords:function(t){var e,r=this;return r.scales&&r.scales[t.z]?r.scales[t.z]:(r.scales=r.scales||{},e=r.getDefaultScale(t),r.scales[t.z]=e,e)},getDefaultScale:function(t){var e=this._crs;if(e.scales)return e.scales[t.z];var r=this._tileCoordsToBounds(t),n=e.project(r.getNorthEast()),o=e.project(r.getSouthWest()),i=this.options.tileSize,a=Math.max(Math.abs(n.x-o.x)/i,Math.abs(n.y-o.y)/i),s=c.METER;if(e.code){var l=e.code.split(":");if(l&&l.length>1){var u=parseInt(l[1]);s=u&&u>=4e3&&u<=5e3?c.DEGREE:c.METER}}return EG(a,96,s)},setTileSetsInfo:function(t){this.tileSets=t,wI().Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var t=this;if(null!=t.tileSets&&!(t.tempIndex===t.tileSetsIndex||this.tempIndex<0)){var e=t.tileSets.tileVersions;if(e&&t.tempIndex<e.length&&t.tempIndex>=0){var r=e[t.tempIndex].name;t.mergeTileVersionParam(r)&&(t.tileSetsIndex=t.tempIndex,t.fire("tileversionschanged",{tileVersion:e[t.tempIndex]}))}}},updateCurrentTileSetsIndex:function(t){this.tempIndex=t},mergeTileVersionParam:function(t){return!!t&&(this.requestParams.tileversion=t,this._paramsChanged=!0,this.redraw(),this._paramsChanged=!1,!0)},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var t=dt.urlPathAppend(this._url,"tileImage.".concat(this.options.format));return this.requestParams=this.requestParams||this._getAllRequestParams(),t=dt.urlAppend(t,gI.Util.getParamString(this.requestParams)),t=wn.appendCredential(t),this._layerUrl=t,t},_getAllRequestParams:function(){var t=this.options||{},e={},r=this.options.tileSize;r instanceof wI().Point||(r=wI().point(r,r)),e.width=r.x,e.height=r.y,e.redirect=!0===t.redirect,e.transparent=!0===t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),t.prjCoordSys&&(e.prjCoordSys=JSON.stringify(t.prjCoordSys)),t.layersID&&(e.layersID=t.layersID.toString()),t.clipRegionEnabled&&t.clipRegion&&(t.clipRegion=pr.fromGeometry(xG(t.clipRegion)),e.clipRegionEnabled=t.clipRegionEnabled,e.clipRegion=JSON.stringify(t.clipRegion));var n=this._crs;if(n.options&&n.options.origin)e.origin=JSON.stringify({x:n.options.origin[0],y:n.options.origin[1]});else if(n.projection&&n.projection.bounds){var o=n.projection.bounds,i=wI().point(o.min.x,o.max.y);e.origin=JSON.stringify({x:i.x,y:i.y})}return!1===t.overlapDisplayed?(e.overlapDisplayed=!1,t.overlapDisplayedOptions&&(e.overlapDisplayedOptions=t.overlapDisplayedOptions)):e.overlapDisplayed=!0,!0===e.cacheEnabled&&t.tileversion&&(e.tileversion=t.tileversion.toString()),t.rasterfunction&&(e.rasterfunction=JSON.stringify(t.rasterfunction)),e}}),GG=function(t,e){return new BG(t,e)},UG=r(6879),zG=r.n(UG),VG={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}},JG={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},qG={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},HG={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};function WG(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var YG=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.cartoCSS=null,this.mapUrl=e}var e,r,n;return e=t,(r=[{key:"pretreatedCartoCSS",value:function(t,e){e&&(t=this.processCharacters(t)),this.cartoCSS=this.cartoCSS||{};var r=new hT(t).getShaders();if(r)for(var n=0;n<r.length;n++){var o=r[n].elements[0],i=r[n].attachment;this.cartoCSS[o.clean]=this.cartoCSS[o.clean]||{},this.cartoCSS[o.clean][i]=this.cartoCSS[o.clean][i]||[],this.cartoCSS[o.clean][i].push(r[n])}}},{key:"processCharacters",value:function(t){var e=t;if(e){e=(e=e.replace(/[@]/gi,"___")).replace(/\\#/gi,"#");var r={};return this.layersInfo&&Object.keys(this.layersInfo).sort().forEach(function(t){for(var n=t.replace(/[@#\s]/gi,"___"),o=t,i=Object.keys(r),a=i.length;a>-1;a--)if(t.indexOf(i[a])>-1){o=t.replace(i[a],r[i[a]]);break}o=o.replace(/[#]/gi,"#"),r[t]=n,e=e.replace(new RegExp(o,"g"),n)}),e=(e=e.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}}},{key:"pickShader",value:function(t){if(!this.cartoCSS)return null;var e=t.replace(/[@#\s]/gi,"___");return this.cartoCSS[e]}},{key:"getDefaultStyle",value:function(t){var e={},r=VG[t];for(var n in r){var o=r[n];e[n]=o}return e}},{key:"getStyleFromiPortalMarker",value:function(t){return 0==t.indexOf("./")?null:wI().icon({iconUrl:t,iconSize:wI().point(48,43),iconAnchor:wI().point(24,43),popupAnchor:wI().point(0,-43)})}},{key:"getStyleFromiPortalStyle",value:function(t,e,r){var n=r?JSON.parse(r):null,o={};if("Point"===e||"MultiPoint"===e){var i=n||t.pointStyle;return i.externalGraphic?0==i.externalGraphic.indexOf("./")?null:wI().icon({iconUrl:i.externalGraphic,iconSize:wI().point(i.graphicWidth,i.graphicHeight),iconAnchor:wI().point(-i.graphicXOffset,-i.graphicYOffset),popupAnchor:wI().point(0,-i.graphicHeight)}):(o.radius=i.pointRadius,o.color=i.strokeColor,o.opacity=i.strokeOpacity,o.lineCap=i.strokeLineCap,o.weight=i.strokeWidth,o.fillColor=i.fillColor,o.fillOpacity=i.fillOpacity,o.dashArray=this.dashStyle(i,1),o)}if("LineString"===e||"MultiLineString"===e||"Box"===e){var a=n||t.lineStyle;return o.color=a.strokeColor,o.opacity=a.strokeOpacity,o.fillOpacity=a.fillOpacity,o.lineCap=a.strokeLineCap,o.weight=a.strokeWidth,o.dashArray=this.dashStyle(a,1),o}if("Polygon"===e||"MultiPolygon"===e){var s=n||t.polygonStyle;return o.color=s.strokeColor,o.opacity=s.strokeOpacity,o.lineCap=s.strokeLineCap,o.weight=s.strokeWidth,o.fillColor=s.fillColor,o.fillOpacity=s.fillOpacity,o.dashArray=this.dashStyle(s,1),o}}},{key:"dashStyle",value:function(t,e){if(!t)return[];var r=t.strokeWidth*e,n=t.strokeDashstyle;switch(n){case"solid":return[];case"dot":return[1,4*r];case"dash":return[4*r,4*r];case"dashdot":return[4*r,4*r,1,4*r];case"longdash":return[8*r,4*r];case"longdashdot":return[8*r,4*r,1,4*r];default:return n?dt.isArray(n)?n:(n=K.trim(n).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getValidStyleFromCarto",value:function(t,e,r,n,o){if(!r)return null;var i=n.type,a=n.properties.attributes||{},s=this.getDefaultStyle(i);o=void 0===o||o,a.FEATUREID=n.properties.id,a.SCALE=e;for(var l,u,c=JG[i],f=0,h=r.length;f<h;f++){var p=r[f],y=c[p.property],d=p.getValue(a,t,!0);if(null!==d&&y)if("fontSize"===y)o&&(d*=.8),l=d+"px",s.fontSize=l;else if("fontName"===y)u=d,s.fontName=u;else{if("globalCompositeOperation"===y){if(!(d=HG[d]))continue}else if(o&&"iconUrl"===y){d=(d=this.mapUrl+"/tileFeature/symbols/"+d.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"),s.iconUrl=d;continue}"weight"===y&&d<1&&(d=Math.ceil(d)),s[y]=d}}return s}},{key:"getValidStyleFromLayerInfo",value:function(t,e){var r=t.type,n=this.getDefaultStyle(r),o=e&&e.layerStyle;if(!o)return n;if("POINT"===r){var i=Math.ceil(96*o.markerSize*bt.mm)||8,a={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:i,picHeight:i,style:JSON.stringify(o)};return n.iconUrl=dt.urlAppend(this.mapUrl+"/symbol.png",dt.getParameterString(a)),n.iconSize=[i,i],n}if("TEXT"===r){if(o=t.properties.textStyle||e.layerStyle,n.fontWeight=o.bold?o.fontWeight:"normal",o.fontHeight){var s=96*o.fontHeight*bt.mm*.85;n.fontSize=s+"px",n.textHeight=s}if(o.fontName&&(n.fontFamily=o.fontName.indexOf("@")?o.fontName.replace(/@/g,""):o.fontName),o.align){var l=o.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");n.textAlign=l.toLowerCase()}return n.weight=o.outline?o.outlineWidth:0,o.backColor&&(n.color="rgba("+o.backColor.red+","+o.backColor.green+","+o.backColor.blue+",1)"),o.foreColor&&(n.fillColor="rgba("+o.foreColor.red+","+o.foreColor.green+","+o.foreColor.blue+",1)"),n.rotation=o.rotation||0,n}var u=o.fillSymbolID>7?0:o.fillSymbolID,c=o.lineSymbolID>5?0:o.lineSymbolID;for(var f in o){var h=qG[f];if(h){var p=h.leafletStyle;switch(h.type){case"number":var y=o[f];h.unit&&(y=96*y*bt[h.unit]*2.5),n[p]=y;break;case"color":var d=o[f],b=void 0,v=1;if("fillColor"===p)0!==u&&1!==u||(v=1-u,b="rgba("+d.red+","+d.green+","+d.blue+","+v+")");else if("color"===p){if(0===c||5===c)v=0===c?1:0;else{var m=[1,0];switch(c){case 1:m=[9.7,3.7];break;case 2:m=[3.7,3.7];break;case 3:m=[9.7,3.7,2.3,3.7];break;case 4:m=[9.7,3.7,2.3,3.7,2.3,3.7]}n.lineDasharray=m}b="rgba("+d.red+","+d.green+","+d.blue+","+v+")"}n[p]=b}}}return e.textField&&(n.textAlign="LEFT"),n}}])&&WG(e.prototype,r),n&&WG(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),XG=wI().Class.extend({initialize:function(t){var e=(t=t||{}).latLng||t._latLng;this._latLng=wI().latLng(e.lat,e.lng),this._style=t.style||t._canvas,this.attributes=t.attributes,this.id=t.id?t.id:null},getId:function(){return this.id},setId:function(t){this.id=t},setLatLng:function(t){this._latLng=t},setCanvas:function(t){this._style=t},setAttributes:function(t){this.attributes=t},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this.attributes},setStyle:function(t){this._style=t},getStyle:function(){return this._style}}),QG=wI().Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t=this.geometry;if(t.toGeoJSON){var e=t.toGeoJSON();return e.properties=this.attributes,(new Hr).read(e)[0]}if(3===t.length)t=new se(t[1],t[0],t[2]);else if(2===t.length)t=new Wt(t[0],t[1]);else if(t instanceof wI().LatLng)t=new Wt(t.lng,t.lat);else if(t instanceof wI().Point)t=new Wt(t.x,t.y);else if(t instanceof wI().CircleMarker){var r=t.getLatLng();t=new Wt(r.lng,r.lat)}return new Ar(t,this.attributes)},reverseLatLngs:function(t){wI().Util.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)t[e]=[t[e].lng,t[e].lat];return t}}),ZG=wI().Layer.extend({options:{alwaysMapCRS:!1,id:dt.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:rG.Common.attribution},initialize:function(t,e){wI().Util.setOptions(this,e),this.name=t,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new bL,this.movingOffset=[0,0]},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},onRemove:function(t){wI().DomUtil.remove(this.container),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var e=this;if(e.map=e._map=t,e._initContainer(),e.levelRenderer){var r=t.getSize();e.container.style.width=r.x+"px",e.container.style.height=r.y+"px",e._updateOpacity(),e.renderer=e.levelRenderer.init(e.container),e.renderer.clear(),e.features&&e.features.length>0&&e._reset(),e.addTFEvents(),e.mouseMoveHandler=function(t){var r=t.layerPoint;e.currentMousePosition=wI().point(r.x+e.movingOffset[0],r.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update(t.getBounds())}else t.removeLayer(e)},addFeatures:function(t){},redrawThematicFeatures:function(t){},destroyFeatures:function(t){if(void 0===t&&(t=this.features),t){this.removeFeatures(t),Array.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--)t[e].destroy()}},removeFeatures:function(t){var e=this;if(t){if(t===e.features)return e.removeAllFeatures();wI().Util.isArray(t)||"function"==typeof t||(t=[t]);for(var r=[],n=0;n<e.features.length;n++){var o=e.features[n];if(t&&"function"==typeof t)t(o)&&e.features.splice(n--,1);else-1===wI().Util.indexOf(t,o)?r.push(o):e.features.splice(n--,1)}for(var i=[],a=0,s=e.features.length;a<s;a++)o=e.features[a],i.push(o);e.features=[],e.addFeatures(i),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures());var l=0==r.length;e.fire("featuresremoved",{features:r,succeed:l})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(t){for(var e=this.features.length,r=[],n=0;n<e;++n)(!t||t&&"function"==typeof t&&t(this.features[n]))&&r.push(this.features[n]);return r},getFeatureBy:function(t,e){var r=null;for(var n in this.features)if(this.features[n][t]===e){r=this.features[n];break}return r},getFeatureById:function(t){return this.getFeatureBy("id",t)},getFeaturesByAttribute:function(t,e){var r,n=[];for(var o in this.features)(r=this.features[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n},update:function(t){var e=this._map.containerPointToLayerPoint([0,0]);wI().DomUtil.setPosition(this.container,e);var r=this;r.renderer&&r.redrawThematicFeatures(t),r.currentMousePosition&&(r.currentMousePosition=wI().point(r.currentMousePosition.x-r.movingOffset[0],r.currentMousePosition.y-r.movingOffset[1])),r.movingOffset=[0,0],r._zoom=r._map.getZoom(),r._center=r._map.getCenter()},setOpacity:function(t){t!==this.options.opacity&&(isNaN(t)||(this.options.opacity=t,this._updateOpacity()))},redraw:function(){var t=this;return!!t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures(),!0)},on:function(t,e,r){return this.renderer?this.renderer.on(t,e):wI().Layer.prototype.on.call(this,t,e),this},off:function(t,e,r){return this.renderer?this.renderer.un(t,e):wI().Layer.prototype.off.call(this,t,e),this},fire:function(t,e,r){return this.renderer&&this.renderer.trigger(t,e),wI().Layer.prototype.fire.call(this,t,e,r),this},addTFEvents:function(){for(var t=this.TFEvents,e=t.length,r=0;r<e;r++)this.renderer.on(t[r][0],t[r][1])},getLocalXY:function(t){if(!this._map)return t;var e=t;wI().Util.isArray(t)&&(e=wI().point(t[0],t[1])),t instanceof wI().Point||(e=t instanceof Wt||t instanceof se?wI().point(t.x,t.y):wI().point(t.lon,t.lat));var r=this._map.latLngToAccurateContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):wI().latLng(e.y,e.x));return[r.x,r.y]},toiClientFeature:function(t){dt.isArray(t)||(t=[t]);for(var e=[],r=0;r<t.length;r++)if(t[r]instanceof QG)e.push(t[r].toFeature());else if(t[r]instanceof Ar)e.push(t[r]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var n=new Hr;e=e.concat(n.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("features[".concat(r,"]'s type is not be supported."));e.push(RO.fromJson(t[r]).toFeature())}return e},toFeature:function(t){return this.toiClientFeature(t)},_initContainer:function(){var t=this.getPane(),e="themeLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&wI().Browser.any3d?"animated":"hide");this.container=wI().DomUtil.create("div",e,t);var r=wI().DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[r]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),r=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());wI().DomUtil.setTransform?wI().DomUtil.setTransform(this.container,r,e):this.container.style[wI().DomUtil.TRANSFORM]=wI().DomUtil.getTranslateString(r)+" scale("+e+")"},_updateOpacity:function(){var t=this;dt.modifyDOMElement(t.container,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},_reset:function(){var t=this,e=t._map.getBounds();t.update(e);var r=t._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);wI().DomUtil.setPosition(this.container,n),parseFloat(t.container.width)!==parseFloat(r.x)&&(t.container.width=r.x+"px"),parseFloat(t.container.height)!==parseFloat(r.y)&&(t.container.height=r.y+"px"),t.redraw()},_resize:function(){var t=this._map.getSize();this.container.style.width=t.x+"px",this.container.style.height=t.y+"px",this.renderer.resize()}}),KG=ZG.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(t,e){ZG.prototype.initialize.call(this,t,e),wI().Util.setOptions(this,e);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(t){var e=this;e.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),e.isCustomSetMaxCacheCount||(e.maxCacheCount=5*e.features.length),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},removeFeatures:function(t){this.clearCache(),ZG.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.clearCache(),ZG.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(t){var e=this,r=e.renderer.getHoverOne(),n=null;if(r&&r.refDataID&&(n=r.refDataID),this.options.alwaysMapCRS&&t&&t instanceof wI().LatLngBounds){var o=this._map.options.crs;t=wI().bounds(o.project(t.getSouthWest()),o.project(t.getNorthEast()))}t=uG.toSuperMapBounds(t),e.renderer.clearAll();for(var i=e.features,a=e.cache,s=e.cacheFields,l=e._map.getZoom(),u=e.maxCacheCount,c=0,f=i.length;c<f;c++){var h=i[c],p=h.geometry.getBounds();if(!t||t.intersectsBounds(p)){var y=h.id+"_zoom_"+l.toString();if(a[y])a[y].updateAndAddShapes();else{var d=e.createThematicFeature(i[c]);if(!(d.getShapesCount()<1)&&(a[y]=d,s.push(y),s.length>u)){var b=s[0];s.splice(0,1),delete a[b]}}}}if(e.renderer.render(),n&&e.options.isHoverAble&&e.options.isMultiHover){var v=this.getShapesByFeatureID(n);this.renderer.updateHoverShapes(v)}},createThematicFeature:function(t){var e=this,r=e.getStyleByData(t);t.style&&e.isAllowFeatureStyle&&(r=dt.copyAttributesWithClip(t.style));var n={};n.nodesClipPixel=e.options.nodesClipPixel,n.isHoverAble=e.options.isHoverAble,n.isMultiHover=e.options.isMultiHover,n.isClickAble=e.options.isClickAble,n.highlightStyle=aM.transformStyle(e.highlightStyle);for(var o=new ER(t,e,aM.transformStyle(r),n),i=0;i<o.shapes.length;i++)e.renderer.addShape(o.shapes[i]);return o},redraw:function(){return this.clearCache(),ZG.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(t){isNaN(t)||(this.maxCacheCount=t,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e}}),$G=KG.extend({initialize:function(t,e){KG.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,r=t,n=dt.copyAttributesWithClip({},e.style),o=e.styleGroups,i=!1,a=null,s=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&s&&r.attributes){var l=e.themeField,u=r.attributes;for(var c in u)if(l===c){i=!0,a=u[c];break}}if(i)for(var f=0,h=o.length;f<h;f++)if(a.toString()===o[f].value.toString()){var p=o[f].style;n=dt.copyAttributesWithClip(n,p)}return n}}),tU=KG.extend({initialize:function(t,e){KG.prototype.initialize.call(this,t,e),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(t){var e=this,r=t,n=dt.copyAttributesWithClip({},e.style),o=e.styleGroups,i=!1,a=null,s=e.styleGroups&&e.styleGroups.length>0;if(e.themeField&&s&&r.attributes){var l=e.themeField,u=r.attributes;for(var c in u)if(l===c){i=!0,a=u[c];break}}if(i)for(var f=0,h=o.length;f<h;f++){if(f===h-1?a>=o[f].start&&a<=o[f].end:a>=o[f].start&&a<o[f].end){var p=o[f].style;n=dt.copyAttributesWithClip(n,p)}}return n}}),eU=KG.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(t,e){KG.prototype.initialize.call(this,t,e),wI().Util.setOptions(this,e),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0,this.labelFeatures=[]},onAdd:function(t){KG.prototype.onAdd.call(this,t),this.container.style.zIndex=200},redrawThematicFeatures:function(t){if(this.features.length>0&&0==this.labelFeatures.length)for(var e=this.setLabelsStyle(this.features),r=0,n=e.length;r<n;r++)this.labelFeatures.push(e[r]);this.features=this.getDrawnLabels(this.labelFeatures),KG.prototype.redrawThematicFeatures.call(this,t)},removeFeatures:function(t){this.labelFeatures=[],KG.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.labelFeatures=[],KG.prototype.removeAllFeatures.call(this,arguments)},getDrawnLabels:function(t){for(var e,r,n,o,i=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this._map,u=l.getSize(),c=l.getZoom(),f=0,h=t.length;f<h;f++){((r=t[f]).isStyleChange||void 0===r.isStyleChange)&&(r=this.setStyle(r));var p=this.getLabelPxLocation(r);if(p.x>=0&&p.x<=u.x&&p.y>=0&&p.y<=u.y){if(r.style.minZoomLevel>-1&&c<=r.style.minZoomLevel)continue;if(r.style.maxZoomLevel>-1&&c>r.style.maxZoomLevel)continue;var y=null;r.isStyleChange?(r.isStyleChange=null,y=this.calculateLabelBounds(r,p)):y=r.geometry.bsInfo.w&&r.geometry.bsInfo.h?this.calculateLabelBounds2(r,p):this.calculateLabelBounds(r,p);var d=new _t(0,u.y,u.x,0),b=y.length;if(this.options.isAvoid){var v=this.getAvoidInfo(d,y);if(v){if("left"===v.aspectW){r.style.labelXOffset+=v.offsetX;for(var m=0;m<b;m++)y[m].x+=v.offsetX}else if("right"===v.aspectW){r.style.labelXOffset+=-v.offsetX;for(var g=0;g<b;g++)y[g].x+=-v.offsetX}if("top"===v.aspectH){r.style.labelYOffset+=v.offsetY;for(var w=0;w<b;w++)y[w].y+=v.offsetY}else if("bottom"===v.aspectH){r.style.labelYOffset+=-v.offsetY;for(var _=0;_<b;_++)y[_].y+=-v.offsetY}r.isStyleChange=!0}}if(this.options.isOverLay){var O=!1;if(0!=f)for(var S=0;S<a.length;S++)if(this.isQuadrilateralOverLap(y,a[S])){O=!0;break}if(O)continue;a.push(y)}for(var x=[],P=0;P<b-1;P++)x.push(l.containerPointToLatLng(y[P]));var E=x[3],k=x[1],j=new _t(E.lng,E.lat,k.lng,k.lat).getCenterLonLat(),T=new se(j.lon,j.lat,r.attributes[this.themeField]);T.calculateBounds(),n=dt.cloneObject(r.style),o=dt.cloneObject(dt.copyAttributes(n,s)),(e=new Ar(T,r.attributes,o)).id=r.id,e.fid=r.fid,i.push(e)}}return i},getStyleByData:function(t){var e=t;if(e.style=dt.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=dt.copyAttributes(e.style,this.style),this.themeField&&this.styleGroups&&e.attributes){var r=this.themeField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=dt.copyAttributes(e.style,c)}e.style.label=e.attributes[this.themeField]}return e.style},setLabelsStyle:function(t){for(var e,r=[],n=0,o=t.length;n<o;n++){var i=t[n];if("SuperMap.Geometry.GeoText"!==i.geometry.CLASS_NAME)return t;(i.geometry.bsInfo.w||i.geometry.bsInfo.h)&&(i.geometry.bsInfo.w=null,i.geometry.bsInfo.h=null,i.geometry.labelWTmp=null),(e=this.setStyle(i)).layer=this.layer,r.push(e)}return r},setStyle:function(t){var e=t;if(e.style=dt.copyAttributes(e.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),e.style=dt.copyAttributes(e.style,this.style),this.groupField&&this.styleGroups&&e.attributes){var r=this.groupField,n=e.attributes,o=this.styleGroups,i=!1,a=null;for(var s in n)if(r===s){i=!0,a=n[s];break}if(i)for(var l=0,u=o.length;l<u;l++)if(a>=o[l].start&&a<o[l].end){var c=o[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),e.style=dt.copyAttributes(e.style,c)}}return e.style.label=e.geometry.text,e},getLabelPxLocation:function(t){var e=t.geometry,r=t.style,n=e.getCentroid(),o=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(wI().point(n.x,n.y)):wI().latLng(n.y,n.x)),i=wI().point(o.x,o.y);if(r.labelXOffset||r.labelYOffset){var a=isNaN(r.labelXOffset)?0:r.labelXOffset,s=isNaN(r.labelYOffset)?0:r.labelYOffset,l=i.add(wI().point(a,-s));return wI().point(l.x,l.y)}return wI().point(i.x,i.y)},calculateLabelBounds:function(t,e){var r=t.geometry,n=null,o=null;if(0==this.getPxBoundsMode)n=r.getLabelPxBoundsByText(e,t.style);else{if(1!==this.getPxBoundsMode)return null;o=this.getLabelInfo(t.geometry.getCentroid(),t.style),n=r.getLabelPxBoundsByLabel(e,o.w,o.h,t.style)}var i=[];return i=t.style.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,e,t.style.labelRotation),r.bounds=new _t(i[1].x,i[3].y,i[2].x,i[4].y),i},calculateLabelBounds2:function(t,e){var r,n,o,i,a,s=t.geometry.bsInfo,l=t.style,u=dt.cloneObject(e);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}n=u.x-s.w/2,o=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,i=u.y-s.h/2,r=new _t(n,o,a,i);var c=[];return c=l.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,e,l.labelRotation),t.geometry.bounds=new _t(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(t,e){var r={l:"left",r:"right",t:"top",b:"bottom"},n={l:0,r:-1,t:0,b:-1};e=dt.extend({fontColor:"#000000",labelAlign:"cm"},e);var o=this.getLocalXY(t),i=0;if(e.labelXOffset||e.labelYOffset){var a=isNaN(e.labelXOffset)?0:e.labelXOffset,s=isNaN(e.labelYOffset)?0:e.labelYOffset;o[0]+=a,o[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=e.fontColor,u.globalAlpha=e.fontOpacity||1;var c,f,h,p=[e.fontStyle?e.fontStyle:"normal","normal",e.fontWeight?e.fontWeight:"normal",e.fontSize?e.fontSize:"1em",e.fontFamily?e.fontFamily:"sans-serif"].join(" "),y=e.label.split("\n"),d=y.length;if(u.fillText){u.font=p,u.textAlign=r[e.labelAlign[0]]||"center",u.textBaseline=r[e.labelAlign[1]]||"middle",null==(c=n[e.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,o[1]+=f*c*(d-1);for(var b=0;b<d;b++)i<(h=u.measureText(y[b]).width)&&(i=h)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=n[e.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),o[1]+=f*(1+c*d);for(var v=0;v<d;v++)i<(h=u.measureText(y[v]).width)&&(i=h)}var m={};return i?(m.w=i,m.h=e.fontSize,m.rows=y.length,m):null},rotationBounds:function(t,e,r){var n=wI().point(t.left,t.top),o=wI().point(t.right,t.top),i=wI().point(t.right,t.bottom),a=wI().point(t.left,t.bottom),s=[];s.push(this.getRotatedLocation(n.x,n.y,e.x,e.y,r)),s.push(this.getRotatedLocation(o.x,o.y,e.x,e.y,r)),s.push(this.getRotatedLocation(i.x,i.y,e.x,e.y,r)),s.push(this.getRotatedLocation(a.x,a.y,e.x,e.y,r));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l},getRotatedLocation:function(t,e,r,n,o){var i,a,s={};return e=-e,n=-n,o=-o,i=(t-r)*Math.cos(o/180*Math.PI)-(e-n)*Math.sin(o/180*Math.PI)+r,a=(t-r)*Math.sin(o/180*Math.PI)+(e-n)*Math.cos(o/180*Math.PI)+n,s.x=i,s.y=-a,s},getAvoidInfo:function(t,e){if(5!==e.length)return null;for(var r=[{x:t.left,y:t.top},{x:t.right,y:t.top},{x:t.right,y:t.bottom},{x:t.left,y:t.bottom},{x:t.left,y:t.top}],n=!1,o=r.length,i=e.length,a=0,s=0,l="",u="",c=0;c<o-1;c++)for(var f=0;f<i-1;f++){"SuperMap.Geometry.Point"===dt.lineIntersection(r[c],r[c+1],e[f],e[f+1]).CLASS_NAME&&(h(e[f]),h(e[f+1]),n=!0)}return n?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function h(e){if(!t.contains(e.x,e.y)){if(e.y<t.top){var r=Math.abs(t.top-e.y);r>s&&(s=r,l="top")}if(e.y>t.bottom){var n=Math.abs(e.y-t.bottom);n>s&&(s=n,l="bottom")}if(e.x<t.left){var o=Math.abs(t.left-e.x);o>a&&(a=o,u="left")}if(e.x>t.right){var i=Math.abs(e.x-t.right);i>a&&(a=i,u="right")}}}},isQuadrilateralOverLap:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===dt.lineIntersection(t[s],t[s+1],e[l],e[l+1]).CLASS_NAME){o=!0;break}}return o},isPointInPoly:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r}});function rU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var nU=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getFeaturesByIDs",value:function(t,e,r){var n=this;return new Xp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:r}).processAsync(t,e)}},{key:"getFeaturesByBounds",value:function(t,e,r){var n=this;return new op(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByBuffer",value:function(t,e,r){var n=this;return new gp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesBySQL",value:function(t,e,r){var n=this;return new cy(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"getFeaturesByGeometry",value:function(t,e,r){var n=this;return new Lp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"editFeatures",value:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=dt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Al(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}},{key:"getMetadata",value:function(t,e){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=dt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Al(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).getMetaData(t,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&rU(e.prototype,r),n&&rU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),oU=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._featureService=new nU(t,e)},getFeaturesByIDs:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByIDs(t,e,r)},getFeaturesByBounds:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBounds(t,e,r)},getFeaturesByBuffer:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByBuffer(t,e,r)},getFeaturesBySQL:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesBySQL(t,e,r)},getFeaturesByGeometry:function(t,e,r){return t=this._processParams(t),this._featureService.getFeaturesByGeometry(t,e,r)},editFeatures:function(t,e){if(t&&t.dataSourceName&&t.dataSetName){var r=this,n=r.url,o=t.dataSourceName,i=t.dataSetName;return n=dt.urlPathAppend(n,"datasources/"+o+"/datasets/"+i),new Al(n,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(r._processParams(t),e)}},getMetadata:function(t,e){return this._featureService.getMetadata(t,e)},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.fromIndex=t.fromIndex?t.fromIndex:0,t.toIndex=t.toIndex?t.toIndex:-1,t.isUseBatch=null!=t.isUseBatch&&t.isUseBatch,t.bounds&&(t.bounds=uG.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry=xG(t.geometry)),t.editType&&(t.editType=t.editType.toLowerCase());var e=this;if(t.features){var r=[];wI().Util.isArray(t.features)?t.features.map(function(t){return r.push(e._createServerFeature(t)),t}):r.push(e._createServerFeature(t.features)),t.features=r}return t},_createServerFeature:function(t){var e,r={},n=[],o=[];for(var i in(e=t||{}).properties)n.push(i),o.push(e.properties[i]);return r.fieldNames=n,r.fieldValues=o,e.id&&(r.id=e.id),r.geometry=xG(e),r},_processFormat:function(t){return t||o.GEOJSON}}),iU=function(t,e){return new oU(t,e)},aU=wI().Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(t,e){wI().Util.setOptions(this,e),this._latlng=t},setLatLng:function(t){return this._latlng=t,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._clickTolerance(),e=[t,t];this._pxBounds=new(wI().Bounds)(this._point.subtract(e),this._point.add(e))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._clickTolerance()}});wI().Canvas.include({_updateUnicode:function(t){if(this._drawing){var e={x:t._point.x,y:t._point.y},r=this._ctx,n=[t.options.fontStyle,"normal",t.options.fontWeight,t.options.fontSize,t.options.fontFamily].join(" "),o=t.options.label.replace(/^&#x/,""),i=(o=String.fromCharCode(parseInt(o,16))).split("\n"),a=i.length;if(r.fillStyle=t.options.fontColor,r.globalAlpha=1,t.options.fontOpacity>=0&&t.options.fontOpacity<1&&(r.globalAlpha=t.options.fontOpacity),r.fillText){r.font=n,r.textAlign=t.options.textAlign,r.textBaseline=t.options.textBaseline;var s=t.options.vfactor,l=r.measureText("Mg").height||r.measureText("xx").width;e.y+=l*s*(a-1);for(var u=0;u<a;u++)0!=t.options.labelRotation?(r.save(),r.translate(e.x,e.y),r.rotate(t.options.labelRotation*Math.PI/180),r.fillText(i[u],0,l*u),r.restore()):r.fillText(i[u],e.x,e.y)}else if(r.mozDrawText){r.mozTextStyle=n;var c=t.options.textAlign,f=t.options.vfactor,h=r.mozMeasureText("xx");e.y+=h*(1+f*a);for(var p=0;p<a;p++){var y=e.x+c*r.mozMeasureText(i[p]),d=e.y+p*h;r.translate(y,d),r.mozDrawText(i[p]),r.translate(-y,-d)}}}}});var sU=wI().LayerGroup.extend({options:{map:"map",server:"",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:rG.Online.attribution},defaultFeatureLayerPopup:function(t){return t.feature.properties.attributes.title+":"+t.feature.properties.attributes.description},initialize:function(t,e){(t||e)&&(this._layers={},wI().setOptions(this,e),this.id=t,this.load(),this.cartoCSSToLeaflet=new YG)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var t=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(t+="?"+this.options.credentialKey+"="+this.options.credentialValue);var e=this;mn.get(t).then(function(t){return t.json()}).then(function(t){if(t){var r=t.layers;e.mapInfo=t,e.createLayersByJson(r)}})},addLayerWrapper:function(t,e,r){return e&&this.createMap(r),this.addLayer(t),t.labelLayer&&this.addLayer(t.labelLayer),this},createLayersByJson:function(t){if(wI().Util.isArray(t)&&0!==t.length){this.layers=[];for(var e=[],r=0;r<t.length;r++){var n=t[r];n._originIndex=r,"BASE_LAYER"===(n.layerType=n.layerType||"BASE_LAYER")?(n.isBaseLayer=!0,this.createLayer(n.type,n)):e.unshift(n)}for(;e.length>0;){var o=e.pop(),i=o.type,a=o.layerType=o.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==a&&(i=a),this.createLayer(i,o)}this.fire("maploaded",{map:this._map})}},createCRS:function(t,e,r,n,o){return t<0?new _G({bounds:o,origin:n,resolutions:r}):910112===t||910102===t?cG:(910111===t&&(t=3857),910101===t&&(t=4326),eG("EPSG:"+t,{origin:n,resolutions:r,bounds:o}))},createMap:function(t){var e=t.crs||wI().CRS.EPSG3857,r=wI().latLngBounds(e.unproject(t.bounds.min),e.unproject(t.bounds.max));this._map=wI().map(this.options.map,{center:r.getCenter(),maxZoom:t.maxZoom||22,minZoom:t.minZoom||0,zoom:t.zoom||0,crs:e,renderer:wI().canvas()}),e instanceof _G?this._map.setZoom(t.zoom?t.zoom+2:2,{maxZoom:t.maxZoom||22}):this._map.fitBounds(r,{maxZoom:t.maxZoom||22})},getResolutionsFromScales:function(t,e,r,n){for(var o=[],i=0;i<t.length;i++)o.push(TG(t[i],e,r,n));return o},createLayer:function(t,e){var r=e.prjCoordSys,n=r&&r.epsgCode||this.mapInfo.epsgCode,o=this.mapInfo.center||e.center,i=this.mapInfo.level||e.level,a=this.mapInfo.extent||e.bounds,s=e.scales,l=e.isBaseLayer,u=e.opacity,c=wI().bounds([a.leftBottom.x,a.leftBottom.y],[a.rightTop.x,a.rightTop.y]),f=e.bounds?wI().bounds([e.bounds.leftBottom.x,e.bounds.leftBottom.y],[e.bounds.rightTop.x,e.bounds.rightTop.y]):c;o||(o=f.getCenter());var h,p=wI().point(f.min.x,f.max.y),y=s?this.getResolutionsFromScales(s,96,e.units):null,d=this.createCRS(n,r?r.type:"",y,p,f),b={bounds:c,center:wI().point(o.x,o.y),crs:d,zoom:i};switch(t){case"SUPERMAP_REST":h=GG(e.url,{transparent:!0,opacity:u});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":b.crs=4326===n?pG:mG,b.minZoom=1,b.zoom=1+b.zoom,h=this.createTiandituLayer(e);break;case"BAIDU":b.crs=cG,b.zoom=3+b.zoom,b.minZoom=3,h=MG();break;case"BING":break;case"WMS":h=this.createWmsLayer(e);break;case"WMTS":b.resolutions=this.getResolutionsFromScales(s,90.71446714322,e.units);var v=e.identifier,m=v.substring(v.indexOf("_")+1);h=DG(e.url,{layer:m,style:"default",tilematrixSet:v,format:"image/png"});break;case"CLOUD":b.crs=wI().CRS.EPSG3857,b.zoom=3+b.zoom,b.minZoom=3,h=LG(e.url,{opacity:u});break;case"MARKER_LAYER":h=this.createMarkersLayer(e,d);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==e.identifier||(h="THEME"==e.identifier?this.createThemeLayer(e):this.createVectorLayer(e,d));break;default:throw new Error("unSupported Layer Type")}h&&e.isVisible&&this.addLayerWrapper(h,l,b)},createTiandituLayer:function(t){var e=t.type.split("_")[1].toLowerCase(),r="OVERLAY_LAYER"===t.layerType;return new FG({layerType:e,isLabel:r})},createMarkersLayer:function(t,e){var r=this,n=t.markers||[],o=wI().geoJSON(SG(n),{pointToLayer:function(t,e){var r=new(wI().Marker)(e);return r.setStyle=function(t){t&&r.setIcon(t)},r},coordsToLatLng:function(t){var r=e.unproject(wI().point(t[0],t[1]));return new(wI().LatLng)(r.lat,r.lng,t[2])},style:function(t){return r.cartoCSSToLeaflet.getStyleFromiPortalMarker(t.properties.icon)}});return this.options.featureLayerPopupEnable&&o.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),o},createWmsLayer:function(t){var e=t.url,r=t.opacity,n=t.subLayers;return n&&"undefined"!==n&&"null"!==n||(n="0"),wI().tileLayer.wms(e,{layers:n,format:"image/png",transparent:!0,noWrap:!0,opacity:r})},createVectorLayer:function(t,e){var r=this,n=t.style,i=t.opacity,a=this,s=function(t){var r=e.unproject(wI().point(t[0],t[1]));return new(wI().LatLng)(r.lat,r.lng,t[2])};if(!t.url){var l=wI().geoJSON(SG(t.features),{pointToLayer:function(t,e){var r=new(wI().Marker)(e);return r.setStyle=function(t){t&&r.setIcon(t)},r},coordsToLatLng:s,style:function(t){var e=a.cartoCSSToLeaflet.getStyleFromiPortalStyle(n||{},t.geometry.type,t.properties.style);return e&&e.dashArray&&0==e.dashArray.length&&(e.dashArray=null),e},opacity:i});return this.options.featureLayerPopupEnable&&l.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),l}for(var u=t.url,c=t.name,f=t.features,h=0;h<f.length;h++){var p=f[h];p.visible&&this.getFeaturesBySQL(u,c,p.name,"",o.GEOJSON,function(t){var e=wI().geoJSON(t.result,{pointToLayer:function(t,e){var r=new(wI().Marker)(e);return r.setStyle=function(t){t&&r.setIcon(t)},r},coordsToLatLng:s,style:function(t){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(n||{},t.geometry.type,t.properties.style)},opacity:i});r.options.featureLayerPopupEnable&&e.bindPopup(a.options.featureLayerPopup||a.defaultFeatureLayerPopup),r.addLayer(e)})}},getFeaturesBySQL:function(t,e,r,n,o,i){var a=new ny({queryParameter:{name:r+"@"+e,attributeFilter:n=n||"SMID > 0"},datasetNames:[e+":"+r],fromIndex:0,toIndex:1e5});iU(t).getFeaturesBySQL(a,i,o)},createThemeLayer:function(t){var e,r=this,n=t.themeSettings&&JSON.parse(t.themeSettings),o=n.type;if(t.themeSettings=n,(e="HEAT"===o?this.createHeatLayer(t,n):"UNIQUE"===o?this.createUniqueLayer(t,n):"RANGE"===o?this.createRangeLayer(t,n):this.createBaseThemeLayer(t,n))&&(this.addFeature2ThemeLayer(t,e),e.on("add",function(t){r.registerThemeEvent(t.target)})),n&&n.labelField){var i=this.createLabelLayer(t,n);i.on("add",function(t){r.registerThemeEvent(t.target)}),e.labelLayer=i}return e},createBaseThemeLayer:function(t,e){var r=t.style,n=t.opacity,o=e.vectorType,i=r.pointStyle;i.fill="LINE"!==o;var a={};a.radius=i.pointRadius,a.color=i.strokeColor,a.opacity=i.strokeOpacity,a.lineCap=i.strokeLineCap,a.weight=i.strokeWidth,a.fillColor=i.fillColor,a.fillOpacity=i.fillOpacity;var s=function(t,e){return wI().circleMarker(e,a)};return i.unicode&&(s=function(t,e){return new aU(e,i)}),wI().geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:s,opacity:n})},createUniqueLayer:function(t,e){for(var r=t.title,n=e.field,o=[],i=e.settings,a=t.isVisible,s=t.opacity,l=e.vectorType,u=0;u<i.length;u++){var c={};c.value=i[u].value,c.style=i[u].style,o.push(c)}var f=new $G(r,{opacity:s,visibility:a});this.registerThemeEvent(f),f.style=t.style.pointStyle,f.style.fill="LINE"!==l,f.style.stroke=!0,f.themeField=n,f.styleGroups=o;var h=this;return f.on("click",function(t){if(t.target&&t.target.refDataID){var e=f.getFeatureById(t.target.refDataID);h.events.triggerEvent("uniquefeatureclicked",e,f)}}),f},createRangeLayer:function(t,e){var r=t.title,n=e.field,o=[],i=e.settings,a=t.isVisible,s=t.opacity,l=e.vectorType,u=t.style.pointStyle;u.fill="LINE"!==l;for(var c=0;c<i.length;c++){var f={};f.start=i[c].start,f.end=i[c].end,f.style=i[c].style,o.push(f)}var h=new tU(r,{visibility:a,opacity:s});return this.registerThemeEvent(h),h.style=t.style.pointStyle,h.style.stroke=!0,h.themeField=n,h.styleGroups=o,h},createLabelLayer:function(t,e){var r,n=t.title,o=e.labelField,i=e.settings,a=t.isVisible;r=!i||i.length>0?{fillColor:"#ffffff"}:i[0].style;var s=wI().Util.extend(new dT,r);s.fontWeight="bold",s.fontSize="14px",s.labelRect=!0,s.strokeColor=s.fillColor,s.fontColor=e.labelColor,e.labelFont&&(s.fontFamily=e.labelFont);var l=new eU(n,{visibility:a,opacity:.7});return this.registerThemeEvent(l),l.style=s,l.themeField=o,l.styleGroups=[],l},createHeatLayer:function(t,e){for(var r,n=e.colors||["blue","cyan","lime","yellow","red"],o={},i=0,a=n.length,s=1;i<a;i++)o[s/a]=n[i],s++;var l=e.settings[0].radius;return"千米"!==e.heatUnit&&"km"!==e.heatUnit||(l=1e3*e.heatRadius),e.settings[0]&&e.settings[0].featureWeight&&(r=e.settings[0].featureWeight),wI().heatLayer([],{radius:l/2,minOpacity:t.opacity,gradient:o,blur:l/2,featureWeight:r})},addFeature2ThemeLayer:function(t,e){var r=this;if("FEATURE_LAYER"===t.layerType&&"THEME"===t.identifier){var n=this,i=!!t.datasourceName,a=t.cartoCSS;if(a)var s=this.getCartoCSS2Obj(a).needTransform,l=this.getCartoCSS2Obj(a).isAddFile;var u,c,f,h=t.url,p=t.credential,y=t.themeSettings,d=y.filter;if(l){var b=JSON.parse(t.datasourceName),v=this.getSQLFromFilter(d);if(h)this.getFeatureFromFileAdded(t,function(r){var o,i=[];if("EXCEL"===r.type||"CSV"===r.type)for(var a=0,l=(o=n.parseFeatureFromEXCEL.apply(n,[r.content.rows,r.content.colTitles,!1,b])).length;a<l;a++)zG()({attr:o[a].attributes},v).length>0&&i.push(o[a]);else for(var u=0,c=(o=n.parseFeatureFromJson(r.content)).length;u<c;u++)zG()({attr:o[u].attributes},v).length>0&&i.push(o[u]);var f=t.prjCoordSys&&t.prjCoordSys.epsgCode;s?n.changeFeatureLayerEpsgCode(f,"4326",e,i,function(t){T(t)}):T(i)},function(){});else{for(var m=[],g=t.features,w=0,_=g.length;w<_;w++){var O=g[w];if(zG()({attr:O.attributes},v).length>0){var S=O.geometry.points[0].x,x=O.geometry.points[0].y,P=new Wt(S,x),E=new Ar(P,O.attributes,O.style);m.push(E)}}T(m)}}else if(i){var k=t.datasourceName;f=(c=(u=t.subLayers&&JSON.parse(t.subLayers)).length&&u.length>0?u[0]:u)&&c.name,this.getFeaturesBySQL(t.url,k,f,y.filter,o.ISERVER,function(n){var o,i,a=n.result,l=[];if(a&&a.features){for(var u=0,c=(o=a.features).length;u<c;u++)i=RO.fromJson(o[u]).toFeature(),l.push(i);var f=t.prjCoordSys&&t.prjCoordSys.epsgCode;s?r.changeFeatureLayerEpsgCode(f,"4326",e,l,function(t){T(t)}):T(o)}})}else{f=(c=(u=t.subLayers&&JSON.parse(t.subLayers)).length&&u.length>0?u[0]:u)&&c.name;var j=t.prjCoordSys&&t.prjCoordSys.epsgCode;this.getFeaturesBySQL(h,p,f,d,o.ISERVER,function(t){s?n.changeFeatureLayerEpsgCode(j,"4326",e,t,function(t){T(t)}):T(t)})}}function T(r){if(e&&e.labelLayer instanceof eU&&n.addFeature2LabelLayer(e.labelLayer,r,t),wI().HeatLayer&&e instanceof wI().HeatLayer){for(var o=[],i=0,a=r.length;i<a;i++){var s=r[i].geometry;o[i]=wI().latLng(s.y,s.x),e.options.featureWeight&&(o[i]=[o[i].lat,o[i].lng,parseFloat(r[i].attributes[e.options.featureWeight])])}e.setLatLngs(o)}else e instanceof wI().GeoJSON?e.addData((new Hr).toGeoJSON(r)):e.addFeatures(r)}},addFeature2LabelLayer:function(t,e,r){if(e){for(var n,o,i=r.themeSettings,a=(i="string"==typeof i?JSON.parse(r.themeSettings):r.themeSettings).labelField,s=t.style,l=[],u=r.styleString&&JSON.parse(r.styleString),c=0;c<e.length;c++){o=this.getLabelLngLat(i.vectorType,e[c]),this.setLabelOffset(i.vectorType,u,e[c],s);var f=e[c].attributes;n=new QG([o.lat,o.lng,f[a]],f),l.push(n)}t.style=s,t.addFeatures(l)}},setLabelOffset:function(t,e,r,n){if("POINT"===t){var o=e.pointStyle.pointRadius||0,i=e.pointStyle.strokeWidth||0,a=parseInt(e.pointStyle.fontSize)||0;n.labelXOffset=0,n.labelYOffset=e.pointStyle.unicode?20+a:25+(o+i)}},getLabelLngLat:function(t,e){var r={};if("POINT"===t){var n=e.geometry;r.lng=n.x,r.lat=n.y}else if("LINE"===t){var o,i,a=e.geometry.components;if(a[0].x)o=a.length,i=parseInt(o/2),r.lng=a[i].x,r.lat=a[i].y;else{var s=a[0].components;o=s.length,i=parseInt(o/2),r.lng=s[i].x,r.lat=s[i].y}}else{var l=e.geometry.getCentroid();r.lng=l.x,r.lat=l.y}return r},changeFeatureLayerEpsgCode:function(t,e,r,n,o){var i,a,s=this,l=[];if(t&&e){if(n&&n.length>0){for(i=0,a=n.length;i<a;i++){var u=n[i].geometry.getVertices();l=l.concat(u)}t="EPSG:"+t,e="EPSG:"+e,s.coordsTransform(t,e,l,function(t,e){return function(t){var r=t.length;for(i=0;i<r;i++){var n=l[i],a=t[i];n.x=a.x,n.y=a.y,n.calculateBounds()}for(i=0,r=e.length;i<r;i++){var u=e[i].geometry;u.components&&s.calculateComponents(u.components),u.calculateBounds()}o&&o.call(s,e)}}(0,n))}return!0}},calculateComponents:function(t){if(t)if(t.components)this.calculateComponents(t.components);else for(var e=0,r=t.length;e<r;e++){var n=t[e];n.components&&this.calculateComponents(n.components),n.calculateBounds()}},coordsTransform:function(t,e,r,n){var o,i=this.SERVER_TYPE_MAP[t],a=this.SERVER_TYPE_MAP[e];if(t!==e&&i&&a){var s=this.SERVER_TYPE_MAP["EPSG:3857"],l=this.SERVER_TYPE_MAP["EPSG:4326"];if(i!==s&&i!==l||a!==s&&a!==l){var u=i+"_"+a;this.postTransform(u,r,n)}else this.projTransform(t,e,r,n)}else{if(r&&void 0!==r.length){o=[];for(var c=0,f=r.length;c<f;c++){var h={x:r[c].x,y:r[c].y};o.push(h)}}else o={x:r.x,y:r.y};n&&n.call(this,o)}},projTransform:function(t,e,r,n){var o;if(ZB){if(r&&void 0!==r.length){o=[];for(var i=0,a=r.length;i<a;i++){var s=ZB(t,e,[r[i].x,r[i].y]);o.push({x:s[0],y:s[1]})}}else o={x:(o=ZB(t,e,[r.x,r.y]))[0],y:o[1]};n&&(this.fire("coordconvertsuccess",{newCoor:o}),n.call(this,o))}},postTransform:function(t,e,r){var n=this,o=[];if(!t)return r.call(this,null);if(e&&void 0!==e.length)for(var i=0,a=e.length;i<a;i++)o.push({x:e[i].x,y:e[i].y});else o=[{x:e.x,y:e.y}];if(0===o.length)return r.call(this,null);var s={convertType:t,points:o},l=this.server+"/apps/viewer/coordconvert.json";s=JSON.stringify(s);var u={};!dt.isInTheSameDomain(l)&&this.proxy&&(u.proxy=this.proxy),mn.post(l,s,u).then(function(t){return t.json()}).then(function(t){var o=t;e||void 0===e.length||(o=o[0]),n.fire("coordconvertsuccess",{newCoors:o}),r.call(n,o)}).catch(function(t){n.actived&&n.fire("coordconvertfailed",{err:t})})},getSQLFromFilter:function(t){return t?" *  where ("+(t=t.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<="))+")":" * where (1==1||1>=0)"},getAttributesObjFromTable:function(t,e){if(0!==t.length&&0!==e.length){for(var r=[],n=0;n<t.length;n++){for(var o={},i=0;i<e.length;i++)o[e[i]]=t[n][i];r.push(o)}return r}},parseFeatureFromEXCEL:function(t,e,r,n){for(var o=this.getAttributesObjFromTable(t,e),i=[],a=0,s=o.length;a<s;a++){var l=o[a][n.lon],u=o[a][n.lat];if(l&&u){l=parseFloat(l),u=parseFloat(u);var c,f=new Wt(l,u);c=r?new XG(f,o[a],null):new Ar(f,o[a],null),i.push(c)}}return i},parseFeatureFromJson:function(t){var e=new Hr,r=e.read(t);if(null==r){var n=JSON.parse(t.replace(/'/,'"'));(n.isAnalyseResult||"MapEditor"===n.type||"DataInsights"===n.type||"ISERVER"===n.type)&&(n=n.data.recordsets[0].features),r=(e=new Hr).read(n)}for(var o=0,i=r.length;o<i;o++)r[o].attributes=r[o].attributes.properties||r[o].attributes;return r},getFeatureFromFileAdded:function(t,e,r,n){var o=n?t.url+"?currentPage=1&&pageSize=9999999":t.url;mn.get(o).then(function(t){return t.json()}).then(function(t){e&&e(t)}).catch(function(t){return r&&r(t)})},getCartoCSS2Obj:function(t){var e,r=!1;return t.indexOf("}")>-1?(r=(t=JSON.parse(t)).needTransform,e=t.isAddFile):"needTransform"===t?(r=!0,e=!1):e="true"===t,{isAddFile:e,needTransform:r}},registerThemeEvent:function(t){var e=this;t.on("click",function(r){var n;t.map&&(e.selectedFeature&&(e.fire("featureunselected",{feature:e.selectedFeature}),e.selectedFeature=null),r.target&&r.target.refDataID&&(n=t.getFeatureById(r.target.refDataID)),n&&(e.selectedFeature=n,e.fire("featureselected",{feature:n})))}),t.on("mousemove",function(r){var n;t.map&&(r.target&&r.target.refDataID&&(r.target&&r.target.refDataID&&(n=t.getFeatureById(r.target.refDataID)),n&&e.fire("featuremousemove",{feature:n})))})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}}),lU=wI().TileLayer.extend({options:{collectionId:null,sqlFilter:null,ids:null,names:null,renderingRule:null,format:"png",zoomOffset:1,transparent:!0,cacheEnabled:!0,tileProxy:null,attribution:rG.Common.attribution,subdomains:null},initialize:function(t,e){this._url=t,wI().TileLayer.prototype.initialize.apply(this,arguments),wI().setOptions(this,e),wI().stamp(this)},onAdd:function(t){wI().TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._getLayerUrl()+"&z="+this._getZoomForUrl()+"&x="+t.x+"&y="+t.y;return this.options.tileProxy&&(e=this.options.tileProxy+encodeURIComponent(e)),this.options.cacheEnabled||(e+="&_t="+(new Date).getTime()),this.options.subdomains&&(e=wI().Util.template(e,{s:this._getSubdomain(t)})),e},_getLayerUrl:function(){return this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var t=dt.urlPathAppend(this._url,"/collections/".concat(this.options.collectionId,"/tile.").concat(this.options.format));return this.requestParams=this.requestParams||this._getAllRequestParams(),t=dt.urlAppend(t,gI.Util.getParamString(this.requestParams)),t=wn.appendCredential(t),this._layerUrl=t,t},_getAllRequestParams:function(){var t=this.options||{},e={};return e.transparent=!0===t.transparent,e.cacheEnabled=!(!1===t.cacheEnabled),t.sqlFilter&&(e.sqlFilter=t.sqlFilter),t.renderingRule&&(e.renderingRule=JSON.stringify(t.renderingRule)),t.ids&&(e.ids=t.ids.join(",")),t.names&&(e.names=t.names.join(",")),e}});function uU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var cU=function(){function t(e,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.MapService=e,this.url=r,this.options=n,this.CLASS_NAME="SuperMap.InitMapServiceBase"}var e,r,n;return e=t,(r=[{key:"createMapService",value:function(){var t=this.MapService,e=this.url,r=this.options;return new t(e,{proxy:r.proxy,withCredentials:r.withCredentials,crossOrigin:r.crossOrigin,headers:r.headers,projection:r.projection})}},{key:"getMapInfo",value:function(t){var e=this;return new Promise(function(r,n){e.createMapService().getMapInfo(function(e){t(e,r,n)})})}},{key:"getWKT",value:function(){var t=this;return new Promise(function(e,r){t.createMapService().getWKT(function(t){try{var n=t.result.data;e(n)}catch(t){r(t)}})})}}])&&uU(e.prototype,r),n&&uU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function fU(t){return"PCS_NON_EARTH"===t}function hU(t){var e=t.type,r=t.epsgCode;return"PCS_NON_EARTH"==e?"":"EPSG:"+r}function pU(t){"@babel/helpers - typeof";return(pU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function yU(){yU=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==pU(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function dU(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function bU(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?dU(Object(r),!0).forEach(function(e){vU(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):dU(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function vU(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function mU(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function gU(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){mU(i,n,o,a,s,"next",t)}function s(t){mU(i,n,o,a,s,"throw",t)}a(void 0)})}}function wU(t,e){var r=(e||{}).maxZoom,n=void 0===r?22:r,o=t.bounds,i=t.prjCoordSys,a=t.dpi,s=oT(t.visibleScales,o,a,t.coordUnit,n);if(fU(i.type))return function(t){var e={bounds:wI().bounds([t.left,t.bottom],[t.right,t.top]),origin:wI().point(t.left,t.top)};return new _G(e)}(o);var l=hU(i);return SU(l)?function(t,e){var r=e.bounds,n=e.dpi,o=e.resolutions,i=ZB(t,"EPSG:4326").forward([r.left,0],!0),a=ZB(t,"EPSG:4326").forward([r.right,0],!0),s={wrapLng:[parseInt(i[0]),parseInt(a[0])],bounds:wI().bounds([r.left,r.bottom],[r.right,r.top]),origin:[r.left,r.top],dpi:n};o&&o.length>0&&(s.resolutions=o);return new tG(t,s)}(l,{bounds:o,dpi:a,resolutions:s}):void 0}function _U(t,e){return OU.apply(this,arguments)}function OU(){return(OU=gU(yU().mark(function t(e,r){var n;return yU().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(SU(e,!1)){t.next=5;break}return t.next=3,r.getWKT();case 3:(n=t.sent)&&ZB.defs(e,n);case 5:case"end":return t.stop()}},t)}))).apply(this,arguments)}function SU(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{ZB(t)}catch(r){return e&&console.error("The projection of ".concat(t," is missing, please register the projection of ").concat(t," first, refer to the documentation: https://iclient.supermap.io/web/introduction/leafletDevelop.html#multiProjection")),!1}return!0}function xU(t,e){var r=t.bounds,n=t.center,o=t.scale,i=t.visibleScales,a=t.prjCoordSys,s=t.dpi,l=t.coordUnit,u=e.maxZoom,c=void 0===u?22:u,f=oT(i,r,s,l,c),h=wU({prjCoordSys:a,bounds:r,dpi:s,visibleScales:i,coordUnit:l},{maxZoom:c}),p=h.resolutions||f;return{crs:h,center:function(t,e){var r=e.center,n=e.bounds,o="string"==typeof t?t:t.code;"number"!=typeof r.x&&"number"!=typeof r.y&&(r={lat:(n.bottom+n.top)/2,lng:(n.left+n.right)/2});if("EPSG:4326"===o)return{lat:r.y,lng:r.x};return t.unproject(wI().point(r.x,r.y))}(h,{center:n,bounds:r}),zoom:function(t,e){var r=t.scale,n=t.dpi,o=t.coordUnit;return function(t,e){for(var r,n=0,o=0;o<e.length;o++)0===o&&(r=Math.abs(t-e[o])),r>Math.abs(t-e[o])&&(r=Math.abs(t-e[o]),n=o);return n}(kG(r,n,o),e)}({scale:o,dpi:s,coordUnit:l},p),maxZoom:function(t){if(t.length>0)return t.length-1;return 22}(f)}}var PU=nG.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(t,e){e=e||{},wI().setOptions(this,e),e.projection&&(this.options.prjCoordSys=e.projection),nG.prototype.initialize.call(this,t,e),this.dataFlow=new Ss(t,e),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(t){this.dataFlow.broadcast(t)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(t){return this.dataFlow.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataFlow.setGeometry(t),this.options.geometry=t,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(t){this.fire(t.eventType||t.type,t)}}),EU=function(){try{return mapv}catch(t){return{}}}();function kU(t){"@babel/helpers - typeof";return(kU="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function jU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function TU(){return(TU="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,r){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=LU(t)););return t}(t,e);if(n){var o=Object.getOwnPropertyDescriptor(n,e);return o.get?o.get.call(arguments.length<3?t:r):o.value}}).apply(this,arguments)}function CU(t,e){return(CU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function AU(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=LU(t);if(e){var o=LU(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return MU(this,r)}}function MU(t,e){if(e&&("object"===kU(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return RU(t)}function RU(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function LU(t){return(LU=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var NU=EU.baiduMapLayer?EU.baiduMapLayer.__proto__:Function,IU=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&CU(t,e)}(i,NU);var e,r,n,o=AU(i);function i(t,e,r,n){var a;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),a=o.call(this,t,r,n),!NU)return MU(a);var s=RU(a);return n=n||{},s.init(n),s.argCheck(n),a.canvasLayer=e,a.clickEvent=a.clickEvent.bind(RU(a)),a.mousemoveEvent=a.mousemoveEvent.bind(RU(a)),a._moveStartEvent=a.moveStartEvent.bind(RU(a)),a._moveEndEvent=a.moveEndEvent.bind(RU(a)),a._zoomStartEvent=a.zoomStartEvent.bind(RU(a)),a.bindEvent(),a}return e=i,(r=[{key:"clickEvent",value:function(t){var e=this.map.containerPointToLayerPoint([0,0]),r=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio||1,n=t.layerPoint;TU(LU(i.prototype),"clickEvent",this).call(this,wI().point((n.x-e.x)/r,(n.y-e.y)/r),t)}},{key:"mousemoveEvent",value:function(t){var e=t.layerPoint;TU(LU(i.prototype),"mousemoveEvent",this).call(this,e,t)}},{key:"bindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.on("click",this.clickEvent),this.options.methods.mousemove&&t.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var t=this.map;this.options.methods&&(this.options.methods.click&&t.off("click",this.clickEvent),this.options.methods.mousemove&&t.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(t,e){var r=t;t&&t.get&&(r=t.get()),this.dataSet.add(r),this.update({options:e})}},{key:"update",value:function(t){var e=t||{},r=e.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),TU(LU(i.prototype),"update",this).call(this,{options:e.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(t){if(this.dataSet){var e=this.dataSet.get({filter:function(e){return null==t||"function"!=typeof t||!t(e)}});this.dataSet.set(e),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(t){if(this.canvasLayer){var e=this,r=e.options.animation,n=this.getContext(),o=this.map;if(e.isEnabledTime()){if(void 0===t)return void this.clear(n);"2d"===this.context&&(n.save(),n.globalCompositeOperation="destination-out",n.fillStyle="rgba(0, 0, 0, .1)",n.fillRect(0,0,n.canvas.width,n.canvas.height),n.restore())}else this.clear(n);if("2d"===this.context)for(var i in e.options)n[i]=e.options[i];else n.clear(n.COLOR_BUFFER_BIT);if(!(e.options.minZoom&&o.getZoom()<e.options.minZoom||e.options.maxZoom&&o.getZoom()>e.options.maxZoom)){var a=o.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=o.getSize(),c=s/u.x,f=l/u.y,h=PG("DEGREE")*c,p=this.canvasLayer.getTopLeft(),y=o.latLngToAccurateContainerPoint(p),d={transferCoordinate:function(t){var r,n={x:(r="2d"===e.context?o.latLngToAccurateContainerPoint(wI().latLng(t[1],t[0])):{x:(t[0]-p.lng)/c,y:(p.lat-t[1])/f}).x-y.x,y:r.y-y.y};return[n.x,n.y]}};void 0!==t&&(d.filter=function(e){var n=r.trails||10;return t&&e.time>t-n&&e.time<t});var b=e.dataSet.get(d);this.processData(b);var v=o.latLngToContainerPoint(wI().latLng(0,0)),m={x:v.x-y.x,y:v.y-y.y};"m"===e.options.unit?(e.options.size&&(e.options._size=e.options.size/h),e.options.width&&(e.options._width=e.options.width/h),e.options.height&&(e.options._height=e.options.height/h)):(e.options._size=e.options.size,e.options._height=e.options.height,e.options._width=e.options.width),this.drawContext(n,b,e.options,m),e.options.updateCallback&&e.options.updateCallback(t)}}}},{key:"init",value:function(t){this.options=t,this.initDataRange(t),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var t=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=t.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(t){t&&t.clearRect&&t.clearRect(0,0,t.canvas.width,t.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}])&&jU(e.prototype,r),n&&jU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),DU=wI().Layer.extend({options:{attributionPrefix:null,attribution:rG.MapV.attribution},initialize:function(t,e,r){r=r||{},this.dataSet=t||{},this.mapVOptions=e||{},this.render=this.render.bind(this),wI().Util.setOptions(this,r),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),wI().stamp(this)},onAdd:function(t){this._map=t;var e=this.getPane(),r=this.container=wI().DomUtil.create("div","leaflet-layer leaflet-zoom-animated",e);r.appendChild(this.canvas);var n=t.getSize();r.style.width=n.x+"px",r.style.height=n.y+"px",this.renderer=new IU(t,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){wI().DomUtil.remove(this.container),this.renderer.destroy()},addData:function(t,e){this.renderer.addData(t,e)},update:function(t){this.renderer.update(t)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(t){this.renderer&&this.renderer.removeData(t)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(t){this.canvas.style.zIndex=t},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var t,e=this._map;e&&(t=e.getBounds().getNorthWest());return t},_createCanvas:function(){var t=document.createElement("canvas");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.pointerEvents="none",t.style.zIndex=this.options.zIndex||600;var e="undefined"==typeof window?{}:window,r=this.devicePixelRatio=e.devicePixelRatio||1;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||t.getContext("2d").scale(r,r),t},_resize:function(){var t=this.canvas;if(t){var e=this._map,r=e.getSize();"heatmap"===this.mapVOptions.draw?(t.width=parseInt(r.x)*this.devicePixelRatio,t.height=parseInt(r.y)*this.devicePixelRatio):(t.width=parseInt(r.x),t.height=parseInt(r.y)),t.style.width=r.x+"px",t.style.height=r.y+"px";var n=e.getBounds(),o=e.latLngToLayerPoint(n.getNorthWest());wI().DomUtil.setPosition(t,o)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}}),FU=DU.extend({initialize:function(t,e){e=e||{},wI().Util.setOptions(this,e),this.data=[],this.mapVOptions={draw:"simple"},DU.prototype.initialize.call(this,new window.mapv.DataSet([]),this.mapVOptions,e),this.idCache={},this.url=t,this._last=new Date,this._imageCache={}},onMessageSuccessed:function(t){var e=this,r=t.featureResult.properties.id,n=t.featureResult.geometry,o={geometry:t.featureResult.geometry};if("Point"===n.type&&this.options.pointToLayer){var i=this.options.pointToLayer(t.featureResult,wI().latLng(n.coordinates[1],n.coordinates[0]));if(i instanceof wI().Marker){this.mapVOptions.draw="icon";var a=i.options.icon,s=a._getIconUrl("icon"),l=a.options.iconSize?a.options.iconSize[0]:null,u=a.options.iconSize?a.options.iconSize[1]:null,c="".concat(s,"_").concat(l,"_").concat(u),f=this._imageCache[c];f||(f=a.createIcon(),this._imageCache[c]=f,f.onload=function(){e.update({data:e.data,options:e.mapVOptions})}),o.icon=f,(a.options.iconSize||f.style.height)&&(this.mapVOptions.offset={x:0,y:-(a.options.iconSize[1]||f.style.height)/2}),this.options.deg&&(o.deg=this.options.deg,"function"==typeof o.deg&&this.idCache[r]&&this.data[this.idCache[r]]&&(o.deg=o.deg(t.featureResult,wI().latLng(n.coordinates[1],n.coordinates[0]),this.data[this.idCache[r]])))}if(i instanceof wI().CircleMarker){this.mapVOptions.draw="simple";var h=this._toMapvStyle(i);for(var p in h)h.hasOwnProperty(p)&&(o[p]=h[p])}}else if(this.options.style){var y=this._toMapvStyle(this.options.style(t.featureResult));for(var d in y)y.hasOwnProperty(d)&&(o[d]=y[d])}void 0==this.idCache[r]?(this.data.push(o),this.idCache[r]=this.data.length-1):this.data[this.idCache[r]]=o,new Date-this._last>200&&(this._last=new Date,this.update({data:this.data,options:this.mapVOptions}))},_toMapvStyle:function(t){var e={draw:"simple"};return e.strokeStyle=t.color,e.lineWidth=t.width,e.globalAlpha=t.fillOpacity||t.opacity,e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.fillStyle=t.fillColor,e.size=t.radius,e}}),BU=wI().GeoJSON.extend({initialize:function(t,e){(e=e||{}).style&&!e.pointToLayer&&(e.pointToLayer=function(t,r){return wI().circleMarker(r,e.style())}),wI().Util.setOptions(this,e),this._layers={},wI().stamp(this),this.url=t,this.idCache={}},onMessageSuccessed:function(t){var e=t.featureResult,r=t.featureResult.properties[this.options.idField],n=null;void 0!==r&&this.idCache[r]?(n=this.getLayer(this.idCache[r]),this._updateLayerData(n,e)):((n=wI().GeoJSON.geometryToLayer(e,this.options)).feature=wI().GeoJSON.asFeature(e),this.addLayer(n),void 0!==r&&(this.idCache[r]=this.getLayerId(n))),this.options.onEachFeature&&this.options.onEachFeature(e,n)},_updateLayerData:function(t,e){e.properties&&(t.feature.properties=e.properties);var r=[];switch(e.geometry.type){case"Point":r=wI().GeoJSON.coordsToLatLng(e.geometry.coordinates),t.setLatLng(r);break;case"LineString":r=wI().GeoJSON.coordsToLatLngs(e.geometry.coordinates,0),t.setLatLngs(r);break;case"MultiLineString":case"Polygon":r=wI().GeoJSON.coordsToLatLngs(e.geometry.coordinates,1),t.setLatLngs(r);break;case"MultiPolygon":r=wI().GeoJSON.coordsToLatLngs(e.geometry.coordinates,2),t.setLatLngs(r)}}}),GU=wI().LayerGroup.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id",render:"normal"},initialize:function(t,e){e=e||{},wI().Util.setOptions(this,e),this.url=t,this._layers={},this.dataService=new PU(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField})},onAdd:function(t){var e=this;this.dataService.initSubscribe(),this.dataService.on("subscribeSocketConnected",function(t){return e.fire("subscribesucceeded",t)}),this.dataService.on("subscribeSocketError",function(t){return e.fire("subscribefailed",t)}),this.dataService.on("messageSucceeded",function(t){return e._onMessageSuccessed(t)}),this.dataService.on("setFilterParamSucceeded",function(t){return e.fire("setfilterparamsucceeded",t)}),"mapv"===this.options.render?this.addLayer(new FU(this.url,this.options)):this.addLayer(new BU(this.url,this.options)),wI().LayerGroup.prototype.onAdd.call(this,t)},onRemove:function(t){wI().LayerGroup.prototype.onRemove.call(this,t),this.dataService&&this.dataService.unSubscribe()},setExcludeField:function(t){return this.dataService.setExcludeField(t),this.options.excludeField=t,this},setGeometry:function(t){return this.dataService.setGeometry(t),this.options.geometry=t,this},_onMessageSuccessed:function(t){var e=this;this.getLayers().map(function(r){return r.onMessageSuccessed&&(r.onMessageSuccessed(t),e.fire("dataupdated",{layer:r,data:t.featureResult})),r})}}),UU=wI().Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,_echartsOptions:null,options:{attribution:rG.ECharts.attribution,loadWhileAnimating:!1},initialize:function(t,e){wI().Util.setOptions(this,e),this.setOption(t)},setOption:function(t,e,r){var n=t.baseOption||t;n.LeafletMap=n.LeafletMap||{roam:!0},n.animation=!0===n.animation,this._echartsOptions=t,this._ec&&this._ec.setOption(t,e,r)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(t){this._map=t,this._initEchartsContainer(),this._ec=PL.init(this._echartsContainer),this._ec.leafletMap=t;var e=this;t.on("zoomstart",function(){e._disableEchartsContainer()}),!e.options.loadWhileAnimating&&t.on("movestart",function(){e._disableEchartsContainer()}),PL.registerAction({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},function(t){}),PL.registerCoordinateSystem("leaflet",zU),PL.extendComponentModel({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),PL.extendComponentView({type:"LeafletMap",render:function(t,r,n){var o=!0,i=r.scheduler.ecInstance.leafletMap,a=n.getZr().painter.getViewportRoot(),s=i.options.zoomAnimation&&wI().Browser.any3d;a.className=" leaflet-layer leaflet-zoom-"+(s?"animated":"hide")+" echarts-layer";var l=wI().DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[l]="50% 50%";var u=t.coordinateSystem,c=n.getZr().painter.getLayers();JU(e._map,a);var f=function(){if(!o){var r,i=JU(e._map,a);if(!e.options.loadWhileAnimating){for(var s in c)c.hasOwnProperty(s)&&c[s]&&(r=c[s].ctx)&&r.clearRect&&r.clearRect(0,0,r.canvas.width,r.canvas.height);e._enableEchartsContainer()}u.setMapOffset(i),t.__mapOffset=i,n.dispatchAction({type:"LeafletMapLayout"})}};function h(){o||(n.dispatchAction({type:"LeafletMapLayout"}),e._enableEchartsContainer())}e._oldMoveHandler&&i.off(e.options.loadWhileAnimating?"move":"moveend",e._oldMoveHandler),e._oldZoomEndHandler&&i.off("zoomend",e._oldZoomEndHandler),i.on(e.options.loadWhileAnimating?"move":"moveend",f),i.on("zoomend",h),e._oldMoveHandler=f,e._oldZoomEndHandler=h,o=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.clear(),this._ec.dispose(),delete this._ec,wI().DomUtil.remove(this._echartsContainer),this._oldZoomEndHandler&&(this._map.off("zoomend",this._oldZoomEndHandler),this._oldZoomEndHandler=null),this._oldMoveHandler&&(this._map.off(this.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldMoveHandler=null),this._resizeHandler&&(this._map.off("resize",this._resizeHandler),this._resizeHandler=null),delete this._map},_initEchartsContainer:function(){var t=this._map.getSize(),e=document.createElement("div");e.style.position="absolute",e.style.height=t.y+"px",e.style.width=t.x+"px",e.style.zIndex=10,this._echartsContainer=e,this.getPane().appendChild(this._echartsContainer);var r=this;function n(t){var e=t.newSize;r._echartsContainer.style.width=e.x+"px",r._echartsContainer.style.height=e.y+"px",r._ec.resize()}this._map.on("resize",n),this._resizeHandler=n}});function zU(t){this._LeafletMap=t,this.dimensions=["lng","lat"],this._mapOffset=VU(t)}function VU(t){var e=t.containerPointToLayerPoint([0,0]);return[e.x||0,e.y||0]}function JU(t,e){var r=VU(t);return e.style.left=r[0]+"px",e.style.top=r[1]+"px",r}zU.prototype.dimensions=["lng","lat"],zU.prototype.setMapOffset=function(t){this._mapOffset=t},zU.prototype.getBMap=function(){return this._LeafletMap},zU.prototype.prepareCustoms=function(){var t=PL.util,e=this.getViewRect();return{coordSys:{type:"leaflet",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:t.bind(this.dataToPoint,this),size:t.bind(function(e,r){return r=r||[0,0],t.map([0,1],function(t){var n=r[t],o=e[t]/2,i=[],a=[];return i[t]=n-o,a[t]=n+o,i[1-t]=a[1-t]=r[1-t],Math.abs(this.dataToPoint(i)[t]-this.dataToPoint(a)[t])},this)},this)}}},zU.prototype.dataToPoint=function(t){null===t[1]&&(t[1]=wI().CRS.EPSG3857.projection.MAX_LATITUDE);var e=this._LeafletMap.latLngToLayerPoint([t[1],t[0]]),r=this._mapOffset;return[e.x-r[0],e.y-r[1]]},zU.prototype.fixLat=function(t){return t>=90?89.99999999999999:t<=-90?-89.99999999999999:t},zU.prototype.pointToData=function(t){var e=this._mapOffset,r=this._LeafletMap.layerPointToLatLng([t[0]+e[0],t[1]+e[1]]);return[r.lng,r.lat]},zU.prototype.getViewRect=function(){var t=this._LeafletMap.getSize();return new PL.graphic.BoundingRect(0,0,t.x,t.y)},zU.prototype.getRoamTransform=function(){return PL.matrix.create()},zU.dimensions=zU.prototype.dimensions,zU.create=function(t){var e,r=t.scheduler.ecInstance.leafletMap;t.eachComponent("LeafletMap",function(t){e||(e=new zU(r)),t.coordinateSystem=e,t.coordinateSystem.setMapOffset(t.__mapOffset||VU(r))}),t.eachSeries(function(t){"leaflet"===t.get("coordinateSystem")&&(e||(e=new zU(r)),t.coordinateSystem=e,t.animation=!0===t.animation)})};function qU(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var HU=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"supportWebGL",value:function(){return WU("webgl")}},{key:"supportWebGL2",value:function(){return WU("webgl2")}},{key:"supportCanvas",value:function(){return WU("2d")}}],(r=null)&&qU(e.prototype,r),n&&qU(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function WU(t){var e=document.createElement("canvas");return e&&e.getContext(t)}var YU=wI().Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1,strokeWidth:1},initialize:function(t){t=t||{},wI().Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var e=void 0===this.options.strokeWidth?1:this.options.strokeWidth;this.options.width=2*(this.options.radius+e)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(t,e,r,n,o,i){o=o/180*Math.PI,i=i/180*Math.PI,t.moveTo(e,r),t.lineTo(e+n*Math.cos(o),r+n*Math.sin(o)),t.arc(e,r,n,o,i),t.lineTo(e,r)},_initStyle:function(){var t=0,e=this.options,r=e.angle;if(e.spaceAngle=360/e.count-e.angle,!(e.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[e.width/2,e.width/2];for(var n=0;n<e.count;n++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],e.radius,t,r),r=(t=r+e.spaceAngle)+e.angle;this._fillStroke()}},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}}),XU=wI().Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(t){t=t||{},wI().Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var t=this.options;t.fill&&(this._ctx.globalAlpha=t.fillOpacity,this._ctx.fillStyle=t.fillColor||t.color,this._ctx.fill(t.fillRule||"evenodd")),t.stroke&&0!==t.weight&&(this._ctx.globalAlpha=t.opacity,this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color,this._ctx.lineCap=t.lineCap,this._ctx.lineJoin=t.lineJoin,this._ctx.stroke())}}),QU=wI().Class.extend({options:{img:null,origin:[0,0],anchor:null,size:null},initialize:function(t){t=t||{},wI().Util.setOptions(this,t),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}}),ZU=wI().Util.falseFn,KU=wI().Class.extend({initialize:function(t,e){this.layer=t,e=e||{},wI().Util.setOptions(this,e)},getRenderer:function(){return this.options.renderer},update:function(){this.getRenderer()._clear(),this.getRenderer()._draw()},_getGraphicAtPoint:function(t){for(var e=this.layer,r=e._map,n=e._getGraphicsInBounds(),o=n.length-1;o>=0;o--){var i=void 0,a=void 0,s=r.latLngToLayerPoint(n[o].getLatLng()),l=n[o].getStyle();if(!l&&this.defaultStyle&&(l=this.defaultStyle),l.img){var u=l.img.width,c=l.img.height;l.size&&l.size[0]&&l.size[1]&&(u=l.size[0],c=l.size[1]);var f=l.anchor||[u/2,c/2];i=wI().point(s.x-f[0],s.y-f[1]),a=wI().point(i.x+u,i.y+c)}else i=wI().point(s.x-l.width/2,s.y-l.height/2),a=wI().point(s.x+l.width/2,s.y+l.height/2);if(wI().bounds(i,a).contains(t))return n[o]}return null},containsPoint:function(t){return!!this._getGraphicAtPoint(t)},_handleClick:function(t){t.target=null;var e=this.layer,r=e._map,n=this._getGraphicAtPoint(r.latLngToLayerPoint(t.latlng));if(n)return this.layer._renderer._ctx.canvas.style.cursor="pointer",t.target=n,void("click"===t.type&&e.options.onClick&&e.options.onClick.call(e,n,t));this.layer._renderer._ctx.canvas.style.cursor="auto"},_clearBuffer:ZU});wI().Canvas.include({drawGraphics:function(t,e){var r=this;r._drawing&&t.forEach(function(t){var n=t.getStyle();!n&&e&&(n=e),n.img?r._drawImage.call(r,r._ctx,n,t.getLatLng()):r._drawCanvas.call(r,r._ctx,n,t.getLatLng())})},_drawCanvas:function(t,e,r){var n=e,o=this._map.latLngToLayerPoint(r),i=o.x-n.width/2,a=o.y-n.height/2,s=n.width,l=n.height;t.drawImage(n,i,a,s,l)},_drawImage:function(t,e,r){var n,o;if(e.size){var i=e.size;n=i[0],o=i[1]}else n=e.img.width,o=e.img.height;var a=this._coordinateToPoint(r),s=wI().point(a),l=wI().point(e.anchor||[n/2,o/2]);a=[s.x-l.x,s.y-l.y],t.drawImage(e.img,a[0],a[1],n,o)},_coordinateToPoint:function(t){if(!this._map)return t;var e=t;wI().Util.isArray(t)?e=wI().latLng(t[0],t[1]):t instanceof wI().LatLng&&(e=wI().latLng(t.lat,t.lng));var r=this._map.latLngToLayerPoint(e);return[r.x,r.y]}});var $U=wI().Util.falseFn,tz=function(){for(var t=document.createElement("div"),e=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],r=0;r<e.length;r++){var n=e[r];if(void 0!==t.style[n])return n}return e[0]}(),ez=wI().Class.extend({initialize:function(t,e){this.layer=t;var r=e||{};wI().Util.setOptions(this,r),this.options.radius=this._pixelToMeter(this.options.radius),this._initContainer()},getRenderer:function(){return this},update:function(t){t&&t.length>-1&&(this._data=t),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var e=this._getLayerState();e.data=this._data||[],this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(e)},drawGraphics:function(t){this._clearBuffer();var e=this.layer._map.getSize();this._container.width!==e.x&&(this._container.width=e.x),this._container.height!==e.y&&(this._container.height=e.y);var r=this.layer._map.getPanes().mapPane._leaflet_pos;this._container.style[tz]="translate("+-Math.round(r.x)+"px,"+-Math.round(r.y)+"px)",this._data=t||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=wI().DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(t,e){var r=wI().DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return r.oncontextmenu=wI().Util.falseFn,r.width=t,r.height=e,r.style.width=t+"px",r.style.height=e+"px",r},_pixelToMeter:function(t){var e=this.layer._map.getBounds();return t*((e.getEast()-e.getWest())/this.layer._map.getSize().x*(6378137*Math.PI/180))},_createInnerRender:function(){var t=this,e=this._getLayerState(),r=e.color,n=e.radius,o=e.opacity,i=e.highlightColor,a=e.radiusScale,s=e.radiusMinPixels,l=e.radiusMaxPixels,u=e.strokeWidth,c=e.outline,f={id:"scatter-plot",data:t._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:r,opacity:o,radius:n,radiusScale:a,highlightColor:i,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,coordinateSystem:this._isWGS84()?window.DeckGL.COORDINATE_SYSTEM.LNGLAT_OFFSETS:window.DeckGL.COORDINATE_SYSTEM.LNGLAT,isGeographicCoordinateSystem:this._isWGS84(),outline:c,getPosition:function(t){if(!t)return[0,0,0];var e=t.getLatLng();return e&&[e.lng,e.lat,0]},getColor:function(e){var r=t._getLayerDefaultStyle(),n=e&&e.options;return n&&n.color||r.color},getRadius:function(e){var r=t._getLayerDefaultStyle(),n=e&&e.getStyle();return n&&n.radius||r.radius},updateTriggers:{getColor:[r],getRadius:[n]}},h=this;this.options.onClick&&(f.onClick=function(){h._container.style.cursor="pointer",h.options.onClick.apply(h,arguments)}),this.options.onHover&&(f.onHover=function(){h._container.style.cursor="pointer",h.options.onHover.apply(h,arguments)}),t._renderLayer=new window.DeckGL.ScatterplotLayer(f)},_getLayerDefaultStyle:function(){if(this._layerDefaultStyleCache)return this._layerDefaultStyleCache;var t=this.layer.options,e=t.color,r=t.opacity,n=t.radius,o=t.radiusScale,i=t.radiusMinPixels,a=t.radiusMaxPixels,s=t.strokeWidth,l=t.outline;return n=this._pixelToMeter(n),this._layerDefaultStyleCache={color:e,opacity:r,radius:n,radiusScale:o,radiusMinPixels:i,radiusMaxPixels:a,strokeWidth:s,outline:l},this._layerDefaultStyleCache},_getLayerState:function(){var t=this.layer.getState();return t.zoom=t.zoom-1,t},_draw:function(){var t=this._getLayerState();this._refreshData(),t.data=this._data||[];var e={};for(var r in t)e[r]=t[r];this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),e.layers=[this._renderLayer],e.canvas=this._container,e.onBeforeRender=this._onBeforeRender.bind(this),e.onAfterRender=this._onAfterRender.bind(this),e.coordinateSystem=this._isWGS84()?window.DeckGL.COORDINATE_SYSTEM.LNGLAT_OFFSETS:window.DeckGL.COORDINATE_SYSTEM.LNGLAT,e.isGeographicCoordinateSystem=this._isWGS84(),this.deckGL?this.deckGL.setProps(e):this.deckGL=new window.DeckGL.experimental.DeckGLJS(e)},_clearBuffer:function(){if(this.deckGL){var t=this.deckGL.layerManager;t&&t.context.gl.clear(t.context.gl.COLOR_BUFFER_BIT)}return this},_refreshData:function(){var t=this._data||[],e=wI().Util.isArray(t)?[].concat(t):[t];this._renderLayer.props.data||(this._renderLayer.props.data=[]),this._renderLayer.props.data.length=0;for(var r=0;r<e.length;r++)this._renderLayer.props.data.push(e[r]);this._data=this._renderLayer.props.data},_handleClick:$U,_onBeforeRender:$U,_onAfterRender:$U,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:$U,_addPath:$U,containsPoint:$U,_isWGS84:function(){return"EPSG:4326"===this.layer._map.options.crs.code}}),rz=["canvas","webgl"],nz={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},oz={"EPSG:4326":1.40625,"EPSG:3857":156543.03392804688},iz={"EPSG:4326":1,"EPSG:3857":0},az=wI().Path.extend({initialize:function(t,e){this.graphics=[].concat(t);var r=e||{};r.pane="overlayPane",wI().Util.setOptions(this,r),this.options.render=this.options.render||rz[0],HU.supportWebGL2()||(this.options.render=rz[0]),this.options.interactive&&this.on("click mousemove dblclick mousedown mouseup mouseout contextmenu",this._handleClick,this)},getEvents:function(){return{resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)}},onAdd:function(t){this._map=t,this._crs=t.options.crs,this.defaultStyle=this._getDefaultStyle(this.options),this._renderer=this._createRenderer(),this._container=this._renderer._container,wI().Path.prototype.onAdd.call(this)},onRemove:function(){this.off("click mousemove dblclick mousedown mouseup contextmenu",this._handleClick,this),this._renderer._removePath(this)},setGraphics:function(t){this.graphics=this.graphics||[],this.graphics.length=0;var e=wI().Util.isArray(t)?[].concat(t):[t];this.graphics=[].concat(e),this.update()},addGraphics:function(t){this.graphics=this.graphics||[];var e=wI().Util.isArray(t)?[].concat(t):[t];this.graphics=this.graphics.concat(e),this.update()},getGraphicBy:function(t,e){var r=null;for(var n in this.graphics)if(this.graphics[n][t]===e){r=this.graphics[n];break}return r},getGraphicById:function(t){return this.getGraphicBy("id",t)},getGraphicsByAttribute:function(t,e){var r,n=[];for(var o in this.graphics)(r=this.graphics[o])&&r.attributes&&r.attributes[t]===e&&n.push(r);return n},removeGraphics:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t||0===t.length||t===this.graphics)return this.graphics.length=0,void this.update();dt.isArray(t)||(t=[t]);for(var e=t.length-1;e>=0;e--){var r=t[e],n=dt.indexOf(this.graphics,r);-1!==n&&this.graphics.splice(n,1)}this.update()},setStyle:function(t){var e=this.options,r={color:e.color,radius:e.radius,opacity:e.opacity,highlightColor:e.highlightColor,radiusScale:e.radiusScale,radiusMinPixels:e.radiusMinPixels,radiusMaxPixels:e.radiusMaxPixels,strokeWidth:e.strokeWidth,outline:e.outline};this.options=wI().Util.extend(this.options,r,t),this.defaultStyle=this._getDefaultStyle(this.options),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},getRenderer:function(){return this._renderer},getState:function(){var t=this._map,e=t.getSize().x,r=t.getSize().y,n=t.getCenter(),o=n.lng,i=n.lat,a=iz[this._crs.code]||0;oz[this._crs.code]&&this._crs.resolutions&&this._crs.resolutions.length>0&&(a=Math.round(Math.log2(oz[this._crs.code]/this._crs.resolutions[0])));var s={longitude:o,latitude:i,zoom:t.getZoom()+a,maxZoom:t.getMaxZoom()+a,pitch:0,bearing:0},l={};for(var u in s)l[u]=s[u];l.width=e,l.height=r;var c=this.options;return l.color=c.color,l.radius=c.radius,l.opacity=c.opacity,l.highlightColor=c.highlightColor,l.radiusScale=c.radiusScale,l.radiusMinPixels=c.radiusMinPixels,l.radiusMaxPixels=c.radiusMaxPixels,l.strokeWidth=c.strokeWidth,l.outline=c.outline,l},_resize:function(){var t=this._map.getSize();this._container.width=t.x,this._container.height=t.y,this._container.style.width=t.x+"px",this._container.style.height=t.y+"px";var e=this._map.containerPointToLayerPoint([0,0]);wI().DomUtil.setPosition(this._container,e),this._update()},_moveEnd:function(){this._layerRenderer instanceof ez&&this._update()},_createRenderer:function(){var t,e=this._map,r=e.getSize().x,n=e.getSize().y;if(this.options.render===rz[0])t=new KU(this,{width:r,height:n,renderer:e.getRenderer(this)});else{var o=wI().Util.setOptions({},nz),i=wI().Util.setOptions({options:o},this.options);(i=wI().Util.setOptions(this,i)).container=e.getPane("overlayPane"),i.width=r,i.height=n,t=new ez(this,i)}return t.defaultStyle=this.defaultStyle,this._layerRenderer=t,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){var t=this._getGraphicsInBounds();this._renderer.drawGraphics(t,this.defaultStyle)},_project:function(){var t=this;t._getGraphicsInBounds().map(function(e){var r=t._map.latLngToLayerPoint(e.getLatLng()),n=t._clickTolerance(),o=[e._anchor+n,e._anchor+n];return e._pxBounds=new(wI().Bounds)(r.subtract(o),r.add(o)),e}),t._pxBounds=wI().bounds(wI().point(0,0),wI().point(this._container.width,this._container.height))},_getDefaultStyle:function(t){var e={};if(t.color){e.fill=!0;var r=this.toRGBA(t.color);e.color=r,e.fillColor=r}return t.opacity&&(e.opacity=t.opacity,e.fillOpacity=t.opacity),t.radius&&(e.radius=t.radius),t.strokeWidth&&(e.weight=t.strokeWidth),t.outline&&(e.stroke=t.outline),new XU(e).getStyle()},toRGBA:function(t){return"rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat((t[3]||255)/255,")")},_getGraphicsInBounds:function(){var t=[],e=this._map.getBounds();return this.graphics.map(function(r){return e.contains(r.getLatLng())&&t.push(r),r}),t},_handleClick:function(t){this._layerRenderer._handleClick(t)},beforeAdd:wI().Util.falseFn,_containsPoint:function(t){return this._layerRenderer.containsPoint(t)}}),sz=ZG.extend({options:{isOverLay:!0},initialize:function(t,e,r){var n=[];n.push(t),n.push(r),ZG.prototype.initialize.apply(this,n),this.chartsType=e,this.themeFields=r&&r.themeFields?r.themeFields:null,this.charts=r&&r.charts?r.charts:[],this.cache=r&&r.cache?r.cache:{},this.chartsSetting=r&&r.chartsSetting?r.chartsSetting:{}},setChartsType:function(t){this.chartsType=t,this.redraw()},addFeatures:function(t){var e=this;e.fire("beforefeaturesadded",{features:t}),this.features=this.toiClientFeature(t),e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures())},redrawThematicFeatures:function(t){var e=this;e.renderer.clearAll();var r=e.features;if(this.options.alwaysMapCRS&&t&&t instanceof wI().LatLngBounds){var n=this._map.options.crs;t=wI().bounds(n.project(t.getSouthWest()),n.project(t.getNorthEast()))}t=uG.toSuperMapBounds(t);for(var o=0,i=r.length;o<i;o++){var a=r[o],s=a.geometry.getBounds();if(!t||t.intersectsBounds(s)){var l=e.cache,u=a.id;if(!l[u]){l[u]=u;var c=e.createThematicFeature(a),f=e.overlayWeightField&&a.attributes[e.overlayWeightField]&&!isNaN(a.attributes[e.overlayWeightField]);c&&f&&(c.__overlayWeight=a.attributes[e.overlayWeightField]),c&&e.charts.push(c)}}}e.drawCharts()},createThematicFeature:function(t){var e,r=this;return lM[r.chartsType]&&r.themeFields&&r.chartsSetting&&(e=new lM[r.chartsType](t,r,r.themeFields,r.chartsSetting)),!!e&&(e.assembleShapes(),e)},drawCharts:function(){var t=this;t.renderer&&(t.overlayWeightField&&t._sortChart(),t.options&&!t.options.isOverLay?t._addOverlayShape():t._addNoOverlayShape(),t.renderer.render())},getShapesByFeatureID:function(t){var e=[],r=this.renderer.getAllShapes();if(!t)return r;for(var n=0,o=r.length;n<o;n++){var i=r[n];i.refDataID&&t===i.refDataID&&e.push(i)}return e},isQuadrilateralOverLap:function(t,e){var r=t.length,n=e.length;if(5!==r||5!==n)return null;for(var o=!1,i=0;i<r;i++)if(this.isPointInPoly(t[i],e)){o=!0;break}for(var a=0;a<n;a++)if(this.isPointInPoly(e[a],t)){o=!0;break}for(var s=0;s<r-1&&!o;s++)for(var l=0;l<n-1;l++){if("SuperMap.Geometry.Point"===dt.lineIntersection(t[s],t[s+1],e[l],e[l+1]).CLASS_NAME){o=!0;break}}return o},isPointInPoly:function(t,e){for(var r=!1,n=-1,o=e.length,i=o-1;++n<o;i=n)(e[n].y<=t.y&&t.y<e[i].y||e[i].y<=t.y&&t.y<e[n].y)&&t.x<(e[i].x-e[n].x)*(t.y-e[n].y)/(e[i].y-e[n].y)+e[n].x&&(r=!r);return r},isChartInMap:function(t,e){for(var r=t,n=!1,o=0,i=e.length;o<i;o++){var a=e[o];if(a.x>=r.left&&a.x<=r.right&&a.y>=r.top&&a.y<=r.bottom){n=!0;break}}return n},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(t){this.clearCache(),ZG.prototype.removeFeatures.call(this,t)},removeAllFeatures:function(){this.clearCache(),ZG.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),ZG.prototype.redraw.apply(this,arguments)},clear:function(){var t=this;t.renderer&&(t.renderer.clearAll(),t.renderer.refresh()),t.removeAllFeatures(),t.clearCache()},getWeightFieldValue:function(t,e,r){if((void 0===r||isNaN(r))&&(r=0),!t.attributes)return r;var n=t.attributes[e];return(void 0===n||isNaN(n))&&(n=r),n},_sortChart:function(){this.charts&&this.charts.sort(function(t,e){return void 0===t.__overlayWeight&&void 0===e.__overlayWeight?0:void 0!==t.__overlayWeight&&void 0===e.__overlayWeight?-1:void 0===t.__overlayWeight&&void 0!==e.__overlayWeight?1:void 0!==t.__overlayWeight&&void 0!==e.__overlayWeight?parseFloat(t.__overlayWeight)<parseFloat(e.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var t=this.charts,e=0,r=t.length;e<r;e++)for(var n=t[e],o=n.resetLocation(),i=n.shapes,a=0,s=i.length;a<s;a++)i[a].refOriginalPosition=o,this.renderer.addShape(i[a])},_addNoOverlayShape:function(){var t=this,e=t._map.getBounds(),r=this._map.options.crs;this.options.alwaysMapCRS&&(e=wI().bounds(r.project(e.getSouthWest()),r.project(e.getNorthEast()))),e=uG.toSuperMapBounds(e);for(var n=t.charts,o=[],i=t.getLocalXY(new gt(e.left,e.top)),a=t.getLocalXY(new gt(e.right,e.bottom)),s=new _t(i[0],a[1],a[0],i[1]),l=0,u=n.length;l<u;l++){var c=n[l],f=c.resetLocation(),h=c.chartBounds,p=[{x:h.left,y:h.top},{x:h.left,y:h.bottom},{x:h.right,y:h.bottom},{x:h.right,y:h.top},{x:h.left,y:h.top}];if(!s||t.isChartInMap(s,p)){for(var y=!1,d=0;d<o.length;d++)if(t.isQuadrilateralOverLap(p,o[d])){y=!0;break}if(!y){o.push(p);for(var b=c.shapes,v=0,m=b.length;v<m;v++)b[v].refOriginalPosition=f,t.renderer.addShape(b[v])}}}}}),lz=sz.extend({initialize:function(t,e,r){sz.prototype.initialize.apply(this,arguments),this.symbolType=e,this.symbolSetting={}},setSymbolType:function(t){this.symbolType=t,this.redraw()},createThematicFeature:function(t){var e,r=this;return lM[r.symbolType]&&r.themeField&&r.symbolSetting&&(e=new lM[r.symbolType](t,r,[r.themeField],r.symbolSetting)),!!e&&(e.assembleShapes(),e)}}),uz=wI().SVG.extend({initialize:function(t,e,r){wI().SVG.prototype.initialize.call(this,r),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:wI().Util.falseFn,addTo:function(t){if(this._map=t,this.options.interactive)for(var e in this._layers){var r=this._layers[e];r._path.style.pointerEvents="auto",this._map._targets[wI().stamp(r._path)]=r}},removeFrom:function(t){var e=t||this._map;if(this.options.interactive)for(var r in this._layers){var n=this._layers[r];delete e._targets[wI().stamp(n._path)]}delete this._map},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(t._path),this._layers[wI().stamp(t)]=t},_updateIcon:function(t){var e=t._path=wI().SVG.create("image"),r=t.options,n=r.iconUrl;if(r.iconSize){var o=wI().point(r.iconSize),i=o&&o.divideBy(2,!0),a=t._point.subtract(i);e.setAttribute("x",a.x),e.setAttribute("y",a.y),e.setAttribute("width",o.x+"px"),e.setAttribute("height",o.y+"px")}else{var s=new Image;s.src=n,wI().DomEvent.on(s,"load",function(){var r=wI().point([s.width,s.height]),n=r&&r.divideBy(2,!0),o=t._point.subtract(n);e.setAttribute("x",o.x),e.setAttribute("y",o.y),e.setAttribute("width",r.x+"px"),e.setAttribute("height",r.y+"px")})}e.setAttribute("href",n)}}),cz=wI().Canvas.extend({initialize:function(t,e,r){wI().Canvas.prototype.initialize.call(this,r),this._tileCoord=t,this._size=e,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,r.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:wI().Util.falseFn,addTo:function(t){this._map=t},removeFrom:function(t){delete this._map},_updateDashArray:function(t){var e=t.options.dashArray;if(e&&"string"==typeof e){var r,n=e.split(","),o=[];for(r=0;r<n.length;r++)o.push(Number(n[r]));t.options._dashArray=o}else t.options._dashArray=e},_onClick:function(t){var e,r,n=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());for(var o in this._layers)(e=this._layers[o]).options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(r=e);r&&(wI().DomEvent.stop(t),this._fireEvent([r],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t).subtract(this.getOffset());this._handleMouseHover(t,e)}},_updateIcon:function(t){if(this._drawing){var e=t.options,r=this._ctx,n=t._getImage();if(e.iconSize&&n.complete){var o=wI().point(e.iconSize),i=o&&o.divideBy(2,!0),a=t._point.subtract(i);r.drawImage(n,a.x,a.y,o.x,o.y)}else wI().DomEvent.on(n,"load",function(){var e=wI().point([n.width,n.height]),o=e&&e.divideBy(2,!0),i=t._point.subtract(o);r.drawImage(n,i.x,i.y,e.x,e.y)});this._drawnLayers[t._leaflet_id]=t}}}),fz="LABEL",hz="TEXT",pz="POINT",yz="LINE",dz="REGION",bz=wI().Class.extend({initialize:function(t){this.properties=t.properties,this.type=t.type,this.layerName=t.layerName},render:function(t,e){this._renderer=t,this._container=t._container,this.options=e,t._initPath(this),t._updateStyle(this);var r=this.getElement();r&&this.layerName&&wI().DomUtil.addClass(r,this.layerName)},updateStyle:function(t,e){this.options=e,t._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var t=this._parts,e=wI().bounds([]),r=0;r<t.length;r++)for(var n=t[r],o=0;o<n.length;o++)e.extend(n[o]);var i=this._clickTolerance(),a=new(wI().Point)(i,i);return e.min._subtract(a),e.max._add(a),e},_clickTolerance:wI().Path.prototype._clickTolerance});function vz(t){"@babel/helpers - typeof";return(vz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var mz=wI().Path.extend({includes:bz.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(t,e){bz.prototype.initialize.call(this,t),this._makeFeatureParts(t,e),this.options.offsetX=e||1,this.options.offsetY=e||1},render:function(t,e){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var r=this.properties.attributes;this._text=r&&this.properties.textField&&r[this.properties.textField]||""}var n=this.options;this._pxBounds=wI().bounds(this._point,this._point),bz.prototype.render.apply(this,[t,e]),this.options=wI().Util.extend(n,e),this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var r=t.geometry[0];"object"===vz(r[0])&&"x"in r[0]?(this._point=wI().point(r[0]).scaleBy(e),this._empty=wI().Util.falseFn):(this._point=wI().point(r).scaleBy(e),this._empty=wI().Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._updateBounds(),bz.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){var t=this._renderer._getTextWidth(this),e=[t/2,t/2];this._pxBounds=wI().bounds(this._point.subtract(e),this._point.add(e))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(t){return!1}});function gz(t){"@babel/helpers - typeof";return(gz="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}cz.include({_getTextWidth:function(t){return this._ctx.measureText(t._text).width},_updateText:function(t){if(this._drawing&&!t._empty()){var e=this.getContainer(),r=this._map.getSize();e.width=r.x,e.height=r.y,e.style.width=r.x+"px",e.style.height=r.y+"px";var n=this._ctx,o=t.options,i=o.offsetX||1,a=o.offsetY||1,s=t._point.subtract(wI().point(i,a));o.fill&&(this._drawnLayers[t._leaflet_id]=t,n.fillRect(0,0,r.x,r.y),n.font=[o.fontWeight?o.fontWeight:"normal",o.fontSize?o.fontSize:"14px",o.fontFamily?o.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),n.textAlign=o.textAlign,n.lineWidth=o.weight,n.fillStyle=o.fillColor,n.fillText(t._text,s.x,s.y),n.strokeStyle=o.color,n.strokeText(t._text,s.x,s.y),n.rotate(o.rotation))}}}),uz.include({_getTextWidth:function(t){return t._path.getComputedTextLength()||0},_initPath:function(t){var e;mz&&t instanceof mz?(e=t._path=wI().SVG.create("text")).textContent=t._text:e=t._path=wI().SVG.create("path"),t.options.className&&wI().DomUtil.addClass(e,t.options.className),t.options.interactive&&wI().DomUtil.addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[wI().stamp(t)]=t},_updateText:function(t){var e=t._path,r=t.options,n=r.offsetX||1,o=r.offsetY||1,i=t._point.subtract(wI().point(n,o));e.setAttribute("x",i.x),e.setAttribute("y",i.y),r.rotation=r.rotation||0,e.setAttribute("transform","rotate("+r.rotation/Math.PI*180+" "+i.x+" "+i.y+")"),e.setAttribute("text-anchor","center"===r.textAlign?"middle":r.textAlign),e.style.fontSize=r.fontSize,e.style.fontFamily=r.fontFamily,e.style.fontWeight=r.fontWeight||"normal",e.style.glyphOrientationVertical=r.rotation||"",r.stroke?(e.setAttribute("stroke",r.color),e.setAttribute("stroke-linecap","round"),e.setAttribute("stroke-linejoin","round"),e.setAttribute("stroke-opacity",r.opacity),e.setAttribute("stroke-width",r.weight>1?r.weight/10:r.weight)):e.setAttribute("stroke","none"),r.fill?(e.setAttribute("fill",r.fillColor||r.color),e.setAttribute("fill-opacity",r.fillOpacity)):e.setAttribute("fill","none")}});var wz,_z=wI().CircleMarker.extend({includes:bz.prototype,statics:{iconCache:{}},initialize:function(t,e){bz.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},getLatLng:void 0,render:function(t,e){bz.prototype.render.call(this,t,e),this._radius=e.radius||wI().CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var r=t.geometry[0];"object"===gz(r[0])&&"x"in r[0]?(this._point=wI().point(r[0]).scaleBy(e),this._empty=wI().Util.falseFn):(this._point=wI().point(r).scaleBy(e),this._empty=wI().Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(t,e){return this._radius=e.radius||this._radius,this._updateBounds(),bz.prototype.updateStyle.call(this,t,e)},_updateBounds:function(){if(this.options.iconUrl&&this.options.iconSize){var t=wI().point(this.options.iconSize),e=t&&t.divideBy(2,!0),r=this._point.subtract(e);this._pxBounds=new(wI().Bounds)(r,r.add(t))}else wI().CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):wI().CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var t=this.options.iconUrl,e=_z.iconCache[t];if(!e){var r=this.options.iconSize||[50,50];e=_z.iconCache[t]=this._createIcon(t,r)}return e},_createIcon:function(t,e){var r=t;if(!r)throw new Error("iconUrl not set in Icon options (see the docs).");var n=document.createElement("img");n.src=r,n.className="leaflet-marker-icon "+(this.layerName||"");var o=e;if("number"==typeof o&&(o=[o,o]),o){var i=wI().point(o),a=wI().point(i&&i.divideBy(2,!0));i&&(n.style.width=i.x+"px",n.style.height=i.y+"px"),a&&(n.style.marginLeft=-a.x+"px",n.style.marginTop=-a.y+"px")}return n.onload=function(){o||(n.style.width=this.width+"px",n.style.height=this.height+"px")},n},_containsPoint:function(t){return this.options.iconUrl?this._pxBounds.contains(t):wI().CircleMarker.prototype._containsPoint.call(this,t)}}),Oz={_makeFeatureParts:function(t,e){e=e||{x:1,y:1};var r,n=t.geometry;this._parts=[];for(var o=0;o<n.length;o++){for(var i=n[o],a=[],s=0;s<i.length;s++)r=i[s],a.push(wI().point(r).scaleBy(e));this._parts.push(a)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},Sz=wI().Polyline.extend({includes:[bz.prototype,Oz],initialize:function(t,e){bz.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){e.fill=!1,bz.prototype.render.call(this,t,e),this._updatePath()},updateStyle:function(t,e){e.fill=!1,bz.prototype.updateStyle.call(this,t,e)}}),xz=wI().Polygon.extend({includes:[bz.prototype,Oz],initialize:function(t,e){bz.prototype.initialize.call(this,t),this._makeFeatureParts(t,e)},render:function(t,e){bz.prototype.render.call(this,t,e),this._updatePath()}}),Pz=r(1943),Ez=r.n(Pz),kz=r(4721),jz=wI().Class.extend({initialize:function(t){this.url=t},getTile:function(){var t=this;return mn.get(t.url,null,{timeout:1e4}).then(function(t){return t.ok?t.blob().then(function(t){var e=new FileReader;return new Promise(function(r){e.addEventListener("loadend",function(){var t=new(Ez())(e.result);return r(new kz.VectorTile(t))}),e.readAsArrayBuffer(t)})}):{layers:[]}}).then(function(e){return t._processVectorTileSpec(e)})},_processVectorTileSpec:function(t){var e=[];for(var r in t.layers){for(var n=[],o=0;o<t.layers[r].length;o++){var i=t.layers[r].feature(o);switch(i.geometry=i.loadGeometry(),i.layerName=r,i.properties={attributes:wI().Util.extend({},i.properties),id:i.id},i.type){case 1:i.type=pz;break;case 2:i.type=yz;break;case 3:i.type=dz}n.push(i)}var a={};a.features=n,a.layerName=r,a.extent=t.layers[r].extent,e.push(a)}return e}}),Tz=wI().Class.extend({initialize:function(t){this.url=t},getTile:function(){var t=this;return mn.get(t.url,null,{timeout:1e4}).then(function(t){return t.json()}).then(function(e){return t._processRecordSets(e,t)})},_processRecordSets:function(t,e){var r=t.recordsets;if(!(r=e._convertToGeoJSON(r)))return null;for(var n=0;n<r.length;n++){for(var o=r[n],i=0;i<o.features.length;i++){var a=o.features[i];(a=e._convertToVectorLayerFeature(a,e)).layerName=o.layerName,o.features[i]=a}o.extent=256,delete o.fieldTypes,delete o.fields}return r},_convertToVectorLayerFeature:function(t,e){if(t.geometry){var r,n,o,i,a={},s=t.geometry,l=s.type,u=s.coordinates,c=t.properties,f=c.id;if("Point"===l)a=c&&c.texts?e._createFeature(f,hz,[u],c):e._createFeature(f,pz,[u],c);else if("MultiPoint"===l)a=e._createFeature(f,pz,u,c);else if("LineString"===l)a=e._createFeature(f,yz,[u],c);else if("MultiLineString"===l||"Polygon"===l){for(o=[],r=0;r<u.length;r++)i=u[r],"Polygon"===l&&(i.outer=0===r),o.push(i);var h="Polygon"===l?dz:yz;a=e._createFeature(f,h,o,c)}else{if("MultiPolygon"!==l)throw new Error("Illegal GeoJSON object");for(o=[],r=0;r<u.length;r++)for(n=0;n<u[r].length;n++)(i=u[r][n]).outer=0===n,o.push(i);a=e._createFeature(f,dz,o,c)}return a}},_convertToGeoJSON:function(t){if(t){for(var e=0;e<t.length;e++){for(var r=t[e],n=0;n<r.features.length;n++){for(var o=r.features[n],i=[],a=0,s=0;s<o.geometry.parts.length;s++){for(var l=2*o.geometry.parts[s],u=0,c=a;u<l;u+=2,c+=2){var f=o.geometry.points[c],h=o.geometry.points[c+1];i.push({x:f,y:h})}a+=l}o.geometry.points=i}r.features=SG(r.features).features}return t}},_createFeature:function(t,e,r,n){return{id:t,type:e,geometry:r,properties:n}}}),Cz={JSON:"JSON",MVT:"MVT",PBF:"PBF"},Az=wI().Class.extend({initialize:function(t,e){this.layer=t.layer,this.tileSize=t.layer.getTileSize(),this.format=t.format,this.coords=t.coords,this.renderer=t.renderer,this.done=e,this.layer._textVectorTiles={}},renderTile:function(){var t=this,e=t.layer,r=t.coords,n=e._getTileUrl(r);([Cz.MVT,Cz.PBF].indexOf(t.format.toUpperCase())>-1?new jz(n):new Tz(n)).getTile().then(function(e){t.render(e,r)})},render:function(t,e){if(t){for(var r=this,n=r.renderer,o=r.layer,i=0;i<t.length;i++){var a=t[i],s=a.layerName;o._dataLayerNames[s]=!0;for(var l=r.tileSize.divideBy(a.extent),u=o.getLayerStyleInfo(a.layerName),c=0;c<a.features.length;c++){var f=a.features[c];if(f){u&&u.type===fz&&f.type===pz&&f.properties.attributes&&(f.type=hz);var h=r._getStyleOptions(e,f,s,r);if(h.length){var p=r._createFeatureLayer(f,l);if(p){var y={scope:r,coords:e,renderer:n};if(!r._extractTextLayer(f,p,h,y)){for(var d=0;d<h.length;d++){var b=r._validateStyle(h[d],f.type);p.render(n,b),n._addPath(p)}o.options.interactive&&p.makeInteractive();var v=o._getFeatureKey(f.id,s);n._features[v]={layerName:s,feature:p}}}}}}}o._map&&n.addTo(o._map),wI().Util.requestAnimFrame(r.done.bind(e,null,r.layer._vectorTiles[r.layer._tileCoordsToKey(e)]))}},_extractTextLayer:function(t,e,r,n){if(t.type!==hz)return!1;var o=n.scope,i=n.coords,a=o.layer,s=a._tileCoordsToKey(i),l=t.id,u=t.layerName,c=a._textVectorTiles[s];return c||(c={layers:{},coords:i,renderer:n.renderer}),c.layers[l]={layer:e,style:r,layerName:u},a._textVectorTiles[s]=c,!0},_getStyleOptions:function(t,e,r,n){var o=n,i=o.layer,a=i.getVectorTileLayerStyle(t,e)||o._defaultStyle(e.type),s=e.id,l=i._getFeatureKey(s,r),u=i._overriddenStyles[l];return a=(a=(a=u||a)instanceof Function?a(e.properties,t.z):a)instanceof Array?a:[a]},_createFeatureLayer:function(t,e){var r;switch(t.type){case pz:r=new _z(t,e);break;case yz:r=new Sz(t,e);break;case dz:r=new xz(t,e);break;case hz:r=new mz(t,e)}var n=this.layer;return r&&n.options.interactive&&r.addEventParent(n),r},_validateStyle:function(t,e){switch(wI().Path.prototype.options.weight=1,wI().Path.prototype.options.fillOpacity=1,e){case pz:return wI().extend({},wI().CircleMarker.prototype.options,t);case yz:return wI().extend({},wI().Polyline.prototype.options,t);case dz:return wI().extend({},wI().Polygon.prototype.options,t);case hz:return wI().extend({},mz.prototype.options,t)}},_defaultStyle:function(t){var e=wI().Path.prototype.options;switch(e.weight=1,e.fillOpacity=1,e.radius=3,t){case pz:return wI().extend({},e,wI().CircleMarker.prototype.options);case yz:return wI().extend({},e,wI().Polyline.prototype.options);case dz:return wI().extend({},e,wI().Polygon.prototype.options);case hz:return wI().extend({},e,mz.prototype.options)}}}),Mz=wI().GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:Cz.JSON,interactive:!0,maxZoom:23},initialize:function(t){var e=this;wI().setOptions(e,t),wI().GridLayer.prototype.initialize.call(e,t),e._vectorTiles={},e._overriddenStyles={},e.vectorTileLayerStyles=e.options.vectorTileLayerStyles,e.on("tileunload",function(t){var r=e._tileCoordsToKey(t.coords),n=e._vectorTiles[r];n&&e._map&&n.removeFrom(e._map),delete e._vectorTiles[r]},e),e.on("tileerror ",e._renderText,e),e.on("load",e._renderText,e),e._dataLayerNames={}},createTile:function(t,e){var r=this,n=r.getTileSize(),o=null;return o="Canvas"===r.options.renderer?new cz(t,n,r.options):new uz(t,n,r.options),r._vectorTiles[r._tileCoordsToKey(t)]=o,o._features={},new Az({layer:r,format:r.options.format,coords:t,renderer:o},e).renderTile(),o.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(t){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[t]},setFeatureStyle:function(t,e,r){var n=this._getFeatureKey(t,e);for(var o in this._overriddenStyles[n]=r,this._vectorTiles){var i=this._vectorTiles[o],a=i._features[n];if(a){var s=a.feature;this._updateStyles(s,i,r)}}return this},resetFeatureStyle:function(t,e){var r=this._getFeatureKey(t,e);for(var n in delete this._overriddenStyles[r],this._vectorTiles){var o=this._vectorTiles[n],i=o._features[r];if(i){var a=i.feature,s=this.vectorTileLayerStyles[i.layerName];this._updateStyles(a,o,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){wI().GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var t=this._textVectorTiles;for(var e in t){var r=t[e],n=r.renderer;for(var o in r.layers){for(var i=r.layers[o],a=i.style,s=i.layer,l=0;l<a.length;l++)s.render(n,a[l]),n._addPath(s);this.options.interactive&&s.makeInteractive()}}},_getFeatureKey:function(t,e){return(t=t||0)+"_"+(e=e||"null")},_updateStyles:function(t,e,r){(r=r instanceof Function?r(t.properties,e.getCoord().z):r)instanceof Array||(r=[r]);for(var n=0;n<r.length;n++){var o=this._extendStyle(r[n],t.type);t.updateStyle(e,o)}},_extendStyle:function(t,e){switch(e){case pz:return wI().extend({},wI().CircleMarker.prototype.options,t);case yz:return wI().extend({},wI().Polyline.prototype.options,t);case dz:return wI().extend({},wI().Polygon.prototype.options,t);case hz:return wI().extend({},mz.prototype.options,t)}}}),Rz=Mz.extend({options:{crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,processCharacters:!1,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:rG.Common.attribution},initialize:function(t,e){(e=e||{}).noWrap=null==e.noWrap||e.noWrap,wI().setOptions(this,e),Mz.prototype.initialize.call(this,e),wI().stamp(this);var r=this;if(!t||t.indexOf("http")<0)return t="",this;r.url=t,t.indexOf("/")===t.length-1&&(t=t.substr(0,t.length-1),r.url=t),this.cartoCSSToLeaflet=new YG(r.url),r.initLayersInfo(),!r.options.serverCartoCSSStyle&&r.options.cartoCSS&&r.setClientCartoCSS(r.options.cartoCSS)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._map=t,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var t=this,e=dt.urlPathAppend(t.url,"layers");mn.get(wn.appendCredential(e),null,{timeout:t.options.timeout}).then(function(t){return t.json()}).then(function(e){if(t.layersInfoInitialized=!0,t.layersInfo=e,t.layersInfo){for(var r={},n=0,o=t.layersInfo.length;n<o;n++)for(var i=t.layersInfo[n].subLayers.layers,a=0,s=i.length;a<s;a++)i[a].layerIndex=s-a,r[i[a].name]=i[a];t.layersInfo=r,t.cartoCSSToLeaflet.layersInfo=r,t.options.serverCartoCSSStyle&&t.getVectorStylesFromServer()}}).catch(function(t){console.error("error",t)})},getLayerStyleInfo:function(t){var e,r=this;if(r.layersStyles=r.layersStyles||{},e=r.layersStyles[t])return e;if(!r.layersInfo)return{};var n=r.layersInfo[t];if(!n)return null;switch(e={layerIndex:n.layerIndex,ugcLayerType:n.ugcLayerType},n.ugcLayerType){case"VECTOR":e.layerStyle=n.style?n.style:null;break;case"THEME":var o=n.theme;e.layerStyle=o?o.defaultStyle:null,o&&"LABEL"===o.type&&(e.type=o.type,e.textField=o.labelExpression);break;default:n.style&&(e.layerStyle=n.style)}return r.layersStyles[t]=e,e},getVectorStylesFromServer:function(){var t=this,e=dt.urlPathAppend(t.url,"tileFeature/vectorstyles");mn.get(wn.appendCredential(e),null,{timeout:t.options.timeout}).then(function(t){return t.json()}).then(function(e){if(!e||!e.style)return null;e.style&&"cartoCSS"===e.type&&t.setServerCartoCSS(e.style),t.options&&t.setClientCartoCSS(t.options.cartoCSS),t._initGrid()}).catch(function(t){console.error("error",t)})},setServerCartoCSS:function(t){this.cartoCSSToLeaflet.pretreatedCartoCSS(t,!0)},setClientCartoCSS:function(t){var e=!1;this.options.processCharacters&&(e=this.options.processCharacters),this.cartoCSSToLeaflet.pretreatedCartoCSS(t,e)},getVectorTileLayerStyle:function(t,e){if(!e)return null;var r=this,n=e.layerName,o=r.getLayerStyleInfo(n);if(o&&o.textField){var i=o.textField;if(i&&i.indexOf(".")){var a=i.split(".");i=a&&a.length>0&&a[a.length-1]}e.properties.textField=i}r.vectorTileLayerStyles=r.vectorTileLayerStyles||{};var s=r.vectorTileLayerStyles[n];if(s)return e=this._mergeFeatureTextField(e,s),s;var l=this.getScaleFromCoords(t),u=this.cartoCSSToLeaflet.pickShader(n)||[];for(var c in s=[],u)for(var f=u[c],h=0;h<f.length;h++){var p=this.cartoCSSToLeaflet.getValidStyleFromCarto(t.z,l,f[h],e,this.options.serverCartoCSSStyle);p&&s.push(p)}return"TEXT"!==(e=this._mergeFeatureTextField(e,s)).type&&0!==s.length||(s=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(e,o),"TEXT"===e.type&&(s.textName="["+e.properties.textField+"]")),r.vectorTileLayerStyles[n]=s,s},getScale:function(t){var e=t||this._map.getZoom();return this.scales[e]},getScaleFromCoords:function(t){var e,r=this;return r.scales&&r.scales[t.z]?r.scales[t.z]:(r.scales=r.scales||{},e=r.getDefaultScale(t),r.scales[t.z]=e,e)},getDefaultScale:function(t){var e=this._crs;if(e.scales)return e.scales[t.z];var r=this._tileCoordsToBounds(t),n=e.project(r.getNorthEast()),o=e.project(r.getSouthWest()),i=this.options.tileSize,a=Math.max(Math.abs(n.x-o.x)/i,Math.abs(n.y-o.y)/i),s=c.METER;if(e.code){var l=e.code.split(":");if(l&&l.length>1){var u=parseInt(l[1]);s=u&&u>=4e3&&u<=5e3?c.DEGREE:c.METER}}return EG(a,96,s)},_mergeFeatureTextField:function(t,e){if(!this.options.serverCartoCSSStyle||!e||"TEXT"!==t.type)return t;var r=e;wI().Util.isArray(e)||(r=[e]);for(var n=0;n<r.length;n++){var o=r[n].textName;o&&t.properties&&(t.properties.textField=o.substring(1,o.length-1))}return t},_getTileUrl:function(t){return this.options.tileTemplate?this._getTileTemplateUrl(t):this._getDefaultTileUrl(t)},_getTileTemplateUrl:function(t){var e=this,r=e.options.tileTemplate,n={s:e._getSubdomain(t),x:t.x,y:t.y,z:t.z};if(e._map&&!e._map.options.crs.infinite){var o=e._globalTileRange.max.y-t.y;e.options.tms&&(n.y=o),n["-y"]=o}return wI().Util.template(r,wI().extend(n,e.options))},_initGrid:function(){Mz.prototype.onAdd.call(this,this._map)},_getSubdomain:wI().TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(t){var e=t.x,r=t.y,n=this._tileUrl+"&x="+e+"&y="+r;return n+="&scale="+this.getScaleFromCoords(t)},_initLayerUrl:function(){var t=this.options;if(this.url){var e=t.format.toString().toLowerCase();this._tileUrl=dt.urlPathAppend(this.url,"tileFeature."+e),this._tileUrl=dt.urlAppend(this._tileUrl,encodeURI(this._createURLParam(t)))}},_createURLParam:function(t){var e=[],r=this._getCredential(this._tileUrl);if(r&&e.push(r),t.layersID&&e.push("layersID="+t.layersID),t.layerNames){wI().Util.isArray(t.layerNames)||(t.layerNames=[t.layerNames]);var n="["+t.layerNames.join(",")+"]";e.push("layerNames="+n)}var o=this._crs;if(o.options&&o.options.origin)e.push("origin="+JSON.stringify({x:o.options.origin[0],y:o.options.origin[1]}));else if(o.projection&&o.projection.bounds){var i=o.projection.bounds,a=wI().point(i.min.x,i.max.y);e.push("origin="+JSON.stringify({x:a.x,y:a.y}))}t.expands&&e.push("expands="+t.expands),e.push("returnAttributes="+t.returnAttributes),e.push("cacheEnabled="+t.cacheEnabled);var s=this.options.tileSize;return e.push("width="+s),e.push("height="+s),e.join("&")},_getCredential:function(t){var e=wn.getToken(t),r=e?new Ge(e,"token")||new Ge(e,"key"):null;return r?r.getUrlParameters():null}}),Lz=function(){try{return turf}catch(t){return{}}}(),Nz=wI().GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},options:{attribution:rG.Turf.attribution},initialize:function(t){t=t||{},wI().Util.setOptions(this,t),wI().stamp(this),this._layers={}},turfOptionMap:{"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},process:function(t,e,r,n){var o;try{o=Lz[t.split(".")[1]].apply(this,this.parse(t,e))}catch(r){o=Lz[t.split(".")[1]].apply(this,this.parseOption(t,e))}(n=null==n||n)&&this.addData([o]),r&&r(o)},parse:function(t,e){if("Transformation.union"===t)return e.A;var r=[],n=this.turfMap[t];return n&&n.map(function(t){return r.push(e[t]),e[t]}),r},parseOption:function(t,e){var r=[];return this.turfOptionMap[t].map(function(t){if(t instanceof Object){var n=t;Object.keys(n).forEach(function(t){n[t]=e[t]}),r.push(n)}else r.push(e[t]);return e}),r}}),Iz=wI().Class.extend({initialize:function(t,e){this.geometry=t,this.attributes=e},toFeature:function(){var t=this.geometry,e=[];if(t instanceof wI().LatLng)e=[t.lng,t.lat];else if(t instanceof wI().Point)e=[t.x,t.y];else if(t instanceof wI().CircleMarker){var r=t.getLatLng();e=[r.lng,r.lat]}else e=t;return 2===e.length&&(t=new Wt(e[0],e[1])),new Ar(t,this.attributes)}}),Dz=wI().Layer.extend({options:{alwaysMapCRS:!1,id:dt.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:rG.Common.attribution},initialize:function(t,e){wI().Util.setOptions(this,e),this.name=t,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.blur=this.options.blur,this.movingOffset=[0,0]},onRemove:function(t){wI().DomUtil.remove(this.rootCanvas),t.off("mousemove",this.mouseMoveHandler)},onAdd:function(t){var e=this;if(e._map=t,e._createCanvasContainer(),e.rootCanvas){var r=t.getSize();e.rootCanvas.width=e.maxWidth=r.x,e.rootCanvas.height=e.maxHeight=r.y,e._updateOpacity(),e.mouseMoveHandler=function(t){var r=t.layerPoint;e.currentMousePosition=wI().point(r.x+e.movingOffset[0],r.y+e.movingOffset[1])},t.on("mousemove",e.mouseMoveHandler),e.update()}else t.removeLayer(e)},addFeatures:function(t){this.features=this.toiClientFeature(t),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var t=this._map.getBounds();this.updateHeatPoints(t)}},updateHeatPoints:function(t){this.features&&this.features.length>0?this.convertFastToPixelPoints(t):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(t){var e,r,n,o,i,a,s,l=[],u=t.getEast()-t.getWest(),c=t.getNorth()-t.getSouth(),f=this._map.getSize();o=u/f.x>c/f.y?u/f.x:c/f.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/o):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],y=p.geometry,d=this.getLocalXY(new gt(y.x,y.y));this.featureWeight?(d.weight=p.attributes[this.featureWeight],this.maxWeight||(i=i||d.weight,a=a||d.weight,i=Math.max(i,d.weight),a=Math.min(a,d.weight))):d.weight=1,e=Math.floor(d[0]),r=Math.floor(d[1]),n=d.weight,l.push([e,r,n])}this.maxWeight?this.draw(l,this.maxWeight):(s=i&&a?(i+a)/2:1,this.draw(l,s))},draw:function(t,e){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var r=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var n=0;n<t.length;n++){var o=t[n];this.canvasContext.globalAlpha=Math.max(o[2]/e,.05),this.canvasContext.drawImage(this.circle,o[0]-this.useRadius,o[1]-this.useRadius)}var i=r.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(i.data,this.grad),r.putImageData(i,0,0)},colorize:function(t,e){for(var r,n=0;n<t.length;n+=4)(r=4*t[n+3])&&(t[n]=e[r],t[n+1]=e[r+1],t[n+2]=e[r+2])},drawCircle:function(t){var e=this.blur||t/2,r=this.circle=document.createElement("canvas"),n=r.getContext("2d");r.height=2*t,r.width=2*t,n.shadowOffsetX=n.shadowOffsetY=2*t,n.shadowBlur=e,n.shadowColor="#000000",n.beginPath(),n.arc(-t,-t,t/2,0,2*Math.PI,!0),n.closePath(),n.fill()},createGradient:function(){var t=this.colors,e=document.createElement("canvas"),r=e.getContext("2d"),n=r.createLinearGradient(0,0,0,256);e.height=256,e.width=1;for(var o=1,i=0,a=t.length;i<a;i++)n.addColorStop(o/a,t[i]),o++;r.fillStyle=n,r.fillRect(0,0,1,256),this.grad=r.getImageData(0,0,1,256).data},update:function(){var t=this._map.containerPointToLayerPoint([0,0]);wI().DomUtil.setPosition(this.rootCanvas,t);var e=this;e.refresh(),e.currentMousePosition&&(e.currentMousePosition=wI().point(e.currentMousePosition.x-e.movingOffset[0],e.currentMousePosition.y-e.movingOffset[1])),e.movingOffset=[0,0],e._zoom=e._map.getZoom(),e._center=e._map.getCenter()},getLocalXY:function(t){if(!this._map)return t;var e=t;wI().Util.isArray(t)&&(e=wI().point(t[0],t[1])),t instanceof wI().Point||(e=t instanceof Wt||t instanceof se?wI().point(t.x,t.y):wI().point(t.lon,t.lat));var r=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(e):wI().latLng(e.y,e.x));return[r.x,r.y]},setOpacity:function(t){t!==this.options.opacity&&(t&&(this.options.opacity=t),this._updateOpacity())},removeFeatures:function(t){if(t&&0!==t.length&&this.features&&0!==this.features.length){if(t===this.features)return this.removeAllFeatures();dt.isArray(t)||(t=[t]);for(var e,r,n=[],o=0,i=t.length;o<i;o++)e=t[o],-1!==(r=dt.indexOf(this.features,e))?this.features.splice(r,1):n.push(e);var a=0==n.length;this._map.fire("featuresremoved",{features:n,succeed:a}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var t=this.getPane(),e="heatMapLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&wI().Browser.any3d?"animated":"hide");this.rootCanvas=wI().DomUtil.create("canvas",e,t);var r=wI().DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[r]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,dt.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){var t=this;dt.modifyDOMElement(t.rootCanvas,null,null,null,null,null,null,t.options.opacity),null!==t._map&&t._map.fire("changelayer",{layer:t,property:"opacity"})},getEvents:function(){var t={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(t.zoomanim=this._zoomAnim),t},toiClientFeature:function(t){wI().Util.isArray(t)||(t=[t]);for(var e=[],r=0,n=t.length;r<n;r++)if(t[r]instanceof Iz)e.push(t[r].toFeature());else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(t[r].type)){var o=new Hr;e=e.concat(o.read(t[r]))}else{if(!t[r].geometry||!t[r].geometry.parts)throw new Error("Features's type does not match, please check.");e.push(RO.fromJson(t[r]).toFeature())}return e},_zoomAnim:function(t){var e=this._map.getZoomScale(t.zoom),r=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());wI().DomUtil.setTransform?wI().DomUtil.setTransform(this.rootCanvas,r,e):this.rootCanvas.style[wI().DomUtil.TRANSFORM]=wI().DomUtil.getTranslateString(r)+" scale("+e+")"},_reset:function(){var t=this;t.update();var e=t._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);wI().DomUtil.setPosition(this.rootCanvas,r),parseFloat(t.rootCanvas.width)!==parseFloat(e.x)&&(t.rootCanvas.width=e.x),parseFloat(t.rootCanvas.height)!==parseFloat(e.y)&&(t.rootCanvas.height=e.y),t.refresh()},_resize:function(){var t=this._map.getSize();this.maxWidth=t.x,this.maxHeight=t.y}}),Fz=r(3861),Bz=r.n(Fz);!function(t){t[t.Unknown=0]="Unknown",t[t.Point=1]="Point",t[t.LineString=2]="LineString",t[t.Polygon=3]="Polygon",t[t.MultiPoint=4]="MultiPoint",t[t.MultiLineString=5]="MultiLineString",t[t.MultiPolygon=6]="MultiPolygon",t[t.GeometryCollection=7]="GeometryCollection",t[t.CircularString=8]="CircularString",t[t.CompoundCurve=9]="CompoundCurve",t[t.CurvePolygon=10]="CurvePolygon",t[t.MultiCurve=11]="MultiCurve",t[t.MultiSurface=12]="MultiSurface",t[t.Curve=13]="Curve",t[t.Surface=14]="Surface",t[t.PolyhedralSurface=15]="PolyhedralSurface",t[t.TIN=16]="TIN",t[t.Triangle=17]="Triangle"}(wz||(wz={}));var Gz,Uz=new Int32Array(2),zz=new Float32Array(Uz.buffer),Vz=new Float64Array(Uz.buffer),Jz=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];function qz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(Gz||(Gz={}));var Hz=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bytes_=e,this.position_=0}var e,r,n;return e=t,n=[{key:"allocate",value:function(e){return new t(new Uint8Array(e))}}],(r=[{key:"clear",value:function(){this.position_=0}},{key:"bytes",value:function(){return this.bytes_}},{key:"position",value:function(){return this.position_}},{key:"setPosition",value:function(t){this.position_=t}},{key:"capacity",value:function(){return this.bytes_.length}},{key:"readInt8",value:function(t){return this.readUint8(t)<<24>>24}},{key:"readUint8",value:function(t){return this.bytes_[t]}},{key:"readInt16",value:function(t){return this.readUint16(t)<<16>>16}},{key:"readUint16",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8}},{key:"readInt32",value:function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}},{key:"readUint32",value:function(t){return this.readInt32(t)>>>0}},{key:"readInt64",value:function(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readUint64",value:function(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}},{key:"readFloat32",value:function(t){return Uz[0]=this.readInt32(t),zz[0]}},{key:"readFloat64",value:function(t){return Uz[Jz?0:1]=this.readInt32(t),Uz[Jz?1:0]=this.readInt32(t+4),Vz[0]}},{key:"writeInt8",value:function(t,e){this.bytes_[t]=e}},{key:"writeUint8",value:function(t,e){this.bytes_[t]=e}},{key:"writeInt16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeUint16",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}},{key:"writeInt32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeUint32",value:function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}},{key:"writeInt64",value:function(t,e){this.writeInt32(t,Number(BigInt.asIntN(32,e))),this.writeInt32(t+4,Number(BigInt.asIntN(32,e>>BigInt(32))))}},{key:"writeUint64",value:function(t,e){this.writeUint32(t,Number(BigInt.asUintN(32,e))),this.writeUint32(t+4,Number(BigInt.asUintN(32,e>>BigInt(32))))}},{key:"writeFloat32",value:function(t,e){zz[0]=e,this.writeInt32(t,Uz[0])}},{key:"writeFloat64",value:function(t,e){Vz[0]=e,this.writeInt32(t,Uz[Jz?0:1]),this.writeInt32(t+4,Uz[Jz?1:0])}},{key:"getBufferIdentifier",value:function(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}},{key:"__offset",value:function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0}},{key:"__union",value:function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}},{key:"__string",value:function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",o=0;if(t+=4,e===Gz.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;o<r;){var i=void 0,a=this.readUint8(t+o++);if(a<192)i=a;else{var s=this.readUint8(t+o++);if(a<224)i=(31&a)<<6|63&s;else{var l=this.readUint8(t+o++);if(a<240)i=(15&a)<<12|(63&s)<<6|63&l;else i=(7&a)<<18|(63&s)<<12|(63&l)<<6|63&this.readUint8(t+o++)}}i<65536?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296+(i>>10),56320+(1023&i)))}return n}},{key:"__union_with_string",value:function(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}},{key:"__indirect",value:function(t){return t+this.readInt32(t)}},{key:"__vector",value:function(t){return t+this.readInt32(t)+4}},{key:"__vector_len",value:function(t){return this.readInt32(t+this.readInt32(t))}},{key:"__has_identifier",value:function(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(var e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}},{key:"createScalarList",value:function(t,e){for(var r=[],n=0;n<e;++n)null!==t(n)&&r.push(t(n));return r}},{key:"createObjList",value:function(t,e){for(var r=[],n=0;n<e;++n){var o=t(n);null!==o&&r.push(o.unpack())}return r}}])&&qz(e.prototype,r),n&&qz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Wz(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Yz,Xz=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsGeometry",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsGeometry",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startGeometry",value:function(t){t.startObject(8)}},{key:"addEnds",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"createEndsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addInt32(e[r]);return t.endVector()}},{key:"startEndsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addXy",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createXyVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startXyVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addZ",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createZVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startZVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addM",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"createMVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startMVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addT",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"createTVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startTVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addTm",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"createTmVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addInt64(e[r]);return t.endVector()}},{key:"startTmVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addType",value:function(t,e){t.addFieldInt8(6,e,wz.Unknown)}},{key:"addParts",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createPartsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startPartsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endGeometry",value:function(t){return t.endObject()}},{key:"createGeometry",value:function(e,r,n,o,i,a,s,l,u){return t.startGeometry(e),t.addEnds(e,r),t.addXy(e,n),t.addZ(e,o),t.addM(e,i),t.addT(e,a),t.addTm(e,s),t.addType(e,l),t.addParts(e,u),t.endGeometry(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"ends",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.readUint32(this.bb.__vector(this.bb_pos+e)+4*t):0}},{key:"endsLength",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"endsArray",value:function(){var t=this.bb.__offset(this.bb_pos,4);return t?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"xy",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"xyLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"xyArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"z",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"zLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"zArray",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"m",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"mLength",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"mArray",value:function(){var t=this.bb.__offset(this.bb_pos,10);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"t",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"tLength",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"tArray",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"tm",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.readUint64(this.bb.__vector(this.bb_pos+e)+8*t):BigInt(0)}},{key:"tmLength",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readUint8(this.bb_pos+t):wz.Unknown}},{key:"parts",value:function(e,r){var n=this.bb.__offset(this.bb_pos,18);return n?(r||new t).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*e),this.bb):null}},{key:"partsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&Wz(e.prototype,r),n&&Wz(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function Qz(t,e){for(var r=[],n=0;n<t.length;n+=2){var o=[t[n],t[n+1]];e&&o.push(e[n>>1]),r.push(o)}return r}function Zz(t,e,r){if(!r||0===r.length)return[Qz(t,e)];var n,o=0,i=Array.from(r).map(function(e){return t.slice(o,o=e<<1)});return e&&(o=0,n=Array.from(r).map(function(t){return e.slice(o,o=t)})),i.map(function(t,e){return Qz(t,n?n[e]:void 0)})}function Kz(t,e){var r=e;if(r===wz.Unknown&&(r=t.type()),r===wz.GeometryCollection){for(var n=[],o=0;o<t.partsLength();o++){var i=t.parts(o),a=i.type();n.push(Kz(i,a))}return{type:wz[r],geometries:n}}if(r===wz.MultiPolygon){for(var s=[],l=0;l<t.partsLength();l++)s.push(Kz(t.parts(l),wz.Polygon));return{type:wz[r],coordinates:s.map(function(t){return t.coordinates})}}var u=function(t,e){var r=t.xyArray(),n=t.zArray();switch(e){case wz.Point:var o=Array.from(r);return n&&o.push(n[0]),o;case wz.MultiPoint:case wz.LineString:return Qz(r,n);case wz.MultiLineString:case wz.Polygon:return Zz(r,n,t.endsArray())}}(t,r);return{type:wz[r],coordinates:u}}function $z(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}!function(t){t[t.Byte=0]="Byte",t[t.UByte=1]="UByte",t[t.Bool=2]="Bool",t[t.Short=3]="Short",t[t.UShort=4]="UShort",t[t.Int=5]="Int",t[t.UInt=6]="UInt",t[t.Long=7]="Long",t[t.ULong=8]="ULong",t[t.Float=9]="Float",t[t.Double=10]="Double",t[t.String=11]="String",t[t.Json=12]="Json",t[t.DateTime=13]="DateTime",t[t.Binary=14]="Binary"}(Yz||(Yz={}));var tV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsColumn",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsColumn",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startColumn",value:function(t){t.startObject(11)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addType",value:function(t,e){t.addFieldInt8(1,e,Yz.Byte)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWidth",value:function(t,e){t.addFieldInt32(4,e,-1)}},{key:"addPrecision",value:function(t,e){t.addFieldInt32(5,e,-1)}},{key:"addScale",value:function(t,e){t.addFieldInt32(6,e,-1)}},{key:"addNullable",value:function(t,e){t.addFieldInt8(7,+e,1)}},{key:"addUnique",value:function(t,e){t.addFieldInt8(8,+e,0)}},{key:"addPrimaryKey",value:function(t,e){t.addFieldInt8(9,+e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"endColumn",value:function(t){var e=t.endObject();return t.requiredField(e,4),e}},{key:"createColumn",value:function(e,r,n,o,i,a,s,l,u,c,f,h){return t.startColumn(e),t.addName(e,r),t.addType(e,n),t.addTitle(e,o),t.addDescription(e,i),t.addWidth(e,a),t.addPrecision(e,s),t.addScale(e,l),t.addNullable(e,u),t.addUnique(e,c),t.addPrimaryKey(e,f),t.addMetadata(e,h),t.endColumn(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"type",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):Yz.Byte}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"width",value:function(){var t=this.bb.__offset(this.bb_pos,12);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"precision",value:function(){var t=this.bb.__offset(this.bb_pos,14);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"scale",value:function(){var t=this.bb.__offset(this.bb_pos,16);return t?this.bb.readInt32(this.bb_pos+t):-1}},{key:"nullable",value:function(){var t=this.bb.__offset(this.bb_pos,18);return!t||!!this.bb.readInt8(this.bb_pos+t)}},{key:"unique",value:function(){var t=this.bb.__offset(this.bb_pos,20);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"primaryKey",value:function(){var t=this.bb.__offset(this.bb_pos,22);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&$z(e.prototype,r),n&&$z(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function eV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var rV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsFeature",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsFeature",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startFeature",value:function(t){t.startObject(3)}},{key:"addGeometry",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addProperties",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createPropertiesVector",value:function(t,e){t.startVector(1,e.length,1);for(var r=e.length-1;r>=0;r--)t.addInt8(e[r]);return t.endVector()}},{key:"startPropertiesVector",value:function(t,e){t.startVector(1,e,1)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"endFeature",value:function(t){return t.endObject()}},{key:"finishFeatureBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedFeatureBuffer",value:function(t,e){t.finish(e,void 0,!0)}},{key:"createFeature",value:function(e,r,n,o){return t.startFeature(e),t.addGeometry(e,r),t.addProperties(e,n),t.addColumns(e,o),t.endFeature(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"geometry",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?(t||new Xz).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"properties",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readUint8(this.bb.__vector(this.bb_pos+e)+t):0}},{key:"propertiesLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"propertiesArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,8);return r?(e||new tV).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}}])&&eV(e.prototype,r),n&&eV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),nV=(new TextEncoder,new TextDecoder);function oV(t,e){var r={};if(!e||0===e.length)return r;var n=t.propertiesArray();if(!n)return r;for(var o=new DataView(n.buffer,n.byteOffset),i=t.propertiesLength(),a=0;a<i;){var s=o.getUint16(a,!0);a+=2;var l=e[s],u=l.name;switch(l.type){case Yz.Bool:r[u]=!!o.getUint8(a),a+=1;break;case Yz.Byte:r[u]=o.getInt8(a),a+=1;break;case Yz.UByte:r[u]=o.getUint8(a),a+=1;break;case Yz.Short:r[u]=o.getInt16(a,!0),a+=2;break;case Yz.UShort:r[u]=o.getUint16(a,!0),a+=2;break;case Yz.Int:r[u]=o.getInt32(a,!0),a+=4;break;case Yz.UInt:r[u]=o.getUint32(a,!0),a+=4;break;case Yz.Long:r[u]=Number(o.getBigInt64(a,!0)),a+=8;break;case Yz.ULong:r[u]=Number(o.getBigUint64(a,!0)),a+=8;break;case Yz.Float:r[u]=o.getFloat32(a,!0),a+=4;break;case Yz.Double:r[u]=o.getFloat64(a,!0),a+=8;break;case Yz.DateTime:case Yz.String:var c=o.getUint32(a,!0);a+=4,r[u]=nV.decode(n.subarray(a,a+c)),a+=c;break;case Yz.Json:var f=o.getUint32(a,!0);a+=4;var h=nV.decode(n.subarray(a,a+f));r[u]=JSON.parse(h),a+=f;break;default:throw new Error("Unknown type "+l.type)}}return r}function iV(t,e){var r=e.columns;return{type:"Feature",geometry:Kz(t.geometry(),e.geometryType),properties:oV(t,r)}}var aV=new Uint8Array(0);function sV(t){this._source=t,this._array=aV,this._index=0}function lV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}sV.prototype.read=function(){var t=this,e=t._array.subarray(t._index);return t._source.read().then(function(r){return t._array=aV,t._index=0,r.done?e.length>0?{done:!1,value:e}:{done:!0,value:void 0}:{done:!1,value:function(t,e){if(!t.length)return e;if(!e.length)return t;var r=new Uint8Array(t.length+e.length);return r.set(t),r.set(e,t.length),r}(e,r.value)}})},sV.prototype.slice=function(t){if((t|=0)<0)throw new Error("invalid length");var e=this,r=this._array.length-this._index;if(this._index+t<=this._array.length)return Promise.resolve(this._array.subarray(this._index,this._index+=t));var n=new Uint8Array(t);return n.set(this._array.subarray(this._index)),function o(){return e._source.read().then(function(i){return i.done?(e._array=aV,e._index=0,r>0?n.subarray(0,r):null):r+i.value.length>=t?(e._array=i.value,e._index=t-r,n.set(i.value.subarray(0,t-r),r),n):(n.set(i.value,r),r+=i.value.length,o())})}()},sV.prototype.cancel=function(){return this._source.cancel()};var uV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsCrs",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsCrs",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startCrs",value:function(t){t.startObject(6)}},{key:"addOrg",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addCode",value:function(t,e){t.addFieldInt32(1,e,0)}},{key:"addName",value:function(t,e){t.addFieldOffset(2,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(3,e,0)}},{key:"addWkt",value:function(t,e){t.addFieldOffset(4,e,0)}},{key:"addCodeString",value:function(t,e){t.addFieldOffset(5,e,0)}},{key:"endCrs",value:function(t){return t.endObject()}},{key:"createCrs",value:function(e,r,n,o,i,a,s){return t.startCrs(e),t.addOrg(e,r),t.addCode(e,n),t.addName(e,o),t.addDescription(e,i),t.addWkt(e,a),t.addCodeString(e,s),t.endCrs(e)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"org",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"code",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"wkt",value:function(t){var e=this.bb.__offset(this.bb_pos,12);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"codeString",value:function(t){var e=this.bb.__offset(this.bb_pos,14);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&lV(e.prototype,r),n&&lV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function cV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var fV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bb=null,this.bb_pos=0}var e,r,n;return e=t,n=[{key:"getRootAsHeader",value:function(e,r){return(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"getSizePrefixedRootAsHeader",value:function(e,r){return e.setPosition(e.position()+4),(r||new t).__init(e.readInt32(e.position())+e.position(),e)}},{key:"startHeader",value:function(t){t.startObject(14)}},{key:"addName",value:function(t,e){t.addFieldOffset(0,e,0)}},{key:"addEnvelope",value:function(t,e){t.addFieldOffset(1,e,0)}},{key:"createEnvelopeVector",value:function(t,e){t.startVector(8,e.length,8);for(var r=e.length-1;r>=0;r--)t.addFloat64(e[r]);return t.endVector()}},{key:"startEnvelopeVector",value:function(t,e){t.startVector(8,e,8)}},{key:"addGeometryType",value:function(t,e){t.addFieldInt8(2,e,wz.Unknown)}},{key:"addHasZ",value:function(t,e){t.addFieldInt8(3,+e,0)}},{key:"addHasM",value:function(t,e){t.addFieldInt8(4,+e,0)}},{key:"addHasT",value:function(t,e){t.addFieldInt8(5,+e,0)}},{key:"addHasTm",value:function(t,e){t.addFieldInt8(6,+e,0)}},{key:"addColumns",value:function(t,e){t.addFieldOffset(7,e,0)}},{key:"createColumnsVector",value:function(t,e){t.startVector(4,e.length,4);for(var r=e.length-1;r>=0;r--)t.addOffset(e[r]);return t.endVector()}},{key:"startColumnsVector",value:function(t,e){t.startVector(4,e,4)}},{key:"addFeaturesCount",value:function(t,e){t.addFieldInt64(8,e,BigInt("0"))}},{key:"addIndexNodeSize",value:function(t,e){t.addFieldInt16(9,e,16)}},{key:"addCrs",value:function(t,e){t.addFieldOffset(10,e,0)}},{key:"addTitle",value:function(t,e){t.addFieldOffset(11,e,0)}},{key:"addDescription",value:function(t,e){t.addFieldOffset(12,e,0)}},{key:"addMetadata",value:function(t,e){t.addFieldOffset(13,e,0)}},{key:"endHeader",value:function(t){return t.endObject()}},{key:"finishHeaderBuffer",value:function(t,e){t.finish(e)}},{key:"finishSizePrefixedHeaderBuffer",value:function(t,e){t.finish(e,void 0,!0)}}],(r=[{key:"__init",value:function(t,e){return this.bb_pos=t,this.bb=e,this}},{key:"name",value:function(t){var e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"envelope",value:function(t){var e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readFloat64(this.bb.__vector(this.bb_pos+e)+8*t):0}},{key:"envelopeLength",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"envelopeArray",value:function(){var t=this.bb.__offset(this.bb_pos,6);return t?new Float64Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}},{key:"geometryType",value:function(){var t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):wz.Unknown}},{key:"hasZ",value:function(){var t=this.bb.__offset(this.bb_pos,10);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasM",value:function(){var t=this.bb.__offset(this.bb_pos,12);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasT",value:function(){var t=this.bb.__offset(this.bb_pos,14);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"hasTm",value:function(){var t=this.bb.__offset(this.bb_pos,16);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}},{key:"columns",value:function(t,e){var r=this.bb.__offset(this.bb_pos,18);return r?(e||new tV).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+4*t),this.bb):null}},{key:"columnsLength",value:function(){var t=this.bb.__offset(this.bb_pos,18);return t?this.bb.__vector_len(this.bb_pos+t):0}},{key:"featuresCount",value:function(){var t=this.bb.__offset(this.bb_pos,20);return t?this.bb.readUint64(this.bb_pos+t):BigInt("0")}},{key:"indexNodeSize",value:function(){var t=this.bb.__offset(this.bb_pos,22);return t?this.bb.readUint16(this.bb_pos+t):16}},{key:"crs",value:function(t){var e=this.bb.__offset(this.bb_pos,24);return e?(t||new uV).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}},{key:"title",value:function(t){var e=this.bb.__offset(this.bb_pos,26);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"description",value:function(t){var e=this.bb.__offset(this.bb_pos,28);return e?this.bb.__string(this.bb_pos+e,t):null}},{key:"metadata",value:function(t){var e=this.bb.__offset(this.bb_pos,30);return e?this.bb.__string(this.bb_pos+e,t):null}}])&&cV(e.prototype,r),n&&cV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function hV(t){for(var e=fV.getRootAsHeader(t),r=e.featuresCount(),n=e.indexNodeSize(),o=[],i=0;i<e.columnsLength();i++){var a=e.columns(i);if(!a)throw new Error("Column unexpectedly missing");if(!a.name())throw new Error("Column name unexpectedly missing");o.push({name:a.name(),type:a.type(),title:a.title(),description:a.description(),width:a.width(),precision:a.precision(),scale:a.scale(),nullable:a.nullable(),unique:a.unique(),primary_key:a.primaryKey()})}var s=e.crs(),l=s?{org:s.org(),code:s.code(),name:s.name(),description:s.description(),wkt:s.wkt(),code_string:s.codeString()}:null;return{geometryType:e.geometryType(),columns:o,envelope:null,featuresCount:Number(r),indexNodeSize:n,crs:l,title:e.title(),description:e.description(),metadata:e.metadata()}}var pV=function(t,e){return(pV=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function yV(t,e,r,n){return new(r||(r=Promise))(function(o,i){function a(t){try{l(n.next(t))}catch(t){i(t)}}function s(t){try{l(n.throw(t))}catch(t){i(t)}}function l(t){var e;t.done?o(t.value):(e=t.value,e instanceof r?e:new r(function(t){t(e)})).then(a,s)}l((n=n.apply(t,e||[])).next())})}function dV(t,e){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(r)throw new TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=e.call(t,a)}catch(t){i=[6,t],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function bV(t){var e="function"==typeof Symbol&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function vV(t){return this instanceof vV?(this.v=t,this):new vV(t)}function mV(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(t,e||[]),i=[];return n={},a("next"),a("throw"),a("return"),n[Symbol.asyncIterator]=function(){return this},n;function a(t){o[t]&&(n[t]=function(e){return new Promise(function(r,n){i.push([t,e,r,n])>1||s(t,e)})})}function s(t,e){try{(r=o[t](e)).value instanceof vV?Promise.resolve(r.value.v).then(l,u):c(i[0][2],r)}catch(t){c(i[0][3],t)}var r}function l(t){s("next",t)}function u(t){s("throw",t)}function c(t,e){t(e),i.shift(),i.length&&s(i[0][0],i[0][1])}}var gV=function(t){function e(e){var r=t.call(this,e)||this;return Object.defineProperty(r,"name",{value:"RepeaterOverflowError",enumerable:!1}),"function"==typeof Object.setPrototypeOf?Object.setPrototypeOf(r,r.constructor.prototype):r.__proto__=r.constructor.prototype,"function"==typeof Error.captureStackTrace&&Error.captureStackTrace(r,r.constructor),r}return function(t,e){function r(){this.constructor=t}pV(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}(e,t),e}(Error);(function(){function t(t){if(t<0)throw new RangeError("Capacity may not be less than 0");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return this._q.length>=this._c},enumerable:!1,configurable:!0}),t.prototype.add=function(t){if(this.full)throw new Error("Buffer full");this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}})(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){for(;this._q.length>=this._c;)this._q.shift();this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}(),function(){function t(t){if(t<1)throw new RangeError("Capacity may not be less than 1");this._c=t,this._q=[]}Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this._q.length},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"full",{get:function(){return!1},enumerable:!1,configurable:!0}),t.prototype.add=function(t){this._q.length<this._c&&this._q.push(t)},t.prototype.remove=function(){if(this.empty)throw new Error("Buffer empty");return this._q.shift()}}();function wV(t){null!=t&&"function"==typeof t.then&&t.then(kV,kV)}var _V=0,OV=1,SV=2,xV=3,PV=4,EV=1024,kV=function(){};function jV(t){var e=t.err,r=Promise.resolve(t.execution).then(function(t){if(null!=e)throw e;return t});return t.err=void 0,t.execution=r.then(function(){},function(){}),void 0===t.pending?r:t.pending.then(function(){return r})}function TV(t,e){var r=t.state>=xV;return Promise.resolve(e).then(function(e){return!r&&t.state>=PV?jV(t).then(function(t){return{value:t,done:!0}}):{value:e,done:r}})}function CV(t,e){var r,n;if(!(t.state>=SV))if(t.state=SV,t.onnext(),t.onstop(),null==t.err&&(t.err=e),0!==t.pushes.length||void 0!==t.buffer&&!t.buffer.empty)try{for(var o=bV(t.pushes),i=o.next();!i.done;i=o.next()){i.value.resolve()}}catch(t){r={error:t}}finally{try{i&&!i.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}else AV(t)}function AV(t){var e,r;if(!(t.state>=xV)){t.state<SV&&CV(t),t.state=xV,t.buffer=void 0;try{for(var n=bV(t.nexts),o=n.next();!o.done;o=n.next()){var i=o.value,a=void 0===t.pending?jV(t):t.pending.then(function(){return jV(t)});i.resolve(TV(t,a))}}catch(t){e={error:t}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}t.pushes=[],t.nexts=[]}}function MV(t){t.state>=PV||(t.state<xV&&AV(t),t.state=PV)}function RV(t){if(!(t.state>=OV)){t.state=OV;var e=function(t,e){if(wV(e),t.pushes.length>=EV)throw new gV("No more than "+EV+" pending calls to push are allowed on a single repeater.");if(t.state>=SV)return Promise.resolve(void 0);var r,n=void 0===t.pending?Promise.resolve(e):t.pending.then(function(){return e});n=n.catch(function(e){t.state<SV&&(t.err=e),MV(t)}),t.nexts.length?(t.nexts.shift().resolve(TV(t,n)),r=t.nexts.length?Promise.resolve(t.nexts[0].value):new Promise(function(e){return t.onnext=e})):void 0===t.buffer||t.buffer.full?r=new Promise(function(e){return t.pushes.push({resolve:e,value:n})}):(t.buffer.add(n),r=Promise.resolve(void 0));var o=!0,i={},a=r.catch(function(t){if(o)throw t});return i.then=function(t,e){return o=!1,Promise.prototype.then.call(r,t,e)},i.catch=function(t){return o=!1,Promise.prototype.catch.call(r,t)},i.finally=r.finally.bind(r),t.pending=n.then(function(){return a}).catch(function(e){t.err=e,MV(t)}),i}.bind(null,t),r=function(t){var e=CV.bind(null,t),r=new Promise(function(e){return t.onstop=e});return e.then=r.then.bind(r),e.catch=r.catch.bind(r),e.finally=r.finally.bind(r),e}(t);t.execution=new Promise(function(n){return n(t.executor(e,r))}),t.execution.catch(function(){return CV(t)})}}var LV=new WeakMap,NV=function(){function t(t,e){LV.set(this,{executor:t,buffer:e,err:void 0,state:_V,pushes:[],nexts:[],pending:void 0,execution:void 0,onnext:kV,onstop:kV})}return t.prototype.next=function(t){wV(t);var e=LV.get(this);if(void 0===e)throw new Error("WeakMap error");if(e.nexts.length>=EV)throw new gV("No more than "+EV+" pending calls to next are allowed on a single repeater.");if(e.state<=_V&&RV(e),e.onnext(t),void 0!==e.buffer&&!e.buffer.empty){var r=TV(e,e.buffer.remove());if(e.pushes.length){var n=e.pushes.shift();e.buffer.add(n.value),e.onnext=n.resolve}return r}if(e.pushes.length){var o=e.pushes.shift();return e.onnext=o.resolve,TV(e,o.value)}return e.state>=SV?(AV(e),TV(e,jV(e))):new Promise(function(r){return e.nexts.push({resolve:r,value:t})})},t.prototype.return=function(t){wV(t);var e=LV.get(this);if(void 0===e)throw new Error("WeakMap error");return AV(e),e.execution=Promise.resolve(e.execution).then(function(){return t}),TV(e,jV(e))},t.prototype.throw=function(t){var e=LV.get(this);if(void 0===e)throw new Error("WeakMap error");return e.state<=_V||e.state>=SV||void 0!==e.buffer&&!e.buffer.empty?(AV(e),null==e.err&&(e.err=t),TV(e,jV(e))):this.next(Promise.reject(t))},t.prototype[Symbol.asyncIterator]=function(){return this},t.race=DV,t.merge=FV,t.zip=BV,t.latest=GV,t}();function IV(t,e){var r,n,o=[],i=function(t){null!=t&&"function"==typeof t[Symbol.asyncIterator]?o.push(t[Symbol.asyncIterator]()):null!=t&&"function"==typeof t[Symbol.iterator]?o.push(t[Symbol.iterator]()):o.push(function(){return mV(this,arguments,function(){return dV(this,function(r){switch(r.label){case 0:return e.yieldValues?[4,vV(t)]:[3,3];case 1:return[4,r.sent()];case 2:r.sent(),r.label=3;case 3:return e.returnValues?[4,vV(t)]:[3,5];case 4:return[2,r.sent()];case 5:return[2]}})})}())};try{for(var a=bV(t),s=a.next();!s.done;s=a.next()){i(s.value)}}catch(t){r={error:t}}finally{try{s&&!s.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}function DV(t){var e=this,r=IV(t,{returnValues:!0});return new NV(function(t,n){return yV(e,void 0,void 0,function(){var e,o,i,a,s,l;return dV(this,function(u){switch(u.label){case 0:if(!r.length)return n(),[2];o=!1,n.then(function(){e(),o=!0}),u.label=1;case 1:u.trys.push([1,,5,7]),a=void 0,s=0,l=function(){var o,l,u,c,f,h;return dV(this,function(p){switch(p.label){case 0:o=s;try{for(f=void 0,l=bV(r),u=l.next();!u.done;u=l.next())c=u.value,Promise.resolve(c.next()).then(function(t){t.done?(n(),void 0===i&&(i=t)):s===o&&(s++,e(t))},function(t){return n(t)})}catch(t){f={error:t}}finally{try{u&&!u.done&&(h=l.return)&&h.call(l)}finally{if(f)throw f.error}}return[4,new Promise(function(t){return e=t})];case 1:return void 0===(a=p.sent())?[3,3]:[4,t(a.value)];case 2:p.sent(),p.label=3;case 3:return[2]}})},u.label=2;case 2:return o?[3,4]:[5,l()];case 3:return u.sent(),[3,2];case 4:return[2,i&&i.value];case 5:return n(),[4,Promise.race(r.map(function(t){return t.return&&t.return()}))];case 6:return u.sent(),[7];case 7:return[2]}})})})}function FV(t){var e=this,r=IV(t,{yieldValues:!0});return new NV(function(t,n){return yV(e,void 0,void 0,function(){var e,o,i,a=this;return dV(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2];e=[],o=!1,n.then(function(){var t,r;o=!0;try{for(var n=bV(e),i=n.next();!i.done;i=n.next()){(0,i.value)()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}),s.label=1;case 1:return s.trys.push([1,,3,4]),[4,Promise.all(r.map(function(r,s){return yV(a,void 0,void 0,function(){var a;return dV(this,function(l){switch(l.label){case 0:l.trys.push([0,,6,9]),l.label=1;case 1:return o?[3,5]:(Promise.resolve(r.next()).then(function(t){return e[s](t)},function(t){return n(t)}),[4,new Promise(function(t){e[s]=t})]);case 2:return void 0===(a=l.sent())?[3,4]:a.done?(i=a,[2]):[4,t(a.value)];case 3:l.sent(),l.label=4;case 4:return[3,1];case 5:return[3,9];case 6:return r.return?[4,r.return()]:[3,8];case 7:l.sent(),l.label=8;case 8:return[7];case 9:return[2]}})})}))];case 2:return s.sent(),[2,i&&i.value];case 3:return n(),[7];case 4:return[2]}})})})}function BV(t){var e=this,r=IV(t,{returnValues:!0});return new NV(function(t,n){return yV(e,void 0,void 0,function(){var e,o,i,a;return dV(this,function(s){switch(s.label){case 0:if(!r.length)return n(),[2,[]];o=!1,n.then(function(){e(),o=!0}),s.label=1;case 1:s.trys.push([1,,6,8]),s.label=2;case 2:return o?[3,5]:(Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})]);case 3:return void 0===(i=s.sent())?[2]:(a=i.map(function(t){return t.value}),i.some(function(t){return t.done})?[2,a]:[4,t(a)]);case 4:return s.sent(),[3,2];case 5:return[3,8];case 6:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 7:return s.sent(),[7];case 8:return[2]}})})})}function GV(t){var e=this,r=IV(t,{yieldValues:!0,returnValues:!0});return new NV(function(t,n){return yV(e,void 0,void 0,function(){var e,o,i,a,s,l=this;return dV(this,function(u){switch(u.label){case 0:if(!r.length)return n(),[2,[]];o=[],i=!1,n.then(function(){var t,r;e();try{for(var n=bV(o),a=n.next();!a.done;a=n.next()){(0,a.value)()}}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}i=!0}),u.label=1;case 1:return u.trys.push([1,,5,7]),Promise.all(r.map(function(t){return t.next()})).then(function(t){return e(t)},function(t){return n(t)}),[4,new Promise(function(t){return e=t})];case 2:return void 0===(a=u.sent())?[2]:(s=a.map(function(t){return t.value}),a.every(function(t){return t.done})?[2,s]:[4,t(s.slice())]);case 3:return u.sent(),[4,Promise.all(r.map(function(e,r){return yV(l,void 0,void 0,function(){var l;return dV(this,function(u){switch(u.label){case 0:if(a[r].done)return[2,a[r].value];u.label=1;case 1:return i?[3,4]:(Promise.resolve(e.next()).then(function(t){return o[r](t)},function(t){return n(t)}),[4,new Promise(function(t){return o[r]=t})]);case 2:return void 0===(l=u.sent())?[2,a[r].value]:l.done?[2,l.value]:(s[r]=l.value,[4,t(s.slice())]);case 3:return u.sent(),[3,1];case 4:return[2]}})})}))];case 4:return[2,u.sent()];case 5:return n(),[4,Promise.all(r.map(function(t){return t.return&&t.return()}))];case 6:return u.sent(),[7];case 7:return[2]}})})})}function UV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zV,VV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._extraRequestThreshold=262144}var e,r,n;return e=t,(r=[{key:"extraRequestThreshold",value:function(){return this._extraRequestThreshold}},{key:"setExtraRequestThreshold",value:function(t){if(t<0)throw new Error("extraRequestThreshold cannot be negative");this._extraRequestThreshold=t}}])&&UV(e.prototype,r),n&&UV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function JV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}VV.global=new VV,function(t){t[t.Debug=0]="Debug",t[t.Info=1]="Info",t[t.Warn=2]="Warn",t[t.Error=3]="Error"}(zV||(zV={}));var qV=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}var e,r,n;return e=t,n=[{key:"debug",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[zV.Debug].concat(e))}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[zV.Info].concat(e))}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[zV.Warn].concat(e))}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];this.log.apply(this,[zV.Error].concat(e))}},{key:"log",value:function(t){if(!(this.logLevel>t)){for(var e=arguments.length,r=new Array(e>1?e-1:0),n=1;n<e;n++)r[n-1]=arguments[n];switch(t){case zV.Debug:var o;(o=console).debug.apply(o,r);break;case zV.Info:var i;(i=console).info.apply(i,r);break;case zV.Warn:var a;(a=console).warn.apply(a,r);break;case zV.Error:var s;(s=console).error.apply(s,r)}}}}],(r=null)&&JV(e.prototype,r),n&&JV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}();function HV(t){"@babel/helpers - typeof";return(HV="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function WV(){WV=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==HV(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function YV(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||function(t,e){if(!t)return;if("string"==typeof t)return XV(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XV(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function XV(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function QV(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ZV(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function KV(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof $V;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===e?"return":"next";if(!a.k||r.done)return n(l,r);r=t[l](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function $V(t,e){this.v=t,this.k=e}qV.logLevel=zV.Info,KV.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},KV.prototype.next=function(t){return this._invoke("next",t)},KV.prototype.throw=function(t){return this._invoke("throw",t)},KV.prototype.return=function(t){return this._invoke("return",t)};var tJ=40;function eJ(t,e){e=Math.min(Math.max(+e,2),65535);var r=t,n=r;do{n+=r=Math.ceil(r/e)}while(1!==r);return n*tJ}function rJ(t,e){if(e<2)throw new Error("Node size must be at least 2");if(0===t)throw new Error("Number of items must be greater than 0");var r=t,n=r,o=[r];do{n+=r=Math.ceil(r/e),o.push(r)}while(1!==r);var i=[];r=n;for(var a=0,s=o;a<s.length;a++){var l=s[a];i.push(r-l),r-=l}i.reverse(),o.reverse();for(var u=[],c=0;c<o.length;c++)u.push([i[c],i[c]+o[c]]);return u.reverse(),u}function nJ(t,e,r,n){return oJ.apply(this,arguments)}function oJ(){var t;return t=WV().mark(function t(e,r,n,o){var i,a,s,l,u,c,f,h,p,y;return WV().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=function(){function t(e,r){QV(this,t),this._level=r,this.nodes=e}var e,r,n;return e=t,(r=[{key:"level",value:function(){return this._level}},{key:"startNode",value:function(){return this.nodes[0]}},{key:"endNode",value:function(){return this.nodes[1]}},{key:"extendEndNodeToNewOffset",value:function(t){console.assert(t>this.nodes[1]),this.nodes[1]=t}},{key:"toString",value:function(){return"[NodeRange level: ".concat(this._level,", nodes: ").concat(this.nodes[0],"-").concat(this.nodes[1],"]")}}])&&ZV(e.prototype,r),n&&ZV(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),a=n.minX,s=n.minY,l=n.maxX,u=n.maxY,qV.info("tree items: ".concat(e,", nodeSize: ").concat(r)),c=rJ(e,r),f=c[0][0],void 0,d=c.length-1,h=new i([0,1],d),p=[h],qV.debug("starting stream search with queue: ".concat(p,", numItems: ").concat(e,", nodeSize: ").concat(r,", levelBounds: ").concat(c)),y=WV().mark(function t(){var n,h,y,d,b,v,m,g,w,_,O,S;return WV().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=p.shift(),qV.debug("popped node: ".concat(n,", queueLength: ").concat(p.length)),h=n.startNode(),y=h>=f,d=YV(c[n.level()],2),b=d[1],v=Math.min(n.endNode()+r,b),m=v-h,t.next=9,new $V(o(h*tJ,m*tJ),0);case 9:g=t.sent,w=new Float64Array(g),_=new Uint32Array(g),O=WV().mark(function t(r){var o,c,d,b,v,m,g,O;return WV().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(l<w[(o=5*(r-h))+0])){t.next=3;break}return t.abrupt("return",0);case 3:if(!(u<w[o+1])){t.next=5;break}return t.abrupt("return",0);case 5:if(!(a>w[o+2])){t.next=7;break}return t.abrupt("return",0);case 7:if(!(s>w[o+3])){t.next=9;break}return t.abrupt("return",0);case 9:if(c=_[8+(o<<1)],d=_[9+(o<<1)],b=iJ(d,c),!y){t.next=17;break}return v=function(){if(r<e-1){var t=5*(r-h+1),n=_[8+(t<<1)];return iJ(_[9+(t<<1)],n)-b}return null}(),t.next=16,[b,r-f,v];case 16:return t.abrupt("return",0);case 17:if(m=VV.global.extraRequestThreshold()/tJ,!(void 0!==(g=p[p.length-1])&&g.level()==n.level()-1&&b<g.endNode()+m)){t.next=23;break}return qV.debug('Merging "nodeRange" request into existing range: '.concat(g,", newOffset: ").concat(g.endNode()," -> ").concat(b)),g.extendEndNodeToNewOffset(b),t.abrupt("return",0);case 23:void 0,S=n.level()-1,O=new i([b,b+1],S),void 0!==g&&g.level()==O.level()?qV.info("Same level, but too far away. Pushing new request at offset: ".concat(b," rather than merging with distant ").concat(g)):qV.info("Pushing new level for ".concat(O," onto queue with nearestNodeRange: ").concat(g," since there's not already a range for this level.")),p.push(O);case 26:case"end":return t.stop()}var S},t)}),S=h;case 14:if(!(S<v)){t.next=22;break}return t.delegateYield(O(S),"t0",16);case 16:if(0!==t.t0){t.next=19;break}return t.abrupt("continue",19);case 19:S++,t.next=14;break;case 22:case"end":return t.stop()}},t)});case 9:if(0==p.length){t.next=13;break}return t.delegateYield(y(),"t0",11);case 11:t.next=9;break;case 13:case"end":return t.stop()}var d},t)}),(oJ=function(){return new KV(t.apply(this,arguments))}).apply(this,arguments)}function iJ(t,e){if(0!=(4293918720&t))throw Error("integer is too large to be safely represented");return e+t*Math.pow(2,32)}var aJ=new Uint8Array([102,103,98,3,102,103,98,0]),sJ=4;function lJ(t){"@babel/helpers - typeof";return(lJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function uJ(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=fJ(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function cJ(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,o,i=[],a=!0,s=!1;try{for(r=r.call(t);!(a=(n=r.next()).done)&&(i.push(n.value),!e||i.length!==e);a=!0);}catch(t){s=!0,o=t}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}(t,e)||fJ(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fJ(t,e){if(t){if("string"==typeof t)return hJ(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?hJ(t,e):void 0}}function hJ(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function pJ(){pJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==lJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function yJ(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function dJ(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){yJ(i,n,o,a,s,"next",t)}function s(t){yJ(i,n,o,a,s,"throw",t)}a(void 0)})}}function bJ(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vJ(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mJ(t,e,r){return e&&vJ(t.prototype,e),r&&vJ(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gJ(t){return function(){return new wJ(t.apply(this,arguments))}}function wJ(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof SJ;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===e?"return":"next";if(!a.k||r.done)return n(l,r);r=t[l](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function _J(t){return new SJ(t,0)}function OJ(t){var e={},r=!1;function n(e,n){return r=!0,{done:!1,value:new SJ(n=new Promise(function(r){r(t[e](n))}),1)}}return e["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},e.next=function(t){return r?(r=!1,t):n("next",t)},"function"==typeof t.throw&&(e.throw=function(t){if(r)throw r=!1,t;return n("throw",t)}),"function"==typeof t.return&&(e.return=function(t){return r?(r=!1,t):n("return",t)}),e}function SJ(t,e){this.v=t,this.k=e}function xJ(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new PJ(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function PJ(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(PJ=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new PJ(t)}wJ.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},wJ.prototype.next=function(t){return this._invoke("next",t)},wJ.prototype.throw=function(t){return this._invoke("throw",t)},wJ.prototype.return=function(t){return this._invoke("return",t)};var EJ=function(){function t(e,r,n,o){bJ(this,t),this.headerClient=e,this.header=r,this.headerLength=n,this.indexLength=o}return mJ(t,[{key:"selectBbox",value:function(t){var e=this;return gJ(pJ().mark(function r(){var n,o,i,a,s,l,u,c,f,h,p,y,d,b,v,m,g,w,_;return pJ().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=e.lengthBeforeTree(),o=e.headerClient,i=function(){var t=dJ(pJ().mark(function t(e,r){var i;return pJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=0,t.abrupt("return",o.getRange(n+e,r,i,"index"));case 2:case"end":return t.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}(),a=[],s=[],l=!1,u=!1,r.prev=7,f=xJ(nJ(e.header.featuresCount,e.header.indexNodeSize,t,i));case 9:return r.next=11,_J(f.next());case 11:if(!(l=!(h=r.sent).done)){r.next=26;break}if(p=h.value,y=cJ(p,2),d=y[0],b=cJ(p,3),(v=b[2])||(qV.info("final feature"),m=VV.global.extraRequestThreshold(),v=m),0!=s.length){r.next=19;break}return s.push([d,v]),r.abrupt("continue",23);case 19:g=s[s.length-1],(w=d-(g[0]+g[1]))>VV.global.extraRequestThreshold()&&(qV.info("Pushing new feature batch, since gap ".concat(w," was too large")),a.push(s),s=[]),s.push([d,v]);case 23:l=!1,r.next=9;break;case 26:r.next=32;break;case 28:r.prev=28,r.t0=r.catch(7),u=!0,c=r.t0;case 32:if(r.prev=32,r.prev=33,!l||null==f.return){r.next=37;break}return r.next=37,_J(f.return());case 37:if(r.prev=37,!u){r.next=40;break}throw c;case 40:return r.finish(37);case 41:return r.finish(32);case 42:return e.headerClient.logUsage("header+index"),s.length>0&&a.push(s),_=a.flatMap(function(t){return e.readFeatureBatch(t)}),r.delegateYield(OJ(xJ(NV.merge(_))),"t1",46);case 46:case"end":return r.stop()}},r,null,[[7,28,32,42],[33,,37,41]])}))()}},{key:"lengthBeforeTree",value:function(){return aJ.length+sJ+this.headerLength}},{key:"lengthBeforeFeatures",value:function(){return this.lengthBeforeTree()+this.indexLength}},{key:"buildFeatureClient",value:function(){return new kJ(this.headerClient.httpClient)}},{key:"readFeatureBatch",value:function(t){var e=this;return gJ(pJ().mark(function r(){var n,o,i,a,s,l,u,c,f,h,p;return pJ().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:n=cJ(t[0],1),o=n[0],i=cJ(t[t.length-1],2),a=i[0],s=i[1],l=a+s-o,u=e.buildFeatureClient(),c=uJ(t),r.prev=7,c.s();case 9:if((f=c.n()).done){r.next=17;break}return h=cJ(f.value,1),p=h[0],r.next=13,_J(e.readFeature(u,p,l));case 13:return r.next=15,r.sent;case 15:r.next=9;break;case 17:r.next=22;break;case 19:r.prev=19,r.t0=r.catch(7),c.e(r.t0);case 22:return r.prev=22,c.f(),r.finish(22);case 25:u.logUsage("feature");case 26:case"end":return r.stop()}},r,null,[[7,19,22,25]])}))()}},{key:"readFeature",value:function(){var t=dJ(pJ().mark(function t(e,r,n){var o,i,a,s,l,u,c;return pJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o=r+this.lengthBeforeFeatures(),t.next=3,e.getRange(o,4,n,"feature length");case 3:return a=t.sent,i=new DataView(a).getUint32(0,!0),t.next=7,e.getRange(o+4,i,n,"feature data");case 7:return s=t.sent,l=new Uint8Array(s),(u=new Uint8Array(i+sJ)).set(l,sJ),(c=new Hz(u)).setPosition(sJ),t.abrupt("return",rV.getRootAsFeature(c));case 14:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}],[{key:"open",value:function(){var e=dJ(pJ().mark(function e(r){var n,o,i,a,s,l,u,c,f,h,p;return pJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=2024,o=new kJ(r),i=function(){var t,e=0;for(t=0;t<3;t++){e+=Math.pow(16,t)*tJ}return e}(),a=n+i,qV.debug("fetching header. minReqLength: ".concat(a," (assumedHeaderLength: ").concat(n,", assumedIndexLength: ").concat(i,")")),e.t0=Uint8Array,e.next=8,o.getRange(0,8,a,"header");case 8:if(e.t1=e.sent,(s=new e.t0(e.t1)).subarray(0,3).every(function(t,e){return aJ[e]===t})){e.next=13;break}throw qV.error("bytes: ".concat(s," != ").concat(aJ)),new Error("Not a FlatGeobuf file");case 13:return qV.debug("magic bytes look good"),e.next=16,o.getRange(8,4,a,"header");case 16:if(u=e.sent,!((l=new DataView(u).getUint32(0,!0))>10485760||l<8)){e.next=21;break}throw new Error("Invalid header size");case 21:return qV.debug("headerLength: ".concat(l)),e.next=24,o.getRange(12,l,a,"header");case 24:return c=e.sent,f=new Hz(new Uint8Array(c)),h=hV(f),p=eJ(h.featuresCount,h.indexNodeSize),qV.debug("completed: opening http reader"),e.abrupt("return",new t(o,h,l,p));case 30:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(),kJ=function(){function t(e){bJ(this,t),this.bytesEverUsed=0,this.bytesEverFetched=0,this.buffer=new ArrayBuffer(0),this.head=0,this.httpClient="string"==typeof e?new jJ(e):e}return mJ(t,[{key:"getRange",value:function(){var t=dJ(pJ().mark(function t(e,r,n,o){var i,a,s;return pJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(this.bytesEverUsed+=r,i=e-this.head,a=i+r,!(i>=0&&a<=this.buffer.byteLength)){t.next=5;break}return t.abrupt("return",this.buffer.slice(i,a));case 5:return s=Math.max(r,n),this.bytesEverFetched+=s,qV.debug("requesting for new Range: ".concat(e,"-").concat(e+r-1)),t.next=10,this.httpClient.getRange(e,s,o);case 10:return this.buffer=t.sent,this.head=e,t.abrupt("return",this.buffer.slice(0,r));case 13:case"end":return t.stop()}},t,this)}));return function(e,r,n,o){return t.apply(this,arguments)}}()},{key:"logUsage",value:function(t){var e=t.split(" ")[0],r=this.bytesEverUsed,n=this.bytesEverFetched,o=(100*r/n).toFixed(2);qV.info("".concat(e," bytes used/requested: ").concat(r," / ").concat(n," = ").concat(o,"%"))}}]),t}(),jJ=function(){function t(e){bJ(this,t),this.requestsEverMade=0,this.bytesEverRequested=0,this.url=e}return mJ(t,[{key:"getRange",value:function(){var t=dJ(pJ().mark(function t(e,r,n){var o,i;return pJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.requestsEverMade+=1,this.bytesEverRequested+=r,o="bytes=".concat(e,"-").concat(e+r-1),qV.info("request: #".concat(this.requestsEverMade,", purpose: ").concat(n,"), bytes: (this_request: ").concat(r,", ever: ").concat(this.bytesEverRequested,"), Range: ").concat(o)),t.next=6,fetch(this.url,{headers:{Range:o}});case 6:return i=t.sent,t.abrupt("return",i.arrayBuffer());case 8:case"end":return t.stop()}},t,this)}));return function(e,r,n){return t.apply(this,arguments)}}()}]),t}();function TJ(t){"@babel/helpers - typeof";return(TJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CJ(){CJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==TJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function AJ(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function MJ(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){AJ(i,n,o,a,s,"next",t)}function s(t){AJ(i,n,o,a,s,"throw",t)}a(void 0)})}}function RJ(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new LJ(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function LJ(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(LJ=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new LJ(t)}function NJ(t){return new FJ(t,0)}function IJ(t){return function(){return new DJ(t.apply(this,arguments))}}function DJ(t){var e,r;function n(e,r){try{var i=t[e](r),a=i.value,s=a instanceof FJ;Promise.resolve(s?a.v:a).then(function(r){if(s){var l="return"===e?"return":"next";if(!a.k||r.done)return n(l,r);r=t[l](r).value}o(i.done?"return":"normal",r)},function(t){n("throw",t)})}catch(t){o("throw",t)}}function o(t,o){switch(t){case"return":e.resolve({value:o,done:!0});break;case"throw":e.reject(o);break;default:e.resolve({value:o,done:!1})}(e=e.next)?n(e.key,e.arg):r=null}this._invoke=function(t,o){return new Promise(function(i,a){var s={key:t,arg:o,resolve:i,reject:a,next:null};r?r=r.next=s:(e=r=s,n(t,o))})},"function"!=typeof t.return&&(this.return=void 0)}function FJ(t,e){this.v=t,this.k=e}function BJ(){return(BJ=IJ(CJ().mark(function t(e,r,n){var o,i,a,s,l,u,c,f,h,p;return CJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o="function"==typeof(y=e).slice?y:new sV("function"==typeof y.read?y:y.getReader()),i=function(){var t=MJ(CJ().mark(function t(e){return CJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,o.slice(e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}(),t.t0=Uint8Array,t.next=5,NJ(i(8,"magic bytes"));case 5:if(t.t1=t.sent,(a=new t.t0(t.t1)).subarray(0,3).every(function(t,e){return aJ[e]===t})){t.next=9;break}throw new Error("Not a FlatGeobuf file");case 9:return t.t2=Uint8Array,t.next=12,NJ(i(4,"header length"));case 12:return t.t3=t.sent,a=new t.t2(t.t3),s=new Hz(a),l=s.readUint32(0),t.t4=Uint8Array,t.next=19,NJ(i(l,"header data"));case 19:if(t.t5=t.sent,a=new t.t4(t.t5),s=new Hz(a),u=hV(s),n&&n(u),c=u.indexNodeSize,f=u.featuresCount,!(c>0)){t.next=29;break}return h=eJ(f,c),t.next=29,NJ(i(h,"entire index, w/o rect"));case 29:return t.next=31,NJ(UJ(i,u,r));case 31:if(!(p=t.sent)){t.next=36;break}return t.next=34,p;case 34:t.next=29;break;case 36:case"end":return t.stop()}var y},t)}))).apply(this,arguments)}function GJ(){return(GJ=IJ(CJ().mark(function t(e,r,n,o){var i,a,s,l,u,c,f;return CJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,NJ(EJ.open(e));case 2:i=t.sent,qV.debug("opened reader"),o&&o(i.header),a=!1,s=!1,t.prev=7,u=RJ(i.selectBbox(r));case 9:return t.next=11,NJ(u.next());case 11:if(!(a=!(c=t.sent).done)){t.next=18;break}return f=c.value,t.next=15,n(f,i.header);case 15:a=!1,t.next=9;break;case 18:t.next=24;break;case 20:t.prev=20,t.t0=t.catch(7),s=!0,l=t.t0;case 24:if(t.prev=24,t.prev=25,!a||null==u.return){t.next=29;break}return t.next=29,NJ(u.return());case 29:if(t.prev=29,!s){t.next=32;break}throw l;case 32:return t.finish(29);case 33:return t.finish(24);case 34:case"end":return t.stop()}},t,null,[[7,20,24,34],[25,,29,33]])}))).apply(this,arguments)}function UJ(t,e,r){return zJ.apply(this,arguments)}function zJ(){return(zJ=MJ(CJ().mark(function t(e,r,n){var o,i,a,s,l;return CJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=Uint8Array,t.next=3,e(4,"feature length");case 3:if(t.t1=t.sent,0!==(o=new t.t0(t.t1)).byteLength){t.next=7;break}return t.abrupt("return");case 7:return i=new Hz(o),a=i.readUint32(0),t.t2=Uint8Array,t.next=12,e(a,"feature data");case 12:return t.t3=t.sent,o=new t.t2(t.t3),(s=new Uint8Array(a+4)).set(o,4),(i=new Hz(s)).setPosition(sJ),l=rV.getRootAsFeature(i),t.abrupt("return",n(l,r));case 20:case"end":return t.stop()}},t)}))).apply(this,arguments)}function VJ(t,e){return{type:"FeatureCollection",features:function(t,e,r){if(!t.subarray(0,3).every(function(t,e){return aJ[e]===t}))throw new Error("Not a FlatGeobuf file");var n=new Hz(t),o=n.readUint32(aJ.length);n.setPosition(aJ.length+sJ);var i=hV(n);r&&r(i);var a=aJ.length+sJ+o,s=i.indexNodeSize,l=i.featuresCount;s>0&&(a+=eJ(l,s));for(var u=[];a<n.capacity();){var c=n.readUint32(a);n.setPosition(a+sJ);var f=rV.getRootAsFeature(n);u.push(e(f,i)),a+=sJ+c}return u}(t,iV,e)}}function JJ(t,e){return function(t,e,r){return BJ.apply(this,arguments)}(t,iV,e)}function qJ(t,e,r){return function(t,e,r,n){return GJ.apply(this,arguments)}(t,e,iV,r)}function HJ(t,e,r){return t instanceof Uint8Array?VJ(t,r):t instanceof ReadableStream?JJ(t,r):qJ(t,e,r)}function WJ(t){"@babel/helpers - typeof";return(WJ="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function YJ(){YJ=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==WJ(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function XJ(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function QJ(t){return function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){XJ(i,n,o,a,s,"next",t)}function s(t){XJ(i,n,o,a,s,"throw",t)}a(void 0)})}}function ZJ(t){var e,r,n,o=2;for("undefined"!=typeof Symbol&&(r=Symbol.asyncIterator,n=Symbol.iterator);o--;){if(r&&null!=(e=t[r]))return e.call(t);if(n&&null!=(e=t[n]))return new KJ(e.call(t));r="@@asyncIterator",n="@@iterator"}throw new TypeError("Object is not async iterable")}function KJ(t){function e(t){if(Object(t)!==t)return Promise.reject(new TypeError(t+" is not an object."));var e=t.done;return Promise.resolve(t.value).then(function(t){return{value:t,done:e}})}return(KJ=function(t){this.s=t,this.n=t.next}).prototype={s:null,n:null,next:function(){return e(this.n.apply(this.s,arguments))},return:function(t){var r=this.s.return;return void 0===r?Promise.resolve({value:t,done:!0}):e(r.apply(this.s,arguments))},throw:function(t){var r=this.s.return;return void 0===r?Promise.reject(t):e(r.apply(this.s,arguments))}},new KJ(t)}DJ.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},DJ.prototype.next=function(t){return this._invoke("next",t)},DJ.prototype.throw=function(t){return this._invoke("throw",t)},DJ.prototype.return=function(t){return this._invoke("return",t)};var $J=wI().FeatureGroup.extend({initialize:function(t,e){this.options=e||{},this.strategy=this.options.strategy||"bbox",this._layers={},this.url=t,this.previousLayer=null,this.loadedExtentsRtree_=new(Bz()),this.extent=this.options.extent,this._cacheIds=[],this._validatedId=!1,this._checked=!1,this.idField=this.options.idField||"SmID",this._updateFeaturesFn=this._updateFeatures.bind(this),wI().Util.setOptions(this,e)},onAdd:function(t){this.map=t;var e,r,n,o=[];if("bbox"===this.strategy){var i=t.getBounds();o=[i.getWest(),i.getSouth(),i.getEast(),i.getNorth()],t.on("moveend",this._updateFeaturesFn)}if(this.extent){var a=(e=this.extent,n=[],function(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}(e,r=o)&&(e[0]>r[0]?n[0]=e[0]:n[0]=r[0],e[1]>r[1]?n[1]=e[1]:n[1]=r[1],e[2]<r[2]?n[2]=e[2]:n[2]=r[2],e[3]<r[3]?n[3]=e[3]:n[3]=r[3]),n);o=a&&a.length?a:this.extent}this._handleFeatures(o)},onRemove:function(t){this.loadedExtentsRtree_.clear(),this.loadedExtentsRtree_=null,"bbox"===this.strategy&&(t.off("moveend",this._updateFeaturesFn),this._cacheIds=[])},_updateFeatures:function(){var t=QJ(YJ().mark(function t(e){var r,n,o,i=this;return YJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=e.target,n=[r.getBounds().getSouthWest(),r.getBounds().getNorthEast()],o=[n[0].lng,n[0].lat,n[1].lng,n[1].lat],this._forEachInExtent(o,function(t){return i._containsExtent(t.extent,o)})||this._handleFeatures(o);case 5:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),_handleFeatures:function(){var t=QJ(YJ().mark(function t(e){var r,n,o,i,a,s,l,u,c,f;return YJ().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(n={minX:e[0],minY:e[1],maxX:e[2],maxY:e[3]},e.length){t.next=7;break}return t.next=4,this._getStream(this.url);case 4:r=t.sent,t.next=9;break;case 7:n.value={extent:e.slice()},this.loadedExtentsRtree_.insert(n);case 9:o=HJ(r&&r.body||this.url,n),this._validatedId||(this.curLayer=wI().geoJSON(null,this.options),this.previousLayer&&this.removeLayer(this.previousLayer),this.previousLayer=this.curLayer,this.curLayer.addTo(this)),i=!1,a=!1,t.prev=13,l=ZJ(o);case 15:return t.next=17,l.next();case 17:if(!(i=!(u=t.sent).done)){t.next=31;break}if(c=u.value,"bbox"!==this.strategy){t.next=26;break}if((f=c.properties[this.idField])&&!this._validatedId&&(this._validatedId=!0,this._checked=!0),!f||!this._checked){t.next=26;break}if(!this._cacheIds.includes(f)){t.next=25;break}return t.abrupt("continue",28);case 25:this._cacheIds.push(f);case 26:this.options.featureLoader&&"function"==typeof this.options.featureLoader&&(c=this.options.featureLoader(c)),this.curLayer.addData(c);case 28:i=!1,t.next=15;break;case 31:t.next=37;break;case 33:t.prev=33,t.t0=t.catch(13),a=!0,s=t.t0;case 37:if(t.prev=37,t.prev=38,!i||null==l.return){t.next=42;break}return t.next=42,l.return();case 42:if(t.prev=42,!a){t.next=45;break}throw s;case 45:return t.finish(42);case 46:return t.finish(37);case 47:case"end":return t.stop()}},t,this,[[13,33,37,47],[38,,42,46]])}));return function(e){return t.apply(this,arguments)}}(),_getStream:function(t){return QJ(YJ().mark(function e(){return YJ().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,mn.get(t,{},{withoutFormatSuffix:!0}).then(function(t){return t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e)}))()},_containsExtent:function(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]},_getInExtent:function(t){var e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.loadedExtentsRtree_.search(e).map(function(t){return t.value})},_forEachInExtent:function(t,e){return this._forEach(this._getInExtent(t),e)},_forEach:function(t,e){for(var r,n=0,o=t.length;n<o;n++)if(r=e(t[n]))return r;return r}});function tq(t){"@babel/helpers - typeof";return(tq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eq(){eq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==tq(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function rq(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}var nq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._knowledgeGraphService=new Oj(this.url,e)},query:function(t,e){return this._knowledgeGraphService.query(t,e)},getGraphMaps:function(t){return this._knowledgeGraphService.getGraphMaps(t)},getGraphMap:function(t,e){return this._knowledgeGraphService.getGraphMap(t,e)},getGraphMapData:function(t){var e,r=this;return(e=eq().mark(function e(){var n;return eq().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._knowledgeGraphService.getGraphMapData(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}),function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(t){rq(i,n,o,a,s,"next",t)}function s(t){rq(i,n,o,a,s,"throw",t)}a(void 0)})})()}});function oq(t){"@babel/helpers - typeof";return(oq="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function iq(){iq=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},o=n.iterator||"@@iterator",i=n.asyncIterator||"@@asyncIterator",a=n.toStringTag||"@@toStringTag";function s(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{s({},"")}catch(t){s=function(t,e,r){return t[e]=r}}function l(t,e,r,n){var o=e&&e.prototype instanceof f?e:f,i=Object.create(o.prototype),a=new S(n||[]);return i._invoke=function(t,e,r){var n="suspendedStart";return function(o,i){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw i;return P()}for(r.method=o,r.arg=i;;){var a=r.delegate;if(a){var s=w(a,r);if(s){if(s===c)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var l=u(t,e,r);if("normal"===l.type){if(n=r.done?"completed":"suspendedYield",l.arg===c)continue;return{value:l.arg,done:r.done}}"throw"===l.type&&(n="completed",r.method="throw",r.arg=l.arg)}}}(t,r,a),i}function u(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=l;var c={};function f(){}function h(){}function p(){}var y={};s(y,o,function(){return this});var d=Object.getPrototypeOf,b=d&&d(d(x([])));b&&b!==e&&r.call(b,o)&&(y=b);var v=p.prototype=f.prototype=Object.create(y);function m(t){["next","throw","return"].forEach(function(e){s(t,e,function(t){return this._invoke(e,t)})})}function g(t,e){var n;this._invoke=function(o,i){function a(){return new e(function(n,a){!function n(o,i,a,s){var l=u(t[o],t,i);if("throw"!==l.type){var c=l.arg,f=c.value;return f&&"object"==oq(f)&&r.call(f,"__await")?e.resolve(f.__await).then(function(t){n("next",t,a,s)},function(t){n("throw",t,a,s)}):e.resolve(f).then(function(t){c.value=t,a(c)},function(t){return n("throw",t,a,s)})}s(l.arg)}(o,i,n,a)})}return n=n?n.then(a,a):a()}}function w(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,w(t,e),"throw"===e.method))return c;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return c}var n=u(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,c;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,c):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,c)}function _(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function O(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function S(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(_,this),this.reset(!0)}function x(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,i=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:P}}function P(){return{value:void 0,done:!0}}return h.prototype=p,s(v,"constructor",p),s(p,"constructor",h),h.displayName=s(p,a,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===h||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,p):(t.__proto__=p,s(t,a,"GeneratorFunction")),t.prototype=Object.create(v),t},t.awrap=function(t){return{__await:t}},m(g.prototype),s(g.prototype,i,function(){return this}),t.AsyncIterator=g,t.async=function(e,r,n,o,i){void 0===i&&(i=Promise);var a=new g(l(e,r,n,o),i);return t.isGeneratorFunction(r)?a:a.next().then(function(t){return t.done?t.value:a.next()})},m(v),s(v,a,"Generator"),s(v,o,function(){return this}),s(v,"toString",function(){return"[object Generator]"}),t.keys=function(t){var e=[];for(var r in t)e.push(r);return e.reverse(),function r(){for(;e.length;){var n=e.pop();if(n in t)return r.value=n,r.done=!1,r}return r.done=!0,r}},t.values=x,S.prototype={constructor:S,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return a.type="throw",a.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var s=r.call(i,"catchLoc"),l=r.call(i,"finallyLoc");if(s&&l){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!l)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=e,i?(this.method="next",this.next=i.finallyLoc,c):this.complete(a)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),c},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),O(r),c}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;O(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:x(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),c}},t}function aq(t,e,r,n,o,i,a){try{var s=t[i](a),l=s.value}catch(t){return void r(t)}s.done?e(l):Promise.resolve(l).then(n,o)}function sq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function lq(t,e){return(lq=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function uq(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=cq(t);if(e){var o=cq(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===oq(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function cq(t){return(cq=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var fq=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lq(t,e)}(i,wI().Evented);var e,r,n,o=uq(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"initialize",value:function(t,e){if(t){this.graph=null,this.EVENT_TYPES=["loaded"];var r=t.split("/").pop();this.url=t.replace("/graphmaps/".concat(r),""),this.createGraphMap(r,e)}}},{key:"createGraphMap",value:function(){var t,e=(t=iq().mark(function t(e,r){var n,o,i=this;return iq().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return this.knowledgeGraphService=this.createKnowledgeGraphService(this.url,r),t.next=3,this.knowledgeGraphService.getGraphMapData(e);case 3:n=t.sent,o=dI.dataFromGraphMap(n.data,n.graphMap),this.graph=new dI(r&&r.config),this.graph.on("beforelayout",function(){i.fire(i.EVENT_TYPES[0])}),this.graph.setData(o),this.graph.handleNodeStatus((a=n.graphMap,void 0,void 0,void 0,void 0,s=a.dataContent,l=s.expand,u=s.collapse,c=s.hidden,{expand:l&&JSON.parse(l),collapse:u&&JSON.parse(u),hidden:c&&JSON.parse(c)}));case 9:case"end":return t.stop()}var a,s,l,u,c},t,this)}),function(){var e=this,r=arguments;return new Promise(function(n,o){var i=t.apply(e,r);function a(t){aq(i,n,o,a,s,"next",t)}function s(t){aq(i,n,o,a,s,"throw",t)}a(void 0)})});return function(t,r){return e.apply(this,arguments)}}()},{key:"createKnowledgeGraphService",value:function(t,e){return new nq(t,e)}}])&&sq(e.prototype,r),n&&sq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),hq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e);this._addressMatchService=new No(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},code:function(t,e){return this._addressMatchService.code(dt.urlPathAppend(this.url,"geocoding"),t,e)},decode:function(t,e){return this._addressMatchService.decode(dt.urlPathAppend(this.url,"geodecoding"),t,e)}});function pq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var yq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"queryChart",value:function(t,e,r){var n=this,o=t,i=n._processFormat(r);return new $a(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:i}).processAsync(o,e)}},{key:"getChartFeatureInfo",value:function(t){var e=this,r=dt.urlPathAppend(e.url,"chartFeatureInfoSpecs");return new Ba(r,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&pq(e.prototype,r),n&&pq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),dq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._chartServiceBase=new yq(t,e)},queryChart:function(t,e,r){return t=this._processParams(t),this._chartServiceBase.queryChart(t,e,r)},getChartFeatureInfo:function(t){return this._chartServiceBase.getChartFeatureInfo(t)},_processParams:function(t){if(!t)return{};t.returnContent=null==t.returnContent||t.returnContent,t.chartQueryFilterParameters&&!wI().Util.isArray(t.chartQueryFilterParameters)&&(t.chartQueryFilterParameters=[t.chartQueryFilterParameters]),t.bounds&&(t.bounds=uG.toSuperMapBounds(t.bounds))},_processFormat:function(t){return t||o.GEOJSON}}),bq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._datasetService=new Rh(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getDatasets:function(t,e){if(t)return this._datasetService.getDatasetsService(t,e)},getDataset:function(t,e,r){if(t&&e)return this._datasetService.getDatasetService(t,e,r)},setDataset:function(t,e){if(t instanceof sE||t instanceof PE){if(t instanceof sE)var r={datasetType:t.datasetType,datasourceName:t.datasourceName,datasetName:t.datasetName};else t instanceof PE&&(r={datasetName:t.datasetName,datasourceName:t.datasourceName,isFileCache:t.isFileCache,description:t.description,prjCoordSys:t.prjCoordSys,charset:t.charset});return this._datasetService.setDatasetService(r,e)}},deleteDataset:function(t,e,r){return this._datasetService.deleteDatasetService(t,e,r)}}),vq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._datasourceService=new fl(this.url,{proxy:this.proxy,withCredentials:this.withCredentials,crossOrigin:this.crossOrigin,headers:this.headers})},getDatasources:function(t){return this._datasourceService.getDatasourcesService(t)},getDatasource:function(t,e){if(t)return this._datasourceService.getDatasourceService(t,e)},setDatasource:function(t,e){if(t instanceof NO){var r={description:t.description,coordUnit:t.coordUnit,distanceUnit:t.distanceUnit,datasourceName:t.datasourceName};return this._datasourceService.setDatasourceService(r,e)}}});function mq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var gq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getFields",value:function(t,e){var r=this;return new my(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,datasource:t.datasource,dataset:t.dataset}).processAsync(e)}},{key:"getFieldStatisticsInfo",value:function(t,e){if(t instanceof pc){var r=this,n=t.fieldName,o=t.statisticMode;o&&!Array.isArray(o)&&(o=[o]),r.currentStatisticResult={fieldName:n},r._statisticsCallback=e,o.forEach(function(e){r.currentStatisticResult[e]=null,r._fieldStatisticRequest(t.datasource,t.dataset,n,e)})}}},{key:"_fieldStatisticRequest",value:function(t,e,r,n){var o=this;new _c(o.url,{datasource:t,dataset:e,field:r,statisticMode:n,crossOrigin:o.options.crossOrigin,headers:o.options.headers}).processAsync(o._processCompleted.bind(o))}},{key:"_processCompleted",value:function(t){var e=this;if(t.error)e._statisticsCallback(t);else{var r=!0,n=t.result;for(var o in this.currentStatisticResult&&null==e.currentStatisticResult[n.mode]&&(this.currentStatisticResult[n.mode]=n.result),e.currentStatisticResult)if(null==e.currentStatisticResult[o]){r=!1;break}r&&e._statisticsCallback({result:e.currentStatisticResult})}}}])&&mq(e.prototype,r),n&&mq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),wq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._fieldService=new gq(t,e)},getFields:function(t,e){return this._fieldService.getFields(t,e)},getFieldStatisticsInfo:function(t,e){return this._fieldService.getFieldStatisticsInfo(t,e)}}),_q=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._gridCellQueryService=new jy(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getGridCellInfos:function(t,e){return t?this._gridCellQueryService.processAsync(t,e):null}}),Oq=nG.extend({initialize:function(t,e){e=e||{},wI().setOptions(this,e),nG.prototype.initialize.call(this,t,e),this.headers={},this.crossOrigin=!0,this.withCredentials=!0,this.proxy=!0,this._geoprocessingJobsService=new dh(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getTools:function(t){return this._geoprocessingJobsService.getTools(t)},getTool:function(t,e){return this._geoprocessingJobsService.getTool(t,e)},execute:function(t,e,r,n){return this._geoprocessingJobsService.execute(t,e,r,n)},submitJob:function(t,e,r,n){return this._geoprocessingJobsService.submitJob(t,e,r,n)},waitForJobCompletion:function(t,e,r,n){return this._geoprocessingJobsService.waitForJobCompletion(t,e,r,n)},getJobInfo:function(t,e,r){return this._geoprocessingJobsService.getJobInfo(t,e,r)},cancelJob:function(t,e,r){return this._geoprocessingJobsService.cancelJob(t,e,r)},getJobs:function(t,e){return this._geoprocessingJobsService.getJobs(t,e)},getResults:function(t,e,r,n){return this._geoprocessingJobsService.getResults(t,e,r,n)}});function Sq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var xq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getLayersInfo",value:function(t){var e=this;return new Zb(e.url,{proxy:e.options.proxy,withCredentials:e.options.withCredentials,crossOrigin:e.options.crossOrigin,headers:e.options.headers}).processAsync(t)}},{key:"getLayersLegendInfo",value:function(t,e){var r=this;return new fO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"setLayerInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=t.tempLayerName,i=t.layerInfo;if(n&&o){var a=dt.urlPathAppend(r.url,"tempLayersSet/"+n+"/"+o);return new qO(a,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(i,e)}}}},{key:"setLayersInfo",value:function(t,e){if(t){var r=this,n=t.resourceID,o=!!t.isTempLayers&&t.isTempLayers,i=t.layersInfo;if((!o||n)&&i)return new eS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,resourceID:n,isTempLayers:o}).processAsync(i,e)}}},{key:"setLayerStatus",value:function(t,e){if(t){var r=this;return new fS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}}])&&Sq(e.prototype,r),n&&Sq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Pq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._layerInfoService=new xq(t,e)},getLayersInfo:function(t){return this._layerInfoService.getLayersInfo(t)},getLayersLegendInfo:function(t,e){return this._layerInfoService.getLayersLegendInfo(t,e)},setLayerInfo:function(t,e){return this._layerInfoService.setLayerInfo(t,e)},setLayersInfo:function(t,e){return this._layerInfoService.setLayersInfo(t,e)},setLayerStatus:function(t,e){return this._layerInfoService.setLayerStatus(t,e)}}),Eq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e)},measureDistance:function(t,e){return this.measure(u.DISTANCE,t,e)},measureArea:function(t,e){return this.measure(u.AREA,t,e)},measure:function(t,e,r){if(e instanceof Gm){var n=this;return e.geometry&&(e.geometry=xG(e.geometry)),new Ym(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,measureMode:t}).processAsync(e,r)}}});function kq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"sinksFacilityAnalyst",value:function(t,e){var r=this;return new Hl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"sourcesFacilityAnalyst",value:function(t,e){var r=this;return new au(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceUpFacilityAnalyst",value:function(t,e){var r=this;return new Vu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"traceDownFacilityAnalyst",value:function(t,e){var r=this;return new Tu(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"upstreamFacilityAnalyst",value:function(t,e){var r=this;return new oc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&kq(e.prototype,r),n&&kq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Tq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._networkAnalyst3DService=new jq(t,e)},sinksFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.sinksFacilityAnalyst(t,e)},sourcesFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.sourcesFacilityAnalyst(t,e)},traceUpFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.traceUpFacilityAnalyst(t,e)},traceDownFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.traceDownFacilityAnalyst(t,e)},upstreamFacilityAnalyst:function(t,e){return this._networkAnalyst3DService.upstreamFacilityAnalyst(t,e)}});function Cq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Aq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"burstPipelineAnalyst",value:function(t,e){var r=this;return new Ma(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"computeWeightMatrix",value:function(t,e){var r=this;return new bs(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"findClosestFacilities",value:function(t,e,r){var n=this;return new Cc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"traceAnalyst",value:function(t,e,r){var n=this;return new H_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"connectedEdgesAnalyst",value:function(t,e,r){var n=this;return new eO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"streamFacilityAnalyst",value:function(t,e,r){var n=this;return new du(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findLocation",value:function(t,e,r){var n=this;return new Bc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findPath",value:function(t,e,r){var n=this;return new nf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findTSPPaths",value:function(t,e,r){var n=this;return new Of(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findMTSPPaths",value:function(t,e,r){var n=this;return new Yc(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"findServiceAreas",value:function(t,e,r){var n=this;return new pf(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"updateEdgeWeight",value:function(t,e){var r=this;return new yE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"updateTurnNodeWeight",value:function(t,e){var r=this;return new SE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&Cq(e.prototype,r),n&&Cq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Mq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._networkAnalystService=new Aq(t,e)},burstPipelineAnalyst:function(t,e){return t=this._processParams(t),this._networkAnalystService.burstPipelineAnalyst(t,e)},computeWeightMatrix:function(t,e){return t=this._processParams(t),this._networkAnalystService.computeWeightMatrix(t,e)},findClosestFacilities:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findClosestFacilities(t,e,r)},traceAnalyst:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.traceAnalyst(t,e,r)},connectedEdgesAnalyst:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.connectedEdgesAnalyst(t,e,r)},streamFacilityAnalyst:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.streamFacilityAnalyst(t,e,r)},findLocation:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findLocation(t,e,r)},findPath:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findPath(t,e,r)},findTSPPaths:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findTSPPaths(t,e,r)},findMTSPPaths:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findMTSPPaths(t,e,r)},findServiceAreas:function(t,e,r){return t=this._processParams(t),this._networkAnalystService.findServiceAreas(t,e,r)},updateEdgeWeight:function(t,e){return this._networkAnalystService.updateEdgeWeight(t,e)},updateTurnNodeWeight:function(t,e){return this._networkAnalystService.updateTurnNodeWeight(t,e)},_processParams:function(t){if(!t)return{};if(t.centers&&wI().Util.isArray(t.centers)&&t.centers.map(function(e,r){return t.centers[r]=e instanceof wI().LatLng?{x:e.lng,y:e.lat}:e,t.centers[r]}),t.nodes&&wI().Util.isArray(t.nodes)&&t.nodes.map(function(e,r){return t.nodes[r]=e instanceof wI().LatLng?{x:e.lng,y:e.lat}:e,t.nodes[r]}),t.event&&t.event instanceof wI().LatLng&&(t.event={x:t.event.lng,y:t.event.lat}),t.facilities&&wI().Util.isArray(t.facilities)&&t.facilities.map(function(e,r){return t.facilities[r]=e instanceof wI().LatLng?{x:e.lng,y:e.lat}:e,t.facilities[r]}),t.parameter&&t.parameter.barrierPoints){var e=t.parameter.barrierPoints;wI().Util.isArray(e)?e.map(function(e,r){return t.parameter.barrierPoints[r]=e instanceof wI().LatLng?{x:e.lng,y:e.lat}:e,t.parameter.barrierPoints[r]}):t.parameter.barrierPoints=[e instanceof wI().LatLng?{x:e.lng,y:e.lat}:e]}return t},_processFormat:function(t){return t||o.GEOJSON}});function Rq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Lq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{},this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}}var e,r,n;return e=t,(r=[{key:"getKernelDensityJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new Yv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getKernelDensityJobs(t)}},{key:"getKernelDensityJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new Yv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getKernelDensityJob(t,e)}},{key:"addKernelDensityJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new Yv(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addKernelDensityJob(t,r,e,function(t){o.kernelDensityJobs[t.id]=t.state})}},{key:"getKernelDensityJobState",value:function(t){return this.kernelDensityJobs[t]}},{key:"getSummaryMeshJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new YS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryMeshJobs(t)}},{key:"getSummaryMeshJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new YS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryMeshJob(t,e)}},{key:"addSummaryMeshJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new YS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryMeshJob(t,r,e,function(t){o.summaryMeshJobs[t.id]=t.state})}},{key:"getSummaryMeshJobState",value:function(t){return this.summaryMeshJobs[t]}},{key:"getQueryJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new wS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getQueryJobs(t)}},{key:"getQueryJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new wS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getQueryJob(t,e)}},{key:"addQueryJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new wS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addQueryJob(t,r,e,function(t){o.queryJobs[t.id]=t.state})}},{key:"getQueryJobState",value:function(t){return this.queryJobs[t]}},{key:"getSummaryRegionJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new nx(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryRegionJobs(t)}},{key:"getSummaryRegionJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new nx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryRegionJob(t,e)}},{key:"addSummaryRegionJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new nx(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryRegionJob(t,r,e,function(t){o.summaryRegionJobs[t.id]=t.state})}},{key:"getSummaryRegionJobState",value:function(t){return this.summaryRegionJobs[t]}},{key:"getVectorClipJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new LE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getVectorClipJobs(t)}},{key:"getVectorClipJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new LE(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getVectorClipJob(t,e)}},{key:"addVectorClipJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new LE(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addVectorClipJob(t,r,e,function(t){o.vectorClipJobs[t.id]=t.state})}},{key:"getVectorClipJobState",value:function(t){return this.vectorClipJobs[t]}},{key:"getOverlayGeoJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new pg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getOverlayGeoJobs(t)}},{key:"getOverlayGeoJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new pg(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getOverlayGeoJob(t,e)}},{key:"addOverlayGeoJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new pg(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addOverlayGeoJob(t,r,e,function(t){o.overlayGeoJobs[t.id]=t.state})}},{key:"getoverlayGeoJobState",value:function(t){return this.overlayGeoJobs[t]}},{key:"getBuffersJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new ba(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getBuffersJobs(t)}},{key:"getBuffersJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new ba(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getBuffersJob(t,e)}},{key:"addBuffersJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new ba(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addBuffersJob(t,r,e,function(t){o.buffersJobs[t.id]=t.state})}},{key:"getBuffersJobState",value:function(t){return this.buffersJobs[t]}},{key:"getTopologyValidatorJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new DP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getTopologyValidatorJobs(t)}},{key:"getTopologyValidatorJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new DP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getTopologyValidatorJob(t,e)}},{key:"addTopologyValidatorJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new DP(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addTopologyValidatorJob(t,r,e,function(t){o.topologyValidatorJobs[t.id]=t.state})}},{key:"getTopologyValidatorJobState",value:function(t){return this.topologyValidatorJobs[t]}},{key:"getSummaryAttributesJobs",value:function(t,e){var r=this,n=r._processFormat(e);return new BS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,format:n}).getSummaryAttributesJobs(t)}},{key:"getSummaryAttributesJob",value:function(t,e,r){var n=this,o=n._processFormat(r);return new BS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:o}).getSummaryAttributesJob(t,e)}},{key:"addSummaryAttributesJob",value:function(t,e,r,n){var o=this,i=o._processFormat(n);return new BS(o.url,{proxy:o.options.proxy,withCredentials:o.options.withCredentials,crossOrigin:o.options.crossOrigin,headers:o.options.headers,format:i}).addSummaryAttributesJob(t,r,e,function(t){o.summaryAttributesJobs[t.id]=t.state})}},{key:"getSummaryAttributesJobState",value:function(t){return this.summaryAttributesJobs[t]}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&Rq(e.prototype,r),n&&Rq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Nq=nG.extend({initialize:function(t,e){e=e||{},wI().setOptions(this,e),nG.prototype.initialize.call(this,t,e),this._processingService=new Lq(t,e)},getKernelDensityJobs:function(t,e){return this._processingService.getKernelDensityJobs(t,e)},getKernelDensityJob:function(t,e,r){return this._processingService.getKernelDensityJob(t,e,r)},addKernelDensityJob:function(t,e,r,n){var o=this._processParams(t);return this._processingService.addKernelDensityJob(o,e,r,n)},getKernelDensityJobState:function(t){return this._processingService.getKernelDensityJobState(t)},getSummaryMeshJobs:function(t,e){return this._processingService.getSummaryMeshJobs(t,e)},getSummaryMeshJob:function(t,e,r){return this._processingService.getSummaryMeshJob(t,e,r)},addSummaryMeshJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryMeshJob(t,e,r,n)},getSummaryMeshJobState:function(t){return this._processingService.getSummaryMeshJobState(t)},getQueryJobs:function(t,e){return this._processingService.getQueryJobs(t,e)},getQueryJob:function(t,e,r){return this._processingService.getQueryJob(t,e,r)},addQueryJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addQueryJob(t,e,r,n)},getQueryJobState:function(t){return this._processingService.getQueryJobState(t)},getSummaryRegionJobs:function(t,e){return this._processingService.getSummaryRegionJobs(t,e)},getSummaryRegionJob:function(t,e,r){return this._processingService.getSummaryRegionJob(t,e,r)},addSummaryRegionJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryRegionJob(t,e,r,n)},getSummaryRegionJobState:function(t){return this._processingService.getSummaryRegionJobState(t)},getVectorClipJobs:function(t,e){return this._processingService.getVectorClipJobs(t,e)},getVectorClipJob:function(t,e,r){return this._processingService.getVectorClipJob(t,e,r)},addVectorClipJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addVectorClipJob(t,e,r,n)},getVectorClipJobState:function(t){return this._processingService.getVectorClipJobState(t)},getOverlayGeoJobs:function(t,e){return this._processingService.getOverlayGeoJobs(t,e)},getOverlayGeoJob:function(t,e,r){return this._processingService.getOverlayGeoJob(t,e,r)},addOverlayGeoJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addOverlayGeoJob(t,e,r,n)},getoverlayGeoJobState:function(t){return this._processingService.getoverlayGeoJobState(t)},getBuffersJobs:function(t,e){return this._processingService.getBuffersJobs(t,e)},getBuffersJob:function(t,e,r){return this._processingService.getBuffersJob(t,e,r)},addBuffersJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addBuffersJob(t,e,r,n)},getBuffersJobState:function(t){return this._processingService.getBuffersJobState(t)},getTopologyValidatorJobs:function(t,e){return this._processingService.getTopologyValidatorJobs(t,e)},getTopologyValidatorJob:function(t,e,r){return this._processingService.getTopologyValidatorJob(t,e,r)},addTopologyValidatorJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addTopologyValidatorJob(t,e,r,n)},getTopologyValidatorJobState:function(t){return this._processingService.getTopologyValidatorJobState(t)},getSummaryAttributesJobs:function(t,e){return this._processingService.getSummaryAttributesJobs(t,e)},getSummaryAttributesJob:function(t,e,r){return this._processingService.getSummaryAttributesJob(t,e,r)},addSummaryAttributesJob:function(t,e,r,n){return t=this._processParams(t),this._processingService.addSummaryAttributesJob(t,e,r,n)},getSummaryAttributesJobState:function(t){return this._processingService.getSummaryAttributesJobState(t)},_processParams:function(t){return t?(t.bounds&&(t.bounds=uG.toSuperMapBounds(t.bounds)),t.query&&(t.query=uG.toSuperMapBounds(t.query)),t.geometryQuery&&(t.geometryQuery=uG.toProcessingParam(t.geometryQuery)),t.geometryClip&&(t.geometryClip=uG.toProcessingParam(t.geometryClip)),t):{}}}),Iq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._queryService=new pO(t,e)},queryByBounds:function(t,e,r){return t=this._processParams(t),this._queryService.queryByBounds(t,e,r)},queryByDistance:function(t,e,r){return t=this._processParams(t),this._queryService.queryByDistance(t,e,r)},queryBySQL:function(t,e,r){return t=this._processParams(t),this._queryService.queryBySQL(t,e,r)},queryByGeometry:function(t,e,r){return t=this._processParams(t),this._queryService.queryByGeometry(t,e,r)},_processParams:function(t){return t?(t.returnContent=null==t.returnContent||t.returnContent,t.queryParams&&!wI().Util.isArray(t.queryParams)&&(t.queryParams=[t.queryParams]),t.bounds&&(t.bounds=uG.toSuperMapBounds(t.bounds)),t.geometry&&(t.geometry instanceof wI().Point?t.geometry=new Wt(t.geometry.x,t.geometry.y):t.geometry=xG(t.geometry)),t):{}}});function Dq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Fq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"getAreaSolarRadiationResult",value:function(t,e,r){var n=this;return new yi(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"bufferAnalysis",value:function(t,e,r){var n=this;return new Yi(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"densityAnalysis",value:function(t,e,r){var n=this;return new _l(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"generateSpatialData",value:function(t,e,r){var n=this;return new Af(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geoRelationAnalysis",value:function(t,e,r){var n=this;return new xh(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"interpolationAnalysis",value:function(t,e,r){var n=this;return new Bv(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"mathExpressionAnalysis",value:function(t,e,r){var n=this;return new Fm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"overlayAnalysis",value:function(t,e,r){var n=this;return new og(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeCalculateMeasure",value:function(t,e,r){var n=this;return new OO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"routeLocate",value:function(t,e,r){var n=this;return new AO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"surfaceAnalysis",value:function(t,e,r){var n=this;return new yx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCurvatureCalculate",value:function(t,e,r){var n=this;return new Sx(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainCutFillCalculate",value:function(t,e,r){var n=this;return new u_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainAspectCalculate",value:function(t,e,r){var n=this;return new m_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"terrainSlopeCalculate",value:function(t,e,r){var n=this;return new k_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"thiessenAnalysis",value:function(t,e,r){var n=this;return new pP(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"minDistanceAnalysis",value:function(t,e,r){var n=this;return new t_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"convexHullAnalysis",value:function(t,e,r){var n=this;return new D_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,format:n._processFormat(r)}).processAsync(t,e)}},{key:"geometrybatchAnalysis",value:function(t,e,r){for(var n=new _P(this.url,{format:this._processFormat(r)}),o=[],i=0;i<t.length;i++){var a=t[i];o.push({analystName:a.analystName,param:a.param})}return n.processAsync(o,e)}},{key:"_processFormat",value:function(t){return t||o.GEOJSON}}])&&Dq(e.prototype,r),n&&Dq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Bq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._spatialAnalystService=new Fq(t,e)},getAreaSolarRadiationResult:function(t,e,r){return this._spatialAnalystService.getAreaSolarRadiationResult(t,e,r)},bufferAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.bufferAnalysis(t,e,r)},densityAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.densityAnalysis(t,e,r)},generateSpatialData:function(t,e,r){return this._spatialAnalystService.generateSpatialData(t,e,r)},geoRelationAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.geoRelationAnalysis(t,e,r)},interpolationAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.interpolationAnalysis(t,e,r)},mathExpressionAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.mathExpressionAnalysis(t,e,r)},overlayAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.overlayAnalysis(t,e,r)},routeCalculateMeasure:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeCalculateMeasure(t,e,r)},routeLocate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.routeLocate(t,e,r)},surfaceAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.surfaceAnalysis(t,e,r)},terrainCurvatureCalculate:function(t,e,r){return this._spatialAnalystService.terrainCurvatureCalculate(t,e,r)},terrainCutFillCalculate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainCutFillCalculate(t,e,r)},terrainAspectCalculate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainAspectCalculate(t,e,r)},terrainSlopeCalculate:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.terrainSlopeCalculate(t,e,r)},thiessenAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.thiessenAnalysis(t,e,r)},minDistanceAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.minDistanceAnalysis(t,e,r)},convexHullAnalysis:function(t,e,r){return t=this._processParams(t),this._spatialAnalystService.convexHullAnalysis(t,e,r)},geometrybatchAnalysis:function(t,e,r){for(var n=0;n<t.length;n++)t[n].param=this._processParams(t[n].param);return this._spatialAnalystService.geometrybatchAnalysis(t,e,r)},_processParams:function(t){if(!t)return{};if(t.bounds&&(t.bounds=uG.toSuperMapBounds(t.bounds)),t.inputPoints)for(var e=0;e<t.inputPoints.length;e++){var r=t.inputPoints[e];wI().Util.isArray(r)&&(t.inputPoints[e]={x:r[0],y:r[1],tag:r[2]})}if(t.points)for(var n=0;n<t.points.length;n++){var o=t.points[n];wI().Util.isArray(o)?t.points[n]={x:o[0],y:o[1]}:o instanceof wI().LatLng?t.points[n]={x:o.lng,y:o.lat}:t.points[n]={x:o.x,y:o.y}}if(t.point&&(wI().Util.isArray(t.point)?t.point={x:t.point[0],y:t.point[1]}:t.point instanceof wI().LatLng?t.point={x:t.point.lng,y:t.point.lat}:t.point={x:t.point.x,y:t.point.y}),t.extractRegion&&(t.extractRegion=xG(t.extractRegion)),t.extractParameter&&t.extractParameter.clipRegion&&(t.extractParameter.clipRegion=xG(t.extractParameter.clipRegion)),t.clipParam&&t.clipParam.clipRegion&&(t.clipParam.clipRegion=xG(t.clipParam.clipRegion)),t.sourceGeometry){var i=null;t.sourceGeometrySRID&&(i=t.sourceGeometrySRID),t.sourceGeometry=xG(t.sourceGeometry),i&&(t.sourceGeometry.SRID=i),delete t.sourceGeometry.sourceGeometrySRID}if(t.operateGeometry&&(t.operateGeometry=xG(t.operateGeometry)),t.sourceGeometries){for(var a=[],s=0;s<t.sourceGeometries.length;s++)a.push(xG(t.sourceGeometries[s]));t.sourceGeometries=a}if(t.operateGeometries){for(var l=[],u=0;u<t.operateGeometries.length;u++)l.push(xG(t.operateGeometries[u]));t.operateGeometries=l}if(t.inputGeometries){for(var c=[],f=0;f<t.inputGeometries.length;f++)c.push(xG(t.inputGeometries[f]));t.inputGeometries=c}if(t.sourceRoute&&t.sourceRoute instanceof wI().Polyline){var h={type:"LINEM"};h.parts=[t.sourceRoute.getLatLngs().length],h.points=[];for(var p=0;p<t.sourceRoute.getLatLngs().length;p++){var y=t.sourceRoute.getLatLngs()[p];h.points=h.points.concat({x:y.lng,y:y.lat,measure:y.alt})}t.sourceRoute=h}return t.operateRegions&&wI().Util.isArray(t.operateRegions)&&t.operateRegions.map(function(e,r){return t.operateRegions[r]=xG(e),t.operateRegions[r]}),t},_processFormat:function(t){return t||o.GEOJSON}}),Gq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._themeService=new iP(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getThemeInfo:function(t,e){return this._themeService.processAsync(t,e)}});function Uq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var zq=function(){function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.url=e,this.options=r||{}}var e,r,n;return e=t,(r=[{key:"queryStop",value:function(t,e){var r=this;return new CS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferPath",value:function(t,e){var r=this;return new YP(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}},{key:"analysisTransferSolution",value:function(t,e){var r=this;return new nE(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers}).processAsync(t,e)}}])&&Uq(e.prototype,r),n&&Uq(e,n),Object.defineProperty(e,"prototype",{writable:!1}),t}(),Vq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._commonTrafficTransferAnalystService=new zq(t,e)},queryStop:function(t,e){return this._commonTrafficTransferAnalystService.queryStop(t,e)},analysisTransferPath:function(t,e){return t=this._processParams(t),this._commonTrafficTransferAnalystService.analysisTransferPath(t,e)},analysisTransferSolution:function(t,e){return t=this._processParams(t),this._commonTrafficTransferAnalystService.analysisTransferSolution(t,e)},_processParams:function(t){return t?(t.points&&wI().Util.isArray(t.points)&&t.points.map(function(e,r){return t.points[r]=e instanceof wI().LatLng?{x:e.lng,y:e.lat}:e,t.points[r]}),t):{}}}),Jq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._webPrintingService=new Tk(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},createWebPrintingJob:function(t,e){if(t)return this._webPrintingService.createWebPrintingJob(this._processParams(t),e)},getPrintingJob:function(t,e){this._webPrintingService.getPrintingJob(t,e)},getPrintingJobResult:function(t,e){return this._webPrintingService.getPrintingJobResult(t,e)},getLayoutTemplates:function(t){return this._webPrintingService.getLayoutTemplates(t)},_processParams:function(t){return t.layoutOptions&&t.layoutOptions.littleMapOptions&&(t.layoutOptions.littleMapOptions.center=this._toPointObject(t.layoutOptions.littleMapOptions.center)),t.exportOptions&&(t.exportOptions.center=this._toPointObject(t.exportOptions.center)),t},_toPointObject:function(t){return wI().Util.isArray(t)?{x:t[0],y:t[1]}:t instanceof Wt||t instanceof wI().Point?{x:t.x,y:t.y}:t instanceof wI().LatLng?{x:t.lng,y:t.lat}:t}}),qq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._imageService=new Wk(this.url,{proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getCollections:function(t){return this._imageService.getCollections(t)},getCollectionByID:function(t,e){return this._imageService.getCollectionByID(t,e)},search:function(t,e){return this._imageService.search(t,e)}}),Hq=nG.extend({initialize:function(t,e){nG.prototype.initialize.call(this,t,e),this._imageCollectionService=new Dk(this.url,{collectionId:this.options.collectionId,proxy:this.options.proxy,withCredentials:this.options.withCredentials,crossOrigin:this.options.crossOrigin,headers:this.options.headers})},getLegend:function(t,e){return this._imageCollectionService.getLegend(t,e)},getStatistics:function(t){return this._imageCollectionService.getStatistics(t)},getTileInfo:function(t){return this._imageCollectionService.getTileInfo(t)},deleteItemByID:function(t,e){return this._imageCollectionService.deleteItemByID(t,e)},getItemByID:function(t,e){return this._imageCollectionService.getItemByID(t,e)}}),Wq=wI().Control.extend({options:{position:"topright",style:function(t,e){return e?wI().circleMarker(e,{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}):{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}},onEachFeature:null},initialize:function(t){wI().setOptions(this,t),this._event=new(wI().Evented),this.rootContainer=null},onAdd:function(t){return this.map=t,this.rootContainer=this._initView(),this.rootContainer},on:function(t,e){this._event.on(t,e)},off:function(t,e){e?this._event.off(t,e):this._event.off(t)},_initView:function(){},_preventMapEvent:function(t,e){t&&e&&(t.addEventListener("mouseover",function(){e.dragging.disable(),e.scrollWheelZoom.disable(),e.doubleClickZoom.disable()}),t.addEventListener("mouseout",function(){e.dragging.enable(),e.scrollWheelZoom.enable(),e.doubleClickZoom.enable()}))}}),Yq=wI().Evented.extend({initialize:function(){this.fileModel=new OL},readFile:function(t){var e=t.target,r=e.files[0];if(r.size>this.fileModel.FileConfig.fileMaxSize)return this.fire("filesizeexceed",{messageType:"warring",message:EL.i18n("msg_fileSizeExceeded")}),!1;var n=e.value,o=r.name,i=BN(o);if(!i)return this.fire("errorfileformat",{messageType:"failure",message:EL.i18n("msg_fileTypeUnsupported")}),!1;""!==o&&(this.fileModel.set("loadFileObject",{file:r,filePath:n,fileName:o,fileType:i}),this._readData())},_readData:function(){var t=this,e=this,r=this.fileModel.loadFileObject.fileType;jL.readFile(r,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},function(n){jL.processDataToGeoJson(r,n,function(e){e&&t.fire("openfilesucceeded",{result:e,layerName:t.fileModel.loadFileObject.fileName.split(".")[0]})},function(t){e.fire("openfilefailed",{messageType:"failure",message:t})},t)},function(){e.fire("openfilefailed",{messageType:"failure",message:EL.i18n("msg_openFileFail")})},this)}}),Xq=Wq.extend({options:{layer:null},initialize:function(t){Wq.prototype.initialize.apply(this,[t]),this.viewModel=new Yq},setViewStyle:function(t,e){this.rootContainer.style[t]=e},_initView:function(){var t=this,e=wI().DomUtil.create("div","component-openfile");return e.id="openFile",this.fileSelect=wI().DomUtil.create("div","",e),this.label=wI().DomUtil.create("label","component-openfile__span--select",this.fileSelect),this.label.htmlFor="input_file",wI().DomUtil.create("div","supermapol-icons-upload",this.label),wI().DomUtil.create("span","component-openfile__span",this.label).appendChild(document.createTextNode(EL.i18n("text_chooseFile"))),this.fileInput=wI().DomUtil.create("input","component-openfile__input",this.fileSelect),this.fileInput.id="input_file",this.fileInput.type="file",this.fileInput.accept=".json,.geojson,.csv,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",this.fileInput.onchange=function(e){t.messageBox.closeView(),t.viewModel.readFile(e)},this.messageBox=new xL,this.viewModel.on("filesizeexceed",function(e){t.messageBox.showView(e.message,e.messageType)}),this.viewModel.on("errorfileformat",function(e){t.messageBox.showView(e.message,e.messageType)}),this.viewModel.on("openfilefailed",function(e){t.messageBox.showView(e.message,e.messageType),t._event.fire("openfilefailed",e)}),this.viewModel.on("readdatafail",function(e){t.messageBox.showView(e.message,e.messageType)}),this.viewModel.on("openfilesucceeded",function(e){t._event.fire("openfilesucceeded",e)}),this._preventMapEvent(e,this.map),e}});function Qq(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zq(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Kq(t,e,r){return e&&Zq(t.prototype,e),r&&Zq(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}var $q=function(){function t(e){Qq(this,t),this.layers=[],e&&e.length>0&&this.addLayers(e),this.currentLayerDataModel=null}return Kq(t,[{key:"addLayers",value:function(t,e,r,n){for(var o=0;o<t.length;o++){var i=t[o].layerName;if(t[o].layer instanceof wI().GeoJSON){var a=new tH(t[o].layer);this.layers[i]=a,e&&e.call(n,{layerName:i,layer:a})}else r&&r.call(n,"")}}},{key:"setCurrentLayerDataModel",value:function(t){this.layers[t]&&(this.currentLayerDataModel=this.layers[t])}}]),t}(),tH=function(){function t(e){if(Qq(this,t),this.layer=e,this.features=e.getLayers(),this.attributeNames=[],this.features[0].feature.properties)for(var r in this.features[0].feature.properties)this.attributeNames.push(r);this.operatingAttributeNames=[],this.attributes={}}return Kq(t,[{key:"setOperatingAttributeNames",value:function(t){this.operatingAttributeNames=t}},{key:"getAllAttributeNames",value:function(){return this.attributeNames}},{key:"getAttributeNamesByType",value:function(t){if(this.features[0].feature.properties){var e=this.features[0].feature.properties,r=[];if("Num"===t)for(var n in e)isNaN(e[n])||r.push(n);else r=this.attributeNames;return r}}},{key:"getAllFeatures",value:function(){return this.features}},{key:"getAttributeValueByAttributeName",value:function(t){if(this.attributes[t])return this.attributes[t];this.attributes[t]=[];for(var e=0;e<this.features.length;e++)this.attributes[t].push([this.features[e].feature.properties[t]]);return this.attributes[t]}},{key:"getFeaturesByKeyWord",value:function(t){var e=[],r=new RegExp(t.toLowerCase()),n=this;return this.features.forEach(function(t){if(!t.feature.properties)return null;for(var o,i=t.feature.properties,a=0,s=(o=n.operatingAttributeNames.length>0?n.operatingAttributeNames:n.attributeNames).length;a<s;a++)if(i[o[a]]&&r.test(i[o[a]].toString().toLowerCase())){var l=o[a],u=i[o[a]];t.filterAttribute={filterAttributeName:l,filterAttributeValue:u},e.push(t);break}}),e}}]),t}(),eH=wI().Evented.extend({options:{cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"}},initialize:function(t,e){if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,wI().Util.setOptions(this,e),this.dataModel=new $q,this.geoCodeParam={keyWords:"北京市",city:"北京市",pageSize:this.options.pageSize,pageNum:this.options.pageNum},this.searchCache={}},search:function(t,e){e?this.searchFromLayer(t,e):this.searchFromCityLocalSearchService(t)},searchFromLayer:function(t,e){if(this.dataModel.layers[e]){var r=this.dataModel.layers[e].getFeaturesByKeyWord(t);r&&r.length>0?this.fire("searchlayersucceeded",{result:r}):this.fire("searchfailed",{searchType:"searchLayersField"})}},searchFromCityLocalSearchService:function(t){if(this.searchCache[t])this.fire("geocodesucceeded",{result:this.searchCache[t]});else{this.geoCodeParam.keyWords=t||this.geoCodeParam.city;var e=this,r=this._getSearchUrl(this.geoCodeParam);mn.get(r).then(function(t){return t.json()}).then(function(t){if(t.error||0===t.poiInfos.length)e.fire("searchfailed",{searchType:"searchGeocodeField"});else if(t.poiInfos){var r=e._dataToGeoJson(t.poiInfos,e.geoCodeParam);e.fire("geocodesucceeded",{result:r})}})}},addSearchLayers:function(t){var e=this;this.dataModel.addLayers(t,function(t){e.fire("newlayeradded",{layerName:t.layerName})},null,this)},panToLayer:function(t){this.dataModel.layers[t]&&this.map.flyToBounds(this.dataModel.layers[t].layer.getBounds())},panToCity:function(t){this.geoCodeParam.keyWords=t,this.geoCodeParam.city=t;var e=this,r=this._getSearchUrl(this.geoCodeParam);mn.get(r).then(function(t){return t.json()}).then(function(t){if(t.poiInfos.length>0){var r=wI().latLng(t.poiInfos[0].location.y,t.poiInfos[0].location.x);e.map.setView(r,8)}else e.fire("searchfailed",{searchType:"cityGeocodeField"})})},_dataToGeoJson:function(t,e){for(var r=[],n=0;n<t.length;n++){var o={type:"Feature",geometry:{type:"Point",coordinates:[t[n].location.x,t[n].location.y]},properties:{name:t[n].name||e.keyWords,address:t[n].formatedAddress||t[n].address}};r.push(o)}return r},_getSearchUrl:function(t){return this.options.cityGeoCodingConfig.addressUrl+".json?keywords=".concat(t.keyWords,"&city=").concat(t.city,"&pageSize=").concat(t.pageSize,"&pageNum=").concat(t.pageNum,"&key=").concat(this.options.cityGeoCodingConfig.key)}}),rH=Wq.extend({options:{cityConfig:{HOT:{HOT:["北京市","上海市","广州市","深圳市","南京市","杭州市","天津市","重庆市","成都市","青岛市","苏州市","无锡市","常州市","温州市","武汉市","长沙市","南昌市","三亚市","合肥市","石家庄市"]},AB:{A:["阿拉善盟","鞍山市","安庆市","安阳市","阿坝藏族羌族自治州","安顺市","阿里地区","安康市","阿克苏地区","阿勒泰地区","阿拉尔市"],B:["北京市","保定市","包头市","巴彦淖尔市","本溪市","白山市","白城市","蚌埠市","亳州市","滨州市","北海市","百色市","白沙黎族自治县","保亭黎族苗族自治县","巴中市","毕节地区","保山市","宝鸡市","白银市","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","北区"]},CD:{C:["重庆市","成都市","常州市","长沙市","承德市","沧州市","长治市","赤峰市","朝阳市","长春市","滁州市","巢湖市","池州市","常德市","郴州市","潮州市","崇左市","澄迈县","昌江黎族自治县","楚雄彝族自治州","昌都地区","昌吉回族自治州"],D:["大同市","大连市","丹东市","大庆市","大兴安岭地区","东营市","德州市","东莞市","儋州市","东方市","定安县","德阳市","达州市","大理白族自治州","德宏傣族景颇族自治州","迪庆藏族自治州","定西市","东区","大埔区","大堂区"]},EFG:{E:["鄂尔多斯市","鄂州市","恩施土家族苗族自治州"],F:["抚顺市","阜新市","阜阳市","福州市","抚州市","佛山市","防城港市"],G:["广州市","赣州市","桂林市","贵港市","广元市","广安市","贵阳市","固原市","高雄市","高雄县","甘南藏族自治州","甘孜藏族自治州"]},H:{H:["杭州市","合肥市","邯郸市","衡水市","呼和浩特市","呼伦贝尔市","葫芦岛市","哈尔滨市","鹤岗市","黑河市","淮安市","湖州市","淮南市","淮北市","黄山市","菏泽市","鹤壁市","黄石市","黄冈市","衡阳市","怀化市","惠州市","河源市","贺州市","河池市","海口市","红河哈尼族彝族自治州","汉中市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","海西蒙古族藏族自治州","哈密地区","和田地区","花莲县","黄大仙区","花地玛堂区"]},J:{J:["晋城市","晋中市","锦州市","吉林市","鸡西市","佳木斯市","嘉兴市","金华市","景德镇市","九江市","吉安市","济南市","济宁市","焦作市","济源市","荆门市","荆州市","江门市","湛江市","揭阳市","嘉峪关市","金昌市","酒泉市","基隆市","嘉义市","嘉义县","九龙城区","嘉模堂区"]},KL:{K:["开封市","昆明市","克拉玛依市","克孜勒苏柯尔克孜自治州","喀什地区"],L:["廊坊市","临汾市","吕梁市","辽阳市","辽源市","连云港市","丽水市","六安市","龙岩市","莱芜市","临沂市","聊城市","洛阳市","漯河市","娄底市","柳州市","来宾市","临高县","乐东黎族自治县","陵水黎族自治县","泸州市","乐山市","凉山彝族自治州","六盘水市","丽江市","临沧市","拉萨市","林芝地区","兰州市","陇南市","临夏回族自治州"]},MNP:{M:["牡丹江市","马鞍山市","茂名市","梅州市","绵阳市","眉山市","苗栗县"],N:["南京市","南昌市","南通市","宁波市","南平市","宁德市","南阳市","南宁市","南沙群岛","内江市","南充市","怒江傈傈族自治州","那曲地区","南投县"],P:["盘锦市","莆田市","萍乡市","平顶山市","濮阳市","攀枝花市","平凉市","屏东县","澎湖县"]},QR:{Q:["青岛市","秦皇岛市","齐齐哈尔市","黔西南布依族苗族自治州","七台河市","衢州市","泉州市","潜江市","清远市","钦州市","琼海市","曲靖市","庆阳市","荃湾区","黔东南苗族侗族自治州","黔南布依族苗族自治州","琼中黎族苗族自治县"],R:["日照市","日喀则地区"]},S:{S:["上海市","深圳市","苏州市","石家庄市","三亚市","朔州市","沈阳市","四平市","松原市","双鸭山市","绥化市","宿迁市","绍兴市","宿州市","三明市","上饶市","三门峡市","商丘市","十堰市","随州市","邵阳市","韶关市","汕头市","汕尾市","三亚市","遂宁市","思茅市","山南地区","商洛市","石嘴山市","石河子市","深水埗区","沙田区","神农架林区","圣安多尼堂区","圣方济各堂区"]},T:{T:["天津市","唐山市","太原市","通辽市","铁岭市","通化市","泰州市","台州市","铜陵市","泰安市","天门市","屯昌县","铜仁地区","铜川市","天水市","吐鲁番地区","塔城地区","图木舒克市","台北市","台中市","台南市","台北县","桃园县","台中县","台南县","台东县","屯门区"]},W:{W:["无锡市","温州市","武汉市","乌海市","乌兰察布市","芜湖市","潍坊市","威海市","梧州市","五指山市","文昌市","万宁市","文山壮族苗族自治州","渭南市","武威市","吴忠市","乌鲁木齐市","五家渠市","湾仔区","望德堂区"]},X:{X:["邢台市","忻州市","兴安盟","徐州市","宣城市","厦门市","新余市","新乡市","许昌市","信阳市","襄樊市","孝感市","咸宁市","仙桃市","湘潭市","西安市","咸阳市","西宁市","新竹市","新竹县","西贡区","锡林郭勒盟","西沙群岛","湘西土家族苗族自治州","西双版纳傣族自治州"]},Y:{Y:["阳泉市","运城市","营口市","延边朝鲜族自治州","伊春市","盐城市","扬州市","鹰潭市","宜春市","烟台市","宜昌市","岳阳市","益阳市","永州市","阳江市","云浮市","玉林市","宜宾市","雅安市","玉溪市","延安市","榆林市","玉树藏族自治州","银川市","伊犁哈萨克自治州","宜兰县","云林县","油尖旺区","元朗区"]},Z:{Z:["郑州市","张家口市","镇江市","舟山市","漳州市","淄博市","枣庄市","周口市","驻马店市","株洲市","张家界市","珠海市","肇庆市","中山市","自贡市","资阳市","遵义市","昭通市","张掖市","中卫市","彰化县","中西区","中沙群岛的岛礁及其海域"]}},cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},isGeoCoding:!0,pageSize:10,pageNum:1,perPageDataNum:8},initialize:function(t){Wq.prototype.initialize.apply(this,[t]),this.currentSearchLayerName="",this.isSearchLayer=!1,this.perPageDataNum=this.options.perPageDataNum},onAdd:function(t){return this.viewModel=new eH(t,this.options),Wq.prototype.onAdd.apply(this,[t])},addSearchLayer:function(t){this.viewModel.addSearchLayers(t)},_initView:function(){var t=this,e=this,r=document.createElement("div");r.setAttribute("class","component-search-container");var n=document.createElement("div");n.setAttribute("class","component-search");var o=document.createElement("div");o.setAttribute("class","component-search__settings");var i=document.createElement("div");i.setAttribute("class","component-search__settings__name"),o.appendChild(i);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-solid-down-triangle"),o.appendChild(a);var s=null;if(this.options.isGeoCoding){var l=new EN({config:this.options.cityConfig});s=l.getElement(),l.content.onclick=function(e){"SPAN"===e.target.nodeName&&e.target.innerText&&(t.viewModel.panToCity(e.target.innerHTML),t.messageBox.closeView(),i.removeChild(i.firstChild),i.insertBefore(document.createTextNode(e.target.innerHTML),i.firstChild),t.isSearchLayer=!1)},i.appendChild(document.createTextNode(l.content.getElementsByTagName("span")[0].innerText))}var u=function(){var t=document.createElement("div");t.setAttribute("class","component-search__layers");var r=document.createElement("div");r.setAttribute("class","component-search-layers-content"),t.appendChild(r);var n=document.createElement("div");n.setAttribute("class","component-search__layers__header");var o=document.createElement("div");o.setAttribute("class","load-btn"),n.appendChild(o);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-poi-load"),o.appendChild(a);var s=document.createElement("span");s.appendChild(document.createTextNode(EL.i18n("text_loadSearchCriteria"))),o.appendChild(s);var l=document.createElement("div");l.setAttribute("class","save-btn"),n.appendChild(l);var u=document.createElement("span");u.setAttribute("class","supermapol-icons-poi-save"),l.appendChild(u);var c=document.createElement("span");c.appendChild(document.createTextNode(EL.i18n("text_saveSearchCriteria"))),l.appendChild(c);var f=document.createElement("div");return f.setAttribute("class","component-search__layers__body"),f.onclick=function(t){e.clearSearchResult();var r=null;if("component-search__layers__itme__singleselect"===t.target.classList[0])r=t.target;else{if("component-single-default-img"!==t.target.classList[0]&&"single-label"!==t.target.classList[0])return;r=t.target.parentNode}document.getElementsByClassName("component-single-checked-img").length>0&&document.getElementsByClassName("component-single-checked-img")[0].setAttribute("class","component-single-default-img"),r.firstChild.setAttribute("class","component-single-checked-img"),e.currentSearchLayerName=r.lastChild.innerText,e.isSearchLayer=!0,i.removeChild(i.firstChild),i.insertBefore(document.createTextNode(e.currentSearchLayerName),i.firstChild),e.viewModel.panToLayer(e.currentSearchLayerName),e.messageBox.closeView()},r.appendChild(f),t}(),c=[];s&&c.push({title:EL.i18n("title_searchCity"),content:s}),c.push({title:EL.i18n("title_searchLayer"),content:u});var f=new MN({tabs:c}),h=f.getElement();f.closeView(),n.appendChild(h),o.onclick=function(){h.hidden?f.showView():f.closeView()},n.appendChild(o),i.innerText||i.appendChild(document.createTextNode(EL.i18n("text_label_chooseSearchLayers")));var p=document.createElement("div");p.setAttribute("class","component-search__input");var y=document.createElement("input");y.type="text",y.placeholder=EL.i18n("text_label_searchTips"),p.appendChild(y),this.poiInput=y;var d=document.createElement("span");d.setAttribute("class","supermapol-icons-close"),d.hidden=!0,p.appendChild(d),n.appendChild(p);var b=document.createElement("div");b.setAttribute("class","component-search-icon supermapol-icons-search");var v=new FN;this._resultDomObj=v,b.onclick=function(){v.closeView(),t.clearSearchResult(),t.messageBox.closeView(),f.closeView();var e=t.poiInput.value.trim();""!==e?t.isSearchLayer?t.viewModel.search(e,t.currentSearchLayerName):t.viewModel.search(e):t.messageBox.showView(EL.i18n("msg_searchKeywords"))},y.onkeypress=function(t){if(13==t.which){var e=document.createEvent("HTMLEvents");e.initEvent("click",!1,!0),b.dispatchEvent(e)}},n.appendChild(b);var m=function(){var t=v.getElement();return t.style.position="absolute",t.style.top="44px",t.style.right="0",v.closeView(),v.content.onclick=function(t){var r=null;if("component-search-result-info"===t.target.parentNode.className)r=t.target.parentNode.parentNode;else if("component-search__resultitme"===t.target.parentNode.className)r=t.target.parentNode;else{if("component-search__resultitme"!==t.target.className)return;r=t.target}document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),r.firstChild.classList.add("component-search__resultitme-selected");var n=r.children[1].firstChild.innerText;e._linkageFeature(n)},t}();return n.appendChild(m),d.onclick=function(e){t.clearSearchResult(),y.value="",e.target.hidden=!0,v.closeView()},y.oninput=function(){d.hidden=!1},this.messageBox=new xL,this._addViewModelListener(),r.appendChild(n),this._preventMapEvent(r,this.map),r},_createSearchLayerItem:function(t){var e=document.createElement("div");e.setAttribute("class","component-search__layers__itme");var r=document.createElement("div");r.setAttribute("class","component-search__layers__itme__singleselect");var n=document.createElement("div");n.setAttribute("class","component-single-default-img"),r.appendChild(n);var o=document.createElement("span");o.setAttribute("class","single-label"),o.innerHTML=t,r.appendChild(o),e.appendChild(r),document.getElementsByClassName("component-search__layers__body")[0].appendChild(e)},_createResultItem:function(t,e){var r=document.createElement("div");r.setAttribute("class","component-search__resultitme");var n=document.createElement("div");"Point"===t||"MultiPoint"===t?n.setAttribute("class","supermapol-icons-marker-layer component-search-result-icon"):"LineString"===t||"MultiLineString "===t?n.setAttribute("class","supermapol-icons-line-layer component-search-result-icon"):"Polygon"===t||"MultiPolygon"===t?n.setAttribute("class","supermapol-icons-polygon-layer component-search-result-icon"):n.setAttribute("class","supermapol-icons-point-layer component-search-result-icon"),r.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-search-result-info");var i=document.createElement("div");o.appendChild(i);var a=document.createElement("div");return e.name?(i.innerHTML=e.name,a.innerHTML=e.address,o.appendChild(a)):i.innerHTML=e.filterAttributeName+": "+e.filterAttributeValue,r.appendChild(o),document.createElement("div").setAttribute("class","component-checkbox component-checkbox-default-img"),r},_addViewModelListener:function(){var t=this;this.viewModel.on("searchlayerschanged",function(e){for(var r=0;r<e.length;r++)t._createSearchLayerItem(e[r])}),this.viewModel.on("newlayeradded",function(e){t._createSearchLayerItem(e.layerName)}),this.viewModel.on("searchlayersucceeded",function(e){var r=e.result;t.clearSearchResult(),t.searchResultLayer=wI().featureGroup(r,{pointToLayer:t.options.style,style:t.options.style}).bindPopup(function(t){if(t.feature.properties)return new yN({attributes:t.feature.properties}).getElement()}).addTo(t.map),t.searchResultLayer.eachLayer(function(e){t.options.onEachFeature?t.options.onEachFeature(e.toGeoJSON(),e):t._featureOnclickEvent.bind(t)(e.toGeoJSON(),e)}),t.searchLayersData=r,t._prepareResultData(r),t._event.fire("searchlayersucceeded",{result:t.searchResultLayer.toGeoJSON()})}),this.viewModel.on("geocodesucceeded",function(e){var r=e.result;t.clearSearchResult(),t.searchResultLayer=wI().geoJSON(r,{pointToLayer:t.options.style,style:t.options.style,onEachFeature:t.options.onEachFeature||t._featureOnclickEvent.bind(t)}).bindPopup(function(t){if(t.feature.properties)return new yN({attributes:t.feature.properties}).getElement()}).addTo(t.map),t.searchLayersData=r,t._prepareResultData(r),t._event.fire("geocodesucceeded",{result:r})}),this.viewModel.on("searchfailed",function(e){var r="";r="searchGeocodeField"===e.searchType?EL.i18n("msg_searchGeocodeField"):"cityGeocodeField"===e.searchType?EL.i18n("msg_cityGeocodeField"):EL.i18n("msg_getFeatureField"),t.messageBox.showView(r),t._event.fire("searchfailed",{message:r})})},_prepareResultData:function(t){this.currentResult=t;var e=Math.ceil(t.length/this.perPageDataNum);this._resultDomObj.setPageLink(e),this._createResultListByPageNum(1,t),this._resultDomObj.showView(),this._resultDomObj.setLinkageEvent(function(t){r._createResultListByPageNum(t,r.currentResult)});var r=this},_createResultListByPageNum:function(t,e){var r,n=0;1===t&&e.length<this.perPageDataNum?r=e.length-1:t*this.perPageDataNum>e.length?(n=this.perPageDataNum*(t-1),r=e.length-1):(n=this.perPageDataNum*(t-1),r=t*this.perPageDataNum-1);for(var o=document.createElement("div"),i=n;i<=r;i++){var a=void 0,s="Point";e[i].filterAttribute?(s=e[i].feature.geometry.type,a=e[i].filterAttribute):a=e[i].properties,o.appendChild(this._createResultItem(s,a))}this._resultDomObj.setContent(o),this._resultDomObj.showView(),o.firstChild.getElementsByClassName("component-search-result-icon")[0].classList.add("component-search__resultitme-selected");var l=o.firstChild.getElementsByClassName("component-search-result-info")[0].firstChild.innerText;!this._selectMarkerFeature&&this._linkageFeature(l)},_flyToBounds:function(t){var e=t.getSouthWest(),r=t.getNorthEast();e.lat===r.lat&&e.lng===r.lng?this.map.flyTo(e):this.map.fitBounds(t)},_linkageFeature:function(t){var e=this,r="";r=this.isSearchLayer?t.split(":")[1].trim():t,this._selectFeature&&this._selectFeature.addTo(this.map),this.searchResultLayer.eachLayer(function(t){(!r||t.filterAttribute&&t.filterAttribute.filterAttributeValue===r||t.feature.properties&&t.feature.properties.name===r)&&(t.remove(),e._setSelectedLayerStyle(t))})},clearSearchResult:function(){this.searchResultLayer&&(this.map.closePopup(),!this.isSearchLayer&&this.map.removeLayer(this.searchResultLayer),this._selectMarkerFeature&&this.map.removeLayer(this._selectMarkerFeature),this._selectFeaturethis&&this.map.removeLayer(this._selectFeature),this._selectMarkerFeature=null,this._selectFeature=null,this.searchResultLayer=null,this.currentResult=null)},_featureOnclickEvent:function(t,e){var r=this;e.on("click",function(){var n,o,i=document.getElementsByClassName("component-pagination__link")[0];r._resultDomObj._changePageEvent({target:i.children[0].children[0]}),r._selectFeature&&r._selectFeature.addTo(r.map),e.remove();for(var a=0;a<r.searchLayersData.length;a++){var s=r.searchLayersData[a];if(s.properties&&s.properties.name===t.properties.name||s.filterAttribute&&s.filterAttribute.filterAttributeName+": "+s.filterAttribute.filterAttributeValue==e.filterAttribute.filterAttributeName+": "+e.filterAttribute.filterAttributeValue){o=a%r.perPageDataNum,n=parseInt(a/r.perPageDataNum)+1;break}}if(n>1)for(var l=1;l<n;l++){var u;u=document.getElementsByClassName("component-pagination__link")[0],r._resultDomObj._changePageEvent({target:u.children[u.children.length-2].children[0]})}var c=document.getElementsByClassName("component-search-result-info"),f=c[o].children[0];if(f.innerHTML===t.properties.name||f.innerHTML===e.filterAttribute.filterAttributeName+": "+e.filterAttribute.filterAttributeValue){var h=c[o].parentNode;document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),h.firstChild.classList.add("component-search__resultitme-selected"),r._setSelectedLayerStyle(e)}},this)},_setSelectedLayerStyle:function(t){var e;this._selectMarkerFeature&&this._selectMarkerFeature.remove(),this._selectMarkerFeature=null,this._selectFeature=t,this._selectMarkerFeature=wI().geoJSON(t.toGeoJSON(),{pointToLayer:function(t,e){return wI().marker(e,{icon:wI().divIcon({className:"component-select-marker-icon",iconAnchor:[15,0]})})},style:{fillColor:"red",weight:1,opacity:1,color:"red",fillOpacity:.2}}).addTo(this.map),this._selectMarkerFeature.bindPopup(function(){return new yN({attributes:t.feature.properties}).getElement()},{closeOnClick:!1}).openPopup().addTo(this.map),this._flyToBounds(this.searchResultLayer.getBounds()),t.getLatLng?e=t.getLatLng():t.getCenter&&(e=t.getCenter()),this.map.setView(e)}}),nH=wI().Evented.extend({options:{_defaultLayerOptions:{style:null,onEachFeature:function(t,e){var r="属性信息如下：<br>";for(var n in t.properties)r+=n+": "+t.properties[n]+"<br>";e.bindPopup(r)}}},initialize:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!t)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=t,wI().Util.extend(this.options._defaultLayerOptions,e),this.options._defaultLayerOptions.pointToLayer=this.options._defaultLayerOptions.style,this.popupsStatus=!0,this.dataFlowStatus=!1,this.dataFlowUrl="",this.currentFeatures=[],this.dataFlowLayer=null},subscribe:function(t){var e=this;if(this.dataFlowUrl===t){if(this.dataFlowStatus)return void this.fire("dataflowservicesubscribed")}else this.dataFlowUrl=t;this.dataFlowStatus=!0,this.dataFlowLayer&&(this.dataFlowLayer.remove(),this.dataFlowLayer=null);var r=new GU(t,this.options._defaultLayerOptions);r.on("subscribesucceeded",function(t){e.fire("subscribesucceeded",{result:t})}),r.on("subscribefailed",function(t){e.fire("subscribefailed",{result:t})}),r.on("dataupdated",function(t){e.fire("dataupdated",{result:t});var r=t.layer.getBounds(),n=uG.toSuperMapBounds(e.map.getBounds()),o=uG.toSuperMapBounds(r);n.intersectsBounds(o)||(o.left===o.right&&o.top===o.bottom?e.map.setView(r.getCenter()):e.map.flyToBounds(r)),e.popupsStatus&&e.openPopups()}),r.addTo(this.map),this.dataFlowLayer=r},cancelSubscribe:function(){this.dataFlowLayer&&(this.dataFlowStatus=!1,this.dataFlowLayer.dataService.unSubscribe(),this.dataFlowLayer.remove(),this.dataFlowLayer=null)},openPopups:function(){if(this.popupsStatus=!0,this.dataFlowLayer)for(var t=this.dataFlowLayer.getLayers(),e=0;e<t.length;e++)for(var r=0;r<t[e].getLayers().length;r++)t[e].getLayers()[r].openPopup()},closePopups:function(){if(this.popupsStatus=!1,this.dataFlowLayer)for(var t=this.dataFlowLayer.getLayers(),e=0;e<t.length;e++)for(var r=0;r<t[e].getLayers().length;r++)t[e].getLayers()[r].closePopup()}}),oH=Wq.extend({initialize:function(t){Wq.prototype.initialize.apply(this,[t])},onAdd:function(t){var e={};return this.options.style&&(e.style=this.options.style),this.options.onEachFeature&&(e.style=this.options.onEachFeature),this.viewModel=new nH(t,e),Wq.prototype.onAdd.apply(this,[t])},_initView:function(){var t=this,e=new JL({title:EL.i18n("title_dataFlowService")}),r=e.getElement(),n=e.getContentElement();n.style.padding="10px 18px";var o=document.createElement("div");o.setAttribute("class","component-dataflow__container");var i=document.createElement("div");i.setAttribute("class","component-input-default");var a=document.createElement("input");a.setAttribute("class","component-input-default"),a.type="text",a.placeholder=EL.i18n("text_input_value_inputDataFlowUrl"),a.title=EL.i18n("text_input_value_inputDataFlowUrl"),i.appendChild(a);var s=document.createElement("span");s.setAttribute("class","supermapol-icons-close"),s.hidden=!0,s.onclick=function(t){a.value="",t.target.hidden=!0},a.oninput=function(){s.hidden=!1},i.appendChild(s),o.appendChild(i),n.appendChild(o);var l=document.createElement("div");l.setAttribute("class","component-dataflow__container");var u=document.createElement("div");u.setAttribute("class","component-checkbox-container");var c=document.createElement("div");c.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),c.checked=!0,u.appendChild(c);var f=document.createElement("div");f.setAttribute("class","component-label component-label-selected"),f.innerHTML=EL.i18n("text_displayFeaturesInfo"),u.appendChild(f),c.onclick=function(e){e.target.checked=!e.target.checked,e.target.checked?(f.setAttribute("class","component-label component-label-selected"),e.target.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),t.viewModel.openPopups()):(f.setAttribute("class","component-label"),e.target.setAttribute("class","component-checkbox-default component-checkbox-default-img"),t.viewModel.closePopups())},l.appendChild(u),n.appendChild(l);var h=document.createElement("div");h.setAttribute("class","component-dataflow__container component-init-center");var p=document.createElement("button");p.setAttribute("class","component-button-default"),p.innerHTML=EL.i18n("text_subscribe"),p.onclick=function(){var e=a.value;""!==e?t.viewModel.subscribe(e):t.messageBox.showView(EL.i18n("msg_inputDataFlowUrlFirst"))},h.appendChild(p);var y=document.createElement("button");return y.setAttribute("class","component-button-default"),y.innerHTML=EL.i18n("text_cancelSubscribe"),y.onclick=function(){t.viewModel.cancelSubscribe()},h.appendChild(y),n.appendChild(h),this.messageBox=new xL,this.viewModel.on("dataflowservicesubscribed",function(){t.messageBox.showView(EL.i18n("msg_dataflowservicesubscribed"))}),this.viewModel.on("subscribesucceeded",function(){t.messageBox.showView(EL.i18n("msg_subscribesucceeded"))}),this.viewModel.on("dataupdated",function(e){t.messageBox.closeView(),t._event.fire("dataupdated",e)}),this._preventMapEvent(r,this.map),r}});function iH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var aH=function(t,e,r){return e&&iH(t.prototype,e),r&&iH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=e,this.layer=r});function sH(t){"@babel/helpers - typeof";return(sH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function uH(t,e){return(uH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function cH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=fH(t);if(e){var o=fH(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===sH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function fH(t){return(fH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var hH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uH(t,e)}(i,wI().Evented);var e,r,n,o=cH(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"initialize",value:function(t){this.workerUrl=t,this.turfLayers=[]}},{key:"getLayersData",value:function(t){for(var e={},r={},n={},o={},i=0;i<t;i++)t[i]=new aH(t[i].layerName,t[i].layer);this.geoJsonLayersDataModel=new $q(t);for(var a=[],s=0;s<t.length;s++)a[t[s].layerName]={fields:t[s].fields,layer:t[s].layer.toGeoJSON()};for(var l in this.geoJsonLayersDataModel.layers){var u=void 0;u=a[l].fields?a[l].fields:this.geoJsonLayersDataModel.layers[l].getAttributeNamesByType("Num");for(var c=[],f=0;f<u.length;f++){c[u[f]]=this.geoJsonLayersDataModel.layers[l].getAttributeValueByAttributeName(u[f]);for(var h=c[u[f]],p=0;p<h.length;p++)""!=h[p]&&void 0!==h[p]||(h.splice(p,1),p-=1),h[p]=parseFloat(h[p]);c[u[f]]=Array.from(new Set(h.sort(function(t,e){return t-e})))}var y={layerName:l,fields:u,fieldsValue:c,features:a[l].layer},d=a[l].layer.features[0].geometry.type;"Point"===d?r[l]=y:"LineString"===d?n[l]=y:"Polygon"===d&&(o[l]=y)}return e.point=r,e.lineString=n,e.polygon=o,e}},{key:"analysis",value:function(t,e){this.geoJsonLayersDataModel.setCurrentLayerDataModel(t.analysisLayers),this.worker=new Worker(this.workerUrl);var r=this.geoJsonLayersDataModel.currentLayerDataModel.layer.toGeoJSON();if("isolines"===t.analysisMethod){for(var n=t.analysisFieldsValue.split(","),o=r,i=0;i<n.length;i++)n[i]=parseFloat(n[i]);var a=this,s={pointGrid:o,analysisMethod:t.analysisMethod,breaks:n,zProperty:t.analysisFields,analysisCellSize:t.analysisCellSize,options:{gridType:"point",property:t.analysisFields,weight:Number(t.analysisBreaks)}};this.worker.postMessage(s),this.worker.onmessage=function(r){if(0===r.data.features.length)a.fire("analysisfailed");else{a.fire("analysissucceeded",{data:r.data});var n=wI().geoJSON(r.data,{style:{color:"#1060C2",weight:3},onEachFeature:function(t,e){t.properties&&e.bindPopup(new yN(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",weight:5})},mouseout:function(){e.setStyle({color:"#1060C2",weight:3})},click:function(){e.setStyle({color:"#ffffff",weight:5})}})}}).addTo(e);a.turfLayers.push(n),a.fire("layerloaded",{layer:n,name:t.resultLayersName}),a.worker.terminate()}}}else if("buffer"===t.analysisMethod){var l=this,u={analysisMethod:"buffer",radius:t.radius,unit:t.unit,isSave:t.isSaveStatus,isUnion:t.isUnion,geoJson:r};this.worker.postMessage(u),this.worker.onmessage=function(r){var n=wI().geoJSON(r.data,{style:{color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5},onEachFeature:function(t,e){t.properties&&e.bindPopup(new yN(t.properties).getElement()),e.on({mouseover:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:5})},mouseout:function(){e.setStyle({color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5})},click:function(){e.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:2})}})}}).addTo(e);l.turfLayers.push(n),l.fire("layerloaded",{layer:n,name:t.resultLayersName}),l.worker.terminate()}}}},{key:"clearLayers",value:function(){for(var t in this.turfLayers)this.turfLayers[t].clearLayers();this.fire("layersremoved",{layers:this.turfLayers})}},{key:"cancelAnalysis",value:function(){this.worker.terminate()}}])&&lH(e.prototype,r),n&&lH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),pH=Wq.extend({initialize:function(t,e){if(!t)throw new Error("workerUrl is required");this.workerUrl=t,Wq.prototype.initialize.apply(this,[e])},onAdd:function(t){return this.map=t,Wq.prototype.onAdd.apply(this,[t])},addLayer:function(t){this.layers=this.layers||[],this.layers.push(t);var e=this.viewModel.getLayersData(this.layers);this.fillDataToView(e)},fillDataToView:function(t){if(t){this.fillData=t;var e={};switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":case"buffer":e=t.point}if("{}"!=JSON.stringify(e)){var r=[];for(var n in e)r.push(n);var o=document.getElementById("layersSelect"),i=document.getElementById("layerSelectName");o.innerHTML="",i.title=r[0],i.innerHTML=r[0],this._createOptions(o,r),this.layerSelectObj.optionClickEvent(o,i,this.layersSelectOnchange);var a=e[i.title],s=a.fields,l=a.fieldsValue;this.currentData=a,this.currentFillData=e;var u=document.getElementById("fieldsSelect");u.innerHTML="";var c=document.getElementById("fieldsSelectName");c.innerHTML=s[0],c.title=s[0],this._createOptions(u,s),this.fieldsSelectObj.optionClickEvent(u,c,this.fieldsSelectOnchange);var f=c.title,h=document.getElementById("getValueTextArea");h.value=l[f].toString().replace(/,/g,",\r\n"),h.setAttribute("data-value",l[f]);var p=document.getElementById("resultLayersName");switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":p.value=EL.i18n("text_label_isolines")+i.title;break;case"buffer":p.value=EL.i18n("text_label_buffer")+i.title}}}},_initView:function(){var t=this;this.workerUrl&&(this.viewModel=new hH(this.workerUrl));var e=new JL({title:EL.i18n("title_clientComputing")}).getElement();e.classList.add("component-analysis"),e.children[0].style.fontSize="12px";var r=[{title:EL.i18n("text_isoline"),dataValue:"isolines",remark:EL.i18n("text_extractDiscreteValue"),icon:{className:"component-analyst-isoline-img"}},{title:EL.i18n("text_buffer"),dataValue:"buffer",remark:EL.i18n("text_specifyTheDistance"),icon:{className:"component-analyst-buffer-img"}}],n=e.children[1];n.classList.add("component-content--scroll"),n.classList.add("component-content--analysis");var o=new rN(r).getElement();n.appendChild(o);var i=o.children[0].children[0],a=o.children[0].children[2].children[0];i.children[0].id="dropDownTop";var s=wI().DomUtil.create("div","component-analysis__container",n),l=wI().DomUtil.create("div","component-analysis__container__analysisLayer",s),u=wI().DomUtil.create("div","component-analysis__selecttool",l);u.id="layerSelectControl";var c={optionsArr:[""],labelName:EL.i18n("text_label_analysisLayer")},f=new QL(c),h=f.getElement();this.layerSelectObj=f,u.appendChild(h);var p=h.children[1].children[0];p.id="layerSelectName",h.children[1].children[2].children[0].children[0].id="layersSelect";var y=wI().DomUtil.create("div","component-analysis__container__analysistype",s),d=wI().DomUtil.create("div","component-clientcomputation__isoline",y),b={optionsArr:[""],labelName:EL.i18n("text_label_extractField"),optionsClickCb:this.fieldsSelectOnchange},v=wI().DomUtil.create("div","component-analysis__selecttool",d),m=new QL(b),g=m.getElement();this.fieldsSelectObj=m;var w=g.children[1].children[0];w.id="fieldsSelectName";var _=g.children[1].children[2].children[0].children[0];_.id="fieldsSelect",v.appendChild(g);var O=wI().DomUtil.create("div","component-analysis__container",d);wI().DomUtil.create("span","component-textarea__name",O).innerHTML=EL.i18n("text_label_extractedValue");var S=wI().DomUtil.create("div","component-textarea",O);S.id="getValueText";var x=wI().DomUtil.create("div","",S),P=wI().DomUtil.create("div","component-scrollarea-content",x);P.setAttribute("tabindex","1");var E=wI().DomUtil.create("textarea","component-textarea__content",P);E.id="getValueTextArea",E.setAttribute("rows","20");var k=wI().DomUtil.create("div","",d);wI().DomUtil.create("span","",k).innerHTML=EL.i18n("text_label_distanceAttenuation");var j=wI().DomUtil.create("input","",k);j.value="3";var T=wI().DomUtil.create("div","",d);wI().DomUtil.create("span","",T).innerHTML=EL.i18n("text_label_gridSize");var C=wI().DomUtil.create("input","",T);C.value="30";var A=wI().DomUtil.create("div","component-clientcomputation__buffer hidden",y),M=wI().DomUtil.create("div","component-clientcomputation__buffer--radius",A);wI().DomUtil.create("span","",M).innerHTML=EL.i18n("text_label_bufferRadius");var R=wI().DomUtil.create("div","",M),L=wI().DomUtil.create("input","buffer-radius-input",R);L.id="bufferRadiusInput",L.value="10",L.setAttribute("placeholder",EL.i18n("text_label_defaultkilometers"));var N=wI().DomUtil.create("div","component-clientcomputation__buffer--unit",R);N.id="bufferUnit";var I={optionsArr:[EL.i18n("text_option_kilometer")],labelName:EL.i18n("text_label_unit")},D=new QL(I).getElement(),F=D.children[1].children[0];F.id="bufferUnitSelectName",D.children[1].children[2].children[0].children[0].id="bufferUnitSelect",D.children[0].style.display="none",N.appendChild(D);var B=wI().DomUtil.create("div","",M),G=wI().DomUtil.create("div","component-clientcomputation__buffer--issaveattrs",B);G.id="saveAttrsContainer";var U=wI().DomUtil.create("div","checkbox checkbox-fault",G);U.id="saveAttrsCheckbox";var z=wI().DomUtil.create("div","lable",G);z.id="saveAttrsLabel",z.innerHTML=EL.i18n("text_retainOriginal");var V=wI().DomUtil.create("div","component-clientcomputation__buffer--isunion",B);V.id="isUnionContainer";var J=wI().DomUtil.create("div","checkbox checkbox-fault",V);J.id="isUnionCheckbox";var q=wI().DomUtil.create("div","lable",V);q.innerHTML=EL.i18n("text_mergeBuffer"),q.id="isUnionLabel";var H=wI().DomUtil.create("div","component-analysis__container__resultLayersName",s);wI().DomUtil.create("span","",H).innerHTML=EL.i18n("text_label_resultLayerName");var W=wI().DomUtil.create("input","",H);W.id="resultLayersName";var Y=wI().DomUtil.create("div","component-analysis__container__analysisbtn",s),X=wI().DomUtil.create("div","component-analysis__analysisbtn",Y),Q=wI().DomUtil.create("button","component-analysis__analysisbtn--analysis",X);Q.innerHTML=EL.i18n("btn_analyze");var Z=wI().DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",X),K=wI().DomUtil.create("div","component-analysis__analysisbtn--analysising",Z),$=wI().DomUtil.create("div","component-analysis__svg-container",K);$.id="analyse_background",$.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',wI().DomUtil.create("span","",K).innerHTML=EL.i18n("btn_analyzing");var tt=wI().DomUtil.create("button","component-analysis__analysisbtn--cancel",Z);tt.innerHTML=EL.i18n("btn_cancelAnalysis");var et=wI().DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",X);et.innerHTML=EL.i18n("btn_emptyTheAnalysisLayer");for(var rt=function(e){a.children[e].onclick=function(){i.innerHTML=a.children[e].outerHTML,i.children[0].id="dropDownTop";var r=document.getElementById("layersSelect"),o=document.getElementById("layerSelectName"),s=a.children[e].getAttribute("data-value"),l={};switch(s){case"buffer":d.classList.add("hidden"),A.classList.remove("hidden"),n.style.height="422px",W.value=EL.i18n("text_label_buffer")+o.title,l=t.fillData.point;break;case"isolines":d.classList.remove("hidden"),A.classList.add("hidden"),n.style.height="712px",W.value=EL.i18n("text_label_isolines")+o.title,l=t.fillData.point}if(t.currentFillData!==l){if(r.innerHTML="","{}"==JSON.stringify(l))return W.value="",o.title="",void(o.innerHTML="");var u=[];for(var c in l)u.push(c);o.title=u[0],o.innerHTML=u[0],t._createOptions(r,u),t.layerSelectObj.optionClickEvent(r,o,t.layersSelectOnchange),"buffer"===s?W.value=EL.i18n("text_label_buffer")+u[0]:"isolines"===s&&(W.value=EL.i18n("text_label_isolines")+u[0]),t.currentData=l[o.title],t.currentFillData=l}}},nt=0;nt<a.children.length;nt++)rt(nt);this.fieldsSelectOnchange=function(t){if(this.currentData){var e=this.currentData,r=t.title;E.value=e.fieldsValue[r].toString().replace(/,/g,",\r\n"),E.setAttribute("data-value",e.fieldsValue[r])}}.bind(this),this.layersSelectOnchange=function(t){if(this.currentData){var e=t.title,r=this.currentFillData[e];this.currentData=r,_.innerHTML="",this._createOptions(_,r.fields);var n=document.getElementById("fieldsSelectName"),o=r.fields[0];n.title=o,n.innerHTML=o;var i=o;this.fieldsSelectObj.optionClickEvent(_,n,this.fieldsSelectOnchange),E.value=r.fieldsValue[i].toString().replace(/,/g,",\r\n"),E.setAttribute("data-value",r.fieldsValue[i]);var a=document.getElementById("dropDownTop").getAttribute("data-value");switch(a){case"buffer":W.value=EL.i18n("text_label_buffer")+e;break;case"isolines":W.value=EL.i18n("text_label_isolines")+e}}}.bind(this);var ot=!0,it=!1;return z.classList.add("selected"),U.classList.add("checkbox-active"),G.onclick=function(){ot?(U.classList.add("checkbox-fault"),U.classList.remove("checkbox-active"),z.classList.remove("selected"),ot=!1):(U.classList.add("checkbox-active"),U.classList.remove("checkbox-fault"),z.classList.add("selected"),ot=!0,it&&(J.classList.add("checkbox-fault"),J.classList.remove("checkbox-active"),it=!1))},V.onclick=function(){it?(J.classList.add("checkbox-fault"),J.classList.remove("checkbox-active"),q.classList.remove("selected"),it=!1):(J.classList.add("checkbox-active"),J.classList.remove("checkbox-fault"),q.classList.add("selected"),it=!0,ot&&(U.classList.add("checkbox-fault"),U.classList.remove("checkbox-active"),ot=!1))},this.messageBox=new xL,Q.onclick=function(){var e;switch(Z.style.display="block",Q.style.display="none",document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":e=function(){var t=document.getElementById("dropDownTop").getAttribute("data-value"),e=document.getElementById("resultLayersName").value,r=p.title,n=w.title,o=E.value.replace(/[\r\n]/g,"").split(",").toString(),i=j.value,a=C.value;return{analysisMethod:t,analysisLayers:r,analysisFields:n,analysisFieldsValue:o,analysisBreaks:i,analysisCellSize:a,resultLayersName:e}}();break;case"buffer":e=function(){var t=document.getElementById("dropDownTop"),e=document.getElementById("resultLayersName").value,r=p.title,n=t.getAttribute("data-value"),o=L.value,i=F.title;return{analysisMethod:n,analysisLayers:r,radius:o,unit:i,resultLayersName:e,isSaveStatus:ot,isUnion:it}}()}t.viewModel.analysis(e,t.map),t.viewModel.on("layerloaded",function(e){Z.style.display="none",Q.style.display="block",t._event.fire("analysissucceeded",{layer:e.layer,name:e.name})}),t.viewModel.on("analysisfailed",function(){Z.style.display="none",Q.style.display="block",t.messageBox.showView(EL.i18n("msg_resultIsEmpty"),"failure"),t._event.fire("analysisfailed")})},tt.onclick=function(){Z.style.display="none",Q.style.display="block",t.viewModel.cancelAnalysis()},et.onclick=function(){t.viewModel.on("layersremoved",function(e){t._event.fire("layersremoved",{layers:e.layers})}),t.viewModel.clearLayers()},this._preventMapEvent(e,this.map),e},_createOptions:function(t,e){for(var r in e){var n=document.createElement("div"),o=e[r];n.className="component-selecttool__option",n.title=o,n.innerHTML=o,n.setAttribute("data-value",o),t.appendChild(n)}}});function yH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var dH=function(t,e,r){return e&&yH(t.prototype,e),r&&yH(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}(function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.layerName=e.layerName,this.layer=e.layer,this.fields=e.fields||null});function bH(t){"@babel/helpers - typeof";return(bH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function mH(t,e){return(mH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function gH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=wH(t);if(e){var o=wH(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===bH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function wH(t){return(wH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var _H=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&mH(t,e)}(i,wI().Evented);var e,r,n,o=gH(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"initialize",value:function(t){this.processingUrl=t}},{key:"getDatasetsName",value:function(){var t=this.processingUrl;this.dataset=[],this.dataset.datasetNames=[],this.dataset.childUrl=[];var e="http://"+t.split("/")[2],r=e+"/iserver/services/datacatalog/rest/datacatalog/sharefile.json",n=e+"/iserver/services/datacatalog/rest/datacatalog/relationship/datasets.json",o=this;mn.get(r).then(function(t){return t.json()}).then(function(t){o.dataset.datasetNames=o.dataset.datasetNames.concat(t.datasetNames),o.dataset.childUrl=o.dataset.childUrl.concat(t.childUriList);var e=o;mn.get(n).then(function(t){return t.json()}).then(function(t){e.dataset.datasetNames=e.dataset.datasetNames.concat(t.datasetNames),e.dataset.childUrl=e.dataset.childUrl.concat(t.childUriList);var r=[];for(var n in e.dataset.datasetNames)r[e.dataset.datasetNames[n]]=e.dataset.childUrl[n];e.fire("datasetsloaded",{result:{dataset:e.dataset,datasetHash:r}})})})}},{key:"getDatasetInfo",value:function(t){var e,r=this;mn.get(t).then(function(t){return t.json()}).then(function(t){var n=t.datasetInfo;"LINE"===n.datasetType||"LINE"===n.type?e="LINE":"POINT"===n.datasetType||"POINT"===n.type||"CSV"===n.type?e="POINT":"REGION"!==n.datasetType&&"REGION"!==n.type||(e="REGION");var o=[],i=n.fieldInfos||n.fieldInfo||null;if(i){for(var a in i)o.push(i[a].name);r.fire("datasetinfoloaded",{result:{type:e,fields:o}})}else{var s=t.childUriList[0].replace("//fields","/fields");mn.get(s).then(function(t){return t.json()}).then(function(t){var n=t.fieldNames,o=[];for(var i in n)o.push(n[i]);r.fire("datasetinfoloaded",{result:{type:e,fields:o}})})}})}}])&&vH(e.prototype,r),n&&vH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}();function OH(t){"@babel/helpers - typeof";return(OH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function SH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function xH(t,e){return(xH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function PH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=EH(t);if(e){var o=EH(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===OH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function EH(t){return(EH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var kH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xH(t,e)}(i,wI().Evented);var e,r,n,o=PH(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"initialize",value:function(t){this.processingUrl=t}},{key:"getDatasetsName",value:function(){var t=this.processingUrl;this.resultLayers=[],this.datasetNames=[],this.distributedAnalysisModel=new _H(t),this.distributedAnalysisModel.getDatasetsName();var e=this;this.distributedAnalysisModel.on("datasetsloaded",function(t){e.fire("datasetsloaded",{result:t.result})})}},{key:"getDatasetInfo",value:function(t){this.distributedAnalysisModel.getDatasetInfo(t);var e=this;this.distributedAnalysisModel.on("datasetinfoloaded",function(t){var r=t.result.type,n=t.result.fields;e.fire("datasetinfoloaded",{result:{type:r,fields:n}})})}},{key:"analysis",value:function(t,e){var r=new Nq(this.processingUrl);if(t.analysisParam instanceof Uv){var n=t.analysisParam,o=this;r.addKernelDensityJob(n,function(r){r.error?o.fire("analysisfailed",{error:r.error}):r.result.setting.serviceInfo.targetServiceInfos.map(function(r){return"RESTMAP"===r.serviceType&&mn.get(r.serviceAddress+"/maps").then(function(t){return t.json()}).then(function(r){var n=r[0].path;o.fire("analysissucceed",{result:r});var i=GG(n,{noWrap:!0,transparent:!0});o.resultLayers.push(i),i.addTo(e);var a=new Date,s=t.resultLayerName||a.getTime();o.fire("layerloaded",{layer:i,name:s})}),r})})}}},{key:"clearLayers",value:function(){for(var t in this.resultLayers)this.resultLayers[t].remove();this.fire("layersremoved",{layers:this.resultLayers}),this.resultLayers=[]}}])&&SH(e.prototype,r),n&&SH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),jH=Wq.extend({initialize:function(t,e){Wq.prototype.initialize.apply(this,[e]),this.viewModel=new kH(t)},onAdd:function(t){return this._fillDataToView(),Wq.prototype.onAdd.apply(this,[t])},_fillDataToView:function(){var t=this;this.viewModel.on("datasetsloaded",function(e){var r=e.result.dataset.datasetNames;t.datasetSelect.innerHTML="",t._createOptions(t.datasetSelect,r),t.datasetSelectObj.optionClickEvent(t.datasetSelect,t.datasetSelectName,t.datasetSelectOnchange),t.dataHash=e.result.datasetHash}),this.viewModel.getDatasetsName()},_initView:function(){var t=this,e=new JL({title:EL.i18n("title_distributedAnalysis")}).getElement();e.classList.add("component-analysis"),e.children[0].style.fontSize="12px";var r=wI().DomUtil.create("div","component-content component-content--scroll component-content--analysis",e),n=[{title:EL.i18n("text_densityAnalysis"),dataValue:"density",remark:EL.i18n("text_CalculateTheValuePerUnitArea"),icon:{className:"component-analyst-density-img"}}],o=new rN(n).getElement();r.appendChild(o);var i=o.children[0].children[0].children[0],a=wI().DomUtil.create("div","component-analysis__container",r),s=wI().DomUtil.create("div","analysistype",a),l=wI().DomUtil.create("div","component-analysis__container__analysisLayer",s),u=wI().DomUtil.create("div","component-analysis__selecttool",l),c={optionsArr:[EL.i18n("text_option_selectDataset")],labelName:EL.i18n("text_label_dataset"),optionsClickCb:it.bind(this)},f=new QL(c),h=f.getElement();this.datasetSelectObj=f,u.appendChild(h);var p=h.children[1].children[0];this.datasetSelectName=p;var y=h.children[1].children[2].children[0].children[0];y.children[0].style.display="none",this.datasetSelect=y;var d=wI().DomUtil.create("div","component-analysis__idw",l),b=[{optionsArr:[EL.i18n("text_option_simplePointDensityAnalysis"),EL.i18n("text_option_nuclearDensityAnalysis")],labelName:EL.i18n("text_label_analyticalMethod")},{optionsArr:[EL.i18n("text_option_quadrilateral"),EL.i18n("text_option_hexagon")],labelName:EL.i18n("text_label_meshType")}],v=wI().DomUtil.create("div","component-analysis__idw__selecttool",d);for(var m in b){var g=new QL(b[m]).getElement();v.appendChild(g)}var w={optionsArr:[EL.i18n("text_option_notSet")],labelName:EL.i18n("text_label_weightField")},_=new QL(w),O=_.getElement();v.appendChild(O),this.weightFieldsSelectObj=_;var S=v.children[0].children[1].children[0];S.setAttribute("data-value","0");var x=v.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",x.children);var P=v.children[1].children[1].children[0];P.setAttribute("data-value","0");var E=v.children[1].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",E.children);var k=v.children[2].children[1].children[0],j=v.children[2].children[1].children[2].children[0].children[0],T=[{spanName:EL.i18n("text_label_queryRange"),value:""}];for(var C in T)this._creatInputBox(T[C],v);var A=v.children[3].children[1];A.setAttribute("placeholder",EL.i18n("text_label_queryRangeTips")),A.title=EL.i18n("text_label_queryRangeTips");var M={labelName:EL.i18n("text_label_gridSizeInMeters"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},R=this._creatUnitSelectBox(M,v),L=R.children[1].children[0];L.value="1000";var N=R.children[1].children[1].children[0].children[0].children[0],I={labelName:EL.i18n("text_label_searchRadius"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},D=this._creatUnitSelectBox(I,v),F=D.children[1].children[0];F.value="300";var B=D.children[1].children[1].children[0].children[0].children[0],G={labelName:EL.i18n("text_label_areaUnit"),optionsArr:["SquareMile","SquareMeter","Hectare","Acre","SquareFoot","SquareYard"]},U=new QL(G).getElement();v.appendChild(U);var z=U.children[1].children[0],V=wI().DomUtil.create("div","range-content",s),J={optionsArr:[EL.i18n("text_option_notSet"),EL.i18n("text_option_equidistantSegmentation"),EL.i18n("text_option_logarithm"),EL.i18n("text_option_equalCountingSegment"),EL.i18n("text_option_squareRootSegmentation")],labelName:EL.i18n("text_label_thematicMapSegmentationMode"),optionsClickCb:function(t){"NOTSET"!==t.getAttribute("data-value")?(W.classList.remove("hidden"),Y.classList.remove("hidden")):(W.classList.add("hidden"),Y.classList.add("hidden"))}};V.appendChild(new QL(J).getElement());var q=V.children[0].children[1].children[0];q.setAttribute("data-value","NOTSET");var H=V.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["NOTSET","EQUALINTERVAL","LOGARITHM","QUANTILE","SQUAREROOT"],"data-value",H.children);var W=this._creatInputBox({spanName:EL.i18n("text_label_thematicMapSegmentationParameters"),value:"20"},V);W.classList.add("hidden");var Y=new QL({optionsArr:[EL.i18n("text_option_greenOrangePurpleGradient"),EL.i18n("text_option_greenOrangeRedGradient"),EL.i18n("text_option_rainbowGradient"),EL.i18n("text_option_spectralGradient"),EL.i18n("text_option_terrainGradient")],labelName:EL.i18n("text_label_thematicMapColorGradientMode")}).getElement();V.appendChild(Y),Y.classList.add("hidden");var X=Y.children[1].children[2].children[0].children[0],Q=Y.children[1].children[0];Q.setAttribute("data-value","GREENORANGEVIOLET");this._setEleAtribute(["GREENORANGEVIOLET","GREENORANGERED","RAINBOW","SPECTRUM","TERRAIN"],"data-value",X.children);var Z=wI().DomUtil.create("div","",s);wI().DomUtil.create("span","",Z).innerHTML=EL.i18n("text_label_resultLayerName");var K=wI().DomUtil.create("input","component-distributeanalysis__input",Z),$=wI().DomUtil.create("div","component-analysis__container__analysisbtn",a),tt=wI().DomUtil.create("div","component-analysis__analysisbtn",$),et=wI().DomUtil.create("button","component-analysis__analysisbtn--analysis",tt);et.innerHTML=EL.i18n("btn_analyze");var rt=wI().DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",tt),nt=wI().DomUtil.create("div","component-analysis__analysisbtn--analysising",rt);nt.style.width="200px",wI().DomUtil.create("div","component-analysis__svg-container",nt).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',wI().DomUtil.create("span","",nt).innerHTML=EL.i18n("btn_analyzing");var ot=wI().DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",tt);function it(t){if(this.messageBox.closeView(),this.dataHash){j.innerHTML="";var e=this.dataHash[t.title],r=this;this.viewModel.on("datasetinfoloaded",function(t){k.title=EL.i18n("text_option_notSet"),k.innerHTML=EL.i18n("text_option_notSet"),j.innerHTML="";var e=i.getAttribute("data-value"),n=t.result.type,o=t.result.fields;"density"===e&&("REGION"===n||"LINE"===n?r.messageBox.showView(EL.i18n("msg_datasetOrMethodUnsupport"),"failure"):(r.messageBox.closeView(),r._createOptions(j,o),r.weightFieldsSelectObj.optionClickEvent(j,k)))}),this.viewModel.getDatasetInfo(e)}}return ot.id="deleteLayersBtn",ot.innerHTML=EL.i18n("btn_emptyTheAnalysisLayer"),this.messageBox=new xL,this.datasetSelectOnchange=it.bind(this),et.onclick=function(){t.messageBox.closeView();var e=function(){var t,e,r=i.getAttribute("data-value"),n=S.getAttribute("data-value"),o=P.getAttribute("data-value"),a=A.value,s=N.title,l=B.title,u=z.title,c=Q.getAttribute("data-value"),f=q.getAttribute("data-value"),h=new Date,y=K.value||h.getTime();t="NOTSET"===f?"":{rangeMode:f,rangeCount:W.value,colorGradientType:c};"density"===r&&(e=new Uv({datasetName:p.title,method:n,meshType:o,resolution:L.value,fields:k.title,radius:F.value,meshSizeUnit:s,radiusUnit:l,areaUnit:u,query:a,mappingParameters:new ta({rangeMode:t.rangeMode,rangeCount:t.rangeCount,colorGradientType:t.colorGradientType})}));return{analysisParam:e,resultLayerName:y}}();p.title===EL.i18n("text_option_selectDataset")?t.messageBox.showView(EL.i18n("msg_selectDataset"),"failure"):k.title===EL.i18n("text_option_notSet")?t.messageBox.showView(EL.i18n("msg_setTheWeightField"),"failure"):(t.messageBox.closeView(),rt.style.display="block",et.style.display="none",t.viewModel.on("layerloaded",function(e){rt.style.display="none",et.style.display="block",t._event.fire("analysissucceeded",{layer:e.layer,name:e.name})}),t.viewModel.on("analysisfailed",function(e){t.messageBox.showView(EL.i18n("msg_theFieldNotSupportAnalysis"),"failure"),rt.style.display="none",et.style.display="block",t._event.fire("analysisfailed",{error:e.error})}),t.viewModel.analysis(e,t.map))},ot.onclick=function(){t.viewModel.on("layersremoved",function(e){t._event.fire("layersremoved",{layers:e.layers})}),t.viewModel.clearLayers()},this._preventMapEvent(e,this.map),e},_createOptions:function(t,e){for(var r in e){var n=document.createElement("div");n.className="component-selecttool__option",n.title=e[r],n.innerHTML=e[r],n.setAttribute("data-value",e[r]),t.appendChild(n)}},_creatInputBox:function(t,e){var r=wI().DomUtil.create("div","",e);wI().DomUtil.create("span","",r).innerHTML=t.spanName;var n=wI().DomUtil.create("input","",r);return n.value=t.value,n.className="component-distributeanalysis__input",r},_creatUnitSelectBox:function(t,e){var r=wI().DomUtil.create("div","component-clientcomputation__buffer--radius",e);wI().DomUtil.create("span","",r).innerHTML=t.labelName;var n=wI().DomUtil.create("div","",r);wI().DomUtil.create("input","buffer-radius-input",n);var o=wI().DomUtil.create("div","component-clientcomputation__buffer--unit",n),i=t.selectOptions,a=new QL(i).getElement();return o.appendChild(a),r},_setEleAtribute:function(t,e,r){for(var n=0;n<r.length;n++)r[n].setAttribute(e,t[n])}});function TH(t){"@babel/helpers - typeof";return(TH="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function CH(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function AH(t,e){return(AH=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t})(t,e)}function MH(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}();return function(){var r,n=RH(t);if(e){var o=RH(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return function(t,e){if(e&&("object"===TH(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,r)}}function RH(t){return(RH=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}var LH=function(t){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&AH(t,e)}(i,wI().Evented);var e,r,n,o=MH(i);function i(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return e=i,(r=[{key:"initialize",value:function(t){this.dataserviceUrl=t,this.resultLayers=[]}},{key:"getFeatures",value:function(t,e){var r=this.dataserviceUrl,n=this,o=iU(r);t instanceof zp?o.getFeaturesByIDs(t,function(t){n._getQureyResult(t,e)}):t instanceof ny?o.getFeaturesBySQL(t,function(t){n._getQureyResult(t,e)}):t instanceof Vh?o.getFeaturesByBounds(t,function(t){n._getQureyResult(t,e)}):t instanceof hp?o.getFeaturesByBuffer(t,function(t){n._getQureyResult(t,e)}):t instanceof kp&&o.getFeaturesByGeometry(t,function(t){n._getQureyResult(t,e)})}},{key:"_getQureyResult",value:function(t,e){if(t.error)this.fire("getfeaturesfailed",{error:t.error});else{var r=wI().geoJSON(t.result.features,{onEachFeature:function(t,e){e.bindPopup("ID: "+t.properties.SMID)},pointToLayer:function(t,e){return wI().circleMarker(e,{radius:6})}}).addTo(e);this.resultLayers.push(r),this.fire("getfeaturessucceeded",{result:t.result.features})}}},{key:"clearLayers",value:function(){for(var t in this.resultLayers)this.resultLayers[t].remove();this.resultLayers=[]}}])&&CH(e.prototype,r),n&&CH(e,n),Object.defineProperty(e,"prototype",{writable:!1}),i}(),NH=Wq.extend({initialize:function(t,e,r){if(Wq.prototype.initialize.apply(this,[r]),this.dataServiceUrl=t,!e||0===e.length)throw new Error("Please configure the dataset of the query！");e instanceof Array?this.dataSetNames=e:this.dataSetNames=e.split(" ")},onAdd:function(t){return Wq.prototype.onAdd.apply(this,[t])},onRemove:function(){this.map.off("pm:create")},setDataSetNames:function(t){t instanceof Array?this.dataSetNames=t:this.dataSetNames=t.split(" ")},setGetFeatureMode:function(t){this.getFeatureMode=t,this._getFeatureModeOnchange(this.getFeatureMode)},setDataServiceUrl:function(t){this.dataServiceUrl=t,this.viewModel=new LH(this.dataServiceUrl)},_getFeatureModeOnchange:function(t){var e;e=t&&"{}"!=JSON.stringify(t)?t:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var r=document.getElementById("queryModelControl");r.innerHTML="",this.creatQueryModeSelect(e,r)},_initView:function(){var t=this;this.viewModel=new LH(this.dataServiceUrl),this.messageBox=new xL;var e=new JL({title:EL.i18n("title_dataServiceQuery")}).getElement();e.classList.add("component-servicequery__container"),e.children[0].classList.add("component-servicequery__title");var r=e.children[1];r.classList.add("component-content--scroll"),r.classList.add("data-services");var n,o=wI().DomUtil.create("div","component-analysis__container",r),i=wI().DomUtil.create("div","component-servicequery__analysistype",o),a=wI().DomUtil.create("div","component-analysis__container__analysisLayer",i),s=this.options.getFeatureMode;n=s&&"{}"!=JSON.stringify(s)?s:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var l=wI().DomUtil.create("div","",a);l.id="queryModelContainer";var u=wI().DomUtil.create("div","component-analysis__selecttool",l);u.id="queryModelControl",this.creatQueryModeSelect=function(t,e){var r;if(t instanceof Array&&t.length>1){var n={optionsArr:t,labelName:EL.i18n("text_label_queryMode"),optionsClickCb:this.queryModeltOnchange},o=new QL(n).getElement();e.appendChild(o),r=o.children[1].children[0],o.children[1].classList.add("dataservice-select");var i=o.children[1];i.classList.add("dataservice-select"),i.classList.add("querymodel-select")}else{var a=wI().DomUtil.create("span","",l);a.innerHTML=EL.i18n("text_label_queryMode"),r=wI().DomUtil.create("div","component-servicequery__querymode-selectname",l);var s=wI().DomUtil.create("span","",r);t instanceof Array?s.innerHTML=t[0]:s.innerHTML=t,r.title=s.innerHTML,this.queryModeltOnchange(r)}return r.id="queryModelSelectName",r}.bind(this),this.queryModeltOnchange=W.bind(this),this.creatQueryModeSelect(n,u);var c=wI().DomUtil.create("div","component-analysis__container component-textarea--dataservice__container",a),f=wI().DomUtil.create("span","textarea-name",c);f.innerHTML=EL.i18n("text_label_IDArrayOfFeatures");var h=wI().DomUtil.create("div","component-textarea component-textarea--dataservice",c);h.id="getfeaturesIdArr";var p=wI().DomUtil.create("div","scrollarea",h),y=wI().DomUtil.create("div","component-scrollarea-content",p);y.setAttribute("tabindex","1");var d=wI().DomUtil.create("textarea","component-textarea__content",y);d.value="[1,2,3]",d.id="getValueTextArea";var b=wI().DomUtil.create("div","component-servicequery__maxfeatures-container hidden",a),v={spanName:EL.i18n("text_label_maxFeatures"),value:"1000"},m=this._creatInputBox(v,b).children[1];m.classList.add("max-features-input");var g=wI().DomUtil.create("div","component-servicequery__distance-container hidden",a),w={spanName:EL.i18n("text_label_bufferDistance"),value:"10"},_=this._creatInputBox(w,g).children[1],O=wI().DomUtil.create("div","component-analysis__container component-textarea--dataservice__container hidden",a),S=wI().DomUtil.create("span","textarea-name",O),x=wI().DomUtil.create("div","",O),P=wI().DomUtil.create("div","component-servicequery__rangeicon-container",x);S.innerHTML=EL.i18n("text_label_queryRange1");var E=wI().DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-polygon-layer bounds",P),k=wI().DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-line-layer hidden",P),j=wI().DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-point-layer hidden",P),T=wI().DomUtil.create("div","component-textarea component-textarea--rangequery",x);T.id="getfeaturesIdArr";var C=wI().DomUtil.create("div","",T),A=wI().DomUtil.create("div","component-scrollarea-content",C);A.setAttribute("tabindex","1");var M=wI().DomUtil.create("textarea","component-textarea__content component-textarea--rangequery__content",A);M.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}';var R=wI().DomUtil.create("div","component-servicequery__spatialquerymode-container hidden",a),L={optionsArr:["CONTAIN","CROSS","DISJOINT","IDENTITY","INTERSECT","NONE","OVERLAP","TOUCH","WITHIN"],labelName:EL.i18n("text_label_spatialQueryMode")},N=wI().DomUtil.create("div","component-analysis__selecttool",R),I=new QL(L).getElement();I.children[1].classList.add("dataservice-select"),N.appendChild(I);var D=I.children[1].children[0];D.id="spatialQueryModeSelectName",I.children[1].children[2].classList.add("component-servicequery__spatialquerymode__selectcontent");var F=wI().DomUtil.create("div","component-analysis__container__analysisbtn",a),B=wI().DomUtil.create("div","component-analysis__analysisbtn",F),G=wI().DomUtil.create("button","component-analysis__analysisbtn--analysis",B);G.innerHTML=EL.i18n("btn_query");var U=wI().DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",B),z=wI().DomUtil.create("div","component-analysis__analysisbtn--analysising component-servicequery__querybtn--querying",U);wI().DomUtil.create("div","component-analysis__svg-container",z).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n             <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n             <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n             <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n             <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n         </svg>',wI().DomUtil.create("span","",z).innerHTML=EL.i18n("btn_querying");var V=wI().DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",B);V.innerHTML=EL.i18n("btn_emptyTheRresultLayer"),W(n[0]);var J,q,H=this;function W(t){var e;switch(e=t.title?t.title:t,b.classList.add("hidden"),O.classList.add("hidden"),g.classList.add("hidden"),k.classList.add("hidden"),j.classList.add("hidden"),E.classList.remove("bounds"),R.classList.add("hidden"),f.innerHTML=EL.i18n("text_label_featureFilter"),d.value="SMID<10","BUFFER"!==e&&"SPATIAL"!==e||(O.classList.remove("hidden"),S.innerHTML=EL.i18n("text_label_geometricObject"),M.value='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[84.90234375,40.25390625]}}',k.classList.remove("hidden"),j.classList.remove("hidden")),e){case"ID":f.innerHTML=EL.i18n("text_label_IDArrayOfFeatures"),d.value="[1,2,3]";break;case"SQL":b.classList.remove("hidden");break;case"BOUNDS":O.classList.remove("hidden"),S.innerHTML=EL.i18n("text_label_queryRange"),M.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}',E.classList.add("bounds");break;case"BUFFER":g.classList.remove("hidden");break;case"SPATIAL":R.classList.remove("hidden")}}return G.onclick=function(){t.messageBox.closeView(),U.style.display="block",G.style.display="none";var e=function(){var t,e=H.dataSetNames,r=document.getElementById("queryModelSelectName").title,n=d.value;if("ID"===r){var o=d.value,i=o.substring(1,o.length-1).split(",");t=new zp({IDs:i,datasetNames:e})}else if("SQL"===r){var a=m.value;t=new ny({queryParameter:{attributeFilter:n},datasetNames:e,maxFeatures:a})}else if("BOUNDS"===r){if(!J){var s=JSON.parse(M.value);J=wI().bounds([s.leftBottom.x,s.leftBottom.y],[s.rightTop.x,s.rightTop.y])}t=new Vh({attributeFilter:n,datasetNames:e,bounds:J})}else if("BUFFER"===r){var l=_.value,u=JSON.parse(M.value),c=q||u;t=new hp({attributeFilter:n,datasetNames:e,bufferDistance:l,geometry:c})}else if("SPATIAL"===r){var f=D.title,h=JSON.parse(M.value),p=q||h;t=new kp({attributeFilter:n,datasetNames:e,spatialQueryMode:f,geometry:p})}return t}();t.viewModel.on("getfeaturessucceeded",function(e){U.style.display="none",G.style.display="block",0===e.result.features.length&&t.messageBox.showView(EL.i18n("msg_dataReturnedIsEmpty"),"success"),t._event.fire("getfeaturessucceeded",{result:e.result})}),t.viewModel.on("getfeaturesfailed",function(e){U.style.display="none",G.style.display="block",t.messageBox.showView(e.error.errorMsg,"failure"),t._event.fire("getfeaturesfailed",{error:e.error})}),t.viewModel.getFeatures(e,t.map)},E.onclick=function(e){var r=document.getElementById("queryModelSelectName").title;q&&q.remove(),"BOUNDS"===r?t.map.pm.enableDraw("Rectangle"):t.map.pm.enableDraw("Poly"),e.stopPropagation(),e.preventDefault()},k.onclick=function(e){q&&q.remove(),t.map.pm.enableDraw("Line"),e.stopPropagation(),e.preventDefault()},j.onclick=function(e){q&&q.remove(),t.map.pm.enableDraw("Marker"),e.stopPropagation(),e.preventDefault()},this.map.on("pm:create",function(e){if("Rectangle"===e.shape){var r=(q=e.layer).getBounds();J=wI().bounds([r._southWest.lng,r._southWest.lat],[r._northEast.lng,r._northEast.lat]);var n={leftBottom:{x:r._southWest.lng,y:r._southWest.lat},rightTop:{x:r._northEast.lng,y:r._northEast.lat}};M.value=JSON.stringify(n)}"Marker"===e.shape&&(q=e.layer,M.value=JSON.stringify(e.layer.toGeoJSON()),t.map.pm.disableDraw("Marker")),"Line"===e.shape&&(q=e.layer,M.value=JSON.stringify(e.layer.toGeoJSON())),"Polygon"===e.shape&&(q=e.layer,M.value=JSON.stringify(e.layer.toGeoJSON()))}),V.onclick=function(){t.viewModel.clearLayers()},this._preventMapEvent(e,this.map),e},_creatInputBox:function(t,e){var r=wI().DomUtil.create("div","",e);return wI().DomUtil.create("span","",r).innerHTML=t.spanName,wI().DomUtil.create("input","",r).value=t.value,r}});function IH(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),r.push.apply(r,n)}return r}function DH(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?IH(Object(r),!0).forEach(function(e){FH(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):IH(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function FH(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}wI().supermap=DH(DH({},n),{},{Components:DH({},n.Components)},wI().supermap),wI().supermap.components=wI().supermap.components||{},wI().supermap.Components=wI().supermap.Components||{},wI().supermap.control=wI().supermap.control||{},wI().supermap.Util={},wI().Util.toGeoJSON=SG,wI().supermap.Util.toGeoJSON=SG,wI().Util.toSuperMapGeometry=xG,wI().supermap.Util.toSuperMapGeometry=xG,wI().Util.resolutionToScale=EG,wI().supermap.Util.resolutionToScale=EG,wI().Util.scaleToResolution=kG,wI().supermap.Util.scaleToResolution=kG,wI().Util.getMeterPerMapUnit=PG,wI().supermap.Util.getMeterPerMapUnit=PG,wI().Util.GetResolutionFromScaleDpi=TG,wI().supermap.Util.getResolutionFromScaleDpi=TG,wI().supermap.Util.GetResolutionFromScaleDpi=TG,wI().Util.NormalizeScale=jG,wI().supermap.Util.normalizeScale=jG,wI().supermap.Util.NormalizeScale=jG,wI().Util.transform=CG,wI().supermap.Util.transform=CG,wI().Proj=wI().Proj||{},wI().supermap.Proj=wI().supermap.Proj||{},wI().Proj.CRS=eG,wI().supermap.Proj.crs=eG,wI().supermap.Proj.CRS=tG,wI().Projection={},wI().supermap.Projection=wI().supermap.Projection||{},wI().Projection.NonProjection=wG,wI().supermap.Projection.nonProjection=wG,wI().supermap.Projection.NonProjection=gG,wI().supermap.CRS=wI().supermap.CRS||{},wI().CRS.NonEarthCRS=OG,wI().supermap.CRS.NonEarthCRS=_G,wI().supermap.CRS.nonEarthCRS=OG,wI().CRS.BaiduCRS=cG,wI().supermap.CRS.BaiduCRS=cG,wI().CRS.TianDiTu_WGS84CRS=pG,wI().supermap.CRS.TianDiTu_WGS84CRS=pG,wI().CRS.TianDiTu_MercatorCRS=mG,wI().supermap.CRS.TianDiTu_MercatorCRS=mG,wI().CRS.TianDiTu_Mercator=mG,wI().supermap.CRS.TianDiTu_Mercator=mG,wI().CRS.TianDiTu_WGS84=pG,wI().supermap.CRS.TianDiTu_WGS84=pG,wI().CRS.Baidu=cG,wI().supermap.CRS.Baidu=cG,wI().supermap.CommontypesConversion=uG,wI().supermap.components.clientComputationLayer=function(t){return new dH(t)},wI().supermap.Components.ClientComputationLayer=dH,wI().supermap.components.clientComputation=function(t){return new pH(t)},wI().supermap.Components.ClientComputation=pH,wI().supermap.components.clientComputationViewModel=function(t){return new hH(t)},wI().supermap.Components.ClientComputationViewModel=hH,wI().supermap.components.geoJSONLayerWithName=function(t,e){return new aH(t,e)},wI().supermap.Components.GeoJSONLayerWithName=aH,wI().supermap.components.GeoJsonLayersDataModel=$q,wI().supermap.Components.GeoJsonLayersDataModel=$q,wI().supermap.components.dataFlow=function(t){return new oH(t)},wI().supermap.Components.DataFlow=oH,wI().supermap.components.dataFlowViewModel=function(t){return new nH(t)},wI().supermap.Components.DataFlowViewModel=nH,wI().supermap.components.dataServiceQuery=function(t,e,r){return new NH(t,e,r)},wI().supermap.Components.DataServiceQuery=NH,wI().supermap.components.dataServiceQueryViewModel=function t(e){return new t(e)},wI().supermap.Components.DataServiceQueryViewModel=LH,wI().supermap.components.DistributedAnalysisModel=_H,wI().supermap.Components.DistributedAnalysisModel=_H,wI().supermap.components.distributedAnalysis=function(t){return new jH(t)},wI().supermap.Components.DistributedAnalysis=jH,wI().supermap.components.distributedAnalysisViewModel=function(t){return new kH(t)},wI().supermap.Components.DistributedAnalysisViewModel=kH,wI().supermap.components.openFile=function(t){return new Xq(t)},wI().supermap.Components.OpenFile=Xq,wI().supermap.components.openFileViewModel=function(t){return new Yq(t)},wI().supermap.Components.OpenFileViewModel=Yq,wI().supermap.components.search=function(t){return new rH(t)},wI().supermap.Components.Search=rH,wI().supermap.components.searchViewModel=function(t){return new eH(t)},wI().supermap.Components.SearchViewModel=eH,wI().supermap.components.componentsViewBase=function(t){return new Wq(t)},wI().supermap.Components.ComponentsViewBase=Wq,wI().supermap.control.changeTileVersion=function(t){return new iG(t)},wI().supermap.control.ChangeTileVersion=iG,wI().supermap.control.logo=function(t){return new aG(t)},wI().supermap.control.Logo=aG,wI().supermap.baiduTileLayer=MG,wI().supermap.BaiduTileLayer=AG,wI().supermap.cloudTileLayer=LG,wI().supermap.CloudTileLayer=RG,wI().supermap.imageMapLayer=function(t,e){return new NG(t,e)},wI().supermap.ImageMapLayer=NG,wI().supermap.imageTileLayer=function(t,e){return new lU(t,e)},wI().supermap.ImageTileLayer=lU,wI().supermap.tiandituTileLayer=function(t){return new FG(t)},wI().supermap.TiandituTileLayer=FG,wI().supermap.tiledMapLayer=GG,wI().supermap.TiledMapLayer=BG,wI().supermap.wmtsLayer=DG,wI().supermap.WMTSLayer=IG,wI().supermap.webmap=function(t,e){return new sU(t,e)},wI().supermap.WebMap=sU,wI().supermap.initMap=function(t,e){var r=(e=e||{}).mapOptions||{},n=e.layerOptions||{},o=new cU(oG,t,e);return o.getMapInfo((i=gU(yU().mark(function e(i,a,s){var l,u,c,f,h;return yU().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("processCompleted"!==i.type){e.next=12;break}if(fU((l=i.result.prjCoordSys).type)){e.next=6;break}return u=hU(l),e.next=6,_U(u,o);case 6:return c=xU(i.result,r),f=wI().map("map",bU(bU({},c),r)),(h=new BG(t,bU(bU({},{noWrap:!0}),n))).addTo(f),a({map:f,layer:h}),e.abrupt("return");case 12:s();case 13:case"end":return e.stop()}},e)})),function(t,e,r){return i.apply(this,arguments)}));var i},wI().supermap.crsFromMapJSON=wU,wI().supermap.CartoCSSToLeaflet=YG,wI().supermap.DefaultStyle=VG,wI().supermap.CartoStyleMap=JG,wI().supermap.ServerStyleMap=qG,wI().supermap.CompOpMap=HG,wI().supermap.circleStyle=function(t){return new XU(t)},wI().supermap.CircleStyle=XU,wI().supermap.cloverStyle=function(t){return new YU(t)},wI().supermap.CloverStyle=YU,wI().supermap.graphic=function(t){return new XG(t)},wI().supermap.Graphic=XG,wI().supermap.imageStyle=function(t){return new QU(t)},wI().supermap.ImageStyle=QU,wI().supermap.themeFeature=function(t,e){return new QG(t,e)},wI().supermap.ThemeFeature=QG,wI().supermap.dataFlowLayer=function(t,e){return new GU(t,e)},wI().supermap.DataFlowLayer=GU,wI().supermap.echartsLayer=function(t,e){return new UU(t,e)},wI().supermap.EchartsLayer=UU,wI().supermap.graphicLayer=function(t,e){return new az(t,e)},wI().supermap.GraphicLayer=az,wI().supermap.graphThemeLayer=function(t,e,r){return new sz(t,e,r)},wI().supermap.GraphThemeLayer=sz,wI().supermap.heatMapFeature=function(t,e){return new Iz(t,e)},wI().supermap.HeatMapFeature=Iz,wI().supermap.heatMapLayer=function(t,e){return new Dz(t,e)},wI().supermap.HeatMapLayer=Dz,wI().supermap.labelThemeLayer=function(t,e){return new eU(t,e)},wI().supermap.LabelThemeLayer=eU,wI().supermap.mapVLayer=function(t,e,r){return new DU(t,e,r)},wI().supermap.MapVLayer=DU,wI().supermap.rangeThemeLayer=function(t,e){return new tU(t,e)},wI().supermap.RangeThemeLayer=tU,wI().supermap.rankSymbolThemeLayer=function(t,e,r){return new lz(t,e,r)},wI().supermap.RankSymbolThemeLayer=lz,wI().supermap.tiledVectorLayer=function(t,e){return new Rz(t,e)},wI().supermap.TileVectorLayer=Rz,wI().supermap.TiledVectorLayer=Rz,wI().supermap.turfLayer=function(t){return new Nz(t)},wI().supermap.TurfLayer=Nz,wI().supermap.FGBLayer=$J,wI().supermap.FGBLayer=function(t,e){return new $J(t,e)},wI().supermap.unicodeMarker=function(t,e){return new aU(t,e)},wI().supermap.UnicodeMarker=aU,wI().supermap.uniqueThemeLayer=function(t,e){return new $G(t,e)},wI().supermap.UniqueThemeLayer=$G,wI().supermap.VectorTileFormat=Cz,wI().supermap.addressMatchService=function(t,e){return new hq(t,e)},wI().supermap.AddressMatchService=hq,wI().supermap.chartService=function(t,e){return new dq(t,e)},wI().supermap.ChartService=dq,wI().supermap.dataFlowService=function(t,e){return new PU(t,e)},wI().supermap.DataFlowService=PU,wI().supermap.datasetService=function(t,e){return new bq(t,e)},wI().supermap.DatasetService=bq,wI().supermap.datasourceService=function(t,e){return new vq(t,e)},wI().supermap.DatasourceService=vq,wI().supermap.featureService=iU,wI().supermap.FeatureService=oU,wI().supermap.fieldService=function(t,e){return new wq(t,e)},wI().supermap.FieldService=wq,wI().supermap.geoprocessingService=function(t,e){return new Oq(t,e)},wI().supermap.GeoprocessingService=Oq,wI().supermap.gridCellInfosService=function(t,e){return new _q(t,e)},wI().supermap.GridCellInfosService=_q,wI().supermap.imageCollectionService=function(t,e){return new Hq(t,e)},wI().supermap.ImageCollectionService=Hq,wI().supermap.imageService=function(t,e){return new qq(t,e)},wI().supermap.ImageService=qq,wI().supermap.layerInfoService=function(t,e){return new Pq(t,e)},wI().supermap.LayerInfoService=Pq,wI().supermap.mapService=function(t,e){return new oG(t,e)},wI().supermap.MapService=oG,wI().supermap.measureService=function(t,e){return new Eq(t,e)},wI().supermap.MeasureService=Eq,wI().supermap.networkAnalyst3DService=function(t,e){return new Tq(t,e)},wI().supermap.NetworkAnalyst3DService=Tq,wI().supermap.networkAnalystService=function(t,e){return new Mq(t,e)},wI().supermap.NetworkAnalystService=Mq,wI().supermap.processingService=function(t,e){return new Nq(t,e)},wI().supermap.ProcessingService=Nq,wI().supermap.queryService=function(t,e){return new Iq(t,e)},wI().supermap.QueryService=Iq,wI().supermap.ServiceBase=nG,wI().supermap.spatialAnalystService=function(t,e){return new Bq(t,e)},wI().supermap.SpatialAnalystService=Bq,wI().supermap.themeService=function(t,e){return new Gq(t,e)},wI().supermap.ThemeService=Gq,wI().supermap.trafficTransferAnalystService=function(t,e){return new Vq(t,e)},wI().supermap.TrafficTransferAnalystService=Vq,wI().supermap.webPrintingJobService=function(t,e){return new Jq(t,e)},wI().supermap.WebPrintingJobService=Jq,wI().supermap.KnowledgeGraphService=nq,wI().supermap.GraphMap=fq,wI().supermap.CommonUtil=dt}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={id:n,loaded:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.loaded=!0,i.exports}r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,{a:e}),e},r.d=function(t,e){for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},r(3123),r(5023),r(7788);r(8975)}();