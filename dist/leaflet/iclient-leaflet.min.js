/*!
 * 
 *          iclient-leaflet.(https://iclient.supermap.io)
 *          Copyright© 2000 - 2020 SuperMap Software Co.Ltd
 *          license: Apache-2.0
 *          version: v10.0.1
 *         
 */!function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=15)}([function(e,t){e.exports=L},function(e,t){e.exports=function(){try{return echarts}catch(e){return{}}}()},function(e,t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"===("undefined"==typeof window?"undefined":n(window))&&(r=window)}e.exports=r},function(e,t,n){function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var i=n(21),o="&&",a="||",s="and",l="or",u="=",c="~",f="!"+u,h="!"+c,p=">",y=">=",d="<",m="<=",v="*",g=",",b=".",S="(",_=")",w="where",O={pathway:[],groups:{}},x={},C={},T=console.log;function P(e){var t=k(e,w),n=t[0],r=t[1];O.pathway=k(n,g);for(var i=0,s=O.pathway.length;i<s;i++)O.pathway[i]=k(O.pathway[i],b),O.pathway[i][0]==v&&O.pathway[i].shift(),0===O.pathway[i].length&&O.pathway.splice(i,1);for(var l=-1,C=-1,T=0;T<r.length;){if(r[T]===S)l=T;else if(r[T]===_&&(C=T)>l&&-1!==l){var P="gr_"+(new Date).getTime();O.groups[P]=r.substring(l+1,C),r=r.replace(S+O.groups[P]+_,P),T=-1}T+=1}!function e(t,n){var r=E(n,o),i=E(n,a);if(r!==Number.MAX_VALUE||i!==Number.MAX_VALUE)if(r<i){t.and=t.and||[];var s=k(n,o);t.and.push(s[0]),e(t.and,s[1])}else{t.or=t.or||[];var s=k(n,a);t.or.push(s[0]),e(t.or,s[1])}else O.groups[n]?(n=O.groups[n],e(t,n)):(Array.isArray(t)?t.push(n):t.or=[n],function e(t){for(var n in t)if(t.hasOwnProperty(n))if(Array.isArray(t[n]))e(t[n]);else if("string"==typeof t[n])if(M(t[n],f)){var r=k(t[n],f);t[n]={ne:[r[0],r[1]]}}else if(M(t[n],h)){var r=k(t[n],h);t[n]={nreq:[r[0],r[1]]}}else if(M(t[n],c)){var r=k(t[n],c);t[n]={req:[r[0],r[1]]}}else if(M(t[n],y)){var r=k(t[n],y);t[n]={ge:[r[0],r[1]]}}else if(M(t[n],p)){var r=k(t[n],p);t[n]={gt:[r[0],r[1]]}}else if(M(t[n],m)){var r=k(t[n],m);t[n]={le:[r[0],r[1]]}}else if(M(t[n],d)){var r=k(t[n],d);t[n]={lt:[r[0],r[1]]}}else if(M(t[n],u)){var r=k(t[n],u);t[n]={eq:[r[0],r[1]]}}}(x.or?x.or:x.and))}(x,r)}function E(e,t){var n=e.indexOf(t);return-1===n?Number.MAX_VALUE:n}function k(e,t){return e.split(t).map(function(e){return e.trim()})}function M(e,t){return e.indexOf(t)>-1}function A(e,t){var n=k(t,b),r=e;for(var o in n){if(!r.hasOwnProperty(n[o]))return"";r=r[n[o]]}return r=i.isDate(r)?r.valueOf():i.isDateString(r)?i.parseDateFromString(r):r.toString()}function L(e,t){var n=!1;for(var r in e){if(n=n||(r===s?j:r===l?L:N)(e[r],t),C.trace&&T(O.step,"======((( or",e[r],n),n)return n}return n}function j(e,t){var n=!0;for(var r in e){if(n=n&&(r===s?j:r===l?L:N)(e[r],t),C.trace&&T(O.step,"======((( and",e[r],n),!n)return n}return n}function N(e,t){if(O.step+=1,e.or){var n=L(e.or,t);return C.trace&&T(O.step,"OR",e,n),n}if(e.and){n=j(e.and,t);return C.trace&&T(O.step,"AND",e,n),n}if("object"===r(e))return e.eq?A(t,e.eq[0])===e.eq[1]:e.ne?A(t,e.ne[0])!==e.ne[1]:e.req?M(A(t,e.req[0]),e.req[1]):e.nreq?!M(A(t,e.nreq[0]),e.nreq[1]):e.gt?A(t,e.gt[0])>e.gt[1]:e.ge?A(t,e.ge[0])>=e.ge[1]:e.lt?A(t,e.lt[0])<e.lt[1]:e.le?A(t,e.le[0])<=e.le[1]:N(e,t)}function R(e,t,n){return O={pathway:[],groups:{},step:0},x={},C=n=n||{trace:!1},P(t),(r=function(e){var t=[];for(var n in e)N(x,e[n])&&t.push(e[n]);return t}(e))&&O.pathway.length>0?r.map(function(e){for(var t={},n=0,r=O.pathway.length;n<r;n++){var i=O.pathway[n].join(b);t[i]=A(e,i)}return t}):r;var r}void 0!==e.exports&&(e.exports=R),"undefined"!=typeof window&&(window.Query=R)},function(e,t,n){var r,i,o;i=[t,e],void 0===(o="function"==typeof(r=function(e,t){"use strict";var n={timeout:5e3,jsonpCallback:"callback",jsonpCallbackFunction:null};function r(e){try{delete window[e]}catch(t){window[e]=void 0}}function i(e){var t=document.getElementById(e);t&&document.getElementsByTagName("head")[0].removeChild(t)}t.exports=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],o=e,a=t.timeout||n.timeout,s=t.jsonpCallback||n.jsonpCallback,l=void 0;return new Promise(function(n,u){var c=t.jsonpCallbackFunction||"jsonp_"+Date.now()+"_"+Math.ceil(1e5*Math.random()),f=s+"_"+c;window[c]=function(e){n({ok:!0,json:function(){return Promise.resolve(e)}}),l&&clearTimeout(l),i(f),r(c)},o+=-1===o.indexOf("?")?"?":"&";var h=document.createElement("script");h.setAttribute("src",""+o+s+"="+c),t.charset&&h.setAttribute("charset",t.charset),h.id=f,document.getElementsByTagName("head")[0].appendChild(h),l=setTimeout(function(){u(new Error("JSONP request to "+e+" timed out")),r(c),i(f),window[c]=function(){r(c)}},a),h.onerror=function(){u(new Error("JSONP request to "+e+" failed")),r(c),i(f),l&&clearTimeout(l)}})}})?r.apply(t,i):r)||(e.exports=o)},function(e,t){e.exports=function(){try{return XLSX}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return mapv}catch(e){return{}}}()},function(e,t){e.exports=function(){try{return turf}catch(e){return{}}}()},function(e){e.exports=JSON.parse('{"a":"2.5.0"}')},function(e,t,n){"use strict";var r=n(10);function i(e,t){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=e,this._keys=[],this._values=[],this._features=[],e.readFields(o,this,t),this.length=this._features.length}function o(e,t,n){15===e?t.version=n.readVarint():1===e?t.name=n.readString():5===e?t.extent=n.readVarint():2===e?t._features.push(n.pos):3===e?t._keys.push(n.readString()):4===e&&t._values.push(function(e){var t=null,n=e.readVarint()+e.pos;for(;e.pos<n;){var r=e.readVarint()>>3;t=1===r?e.readString():2===r?e.readFloat():3===r?e.readDouble():4===r?e.readVarint64():5===r?e.readVarint():6===r?e.readSVarint():7===r?e.readBoolean():null}return t}(n))}e.exports=i,i.prototype.feature=function(e){if(e<0||e>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[e];var t=this._pbf.readVarint()+this._pbf.pos;return new r(this._pbf,t,this.extent,this._keys,this._values)}},function(e,t,n){"use strict";var r=n(24);function i(e,t,n,r,i){this.properties={},this.extent=n,this.type=0,this._pbf=e,this._geometry=-1,this._keys=r,this._values=i,e.readFields(o,this,t)}function o(e,t,n){1==e?t.id=n.readVarint():2==e?function(e,t){var n=e.readVarint()+e.pos;for(;e.pos<n;){var r=t._keys[e.readVarint()],i=t._values[e.readVarint()];t.properties[r]=i}}(n,t):3==e?t.type=n.readVarint():4==e&&(t._geometry=n.pos)}function a(e){for(var t,n,r=0,i=0,o=e.length,a=o-1;i<o;a=i++)t=e[i],r+=((n=e[a]).x-t.x)*(t.y+n.y);return r}e.exports=i,i.types=["Unknown","Point","LineString","Polygon"],i.prototype.loadGeometry=function(){var e=this._pbf;e.pos=this._geometry;for(var t,n=e.readVarint()+e.pos,i=1,o=0,a=0,s=0,l=[];e.pos<n;){if(!o){var u=e.readVarint();i=7&u,o=u>>3}if(o--,1===i||2===i)a+=e.readSVarint(),s+=e.readSVarint(),1===i&&(t&&l.push(t),t=[]),t.push(new r(a,s));else{if(7!==i)throw new Error("unknown command "+i);t&&t.push(t[0].clone())}}return t&&l.push(t),l},i.prototype.bbox=function(){var e=this._pbf;e.pos=this._geometry;for(var t=e.readVarint()+e.pos,n=1,r=0,i=0,o=0,a=1/0,s=-1/0,l=1/0,u=-1/0;e.pos<t;){if(!r){var c=e.readVarint();n=7&c,r=c>>3}if(r--,1===n||2===n)i+=e.readSVarint(),o+=e.readSVarint(),i<a&&(a=i),i>s&&(s=i),o<l&&(l=o),o>u&&(u=o);else if(7!==n)throw new Error("unknown command "+n)}return[a,l,s,u]},i.prototype.toGeoJSON=function(e,t,n){var r,o,s=this.extent*Math.pow(2,n),l=this.extent*e,u=this.extent*t,c=this.loadGeometry(),f=i.types[this.type];function h(e){for(var t=0;t<e.length;t++){var n=e[t],r=180-360*(n.y+u)/s;e[t]=[360*(n.x+l)/s-180,360/Math.PI*Math.atan(Math.exp(r*Math.PI/180))-90]}}switch(this.type){case 1:var p=[];for(r=0;r<c.length;r++)p[r]=c[r][0];h(c=p);break;case 2:for(r=0;r<c.length;r++)h(c[r]);break;case 3:for(c=function(e){var t=e.length;if(t<=1)return[e];for(var n,r,i=[],o=0;o<t;o++){var s=a(e[o]);0!==s&&(void 0===r&&(r=s<0),r===s<0?(n&&i.push(n),n=[e[o]]):n.push(e[o]))}n&&i.push(n);return i}(c),r=0;r<c.length;r++)for(o=0;o<c[r].length;o++)h(c[r][o])}1===c.length?c=c[0]:f="Multi"+f;var y={type:"Feature",geometry:{type:f,coordinates:c},properties:this.properties};return"id"in this&&(y.id=this.id),y}},function(e,t){e.exports=function(){try{return elasticsearch}catch(e){return{}}}()},function(e,t,n){(function(t){function n(e){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var r=9007199254740991,i="[object Arguments]",o="[object Function]",a="[object GeneratorFunction]",s="[object Map]",l="[object Set]",u=/^\[object .+?Constructor\]$/,c=/^(?:0|[1-9]\d*)$/,f="object"==(void 0===t?"undefined":n(t))&&t&&t.Object===Object&&t,h="object"==("undefined"==typeof self?"undefined":n(self))&&self&&self.Object===Object&&self,p=f||h||Function("return this")();function y(e,t){return function(e,t){for(var n=-1,r=e?e.length:0,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}(t,function(t){return[t,e[t]]})}var d,m,v,g=Function.prototype,b=Object.prototype,S=p["__core-js_shared__"],_=(d=/[^.]+$/.exec(S&&S.keys&&S.keys.IE_PROTO||""))?"Symbol(src)_1."+d:"",w=g.toString,O=b.hasOwnProperty,x=b.toString,C=RegExp("^"+w.call(O).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),T=b.propertyIsEnumerable,P=(m=Object.keys,v=Object,function(e){return m(v(e))}),E=G(p,"DataView"),k=G(p,"Map"),M=G(p,"Promise"),A=G(p,"Set"),L=G(p,"WeakMap"),j=H(E),N=H(k),R=H(M),I=H(A),D=H(L);function F(e,t){var r=J(e)||function(e){return function(e){return function(e){return!!e&&"object"==n(e)}(e)&&q(e)}(e)&&O.call(e,"callee")&&(!T.call(e,"callee")||x.call(e)==i)}(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=r.length,a=!!o;for(var s in e)!t&&!O.call(e,s)||a&&("length"==s||V(s,o))||r.push(s);return r}function B(e){return!(!Q(e)||_&&_ in e)&&(W(e)||function(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}(e)?C:u).test(H(e))}function U(e){if(n=(t=e)&&t.constructor,r="function"==typeof n&&n.prototype||b,t!==r)return P(e);var t,n,r,i=[];for(var o in Object(e))O.call(e,o)&&"constructor"!=o&&i.push(o);return i}function G(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return B(n)?n:void 0}var z=function(e){return x.call(e)};function V(e,t){return!!(t=null==t?r:t)&&("number"==typeof e||c.test(e))&&e>-1&&e%1==0&&e<t}function H(e){if(null!=e){try{return w.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(E&&"[object DataView]"!=z(new E(new ArrayBuffer(1)))||k&&z(new k)!=s||M&&"[object Promise]"!=z(M.resolve())||A&&z(new A)!=l||L&&"[object WeakMap]"!=z(new L))&&(z=function(e){var t=x.call(e),n="[object Object]"==t?e.constructor:void 0,r=n?H(n):void 0;if(r)switch(r){case j:return"[object DataView]";case N:return s;case R:return"[object Promise]";case I:return l;case D:return"[object WeakMap]"}return t});var J=Array.isArray;function q(e){return null!=e&&function(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=r}(e.length)&&!W(e)}function W(e){var t=Q(e)?x.call(e):"";return t==o||t==a}function Q(e){var t=n(e);return!!e&&("object"==t||"function"==t)}var Y,X=(Y=function(e){return q(e)?F(e):U(e)},function(e){var t,n,r,i=z(e);return i==s?(t=e,n=-1,r=Array(t.size),t.forEach(function(e,t){r[++n]=[t,e]}),r):i==l?function(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=[e,e]}),n}(e):y(e,Y(e))});e.exports=X}).call(this,n(2))},function(e,t,n){"use strict";e.exports=i;var r=n(22);function i(e){this.buf=ArrayBuffer.isView(e)?e:new Uint8Array(e||0),this.pos=0,this.type=0,this.length=this.buf.length}i.Varint=0,i.Fixed64=1,i.Bytes=2,i.Fixed32=5;function o(e){return e.type===i.Bytes?e.readVarint()+e.pos:e.pos+1}function a(e,t,n){return n?4294967296*t+(e>>>0):4294967296*(t>>>0)+(e>>>0)}function s(e,t,n){var r=t<=16383?1:t<=2097151?2:t<=268435455?3:Math.ceil(Math.log(t)/(7*Math.LN2));n.realloc(r);for(var i=n.pos-1;i>=e;i--)n.buf[i+r]=n.buf[i]}function l(e,t){for(var n=0;n<e.length;n++)t.writeVarint(e[n])}function u(e,t){for(var n=0;n<e.length;n++)t.writeSVarint(e[n])}function c(e,t){for(var n=0;n<e.length;n++)t.writeFloat(e[n])}function f(e,t){for(var n=0;n<e.length;n++)t.writeDouble(e[n])}function h(e,t){for(var n=0;n<e.length;n++)t.writeBoolean(e[n])}function p(e,t){for(var n=0;n<e.length;n++)t.writeFixed32(e[n])}function y(e,t){for(var n=0;n<e.length;n++)t.writeSFixed32(e[n])}function d(e,t){for(var n=0;n<e.length;n++)t.writeFixed64(e[n])}function m(e,t){for(var n=0;n<e.length;n++)t.writeSFixed64(e[n])}function v(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+16777216*e[t+3]}function g(e,t,n){e[n]=t,e[n+1]=t>>>8,e[n+2]=t>>>16,e[n+3]=t>>>24}function b(e,t){return(e[t]|e[t+1]<<8|e[t+2]<<16)+(e[t+3]<<24)}i.prototype={destroy:function(){this.buf=null},readFields:function(e,t,n){for(n=n||this.length;this.pos<n;){var r=this.readVarint(),i=r>>3,o=this.pos;this.type=7&r,e(i,t,this),this.pos===o&&this.skip(r)}return t},readMessage:function(e,t){return this.readFields(e,t,this.readVarint()+this.pos)},readFixed32:function(){var e=v(this.buf,this.pos);return this.pos+=4,e},readSFixed32:function(){var e=b(this.buf,this.pos);return this.pos+=4,e},readFixed64:function(){var e=v(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,e},readSFixed64:function(){var e=v(this.buf,this.pos)+4294967296*b(this.buf,this.pos+4);return this.pos+=8,e},readFloat:function(){var e=r.read(this.buf,this.pos,!0,23,4);return this.pos+=4,e},readDouble:function(){var e=r.read(this.buf,this.pos,!0,52,8);return this.pos+=8,e},readVarint:function(e){var t,n,r=this.buf;return t=127&(n=r[this.pos++]),n<128?t:(t|=(127&(n=r[this.pos++]))<<7,n<128?t:(t|=(127&(n=r[this.pos++]))<<14,n<128?t:(t|=(127&(n=r[this.pos++]))<<21,n<128?t:function(e,t,n){var r,i,o=n.buf;if(i=o[n.pos++],r=(112&i)>>4,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<3,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<10,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<17,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(127&i)<<24,i<128)return a(e,r,t);if(i=o[n.pos++],r|=(1&i)<<31,i<128)return a(e,r,t);throw new Error("Expected varint not more than 10 bytes")}(t|=(15&(n=r[this.pos]))<<28,e,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var e=this.readVarint();return e%2==1?(e+1)/-2:e/2},readBoolean:function(){return Boolean(this.readVarint())},readString:function(){var e=this.readVarint()+this.pos,t=function(e,t,n){var r="",i=t;for(;i<n;){var o,a,s,l=e[i],u=null,c=l>239?4:l>223?3:l>191?2:1;if(i+c>n)break;1===c?l<128&&(u=l):2===c?128==(192&(o=e[i+1]))&&(u=(31&l)<<6|63&o)<=127&&(u=null):3===c?(o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&((u=(15&l)<<12|(63&o)<<6|63&a)<=2047||u>=55296&&u<=57343)&&(u=null)):4===c&&(o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&((u=(15&l)<<18|(63&o)<<12|(63&a)<<6|63&s)<=65535||u>=1114112)&&(u=null)),null===u?(u=65533,c=1):u>65535&&(u-=65536,r+=String.fromCharCode(u>>>10&1023|55296),u=56320|1023&u),r+=String.fromCharCode(u),i+=c}return r}(this.buf,this.pos,e);return this.pos=e,t},readBytes:function(){var e=this.readVarint()+this.pos,t=this.buf.subarray(this.pos,e);return this.pos=e,t},readPackedVarint:function(e,t){var n=o(this);for(e=e||[];this.pos<n;)e.push(this.readVarint(t));return e},readPackedSVarint:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSVarint());return e},readPackedBoolean:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readBoolean());return e},readPackedFloat:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFloat());return e},readPackedDouble:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readDouble());return e},readPackedFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed32());return e},readPackedSFixed32:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed32());return e},readPackedFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readFixed64());return e},readPackedSFixed64:function(e){var t=o(this);for(e=e||[];this.pos<t;)e.push(this.readSFixed64());return e},skip:function(e){var t=7&e;if(t===i.Varint)for(;this.buf[this.pos++]>127;);else if(t===i.Bytes)this.pos=this.readVarint()+this.pos;else if(t===i.Fixed32)this.pos+=4;else{if(t!==i.Fixed64)throw new Error("Unimplemented type: "+t);this.pos+=8}},writeTag:function(e,t){this.writeVarint(e<<3|t)},realloc:function(e){for(var t=this.length||16;t<this.pos+e;)t*=2;if(t!==this.length){var n=new Uint8Array(t);n.set(this.buf),this.buf=n,this.length=t}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(e){this.realloc(4),g(this.buf,e,this.pos),this.pos+=4},writeSFixed32:function(e){this.realloc(4),g(this.buf,e,this.pos),this.pos+=4},writeFixed64:function(e){this.realloc(8),g(this.buf,-1&e,this.pos),g(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(e){this.realloc(8),g(this.buf,-1&e,this.pos),g(this.buf,Math.floor(e*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(e){(e=+e||0)>268435455||e<0?function(e,t){var n,r;e>=0?(n=e%4294967296|0,r=e/4294967296|0):(r=~(-e/4294967296),4294967295^(n=~(-e%4294967296))?n=n+1|0:(n=0,r=r+1|0));if(e>=0x10000000000000000||e<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");t.realloc(10),function(e,t,n){n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos++]=127&e|128,e>>>=7,n.buf[n.pos]=127&e}(n,0,t),function(e,t){var n=(7&e)<<4;if(t.buf[t.pos++]|=n|((e>>>=3)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;if(t.buf[t.pos++]=127&e|((e>>>=7)?128:0),!e)return;t.buf[t.pos++]=127&e}(r,t)}(e,this):(this.realloc(4),this.buf[this.pos++]=127&e|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=127&(e>>>=7)|(e>127?128:0),e<=127||(this.buf[this.pos++]=e>>>7&127))))},writeSVarint:function(e){this.writeVarint(e<0?2*-e-1:2*e)},writeBoolean:function(e){this.writeVarint(Boolean(e))},writeString:function(e){e=String(e),this.realloc(4*e.length),this.pos++;var t=this.pos;this.pos=function(e,t,n){for(var r,i,o=0;o<t.length;o++){if((r=t.charCodeAt(o))>55295&&r<57344){if(!i){r>56319||o+1===t.length?(e[n++]=239,e[n++]=191,e[n++]=189):i=r;continue}if(r<56320){e[n++]=239,e[n++]=191,e[n++]=189,i=r;continue}r=i-55296<<10|r-56320|65536,i=null}else i&&(e[n++]=239,e[n++]=191,e[n++]=189,i=null);r<128?e[n++]=r:(r<2048?e[n++]=r>>6|192:(r<65536?e[n++]=r>>12|224:(e[n++]=r>>18|240,e[n++]=r>>12&63|128),e[n++]=r>>6&63|128),e[n++]=63&r|128)}return n}(this.buf,e,this.pos);var n=this.pos-t;n>=128&&s(t,n,this),this.pos=t-1,this.writeVarint(n),this.pos+=n},writeFloat:function(e){this.realloc(4),r.write(this.buf,e,this.pos,!0,23,4),this.pos+=4},writeDouble:function(e){this.realloc(8),r.write(this.buf,e,this.pos,!0,52,8),this.pos+=8},writeBytes:function(e){var t=e.length;this.writeVarint(t),this.realloc(t);for(var n=0;n<t;n++)this.buf[this.pos++]=e[n]},writeRawMessage:function(e,t){this.pos++;var n=this.pos;e(t,this);var r=this.pos-n;r>=128&&s(n,r,this),this.pos=n-1,this.writeVarint(r),this.pos+=r},writeMessage:function(e,t,n){this.writeTag(e,i.Bytes),this.writeRawMessage(t,n)},writePackedVarint:function(e,t){this.writeMessage(e,l,t)},writePackedSVarint:function(e,t){this.writeMessage(e,u,t)},writePackedBoolean:function(e,t){this.writeMessage(e,h,t)},writePackedFloat:function(e,t){this.writeMessage(e,c,t)},writePackedDouble:function(e,t){this.writeMessage(e,f,t)},writePackedFixed32:function(e,t){this.writeMessage(e,p,t)},writePackedSFixed32:function(e,t){this.writeMessage(e,y,t)},writePackedFixed64:function(e,t){this.writeMessage(e,d,t)},writePackedSFixed64:function(e,t){this.writeMessage(e,m,t)},writeBytesField:function(e,t){this.writeTag(e,i.Bytes),this.writeBytes(t)},writeFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeFixed32(t)},writeSFixed32Field:function(e,t){this.writeTag(e,i.Fixed32),this.writeSFixed32(t)},writeFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeFixed64(t)},writeSFixed64Field:function(e,t){this.writeTag(e,i.Fixed64),this.writeSFixed64(t)},writeVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeVarint(t)},writeSVarintField:function(e,t){this.writeTag(e,i.Varint),this.writeSVarint(t)},writeStringField:function(e,t){this.writeTag(e,i.Bytes),this.writeString(t)},writeFloatField:function(e,t){this.writeTag(e,i.Fixed32),this.writeFloat(t)},writeDoubleField:function(e,t){this.writeTag(e,i.Fixed64),this.writeDouble(t)},writeBooleanField:function(e,t){this.writeVarintField(e,Boolean(t))}}},function(e,t,n){e.exports.VectorTile=n(23),e.exports.VectorTileFeature=n(10),e.exports.VectorTileLayer=n(9)},function(e,t,n){n(25),e.exports=n(26)},function(e,t,n){(function(r,i){var o,a,s;function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s=function(){"use strict";function e(e){var t=this.constructor;return this.then(function(n){return t.resolve(e()).then(function(){return n})},function(n){return t.resolve(e()).then(function(){return t.reject(n)})})}var t=setTimeout;function n(e){return Boolean(e&&void 0!==e.length)}function o(){}function a(e){if(!(this instanceof a))throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(e,this)}function s(e,t){for(;3===e._state;)e=e._value;0!==e._state?(e._handled=!0,a._immediateFn(function(){var n=1===e._state?t.onFulfilled:t.onRejected;if(null!==n){var r;try{r=n(e._value)}catch(e){return void c(t.promise,e)}u(t.promise,r)}else(1===e._state?u:c)(t.promise,e._value)})):e._deferreds.push(t)}function u(e,t){try{if(t===e)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"===l(t)||"function"==typeof t)){var n=t.then;if(t instanceof a)return e._state=3,e._value=t,void f(e);if("function"==typeof n)return void h((r=n,i=t,function(){r.apply(i,arguments)}),e)}e._state=1,e._value=t,f(e)}catch(t){c(e,t)}var r,i}function c(e,t){e._state=2,e._value=t,f(e)}function f(e){2===e._state&&0===e._deferreds.length&&a._immediateFn(function(){e._handled||a._unhandledRejectionFn(e._value)});for(var t=0,n=e._deferreds.length;t<n;t++)s(e,e._deferreds[t]);e._deferreds=null}function h(e,t){var n=!1;try{e(function(e){n||(n=!0,u(t,e))},function(e){n||(n=!0,c(t,e))})}catch(e){if(n)return;n=!0,c(t,e)}}a.prototype.catch=function(e){return this.then(null,e)},a.prototype.then=function(e,t){var n=new this.constructor(o);return s(this,new function(e,t,n){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=n}(e,t,n)),n},a.prototype.finally=e,a.all=function(e){return new a(function(t,r){if(!n(e))return r(new TypeError("Promise.all accepts an array"));var i=Array.prototype.slice.call(e);if(0===i.length)return t([]);var o=i.length;function a(e,n){try{if(n&&("object"===l(n)||"function"==typeof n)){var s=n.then;if("function"==typeof s)return void s.call(n,function(t){a(e,t)},r)}i[e]=n,0==--o&&t(i)}catch(e){r(e)}}for(var s=0;s<i.length;s++)a(s,i[s])})},a.resolve=function(e){return e&&"object"===l(e)&&e.constructor===a?e:new a(function(t){t(e)})},a.reject=function(e){return new a(function(t,n){n(e)})},a.race=function(e){return new a(function(t,r){if(!n(e))return r(new TypeError("Promise.race accepts an array"));for(var i=0,o=e.length;i<o;i++)a.resolve(e[i]).then(t,r)})},a._immediateFn="function"==typeof r&&function(e){r(e)}||function(e){t(e,0)},a._unhandledRejectionFn=function(e){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",e)};var p=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if(void 0!==i)return i;throw new Error("unable to locate global object")}();"Promise"in p?p.Promise.prototype.finally||(p.Promise.prototype.finally=e):p.Promise=a},"object"===l(t)&&void 0!==e?s():void 0===(a="function"==typeof(o=s)?o.call(t,n,t,e):o)||(e.exports=a)}).call(this,n(17).setImmediate,n(2))},function(e,t,n){(function(e){var r=void 0!==e&&e||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},t.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(18),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(2))},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var r,i,o,a,s,l=1,u={},c=!1,f=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?r=function(e){t.nextTick(function(){y(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){y(e.data)},r=function(e){o.port2.postMessage(e)}):f&&"onreadystatechange"in f.createElement("script")?(i=f.documentElement,r=function(e){var t=f.createElement("script");t.onreadystatechange=function(){y(e),t.onreadystatechange=null,i.removeChild(t),t=null},i.appendChild(t)}):r=function(e){setTimeout(y,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&y(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),r=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return u[l]=i,r(l),l++},h.clearImmediate=p}function p(e){delete u[e]}function y(e){if(c)setTimeout(y,0,e);else{var t=u[e];if(t){c=!0;try{!function(e){var t=e.callback,r=e.args;switch(r.length){case 0:t();break;case 1:t(r[0]);break;case 2:t(r[0],r[1]);break;case 3:t(r[0],r[1],r[2]);break;default:t.apply(n,r)}}(t)}finally{p(e),c=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(2),n(19))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:a}catch(e){r=a}}();var l,u=[],c=!1,f=-1;function h(){c&&l&&(c=!1,l.length?u=l.concat(u):f=-1,u.length&&p())}function p(){if(!c){var e=s(h);c=!0;for(var t=u.length;t;){for(l=u,u=[];++f<t;)l&&l[f].run();f=-1,t=u.length}l=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===a||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function y(e,t){this.fun=e,this.array=t}function d(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new y(e,t)),1!==u.length||c||s(p)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=d,i.addListener=d,i.once=d,i.off=d,i.removeListener=d,i.removeAllListeners=d,i.emit=d,i.prependListener=d,i.prependOnceListener=d,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t,n){!function(t){"use strict";if(t.__disableNativeFetch||!t.fetch){s.prototype.append=function(e,t){e=o(e),t=a(t);var n=this.map[e];n||(n=[],this.map[e]=n),n.push(t)},s.prototype.delete=function(e){delete this.map[o(e)]},s.prototype.get=function(e){var t=this.map[o(e)];return t?t[0]:null},s.prototype.getAll=function(e){return this.map[o(e)]||[]},s.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},s.prototype.set=function(e,t){this.map[o(e)]=[a(t)]},s.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(r){e.call(t,r,n,this)},this)},this)};var n={blob:"FileReader"in t&&"Blob"in t&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in t,arrayBuffer:"ArrayBuffer"in t},r=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];h.prototype.clone=function(){return new h(this)},f.call(h.prototype),f.call(y.prototype),y.prototype.clone=function(){return new y(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new s(this.headers),url:this.url})},y.error=function(){var e=new y(null,{status:0,statusText:""});return e.type="error",e};var i=[301,302,303,307,308];y.redirect=function(e,t){if(-1===i.indexOf(t))throw new RangeError("Invalid status code");return new y(null,{status:t,headers:{location:e}})},t.Headers=s,t.Request=h,t.Response=y,t.fetch=function(e,t){return new Promise(function(r,i){var o;o=h.prototype.isPrototypeOf(e)&&!t?e:new h(e,t);var a=new XMLHttpRequest;var l=!1;function u(){if(4===a.readyState){var e=1223===a.status?204:a.status;if(e<100||e>599){if(l)return;return l=!0,void i(new TypeError("Network request failed"))}var t={status:e,statusText:a.statusText,headers:function(e){var t=new s;return e.getAllResponseHeaders().trim().split("\n").forEach(function(e){var n=e.trim().split(":"),r=n.shift().trim(),i=n.join(":").trim();t.append(r,i)}),t}(a),url:"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0},n="response"in a?a.response:a.responseText;l||(l=!0,r(new y(n,t)))}}a.onreadystatechange=u,a.onload=u,a.onerror=function(){l||(l=!0,i(new TypeError("Network request failed")))},a.open(o.method,o.url,!0);try{"include"===o.credentials&&("withCredentials"in a?a.withCredentials=!0:console&&console.warn&&console.warn("withCredentials is not supported, you can ignore this warning"))}catch(e){console&&console.warn&&console.warn("set withCredentials error:"+e)}"responseType"in a&&n.blob&&(a.responseType="blob"),o.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===o._bodyInit?null:o._bodyInit)})},t.fetch.polyfill=!0,e.exports&&(e.exports=t.fetch)}function o(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function a(e){return"string"!=typeof e&&(e=String(e)),e}function s(e){this.map={},e instanceof s?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function l(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function u(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function c(e){var t=new FileReader;return t.readAsArrayBuffer(e),u(t)}function f(){return this.bodyUsed=!1,this._initBody=function(e,t){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(n.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e,this._options=t;else if(n.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(e){if(!n.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText=""},n.blob?(this.blob=function(){var e=l(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(c)},this.text=function(){var e,t,n,r,i,o,a,s=l(this);if(s)return s;if(this._bodyBlob)return e=this._bodyBlob,t=this._options,n=new FileReader,r=t.headers.map["content-type"]?t.headers.map["content-type"].toString():"",i=/charset\=[0-9a-zA-Z\-\_]*;?/,o=e.type.match(i)||r.match(i),a=[e],o&&a.push(o[0].replace(/^charset\=/,"").replace(/;$/,"")),n.readAsText.apply(n,a),u(n);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=l(this);return e||Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(p)}),this.json=function(){return this.text().then(JSON.parse)},this}function h(e,t){var n,i,o=(t=t||{}).body;if(h.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new s(e.headers)),this.method=e.method,this.mode=e.mode,o||(o=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new s(t.headers)),this.method=(n=t.method||this.method||"GET",i=n.toUpperCase(),r.indexOf(i)>-1?i:n),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&o)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(o,t)}function p(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),r=n.shift().replace(/\+/g," "),i=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(r),decodeURIComponent(i))}}),t}function y(e,t){t||(t={}),this._initBody(e,t),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof s?t.headers:new s(t.headers),this.url=t.url||""}}("undefined"!=typeof self?self:this)},function(e,t){function n(e){return Object.prototype.toString.call(e)}function r(e){return"[object String]"===n(e)}e.exports={getObjectType:n,isDate:function(e){return"[object Date]"===n(e)},isString:r,isDateString:function(e){return r(e)&&!isNaN(Date.parse(e))},parseDateFromString:function(e){return Date.parse(e)},isNumber:function(e){return"number"==typeof e}}},function(e,t){t.read=function(e,t,n,r,i){var o,a,s=8*i-r-1,l=(1<<s)-1,u=l>>1,c=-7,f=n?i-1:0,h=n?-1:1,p=e[t+f];for(f+=h,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+f],f+=h,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=r;c>0;a=256*a+e[t+f],f+=h,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,r),o-=u}return(p?-1:1)*a*Math.pow(2,o-r)},t.write=function(e,t,n,r,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,f=c>>1,h=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,y=r?1:-1,d=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+f>=1?h/l:h*Math.pow(2,1-f))*l>=2&&(a++,l/=2),a+f>=c?(s=0,a=c):a+f>=1?(s=(t*l-1)*Math.pow(2,i),a+=f):(s=t*Math.pow(2,f-1)*Math.pow(2,i),a=0));i>=8;e[n+p]=255&s,p+=y,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[n+p]=255&a,p+=y,a/=256,u-=8);e[n+p-y]|=128*d}},function(e,t,n){"use strict";var r=n(9);function i(e,t,n){if(3===e){var i=new r(n,n.readVarint()+n.pos);i.length&&(t[i.name]=i)}}e.exports=function(e,t){this.layers=e.readFields(i,{},t)}},function(e,t,n){"use strict";function r(e,t){this.x=e,this.y=t}e.exports=r,r.prototype={clone:function(){return new r(this.x,this.y)},add:function(e){return this.clone()._add(e)},sub:function(e){return this.clone()._sub(e)},multByPoint:function(e){return this.clone()._multByPoint(e)},divByPoint:function(e){return this.clone()._divByPoint(e)},mult:function(e){return this.clone()._mult(e)},div:function(e){return this.clone()._div(e)},rotate:function(e){return this.clone()._rotate(e)},rotateAround:function(e,t){return this.clone()._rotateAround(e,t)},matMult:function(e){return this.clone()._matMult(e)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(e){return this.x===e.x&&this.y===e.y},dist:function(e){return Math.sqrt(this.distSqr(e))},distSqr:function(e){var t=e.x-this.x,n=e.y-this.y;return t*t+n*n},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(e){return Math.atan2(this.y-e.y,this.x-e.x)},angleWith:function(e){return this.angleWithSep(e.x,e.y)},angleWithSep:function(e,t){return Math.atan2(this.x*t-this.y*e,this.x*e+this.y*t)},_matMult:function(e){var t=e[0]*this.x+e[1]*this.y,n=e[2]*this.x+e[3]*this.y;return this.x=t,this.y=n,this},_add:function(e){return this.x+=e.x,this.y+=e.y,this},_sub:function(e){return this.x-=e.x,this.y-=e.y,this},_mult:function(e){return this.x*=e,this.y*=e,this},_div:function(e){return this.x/=e,this.y/=e,this},_multByPoint:function(e){return this.x*=e.x,this.y*=e.y,this},_divByPoint:function(e){return this.x/=e.x,this.y/=e.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var e=this.y;return this.y=this.x,this.x=-e,this},_rotate:function(e){var t=Math.cos(e),n=Math.sin(e),r=t*this.x-n*this.y,i=n*this.x+t*this.y;return this.x=r,this.y=i,this},_rotateAround:function(e,t){var n=Math.cos(e),r=Math.sin(e),i=t.x+n*(this.x-t.x)-r*(this.y-t.y),o=t.y+r*(this.x-t.x)+n*(this.y-t.y);return this.x=i,this.y=o,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},r.convert=function(e){return e instanceof r?e:Array.isArray(e)?new r(e[0],e[1]):e}},function(e,t,n){"use strict";n.r(t);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var r=window.SuperMap=window.SuperMap||{};r.Components=window.SuperMap.Components||{};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var i=r.DataFormat={GEOJSON:"GEOJSON",ISERVER:"ISERVER"},o=r.ServerType={ISERVER:"ISERVER",IPORTAL:"IPORTAL",ONLINE:"ONLINE"},a=r.GeometryType={LINE:"LINE",LINEM:"LINEM",POINT:"POINT",REGION:"REGION",POINTEPS:"POINTEPS",LINEEPS:"LINEEPS",REGIONEPS:"REGIONEPS",ELLIPSE:"ELLIPSE",CIRCLE:"CIRCLE",TEXT:"TEXT",RECTANGLE:"RECTANGLE",UNKNOWN:"UNKNOWN"},s=r.QueryOption={ATTRIBUTE:"ATTRIBUTE",ATTRIBUTEANDGEOMETRY:"ATTRIBUTEANDGEOMETRY",GEOMETRY:"GEOMETRY"},l=r.JoinType={INNERJOIN:"INNERJOIN",LEFTJOIN:"LEFTJOIN"},u=r.SpatialQueryMode={CONTAIN:"CONTAIN",CROSS:"CROSS",DISJOINT:"DISJOINT",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",NONE:"NONE",OVERLAP:"OVERLAP",TOUCH:"TOUCH",WITHIN:"WITHIN"},c=r.SpatialRelationType={CONTAIN:"CONTAIN",INTERSECT:"INTERSECT",WITHIN:"WITHIN"},f=r.MeasureMode={DISTANCE:"DISTANCE",AREA:"AREA"},h=r.Unit={METER:"METER",KILOMETER:"KILOMETER",MILE:"MILE",YARD:"YARD",DEGREE:"DEGREE",MILLIMETER:"MILLIMETER",CENTIMETER:"CENTIMETER",INCH:"INCH",DECIMETER:"DECIMETER",FOOT:"FOOT",SECOND:"SECOND",MINUTE:"MINUTE",RADIAN:"RADIAN"},p=r.BufferRadiusUnit={CENTIMETER:"CENTIMETER",DECIMETER:"DECIMETER",FOOT:"FOOT",INCH:"INCH",KILOMETER:"KILOMETER",METER:"METER",MILE:"MILE",MILLIMETER:"MILLIMETER",YARD:"YARD"},y=r.EngineType={IMAGEPLUGINS:"IMAGEPLUGINS",OGC:"OGC",ORACLEPLUS:"ORACLEPLUS",SDBPLUS:"SDBPLUS",SQLPLUS:"SQLPLUS",UDB:"UDB"},d=r.ThemeGraphTextFormat={CAPTION:"CAPTION",CAPTION_PERCENT:"CAPTION_PERCENT",CAPTION_VALUE:"CAPTION_VALUE",PERCENT:"PERCENT",VALUE:"VALUE"},m=r.ThemeGraphType={AREA:"AREA",BAR:"BAR",BAR3D:"BAR3D",LINE:"LINE",PIE:"PIE",PIE3D:"PIE3D",POINT:"POINT",RING:"RING",ROSE:"ROSE",ROSE3D:"ROSE3D",STACK_BAR:"STACK_BAR",STACK_BAR3D:"STACK_BAR3D",STEP:"STEP"},v=r.GraphAxesTextDisplayMode={ALL:"ALL",NONE:"NONE",YAXES:"YAXES"},g=r.GraduatedMode={CONSTANT:"CONSTANT",LOGARITHM:"LOGARITHM",SQUAREROOT:"SQUAREROOT"},b=r.RangeMode={CUSTOMINTERVAL:"CUSTOMINTERVAL",EQUALINTERVAL:"EQUALINTERVAL",LOGARITHM:"LOGARITHM",QUANTILE:"QUANTILE",SQUAREROOT:"SQUAREROOT",STDDEVIATION:"STDDEVIATION"},S=r.ThemeType={DOTDENSITY:"DOTDENSITY",GRADUATEDSYMBOL:"GRADUATEDSYMBOL",GRAPH:"GRAPH",LABEL:"LABEL",RANGE:"RANGE",UNIQUE:"UNIQUE"},_=r.ColorGradientType={BLACK_WHITE:"BLACKWHITE",BLUE_BLACK:"BLUEBLACK",BLUE_RED:"BLUERED",BLUE_WHITE:"BLUEWHITE",CYAN_BLACK:"CYANBLACK",CYAN_BLUE:"CYANBLUE",CYAN_GREEN:"CYANGREEN",CYAN_WHITE:"CYANWHITE",GREEN_BLACK:"GREENBLACK",GREEN_BLUE:"GREENBLUE",GREEN_ORANGE_VIOLET:"GREENORANGEVIOLET",GREEN_RED:"GREENRED",GREEN_WHITE:"GREENWHITE",PINK_BLACK:"PINKBLACK",PINK_BLUE:"PINKBLUE",PINK_RED:"PINKRED",PINK_WHITE:"PINKWHITE",RAIN_BOW:"RAINBOW",RED_BLACK:"REDBLACK",RED_WHITE:"REDWHITE",SPECTRUM:"SPECTRUM",TERRAIN:"TERRAIN",YELLOW_BLACK:"YELLOWBLACK",YELLOW_BLUE:"YELLOWBLUE",YELLOW_GREEN:"YELLOWGREEN",YELLOW_RED:"YELLOWRED",YELLOW_WHITE:"YELLOWWHITE"},w=r.TextAlignment={TOPLEFT:"TOPLEFT",TOPCENTER:"TOPCENTER",TOPRIGHT:"TOPRIGHT",BASELINELEFT:"BASELINELEFT",BASELINECENTER:"BASELINECENTER",BASELINERIGHT:"BASELINERIGHT",BOTTOMLEFT:"BOTTOMLEFT",BOTTOMCENTER:"BOTTOMCENTER",BOTTOMRIGHT:"BOTTOMRIGHT",MIDDLELEFT:"MIDDLELEFT",MIDDLECENTER:"MIDDLECENTER",MIDDLERIGHT:"MIDDLERIGHT"},O=r.FillGradientMode={NONE:"NONE",LINEAR:"LINEAR",RADIAL:"RADIAL",CONICAL:"CONICAL",SQUARE:"SQUARE"},x=r.AlongLineDirection={NORMAL:"ALONG_LINE_NORMAL",LB_TO_RT:"LEFT_BOTTOM_TO_RIGHT_TOP",LT_TO_RB:"LEFT_TOP_TO_RIGHT_BOTTOM",RB_TO_LT:"RIGHT_BOTTOM_TO_LEFT_TOP",RT_TO_LB:"RIGHT_TOP_TO_LEFT_BOTTOM"},C=r.LabelBackShape={DIAMOND:"DIAMOND",ELLIPSE:"ELLIPSE",MARKER:"MARKER",NONE:"NONE",RECT:"RECT",ROUNDRECT:"ROUNDRECT",TRIANGLE:"TRIANGLE"},T=r.LabelOverLengthMode={NEWLINE:"NEWLINE",NONE:"NONE",OMIT:"OMIT"},P=r.DirectionType={EAST:"EAST",NONE:"NONE",NORTH:"NORTH",SOURTH:"SOURTH",WEST:"WEST"},E=r.SideType={LEFT:"LEFT",MIDDLE:"MIDDLE",NONE:"NONE",RIGHT:"RIGHT"},k=r.SupplyCenterType={FIXEDCENTER:"FIXEDCENTER",NULL:"NULL",OPTIONALCENTER:"OPTIONALCENTER"},M=r.TurnType={AHEAD:"AHEAD",BACK:"BACK",END:"END",LEFT:"LEFT",NONE:"NONE",RIGHT:"RIGHT"},A=r.BufferEndType={FLAT:"FLAT",ROUND:"ROUND"},L=r.OverlayOperationType={CLIP:"CLIP",ERASE:"ERASE",IDENTITY:"IDENTITY",INTERSECT:"INTERSECT",UNION:"UNION",UPDATE:"UPDATE",XOR:"XOR"},j=r.OutputType={INDEXEDHDFS:"INDEXEDHDFS",UDB:"UDB",MONGODB:"MONGODB",PG:"PG"},N=r.SmoothMethod={BSPLINE:"BSPLINE",POLISH:"POLISH"},R=r.SurfaceAnalystMethod={ISOLINE:"ISOLINE",ISOREGION:"ISOREGION"},I=r.DataReturnMode={DATASET_AND_RECORDSET:"DATASET_AND_RECORDSET",DATASET_ONLY:"DATASET_ONLY",RECORDSET_ONLY:"RECORDSET_ONLY"},D=r.EditType={ADD:"add",UPDATE:"update",DELETE:"delete"},F=r.TransferTactic={LESS_TIME:"LESS_TIME",LESS_TRANSFER:"LESS_TRANSFER",LESS_WALK:"LESS_WALK",MIN_DISTANCE:"MIN_DISTANCE"},B=r.TransferPreference={BUS:"BUS",SUBWAY:"SUBWAY",NO_SUBWAY:"NO_SUBWAY",NONE:"NONE"},U=r.GridType={CROSS:"CROSS",GRID:"GRID",POINT:"POINT"},G=r.ColorSpaceType={CMYK:"CMYK",RGB:"RGB"},z=r.LayerType={UGC:"UGC",WMS:"WMS",WFS:"WFS",CUSTOM:"CUSTOM"},V=r.UGCLayerType={THEME:"THEME",VECTOR:"VECTOR",GRID:"GRID",IMAGE:"IMAGE"},H=r.StatisticMode={AVERAGE:"AVERAGE",MAX:"MAX",MIN:"MIN",STDDEVIATION:"STDDEVIATION",SUM:"SUM",VARIANCE:"VARIANCE"},J=r.PixelFormat={BIT16:"BIT16",BIT32:"BIT32",BIT64:"BIT64",SINGLE:"SINGLE",DOUBLE:"DOUBLE",UBIT1:"UBIT1",UBIT4:"UBIT4",UBIT8:"UBIT8",UBIT24:"UBIT24",UBIT32:"UBIT32"},q=r.SearchMode={KDTREE_FIXED_COUNT:"KDTREE_FIXED_COUNT",KDTREE_FIXED_RADIUS:"KDTREE_FIXED_RADIUS",NONE:"NONE",QUADTREE:"QUADTREE"},W=r.InterpolationAlgorithmType={KRIGING:"KRIGING",SimpleKriging:"SimpleKriging",UniversalKriging:"UniversalKriging"},Q=r.VariogramMode={EXPONENTIAL:"EXPONENTIAL",GAUSSIAN:"GAUSSIAN",SPHERICAL:"SPHERICAL"},Y=r.Exponent={EXP1:"EXP1",EXP2:"EXP2"},X=r.ClientType={IP:"IP",REFERER:"Referer",REQUESTIP:"RequestIP",NONE:"NONE",SERVER:"SERVER",WEB:"WEB"},K=r.ChartType={BAR:"Bar",BAR3D:"Bar3D",CIRCLE:"Circle",PIE:"Pie",POINT:"Point",LINE:"Line",RING:"Ring"},Z=r.ClipAnalystMode={CLIP:"clip",INTERSECT:"intersect"},$=r.AnalystAreaUnit={SQUAREMETER:"SquareMeter",SQUAREKILOMETER:"SquareKiloMeter",HECTARE:"Hectare",ARE:"Are",ACRE:"Acre",SQUAREFOOT:"SquareFoot",SQUAREYARD:"SquareYard",SQUAREMILE:"SquareMile"},ee=r.AnalystSizeUnit={METER:"Meter",KILOMETER:"Kilometer",YARD:"Yard",FOOT:"Foot",MILE:"Mile"},te=r.StatisticAnalystMode={MAX:"max",MIN:"min",AVERAGE:"average",SUM:"sum",VARIANCE:"variance",STDDEVIATION:"stdDeviation"},ne=r.SummaryType={SUMMARYMESH:"SUMMARYMESH",SUMMARYREGION:"SUMMARYREGION"},re=r.TopologyValidatorRule={REGIONNOOVERLAP:"REGIONNOOVERLAP",REGIONNOOVERLAPWITH:"REGIONNOOVERLAPWITH",REGIONCONTAINEDBYREGION:"REGIONCONTAINEDBYREGION",REGIONCOVEREDBYREGION:"REGIONCOVEREDBYREGION",LINENOOVERLAP:"LINENOOVERLAP",LINENOOVERLAPWITH:"LINENOOVERLAPWITH",POINTNOIDENTICAL:"POINTNOIDENTICAL"},ie=r.AggregationType={GEOHASH_GRID:"geohash_grid",FILTER:"filter"},oe=r.AggregationQueryBuilderType={GEO_BOUNDING_BOX:"geo_bounding_box"},ae=r.GetFeatureMode={BOUNDS:"BOUNDS",BUFFER:"BUFFER",ID:"ID",SPATIAL:"SPATIAL",SQL:"SQL"},se=r.RasterFunctionType={NDVI:"NDVI",HILLSHADE:"HILLSHADE"};function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ue=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.w=t?parseFloat(t):0,this.h=t?parseFloat(n):0,this.CLASS_NAME="SuperMap.Size"}var t,n,r;return t=e,(n=[{key:"toString",value:function(){return"w="+this.w+",h="+this.h}},{key:"clone",value:function(){return new e(this.w,this.h)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.w===e.w&&this.h===e.h||isNaN(this.w)&&isNaN(this.h)&&isNaN(e.w)&&isNaN(e.h)),t}},{key:"destroy",value:function(){this.w=null,this.h=null}}])&&le(t.prototype,n),r&&le(t,r),e}();function ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Size=ue;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fe=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.x=t?parseFloat(t):0,this.y=n?parseFloat(n):0,this.mode=i,this.CLASS_NAME="SuperMap.Pixel",r.Pixel.Mode={LeftTop:"lefttop",RightTop:"righttop",RightBottom:"rightbottom",LeftBottom:"leftbottom"}}var t,n,i;return t=e,(n=[{key:"toString",value:function(){return"x="+this.x+",y="+this.y}},{key:"clone",value:function(){return new e(this.x,this.y,this.mode)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x==e.x&&this.y==e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"distanceTo",value:function(e){return Math.sqrt(Math.pow(this.x-e.x,2)+Math.pow(this.y-e.y,2))}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Pixel.add cannot receive null values");return new e(this.x+t,this.y+n)}},{key:"offset",value:function(e){var t=this.clone();return e&&(t=this.add(e.x,e.y)),t}},{key:"destroy",value:function(){this.x=null,this.y=null,this.mode=null}}])&&ce(t.prototype,n),i&&ce(t,i),e}();r.Pixel=fe,
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r.inherit=function(e,t){var n,i,o,a=function(){};for(a.prototype=t.prototype,e.prototype=new a,n=2,i=arguments.length;n<i;n++)"function"==typeof(o=arguments[n])&&(o=o.prototype),r.Util.extend(e.prototype,o)},r.mixin=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(var r=function e(n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=0;r<t.length;r++)a(this,new t[r](n))},i=0;i<t.length;i++){var o=t[i];a(r,o),a(r.prototype,o.prototype),a(r.prototype,new o)}return r;function a(e,t){var n=Object.getOwnPropertyNames(t);Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t)));for(var r=0;r<n.length;r++){var i=n[r];if("constructor"!==i&&"prototype"!==i&&"name"!==i&&"length"!==i){var o=Object.getOwnPropertyDescriptor(t,i);window.ActiveXObject?Object.defineProperty(e,i,o||{}):Object.defineProperty(e,i,o)}}}};var he=r.String={startsWith:function(e,t){return 0==e.indexOf(t)},contains:function(e,t){return-1!=e.indexOf(t)},trim:function(e){return e.replace(/^\s\s*/,"").replace(/\s\s*$/,"")},camelize:function(e){for(var t=e.split("-"),n=t[0],r=1,i=t.length;r<i;r++){var o=t[r];n+=o.charAt(0).toUpperCase()+o.substring(1)}return n},format:function(e,t,n){t||(t=window);return e.replace(r.String.tokenRegEx,function(e,r){for(var i,o=r.split(/\.+/),a=0;a<o.length;a++)0==a&&(i=t),i=i[o[a]];return"function"==typeof i&&(i=n?i.apply(null,n):i()),void 0===i?"undefined":i})},tokenRegEx:/\$\{([\w.]+?)\}/g,numberRegEx:/^([+-]?)(?=\d|\.\d)\d*(\.\d*)?([Ee]([+-]?\d+))?$/,isNumeric:function(e){return r.String.numberRegEx.test(e)},numericIf:function(e){return r.String.isNumeric(e)?parseFloat(e):e}},pe=r.Number={decimalSeparator:".",thousandsSeparator:",",limitSigDigs:function(e,t){var n=0;return t>0&&(n=parseFloat(e.toPrecision(t))),n},format:function(e,t,n,i){t=void 0!==t?t:0,n=void 0!==n?n:r.Number.thousandsSeparator,i=void 0!==i?i:r.Number.decimalSeparator,null!=t&&(e=parseFloat(e.toFixed(t)));var o=e.toString().split(".");1===o.length&&null==t&&(t=0);var a,s=o[0];if(n)for(var l=/(-?[0-9]+)([0-9]{3})/;l.test(s);)s=s.replace(l,"$1"+n+"$2");if(0==t)a=s;else{var u=o.length>1?o[1]:"0";null!=t&&(u+=new Array(t-u.length+1).join("0")),a=s+i+u}return a}};Number.prototype.limitSigDigs||(Number.prototype.limitSigDigs=function(e){return pe.limitSigDigs(this,e)});var ye=r.Function={bind:function(e,t){var n=Array.prototype.slice.apply(arguments,[2]);return function(){var r=n.concat(Array.prototype.slice.apply(arguments,[0]));return e.apply(t,r)}},bindAsEventListener:function(e,t){return function(n){return e.call(t,n||window.event)}},False:function(){return!1},True:function(){return!0},Void:function(){}};r.Array={filter:function(e,t,n){var r=[];if(Array.prototype.filter)r=e.filter(t,n);else{var i=e.length;if("function"!=typeof t)throw new TypeError;for(var o=0;o<i;o++)if(o in e){var a=e[o];t.call(n,a,o,e)&&r.push(a)}}return r}};function de(e){return(de="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var me,ve,ge,be=r.Util=r.Util||{};function Se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Util.extend=function(e,t){if(e=e||{},t){for(var n in t){var r=t[n];void 0!==r&&(e[n]=r)}!("function"==typeof window.Event&&t instanceof window.Event)&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&(e.toString=t.toString)}return e},r.Util.copy=function(e,t){var n;if(e=e||{},t)for(var r in e)void 0!==(n=t[r])&&(e[r]=n)},r.Util.reset=function(e){for(var t in e=e||{})if(e.hasOwnProperty(t)){if("object"===de(e[t])&&e[t]instanceof Array){for(var n in e[t])e[t][n].destroy&&e[t][n].destroy();e[t].length=0}else"object"===de(e[t])&&e[t]instanceof Object&&e[t].destroy&&e[t].destroy();e[t]=null}},r.Util.getElement=function(){for(var e=[],t=0,n=arguments.length;t<n;t++){var r=arguments[t];if("string"==typeof r&&(r=document.getElementById(r)),1===arguments.length)return r;e.push(r)}return e},r.Util.isElement=function(e){return!(!e||1!==e.nodeType)},r.Util.isArray=function(e){return"[object Array]"===Object.prototype.toString.call(e)},r.Util.removeItem=function(e,t){for(var n=e.length-1;n>=0;n--)e[n]===t&&e.splice(n,1);return e},r.Util.indexOf=function(e,t){if(null==e)return-1;if("function"==typeof e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},r.Util.modifyDOMElement=function(e,t,n,r,i,o,a,s){t&&(e.id=t),n&&(e.style.left=n.x+"px",e.style.top=n.y+"px"),r&&(e.style.width=r.w+"px",e.style.height=r.h+"px"),i&&(e.style.position=i),o&&(e.style.border=o),a&&(e.style.overflow=a),parseFloat(s)>=0&&parseFloat(s)<1?(e.style.filter="alpha(opacity="+100*s+")",e.style.opacity=s):1===parseFloat(s)&&(e.style.filter="",e.style.opacity="")},r.Util.applyDefaults=function(e,t){e=e||{};var n="function"==typeof window.Event&&t instanceof window.Event;for(var r in t)(void 0===e[r]||!n&&t.hasOwnProperty&&t.hasOwnProperty(r)&&!e.hasOwnProperty(r))&&(e[r]=t[r]);return!n&&t&&t.hasOwnProperty&&t.hasOwnProperty("toString")&&!e.hasOwnProperty("toString")&&(e.toString=t.toString),e},r.Util.getParameterString=function(e){var t=[];for(var n in e){var r=e[n];if(null!=r&&"function"!=typeof r){var i;if("object"===de(r)&&r.constructor===Array){for(var o,a=[],s=0,l=r.length;s<l;s++)o=r[s],a.push(encodeURIComponent(null===o||void 0===o?"":o));i=a.join(",")}else i=encodeURIComponent(r);t.push(encodeURIComponent(n)+"="+i)}}return t.join("&")},r.Util.urlAppend=function(e,t){var n=e;if(t){var r=(e+" ").split(/[?&]/);n+=" "===r.pop()?t:r.length?"&"+t:"?"+t}return n},r.Util.DEFAULT_PRECISION=14,r.Util.toFloat=function(e,t){return null==t&&(t=r.Util.DEFAULT_PRECISION),"number"!=typeof e&&(e=parseFloat(e)),0===t?e:parseFloat(e.toPrecision(t))},r.Util.rad=function(e){return e*Math.PI/180},r.Util.getParameters=function(e){e=null===e||void 0===e?window.location.href:e;var t="";if(r.String.contains(e,"?")){var n=e.indexOf("?")+1,i=r.String.contains(e,"#")?e.indexOf("#"):e.length;t=e.substring(n,i)}for(var o={},a=t.split(/[&;]/),s=0,l=a.length;s<l;++s){var u=a[s].split("=");if(u[0]){var c=u[0];try{c=decodeURIComponent(c)}catch(e){c=unescape(c)}var f=(u[1]||"").replace(/\+/g," ");try{f=decodeURIComponent(f)}catch(e){f=unescape(f)}1==(f=f.split(",")).length&&(f=f[0]),o[c]=f}}return o},r.Util.lastSeqID=0,r.Util.createUniqueID=function(e){return null==e&&(e="id_"),r.Util.lastSeqID+=1,e+r.Util.lastSeqID},r.INCHES_PER_UNIT={inches:1,ft:12,mi:63360,m:39.3701,km:39370.1,dd:4374754,yd:36},r.INCHES_PER_UNIT.in=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.degrees=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.nmi=1852*r.INCHES_PER_UNIT.m,r.METERS_PER_INCH=.0254000508001016,r.Util.extend(r.INCHES_PER_UNIT,{Inch:r.INCHES_PER_UNIT.inches,Meter:1/r.METERS_PER_INCH,Foot:.3048006096012192/r.METERS_PER_INCH,IFoot:.3048/r.METERS_PER_INCH,ClarkeFoot:.3047972651151/r.METERS_PER_INCH,SearsFoot:.30479947153867626/r.METERS_PER_INCH,GoldCoastFoot:.3047997101815088/r.METERS_PER_INCH,IInch:.0254/r.METERS_PER_INCH,MicroInch:254e-7/r.METERS_PER_INCH,Mil:2.54e-8/r.METERS_PER_INCH,Centimeter:.01/r.METERS_PER_INCH,Kilometer:1e3/r.METERS_PER_INCH,Yard:.9144018288036576/r.METERS_PER_INCH,SearsYard:.914398414616029/r.METERS_PER_INCH,IndianYard:.9143985307444408/r.METERS_PER_INCH,IndianYd37:.91439523/r.METERS_PER_INCH,IndianYd62:.9143988/r.METERS_PER_INCH,IndianYd75:.9143985/r.METERS_PER_INCH,IndianFoot:.30479951/r.METERS_PER_INCH,IndianFt37:.30479841/r.METERS_PER_INCH,IndianFt62:.3047996/r.METERS_PER_INCH,IndianFt75:.3047995/r.METERS_PER_INCH,Mile:1609.3472186944373/r.METERS_PER_INCH,IYard:.9144/r.METERS_PER_INCH,IMile:1609.344/r.METERS_PER_INCH,NautM:1852/r.METERS_PER_INCH,"Lat-66":110943.31648893273/r.METERS_PER_INCH,"Lat-83":110946.25736872235/r.METERS_PER_INCH,Decimeter:.1/r.METERS_PER_INCH,Millimeter:.001/r.METERS_PER_INCH,Dekameter:10/r.METERS_PER_INCH,Decameter:10/r.METERS_PER_INCH,Hectometer:100/r.METERS_PER_INCH,GermanMeter:1.0000135965/r.METERS_PER_INCH,CaGrid:.999738/r.METERS_PER_INCH,ClarkeChain:20.1166194976/r.METERS_PER_INCH,GunterChain:20.11684023368047/r.METERS_PER_INCH,BenoitChain:20.116782494375872/r.METERS_PER_INCH,SearsChain:20.11676512155/r.METERS_PER_INCH,ClarkeLink:.201166194976/r.METERS_PER_INCH,GunterLink:.2011684023368047/r.METERS_PER_INCH,BenoitLink:.20116782494375873/r.METERS_PER_INCH,SearsLink:.2011676512155/r.METERS_PER_INCH,Rod:5.02921005842012/r.METERS_PER_INCH,IntnlChain:20.1168/r.METERS_PER_INCH,IntnlLink:.201168/r.METERS_PER_INCH,Perch:5.02921005842012/r.METERS_PER_INCH,Pole:5.02921005842012/r.METERS_PER_INCH,Furlong:201.1684023368046/r.METERS_PER_INCH,Rood:3.778266898/r.METERS_PER_INCH,CapeFoot:.3047972615/r.METERS_PER_INCH,Brealey:375/r.METERS_PER_INCH,ModAmFt:.304812252984506/r.METERS_PER_INCH,Fathom:1.8288/r.METERS_PER_INCH,"NautM-UK":1853.184/r.METERS_PER_INCH,"50kilometers":5e4/r.METERS_PER_INCH,"150kilometers":15e4/r.METERS_PER_INCH}),r.Util.extend(r.INCHES_PER_UNIT,{mm:r.INCHES_PER_UNIT.Meter/1e3,cm:r.INCHES_PER_UNIT.Meter/100,dm:100*r.INCHES_PER_UNIT.Meter,km:1e3*r.INCHES_PER_UNIT.Meter,kmi:r.INCHES_PER_UNIT.nmi,fath:r.INCHES_PER_UNIT.Fathom,ch:r.INCHES_PER_UNIT.IntnlChain,link:r.INCHES_PER_UNIT.IntnlLink,"us-in":r.INCHES_PER_UNIT.inches,"us-ft":r.INCHES_PER_UNIT.Foot,"us-yd":r.INCHES_PER_UNIT.Yard,"us-ch":r.INCHES_PER_UNIT.GunterChain,"us-mi":r.INCHES_PER_UNIT.Mile,"ind-yd":r.INCHES_PER_UNIT.IndianYd37,"ind-ft":r.INCHES_PER_UNIT.IndianFt37,"ind-ch":20.11669506/r.METERS_PER_INCH}),r.DOTS_PER_INCH=96,r.Util.normalizeScale=function(e){return e>1?1/e:e},r.Util.getResolutionFromScale=function(e,t){var n;e&&(null==t&&(t="degrees"),n=1/(r.Util.normalizeScale(e)*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH));return n},r.Util.getScaleFromResolution=function(e,t){return null==t&&(t="degrees"),e*r.INCHES_PER_UNIT[t]*r.DOTS_PER_INCH},r.IS_GECKO=-1===(me=navigator.userAgent.toLowerCase()).indexOf("webkit")&&-1!==me.indexOf("gecko"),r.Browser=function(){var e,t="",n="",r="pc",i=navigator.userAgent.toLowerCase();return i.indexOf("msie")>-1||i.indexOf("trident")>-1&&i.indexOf("rv")>-1?(t="msie",e=i.match(/msie ([\d.]+)/)||i.match(/rv:([\d.]+)/)):i.indexOf("chrome")>-1?(t="chrome",e=i.match(/chrome\/([\d.]+)/)):i.indexOf("firefox")>-1?(t="firefox",e=i.match(/firefox\/([\d.]+)/)):i.indexOf("opera")>-1?(t="opera",e=i.match(/version\/([\d.]+)/)):i.indexOf("safari")>-1&&(t="safari",e=i.match(/version\/([\d.]+)/)),n=e?e[1]:"",i.indexOf("ipad")>-1||i.indexOf("ipod")>-1||i.indexOf("iphone")>-1?r="apple":i.indexOf("android")>-1&&(n=(e=i.match(/version\/([\d.]+)/))?e[1]:"",r="android"),{name:t,version:n,device:r}}(),r.Util.getBrowser=function(){return r.Browser},r.Util.isSupportCanvas=(ve=!0,ge=r.Util.getBrowser(),document.createElement("canvas").getContext?("firefox"===ge.name&&parseFloat(ge.version)<5&&(ve=!1),"safari"===ge.name&&parseFloat(ge.version)<4&&(ve=!1),"opera"===ge.name&&parseFloat(ge.version)<10&&(ve=!1),"msie"===ge.name&&parseFloat(ge.version)<9&&(ve=!1)):ve=!1,ve),r.Util.supportCanvas=function(){return r.Util.isSupportCanvas},r.INCHES_PER_UNIT.degree=r.INCHES_PER_UNIT.dd,r.INCHES_PER_UNIT.meter=r.INCHES_PER_UNIT.m,r.INCHES_PER_UNIT.foot=r.INCHES_PER_UNIT.ft,r.INCHES_PER_UNIT.inch=r.INCHES_PER_UNIT.inches,r.INCHES_PER_UNIT.mile=r.INCHES_PER_UNIT.mi,r.INCHES_PER_UNIT.kilometer=r.INCHES_PER_UNIT.km,r.INCHES_PER_UNIT.yard=r.INCHES_PER_UNIT.yd,r.Util.isInTheSameDomain=function(e){if(!e)return!0;var t=e.indexOf("//"),n=document.location.toString(),r=n.indexOf("//");if(-1===t)return!0;var i,o=i=e.substring(0,t),a=n.substring(r+2);r=a.indexOf("/");var s=a.indexOf(":"),l=a.substring(0,r),u=document.location.protocol;if(-1!==s||(l+=":"+("http:"===u.toLowerCase()?80:443)),u.toLowerCase()!==o.toLowerCase())return!1;var c=(o=e.substring(t+2)).indexOf(":");t=o.indexOf("/");var f,h=o.substring(0,t);return-1!==c?f=o.substring(0,c):(f=o.substring(0,t),h+=":"+("http:"===i.toLowerCase()?80:443)),f===document.domain&&h===l},r.Util.calculateDpi=function(e,t,n,r,i){if(e&&t&&n){var o,a=e.getWidth(),s=e.getHeight(),l=t.w,u=t.h;if(i=i||6378137,"degree"===(r=r||"degrees").toLowerCase()||"degrees"===r.toLowerCase()||"dd"===r.toLowerCase()){var c=a/l,f=s/u;o=254/(c>f?c:f)/n/(2*Math.PI*i/360)/1e4}else{o=254/(a/l)/n/1e4}return o}},r.Util.toJSON=function(e){var t=e;if(null==t)return null;switch(t.constructor){case String:return t=(t=(t=(t=(t=(t=(t='"'+t.replace(/(["\\])/g,"\\$1")+'"').replace(/\n/g,"\\n")).replace(/\r/g,"\\r")).replace("<","&lt;")).replace(">","&gt;")).replace(/%/g,"%25")).replace(/&/g,"%26");case Array:for(var n=[],i=0,o=t.length;i<o;i++)n.push(r.Util.toJSON(t[i]));return"["+n.join(",")+"]";case Number:return isFinite(t)?String(t):null;case Boolean:return String(t);case Date:return"{'__type':\"System.DateTime\",'Year':"+t.getFullYear()+",'Month':"+(t.getMonth()+1)+",'Day':"+t.getDate()+",'Hour':"+t.getHours()+",'Minute':"+t.getMinutes()+",'Second':"+t.getSeconds()+",'Millisecond':"+t.getMilliseconds()+",'TimezoneOffset':"+t.getTimezoneOffset()+"}";default:if(null!=t.toJSON&&"function"==typeof t.toJSON)return t.toJSON();if("object"===de(t)){if(t.length){for(var a=[],s=0,l=t.length;s<l;s++)a.push(r.Util.toJSON(t[s]));return"["+a.join(",")+"]"}var u=[];for(var c in t)"function"!=typeof t[c]&&"CLASS_NAME"!==c&&"parent"!==c&&u.push("'"+c+"':"+r.Util.toJSON(t[c]));return u.length>0?"{"+u.join(",")+"}":"{}"}return t.toString()}},r.Util.getResolutionFromScaleDpi=function(e,t,n,i){return i=i||6378137,n=n||"",e>0&&t>0?(e=r.Util.normalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*i/360)/1e4:254/t/e/1e4):-1},r.Util.getScaleFromResolutionDpi=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4:-1},r.Util.transformResult=function(e){return e.responseText&&"string"==typeof e.responseText&&(e=JSON.parse(e.responseText)),e},r.Util.copyAttributes=function(e,t){if(e=e||{},t)for(var n in t){var r=t[n];void 0!==r&&"CLASS_NAME"!==n&&"function"!=typeof r&&(e[n]=r)}return e},r.Util.copyAttributesWithClip=function(e,t,n){if(e=e||{},t)for(var r in t){var i=!1;if(n&&n.length)for(var o=0,a=n.length;o<a;o++)if(r===n[o]){i=!0;break}if(!0!==i){var s=t[r];void 0!==s&&"CLASS_NAME"!==r&&"function"!=typeof s&&(e[r]=s)}}return e},r.Util.cloneObject=function(e){if(null===e||"object"!==de(e))return e;if(e instanceof Date){var t=new Date;return t.setTime(e.getTime()),t}if(e instanceof Array)return e.slice(0);if(e instanceof Object){var n={};for(var i in e)e.hasOwnProperty(i)&&(n[i]=r.Util.cloneObject(e[i]));return n}throw new Error("Unable to copy obj! Its type isn't supported.")},r.Util.lineIntersection=function(e,t,n,i){var o,a,s=null,l=(i.x-n.x)*(e.y-n.y)-(i.y-n.y)*(e.x-n.x),u=(t.x-e.x)*(e.y-n.y)-(t.y-e.y)*(e.x-n.x),c=(i.y-n.y)*(t.x-e.x)-(i.x-n.x)*(t.y-e.y);if(0!=c)a=u/c,s=(o=l/c)>=0&&a<=1&&o<=1&&a>=0?new r.Geometry.Point(e.x+o*(t.x-e.x),e.y+o*(t.y-e.y)):"No Intersection";else if(0==l&&0==u){var f=Math.max(e.y,t.y),h=Math.min(e.y,t.y),p=Math.max(e.x,t.x),y=Math.min(e.x,t.x);s=(n.y>=h&&n.y<=f||i.y>=h&&i.y<=f)&&n.x>=y&&n.x<=p||i.x>=y&&i.x<=p?"Coincident":"Parallel"}else s="Parallel";return s},r.Util.getTextBounds=function(e,t,n){document.body.appendChild(n),n.style.width="auto",n.style.height="auto",e.fontSize&&(n.style.fontSize=e.fontSize),e.fontFamily&&(n.style.fontFamily=e.fontFamily),e.fontWeight&&(n.style.fontWeight=e.fontWeight),n.style.position="relative",n.style.visibility="hidden",n.style.display="inline-block",n.innerHTML=t;var r=n.clientWidth,i=n.clientHeight;return document.body.removeChild(n),{textWidth:r,textHeight:i}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _e=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),be.isArray(t)&&(n=t[1],t=t[0]),this.lon=t?be.toFloat(t):0,this.lat=n?be.toFloat(n):0,this.CLASS_NAME="SuperMap.LonLat"}var t,n,r;return t=e,r=[{key:"fromString",value:function(t){var n=t.split(",");return new e(n[0],n[1])}},{key:"fromArray",value:function(t){var n=be.isArray(t);return new e(n&&t[0],n&&t[1])}}],(n=[{key:"toString",value:function(){return"lon="+this.lon+",lat="+this.lat}},{key:"toShortString",value:function(){return this.lon+","+this.lat}},{key:"clone",value:function(){return new e(this.lon,this.lat)}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("LonLat.add cannot receive null values");return new e(this.lon+be.toFloat(t),this.lat+be.toFloat(n))}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.lon===e.lon&&this.lat===e.lat||isNaN(this.lon)&&isNaN(this.lat)&&isNaN(e.lon)&&isNaN(e.lat)),t}},{key:"wrapDateLine",value:function(e){var t=this.clone();if(e){for(;t.lon<e.left;)t.lon+=e.getWidth();for(;t.lon>e.right;)t.lon-=e.getWidth()}return t}},{key:"destroy",value:function(){this.lon=null,this.lat=null}}])&&Se(t.prototype,n),r&&Se(t,r),e}();function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Oe=function(){function e(t,n,r,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),be.isArray(t)&&(i=t[3],r=t[2],n=t[1],t=t[0]),this.left=null!=t?be.toFloat(t):this.left,this.bottom=null!=n?be.toFloat(n):this.bottom,this.right=null!=r?be.toFloat(r):this.right,this.top=null!=i?be.toFloat(i):this.top,this.centerLonLat=null,this.CLASS_NAME="SuperMap.Bounds"}var t,n,r;return t=e,r=[{key:"fromString",value:function(t,n){var r=t.split(",");return e.fromArray(r,n)}},{key:"fromArray",value:function(t,n){return!0===n?new e(t[1],t[0],t[3],t[2]):new e(t[0],t[1],t[2],t[3])}},{key:"fromSize",value:function(t){return new e(0,t.h,t.w,0)}},{key:"oppositeQuadrant",value:function(e){var t="";return t+="t"===e.charAt(0)?"b":"t",t+="l"===e.charAt(1)?"r":"l"}}],(n=[{key:"clone",value:function(){return new e(this.left,this.bottom,this.right,this.top)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.left===e.left&&this.right===e.right&&this.top===e.top&&this.bottom===e.bottom),t}},{key:"toString",value:function(){return[this.left,this.bottom,this.right,this.top].join(",")}},{key:"toArray",value:function(e){return!0===e?[this.bottom,this.left,this.top,this.right]:[this.left,this.bottom,this.right,this.top]}},{key:"toBBOX",value:function(e,t){null==e&&(e=6);var n=Math.pow(10,e),r=Math.round(this.left*n)/n,i=Math.round(this.bottom*n)/n,o=Math.round(this.right*n)/n,a=Math.round(this.top*n)/n;return!0===t?i+","+r+","+a+","+o:r+","+i+","+o+","+a}},{key:"getWidth",value:function(){return this.right-this.left}},{key:"getHeight",value:function(){return this.top-this.bottom}},{key:"getSize",value:function(){return new ue(this.getWidth(),this.getHeight())}},{key:"getCenterPixel",value:function(){return new fe((this.left+this.right)/2,(this.bottom+this.top)/2)}},{key:"getCenterLonLat",value:function(){return this.centerLonLat||(this.centerLonLat=new _e((this.left+this.right)/2,(this.bottom+this.top)/2)),this.centerLonLat}},{key:"scale",value:function(t,n){var r,i;return t=t||1,null==n&&(n=this.getCenterLonLat()),"SuperMap.LonLat"===n.CLASS_NAME?(r=n.lon,i=n.lat):(r=n.x,i=n.y),new e((this.left-r)*t+r,(this.bottom-i)*t+i,(this.right-r)*t+r,(this.top-i)*t+i)}},{key:"add",value:function(t,n){if(null==t||null==n)throw new TypeError("Bounds.add cannot receive null values");return new e(this.left+t,this.bottom+n,this.right+t,this.top+n)}},{key:"extend",value:function(t){var n=null;if(t){switch(t.CLASS_NAME){case"SuperMap.LonLat":n=new e(t.lon,t.lat,t.lon,t.lat);break;case"SuperMap.Geometry.Point":n=new e(t.x,t.y,t.x,t.y);break;case"SuperMap.Bounds":n=t}n&&(this.centerLonLat=null,(null==this.left||n.left<this.left)&&(this.left=n.left),(null==this.bottom||n.bottom<this.bottom)&&(this.bottom=n.bottom),(null==this.right||n.right>this.right)&&(this.right=n.right),(null==this.top||n.top>this.top)&&(this.top=n.top))}}},{key:"containsLonLat",value:function(e,t){"boolean"==typeof t&&(t={inclusive:t}),t=t||{};var n=this.contains(e.lon,e.lat,t.inclusive),r=t.worldBounds;if(r&&!n){var i=r.getWidth(),o=(r.left+r.right)/2,a=Math.round((e.lon-o)/i);n=this.containsLonLat({lon:e.lon-a*i,lat:e.lat},{inclusive:t.inclusive})}return n}},{key:"containsPixel",value:function(e,t){return this.contains(e.x,e.y,t)}},{key:"contains",value:function(e,t,n){if(null==n&&(n=!0),null==e||null==t)return!1;var r=!1;return r=n?e>=this.left&&e<=this.right&&t>=this.bottom&&t<=this.top:e>this.left&&e<this.right&&t>this.bottom&&t<this.top,r}},{key:"intersectsBounds",value:function(e,t){if("boolean"==typeof t&&(t={inclusive:t}),(t=t||{}).worldBounds){var n=this.wrapDateLine(t.worldBounds);e=e.wrapDateLine(t.worldBounds)}else n=this;null==t.inclusive&&(t.inclusive=!0);var r=!1,i=n.left===e.right||n.right===e.left||n.top===e.bottom||n.bottom===e.top;if(t.inclusive||!i){var o=e.bottom>=n.bottom&&e.bottom<=n.top||n.bottom>=e.bottom&&n.bottom<=e.top,a=e.top>=n.bottom&&e.top<=n.top||n.top>e.bottom&&n.top<e.top,s=e.left>=n.left&&e.left<=n.right||n.left>=e.left&&n.left<=e.right,l=e.right>=n.left&&e.right<=n.right||n.right>=e.left&&n.right<=e.right;r=(o||a)&&(s||l)}if(t.worldBounds&&!r){var u=t.worldBounds,c=u.getWidth(),f=!u.containsBounds(n),h=!u.containsBounds(e);f&&!h?(e=e.add(-c,0),r=n.intersectsBounds(e,{inclusive:t.inclusive})):h&&!f&&(n=n.add(-c,0),r=e.intersectsBounds(n,{inclusive:t.inclusive}))}return r}},{key:"containsBounds",value:function(e,t,n){null==t&&(t=!1),null==n&&(n=!0);var r=this.contains(e.left,e.bottom,n),i=this.contains(e.right,e.bottom,n),o=this.contains(e.left,e.top,n),a=this.contains(e.right,e.top,n);return t?r||i||o||a:r&&i&&o&&a}},{key:"determineQuadrant",value:function(e){var t="",n=this.getCenterLonLat();return t+=e.lat<n.lat?"b":"t",t+=e.lon<n.lon?"l":"r"}},{key:"wrapDateLine",value:function(e,t){var n=(t=t||{}).leftTolerance||0,r=t.rightTolerance||0,i=this.clone();if(e){for(var o=e.getWidth();i.left<e.left&&i.right-r<=e.left;)i=i.add(o,0);for(;i.left+n>=e.right&&i.right>e.right;)i=i.add(-o,0);var a=i.left+n;a<e.right&&a>e.left&&i.right-r>e.right&&(i=i.add(-o,0))}return i}},{key:"toServerJSONObject",value:function(){return{rightTop:{x:this.right,y:this.top},leftBottom:{x:this.left,y:this.bottom},left:this.left,right:this.right,top:this.top,bottom:this.bottom}}},{key:"destroy",value:function(){this.left=null,this.right=null,this.top=null,this.bottom=null,this.centerLonLat=null}}])&&we(t.prototype,n),r&&we(t,r),e}();function xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Bounds=Oe;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Geometry",this.id=be.createUniqueID(this.CLASS_NAME+"_"),this.parent=null,this.bounds=null,this.SRID=null}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.id=null,this.bounds=null,this.SRID=null}},{key:"clone",value:function(){return new e}},{key:"setBounds",value:function(e){e&&(this.bounds=e.clone())}},{key:"clearBounds",value:function(){this.bounds=null,this.parent&&this.parent.clearBounds()}},{key:"extendBounds",value:function(e){this.getBounds()?this.bounds.extend(e):this.setBounds(e)}},{key:"getBounds",value:function(){return null==this.bounds&&this.calculateBounds(),this.bounds}},{key:"calculateBounds",value:function(){}},{key:"getVertices",value:function(e){}},{key:"getArea",value:function(){return 0}}])&&xe(t.prototype,n),r&&xe(t,r),e}();function Te(e){return(Te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t){return!t||"object"!==Te(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ke(e,t,n){return(ke="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Me(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e,t){return(Ae=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry=Ce;var Le=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ee(this,Me(t).call(this))).components=[],n.componentTypes=null,null!=e&&n.addComponents(e),n.CLASS_NAME="SuperMap.Geometry.Collection",n.geometryType="Collection",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ae(e,t)}(t,Ce),n=t,(r=[{key:"destroy",value:function(){this.components.length=0,this.components=null,ke(Me(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){for(var e=new t,n=0,r=this.components.length;n<r;n++)e.addComponent(this.components[n].clone());return be.applyDefaults(e,this),e}},{key:"getComponentsString",value:function(){for(var e=[],t=0,n=this.components.length;t<n;t++)e.push(this.components[t].toShortString());return e.join(",")}},{key:"calculateBounds",value:function(){this.bounds=null;var e=new Oe,t=this.components;if(t)for(var n=0,r=t.length;n<r;n++)e.extend(t[n].getBounds());null!=e.left&&null!=e.bottom&&null!=e.right&&null!=e.top&&this.setBounds(e)}},{key:"addComponents",value:function(e){be.isArray(e)||(e=[e]);for(var t=0,n=e.length;t<n;t++)this.addComponent(e[t])}},{key:"addComponent",value:function(e,t){var n=!1;if(e&&(null==this.componentTypes||be.indexOf(this.componentTypes,e.CLASS_NAME)>-1)){if(null!=t&&t<this.components.length){var r=this.components.slice(0,t),i=this.components.slice(t,this.components.length);r.push(e),this.components=r.concat(i)}else this.components.push(e);e.parent=this,this.clearBounds(),n=!0}return n}},{key:"removeComponents",value:function(e){var t=!1;be.isArray(e)||(e=[e]);for(var n=e.length-1;n>=0;--n)t=this.removeComponent(e[n])||t;return t}},{key:"removeComponent",value:function(e){return be.removeItem(this.components,e),this.clearBounds(),!0}},{key:"getArea",value:function(){for(var e=0,t=0,n=this.components.length;t<n;t++)e+=this.components[t].getArea();return e}},{key:"equals",value:function(e){var t=!0;if(e&&e.CLASS_NAME&&this.CLASS_NAME===e.CLASS_NAME)if(be.isArray(e.components)&&e.components.length===this.components.length){for(var n=0,r=this.components.length;n<r;++n)if(!this.components[n].equals(e.components[n])){t=!1;break}}else t=!1;else t=!1;return t}},{key:"getVertices",value:function(e){for(var t=[],n=0,r=this.components.length;n<r;++n)Array.prototype.push.apply(t,this.components[n].getVertices(e));return t}}])&&Pe(n.prototype,r),i&&Pe(n,i),t}();function je(e){return(je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Re(e,t){return!t||"object"!==je(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ie(e){return(Ie=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function De(e,t){return(De=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Collection=Le;var Fe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Re(this,Ie(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],n.CLASS_NAME="SuperMap.Geometry.MultiPoint",n.geometryType="MultiPoint",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&De(e,t)}(t,Le),n=t,(r=[{key:"addPoint",value:function(e,t){this.addComponent(e,t)}},{key:"removePoint",value:function(e){this.removeComponent(e)}}])&&Ne(n.prototype,r),i&&Ne(n,i),t}();function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ue(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t){return(ze=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.MultiPoint=Fe;var Ve=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,Ge(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point","SuperMap.PointWithMeasure"],n.CLASS_NAME="SuperMap.Geometry.Curve",n.geometryType="Curve",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ze(e,t)}(t,Fe),t}();function He(e){return(He="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t){return!t||"object"!==He(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function We(e,t,n){return(We="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Qe(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){return(Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Curve=Ve;var Xe=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=qe(this,Qe(t).call(this,e,n,r,i))).x=parseFloat(e),o.y=parseFloat(n),o.tag=i||0==i?parseFloat(i):null,o.type=r||"Point",o.CLASS_NAME="SuperMap.Geometry.Point",o.geometryType="Point",o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ye(e,t)}(t,Ce),n=t,(r=[{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y)),be.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x,this.y)}},{key:"equals",value:function(e){var t=!1;return null!=e&&(t=this.x===e.x&&this.y===e.y||isNaN(this.x)&&isNaN(this.y)&&isNaN(e.x)&&isNaN(e.y)),t}},{key:"move",value:function(e,t){this.x=this.x+e,this.y=this.y+t,this.clearBounds()}},{key:"toShortString",value:function(){return this.x+", "+this.y}},{key:"destroy",value:function(){this.x=null,this.y=null,this.tag=null,We(Qe(t.prototype),"destroy",this).call(this)}},{key:"getVertices",value:function(e){return[this]}}])&&Je(n.prototype,r),i&&Je(n,i),t}();function Ke(e){return(Ke="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $e(e,t){return!t||"object"!==Ke(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function et(e,t,n){return(et="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=tt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function tt(e){return(tt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Point=Xe;var rt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=$e(this,tt(t).call(this,e))).CLASS_NAME="SuperMap.Geometry.LineString",n.geometryType="LineString",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}(t,Ve),n=t,i=[{key:"calculateCircle",value:function(e){if(e.length<3)return e;var t={},n=e[0],r=e[1],i=e[2],o=0,a=0,s=!0,l=0,u=0,c=0,f=[],h=(i.y-n.y)/(i.x-n.x),p=i.y-h*i.x;if(i.x!=n.x&&i.y!=n.y&&r.y==h*r.x+p||i.x==n.x&&r.x==n.x||i.y==n.y&&r.y==n.y||i.x==n.x&&i.y==n.y||i.x==r.x&&i.y==r.y||n.x==r.x&&n.y==r.y)f.push(n),f.push(r),f.push(i);else{var y=(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y))*(2*(i.y-n.y))-(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))*(2*(r.y-n.y)),d=2*(r.x-n.x)*(i.x*i.x+i.y*i.y-(n.x*n.x+n.y*n.y))-2*(i.x-n.x)*(r.x*r.x+r.y*r.y-(n.x*n.x+n.y*n.y)),m=4*((r.x-n.x)*(i.y-n.y)-(i.x-n.x)*(r.y-n.y));t.x=y/m,t.y=d/m;var v=(2*(o=Math.sqrt((n.x-t.x)*(n.x-t.x)+(n.y-t.y)*(n.y-t.y)))*o-((n.x-i.x)*(n.x-i.x)+(n.y-i.y)*(n.y-i.y)))/(2*o*o);v=(v=v>=1?1:v)<=-1?-1:v,c=180*Math.acos(v)/Math.PI,a=(c=i.x==n.x?t.x>n.x&&r.x>n.x||t.x<n.x&&r.x<n.x?360-c:c:t.y>h*t.x+p&&r.y>h*r.x+p||t.y<h*t.x+p&&r.y<h*r.x+p?360-c:c)/72,i.y!=n.y?i.x==n.x?i.y>n.y?r.x<n.x&&(s=!1):r.x>n.x&&(s=!1):i.x<n.x?r.y<h*r.x+p&&(s=!1):r.y>h*r.x+p&&(s=!1):i.x>n.x?r.y>n.y&&(s=!1):r.y<n.y&&(s=!1);var g=(n.y-t.y)/(n.x-t.x),b=g>=0?180*Math.atan(g)/Math.PI:Math.abs(180*Math.atan(g)/Math.PI)+90,S=Math.abs(t.y);n.y==S&&S==i.y&&n.x<i.x&&(b+=180);var _=n.y-t.y;f.push(n);for(var w=1;w<72;w++){l=a*w,u=b,s?_>=0?g>=0?u+=l:u=180-(u-90)+l:u=g>0?u-180+l:90-u+l:_>=0?g>=0?u-=l:u=180-(u-90)-l:u=g>=0?u-180-l:90-u-l,u=u*Math.PI/180;var O=t.x+o*Math.cos(u),x=t.y+o*Math.sin(u);f.push(new Xe(O,x))}f.push(i)}return f}},{key:"createLineEPS",value:function(e){var n=[],r=e.length;if(r<2)return e;for(var i=0;i<r;){if("LTypeArc"==e[i].type){var o=t.createLineArc(n,i,r,e);n=o[0],i=o[1]}else n.push(e[i]),i++}return n}},{key:"createLineArc",value:function(e,n,r,i){if(0==n){var o=t.addPointEPS(i,n,r,"LTypeArc");Array.prototype.push.apply(e,o[0]),n=o[1]+1}else if(n==r-1){var a=[i[n-1],i[n]],s=t.calculateCircle(a);Array.prototype.push.apply(e,s),n++}else{var l=t.addPointEPS(i,n,r,"LTypeArc");e.pop(),Array.prototype.push.apply(e,l[0]),n=l[1]+1}return[e,n]}},{key:"addPointEPS",value:function(e,n,r,i){var o,a=[],s=n+1;return 0==n?Array.prototype.push.apply(a,[e[n],e[n+1]]):n==r-1?Array.prototype.push.apply(a,[e[n-1],e[n]]):Array.prototype.push.apply(a,[e[n-1],e[n],e[n+1]]),"LTypeCurve"==i?o=t.calculatePointsFBZN(a):"LTypeArc"==i&&(o=t.calculateCircle(a)),[o,s]}}],(r=[{key:"removeComponent",value:function(e){var n=this.components&&this.components.length>2;return n&&et(tt(t.prototype),"removeComponent",this).apply(this,arguments),n}},{key:"getSortedSegments",value:function(){for(var e,t,n=this.components.length-1,r=new Array(n),i=0;i<n;++i)e=this.components[i],t=this.components[i+1],e.x<t.x?r[i]={x1:e.x,y1:e.y,x2:t.x,y2:t.y}:r[i]={x1:t.x,y1:t.y,x2:e.x,y2:e.y};return r.sort(function(e,t){return e.x1-t.x1})}},{key:"getVertices",value:function(e){return!0===e?[this.components[0],this.components[this.components.length-1]]:!1===e?this.components.slice(1,this.components.length-1):this.components.slice()}}])&&Ze(n.prototype,r),i&&Ze(n,i),t}();function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function at(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function st(e,t,n){return(st="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ut(e,t){return(ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.LineString=rt;var ct=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=at(this,lt(t).call(this,e,n,r))).x=parseFloat(e),i.y=parseFloat(n),i.text=r.toString(),i.bsInfo={h:null,w:null},i.element=document.createElement("span"),i.CLASS_NAME="SuperMap.Geometry.GeoText",i.geometryType="GeoText",i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ut(e,t)}(t,Ce),n=t,(r=[{key:"destroy",value:function(){st(lt(t.prototype),"destroy",this).call(this),this.x=null,this.y=null,this.text=null}},{key:"getCentroid",value:function(){return new Xe(this.x,this.y)}},{key:"clone",value:function(e){return null==e&&(e=new t(this.x,this.y,this.text)),be.applyDefaults(e,this),e}},{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x,this.y)}},{key:"getLabelPxBoundsByLabel",value:function(e,t,n,r){var i,o,a,s,l=be.cloneObject(e),u=(r.label||this.text).split("\n").length;if(t=parseFloat(t),n=parseFloat(n),u>1&&(n=parseFloat(n)*u),r.labelAlign&&"cm"!==r.labelAlign)switch(r.labelAlign){case"lt":l.x+=t/2,l.y+=n/2;break;case"lm":l.x+=t/2;break;case"lb":l.x+=t/2,l.y-=n/2;break;case"ct":l.y+=n/2;break;case"cb":l.y-=n/2;break;case"rt":l.x-=t/2,l.y+=n/2;break;case"rm":l.x-=t/2;break;case"rb":l.x-=t/2,l.y-=n/2}return this.bsInfo.h=n,this.bsInfo.w=t,i=l.x-parseFloat(t)/2,o=l.y+parseFloat(n)/2,s=l.x+parseFloat(t)/2,a=l.y-parseFloat(n)/2,new Oe(i,o,s,a)}},{key:"getLabelPxBoundsByText",value:function(e,t){var n,r,i,o,a=this.getLabelPxSize(t),s=be.cloneObject(e);if(t.labelAlign&&"cm"!==t.labelAlign)switch(t.labelAlign){case"lt":s.x+=a.w/2,s.y+=a.h/2;break;case"lm":s.x+=a.w/2;break;case"lb":s.x+=a.w/2,s.y-=a.h/2;break;case"ct":s.y+=a.h/2;break;case"cb":s.y-=a.h/2;break;case"rt":s.x-=a.w/2,s.y+=a.h/2;break;case"rm":s.x-=a.w/2;break;case"rb":s.x-=a.w/2,s.y-=a.h/2}return this.bsInfo.h=a.h,this.bsInfo.w=a.w,n=s.x-a.w/2,r=s.y+a.h/2,o=t.fontStyle&&"italic"===t.fontStyle?s.x+a.w/2+parseInt(parseFloat(t.fontSize)/2):s.x+a.w/2,i=s.y-a.h/2,new Oe(n,r,o,i)}},{key:"getLabelPxSize",value:function(e){var t,n,r,i,o=parseFloat(e.strokeWidth);t=e.label||this.text,n=e.fontSize?parseFloat(e.fontSize):parseFloat("12px");var a=t.split("\n"),s=a.length;i=s>1?n*s+s+o+.2*n:n+o+.2*n+1,r=0,this.labelWTmp&&r<this.labelWTmp&&(r=this.labelWTmp);for(var l=0;l<s;l++){var u=this.getTextCount(a[l]),c=this.labelWTmp=be.getTextBounds(e,a[l],this.element).textWidth+1*u.textC+o;r<c&&(r=c)}var f=new Object;return f.h=i,f.w=r,f}},{key:"getTextCount",value:function(e){for(var t={},n=0,r=0,i=0;i<e.length;i++)e.charCodeAt(i)>255?n++:r++;return t.cnC=n,t.enC=r,t.textC=e.length,t}}])&&ot(n.prototype,r),i&&ot(n,i),t}();function ft(e){return(ft="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return!t||"object"!==ft(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yt(e,t,n){return(yt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=dt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function dt(e){return(dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function mt(e,t){return(mt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.GeoText=ct;var vt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pt(this,dt(t).call(this,e))).componentTypes=["SuperMap.Geometry.Point"],n.CLASS_NAME="SuperMap.Geometry.LinearRing",n.geometryType="LinearRing",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mt(e,t)}(t,rt),n=t,(r=[{key:"addComponent",value:function(e,n){var r=!1,i=this.components.pop();null==n&&e.equals(i)||(r=yt(dt(t.prototype),"addComponent",this).apply(this,arguments));var o=this.components[0];return yt(dt(t.prototype),"addComponent",this).apply(this,[o]),r}},{key:"removeComponent",value:function(e){var n=this.components&&this.components.length>3;if(n){this.components.pop(),yt(dt(t.prototype),"removeComponent",this).apply(this,arguments);var r=this.components[0];yt(dt(t.prototype),"addComponent",this).apply(this,[r])}return n}},{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>2){for(var t=0,n=0,r=this.components.length;n<r-1;n++){var i=this.components[n],o=this.components[n+1];t+=(i.x+o.x)*(o.y-i.y)}e=-t/2}return e}},{key:"getVertices",value:function(e){return!0===e?[]:this.components.slice(0,this.components.length-1)}}])&&ht(n.prototype,r),i&&ht(n,i),t}();function gt(e){return(gt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){return!t||"object"!==gt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function St(e){return(St=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _t(e,t){return(_t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.LinearRing=vt;var wt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bt(this,St(t).call(this,e))).componentTypes=["SuperMap.Geometry.LineString"],n.CLASS_NAME="SuperMap.Geometry.MultiLineString",n.geometryType="MultiLineString",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_t(e,t)}(t,Le),t}();function Ot(e){return(Ot="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xt(e,t){return!t||"object"!==Ot(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tt(e,t){return(Tt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.MultiLineString=wt;var Pt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=xt(this,Ct(t).call(this,e))).componentTypes=["SuperMap.Geometry.Polygon"],n.CLASS_NAME="SuperMap.Geometry.MultiPolygon",n.geometryType="MultiPolygon",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tt(e,t)}(t,Le),t}();function Et(e){return(Et="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e,t){return!t||"object"!==Et(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function At(e){return(At=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lt(e,t){return(Lt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.MultiPolygon=Pt;var jt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mt(this,At(t).call(this,e))).componentTypes=["SuperMap.Geometry.LinearRing"],n.CLASS_NAME="SuperMap.Geometry.Polygon",n.geometryType="Polygon",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lt(e,t)}(t,Le),n=t,(r=[{key:"getArea",value:function(){var e=0;if(this.components&&this.components.length>0){e+=Math.abs(this.components[0].getArea());for(var t=1,n=this.components.length;t<n;t++)e-=Math.abs(this.components[t].getArea())}return e}}])&&kt(n.prototype,r),i&&kt(n,i),t}();function Nt(e){return(Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function It(e,t){return!t||"object"!==Nt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dt(e){return(Dt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ft(e,t){return(Ft=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Geometry.Polygon=jt;var Bt=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=It(this,Dt(t).call(this,e,n,r,i))).x=e,o.y=n,o.width=r,o.height=i,o.CLASS_NAME="SuperMap.Geometry.Rectangle",o.geometryType="Rectangle",o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ft(e,t)}(t,Ce),n=t,(r=[{key:"calculateBounds",value:function(){this.bounds=new Oe(this.x,this.y,this.x+this.width,this.y+this.height)}},{key:"getArea",value:function(){return this.width*this.height}}])&&Rt(n.prototype,r),i&&Rt(n,i),t}();function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Geometry.Rectangle=Bt;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Gt=function(){function e(t,n){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.value=t||"",this.name=n||"token",this.CLASS_NAME="SuperMap.Credential"}var t,n,r;return t=e,(n=[{key:"getUrlParameters",value:function(){return this.name+"="+this.value}},{key:"getValue",value:function(){return this.value}},{key:"destroy",value:function(){this.value=null,this.name=null}}])&&Ut(t.prototype,n),r&&Ut(t,r),e}();Gt.CREDENTIAL=null,r.Credential=Gt;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
r.Date={toISOString:function(){if("toISOString"in Date.prototype)return function(e){return e.toISOString()};var e=function(e,t){for(var n=e+"";n.length<t;)n="0"+n;return n};return function(t){return isNaN(t.getTime())?"Invalid Date":t.getUTCFullYear()+"-"+e(t.getUTCMonth()+1,2)+"-"+e(t.getUTCDate(),2)+"T"+e(t.getUTCHours(),2)+":"+e(t.getUTCMinutes(),2)+":"+e(t.getUTCSeconds(),2)+"."+e(t.getUTCMilliseconds(),3)+"Z"}}(),parse:function(e){var t,n=e.match(/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:(?:T(\d{1,2}):(\d{2}):(\d{2}(?:\.\d+)?)(Z|(?:[+-]\d{1,2}(?::(\d{2}))?)))|Z)?$/);if(n&&(n[1]||n[7])){var r=parseInt(n[1],10)||0,i=parseInt(n[2],10)-1||0,o=parseInt(n[3],10)||1;t=new Date(Date.UTC(r,i,o));var a=n[7];if(a){var s=parseInt(n[4],10),l=parseInt(n[5],10),u=parseFloat(n[6]),c=0|u,f=Math.round(1e3*(u-c));if(t.setUTCHours(s,l,c,f),"Z"!==a){var h=-1e3*(60*parseInt(a,10)*60+60*(parseInt(n[8],10)||0));t=new Date(t.getTime()+h)}}}else t=new Date("invalid");return t}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var zt=r.Event={observers:!1,KEY_SPACE:32,KEY_BACKSPACE:8,KEY_TAB:9,KEY_RETURN:13,KEY_ESC:27,KEY_LEFT:37,KEY_UP:38,KEY_RIGHT:39,KEY_DOWN:40,KEY_DELETE:46,element:function(e){return e.target||e.srcElement},isSingleTouch:function(e){return e.touches&&1===e.touches.length},isMultiTouch:function(e){return e.touches&&e.touches.length>1},isLeftClick:function(e){return e.which&&1===e.which||e.button&&1===e.button},isRightClick:function(e){return e.which&&3===e.which||e.button&&2===e.button},stop:function(e,t){t||(e.preventDefault?e.preventDefault():e.returnValue=!1),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},findElement:function(e,t){for(var n=r.Event.element(e);n.parentNode&&(!n.tagName||n.tagName.toUpperCase()!=t.toUpperCase());)n=n.parentNode;return n},observe:function(e,t,n,r){var i=be.getElement(e);if(r=r||!1,"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||i.attachEvent)&&(t="keydown"),this.observers||(this.observers={}),!i._eventCacheID){var o="eventCacheID_";i.id&&(o=i.id+"_"+o),i._eventCacheID=be.createUniqueID(o)}var a=i._eventCacheID;this.observers[a]||(this.observers[a]=[]),this.observers[a].push({element:i,name:t,observer:n,useCapture:r}),i.addEventListener?"mousewheel"===t?i.addEventListener(t,n,{useCapture:r,passive:!1}):i.addEventListener(t,n,r):i.attachEvent&&i.attachEvent("on"+t,n)},stopObservingElement:function(e){var t=be.getElement(e)._eventCacheID;this._removeElementObservers(r.Event.observers[t])},_removeElementObservers:function(e){if(e)for(var t=e.length-1;t>=0;t--){var n=e[t],i=new Array(n.element,n.name,n.observer,n.useCapture);r.Event.stopObserving.apply(this,i)}},stopObserving:function(e,t,n,i){i=i||!1;var o=be.getElement(e),a=o._eventCacheID;"keypress"===t&&(navigator.appVersion.match(/Konqueror|Safari|KHTML/)||o.detachEvent)&&(t="keydown");var s=!1,l=r.Event.observers[a];if(l)for(var u=0;!s&&u<l.length;){var c=l[u];if(c.name===t&&c.observer===n&&c.useCapture===i){l.splice(u,1),0==l.length&&delete r.Event.observers[a],s=!0;break}u++}return s&&(o.removeEventListener?o.removeEventListener(t,n,i):o&&o.detachEvent&&o.detachEvent("on"+t,n)),s},unloadCache:function(){if(r.Event&&r.Event.observers){for(var e in r.Event.observers){var t=r.Event.observers[e];r.Event._removeElementObservers.apply(this,[t])}r.Event.observers=!1}},CLASS_NAME:"SuperMap.Event"};function Vt(e){return(Vt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ht(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Event=zt,r.Event.observe(window,"unload",r.Event.unloadCache,!1);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Jt=function(){function e(t,n,r,i,o){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"],this.listeners={},this.object=t,this.element=null,this.eventTypes=[],this.eventHandler=null,this.fallThrough=i,this.includeXY=!1,this.extensions={},this.extensionCount={},this.clearMouseListener=null,be.extend(this,o),null!=r)for(var a=0,s=r.length;a<s;a++)this.addEventType(r[a]);null!=n&&this.attachToElement(n),this.CLASS_NAME="SuperMap.Events"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){for(var e in this.extensions)"boolean"!=typeof this.extensions[e]&&this.extensions[e].destroy();this.extensions=null,this.element&&(zt.stopObservingElement(this.element),this.element.hasScrollEvent&&zt.stopObserving(window,"scroll",this.clearMouseListener)),this.element=null,this.listeners=null,this.object=null,this.eventTypes=null,this.fallThrough=null,this.eventHandler=null}},{key:"addEventType",value:function(e){this.listeners[e]||(this.eventTypes.push(e),this.listeners[e]=[])}},{key:"attachToElement",value:function(e){this.element?zt.stopObservingElement(this.element):(this.eventHandler=ye.bindAsEventListener(this.handleBrowserEvent,this),this.clearMouseListener=ye.bind(this.clearMouseCache,this)),this.element=e;for(var t=0,n=this.BROWSER_EVENTS.length;t<n;t++){var r=this.BROWSER_EVENTS[t];this.addEventType(r),zt.observe(e,r,this.eventHandler)}zt.observe(e,"dragstart",zt.stop)}},{key:"on",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.register(t,e.scope,e[t])}},{key:"register",value:function(t,n,r,i){if(t in e&&!this.extensions[t]&&(this.extensions[t]=new e[t](this)),null!=r&&-1!==be.indexOf(this.eventTypes,t)){null==n&&(n=this.object);var o=this.listeners[t];o||(o=[],this.listeners[t]=o,this.extensionCount[t]=0);var a={obj:n,func:r};i?(o.splice(this.extensionCount[t],0,a),"object"===Vt(i)&&i.extension&&this.extensionCount[t]++):o.push(a)}}},{key:"registerPriority",value:function(e,t,n){this.register(e,t,n,!0)}},{key:"un",value:function(e){for(var t in e)"scope"!==t&&e.hasOwnProperty(t)&&this.unregister(t,e.scope,e[t])}},{key:"unregister",value:function(e,t,n){null==t&&(t=this.object);var r=this.listeners[e];if(null!=r)for(var i=0,o=r.length;i<o;i++)if(r[i].obj===t&&r[i].func===n){r.splice(i,1);break}}},{key:"remove",value:function(e){null!=this.listeners[e]&&(this.listeners[e]=[])}},{key:"triggerEvent",value:function(e,t){var n=this.listeners[e];if(n&&0!=n.length){var r;null==t&&(t={}),t.object=this.object,t.element=this.element,t.type||(t.type=e);for(var i=0,o=(n=n.slice()).length;i<o;i++){var a=n[i];if(void 0!=(r=a.func.apply(a.obj,[t]))&&!1===r)break}return this.fallThrough||zt.stop(t,!0),r}}},{key:"handleBrowserEvent",value:function(e){var t=e.type,n=this.listeners[t];if(n&&0!=n.length){var r=e.touches;if(r&&r[0]){for(var i,o=0,a=0,s=r.length,l=0;l<s;++l)o+=(i=r[l]).clientX,a+=i.clientY;e.clientX=o/s,e.clientY=a/s}this.includeXY&&(e.xy=this.getMousePosition(e)),this.triggerEvent(t,e)}}},{key:"clearMouseCache",value:function(){this.element.scrolls=null,this.element.lefttop=null;var e=document.body;e&&(0==e.scrollTop&&0==e.scrollLeft||!navigator.userAgent.match(/iPhone/i))&&(this.element.offsets=null)}},{key:"getMousePosition",value:function(e){if(this.includeXY?this.element.hasScrollEvent||(zt.observe(window,"scroll",this.clearMouseListener),this.element.hasScrollEvent=!0):this.clearMouseCache(),!this.element.scrolls){var t=be.getViewportElement();this.element.scrolls=[t.scrollLeft,t.scrollTop]}return this.element.lefttop||(this.element.lefttop=[document.documentElement.clientLeft||0,document.documentElement.clientTop||0]),this.element.offsets||(this.element.offsets=be.pagePosition(this.element)),new fe(e.clientX+this.element.scrolls[0]-this.element.offsets[0]-this.element.lefttop[0],e.clientY+this.element.scrolls[1]-this.element.offsets[1]-this.element.lefttop[1])}}])&&Ht(t.prototype,n),r&&Ht(t,r),e}();function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Events=Jt,r.Events.prototype.BROWSER_EVENTS=["mouseover","mouseout","mousedown","mouseup","mousemove","click","dblclick","rightclick","dblrightclick","resize","focus","blur","touchstart","touchmove","touchend","keydown","MSPointerDown","MSPointerUp","pointerdown","pointerup","MSGestureStart","MSGestureChange","MSGestureEnd","contextmenu"];
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wt=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.Feature",this.layer=t,this.id=be.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=n,this.data=null!=r?r:{}}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.id=null,this.lonlat=null,this.data=null}}])&&qt(t.prototype,n),r&&qt(t,r),e}();function Qt(e){return(Qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xt(e,t){return!t||"object"!==Qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Kt(e,t,n){return(Kt="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zt(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Zt(e){return(Zt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e,t){return($t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=Wt;var en=function(e){function t(e,n,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Xt(this,Zt(t).call(this,null,null,n))).fid=null,o.geometry=e||null,o.attributes={},n&&(o.attributes=be.extend(o.attributes,n)),o.bounds=null,o.state=null,o.style=i||null,o.url=null,o.lonlat=null,o.CLASS_NAME="SuperMap.Feature.Vector",r.State={UNKNOWN:"Unknown",INSERT:"Insert",UPDATE:"Update",DELETE:"Delete"},t.style={default:{fillColor:"#ee9900",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"inherit",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},select:{fillColor:"blue",fillOpacity:.4,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"blue",strokeOpacity:1,strokeWidth:2,strokeLinecap:"round",strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"pointer",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},temporary:{fillColor:"#66cccc",fillOpacity:.2,hoverFillColor:"white",hoverFillOpacity:.8,strokeColor:"#66cccc",strokeOpacity:1,strokeLinecap:"round",strokeWidth:2,strokeDashstyle:"solid",hoverStrokeColor:"red",hoverStrokeOpacity:1,hoverStrokeWidth:.2,pointRadius:6,hoverPointRadius:1,hoverPointUnit:"%",pointerEvents:"visiblePainted",cursor:"default",fontColor:"#000000",labelAlign:"cm",labelOutlineColor:"white",labelOutlineWidth:3},delete:{display:"none"}},o}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,Wt),n=t,(i=[{key:"destroy",value:function(){this.layer&&(this.layer.removeFeatures(this),this.layer=null),this.geometry=null,Kt(Zt(t.prototype),"destroy",this).call(this)}},{key:"clone",value:function(){return new t(this.geometry?this.geometry.clone():null,this.attributes,this.style)}},{key:"toState",value:function(e){if(e===r.State.UPDATE)switch(this.state){case r.State.UNKNOWN:case r.State.DELETE:this.state=e;break;case r.State.UPDATE:case r.State.INSERT:}else if(e===r.State.INSERT)switch(this.state){case r.State.UNKNOWN:break;default:this.state=e}else if(e===r.State.DELETE)switch(this.state){case r.State.INSERT:case r.State.DELETE:break;case r.State.UNKNOWN:case r.State.UPDATE:this.state=e}else e===r.State.UNKNOWN&&(this.state=e)}}])&&Yt(n.prototype,i),o&&Yt(n,o),t}();function tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Feature.Vector=en;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nn=function(){function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=null,this.keepData=!1,be.extend(this,t),this.options=t,this.CLASS_NAME="SuperMap.Format"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"read",value:function(e){}},{key:"write",value:function(e){}}])&&tn(t.prototype,n),r&&tn(t,r),e}();function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function an(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ln(e,t){return(ln=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Format=nn;var un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=an(this,sn(t).call(this,e))).indent="    ",n.space=" ",n.newline="\n",n.level=0,n.pretty=!1,n.nativeJSON=!(!window.JSON||"function"!=typeof JSON.parse||"function"!=typeof JSON.stringify),n.CLASS_NAME="SuperMap.Format.JSON",n.serialize={object:function(e){if(null==e)return"null";if(e.constructor===Date)return this.serialize.date.apply(this,[e]);if(e.constructor===Array)return this.serialize.array.apply(this,[e]);var t,n,r,i=["{"];this.level+=1;var o=!1;for(t in e)e.hasOwnProperty(t)&&(n=this.write.apply(this,[t,this.pretty]),r=this.write.apply(this,[e[t],this.pretty]),null!=n&&null!=r&&(o&&i.push(","),i.push(this.writeNewline(),this.writeIndent(),n,":",this.writeSpace(),r),o=!0));return this.level-=1,i.push(this.writeNewline(),this.writeIndent(),"}"),i.join("")},array:function(e){var t,n=["["];this.level+=1;for(var r=0,i=e.length;r<i;++r)null!=(t=this.write.apply(this,[e[r],this.pretty]))&&(r>0&&n.push(","),n.push(this.writeNewline(),this.writeIndent(),t));return this.level-=1,n.push(this.writeNewline(),this.writeIndent(),"]"),n.join("")},string:function(e){var t={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return/["\\\x00-\x1f]/.test(e)?'"'+e.replace(/([\x00-\x1f\\"])/g,function(e,n){var r=t[n];return r||(r=n.charCodeAt(),"\\u00"+Math.floor(r/16).toString(16)+(r%16).toString(16))})+'"':'"'+e+'"'},number:function(e){return isFinite(e)?String(e):"null"},boolean:function(e){return String(e)},date:function(e){function t(e){return e<10?"0"+e:e}return'"'+e.getFullYear()+"-"+t(e.getMonth()+1)+"-"+t(e.getDate())+"T"+t(e.getHours())+":"+t(e.getMinutes())+":"+t(e.getSeconds())+'"'}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ln(e,t)}(t,nn),n=t,(r=[{key:"read",value:function(e,t){var n;if(this.nativeJSON)try{n=JSON.parse(e,t)}catch(e){}return this.keepData&&(this.data=n),n}},{key:"write",value:function(e,t){this.pretty=!!t;var n=null,r=rn(e);if(this.serialize[r])try{n=!this.pretty&&this.nativeJSON?JSON.stringify(e):this.serialize[r].apply(this,[e])}catch(e){}return n}},{key:"writeIndent",value:function(){var e=[];if(this.pretty)for(var t=0;t<this.level;++t)e.push(this.indent);return e.join("")}},{key:"writeNewline",value:function(){return this.pretty?this.newline:""}},{key:"writeSpace",value:function(){return this.pretty?this.space:""}}])&&on(n.prototype,r),i&&on(n,i),t}();function cn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Format.JSON=un;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fn=function(){function e(t,n,r){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.red=t||0==t?t:255,this.green=n||0,this.blue=r||0,this.CLASS_NAME="SuperMap.ServerColor"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t){var n=new e,r=255;null!==t.red&&(r=Number(t.red)),n.red=r;var i=0;null!==t.green&&(i=Number(t.green)),n.green=i;var o=0;return null!==t.blue&&(o=Number(t.blue)),n.blue=o,n}}}],(n=[{key:"destroy",value:function(){this.red=null,this.green=null,this.blue=null}}])&&cn(t.prototype,n),r&&cn(t,r),e}();function hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerColor=fn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var pn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fillBackColor=new fn(255,255,255),this.fillBackOpaque=!1,this.fillForeColor=new fn(255,0,0),this.fillGradientMode=null,this.fillGradientAngle=0,this.fillGradientOffsetRatioX=0,this.fillGradientOffsetRatioY=0,this.fillOpaqueRate=100,this.fillSymbolID=0,this.lineColor=new fn(0,0,0),this.lineSymbolID=0,this.lineWidth=1,this.markerAngle=0,this.markerSize=1,this.markerSymbolID=-1,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerStyle"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({fillBackColor:fn.fromJson(t.fillBackColor),fillBackOpaque:t.fillBackOpaque,fillForeColor:fn.fromJson(t.fillForeColor),fillGradientMode:t.fillGradientMode,fillGradientAngle:t.fillGradientAngle,fillGradientOffsetRatioX:t.fillGradientOffsetRatioX,fillGradientOffsetRatioY:t.fillGradientOffsetRatioY,fillOpaqueRate:t.fillOpaqueRate,fillSymbolID:t.fillSymbolID,lineColor:fn.fromJson(t.lineColor),lineSymbolID:t.lineSymbolID,lineWidth:t.lineWidth,markerAngle:t.markerAngle,markerSize:t.markerSize,markerSymbolID:t.markerSymbolID})}}],(n=[{key:"destroy",value:function(){var e=this;e.fillBackColor&&(e.fillBackColor.destroy(),e.fillBackColor=null),e.fillBackOpaque=null,e.fillForeColor&&(e.fillForeColor.destroy(),e.fillForeColor=null),e.fillGradientMode=null,e.fillGradientAngle=null,e.fillGradientOffsetRatioX=null,e.fillGradientOffsetRatioY=null,e.fillOpaqueRate=null,e.fillSymbolID=null,e.lineColor&&(e.lineColor.destroy(),e.lineColor=null),e.lineSymbolID=null,e.lineWidth=null,e.markerAngle=null,e.markerSize=null,e.markerSymbolID=null}},{key:"toServerJSONObject",value:function(){var e={};return e=be.copyAttributes(e,this)}}])&&hn(t.prototype,n),r&&hn(t,r),e}();function yn(e){return(yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mn(e){return(mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gn(e,t){return(gn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServerStyle=pn;var bn=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=mn(t).call(this,e))||"object"!==yn(i)&&"function"!=typeof i?vn(r):i).measure=null,e&&be.extend(vn(n),e),n.CLASS_NAME="SuperMap.PointWithMeasure",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gn(e,t)}(t,Xe),n=t,i=[{key:"fromJson",value:function(e){if(e)return new t({x:e.x,y:e.y,measure:e.measure})}}],(r=[{key:"equals",value:function(e){var t=!1;if(null!=e){var n=this.x===e.x&&this.y===e.y&&this.measure===e.measure,r=isNaN(this.x)&&isNaN(this.y)&&isNaN(this.measure),i=isNaN(e.x)&&isNaN(e.y)&&isNaN(e.measure);t=n||r&&i}return t}},{key:"toJson",value:function(){var e="{";return null!=this.measure&&void 0!=this.measure&&(e+='"measure":'+this.measure+","),e+='"x":'+this.x+",",e+='"y":'+this.y,e+="}"}},{key:"destroy",value:function(){this.measure=null,this.x=null,this.y=null}}])&&dn(n.prototype,r),i&&dn(n,i),t}();function Sn(e){return(Sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wn(e){return(wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function On(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xn(e,t){return(xn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.PointWithMeasure=bn;var Cn=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=wn(t).call(this,e,n))||"object"!==Sn(o)&&"function"!=typeof o?On(i):o).id=null,r.center=null,r.style=null,r.length=null,r.maxM=null,r.minM=null,r.parts=null,r.points=null,r.type=null,r.componentTypes=["SuperMap.Geometry.LinearRing","SuperMap.Geometry.LineString"],n&&be.extend(On(r),n),r.CLASS_NAME="SuperMap.Route",r.geometryType="LINEM",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xn(e,t)}(t,Le),n=t,i=[{key:"fromJson",value:function(e){if(e){var n=e.parts||[],r=e.points||[],i=n.length,o=[];if(!(i>0))return null;for(var a=0,s=0,l=[];a<i;a++){for(var u=0;u<n[a];u++)l.push(bn.fromJson(r[s+u]));s+=n[a],l[0].equals(l[n[a]-1])?o.push(new vt(l)):o.push(new rt(l)),l=[]}return new t(o,{id:e.id,center:e.center,style:e.style,length:e.length,maxM:e.maxM,minM:e.minM,type:e.type,parts:e.parts})}}}],(r=[{key:"toJson",value:function(){var e="{";if(null!=this.id&&void 0!=this.id&&(e+='"id":'+this.id+","),null!=this.center&&void 0!=this.center&&(e+='"center":'+this.center+","),null!=this.style&&void 0!=this.style&&(e+='"style":'+this.style+","),null!=this.length&&void 0!=this.length&&(e+='"length":'+this.length+","),null!=this.maxM&&void 0!=this.maxM&&(e+='"maxM":'+this.maxM+","),null!=this.minM&&void 0!=this.minM&&(e+='"minM":'+this.minM+","),null!=this.type&&void 0!=this.type&&(e+='"type":"'+this.type+'",'),null!=this.parts&&void 0!=this.parts){e+='"parts":['+this.parts[0];for(var t=1;t<this.parts.length;t++)e+=","+this.parts[t];e+="],"}if(null!=this.components&&this.components.length>0){e+='"points":[';for(var n=0,r=this.components.length;n<r;n++)for(var i=0,o=this.components[n].components.length;i<o;i++)e+=this.components[n].components[i].toJson()+",";e=e.replace(/,$/g,""),e+="]"}return e=e.replace(/,$/g,""),e+="}"}},{key:"destroy",value:function(){var e=this;e.id=null,e.center=null,e.style=null,e.length=null,e.maxM=null,e.minM=null,e.type=null,e.parts=null,e.components.length=0,e.components=null,e.componentTypes=null}}])&&_n(n.prototype,r),i&&_n(n,i),t}();function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Route=Cn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=0,this.style=null,this.parts=null,this.points=null,this.type=null,this.prjCoordSys=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerGeometry"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({id:t.id,style:pn.fromJson(t.style),parts:t.parts,partTopo:t.partTopo,points:t.points,center:t.center,length:t.length,maxM:t.maxM,minM:t.minM,type:t.type})}},{key:"fromGeometry",value:function(t){if(t){var n=0,r=[],i=[],o=null,s=t.components,l=t.CLASS_NAME,u={epsgCode:t.SRID};if(isNaN(t.id)||(n=t.id),"SuperMap.Geometry.LinearRing"!=l&&"SuperMap.Geometry.LineString"!=l&&(t instanceof Fe||t instanceof wt)){for(var c=s.length,f=0;f<c;f++){var h=s[f].getVertices().length;r.push(h);for(var p=0;p<h;p++)i.push(new Xe(s[f].getVertices()[p].x,s[f].getVertices()[p].y))}o="SuperMap.Geometry.MultiPoint"==l?a.POINT:a.LINE}else if(t instanceof Pt){for(var y=s.length,d=0;d<y;d++)for(var m=s[d].components,v=m.length,g=0;g<v;g++){var b=m[g].getVertices().length+1;r.push(b);for(var S=0;S<b-1;S++)i.push(new Xe(m[g].getVertices()[S].x,m[g].getVertices()[S].y));i.push(new Xe(m[g].getVertices()[0].x,m[g].getVertices()[0].y))}o=a.REGION}else if(t instanceof jt){for(var _=s.length,w=0;w<_;w++){var O=s[w].getVertices().length+1;r.push(O);for(var x=0;x<O-1;x++)i.push(new Xe(s[w].getVertices()[x].x,s[w].getVertices()[x].y));i.push(new Xe(s[w].getVertices()[0].x,s[w].getVertices()[0].y))}o=a.REGION}else{for(var C=t.getVertices().length,T=0;T<C;T++)i.push(new Xe(t.getVertices()[T].x,t.getVertices()[T].y));t instanceof vt&&(i.push(new Xe(t.getVertices()[0].x,t.getVertices()[0].y)),C++),r.push(C),o=t instanceof Xe?a.POINT:a.LINE}return new e({id:n,style:null,parts:r,points:i,type:o,prjCoordSys:u})}}},{key:"IsClockWise",value:function(e){var t=e.length;if(t<3)return 0;var n=e[0].y*(e[t-1].x-e[1].x);e.push(e[0]);for(var r=1;r<t;r++)n+=e[r].y*(e[r-1].x-e[r+1].x);return.5*n}},{key:"bubbleSort",value:function(e,t,n,r){for(var i=0;i<e.length;i++)for(var o=0;o<e.length;o++)if(e[i]>e[o]){var a=e[o];e[o]=e[i],e[i]=a;var s=t[o];if(t[o]=t[i],t[i]=s,n&&n.length>0){var l=n[o];n[o]=n[i],n[i]=l}if(r&&r.length>0){var u=r[o];r[o]=r[i],r[i]=u}}}}],(n=[{key:"destroy",value:function(){var e=this;e.id=null,e.style=null,e.parts=null,e.partTopo=null,e.points=null,e.type=null,e.prjCoordSys=null}},{key:"toGeometry",value:function(){var e=this;switch(e.type.toUpperCase()){case a.POINT:return e.toGeoPoint();case a.LINE:return e.toGeoLine();case a.LINEM:return e.toGeoLinem();case a.REGION:return e.toGeoRegion();case a.POINTEPS:return e.toGeoPoint();case a.LINEEPS:return e.toGeoLineEPS();case a.REGIONEPS:return e.toGeoRegionEPS()}}},{key:"toGeoPoint",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(n>0){if(1===n)return new Xe(t[0].x,t[0].y);for(var r=[],i=0;i<n;i++)r.push(new Xe(t[i].x,t[i].y));return new Fe(r)}return null}},{key:"toGeoLine",value:function(){var e=this.parts||[],t=this.points||[],n=e.length;if(n>0){if(1===n){for(var r=[],i=0;i<e[0];i++)r.push(new Xe(t[i].x,t[i].y));return r[0].equals(r[e[0]-1])?new vt(r):new rt(r)}for(var o=[],a=0;a<n;a++){for(var s=[],l=0;l<e[a];l++)s.push(new Xe(t[l].x,t[l].y));o.push(new rt(s)),t.splice(0,e[a])}return new wt(o)}return null}},{key:"toGeoLineEPS",value:function(){var e,t,n,r,i,o=this.parts||[],a=this.points||[],s=o.length;if(s>0){if(1===s){for(e=0,n=[];e<o[0];e++)n.push(new Xe(a[e].x,a[e].y,a[e].type));return n[0].equals(n[o[0]-1])?(i=rt.createLineEPS(n),new vt(i)):(i=rt.createLineEPS(n),new rt(i))}for(e=0,r=[];e<s;e++){for(t=0,n=[];t<o[e];t++)n.push(new Xe(a[t].x,a[t].y));i=rt.createLineEPS(n),r.push(new rt(i)),a.splice(0,o[e])}return new wt(r)}return null}},{key:"toGeoLinem",value:function(){return Cn.fromJson(this)}},{key:"toGeoRegion",value:function(){var t=this.parts||[],n=this.partTopo||[],r=this.points||[],i=t.length;if(i<=0)return null;var o=[],a=[];if(1==i){for(var s=0;s<r.length;s++)a.push(new Xe(r[s].x,r[s].y));return o.push(new jt([new vt(a)])),new Pt(o)}for(var l=[],u=[],c=[],f=[],h=[],p=0,y=0;p<i;p++){for(var d=0;d<t[p];d++)a.push(new Xe(r[y+d].x,r[y+d].y));y+=t[p];var m=new jt([new vt(a)]);a=[],c.push(m),0===n.length&&f.push(m.getBounds()),h.push(1),u.push(m.getArea())}if(e.bubbleSort(u,c,n,f),0===n.length){for(var v=[],g=1;g<c.length;g++)for(var b=g-1;b>=0;b--)if(v[g]=-1,f[b].containsBounds(f[g])){h[g]=-1*h[b],h[g]<0&&(v[g]=b);break}for(var S=0;S<c.length;S++)h[S]>0?o.push(c[S]):(o[v[S]].components=o[v[S]].components.concat(c[S].components),o.push(""))}else{o=new Array;for(var _=0;_<c.length;_++)if(n[_]&&-1==n[_]?l=l.concat(c[_].components):(l.length>0&&o.length>0&&(o[o.length-1].components=o[o.length-1].components.concat(l),l=[]),o.push(c[_])),_==i-1){var w=o.length;if(w)o[w-1].components=o[w-1].components.concat(l);else for(var O=0,x=l.length;O<x;O++)o.push(new jt(l))}}return new Pt(o)}},{key:"toGeoRegionEPS",value:function(){var t=this.parts||[],n=this.partTopo||[],r=this.points||[],i=t.length;if(i<=0)return null;var o,a=[],s=[];if(1==i){for(var l=0;l<r.length;l++)s.push(new Xe(r[l].x,r[l].y));return o=rt.createLineEPS(s),a.push(new jt([new vt(o)])),new Pt(a)}for(var u=[],c=[],f=[],h=[],p=[],y=0,d=0;y<i;y++){for(var m=0;m<t[y];m++)s.push(new Xe(r[d+m].x,r[d+m].y));d+=t[y],o=rt.createLineEPS(s);var v=new jt([new vt(o)]);s=[],f.push(v),0===n.length&&h.push(v.getBounds()),p.push(1),c.push(v.getArea())}if(e.bubbleSort(c,f,n,h),0===n.length){for(var g=[],b=1;b<f.length;b++)for(var S=b-1;S>=0;S--)if(g[b]=-1,h[S].containsBounds(h[b])){p[b]=-1*p[S],p[b]<0&&(g[b]=S);break}for(var _=0;_<f.length;_++)p[_]>0?a.push(f[_]):(a[g[_]].components=a[g[_]].components.concat(f[_].components),a.push(""))}else{a=new Array;for(var w=0;w<f.length;w++)if(n[w]&&-1==n[w]?u=u.concat(f[w].components):(u.length>0&&a.length>0&&(a[a.length-1].components=a[a.length-1].components.concat(u),u=[]),a.push(f[w])),w==i-1){var O=a.length;if(O)a[O-1].components=a[O-1].components.concat(u);else for(var x=0,C=u.length;x<C;x++)a.push(new jt(u))}}return new Pt(a)}}])&&Tn(t.prototype,n),r&&Tn(t,r),e}();function En(e){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return!t||"object"!==En(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function An(e,t,n){return(An="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ln(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ln(e){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jn(e,t){return(jn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServerGeometry=Pn;var Nn=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Mn(this,Ln(t).call(this,e))).ignoreExtraDims=!0,n.CLASS_NAME="SuperMap.Format.GeoJSON",n.parseCoords={point:function(e){if(!1===this.ignoreExtraDims&&2!=e.length)throw"Only 2D points are supported: "+e;return new Xe(e[0],e[1])},multipoint:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Fe(t)},linestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new rt(t)},multilinestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.linestring.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new wt(t)},polygon:function(e){for(var t,n,r=[],i=0,o=e.length;i<o;++i){try{n=this.parseCoords.linestring.apply(this,[e[i]])}catch(e){throw e}t=new vt(n.components),r.push(t)}return new jt(r)},multipolygon:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=this.parseCoords.polygon.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return new Pt(t)},box:function(e){if(2!=e.length)throw"GeoJSON box coordinates must have 2 elements";return new jt([new vt([new Xe(e[0][0],e[0][1]),new Xe(e[1][0],e[0][1]),new Xe(e[1][0],e[1][1]),new Xe(e[0][0],e[1][1]),new Xe(e[0][0],e[0][1])])])}},n.extract={feature:function(e){var t=this.extract.geometry.apply(this,[e.geometry]),n={type:"Feature",properties:this.createAttributes(e),geometry:t};return e.geometry&&"TEXT"===e.geometry.type&&(n.properties.texts=e.geometry.texts,n.properties.textStyle=e.geometry.textStyle),e.fid&&(n.id=e.fid),e.ID&&(n.id=e.ID),n},geometry:function(e){if(null==e)return null;!e.parts&&e.points&&(e.parts=[e.points.length]);var t,n=new Pn(e).toGeometry()||e,r=n.geometryType||n.type;return"LinearRing"===r&&(r="LineString"),"LINEM"===r&&(r="MultiLineString"),t=this.extract[r.toLowerCase()].apply(this,[n]),"Collection"===(r="TEXT"===r?"Point":r)?{type:"GeometryCollection",geometries:t}:{type:r,coordinates:t}},point:function(e){var t=[e.x,e.y];for(var n in e)"x"===n||"y"===n||null===e[n]||isNaN(e[n])||t.push(e[n]);return t},text:function(e){return[e.points[0].x,e.points[0].y]},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.linestring.apply(this,[e.components[n]]));return t},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.polygon.apply(this,[e.components[n]]));return t},collection:function(e){for(var t=e.components.length,n=new Array(t),r=0;r<t;++r)n[r]=this.extract.geometry.apply(this,[e.components[r]]);return n}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jn(e,t)}(t,un),n=t,(r=[{key:"read",value:function(e,n,r){n=n||"FeatureCollection";var i=null,o=null;if(o="string"==typeof e?An(Ln(t.prototype),"read",this).call(this,e,r):e){if("string"!=typeof o.type);else if(this.isValidType(o,n))switch(n){case"Geometry":try{i=this.parseGeometry(o)}catch(e){}break;case"Feature":try{(i=this.parseFeature(o)).type="Feature"}catch(e){}break;case"FeatureCollection":switch(i=[],o.type){case"Feature":try{i.push(this.parseFeature(o))}catch(e){i=null}break;case"FeatureCollection":for(var a=0,s=o.features.length;a<s;++a)try{i.push(this.parseFeature(o.features[a]))}catch(e){i=null}break;default:try{var l=this.parseGeometry(o);i.push(new en(l))}catch(e){i=null}}}}else;return i}},{key:"write",value:function(e,n){return An(Ln(t.prototype),"write",this).call(this,this.toGeoJSON(e),n)}},{key:"fromGeoJSON",value:function(e,t,n){var r=this,i=this.read(e,t,n);return be.isArray(i)?i.map(function(e){return r._toiSevrerFeature(e)}):this._toiSevrerFeature(i)}},{key:"toGeoJSON",value:function(e){var t={type:null};if(be.isArray(e)){t.type="FeatureCollection";var n=e.length;t.features=new Array(n);for(var r=0;r<n;++r){var i=e[r];if(s(i)){var o={};o.geometry=i,t.features[r]=this.extract.feature.apply(this,[o])}else t.features[r]=this.extract.feature.apply(this,[i])}}else if(s(e)){var a={};a.geometry=e,t=this.extract.feature.apply(this,[a])}else t=this.extract.feature.apply(this,[e]);function s(e){return e.hasOwnProperty("parts")&&e.hasOwnProperty("points")}return t}},{key:"isValidType",value:function(e,t){var n=!1;switch(t){case"Geometry":-1==be.indexOf(["Point","MultiPoint","LineString","MultiLineString","Polygon","MultiPolygon","Box","GeometryCollection"],e.type)||(n=!0);break;case"FeatureCollection":n=!0;break;default:e.type==t&&(n=!0)}return n}},{key:"parseFeature",value:function(e){var t,n,r,i;r=e.properties?e.properties:{},i=e.geometry&&e.geometry.bbox||e.bbox;try{n=this.parseGeometry(e.geometry)}catch(e){throw e}return t=new en(n,r),i&&(t.bounds=Oe.fromArray(i)),e.id&&(t.fid=e.id),t}},{key:"parseGeometry",value:function(e){if(null==e)return null;var t;if("GeometryCollection"==e.type){if(!be.isArray(e.geometries))throw"GeometryCollection must have geometries array: "+e;for(var n=e.geometries.length,r=new Array(n),i=0;i<n;++i)r[i]=this.parseGeometry.apply(this,[e.geometries[i]]);t=new Le(r)}else{if(!be.isArray(e.coordinates))throw"Geometry must have coordinates array: "+e;if(!this.parseCoords[e.type.toLowerCase()])throw"Unsupported geometry type: "+e.type;try{t=this.parseCoords[e.type.toLowerCase()].apply(this,[e.coordinates])}catch(e){throw e}}return t}},{key:"createCRSObject",value:function(e){var t=e.layer.projection.toString(),n={};if(t.match(/epsg:/i)){var r=parseInt(t.substring(t.indexOf(":")+1));n=4326==r?{type:"name",properties:{name:"urn:ogc:def:crs:OGC:1.3:CRS84"}}:{type:"name",properties:{name:"EPSG:"+r}}}return n}},{key:"_toiSevrerFeature",value:function(e){var t=e.attributes,n=[],r=[];for(var i in t)n.push(i),r.push(t[i]);var o={fieldNames:n,fieldValues:r,geometry:Pn.fromGeometry(e.geometry)};return o.geometry.id=e.fid,o}},{key:"createAttributes",value:function(e){if(!e)return null;var t={};!function(e,t){if(!e.hasOwnProperty("fieldNames")||!e.hasOwnProperty("fieldValues"))return;var n=e.fieldNames,r=e.fieldValues;for(var i in n)t[n[i]]=r[i]}(e,t);var n=["fieldNames","fieldValues","geometry","stringID","ID"];for(var r in e)n.indexOf(r)>-1||(t[r]=e[r]);return t}}])&&kn(n.prototype,r),i&&kn(n,i),t}();function Rn(e){return(Rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function In(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Dn(e,t){return!t||"object"!==Rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fn(e){return(Fn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Format.GeoJSON=Nn;var Un=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Dn(this,Fn(t).call(this,e))).regExes={typeStr:/^\s*(\w+)\s*\(\s*(.*)\s*\)\s*$/,spaces:/\s+/,parenComma:/\)\s*,\s*\(/,doubleParenComma:/\)\s*\)\s*,\s*\(\s*\(/,trimParens:/^\s*\(?(.*?)\)?\s*$/},n.CLASS_NAME="SuperMap.Format.WKT",n.extract={point:function(e){return e.x+" "+e.y},multipoint:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.point.apply(this,[e.components[n]])+")");return t.join(",")},linestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extract.point.apply(this,[e.components[n]]));return t.join(",")},multilinestring:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},polygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.linestring.apply(this,[e.components[n]])+")");return t.join(",")},multipolygon:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push("("+this.extract.polygon.apply(this,[e.components[n]])+")");return t.join(",")},collection:function(e){for(var t=[],n=0,r=e.components.length;n<r;++n)t.push(this.extractGeometry.apply(this,[e.components[n]]));return t.join(",")}},n.parse={point:function(e){var t=he.trim(e).split(this.regExes.spaces);return new en(new Xe(t[0],t[1]))},multipoint:function(e){for(var t,n=he.trim(e).split(","),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.point.apply(this,[t]).geometry);return new en(new Fe(r))},linestring:function(e){for(var t=he.trim(e).split(","),n=[],r=0,i=t.length;r<i;++r)n.push(this.parse.point.apply(this,[t[r]]).geometry);return new en(new rt(n))},multilinestring:function(e){for(var t,n=he.trim(e).split(this.regExes.parenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.linestring.apply(this,[t]).geometry);return new en(new wt(r))},polygon:function(e){for(var t,n,r,i=he.trim(e).split(this.regExes.parenComma),o=[],a=0,s=i.length;a<s;++a)t=i[a].replace(this.regExes.trimParens,"$1"),n=this.parse.linestring.apply(this,[t]).geometry,r=new vt(n.components),o.push(r);return new en(new jt(o))},multipolygon:function(e){for(var t,n=he.trim(e).split(this.regExes.doubleParenComma),r=[],i=0,o=n.length;i<o;++i)t=n[i].replace(this.regExes.trimParens,"$1"),r.push(this.parse.polygon.apply(this,[t]).geometry);return new en(new Pt(r))},geometrycollection:function(e){e=e.replace(/,\s*([A-Za-z])/g,"|$1");for(var t=he.trim(e).split("|"),n=[],r=0,i=t.length;r<i;++r)n.push(this.read(t[r]));return n}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(t,nn),n=t,(r=[{key:"read",value:function(e){var t,n,r;e=e.replace(/[\n\r]/g," ");var i=this.regExes.typeStr.exec(e);return i&&(n=i[1].toLowerCase(),r=i[2],this.parse[n]&&(t=this.parse[n].apply(this,[r]))),t}},{key:"write",value:function(e){var t,n,r;e.constructor===Array?(t=e,r=!0):(t=[e],r=!1);var i=[];r&&i.push("GEOMETRYCOLLECTION(");for(var o=0,a=t.length;o<a;++o)r&&o>0&&i.push(","),n=t[o].geometry,i.push(this.extractGeometry(n));return r&&i.push(")"),i.join("")}},{key:"extractGeometry",value:function(e){var t=e.CLASS_NAME.split(".")[2].toLowerCase();return this.extract[t]?("collection"===t?"GEOMETRYCOLLECTION":t.toUpperCase())+"("+this.extract[t].apply(this,[e])+")":null}}])&&In(n.prototype,r),i&&In(n,i),t}();r.Format.WKT=Un;function Gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zn=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var n=this;t=t||{},this.speed=t.speed&&t.speed>=0?t.speed:1,this.frequency=t.speed&&t.frequency>=0?t.frequency:1e3,this.startTime=t.startTime&&null!=t.startTime?t.startTime:0,this.endTime=t.endTime&&null!=t.endTime&&t.endTime>=n.startTime?t.endTime:+new Date,this.repeat=void 0===t.repeat||t.repeat,this.reverse=void 0!==t.reverse&&t.reverse,this.currentTime=null,this.oldTime=null,this.running=!1,this.EVENT_TYPES=["start","pause","stop"],n.events=new Jt(this,null,this.EVENT_TYPES),n.speed=Number(n.speed),n.frequency=Number(n.frequency),n.startTime=Number(n.startTime),n.endTime=Number(n.endTime),n.startTime=Date.parse(new Date(n.startTime)),n.endTime=Date.parse(new Date(n.endTime)),n.currentTime=n.startTime,this.CLASS_NAME="SuperMap.TimeControlBase"}var t,n,r;return t=e,(n=[{key:"updateOptions",value:function(e){var t=this;(e=e||{}).speed&&e.speed>=0&&(t.speed=e.speed,t.speed=Number(t.speed)),e.speed&&e.frequency>=0&&(t.frequency=e.frequency,t.frequency=Number(t.frequency)),e.startTime&&null!=e.startTime&&(t.startTime=e.startTime,t.startTime=Date.parse(new Date(t.startTime))),e.endTime&&null!=e.endTime&&e.endTime>=t.startTime&&(t.endTime=e.endTime,t.endTime=Date.parse(new Date(t.endTime))),null!=e.repeat&&(t.repeat=e.repeat),null!=e.reverse&&(t.reverse=e.reverse)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.tick(),e.events.triggerEvent("start",e.currentTime))}},{key:"pause",value:function(){this.running=!1,this.events.triggerEvent("pause",this.currentTime)}},{key:"stop",value:function(){var e=this;e.currentTime=e.startTime,e.running&&(e.running=!1),e.events.triggerEvent("stop",e.currentTime)}},{key:"toggle",value:function(){this.running?this.pause():this.start()}},{key:"setSpeed",value:function(e){return e>=0&&(this.speed=e,!0)}},{key:"getSpeed",value:function(){return this.speed}},{key:"setFrequency",value:function(e){return e>=0&&(this.frequency=e,!0)}},{key:"getFrequency",value:function(){return this.frequency}},{key:"setStartTime",value:function(e){var t=this;return!((e=Date.parse(new Date(e)))>t.endTime)&&(t.startTime=e,t.currentTime<t.startTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getStartTime",value:function(){return this.startTime}},{key:"setEndTime",value:function(e){var t=this;return t.endTime=Date.parse(new Date(t.endTime)),!(e<t.startTime)&&(t.endTime=e,t.currentTime>=t.endTime&&(t.currentTime=t.startTime,t.tick()),!0)}},{key:"getEndTime",value:function(){return this.endTime}},{key:"setCurrentTime",value:function(e){var t=this;return t.currentTime=Date.parse(new Date(t.currentTime)),e>=t.startTime&&e<=t.endTime&&(t.currentTime=e,t.startTime=t.currentTime,t.tick(),!0)}},{key:"getCurrentTime",value:function(){return this.currentTime}},{key:"setRepeat",value:function(e){this.repeat=e}},{key:"getRepeat",value:function(){return this.repeat}},{key:"setReverse",value:function(e){this.reverse=e}},{key:"getReverse",value:function(){return this.reverse}},{key:"getRunning",value:function(){return this.running}},{key:"destroy",value:function(){var e=this;e.speed=null,e.frequency=null,e.startTime=null,e.endTime=null,e.currentTime=null,e.repeat=null,e.running=!1,e.reverse=null}},{key:"tick",value:function(){}}])&&Gn(t.prototype,n),r&&Gn(t,r),e}();function Vn(e){return(Vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qn(e,t,n){return(qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wn(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wn(e){return(Wn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qn(e,t){return(Qn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TimeControlBase=zn;var Yn=function(e){function t(e,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this;var a=Jn(r=!(o=Wn(t).call(this,n))||"object"!==Vn(o)&&"function"!=typeof o?Jn(i):o);return a.callback=e,Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),a.update=a.update.bind(a),a.oldTime=a.currentTime,a.CLASS_NAME="SuperMap.TimeFlowControl",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qn(e,t)}(t,zn),n=t,(r=[{key:"updateOptions",value:function(e){e=e||{},qn(Wn(t.prototype),"updateOptions",this).call(this,e)}},{key:"start",value:function(){var e=this;e.running||(e.running=!0,e.reverse?e.currentTime===e.startTime&&(e.oldTime=e.endTime,e.currentTime=e.oldTime):e.oldTime===e.endTime&&(e.currentTime=e.startTime,e.oldTime=e.currentTime),e.tick())}},{key:"stop",value:function(){qn(Wn(t.prototype),"stop",this).call(this);var e=this;e.oldTime=e.currentTime,e.running&&(e.running=!1),e.intervalId&&window.clearTimeout(e.intervalId)}},{key:"destroy",value:function(){qn(Wn(t.prototype),"destroy",this).call(this);this.oldTime=null,this.callback=null}},{key:"tick",value:function(){var e=this;e.intervalId&&window.clearInterval(e.intervalId),e.intervalId=null,e.update(),e.intervalId=window.setInterval(e.update,e.frequency)}},{key:"update",value:function(){var e=this;if(e.running)if(e.callback&&e.callback(e.currentTime),e.reverse){if(e.currentTime===e.startTime){if(!e.repeat)return e.running=!1,null;e.oldTime=e.endTime,e.currentTime=e.oldTime}else e.currentTime=e.oldTime,e.oldTime-=e.speed;e.oldTime<=e.startTime&&(e.oldTime=e.startTime)}else{if(e.currentTime===e.endTime){if(!e.repeat)return e.running=!1,e.stop(),null;e.stop(),e.currentTime=e.startTime,e.oldTime=e.currentTime,e.start()}else e.oldTime=e.currentTime,e.currentTime+=e.speed;e.currentTime>=e.endTime&&(e.currentTime=e.endTime)}}}])&&Hn(n.prototype,r),i&&Hn(n,i),t}();r.TimeFlowControl=Yn;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
n(16),n(20);var Xn=n(4),Kn=n.n(Xn);function Zn(e){return(Zn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $n=window.fetch,er=(r.setCORS=function(e){r.CORS=e},r.isCORS=function(){return void 0!=r.CORS?r.CORS:window.XMLHttpRequest&&"withCredentials"in new window.XMLHttpRequest}),tr=(r.setRequestTimeout=function(e){return r.RequestTimeout=e},r.getRequestTimeout=function(){return r.RequestTimeout||45e3}),nr=r.FetchRequest={commit:function(e,t,n,r){switch(e=e?e.toUpperCase():e){case"GET":return this.get(t,n,r);case"POST":return this.post(t,n,r);case"PUT":return this.put(t,n,r);case"DELETE":return this.delete(t,n,r);default:return this.get(t,n,r)}},supportDirectRequest:function(e,t){return!!be.isInTheSameDomain(e)||(void 0!=t.crossOrigin?t.crossOrigin:er()||t.proxy)},get:function(e,t,n){n=n||{};if(e=be.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){var i={url:e=e.replace(".json",".jsonp"),data:t};return r.Util.RequestJSONPPromise.GET(i)}return this.urlIsLong(e)?this._postSimulatie("GET",e.substring(0,e.indexOf("?")-1),t,n):this._fetch(e,t,n,"GET")},delete:function(e,t,n){n=n||{};if(e=be.urlAppend(e,this._getParameterString(t||{})),e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=DELETE",data:t};return r.Util.RequestJSONPPromise.DELETE(i)}return this.urlIsLong(e)?this._postSimulatie("DELETE",e.substring(0,e.indexOf("?")-1),t,n):this._fetch(e,t,n,"DELETE")},post:function(e,t,n){if(n=n||{},!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=POST",data:t};return r.Util.RequestJSONPPromise.POST(i)}return this._fetch(this._processUrl(e,n),t,n,"POST")},put:function(e,t,n){if(n=n||{},e=this._processUrl(e,n),!this.supportDirectRequest(e,n)){e=e.replace(".json",".jsonp");var i={url:e+="&_method=PUT",data:t};return r.Util.RequestJSONPPromise.PUT(i)}return this._fetch(e,t,n,"PUT")},urlIsLong:function(e){for(var t=0,n=null,r=0,i=e.length;r<i;r++)(n=e.charCodeAt(r))<127?t++:128<=n&&n<=2047?t+=2:2048<=n&&n<=65535&&(t+=3);return!(t<2e3)},_postSimulatie:function(e,t,n,r){return t+=(t.indexOf("?")>-1?"&":"?")+"_method="+e,"string"!=typeof n&&(n=JSON.stringify(n)),this.post(t,n,r)},_processUrl:function(e,t){if(this._isMVTRequest(e))return e;if(-1===e.indexOf(".json")&&!t.withoutFormatSuffix)if(e.indexOf("?")<0)e+=".json";else{var n=e.split("?");2===n.length&&(e=n[0]+".json?"+n[1])}return t&&t.proxy&&("function"==typeof t.proxy?e=t.proxy(e):(e=decodeURIComponent(e),e=t.proxy+encodeURIComponent(e))),e},_fetch:function(e,t,n,r){return(n=n||{}).headers=n.headers||{},n.headers["Content-Type"]||(n.headers["Content-Type"]="application/x-www-form-urlencoded;charset=UTF-8"),n.timeout?this._timeout(n.timeout,$n(e,{method:r,headers:n.headers,body:"PUT"===r||"POST"===r?t:void 0,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:tr()}).then(function(e){return e})):$n(e,{method:r,body:"PUT"===r||"POST"===r?t:void 0,headers:n.headers,credentials:n.withCredentials?"include":"omit",mode:"cors",timeout:tr()}).then(function(e){return e})},_fetchJsonp:function(e,t){return t=t||{},Kn()(e,{method:"GET",timeout:t.timeout}).then(function(e){return e})},_timeout:function(e,t){return new Promise(function(n,r){setTimeout(function(){r(new Error("timeout"))},e),t.then(n,r)})},_getParameterString:function(e){var t=[];for(var n in e){var r=e[n];if(null!=r&&"function"!=typeof r){var i;if("object"===Zn(r)&&r.constructor===Array){for(var o,a=[],s=0,l=r.length;s<l;s++)o=r[s],a.push(encodeURIComponent(null===o||void 0===o?"":o));i="["+a.join(",")+"]"}else i=encodeURIComponent(r);t.push(encodeURIComponent(n)+"="+i)}}return t.join("&")},_isMVTRequest:function(e){return e.indexOf(".mvt")>-1||e.indexOf(".pbf")>-1}};function rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Util.RequestJSONPPromise={limitLength:1500,queryKeys:[],queryValues:[],supermap_callbacks:{},addQueryStrings:function(e){for(var t in e){this.queryKeys.push(t),"string"!=typeof e[t]&&(e[t]=r.Util.toJSON(e[t]));var n=encodeURIComponent(e[t]);this.queryValues.push(n)}},issue:function(e){for(var t=this,n=t.getUid(),r=e.url,i=[],o=new Promise(function(e){t.supermap_callbacks[n]=function(r){delete t.supermap_callbacks[n],e(r)}}),a=r,s=0,l=t.queryKeys?t.queryKeys.length:0,u=0;u<l;u++)if(a.length+t.queryKeys[u].length+2>=t.limitLength){if(0==s)return!1;i.push(a),a=r,s=0,u--}else if(a.length+t.queryKeys[u].length+2+t.queryValues[u].length>t.limitLength)for(var c=t.queryValues[u];c.length>0;){var f=t.limitLength-a.length-t.queryKeys[u].length-2;a.indexOf("?")>-1?a+="&":a+="?";var h=c.substring(0,f);"%"===h.substring(f-1,f)?(f-=1,h=c.substring(0,f)):"%"===h.substring(f-2,f-1)&&(f-=2,h=c.substring(0,f)),a+=t.queryKeys[u]+"="+h,c=c.substring(f),h.length>0&&(i.push(a),a=r,s=0)}else s++,a.indexOf("?")>-1?a+="&":a+="?",a+=t.queryKeys[u]+"="+t.queryValues[u];return i.push(a),t.send(i,"SuperMap.Util.RequestJSONPPromise.supermap_callbacks["+n+"]",e&&e.proxy),o},getUid:function(){return 1e3*(new Date).getTime()+Math.floor(1e17*Math.random())},send:function(e,t,n){var r=e.length;if(r>0)for(var i=(new Date).getTime(),o=0;o<r;o++){var a=e[o];a.indexOf("?")>-1?a+="&":a+="?",a+="sectionCount="+r,a+="&sectionIndex="+o,a+="&jsonpUserID="+i,n&&(a=decodeURIComponent(a),a=n+encodeURIComponent(a)),Kn()(a,{jsonpCallbackFunction:t,timeout:3e4})}},GET:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings(e.params),this.issue(e)},POST:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},PUT:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)},DELETE:function(e){return this.queryKeys.length=0,this.queryValues.length=0,this.addQueryStrings({requestEntity:e.data}),this.issue(e)}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ir=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"generateToken",value:function(e,t){var n=this.servers[e];if(n)return nr.post(n.tokenServiceUrl,JSON.stringify(t.toJSON())).then(function(e){return e.text()})}},{key:"registerServers",value:function(e){this.servers=this.servers||{},be.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++){var n=e[t];this.servers[n.server]=n}}},{key:"registerToken",value:function(e,t){if(this.tokens=this.tokens||{},e&&t){var n=this._getTokenStorageKey(e);this.tokens[n]=t}}},{key:"registerKey",value:function(e,t){if(this.keys=this.keys||{},e&&!(e.length<1)&&t){e=be.isArray(e)?e:[e];for(var n=0;n<e.length;n++){var r=this._getUrlRestString(e[0])||e[0];this.keys[r]=t}}}},{key:"getServerInfo",value:function(e){return this.servers=this.servers||{},this.servers[e]}},{key:"getToken",value:function(e){if(e){this.tokens=this.tokens||{};var t=this._getTokenStorageKey(e);return this.tokens[t]}}},{key:"getKey",value:function(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;return this.keys[t]}},{key:"loginiServer",value:function(e,t,n,r){e+="/"===e.substr(e.length-1,1)?"services/security/login.json":"/services/security/login.json";var i={username:t&&t.toString(),password:n&&n.toString(),rememberme:r};i=JSON.stringify(i);return nr.post(e,i,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"}}).then(function(e){return e.json()})}},{key:"logoutiServer",value:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return nr.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginOnline",value:function(t,n){var r=e.SSO+"/login?service="+t;this._open(r,n)}},{key:"loginiPortal",value:function(e,t,n){e+="/"===e.substr(e.length-1,1)?"web/login.json":"/web/login.json";var r={username:t&&t.toString(),password:n&&n.toString()};r=JSON.stringify(r);return nr.post(e,r,{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0}).then(function(e){return e.json()})}},{key:"logoutiPortal",value:function(e){e+="/"===e.substr(e.length-1,1)?"services/security/logout":"/services/security/logout";return nr.get(e,"",{headers:{"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},withCredentials:!0,withoutFormatSuffix:!0}).then(function(){return!0}).catch(function(){return!1})}},{key:"loginManager",value:function(e,t,n){if(be.isInTheSameDomain(e)){var r="/"===e.substr(e.length-1,1)?e+"icloud/security/tokens.json":e+"/icloud/security/tokens.json",i=t||{},o={username:i.userName&&i.userName.toString(),password:i.password&&i.password.toString()};o=JSON.stringify(o);var a=this;return nr.post(r,o,{headers:{Accept:"*/*","Content-Type":"application/json"}}).then(function(e){e.text().then(function(e){return a.imanagerToken=e,e})})}var s=!n||n.isNewTab;this._open(e,s)}},{key:"destroyAllCredentials",value:function(){this.keys=null,this.tokens=null,this.servers=null}},{key:"destroyToken",value:function(e){if(e){var t=this._getTokenStorageKey(e);this.tokens=this.tokens||{},this.tokens[t]&&delete this.tokens[t]}}},{key:"destroyKey",value:function(e){if(e){this.keys=this.keys||{};var t=this._getUrlRestString(e)||e;this.keys[t]&&delete this.keys[t]}}},{key:"_open",value:function(e,t){t=null==t||t;var n=window.screen.availWidth/2-this.INNER_WINDOW_WIDTH/2,r=window.screen.availHeight/2-this.INNER_WINDOW_HEIGHT/2,i="height="+this.INNER_WINDOW_HEIGHT+", width="+this.INNER_WINDOW_WIDTH+",top="+r+", left="+n+",toolbar=no, menubar=no, scrollbars=no, resizable=no, location=no, status=no";t?window.open(e,"login"):window.open(e,"login",i)}},{key:"_getTokenStorageKey",value:function(e){var t=e.match(/(.*?):\/\/([^\/]+)/i);return t?t[0]:e}},{key:"_getUrlRestString",value:function(e){if(!e)return e;var t=e.match(/(http|https):\/\/(.*\/rest)/i);return t?t[0]:e}}],(n=null)&&rr(t.prototype,n),r&&rr(t,r),e}();function or(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}ir.INNER_WINDOW_WIDTH=600,ir.INNER_WINDOW_HEIGHT=600,ir.SSO="https://sso.supermap.com",ir.ONLINE="https://www.supermapol.com",r.SecurityManager=ir;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ar=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t){var r=t.substr(t.length-1,1);this.serviceUrl="/"===r?t.substr(0,t.length-2):t}this.options=n||{},this.CLASS_NAME="SuperMap.iManagerServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n,r){(r=r||{headers:{Accept:"*/*","Content-Type":"application/json"}}).hasOwnProperty("withCredentials")||(r.withCredentials=!0),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers;var i=ir.imanagerToken;return i&&(r.headers||(r.headers=[]),r.headers["X-Auth-Token"]=i),n&&(n=JSON.stringify(n)),nr.commit(e,t,n,r).then(function(e){return e.json()})}}])&&or(t.prototype,n),r&&or(t,r),e}();r.iManagerServiceBase=ar;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.nodeSpec="SMALL",this.nodeCount=1,this.nodeName="",this.password="",this.description="",this.physicalMachineName="",this.ips=[],this.userName="",be.extend(this,t)};function lr(e){return(lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ur(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cr(e,t){return!t||"object"!==lr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fr(e){return(fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hr(e,t){return(hr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iManagerCreateNodeParam=sr;var pr=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),cr(this,fr(t).call(this,e))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hr(e,t)}(t,ar),n=t,(r=[{key:"load",value:function(){return this.request("GET",this.serviceUrl+"/web/api/service.json")}},{key:"createIServer",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/server.json",new sr(e))}},{key:"createIPortal",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/portal.json",new sr(e))}},{key:"iServerList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/server.json")}},{key:"iPortalList",value:function(){return this.request("GET",this.serviceUrl+"/icloud/web/nodes/portal.json")}},{key:"startNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/started.json",e)}},{key:"stopNodes",value:function(e){return this.request("POST",this.serviceUrl+"/icloud/web/nodes/stopped.json",e)}}])&&ur(n.prototype,r),i&&ur(n,i),t}();r.iManager=pr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yr=function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.tags=[],this.userNames="",this.types=[],this.checkStatus="",this.offline=!1,this.orderBy="",this.orderType="",this.keywords=[],this.currentPage=0,this.pageSize=0,this.isBatch=!1,this.dirIds=[],this.isNotInDir=!1,this.filterFields=[],this.authorizedOnly=!1,be.extend(this,t)};r.iPortalServicesQueryParam=yr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.tags=null,this.suggest=!1,this.sourceTypes=null,this.keywords=null,this.epsgCode=null,this.orderBy=null,this.currentPage=null,this.pageSize=null,this.dirIds=null,this.isNotInDir=!1,this.updateStart=null,this.updateEnd=null,this.visitStart=null,this.visitEnd=null,this.filterFields=null,be.extend(this,t)};r.iPortalMapsQueryParam=dr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.createEnd=null,this.createStart=null,this.filterFields=null,this.orderBy=null,this.tags=null,this.userNames=null,this.currentPage=null,this.keywords=null,this.pageSize=null,this.currentUser=null,this.departmentIds=null,this.dirIds=null,this.groupIds=null,this.isNotInDir=!1,this.permissionType=null,this.resourceIds=null,this.returnSubDir=null,this.searchScope=null,be.extend(this,t)};r.iPortalInsightsQueryParam=mr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.tags=null,this.userNames=null,this.orderBy=null,this.orderType=null,this.keywords=null,this.currentPage=null,this.pageSize=null,this.dirIds=null,this.isNotInDir=!1,this.filterFields=null,this.createStart=null,this.createEnd=null,be.extend(this,t)};function gr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.iPortalScenesQueryParam=vr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var br=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.serviceUrl=t,this.serverType=o.iPortal,this.CLASS_NAME="SuperMap.iPortalServiceBase",this.withCredentials=n.withCredentials||!1,this.crossOrigin=n.crossOrigin,this.headers=n.headers}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{headers:this.headers,crossOrigin:this.crossOrigin,withCredentials:this.withCredentials};return t=this.createCredentialUrl(t),nr.commit(e,t,n,r).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,n=this.getCredential();if(n){var r=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===r?t+=n.getUrlParameters():t.indexOf("?")>-1&&"?"!==r?t+="&"+n.getUrlParameters():t+="?"+n.getUrlParameters()}return t}},{key:"getCredential",value:function(){var e,t=ir.getToken(this.serviceUrl);return(e=t?new Gt(t,"token"):null)||(e=(t=this.getKey())?new Gt(t,"key"):null),e}},{key:"getKey",value:function(){}}])&&gr(t.prototype,n),r&&gr(t,r),e}();function Sr(e){return(Sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wr(e){return(wr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Or(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xr(e,t){return(xr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalServiceBase=br;var Cr=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=wr(t).call(this,e,n))||"object"!==Sr(o)&&"function"!=typeof o?Or(i):o,n=n||{},r.addedMapNames=null,r.addedSceneNames=null,r.authorizeSetting=[],r.checkStatus="",r.createTime=0,r.description="",r.enable=!0,r.id=0,r.isBatch=!1,r.isDataItemService=!1,r.linkPage=null,r.mapInfos=[],r.metadata=null,r.nickname="",r.offline=!1,r.proxiedUrl=null,r.resTitle="",r.scenes=[],r.serviceRootUrlId=null,r.tags=[],r.thumbnail=null,r.type="",r.updateTime=0,r.userName="",r.verifyReason=null,r.version=null,r.visitCount=0,be.extend(Or(r),n),r.serviceUrl=e,r.id&&(r.serviceUrl=e+"/"+r.id),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xr(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.serviceUrl+".json").then(function(t){if(t.error)return t;for(var n in t)e[n]=t[n]})}},{key:"update",value:function(){var e={authorizeSetting:this.authorizeSetting,metadata:this.metadata,tags:this.tags,thumbnail:this.thumbnail},t={headers:Object.assign({"Content-Type":"application/x-www-form-urlencoded"},this.headers||{})};return this.request("PUT",this.serviceUrl,JSON.stringify(e),t)}}])&&_r(n.prototype,r),i&&_r(n,i),t}();function Tr(e){return(Tr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Er(e){return(Er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mr(e,t){return(Mr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalService=Cr;var Ar=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=Er(t).call(this,e))||"object"!==Tr(o)&&"function"!=typeof o?kr(i):o,n=n||{},r.authorizeSetting=[],r.center="",r.controls=null,r.checkStatus="",r.createTime=0,r.description="",r.epsgCode=0,r.extent="",r.id=0,r.isDefaultBottomMap=!1,r.layers=[],r.level=null,r.nickname="",r.sourceType="",r.status=null,r.tags=[],r.thumbnail="",r.title="",r.units=null,r.updateTime=0,r.userName="",r.visitCount=0,be.extend(kr(r),n),r.mapUrl=e,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mr(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.mapUrl+".json").then(function(t){if(t.error)return t;for(var n in t)e[n]=t[n]})}},{key:"update",value:function(){var e={units:this.units,level:this.level,center:this.center,controls:this.controls,description:this.description,epsgCode:this.epsgCode,extent:this.extent,status:this.status,tags:this.tags,layers:this.layers,title:this.title,thumbnail:this.thumbnail,sourceType:this.sourceType,authorizeSetting:this.authorizeSetting};return this.request("PUT",this.mapUrl,JSON.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&Pr(n.prototype,r),i&&Pr(n,i),t}();function Lr(e){return(Lr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e){return(Nr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ir(e,t){return(Ir=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalMap=Ar;var Dr=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=Nr(t).call(this,e))||"object"!==Lr(o)&&"function"!=typeof o?Rr(i):o,n=n||{},r.authorizeSetting=[],r.name="",r.checkStatus="",r.createTime=0,r.description="",r.id=0,r.nickname="",r.tags=[],r.thumbnail="",r.updateTime=0,r.userName="",r.visitCount=0,be.extend(Rr(r),n),r.insightUrl=e,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ir(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.insightUrl+".json").then(function(t){if(t.error)return t;for(var n in t)e[n]=t[n]})}},{key:"update",value:function(){var e={authorizeSetting:this.authorizeSetting,description:this.description,tags:this.tags,thumbnail:this.thumbnail,name:this.name};return this.request("PUT",this.insightUrl,JSON.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&jr(n.prototype,r),i&&jr(n,i),t}();function Fr(e){return(Fr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Br(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ur(e){return(Ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zr(e,t){return(zr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalInsight=Dr;var Vr=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=Ur(t).call(this,e))||"object"!==Fr(o)&&"function"!=typeof o?Gr(i):o,n=n||{},r.authorizeSetting=[],r.content=null,r.createTime=0,r.description="",r.id=0,r.layers=[],r.name="",r.nickname="",r.tags=[],r.thumbnail="",r.title="",r.updateTime=0,r.url="",r.userName="",r.visitCount=0,be.extend(Gr(r),n),r.sceneUrl=e,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zr(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.sceneUrl+".json").then(function(t){if(t.error)return t;for(var n in t)e[n]=t[n]})}},{key:"update",value:function(){var e={authorizeSetting:this.authorizeSetting,name:this.name,tags:this.tags,description:this.description,thumbnail:this.thumbnail};return this.request("PUT",this.sceneUrl,JSON.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&Br(n.prototype,r),i&&Br(n,i),t}();function Hr(e){return(Hr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qr(e){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Qr(e,t){return(Qr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalScene=Vr;var Yr=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=qr(t).call(this,e))||"object"!==Hr(o)&&"function"!=typeof o?Wr(i):o,n=n||{},r.authorizeSetting=[],r.content="",r.createTime=0,r.description="",r.id=0,r.name="",r.nickname="",r.tags=[],r.thumbnail="",r.updateTime=0,r.userName="",r.visitCount=0,be.extend(Wr(r),n),r.mapdashboardUrl=e,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qr(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.mapdashboardUrl+".json").then(function(t){if(t.error)return t;for(var n in t)e[n]=t[n]})}},{key:"update",value:function(){var e={authorizeSetting:this.authorizeSetting,description:this.description,name:this.name,tags:this.tags,thumbnail:this.thumbnail};return this.request("PUT",this.mapdashboardUrl,JSON.stringify(e),{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&Jr(n.prototype,r),i&&Jr(n,i),t}();r.iPortalMapdashboard=Yr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.tags=null,this.orderBy=null,this.filterFields=null,this.currentUser=null,this.dirIds=null,this.returnSubDir=!1,this.isNotInDir=!1,this.groupIds=null,this.departmentIds=null,this.resourceIds=null,this.searchScope=null,this.permissionType=null,this.keywords=null,this.currentPage=null,this.pageSize=null,this.orderType=null,be.extend(this,t)};r.iPortalMapdashboardsQueryParam=Xr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceType="",this.pageSize=12,this.currentPage=1,this.orderBy="UPDATETIME",this.orderType="DESC",this.searchType="PUBLIC",this.tags=[],this.dirIds=[],this.resourceSubTypes=[],this.aggregationTypes=[],this.text="",this.groupIds=[],this.departmentIds=[],be.extend(this,t)};r.iPortalQueryParam=Kr;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zr=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.content=[],this.total=0,this.currentPage=1,this.pageSize=12,this.aggregations=null,be.extend(this,t)};function $r(e){return($r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ei(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ti(e){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ni(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ri(e,t){return(ri=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalQueryResult=Zr;var ii=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=ti(t).call(this,e))||"object"!==$r(o)&&"function"!=typeof o?ni(i):o,n=n||{},r.authorizeSetting=[],r.bounds="",r.bounds4326="",r.checkStatus="",r.createTime=0,r.description=null,r.dirId=null,r.epsgCode=0,r.heatLevel=0,r.id=0,r.name="",r.personalDirId=null,r.resourceId=0,r.resourceSubType=null,r.resourceType=null,r.serviceRootUrlId=null,r.tags=null,r.thumbnail=null,r.updateTime=0,r.userName="",r.sourceJSON={},be.extend(ni(r),n),r.resourceUrl=e+"/web/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId,r.withCredentials&&(r.resourceUrl=e+"/web/mycontent/"+r.resourceType.replace("_","").toLowerCase()+"s/"+r.resourceId),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){var e=this;return e.request("GET",e.resourceUrl+".json").then(function(t){if(t.error)return t;e.sourceJSON=t})}},{key:"update",value:function(){var e=this.resourceType.replace("_","").toLowerCase();"data"===e&&(this.resourceUrl=this.resourceUrl+"/attributes.json");var t=JSON.stringify(this.sourceJSON);if("service"===e){var n={authorizeSetting:this.sourceJSON.authorizeSetting,metadata:this.sourceJSON.metadata,tags:this.sourceJSON.tags,thumbnail:this.sourceJSON.thumbnail,tokenRefreshUrl:this.sourceJSON.tokenRefreshUrl};t=JSON.stringify(n)}return this.request("PUT",this.resourceUrl,t,{headers:{"Content-Type":"application/x-www-form-urlencoded"}})}}])&&ei(n.prototype,r),i&&ei(n,i),t}();r.iPortalResource=ii;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oi=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.ids=[],this.entities=[],this.resourceType="",be.extend(this,t)};function ai(e){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function si(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function li(e,t){return!t||"object"!==ai(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ui(e){return(ui=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ci(e,t){return(ci=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalShareParam=oi;var fi=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=li(this,ui(t).call(this,e,n))).iportalUrl=e,n=n||{},r.withCredentials=n.withCredentials||!1,r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ci(e,t)}(t,br),n=t,(r=[{key:"load",value:function(){return nr.get(this.iportalUrl+"/web")}},{key:"queryResources",value:function(e){if(!(e instanceof Kr))return new Promise(function(e){e("queryParams is not instanceof iPortalQueryParam !")});var t=this,n=this.iportalUrl+"/gateway/catalog/resource/search.json";return e.t=(new Date).getTime(),this.request("GET",n,e).then(function(e){var n=[];e.content.forEach(function(e){n.push(new ii(t.iportalUrl,e))});var r=new Zr;return r.content=n,r.total=e.total,r.currentPage=e.currentPage,r.pageSize=e.pageSize,r.aggregations=e.aggregations,r})}},{key:"updateResourcesShareSetting",value:function(e){if(!(e instanceof oi))return new Promise(function(e){e("shareParams is not instanceof iPortalShareParam !")});var t=e.resourceType.replace("_","").toLowerCase()+"s";"datas"===t&&(t="mycontent/"+t);var n={ids:e.ids,entities:e.entities},r=this.iportalUrl+"/web/"+t+"/sharesetting.json";return this.request("PUT",r,JSON.stringify(n)).then(function(e){return e})}},{key:"queryServices",value:function(e){if(!(e instanceof yr))return null;var t=this.iportalUrl+"/web/services";return this.request("GET",t,e).then(function(e){var n=[];return e.content.map(function(e){return n.push(new Cr(t,e)),e}),n})}},{key:"deleteServices",value:function(e){var t=this.iportalUrl+"/web/services";return this.request("DELETE",t,{ids:e})}},{key:"queryService",value:function(e){var t=this.iportalUrl+"/web/services/"+e,n=new Cr(t);return n.load().then(function(){return n})}},{key:"queryMaps",value:function(e){return e instanceof dr?(t=this.withCredentials?this.iportalUrl+"/web/mycontent/maps":this.iportalUrl+"/web/maps",this.request("GET",t,e).then(function(e){var n={content:[]},r=[];return e.content&&e.content.length>0&&(e.content.map(function(e){return r.push(new Ar(t+"/"+e.id,e)),e}),n.content=r,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.total=e.total,n.totalPage=e.totalPage),n})):null;var t}},{key:"queryMapdashboards",value:function(e){return e instanceof Xr?(t=this.withCredentials?this.iportalUrl+"web/mycontent/mapdashboards":this.iportalUrl+"/web/mapdashboards",this.request("GET",t,e).then(function(e){var n={content:[]},r=[];return e.content&&e.content.length>0&&(e.content.map(function(e){return r.push(new Yr(t+"/"+e.id,e)),e}),n.content=r,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.total=e.total,n.totalPage=e.totalPage),n})):null;var t}},{key:"deleteMapdashboards",value:function(e){var t=this.iportalUrl+"/web/mapdashboardsworkspaces.json";return this.request("DELETE",t,{ids:encodeURI(JSON.stringify(e))})}},{key:"queryMapdashboard",value:function(e){var t=this.iportalUrl+"/web/mapdashboards/"+e,n=new Yr(t);return n.load().then(function(){return n})}},{key:"queryInsights",value:function(e){return e instanceof mr?(t=this.withCredentials?this.iportalUrl+"web/mycontent/insightsworkspaces":this.iportalUrl+"/web/insightsworkspaces",this.request("GET",t,e).then(function(e){var n={content:[]},r=[];return e.content&&e.content.length>0&&(e.content.map(function(e){return r.push(new Dr(t+"/"+e.id,e)),e}),n.content=r,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.total=e.total,n.totalPage=e.totalPage),n})):null;var t}},{key:"deleteInsights",value:function(e){var t=this.iportalUrl+"/web/insightsworkspaces.json";return this.request("DELETE",t,{ids:encodeURI(JSON.stringify(e))})}},{key:"queryInsight",value:function(e){var t=this.iportalUrl+"/web/insightsworkspaces/"+e,n=new Dr(t);return n.load().then(function(){return n})}},{key:"updateInsightAttrs",value:function(e,t){var n=this.iportalUrl+"/web/insightsworkspaces/"+e+"/attributes.json";return new Dr(n,t).update()}},{key:"deleteScenes",value:function(e){var t=this.iportalUrl+"/web/scenes.json";return this.request("DELETE",t,{ids:encodeURI(JSON.stringify(e))})}},{key:"queryScenes",value:function(e){return e instanceof vr?(t=this.withCredentials?this.iportalUrl+"/web/mycontent/scenes":this.iportalUrl+"/web/scenes",this.request("GET",t,e).then(function(e){var n={content:[]},r=[];return e.content&&e.content.length>0&&(e.content.map(function(e){return r.push(new Vr(t+"/"+e.id,e)),e}),n.content=r,n.currentPage=e.currentPage,n.pageSize=e.pageSize,n.total=e.total,n.totalPage=e.totalPage),n})):null;var t}},{key:"queryScene",value:function(e){var t=this.iportalUrl+"/web/scenes/"+e,n=new Vr(t);return n.load().then(function(){return n})}},{key:"updateSceneAttrs",value:function(e,t){var n=this.iportalUrl+"/web/scenes/"+e+"/attributes.json";return new Vr(n,t).update()}}])&&si(n.prototype,r),i&&si(n,i),t}();r.iPortal=fi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hi=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.permissionType="",this.entityType="",this.entityName="GUEST",this.entityId=null,be.extend(this,t)};function pi(e){return(pi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function di(e,t){return!t||"object"!==pi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mi(e){return(mi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vi(e,t){return(vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.iPortalShareEntity=hi;var gi=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=di(this,mi(t).call(this,e))).iportalUrl=e,n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vi(e,t)}(t,br),n=t,(r=[{key:"deleteResources",value:function(e){var t=e.resourceType.replace("_","").toLowerCase(),n=this.iportalUrl+"/web/"+t+"s.json?ids="+encodeURI(JSON.stringify(e.ids));return"data"===t?(n=this.iportalUrl+"/web/mycontent/datas/delete.json",this.request("POST",n,JSON.stringify(e.ids))):this.request("DELETE",n)}}])&&yi(n.prototype,r),i&&yi(n,i),t}();function bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.iPortalUser=gi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Si=function(){function e(t,n){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var r=this;this.EVENT_TYPES=["processCompleted","processFailed"],this.events=null,this.eventListeners=null,this.url=null,this.urls=null,this.proxy=null,this.serverType=null,this.index=null,this.length=null,this.options=null,this.totalTimes=null,this.POLLING_TIMES=3,this._processSuccess=null,this._processFailed=null,this.isInTheSameDomain=null,this.withCredentials=!1,be.isArray(t)?(r.urls=t,r.length=t.length,r.totalTimes=r.length,1===r.length?r.url=t[0]:(r.index=parseInt(Math.random()*r.length),r.url=t[r.index])):(r.totalTimes=1,r.url=t),be.isArray(t)&&!r.isServiceSupportPolling()&&(r.url=t[0],r.totalTimes=1),r.serverType=r.serverType||o.ISERVER,n=n||{},this.crossOrigin=n.crossOrigin,this.headers=n.headers,be.extend(this,n),r.isInTheSameDomain=be.isInTheSameDomain(r.url),r.events=new Jt(r,null,r.EVENT_TYPES,!0),r.eventListeners instanceof Object&&r.events.on(r.eventListeners),this.CLASS_NAME="SuperMap.CommonServiceBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;be.isArray(e.urls)&&(e.urls=null,e.index=null,e.length=null,e.totalTimes=null),e.url=null,e.options=null,e._processSuccess=null,e._processFailed=null,e.isInTheSameDomain=null,e.EVENT_TYPES=null,e.events&&(e.events.destroy(),e.events=null),e.eventListeners&&(e.eventListeners=null)}},{key:"request",value:function(e){var t=this;e.url=e.url||t.url,e.proxy=e.proxy||t.proxy,e.withCredentials=void 0!=e.withCredentials?e.withCredentials:t.withCredentials,e.crossOrigin=void 0!=e.crossOrigin?e.crossOrigin:t.crossOrigin,e.headers=e.headers||t.headers,e.isInTheSameDomain=t.isInTheSameDomain;var n=this.getCredential(e.url);if(n){var r=e.url.substring(e.url.length-1,e.url.length);e.url.indexOf("?")>-1&&"?"===r?e.url+=n.getUrlParameters():e.url.indexOf("?")>-1&&"?"!==r?e.url+="&"+n.getUrlParameters():e.url+="?"+n.getUrlParameters()}t.calculatePollingTimes(),t._processSuccess=e.success,t._processFailed=e.failure,e.scope=t,e.success=t.getUrlCompleted,e.failure=t.getUrlFailed,t.options=e,t._commit(t.options)}},{key:"getCredential",value:function(e){var t,n,r=e;switch(this.serverType){case o.IPORTAL:(t=(n=ir.getToken(r))?new Gt(n,"token"):null)||(t=(n=ir.getKey(r))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=ir.getKey(r))?new Gt(n,"key"):null;break;default:t=(n=ir.getToken(r))?new Gt(n,"token"):null}return t}},{key:"getUrlCompleted",value:function(e){this._processSuccess(e)}},{key:"getUrlFailed",value:function(e){this.totalTimes>0?(this.totalTimes--,this.ajaxPolling()):this._processFailed(e)}},{key:"ajaxPolling",value:function(){var e=this,t=e.options.url,n=/^http:\/\/([a-z]{9}|(\d+\.){3}\d+):\d{0,4}/;e.index=parseInt(Math.random()*e.length),e.url=e.urls[e.index],t=t.replace(n,n.exec(e.url)[0]),e.options.url=t,e.options.isInTheSameDomain=be.isInTheSameDomain(t),e._commit(e.options)}},{key:"calculatePollingTimes",value:function(){var e=this;e.times?e.totalTimes>e.POLLING_TIMES?e.times>e.POLLING_TIMES?e.totalTimes=e.POLLING_TIMES:e.totalTimes=e.times:e.times<e.totalTimes&&(e.totalTimes=e.times):e.totalTimes>e.POLLING_TIMES&&(e.totalTimes=e.POLLING_TIMES),e.totalTimes--}},{key:"isServiceSupportPolling",value:function(){return!("SuperMap.REST.ThemeService"===this.CLASS_NAME||"SuperMap.REST.EditFeaturesService"===this.CLASS_NAME)}},{key:"serviceProcessCompleted",value:function(e){e=be.transformResult(e),this.events.triggerEvent("processCompleted",{result:e})}},{key:"serviceProcessFailed",value:function(e){var t=(e=be.transformResult(e)).error||e;this.events.triggerEvent("processFailed",{error:t})}},{key:"_commit",value:function(e){"POST"!==e.method&&"PUT"!==e.method||(e.params&&(e.url=be.urlAppend(e.url,be.getParameterString(e.params||{}))),e.params=e.data),nr.commit(e.method,e.url,e.params,{headers:e.headers,withCredentials:e.withCredentials,crossOrigin:e.crossOrigin,timeout:e.async?0:null,proxy:e.proxy}).then(function(e){return e.text?e.text():e.json?e.json():e}).then(function(t){var n=t;("string"==typeof t&&(n=(new un).read(t)),(!n||n.error||n.code>=300&&304!==n.code)&&(n=n&&n.error?{error:n.error}:{error:n}),n.error)?(e.scope?ye.bind(e.failure,e.scope):e.failure)(n):(n.succeed=void 0==n.succeed||n.succeed,(e.scope?ye.bind(e.success,e.scope):e.success)(n))}).catch(function(t){(e.scope?ye.bind(e.failure,e.scope):e.failure)(t)})}}])&&bi(t.prototype,n),r&&bi(t,r),e}();function _i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.CommonServiceBase=Si;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wi=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters){var n=[];t.filters.split(",").map(function(e){return n.push('"'+e+'"'),e}),t.filters=n}this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.address=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null}}])&&_i(t.prototype,n),r&&_i(t,r),e}();function Oi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeoCodingParameter=wi;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xi=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t.filters){var n=[];t.filters.split(",").map(function(e){return n.push('"'+e+'"'),e}),t.filters=n}this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null,be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.x=null,this.y=null,this.fromIndex=null,this.toIndex=null,this.filters=null,this.prjCoordSys=null,this.maxReturn=null,this.geoDecodingRadius=null}}])&&Oi(t.prototype,n),r&&Oi(t,r),e}();function Ci(e){return(Ci="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ti(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pi(e,t){return!t||"object"!==Ci(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ei(e,t,n){return(Ei="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ki(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ki(e){return(ki=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoDecodingParameter=xi;var Ai=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pi(this,ki(t).call(this,e,n))).options=n||{},r.CLASS_NAME="SuperMap.AddressMatchService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Ei(ki(t.prototype),"destroy",this).call(this)}},{key:"code",value:function(e,t){t instanceof wi&&this.processAsync(e,t)}},{key:"decode",value:function(e,t){t instanceof xi&&this.processAsync(e,t)}},{key:"processAsync",value:function(e,t){var n=this,r=this.headers,i=this.crossOrigin,o=this.proxy;nr.get(e,t,{headers:r,crossOrigin:i,proxy:o}).then(function(e){return e.json()}).then(function(e){e?n.serviceProcessCompleted(e):n.serviceProcessFailed(e)}).catch(function(e){n.eventListeners.processFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e){Ei(ki(t.prototype),"serviceProcessCompleted",this).call(this,e)}},{key:"serviceProcessFailed",value:function(e){Ei(ki(t.prototype),"serviceProcessFailed",this).call(this,e)}}])&&Ti(n.prototype,r),i&&Ti(n,i),t}();function Li(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AddressMatchService=Ai;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ji=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.queryType=null,this.CLASS_NAME="SuperMap.AggQueryBuilderParameter",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.name=null,this.queryType=null}}])&&Li(t.prototype,n),r&&Li(t,r),e}();function Ni(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AggQueryBuilderParameter=ji;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ri=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.aggName=null,this.aggType=null,this.aggFieldName=null,this.subAgg=null,this.CLASS_NAME="SuperMap.AggregationParameter",be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.aggName=null,e.aggFieldName=null,e.aggType=null,e.subAgg&&(e.subAgg=null)}}])&&Ni(t.prototype,n),r&&Ni(t,r),e}();function Ii(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AggregationParameter=Ri;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Di=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.targetDatasourceName=null,this.totalGridName=null,this.diffuseDatasetGridName=null,this.durationDatasetGridName=null,this.directDatasetGridName=null,this.latitude=null,this.timeMode="MULTIDAYS",this.dayStart=null,this.dayEnd=null,this.hourStart=null,this.hourEnd=null,this.transmittance=null,this.hourInterval=null,this.dayInterval=null,this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.AreaSolarRadiationParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){var n={};for(var r in e){if("dataset"!==r)"latitude"===r||"timeMode"===r||"dayStart"===r||("dayEnd"===r||"hourStart"===r||"hourEnd"===r)||("transmittance"===r||"hourInterval"===r||"dayInterval"===r)?n[r]=e[r]:t[r]=e[r]}t.parameter=n}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&Ii(t.prototype,n),r&&Ii(t,r),e}();function Fi(e){return(Fi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ui(e,t){return!t||"object"!==Fi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gi(e,t,n){return(Gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zi(e){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vi(e,t){return(Vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.AreaSolarRadiationParameters=Di;var Hi=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ui(this,zi(t).call(this,e,n))).format=i.GEOJSON,r.CLASS_NAME="SuperMap.SpatialAnalystBase",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vi(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Gi(zi(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t,n=this;if((e=be.transformResult(e))&&n.format===i.GEOJSON&&"function"==typeof n.toGeoJSONResult)if(be.isArray(e)){for(var r=0;r<e.length;r++)e[r]=n.toGeoJSONResult(e[r]);t=e}else t=n.toGeoJSONResult(e);t||(t=e),n.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;e.result&&e.result.resultGeometry&&(e=e.result);var t=new Nn;if(e.recordsets)for(var n=0,r=e.recordsets,i=r.length;n<i;n++)r[n].features&&(r[n].features=t.toGeoJSON(r[n].features));else e.recordset&&e.recordset.features&&(e.recordset.features=t.toGeoJSON(e.recordset.features));return e.resultGeometry&&(e.resultGeometry=t.toGeoJSON(e.resultGeometry)),e.regions&&(e.regions=t.toGeoJSON(e.regions)),e}}])&&Bi(n.prototype,r),o&&Bi(n,o),t}();function Ji(e){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wi(e,t){return!t||"object"!==Ji(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qi(e,t,n){return(Qi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yi(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xi(e,t){return(Xi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SpatialAnalystBase=Hi;var Ki=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Wi(this,Yi(t).call(this,e,n))).CLASS_NAME="SuperMap.AreaSolarRadiationService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xi(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Qi(Yi(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Di){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var n={};e instanceof Di&&(t.url+="datasets/"+e.dataset+"/solarradiation"),Di.toObject(e,n);var r=be.toJSON(n);t.url+=".json?returnContent=true",t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&qi(n.prototype,r),i&&qi(n,i),t}();function Zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.AreaSolarRadiationService=Ki;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $i=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.exp=null,this.value=100,be.extend(this,t),this.CLASS_NAME="SuperMap.BufferDistance"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.exp=null,this.value=null}}])&&Zi(t.prototype,n),r&&Zi(t,r),e}();function eo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferDistance=$i;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var to=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endType=A.FLAT,this.leftDistance=new $i,this.rightDistance=new $i,this.semicircleLineSegment=4,this.radiusUnit=p.METER,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.BufferSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.endType=null,e.leftDistance&&(e.leftDistance.destroy(),e.leftDistance=null),e.rightDistance&&(e.rightDistance.destroy(),e.rightDistance=null),e.semicircleLineSegment=null,e.radiusUnit=null}}])&&eo(t.prototype,n),r&&eo(t,r),e}();function no(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferSetting=to;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ro=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.bufferSetting=new to,be.extend(this,t),this.CLASS_NAME="SuperMap.BufferAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.bufferSetting&&(this.bufferSetting.destroy(),this.bufferSetting=null)}}])&&no(t.prototype,n),r&&no(t,r),e}();function io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferAnalystParameters=ro;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectCount=1e3,this.dataset=null,this.dataReturnMode=I.RECORDSET_ONLY,this.deleteExistResultDataset=!0,be.extend(this,t),this.CLASS_NAME="SuperMap.DataReturnOption"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.expectCount=null,this.dataset=null,this.dataReturnMode=null,this.deleteExistResultDataset=null}}])&&io(t.prototype,n),r&&io(t,r),e}();function ao(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DataReturnOption=oo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var so=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.foreignTableName=null,this.joinFilter=null,this.joinType=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.JoinItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.foreignTableName=null,this.joinFilter=null,this.joinType=null}},{key:"toServerJSONObject",value:function(){var e={};return e=be.copyAttributes(e,this)}}])&&ao(t.prototype,n),r&&ao(t,r),e}();function lo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.JoinItem=so;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.alias=null,this.connect=null,this.dataBase=null,this.driver=null,this.engineType=null,this.exclusive=null,this.OpenLinkTable=null,this.password=null,this.readOnly=null,this.server=null,this.user=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.DatasourceConnectionInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.alias=null,e.connect=null,e.dataBase=null,e.driver=null,e.engineType=null,e.exclusive=null,e.OpenLinkTable=null,e.password=null,e.readOnly=null,e.server=null,e.user=null}}])&&lo(t.prototype,n),r&&lo(t,r),e}();function co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasourceConnectionInfo=uo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasourceConnectionInfo=null,this.foreignKeys=null,this.foreignTable=null,this.linkFields=null,this.linkFilter=null,this.name=null,this.primaryKeys=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.LinkItem"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasourceConnectionInfo instanceof uo&&(e.datasourceConnectionInfo.destroy(),e.datasourceConnectionInfo=null),e.foreignKeys=null,e.foreignTable=null,e.linkFields=null,e.linkFilter=null,e.name=null,e.primaryKeys=null}}])&&co(t.prototype,n),r&&co(t,r),e}();function ho(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.LinkItem=fo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var po=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.attributeFilter=null,this.name=null,this.joinItems=null,this.linkItems=null,this.ids=null,this.orderBy=null,this.groupBy=null,this.fields=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.FilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.attributeFilter=null,e.name=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.linkItems){for(var i=0,o=e.linkItems,a=o.length;i<a;i++)o[i].destroy();e.linkItems=null}e.ids=null,e.orderBy=null,e.groupBy=null,e.fields=null}}])&&ho(t.prototype,n),r&&ho(t,r),e}();function yo(e){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function go(e,t,n){return(go="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function bo(e){return(bo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function So(e,t){return(So=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FilterParameter=po;var _o=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=bo(t).call(this,e))||"object"!==yo(i)&&"function"!=typeof i?vo(r):i).dataset=null,n.filterQueryParameter=new po,n.resultSetting=new oo,n.isAttributeRetained=!0,n.isUnion=!1,be.extend(vo(n),e),n.CLASS_NAME="SuperMap.DatasetBufferAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&So(e,t)}(t,ro),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n)e.bufferSetting.radiusUnit=e.bufferSetting.radiusUnit.toUpperCase(),t.bufferAnalystParameter=e.bufferSetting;else if("resultSetting"===n)t.dataReturnOption=e.resultSetting;else{if("dataset"===n)continue;t[n]=e[n]}}}],(r=[{key:"destroy",value:function(){go(bo(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.isAttributeRetained=null,e.isUnion=null}}])&&mo(n.prototype,r),i&&mo(n,i),t}();function wo(e){return(wo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xo(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Co(e,t,n){return(Co="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=To(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function To(e){return(To=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e,t){return(Po=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.DatasetBufferAnalystParameters=_o;var Eo=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=To(t).call(this,e))||"object"!==wo(i)&&"function"!=typeof i?xo(r):i).sourceGeometry=null,n.sourceGeometrySRID=null,e&&be.extend(xo(n),e),n.CLASS_NAME=" SuperMap.GeometryBufferAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Po(e,t)}(t,ro),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("bufferSetting"===n){var r={};for(var i in e.bufferSetting)r[i]=e.bufferSetting[i];t.analystParameter=r}else"sourceGeometry"===n?t.sourceGeometry=Pn.fromGeometry(e.sourceGeometry):t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Co(To(t.prototype),"destroy",this).call(this);this.sourceGeometry&&(this.sourceGeometry.destroy(),this.sourceGeometry=null)}}])&&Oo(n.prototype,r),i&&Oo(n,i),t}();function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ao(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lo(e,t,n){return(Lo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jo(e){return(jo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function No(e,t){return(No=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometryBufferAnalystParameters=Eo;var Ro=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=jo(t).call(this,e,n))||"object"!==ko(o)&&"function"!=typeof o?Ao(i):o).mode=null,n&&be.extend(Ao(r),n),r.CLASS_NAME="SuperMap.BufferAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&No(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Lo(jo(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),e instanceof _o?(n.mode="datasets",n.url+="datasets/"+e.dataset+"/buffer",_o.toObject(e,t)):e instanceof Eo&&(n.mode="geometry",n.url+="geometry/buffer",Eo.toObject(e,t));var r=be.toJSON(t);n.url+=".json?returnContent=true",n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&Mo(n.prototype,r),i&&Mo(n,i),t}();function Io(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BufferAnalystService=Ro;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Do=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=j.UDB,this.datasetName="analystResult",this.datasourceInfo=null,this.outputPath="",be.extend(this,t),this.CLASS_NAME="SuperMap.OutputSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.type=null,e.datasetName=null,e.outputPath=null,e.datasourceInfo instanceof uo&&(e.datasourceInfo.destroy(),e.datasourceInfo=null)}}])&&Io(t.prototype,n),r&&Io(t,r),e}();function Fo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OutputSetting=Do;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bo=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=null,this.numericPrecision=1,this.rangeMode=b.EQUALINTERVAL,this.rangeCount="",this.colorGradientType=_.YELLOW_RED,be.extend(this,t),this.CLASS_NAME="SuperMap.MappingParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.items){if(e.items.length>0)for(var t in e.items)e.items[t].destroy(),e.items[t]=null;e.items=null}e.numericPrecision=null,e.rangeMode=null,e.rangeCount=null,e.colorGradientType=null}}])&&Fo(t.prototype,n),r&&Fo(t,r),e}();function Uo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MappingParameters=Bo;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Go=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName="",this.bounds="",this.distance="",this.distanceField="",this.distanceUnit=ee.METER,this.dissolveField="",this.output=null,this.mappingParameters=null,!t)return this;be.extend(this,t),this.CLASS_NAME="SuperMap.BuffersAnalystJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"bounds"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.bounds=null,this.distance=null,this.distanceField=null,this.distanceUnit=null,this.dissolveField=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Uo(t.prototype,n),r&&Uo(t,r),e}();function zo(e){return(zo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ho(e,t){return!t||"object"!==zo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jo(e,t,n){return(Jo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qo(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qo(e){return(qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wo(e,t){return(Wo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BuffersAnalystJobsParameter=Go;var Qo=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n||{}).EVENT_TYPES=["processCompleted","processFailed","processRunning"],(r=Ho(this,qo(t).call(this,e,n))).CLASS_NAME="SuperMap.ProcessingServiceBase",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wo(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Jo(qo(t.prototype),"destroy",this).call(this)}},{key:"getJobs",value:function(e){var t=this;nr.get(t._processUrl(e),null,{proxy:t.proxy}).then(function(e){return e.json()}).then(function(e){t.events.triggerEvent("processCompleted",{result:e})}).catch(function(e){t.eventListeners.processFailed({error:e})})}},{key:"addJob",value:function(e,t,n,r){var i=this,o=null;t&&t instanceof n&&(o=new Object,n.toObject(t,o));var a=Object.assign({"Content-Type":"application/x-www-form-urlencoded"},i.headers||{}),s={proxy:i.proxy,headers:a,withCredentials:i.withCredentials,crossOrigin:i.crossOrigin,isInTheSameDomain:i.isInTheSameDomain};nr.post(i._processUrl(e),JSON.stringify(o),s).then(function(e){return e.json()}).then(function(e){e.succeed?i.serviceProcessCompleted(e,r):i.serviceProcessFailed(e)}).catch(function(e){i.serviceProcessFailed({error:e})})}},{key:"serviceProcessCompleted",value:function(e,t){e=be.transformResult(e),t=t||1e3;var n=this;if(e)var r=setInterval(function(){nr.get(n._processUrl(e.newResourceLocation),{_t:(new Date).getTime()}).then(function(e){return e.json()}).then(function(e){n.events.triggerEvent("processRunning",{id:e.id,state:e.state}),"LOST"!==e.state.runState&&"KILLED"!==e.state.runState&&"FAILED"!==e.state.runState||(clearInterval(r),n.events.triggerEvent("processFailed",{error:e.state.errorMsg,state:e.state.runState})),"FINISHED"===e.state.runState&&e.setting.serviceInfo&&(clearInterval(r),n.events.triggerEvent("processCompleted",{result:e}))}).catch(function(e){clearInterval(r),n.events.triggerEvent("processFailed",{error:e})})},t)}},{key:"serviceProcessFailed",value:function(e){Jo(qo(t.prototype),"serviceProcessFailed",this).call(this,e)}},{key:"_processUrl",value:function(e){return-1===e.indexOf(".json")&&(e+=".json"),ir.getToken(e)&&(e+="?token="+ir.getToken(e)),e}}])&&Vo(n.prototype,r),i&&Vo(n,i),t}();function Yo(e){return(Yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(e,t){return!t||"object"!==Yo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zo(e,t,n){return(Zo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$o(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $o(e){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ea(e,t){return(ea=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ProcessingServiceBase=Qo;var ta=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ko(this,$o(t).call(this,e,n))).url+="/spatialanalyst/buffers",r.CLASS_NAME="SuperMap.BuffersAnalystJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ea(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){Zo($o(t.prototype),"destroy",this).call(this)}},{key:"getBuffersJobs",value:function(){Zo($o(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getBuffersJob",value:function(e){Zo($o(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addBuffersJob",value:function(e,n){Zo($o(t.prototype),"addJob",this).call(this,this.url,e,Go,n)}}])&&Xo(n.prototype,r),i&&Xo(n,i),t}();function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.BuffersAnalystJobsService=ta;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ra=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.BurstPipelineAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=null}}])&&na(t.prototype,n),r&&na(t,r),e}();function ia(e){return(ia="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function aa(e,t){return!t||"object"!==ia(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sa(e,t,n){return(sa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=la(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function la(e){return(la=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ua(e,t){return(ua=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BurstPipelineAnalystParameters=ra;var ca=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=aa(this,la(t).call(this,e,n))).format=i.GEOJSON,r.CLASS_NAME="SuperMap.NetworkAnalystServiceBase",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ua(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){sa(la(t.prototype),"destroy",this).call(this),this.format=null}},{key:"serviceProcessCompleted",value:function(e){var t;(e=be.transformResult(e))&&this.format===i.GEOJSON&&"function"==typeof this.toGeoJSONResult&&(t=this.toGeoJSONResult(e)),t||(t=e),this.events.triggerEvent("processCompleted",{result:t})}},{key:"toGeoJSONResult",value:function(e){return null}}])&&oa(n.prototype,r),o&&oa(n,o),t}();function fa(e){return(fa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pa(e,t){return!t||"object"!==fa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ya(e,t,n){return(ya="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=da(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function da(e){return(da=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ma(e,t){return(ma=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.NetworkAnalystServiceBase=ca;var va=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=pa(this,da(t).call(this,e,n))).CLASS_NAME="SuperMap.BurstPipelineAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ma(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){ya(da(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(!(e instanceof ra))return null;var t,n=this,r=n.url.substr(n.url.length-1,1);if(n.url=n.url+("/"===r?"burstAnalyse":"/burstAnalyse")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");if(null===e.edgeID&&null===e.nodeID)throw new Error("edgeID and nodeID cannot be null at the same time.");null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&ha(n.prototype,r),i&&ha(n,i),t}();function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sa(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function _a(e,t,n){return(_a="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=wa(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function wa(e){return(wa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Oa(e,t){return(Oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.BurstPipelineAnalystService=va;var xa=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Sa(this,wa(t).call(this,e,n))).CLASS_NAME="SuperMap.ChartFeatureInfoSpecsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Oa(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){_a(wa(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="chartFeatureInfoSpecs.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&ba(n.prototype,r),i&&ba(n,i),t}();function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartFeatureInfoSpecsService=xa;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ta=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isQueryPoint=null,this.isQueryLine=null,this.isQueryRegion=null,this.attributeFilter=null,this.chartFeatureInfoSpecCode=null,be.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryFilterParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isQueryPoint=null,e.isQueryLine=null,e.isQueryRegion=null,e.attributeFilter=null,e.chartFeatureInfoSpecCode=null}},{key:"toJson",value:function(){var e="";return e+='"isQueryPoint":'+this.isQueryPoint+",",e+='"isQueryLine":'+this.isQueryLine+",",e+='"isQueryRegion":'+this.isQueryRegion+",",this.attributeFilter&&(e+='"attributeFilter": "'+this.attributeFilter+'",'),e="{"+(e+='"chartFeatureInfoSpecCode":'+this.chartFeatureInfoSpecCode)+"}"}}])&&Ca(t.prototype,n),r&&Ca(t,r),e}();function Pa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartQueryFilterParameter=Ta;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ea=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.queryMode=null,this.bounds=null,this.chartLayerNames=null,this.chartQueryFilterParameters=null,this.returnContent=!0,this.startRecord=0,this.expectCount=null,be.extend(this,t),this.CLASS_NAME="SuperMap.ChartQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.queryMode=null,e.bounds=null,e.chartLayerNames=null,e.chartQueryFilterParameters=null,e.returnContent=!0,e.startRecord=0,e.expectCount=null}},{key:"getVariablesJson",value:function(){var e="";if(e+='"queryMode":"'+this.queryMode+'",',this.chartLayerNames&&this.chartLayerNames.length){for(var t=[],n=this.chartLayerNames.length,r=0;r<n;r++)t.push('"'+this.chartLayerNames[r]+'"');e+='"chartLayerNames":'+("["+t.join(",")+"]")+","}if("ChartBoundsQuery"===this.queryMode&&this.bounds&&(e+='"bounds":{"leftBottom":{"x":'+this.bounds.left+',"y":'+this.bounds.bottom+'},"rightTop":{"x":'+this.bounds.right+',"y":'+this.bounds.top+"}},"),this.chartQueryFilterParameters&&this.chartQueryFilterParameters.length){for(var i=[],o=this.chartQueryFilterParameters.length,a=0;a<o;a++){var s=this.chartQueryFilterParameters[a];s instanceof Ta&&i.push(s.toJson())}var l="["+i.join(",")+"]";l='"chartQueryParams":'+l+",",l+='"startRecord":'+this.startRecord+",",e+='"chartQueryParameters":'+(l="{"+(l+='"expectCount":'+this.expectCount)+"}")}return e="{"+e+"}"}}])&&Pa(t.prototype,n),r&&Pa(t,r),e}();function ka(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartQueryParameters=Ea;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ma=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.customParams=null,this.prjCoordSys=null,this.expectCount=1e5,this.networkType=a.LINE,this.queryOption=s.ATTRIBUTEANDGEOMETRY,this.queryParams=null,this.startRecord=0,this.holdTime=10,this.returnCustomResult=!1,this.returnFeatureWithFieldCaption=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.QueryParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.customParams=null,e.expectCount=null,e.networkType=null,e.queryOption=null,e.queryParams){for(var t=0,n=e.queryParams,r=n.length;t<r;t++)n[t].destroy();e.queryParams=null}e.startRecord=null,e.holdTime=null,e.returnCustomResult=null,e.prjCoordSys=null}}])&&ka(t.prototype,n),r&&ka(t,r),e}();function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function La(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ja(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?Ra(e):t}function Na(e){return(Na=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ra(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ia(e,t){return(Ia=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryParameters=Ma;var Da=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=ja(this,Na(t).call(this,e,n)),n=n||{},r.returnContent=null,r.format=i.GEOJSON,be.extend(Ra(r),n);var o,a=Ra(r);return n.format&&(a.format=n.format.toUpperCase()),a.url?(o=a.url.substr(a.url.length-1,1),a.url+="/"===o?"queryResults.json?":"/queryResults.json?",r.CLASS_NAME="SuperMap.ChartQueryService",r):ja(r)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ia(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Si.prototype.destroy.apply(this,arguments),this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Ea){var t,n=this;n.returnContent=e.returnContent,t=e.getVariablesJson(),n.returnContent&&(n.url+="returnContent="+n.returnContent),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if((e=be.transformResult(e))&&e.recordsets&&this.format===i.GEOJSON)for(var t=0,n=e.recordsets,r=n.length;t<r;t++)if(n[t].features){var o=new Nn;n[t].features=o.toGeoJSON(n[t].features)}this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new Ma({queryMode:e.queryMode,bounds:e.bounds,chartLayerNames:e.chartLayerNames,chartQueryFilterParameters:e.chartQueryFilterParameters,returnContent:e.returnContent})}}])&&La(n.prototype,r),o&&La(n,o),t}();function Fa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ChartQueryService=Da;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ba=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipDatasetName=null,this.clipDatasourceName=null,this.clipRegion=null,this.isClipInRegion=!0,this.isExactClip=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ClipParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipDatasetName=null,e.clipDatasourceName=null,e.clipRegion=null,e.isClipInRegion=null,e.isExactClip=null}},{key:"toJSON",value:function(){return be.toJSON({isClipInRegion:this.isClipInRegion,clipDatasetName:this.clipDatasetName,clipDatasourceName:this.clipDatasourceName,isExactClip:this.isExactClip,clipRegion:Pn.fromGeometry(this.clipRegion)})}}])&&Fa(t.prototype,n),r&&Fa(t,r),e}();function Ua(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ClipParameter=Ba;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ga=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.elevation=null,this.color=null,be.extend(this,t);var n=this.color;n&&(this.color=new fn(n.red,n.green,n.blue)),this.CLASS_NAME="SuperMap.ColorDictionary"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return e=be.copyAttributes(e,this)}}])&&Ua(t.prototype,n),r&&Ua(t,r),e}();function za(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ColorDictionary=Ga;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Va=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.returnEdgeFeatures=!1,this.returnEdgeGeometry=!1,this.returnEdgeIDs=!1,this.returnNodeFeatures=!1,this.returnNodeGeometry=!1,this.returnNodeIDs=!1,this.returnPathGuides=!1,this.returnRoutes=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystResultSetting")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.returnEdgeFeatures=null,e.returnEdgeGeometry=null,e.returnEdgeIDs=null,e.returnNodeFeatures=null,e.returnNodeGeometry=null,e.returnNodeIDs=null,e.returnPathGuides=null,e.returnRoutes=null}}])&&za(t.prototype,n),r&&za(t,r),e}();function Ha(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransportationAnalystResultSetting=Va;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ja=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.barrierEdgeIDs=null,this.barrierNodeIDs=null,this.barrierPoints=null,this.weightFieldName=null,this.turnWeightField=null,this.resultSetting=new Va,be.extend(this,t),this.CLASS_NAME="SuperMap.TransportationAnalystParameter")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.barrierEdgeIDs=null,e.barrierNodeIDs=null,e.weightFieldName=null,e.turnWeightField=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.barrierPoints&&e.barrierPoints.length)for(var t in e.barrierPoints)e.barrierPoints[t].destroy();e.barrierPoints=null}}])&&Ha(t.prototype,n),r&&Ha(t,r),e}();function qa(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransportationAnalystParameter=Ja;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wa=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Ja,be.extend(this,t),this.CLASS_NAME="SuperMap.ComputeWeightMatrixParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&qa(t.prototype,n),r&&qa(t,r),e}();function Qa(e){return(Qa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xa(e,t){return!t||"object"!==Qa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ka(e,t,n){return(Ka="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Za(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Za(e){return(Za=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $a(e,t){return($a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ComputeWeightMatrixParameters=Wa;var es=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Xa(this,Za(t).call(this,e,n))).CLASS_NAME="SuperMap.ComputeWeightMatrixService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$a(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){Ka(Za(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Wa){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"weightmatrix":"/weightmatrix")+".json?",t={parameter:be.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}}])&&Ya(n.prototype,r),i&&Ya(n,i),t}();function ts(e){return(ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ns(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rs(e){return(rs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function is(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function os(e,t){return(os=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ComputeWeightMatrixService=es;var as=function(e){function t(e,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=n||{}).EVENT_TYPES=["broadcastSocketConnected","broadcastSocketError","broadcastFailed","broadcastSucceeded","subscribeSocketConnected","subscribeSocketError","messageSucceeded","setFilterParamSucceeded"],i=this,(r=!(o=rs(t).call(this,e,n))||"object"!==ts(o)&&"function"!=typeof o?is(i):o).geometry=null,r.prjCoordSys=null,r.excludeField=null;var a=is(r);return"/"!==a.url.substr(a.url.length-1,1)&&(a.url+="/"),be.extend(a,n),r.CLASS_NAME="SuperMap.DataFlowService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&os(e,t)}(t,Si),n=t,(r=[{key:"initBroadcast",value:function(){var e=this;return this.broadcastWebSocket=this._connect(e.url+"broadcast"),this.broadcastWebSocket.onopen=function(t){e.broadcastWebSocket.isOpen=!0,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onclose=function(t){e.broadcastWebSocket.isOpen=!1,t.eventType="broadcastSocketConnected",e.events.triggerEvent("broadcastSocketConnected",t)},this.broadcastWebSocket.onerror=function(t){t.eventType="broadcastSocketError",e.events.triggerEvent("broadcastSocketError",t)},this}},{key:"broadcast",value:function(e){this.broadcastWebSocket&&this.broadcastWebSocket.isOpen?(this.broadcastWebSocket.send(JSON.stringify(e)),this.events.triggerEvent("broadcastSucceeded")):this.events.triggerEvent("broadcastFailed")}},{key:"initSubscribe",value:function(){var e=this;return this.subscribeWebSocket=this._connect(this.url+"subscribe"),this.subscribeWebSocket.onopen=function(t){e.subscribeWebSocket.send(e._getFilterParams()),t.eventType="subscribeSocketConnected",e.events.triggerEvent("subscribeSocketConnected",t)},this.subscribeWebSocket.onerror=function(t){t.eventType="subscribeSocketError",e.events.triggerEvent("subscribeSocketError",t)},this.subscribeWebSocket.onmessage=function(t){e._onMessage(t)},this}},{key:"setExcludeField",value:function(e){return this.excludeField=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"setGeometry",value:function(e){return this.geometry=e,this.subscribeWebSocket.send(this._getFilterParams()),this}},{key:"unSubscribe",value:function(){this.subscribeWebSocket&&(this.subscribeWebSocket.close(),this.subscribeWebSocket=null)}},{key:"unBroadcast",value:function(){this.broadcastWebSocket&&(this.broadcastWebSocket.close(),this.broadcastWebSocket=null)}},{key:"destroy",value:function(){Si.prototype.destroy.apply(this,arguments);this.geometry=null,this.prjCoordSys=null,this.excludeField=null,this.unBroadcast(),this.unSubscribe()}},{key:"_getFilterParams",value:function(){var e={filterParam:{prjCoordSys:this.prjCoordSys,excludeField:this.excludeField,geometry:this.geometry}};return be.toJSON(e)}},{key:"_onMessage",value:function(e){if(e.data&&e.data.indexOf("filterParam")>=0){var t=JSON.parse(e.data);return e.filterParam=t,e.eventType="setFilterParamSucceeded",void this.events.triggerEvent("setFilterParamSucceeded",e)}var n=JSON.parse(e.data);e.featureResult=n,e.eventType="messageSucceeded",this.events.triggerEvent("messageSucceeded",e)}},{key:"_connect",value:function(e){return e=this._appendCredentials(e),"WebSocket"in window?new WebSocket(e):"MozWebSocket"in window?new(0,window.MozWebSocket)(e):(console.log("no WebSocket"),null)}},{key:"_appendCredentials",value:function(e){var t=ir.getToken(e);return t&&(e+="?token="+t),e}}])&&ns(n.prototype,r),i&&ns(n,i),t}();function ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DataFlowService=as;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ls=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.dataSourceName=null,this.description=null,this.encodeType=null,this.isReadOnly=null,this.name=null,this.prjCoordSys=null,this.tableName=null,this.type=null,be.extend(this,t);var n=this.bounds;n&&(this.bounds=new Oe(n.leftBottom.x,n.leftBottom.y,n.rightTop.x,n.rightTop.y)),this.CLASS_NAME="SuperMap.DatasetInfo"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&ss(t.prototype,n),r&&ss(t,r),e}();function us(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetInfo=ls;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.operation=L.UNION,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.OverlayAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.operation=null}}])&&us(t.prototype,n),r&&us(t,r),e}();function fs(e){return(fs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ps(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ys(e,t,n){return(ys="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ds(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ms(e,t){return(ms=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayAnalystParameters=cs;var vs=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=ds(t).call(this,e))||"object"!==fs(i)&&"function"!=typeof i?ps(r):i).operateDataset=null,n.operateDatasetFields=[],n.operateDatasetFilter=new po,n.operateRegions=[],n.sourceDataset=null,n.sourceDatasetFields=[],n.sourceDatasetFilter=new po,n.tolerance=0,n.resultSetting=new oo,be.extend(ps(n),e),n.CLASS_NAME="SuperMap.DatasetOverlayAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ms(e,t)}(t,cs),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceDataset"!==n)if("operateRegions"===n){t.operateRegions=[];var r=e.operateRegions;for(var i in r)r.hasOwnProperty(i)&&(t.operateRegions[i]=Pn.fromGeometry(r[i]))}else"resultSetting"===n?t.dataReturnOption=e.resultSetting:t[n]=e[n]}}],(r=[{key:"destroy",value:function(){ys(ds(t.prototype),"destroy",this).call(this);var e=this;if(e.operateDataset=null,e.operateDatasetFields=null,e.operateDatasetFilter&&(e.operateDatasetFilter.destroy(),e.operateDatasetFilter=null),e.operateRegions){for(var n=0,r=e.operateRegions,i=r.length;n<i;n++)r[n].destroy();e.operateRegions=null}e.sourceDataset=null,e.sourceDatasetFields=null,e.sourceDatasetFilter&&(e.sourceDatasetFilter.destroy(),e.sourceDatasetFilter=null),e.tolerance=null,e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null)}}])&&hs(n.prototype,r),i&&hs(n,i),t}();function gs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetOverlayAnalystParameters=vs;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.clipRegion=null,this.datumValue=0,this.expectedZValues=null,this.interval=0,this.resampleTolerance=0,this.smoothMethod=N.BSPLINE,this.smoothness=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParametersSetting"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.datumValue=null,e.expectedZValues=null,e.interval=null,e.resampleTolerance=null,e.smoothMethod=null,e.smoothness=null}},{key:"toJSON",value:function(){var e="'datumValue':"+be.toJSON(this.datumValue);if(e+=",'interval':"+be.toJSON(this.interval),e+=",'resampleTolerance':"+be.toJSON(this.resampleTolerance),e+=",'smoothMethod':"+be.toJSON(this.smoothMethod),e+=",'smoothness':"+be.toJSON(this.smoothness),null!=this.expectedZValues&&(e+=",'expectedZValues':"+be.toJSON(this.expectedZValues)),null!=this.clipRegion){var t=this.clipRegion;this.clipRegion instanceof Ce&&this.clipRegion.components&&(t=Pn.fromGeometry(this.clipRegion)),e+=",'clipRegion':"+be.toJSON(t)}return"{"+e+"}"}}])&&gs(t.prototype,n),r&&gs(t,r),e}();function Ss(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SurfaceAnalystParametersSetting=bs;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.resolution=0,this.extractParameter=new bs,this.resultSetting=new oo,this.surfaceAnalystMethod=R.ISOLINE,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.SurfaceAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.resolution=null,e.extractParameter&&(e.extractParameter.destroy(),e.extractParameter=null),e.resultSetting&&(e.resultSetting.destroy(),e.resultSetting=null),e.surfaceAnalystMethod=null}}])&&Ss(t.prototype,n),r&&Ss(t,r),e}();function ws(e){return(ws="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Os(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Cs(e,t,n){return(Cs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ts(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ts(e){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SurfaceAnalystParameters=_s;var Es=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Ts(t).call(this,e))||"object"!==ws(i)&&"function"!=typeof i?xs(r):i).dataset=null,n.filterQueryParameter=new po,n.zValueFieldName=null,e&&be.extend(xs(n),e),n.CLASS_NAME="SuperMap.DatasetSurfaceAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(t,_s),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("filterQueryParameter"===n&&(t.filterQueryParameter=e.filterQueryParameter),"extractParameter"===n)e.extractParameter.clipRegion instanceof Ce&&e.extractParameter.clipRegion.components&&(e.extractParameter.clipRegion=Pn.fromGeometry(e.extractParameter.clipRegion)),t.extractParameter=e.extractParameter;else{if("dataset"===n)continue;if("surfaceAnalystMethod"===n)continue;t[n]=e[n]}}}],(r=[{key:"destroy",value:function(){Cs(Ts(t.prototype),"destroy",this).call(this);var e=this;e.dataset=null,e.filterQueryParameter&&(e.filterQueryParameter.destroy(),e.filterQueryParameter=null),e.zValueFieldName=null}}])&&Os(n.prototype,r),i&&Os(n,i),t}();function ks(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetSurfaceAnalystParameters=Es;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ms=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.clipRegion=null,this.createResultDataset=!1,this.resultDatasetName=null,this.resultDatasourceName=null,this.returnResultRegion=!0,be.extend(this,t),this.CLASS_NAME="SuperMap.ThiessenAnalystParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.clipRegion&&(e.clipRegion.destroy(),e.clipRegion=null),e.createResultDataset=null,e.resultDatasetName=null,e.resultDatasourceName=null,e.returnResultRegion=null}}])&&ks(t.prototype,n),r&&ks(t,r),e}();function As(e){return(As="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ls(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function js(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ns(e,t,n){return(Ns="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Rs(e){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Is(e,t){return(Is=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThiessenAnalystParameters=Ms;var Ds=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Rs(t).call(this,e))||"object"!==As(i)&&"function"!=typeof i?js(r):i).filterQueryParameter=null,n.dataset=null,e&&be.extend(js(n),e),n.CLASS_NAME="SuperMap.DatasetThiessenAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Is(e,t)}(t,Ms),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=Pn.fromGeometry(e.clipRegion):t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Ns(Rs(t.prototype),"destroy",this).call(this);this.filterQueryParameter&&(this.filterQueryParameter.destroy(),this.filterQueryParameter=null)}}])&&Ls(n.prototype,r),i&&Ls(n,i),t}();function Fs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DatasetThiessenAnalystParameters=Ds;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Bs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.bounds=null,this.fieldName=null,this.resultGridDatasetResolution=null,this.searchRadius=null,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.DensityKernelAnalystParameters"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.fieldName=null,e.resultGridDatasetResolution=null,e.searchRadius=null,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&Fs(t.prototype,n),r&&Fs(t,r),e}();function Us(e){return(Us="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vs(e,t,n){return(Vs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hs(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hs(e){return(Hs=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Js(e,t){return(Js=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.DensityKernelAnalystParameters=Bs;var qs=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Hs(t).call(this,e,n))||"object"!==Us(o)&&"function"!=typeof o?zs(i):o).mode=null,n&&be.extend(zs(r),n),r.CLASS_NAME="SuperMap.DensityAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Js(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Vs(Hs(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var n=new Object;e instanceof Bs&&(t.url+="datasets/"+e.dataset+"/densityanalyst/kernel",t.mode="kernel"),Bs.toObject(e,n);var r=be.toJSON(n);t.url+=".json?returnContent=true",t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&Gs(n.prototype,r),i&&Gs(n,i),t}();function Ws(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.DensityAnalystService=qs;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Qs=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataSourceName=null,this.dataSetName=null,this.features=null,this.editType=D.ADD,this.IDs=null,this.returnContent=!1,this.isUseBatch=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.EditFeaturesParameters"}var t,n,r;return t=e,r=[{key:"toJsonParameters",value:function(e){var t,n,r;if(e.editType===D.DELETE){if(null===e.IDs)return;r={ids:e.IDs}}else if(r=[],e.features){n=e.features.length;for(var i=0;i<n;i++)(t=e.features[i]).geometry=Pn.fromGeometry(t.geometry),r.push(t)}return be.toJSON(r)}}],(n=[{key:"destroy",value:function(){var e=this;e.dataSourceName=null,e.dataSetName=null,e.features=null,e.editType=null,e.IDs=null,e.returnContent=null}}])&&Ws(t.prototype,n),r&&Ws(t,r),e}();function Ys(e){return(Ys="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ks(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zs(e,t,n){return(Zs="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$s(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $s(e){return($s=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function el(e,t){return(el=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.EditFeaturesParameters=Qs;var tl=function(e){function t(e,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=$s(t).call(this,e,n))||"object"!==Ys(o)&&"function"!=typeof o?Ks(i):o).returnContent=!1,r.isUseBatch=!1,n&&be.extend(Ks(r),n);var a,s=Ks(r);return a=s.url.substr(s.url.length-1,1),s.url+="/"==a?"features.json?":"/features.json?",r.CLASS_NAME="SuperMap.EditFeaturesService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&el(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Zs($s(t.prototype),"destroy",this).call(this);this.returnContent=null,this.isUseBatch=null,this.fromIndex=null,this.toIndex=null}},{key:"processAsync",value:function(e){if(e instanceof Qs){var t=this,n="POST",r="",i=e.editType,o=null;t.returnContent=e.returnContent,t.isUseBatch=e.isUseBatch,o=Qs.toJsonParameters(e),i===D.DELETE?(r=be.toJSON(e.IDs),t.url+="ids="+r,n="DELETE",o=r):i===D.UPDATE?n="PUT":(t.isUseBatch&&(t.url+="isUseBatch="+t.isUseBatch,t.returnContent=!1),t.returnContent&&(t.url+="returnContent="+t.returnContent,n="POST")),t.request({method:n,data:o,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Xs(n.prototype,r),i&&Xs(n,i),t}();function nl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.EditFeaturesService=tl;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rl=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalyst3DParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeID=null,this.nodeID=null,this.weightName=null,this.isUncertainDirectionValid=null}}])&&nl(t.prototype,n),r&&nl(t,r),e}();function il(e){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function al(e,t){return!t||"object"!==il(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sl(e,t,n){return(sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ll(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ll(e){return(ll=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ul(e,t){return(ul=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalyst3DParameters=rl;var cl=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=al(this,ll(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ul(e,t)}(t,rl),n=t,(r=[{key:"destroy",value:function(){sl(ll(t.prototype),"destroy",this).call(this)}}])&&ol(n.prototype,r),i&&ol(n,i),t}();function fl(e){return(fl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pl(e,t){return!t||"object"!==fl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function yl(e){return(yl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dl(e,t){return(dl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystSinks3DParameters=cl;var ml=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=pl(this,yl(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystSinks3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dl(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Si.prototype.destroy.apply(this,arguments)}},{key:"processAsync",value:function(e){if(e instanceof cl){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"sinks":"/sinks")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&hl(n.prototype,r),i&&hl(n,i),t}();function vl(e){return(vl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bl(e,t){return!t||"object"!==vl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sl(e,t,n){return(Sl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_l(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _l(e){return(_l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function wl(e,t){return(wl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystSinks3DService=ml;var Ol=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=bl(this,_l(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystSources3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wl(e,t)}(t,rl),n=t,(r=[{key:"destroy",value:function(){Sl(_l(t.prototype),"destroy",this).call(this)}}])&&gl(n.prototype,r),i&&gl(n,i),t}();function xl(e){return(xl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tl(e,t){return!t||"object"!==xl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Pl(e,t,n){return(Pl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=El(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function El(e){return(El=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kl(e,t){return(kl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystSources3DParameters=Ol;var Ml=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Tl(this,El(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystSources3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kl(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Pl(El(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ol){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"sources":"/sources")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&Cl(n.prototype,r),i&&Cl(n,i),t}();function Al(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FacilityAnalystSources3DService=Ml;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ll=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.sourceNodeIDs=null,this.edgeID=null,this.nodeID=null,this.isUncertainDirectionValid=!1,this.queryType=null,be.extend(this,t),this.CLASS_NAME="SuperMap.FacilityAnalystStreamParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.edgeID=null,e.nodeID=null,e.weightName=null,e.isUncertainDirectionValid=null,e.type=null}}])&&Al(t.prototype,n),r&&Al(t,r),e}();function jl(e){return(jl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rl(e,t){return!t||"object"!==jl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Il(e,t,n){return(Il="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Dl(e){return(Dl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fl(e,t){return(Fl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystStreamParameters=Ll;var Bl=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Rl(this,Dl(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystStreamService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fl(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){Il(Dl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ll){var t,n=this,r=n.url.substr(n.url.length-1,1);if(0===e.queryType)n.url=n.url+("/"===r?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?";else{if(1!==e.queryType)return;n.url=n.url+("/"===r?"downstreamcirticalfaclilities":"/downstreamcirticalfaclilities")+".json?"}t={sourceNodeIDs:e.sourceNodeIDs,isUncertainDirectionValid:e.isUncertainDirectionValid},null!==e.edgeID&&null!==e.nodeID||null===e.edgeID&&null===e.nodeID||(null!==e.edgeID?t.edgeID=e.edgeID:t.nodeID=e.nodeID,n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed}))}}}])&&Nl(n.prototype,r),i&&Nl(n,i),t}();function Ul(e){return(Ul="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zl(e,t){return!t||"object"!==Ul(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vl(e,t,n){return(Vl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hl(e){return(Hl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jl(e,t){return(Jl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystStreamService=Bl;var ql=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=zl(this,Hl(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jl(e,t)}(t,rl),n=t,(r=[{key:"destroy",value:function(){Vl(Hl(t.prototype),"destroy",this).call(this)}}])&&Gl(n.prototype,r),i&&Gl(n,i),t}();function Wl(e){return(Wl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ql(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yl(e,t){return!t||"object"!==Wl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xl(e,t,n){return(Xl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kl(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Kl(e){return(Kl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zl(e,t){return(Zl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTracedown3DParameters=ql;var $l=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Yl(this,Kl(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystTracedown3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zl(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Xl(Kl(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof ql){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"tracedownresult":"/tracedownresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&Ql(n.prototype,r),i&&Ql(n,i),t}();function eu(e){return(eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nu(e,t){return!t||"object"!==eu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ru(e,t,n){return(ru="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function iu(e){return(iu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ou(e,t){return(ou=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTracedown3DService=$l;var au=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=nu(this,iu(t).call(this,e))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ou(e,t)}(t,rl),n=t,(r=[{key:"destroy",value:function(){ru(iu(t.prototype),"destroy",this).call(this)}}])&&tu(n.prototype,r),i&&tu(n,i),t}();function su(e){return(su="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uu(e,t){return!t||"object"!==su(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cu(e,t,n){return(cu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fu(e){return(fu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hu(e,t){return(hu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTraceup3DParameters=au;var pu=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=uu(this,fu(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystTraceup3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hu(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){cu(fu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof au){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"traceupresult":"/traceupresult")+".json?",t={edgeID:e.edgeID,nodeID:e.nodeID,weightName:e.weightName,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&lu(n.prototype,r),i&&lu(n,i),t}();function yu(e){return(yu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function vu(e,t,n){return(vu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function gu(e){return(gu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bu(e,t){return(bu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystTraceup3DService=pu;var Su=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=gu(t).call(this,e))||"object"!==yu(i)&&"function"!=typeof i?mu(r):i,e=e||{},n.sourceNodeIDs=null,be.extend(mu(n),e),n.CLASS_NAME="SuperMap.FacilityAnalystUpstream3DParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bu(e,t)}(t,rl),n=t,(r=[{key:"destroy",value:function(){vu(gu(t.prototype),"destroy",this).call(this),this.sourceNodeIDs=null}}])&&du(n.prototype,r),i&&du(n,i),t}();function _u(e){return(_u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ou(e,t){return!t||"object"!==_u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xu(e,t,n){return(xu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Cu(e){return(Cu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tu(e,t){return(Tu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystUpstream3DParameters=Su;var Pu=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ou(this,Cu(t).call(this,e,n))).CLASS_NAME="SuperMap.FacilityAnalystUpstream3DService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tu(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){xu(Cu(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Su){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"upstreamcirticalfaclilities":"/upstreamcirticalfaclilities")+".json?",t={sourceNodeIDs:e.sourceNodeIDs,edgeID:e.edgeID,nodeID:e.nodeID,isUncertainDirectionValid:e.isUncertainDirectionValid},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&wu(n.prototype,r),i&&wu(n,i),t}();function Eu(e){return(Eu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ku(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Au(e,t,n){return(Au="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Lu(e){return(Lu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ju(e,t){return(ju=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FacilityAnalystUpstream3DService=Pu;var Nu=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Lu(t).call(this,e))||"object"!==Eu(i)&&"function"!=typeof i?Mu(r):i).filterParam=null,n.aggType=ie.FILTER,n.CLASS_NAME="SuperMap.FilterAggParameter",be.extend(Mu(n),e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ju(e,t)}(t,Ri),n=t,(r=[{key:"destroy",value:function(){Au(Lu(t.prototype),"destroy",this).call(this);this.filterParam&&(this.filterParam=null)}}])&&ku(n.prototype,r),i&&ku(n,i),t}();function Ru(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FilterAggParameter=Nu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Iu=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasource=null,this.dataset=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.FieldParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasource=null,this.dataset=null}}])&&Ru(t.prototype,n),r&&Ru(t,r),e}();function Du(e){return(Du="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bu(e){return(Bu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Uu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gu(e,t){return(Gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FieldParameters=Iu;var zu=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Bu(t).call(this,e))||"object"!==Du(i)&&"function"!=typeof i?Uu(r):i).fieldName=null,n.statisticMode=null,e&&be.extend(Uu(n),e),n.CLASS_NAME="SuperMap.FieldStatisticsParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gu(e,t)}(t,Iu),n=t,(r=[{key:"destroy",value:function(){this.fieldName=null,this.statisticMode=null}}])&&Fu(n.prototype,r),i&&Fu(n,i),t}();function Vu(e){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ju(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qu(e,t,n){return(qu="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wu(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wu(e){return(Wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qu(e,t){return(Qu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FieldStatisticsParameters=zu;var Yu=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Wu(t).call(this,e,n))||"object"!==Vu(o)&&"function"!=typeof o?Ju(i):o).datasource=null,r.dataset=null,r.field=null,r.statisticMode=null,n&&be.extend(Ju(r),n),r.CLASS_NAME="SuperMap.FieldStatisticService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qu(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){qu(Wu(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null,this.field=null,this.statisticMode=null}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1),n="datasources/"+e.datasource+"/datasets/"+e.dataset+"/fields/"+e.field+"/"+e.statisticMode;e.url+="/"==t?n+".json?":"/"+n+".json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&Hu(n.prototype,r),i&&Hu(n,i),t}();function Xu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FieldStatisticService=Yu;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ku=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.event=null,this.expectFacilityCount=1,this.facilities=null,this.fromEvent=!1,this.isAnalyzeById=!1,this.maxWeight=0,this.parameter=new Ja,be.extend(this,t),this.CLASS_NAME="SuperMap.FindClosestFacilitiesParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.event=null,e.expectFacilityCount=null,e.facilities=null,e.fromEvent=null,e.isAnalyzeById=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Xu(t.prototype,n),r&&Xu(t,r),e}();function Zu(e){return(Zu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ec(e,t){return!t||"object"!==Zu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tc(e,t,n){return(tc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nc(e){return(nc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rc(e,t){return(rc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindClosestFacilitiesParameters=Ku;var ic=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ec(this,nc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindClosestFacilitiesService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rc(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){tc(nc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Ku){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"closestfacility":"/closestfacility")+".json?",t={expectFacilityCount:e.expectFacilityCount,fromEvent:e.fromEvent,maxWeight:e.maxWeight,parameter:be.toJSON(e.parameter),event:be.toJSON(e.event),facilities:n.getJson(e.isAnalyzeById,e.facilities)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.facilityPathList)return e;var t=new Nn;return e.facilityPathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&$u(n.prototype,r),i&&$u(n,i),t}();function oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindClosestFacilitiesService=ic;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ac=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.expectedSupplyCenterCount=null,this.isFromCenter=!1,this.supplyCenters=null,this.turnWeightField=null,this.weightName=null,be.extend(this,t),this.CLASS_NAME="SuperMap.FindLocationParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.expectedSupplyCenterCount=null,e.isFromCenter=null,e.turnWeightField=null,e.weightName=null,e.supplyCenters){for(var t=0,n=e.supplyCenters,r=n.length;t<r;t++)n[t].destroy();e.supplyCenters=null}}}])&&oc(t.prototype,n),r&&oc(t,r),e}();function sc(e){return(sc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uc(e,t){return!t||"object"!==sc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cc(e,t,n){return(cc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fc(e){return(fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hc(e,t){return(hc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindLocationParameters=ac;var pc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=uc(this,fc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindLocationService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hc(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){cc(fc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof ac){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"location":"/location")+".json?",t={isFromCenter:e.isFromCenter,expectedSupplyCenterCount:e.expectedSupplyCenterCount,weightName:e.weightName,turnWeightField:e.turnWeightField,returnEdgeFeature:!0,returnEdgeGeometry:!0,returnNodeFeature:!0,mapParameter:be.toJSON(e.mapParameter),supplyCenters:n.getCentersJson(e.supplyCenters)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getCentersJson",value:function(e){for(var t="[",n=e?e.length:0,r=0;r<n;r++)r>0&&(t+=","),t+=be.toJSON(e[r]);return t+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e)return null;var t=new Nn;return e.demandResults&&(e.demandResults=t.toGeoJSON(e.demandResults)),e.supplyResults&&(e.supplyResults=t.toGeoJSON(e.supplyResults)),e}}])&&lc(n.prototype,r),i&&lc(n,i),t}();function yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindLocationService=pc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.centers=null,this.hasLeastTotalCost=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Ja,be.extend(this,t),this.CLASS_NAME="SuperMap.FindMTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.centers=null,e.hasLeastTotalCost=null,e.isAnalyzeById=null,e.nodes=null,e.maxWeight=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&yc(t.prototype,n),r&&yc(t,r),e}();function mc(e){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gc(e,t){return!t||"object"!==mc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bc(e,t,n){return(bc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Sc(e){return(Sc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _c(e,t){return(_c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindMTSPPathsParameters=dc;var wc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=gc(this,Sc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindMTSPPathsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_c(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){bc(Sc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof dc){var t,n=this,r=n.getJson(e.isAnalyzeById,e.centers),i=n.getJson(e.isAnalyzeById,e.nodes);n.url=n.url+"/mtsppath.json?",t={centers:r,nodes:i,parameter:be.toJSON(e.parameter),hasLeastTotalCost:e.hasLeastTotalCost},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList)return null;var t=new Nn;return e.pathList.map(function(e){return e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e}),e}}])&&vc(n.prototype,r),i&&vc(n,i),t}();function Oc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindMTSPPathsService=wc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.hasLeastEdgeCount=null,this.nodes=null,this.parameter=new Ja,be.extend(this,t),this.CLASS_NAME="SuperMap.FindPathParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.hasLeastEdgeCount=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Oc(t.prototype,n),r&&Oc(t,r),e}();function Cc(e){return(Cc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pc(e,t){return!t||"object"!==Cc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ec(e,t,n){return(Ec="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function kc(e){return(kc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mc(e,t){return(Mc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindPathParameters=xc;var Ac=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pc(this,kc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindPathService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mc(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){Ec(kc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof xc){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"path":"/path")+".json?",t={hasLeastEdgeCount:e.hasLeastEdgeCount,parameter:be.toJSON(e.parameter),nodes:n.getJson(e.isAnalyzeById,e.nodes)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.pathList||e.pathList.length<1)return null;var t=new Nn;return e.pathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&Tc(n.prototype,r),i&&Tc(n,i),t}();function Lc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindPathService=Ac;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAnalyzeById=!1,this.isCenterMutuallyExclusive=!1,this.centers=null,this.isFromCenter=!1,this.weights=null,this.parameter=new Ja,be.extend(this,t),this.CLASS_NAME="SuperMap.FindServiceAreasParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.isAnalyzeById=null,e.isCenterMutuallyExclusive=null,e.centers=null,e.isFromCenter=null,e.weights=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Lc(t.prototype,n),r&&Lc(t,r),e}();function Nc(e){return(Nc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ic(e,t){return!t||"object"!==Nc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dc(e,t,n){return(Dc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Fc(e){return(Fc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bc(e,t){return(Bc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindServiceAreasParameters=jc;var Uc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ic(this,Fc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindServiceAreasService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bc(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){Dc(Fc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof jc){var t,n=this,r=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===r?"servicearea":"/servicearea")+".json?",t={isFromCenter:e.isFromCenter,isCenterMutuallyExclusive:e.isCenterMutuallyExclusive,parameter:be.toJSON(e.parameter),centers:n.getJson(e.isAnalyzeById,e.centers),weights:n.getJson(!0,e.weights)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJson",value:function(e,t){var n="[",r=t?t.length:0;if(!1===e)for(var i=0;i<r;i++)i>0&&(n+=","),n+='{"x":'+t[i].x+',"y":'+t[i].y+"}";else if(!0===e)for(var o=0;o<r;o++)o>0&&(n+=","),n+=t[o];return n+="]"}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.serviceAreaList)return e;var t=new Nn;return e.serviceAreaList.map(function(e){return e.serviceRegion&&(e.serviceRegion=t.toGeoJSON(e.serviceRegion)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures)),e.routes&&(e.routes=t.toGeoJSON(e.routes)),e}),e}}])&&Rc(n.prototype,r),i&&Rc(n,i),t}();function Gc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindServiceAreasService=Uc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.endNodeAssigned=!1,this.isAnalyzeById=!1,this.nodes=null,this.parameter=new Ja,be.extend(this,t),this.CLASS_NAME="SuperMap.FindTSPPathsParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.endNodeAssigned=null,e.isAnalyzeById=null,e.nodes=null,e.parameter&&(e.parameter.destroy(),e.parameter=null)}}])&&Gc(t.prototype,n),r&&Gc(t,r),e}();function Vc(e){return(Vc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jc(e,t){return!t||"object"!==Vc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qc(e,t,n){return(qc="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wc(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wc(e){return(Wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qc(e,t){return(Qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.FindTSPPathsParameters=zc;var Yc=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jc(this,Wc(t).call(this,e,n))).CLASS_NAME="SuperMap.FindTSPPathsService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qc(e,t)}(t,ca),n=t,(i=[{key:"destroy",value:function(){qc(Wc(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof zc){var t,n=this,i=n.url.substr(n.url.length-1,1);n.url=n.url+("/"===i?"tsppath":"/tsppath")+".json?",t={parameter:r.Util.toJSON(e.parameter),endNodeAssigned:e.endNodeAssigned,nodes:n.getNodesJson(e)},n.request({method:"GET",params:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getNodesJson",value:function(e){var t,n,r,i,o="";if(!1===e.isAnalyzeById){for(t="[",n=0,r=(i=e.nodes).length;n<r;n++)n>0&&(t+=","),t+='{"x":'+i[n].x+',"y":'+i[n].y+"}";o+=t+="]"}else if(!0===e.isAnalyzeById){for(var a="[",s=e.nodes,l=s.length,u=0;u<l;u++)u>0&&(a+=","),a+=s[u];o+=a+="]"}return o}},{key:"toGeoJSONResult",value:function(e){if(!e||!e.tspPathList)return null;var t=new Nn;return e.tspPathList.forEach(function(e){e.route&&(e.route=t.toGeoJSON(e.route)),e.pathGuideItems&&(e.pathGuideItems=t.toGeoJSON(e.pathGuideItems)),e.edgeFeatures&&(e.edgeFeatures=t.toGeoJSON(e.edgeFeatures)),e.nodeFeatures&&(e.nodeFeatures=t.toGeoJSON(e.nodeFeatures))}),e}}])&&Hc(n.prototype,i),o&&Hc(n,o),t}();function Xc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.FindTSPPathsService=Yc;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kc=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.routeTable=null,this.routeIDField=null,this.attributeFilter=null,this.eventTable=null,this.eventRouteIDField=null,this.measureField=null,this.measureStartField=null,this.measureEndField=null,this.measureOffsetField=null,this.errorInfoField=null,this.retainedFields=null,this.dataReturnOption=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.GenerateSpatialDataParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.routeTable&&(e.routeTable=null),e.routeIDField=null,e.attributeFilter=null,e.eventTable=null,e.eventRouteIDField=null,e.measureField=null,e.measureStartField=null,e.measureEndField=null,e.measureOffsetField=null,e.errorInfoField=null,e.dataReturnOption&&(e.dataReturnOption.destroy(),e.dataReturnOption=null)}}])&&Xc(t.prototype,n),r&&Xc(t,r),e}();function Zc(e){return(Zc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ef(e,t){return!t||"object"!==Zc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tf(e,t,n){return(tf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nf(e){return(nf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rf(e,t){return(rf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GenerateSpatialDataParameters=Kc;var of=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=ef(this,nf(t).call(this,e,n))).CLASS_NAME="SuperMap.GenerateSpatialDataService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rf(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){tf(nf(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Kc){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="datasets/"+e.routeTable+"/linearreferencing/generatespatialdata";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?n+".json":"/"+n+".json",this.url+="?returnContent=true",be.toJSON(e)}}])&&$c(n.prototype,r),i&&$c(n,i),t}();function af(e){return(af="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function sf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function lf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function uf(e,t,n){return(uf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function cf(e){return(cf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ff(e,t){return(ff=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GenerateSpatialDataService=of;var hf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=cf(t).call(this,e))||"object"!==af(i)&&"function"!=typeof i?lf(r):i).bounds=null,n.queryType=oe.GEO_BOUNDING_BOX,n.CLASS_NAME="SuperMap.GeoBoundingBoxQueryBuilderParameter",be.extend(lf(n),e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ff(e,t)}(t,ji),n=t,(r=[{key:"destroy",value:function(){uf(cf(t.prototype),"destroy",this).call(this),this.bounds=null,this.queryType=null}}])&&sf(n.prototype,r),i&&sf(n,i),t}();function pf(e){return(pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function df(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function mf(e,t,n){return(mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vf(e){return(vf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gf(e,t){return(gf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoBoundingBoxQueryBuilderParameter=hf;var bf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=vf(t).call(this,e))||"object"!==pf(i)&&"function"!=typeof i?df(r):i).precision=5,n.aggType=ie.GEOHASH_GRID,be.extend(df(n),e),n.CLASS_NAME="SuperMap.GeoHashGridAggParameter",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gf(e,t)}(t,Ri),n=t,i=[{key:"toJsonParameters",value:function(e){var t={aggName:e.aggName,aggFieldName:e.aggFieldName,aggType:e.aggType,precision:e.precision};return e.subAgg&&(t.subAgg=e.subAgg),be.toJson(t)}}],(r=[{key:"destroy",value:function(){mf(vf(t.prototype),"destroy",this).call(this),this.aggType=null}}])&&yf(n.prototype,r),i&&yf(n,i),t}();function Sf(e){return(Sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Of(e,t,n){return(Of="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xf(e){return(xf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Cf(e,t){return(Cf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoHashGridAggParameter=bf;var Tf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=xf(t).call(this,e))||"object"!==Sf(i)&&"function"!=typeof i?wf(r):i,e&&e.operateGeometry&&(n.operateGeometry=e.operateGeometry),e&&e.sourceGeometry&&(n.sourceGeometry=e.sourceGeometry),e&&e.operateGeometries&&(n.operateGeometries=e.operateGeometries),e&&e.sourceGeometries&&(n.sourceGeometries=e.sourceGeometries),e&&be.extend(wf(n),e),n.CLASS_NAME="SuperMap.GeometryOverlayAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cf(e,t)}(t,cs),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)if("sourceGeometry"===n)t.sourceGeometry=Pn.fromGeometry(e.sourceGeometry);else if("sourceGeometries"===n){for(var r=[],i=0;i<e.sourceGeometries.length;i++)r.push(Pn.fromGeometry(e.sourceGeometries[i]));t.sourceGeometries=r}else if("operateGeometry"===n)t.operateGeometry=Pn.fromGeometry(e.operateGeometry);else if("operateGeometries"===n){for(var o=[],a=0;a<e.operateGeometries.length;a++)o.push(Pn.fromGeometry(e.operateGeometries[a]));t.operateGeometries=o}else t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Of(xf(t.prototype),"destroy",this).call(this);var e=this;e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.sourceGeometries&&(e.sourceGeometries.destroy(),e.sourceGeometries=null),e.sourceGeometry&&(e.sourceGeometry.destroy(),e.sourceGeometry=null),e.operateGeometries&&(e.operateGeometries.destroy(),e.operateGeometries=null)}}])&&_f(n.prototype,r),i&&_f(n,i),t}();function Pf(e){return(Pf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ef(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mf(e,t,n){return(Mf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Af(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Af(e){return(Af=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lf(e,t){return(Lf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometryOverlayAnalystParameters=Tf;var jf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Af(t).call(this,e))||"object"!==Pf(i)&&"function"!=typeof i?kf(r):i).points=null,n.zValues=null,e&&be.extend(kf(n),e),n.CLASS_NAME="SuperMap.GeometrySurfaceAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lf(e,t)}(t,_s),n=t,(r=[{key:"destroy",value:function(){Mf(Af(t.prototype),"destroy",this).call(this);if(this.points){for(var e=0,n=this.points,r=n.length;e<r;e++)n[e].destroy();this.points=null}this.zValues=null}}])&&Ef(n.prototype,r),i&&Ef(n,i),t}();function Nf(e){return(Nf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function If(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Df(e,t,n){return(Df="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ff(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ff(e){return(Ff=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bf(e,t){return(Bf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometrySurfaceAnalystParameters=jf;var Uf=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Ff(t).call(this,e))||"object"!==Nf(i)&&"function"!=typeof i?If(r):i).points=null,e&&be.extend(If(n),e),n.CLASS_NAME="SuperMap.GeometryThiessenAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bf(e,t)}(t,Ms),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)"clipRegion"===n?t.clipRegion=Pn.fromGeometry(e.clipRegion):t[n]=e[n]}}],(r=[{key:"destroy",value:function(){Df(Ff(t.prototype),"destroy",this).call(this);if(this.points){for(var e=this.points.length-1;e>=0;e--)this.points[e].destroy();this.points=null}}}])&&Rf(n.prototype,r),i&&Rf(n,i),t}();function Gf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeometryThiessenAnalystParameters=Uf;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataset=null,this.sourceFilter=null,this.referenceFilter=null,this.spatialRelationType=null,this.isBorderInside=null,this.returnFeature=null,this.returnGeoRelatedOnly=null,this.startRecord=0,this.expectCount=500,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.GeoRelationAnalystParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceFilter&&e.sourceFilter.destroy(),e.sourceFilter=null,e.referenceFilter&&e.referenceFilter.destroy(),e.referenceFilter=null,e.dataset=null,e.spatialRelationType=null,e.isBorderInside=null,e.returnFeature=null,e.returnGeoRelatedOnly=null,e.startRecord=null,e.expectCount=null}}])&&Gf(t.prototype,n),r&&Gf(t,r),e}();function Vf(e){return(Vf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jf(e,t){return!t||"object"!==Vf(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qf(e,t,n){return(qf="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wf(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wf(e){return(Wf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qf(e,t){return(Qf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeoRelationAnalystParameters=zf;var Yf=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Jf(this,Wf(t).call(this,e,n))).CLASS_NAME="SuperMap.GeoRelationAnalystService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qf(e,t)}(t,Hi),n=t,(i=[{key:"destroy",value:function(){qf(Wf(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof zf){var t=this,n=t.url.substr(t.url.length-1,1);t.url+="/"===n?"datasets/"+e.dataset+"/georelation":"/datasets/"+e.dataset+"/georelation";var i=r.Util.toJSON(e);t.url+=".json?returnContent=true",t.request({method:"POST",data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Hf(n.prototype,i),o&&Hf(n,o),t}();function Xf(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GeoRelationAnalystService=Yf;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Kf=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.targetEpsgCode=null,this.targetPrj=null,this.returnContent=!0,this.fromIndex=0,this.toIndex=19,this.returnCountOnly=!1,this.maxFeatures=null,this.aggregations=null,be.extend(this,t),this.CLASS_NAME="SuperMap.GetFeaturesParametersBase"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.datasetNames=null,e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.targetEpsgCode=null,e.targetPrj=null,e.aggregation&&(e.aggregation=null)}}])&&Xf(t.prototype,n),r&&Xf(t,r),e}();function Zf(e){return(Zf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function th(e,t,n){return(th="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nh(e){return(nh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rh(e,t){return(rh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesParametersBase=Kf;var ih=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=nh(t).call(this,e))||"object"!==Zf(i)&&"function"!=typeof i?eh(r):i).getFeatureMode=t.getFeatureMode.BOUNDS,n.bounds=null,n.fields=null,n.attributeFilter=null,n.spatialQueryMode=u.CONTAIN,be.extend(eh(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByBoundsParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rh(e,t)}(t,Kf),n=t,i=[{key:"toJsonParameters",value:function(e){var n,r,i;return r={leftBottom:{x:e.bounds.left,y:e.bounds.bottom},rightTop:{x:e.bounds.right,y:e.bounds.top}},i={datasetNames:e.datasetNames,getFeatureMode:t.getFeatureMode.BOUNDS,bounds:r,spatialQueryMode:e.spatialQueryMode},e.fields&&((n=new po).name=e.datasetNames,n.fields=e.fields,i.queryParameter=n),e.attributeFilter&&(i.attributeFilter=e.attributeFilter,i.getFeatureMode=t.getFeatureMode.BOUNDS_ATTRIBUTEFILTER),e.maxFeatures&&!isNaN(e.maxFeatures)&&(i.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(i.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(i.targetPrj=e.targetPrj),be.toJSON(i)}}],(r=[{key:"destroy",value:function(){th(nh(t.prototype),"destroy",this).call(this);var e=this;if(e.bounds&&(e.bounds.destroy(),e.bounds=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&$f(n.prototype,r),i&&$f(n,i),t}();function oh(e){return(oh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ah(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lh(e,t,n){return(lh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function uh(e){return(uh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ch(e,t){return(ch=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/ih.getFeatureMode={BOUNDS:"BOUNDS",BOUNDS_ATTRIBUTEFILTER:"BOUNDS_ATTRIBUTEFILTER"},r.GetFeaturesByBoundsParameters=ih;var fh=function(e){function t(e,n){var r,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,r=!(a=uh(t).call(this,e,n))||"object"!==oh(a)&&"function"!=typeof a?sh(o):a,n=n||{},r.returnContent=!0,r.fromIndex=0,r.toIndex=19,r.maxFeatures=null,r.format=i.GEOJSON,be.extend(sh(r),n);var s,l=sh(r);return n.format&&(l.format=n.format.toUpperCase()),s=l.url.substr(l.url.length-1,1),l.url+="/"==s?"featureResults.json?":"/featureResults.json?",r.CLASS_NAME="SuperMap.GetFeaturesServiceBase",r}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ch(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){lh(uh(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.fromIndex=null,e.toIndex=null,e.maxFeatures=null,e.format=null}},{key:"processAsync",value:function(e){if(e){var t,n=this,r=!0;n.returnContent=e.returnContent,n.fromIndex=e.fromIndex,n.toIndex=e.toIndex,n.maxFeatures=e.maxFeatures,n.returnContent&&(n.url+="returnContent="+n.returnContent,r=!1),null!=n.fromIndex&&null!=n.toIndex&&!isNaN(n.fromIndex)&&!isNaN(n.toIndex)&&n.fromIndex>=0&&n.toIndex>=0&&!r&&(n.url+="&fromIndex="+n.fromIndex+"&toIndex="+n.toIndex),e.returnCountOnly&&(n.url+="&returnCountOnly="+e.returnContent),t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){if(e=be.transformResult(e),this.format===i.GEOJSON&&e.features){var t=new Nn;e.features=t.toGeoJSON(e.features)}this.events.triggerEvent("processCompleted",{result:e})}}])&&ah(n.prototype,r),o&&ah(n,o),t}();function hh(e){return(hh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yh(e,t){return!t||"object"!==hh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dh(e,t,n){return(dh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mh(e){return(mh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vh(e,t){return(vh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesServiceBase=fh;var gh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=yh(this,mh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByBoundsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vh(e,t)}(t,fh),n=t,(r=[{key:"destroy",value:function(){dh(mh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return ih.toJsonParameters(e)}}])&&ph(n.prototype,r),i&&ph(n,i),t}();function bh(e){return(bh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wh(e,t,n){return(wh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Oh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Oh(e){return(Oh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xh(e,t){return(xh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByBoundsService=gh;var Ch=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Oh(t).call(this,e))||"object"!==bh(i)&&"function"!=typeof i?_h(r):i).bufferDistance=null,n.attributeFilter=null,n.geometry=null,n.fields=null,be.extend(_h(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByBufferParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xh(e,t)}(t,Kf),n=t,i=[{key:"toJsonParameters",value:function(e){var t,n,r;return r=Pn.fromGeometry(e.geometry),n={datasetNames:e.datasetNames,getFeatureMode:"BUFFER",bufferDistance:e.bufferDistance,geometry:r},e.fields&&((t=new po).name=e.datasetNames,t.fields=e.fields,n.queryParameter=t),e.attributeFilter&&(n.attributeFilter=e.attributeFilter,n.getFeatureMode="BUFFER_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(n.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(n.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(n.targetPrj=e.targetPrj),be.toJSON(n)}}],(r=[{key:"destroy",value:function(){wh(Oh(t.prototype),"destroy",this).call(this);var e=this;if(e.bufferDistance=null,e.attributeFilter=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Sh(n.prototype,r),i&&Sh(n,i),t}();function Th(e){return(Th="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ph(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eh(e,t){return!t||"object"!==Th(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function kh(e,t,n){return(kh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Mh(e){return(Mh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ah(e,t){return(Ah=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByBufferParameters=Ch;var Lh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Eh(this,Mh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByBufferService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ah(e,t)}(t,fh),n=t,(i=[{key:"destroy",value:function(){kh(Mh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Ch)return r.GetFeaturesByBufferParameters.toJsonParameters(e)}}])&&Ph(n.prototype,i),o&&Ph(n,o),t}();function jh(e){return(jh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ih(e,t,n){return(Ih="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Dh(e){return(Dh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fh(e,t){return(Fh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByBufferService=Lh;var Bh=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Dh(t).call(this,e))||"object"!==jh(i)&&"function"!=typeof i?Rh(r):i).getFeatureMode="SPATIAL",n.geometry=null,n.fields=null,n.attributeFilter=null,n.spatialQueryMode=u.CONTAIN,be.extend(Rh(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByGeometryParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fh(e,t)}(t,Kf),n=t,i=[{key:"toJsonParameters",value:function(e){var t,n,r;return n=Pn.fromGeometry(e.geometry),r={datasetNames:e.datasetNames,getFeatureMode:"SPATIAL",geometry:n,spatialQueryMode:e.spatialQueryMode},e.fields&&((t=new po).name=e.datasetNames,t.fields=e.fields,r.queryParameter=t),e.attributeFilter&&(r.attributeFilter=e.attributeFilter,r.getFeatureMode="SPATIAL_ATTRIBUTEFILTER"),e.maxFeatures&&!isNaN(e.maxFeatures)&&(r.maxFeatures=e.maxFeatures),e.targetEpsgCode&&(r.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(r.targetPrj=e.targetPrj),be.toJSON(r)}}],(r=[{key:"destroy",value:function(){Ih(Dh(t.prototype),"destroy",this).call(this);var e=this;if(e.geometry&&(e.geometry.destroy(),e.geometry=null),e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}e.attributeFilter=null,e.spatialQueryMode=null,e.getFeatureMode=null}}])&&Nh(n.prototype,r),i&&Nh(n,i),t}();function Uh(e){return(Uh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function zh(e,t){return!t||"object"!==Uh(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vh(e,t,n){return(Vh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Hh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Hh(e){return(Hh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Jh(e,t){return(Jh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByGeometryParameters=Bh;var qh=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=zh(this,Hh(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByGeometryService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Jh(e,t)}(t,fh),n=t,(r=[{key:"destroy",value:function(){Vh(Hh(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return Bh.toJsonParameters(e)}}])&&Gh(n.prototype,r),i&&Gh(n,i),t}();function Wh(e){return(Wh="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Qh(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yh(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xh(e,t,n){return(Xh="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Kh(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Kh(e){return(Kh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Zh(e,t){return(Zh=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByGeometryService=qh;var $h=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Kh(t).call(this,e))||"object"!==Wh(i)&&"function"!=typeof i?Yh(r):i).getFeatureMode="ID",n.IDs=null,n.fields=null,be.extend(Yh(n),e),n.CLASS_NAME="SuperMap.GetFeaturesByIDsParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zh(e,t)}(t,Kf),n=t,i=[{key:"toJsonParameters",value:function(e){var t,n;return t={datasetNames:e.datasetNames,getFeatureMode:"ID",ids:e.IDs},e.fields&&((n=new po).name=e.datasetNames,n.fields=e.fields,t.queryParameter=n),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),be.toJSON(t)}}],(r=[{key:"destroy",value:function(){Xh(Kh(t.prototype),"destroy",this).call(this);var e=this;if(e.IDs=null,e.getFeatureMode=null,e.fields){for(;e.fields.length>0;)e.fields.pop();e.fields=null}}}])&&Qh(n.prototype,r),i&&Qh(n,i),t}();function ep(e){return(ep="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function np(e,t){return!t||"object"!==ep(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function rp(e,t,n){return(rp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ip(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ip(e){return(ip=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function op(e,t){return(op=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByIDsParameters=$h;var ap=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=np(this,ip(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesByIDsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&op(e,t)}(t,fh),n=t,(r=[{key:"destroy",value:function(){rp(ip(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return $h.toJsonParameters(e)}}])&&tp(n.prototype,r),i&&tp(n,i),t}();function sp(e){return(sp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function up(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function cp(e,t,n){return(cp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fp(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fp(e){return(fp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hp(e,t){return(hp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesByIDsService=ap;var pp=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=fp(t).call(this,e))||"object"!==sp(i)&&"function"!=typeof i?up(r):i).getFeatureMode="SQL",n.queryParameter=null,be.extend(up(n),e),n.CLASS_NAME="SuperMap.GetFeaturesBySQLParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hp(e,t)}(t,Kf),n=t,i=[{key:"toJsonParameters",value:function(e){var t={datasetNames:e.datasetNames,getFeatureMode:"SQL",queryParameter:e.queryParameter};return e.maxFeatures&&!isNaN(e.maxFeatures)&&(t.maxFeatures=e.maxFeatures),e.aggregations&&(t.aggregations=e.aggregations),e.targetEpsgCode&&(t.targetEpsgCode=e.targetEpsgCode),!e.targetEpsgCode&&e.targetPrj&&(t.targetPrj=e.targetPrj),be.toJSON(t)}}],(r=[{key:"destroy",value:function(){cp(fp(t.prototype),"destroy",this).call(this);this.getFeatureMode=null,this.queryParameter&&(this.queryParameter.destroy(),this.queryParameter=null)}}])&&lp(n.prototype,r),i&&lp(n,i),t}();function yp(e){return(yp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mp(e,t){return!t||"object"!==yp(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vp(e,t,n){return(vp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gp(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function gp(e){return(gp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bp(e,t){return(bp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesBySQLParameters=pp;var Sp=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=mp(this,gp(t).call(this,e,n))).CLASS_NAME="SuperMap.GetFeaturesBySQLService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bp(e,t)}(t,fh),n=t,(r=[{key:"destroy",value:function(){vp(gp(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){return pp.toJsonParameters(e)}}])&&dp(n.prototype,r),i&&dp(n,i),t}();function _p(e){return(_p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Op(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xp(e,t,n){return(xp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Cp(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Cp(e){return(Cp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Tp(e,t){return(Tp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetFeaturesBySQLService=Sp;var Pp=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Cp(t).call(this,e,n))||"object"!==_p(o)&&"function"!=typeof o?Op(i):o).datasource=null,r.dataset=null,n&&be.extend(Op(r),n),r.CLASS_NAME="SuperMap.GetFieldsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Tp(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){xp(Cp(t.prototype),"destroy",this).call(this);this.datasource=null,this.dataset=null}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1),n="datasources/"+e.datasource+"/datasets/"+e.dataset;e.url+="/"==t?n+"/fields.json?":"/"+n+"/fields.json?",e.request({method:"GET",data:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}])&&wp(n.prototype,r),i&&wp(n,i),t}();function Ep(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GetFieldsService=Pp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null,be.extend(this,t),this.CLASS_NAME="SuperMap.GetGridCellInfosParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.datasetName=null,this.dataSourceName=null,this.X=null,this.Y=null}}])&&Ep(t.prototype,n),r&&Ep(t,r),e}();function Mp(e){return(Mp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ap(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Lp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jp(e,t,n){return(jp="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Np(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Np(e){return(Np=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Rp(e,t){return(Rp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GetGridCellInfosParameters=kp;var Ip=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Np(t).call(this,e,n))||"object"!==Mp(o)&&"function"!=typeof o?Lp(i):o).datasetName=null,r.dataSourceName=null,r.datasetType=null,r.X=null,r.Y=null,n&&be.extend(Lp(r),n),r.CLASS_NAME="SuperMap.GetGridCellInfosService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rp(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){jp(Np(t.prototype),"destroy",this).call(this);var e=this;e.X=null,e.Y=null,e.datasetName=null,e.dataSourceName=null,e.datasetType=null}},{key:"processAsync",value:function(e){if(e instanceof kp){be.extend(this,e);var t=this,n=t.url.substr(t.url.length-1,1);t.url+="/"==n?"datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json":"/datasources/"+t.dataSourceName+"/datasets/"+t.datasetName+".json",t.queryRequest(t.getDatasetInfoCompleted,t.getDatasetInfoFailed)}}},{key:"queryRequest",value:function(e,t){this.request({method:"GET",data:null,scope:this,success:e,failure:t})}},{key:"getDatasetInfoCompleted",value:function(e){e=be.transformResult(e),this.datasetType=e.datasetInfo.type,this.queryGridInfos()}},{key:"queryGridInfos",value:function(){var e=this,t=/\.json/.exec(e.url).index,n=e.url.substring(t),r=e.url.substring(0,e.url.length-n.length);"GRID"==e.datasetType?e.url=r+"/gridValue"+n:e.url=r+"/imageValue"+n,null!=e.X&&null!=e.Y&&(e.url+="?x="+e.X+"&y="+e.Y),e.queryRequest(e.serviceProcessCompleted,e.serviceProcessFailed)}},{key:"getDatasetInfoFailed",value:function(e){this.serviceProcessFailed(e)}}])&&Ap(n.prototype,r),i&&Ap(n,i),t}();function Dp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GetGridCellInfosService=Ip;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fp=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.srcData=t,this.targetData=n,this.CLASS_NAME="SuperMap.ThemeMemoryData"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.srcData=null,this.targetData=null}},{key:"toJSON",value:function(){if(this.srcData&&this.targetData){for(var e="",t=Math.min(this.srcData.length,this.targetData.length),n=0;n<t;n++)e+="'"+this.srcData[n]+"':'"+this.targetData[n]+"',";return n>0&&(e=e.substring(0,e.length-1)),"{"+e+"}"}return null}}])&&Dp(t.prototype,n),r&&Dp(t,r),e}();function Bp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeMemoryData=Fp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Up=function(){function e(t,n){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.memoryData=null,this.type=t,n&&be.extend(this,n),this.CLASS_NAME="SuperMap.Theme"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.memoryData&&(this.memoryData.destroy(),this.memoryData=null),this.type=null}},{key:"toServerJSONObject",value:function(){}}])&&Bp(t.prototype,n),r&&Bp(t,r),e}();function Gp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Theme=Up;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.align=w.BASELINECENTER,this.backColor=new fn(255,255,255),this.foreColor=new fn(0,0,0),this.backOpaque=!1,this.sizeFixed=!0,this.fontHeight=6,this.fontWidth=0,this.fontWeight=400,this.fontName="Times New Roman",this.bold=!1,this.italic=!1,this.italicAngle=0,this.shadow=!1,this.strikeout=!1,this.outline=!1,this.opaqueRate=0,this.underline=!1,this.rotation=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerTextStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e(t);return be.copy(n,t),n.backColor=fn.fromJson(t.backColor),n.foreColor=fn.fromJson(t.foreColor),n}}],(n=[{key:"destroy",value:function(){var e=this;e.align=null,e.backColor&&(e.backColor.destroy(),e.backColor=null),e.foreColor&&(e.foreColor.destroy(),e.foreColor=null),e.backOpaque=null,e.sizeFixed=null,e.fontHeight=null,e.fontWidth=null,e.fontWeight=null,e.fontName=null,e.bold=null,e.italic=null,e.italicAngle=null,e.shadow=null,e.strikeout=null,e.outline=null,e.opaqueRate=null,e.underline=null,e.rotation=null}}])&&Gp(t.prototype,n),r&&Gp(t,r),e}();function Vp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerTextStyle=zp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Hp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.visible=!0,this.style=new zp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&Vp(t.prototype,n),r&&Vp(t,r),e}();function Jp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelItem=Hp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.style=new pn,this.unique=null,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n.style=pn.fromJson(t.style),n}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Jp(t.prototype,n),r&&Jp(t,r),e}();function Wp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeUniqueItem=qp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Qp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.flowEnabled=!1,this.leaderLineDisplayed=!1,this.leaderLineStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeFlow"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.leaderLineStyle=pn.fromJson(t.leaderLineStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.flowEnabled=null,e.leaderLineDisplayed=null,e.leaderLineStyle&&(e.leaderLineStyle.destroy(),e.leaderLineStyle=null)}}])&&Wp(t.prototype,n),r&&Wp(t,r),e}();function Yp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeFlow=Qp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.offsetFixed=!1,this.offsetX="0.0",this.offsetY="0.0",t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeOffset"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){this.offsetFixed=null,this.offsetX=null,this.offsetY=null}}])&&Yp(t.prototype,n),r&&Yp(t,r),e}();function Kp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeOffset=Xp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Zp=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.defaultStyle=null,this.separator=null,this.separatorEnabled=!1,this.splitIndexes=null,this.styles=new zp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.LabelMixedTextStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e,r=t.styles;if(be.copy(n,t),n.defaultStyle=new zp(t.defaultStyle),r){n.styles=[];for(var i=0,o=r.length;i<o;i++)n.styles.push(new zp(r[i]))}return n}}}],(n=[{key:"destroy",value:function(){var e=this;if(e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null),e.separator=null,e.separatorEnabled=null,e.splitIndexes&&(e.splitIndexes=null),e.styles){for(var t=0,n=e.styles,r=n.length;t<r;t++)n[t].destroy();e.styles=null}}}])&&Kp(t.prototype,n),r&&Kp(t,r),e}();function $p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.LabelMixedTextStyle=Zp;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ey=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxTextHeight=0,this.maxTextWidth=0,this.minTextHeight=0,this.minTextWidth=0,this.uniformStyle=new zp,this.uniformMixedStyle=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelText"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.uniformStyle=zp.fromObj(t.uniformStyle),n.uniformMixedStyle=Zp.fromObj(t.uniformMixedStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.maxTextHeight=null,e.maxTextWidth=null,e.minTextHeight=null,e.minTextWidth=null,e.uniformStyle&&(e.uniformStyle.destroy(),e.uniformStyle=null),e.uniformMixedStyle&&(e.uniformMixedStyle.destroy(),e.uniformMixedStyle=null)}}])&&$p(t.prototype,n),r&&$p(t,r),e}();function ty(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelText=ey;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ny=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.isAlongLine=!0,this.alongLineDirection=x.LB_TO_RT,this.angleFixed=!1,this.repeatedLabelAvoided=!1,this.repeatIntervalFixed=!1,this.labelRepeatInterval=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelAlongLine"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.isAlongLine=null,e.alongLineDirection=null,e.angleFixed=null,e.repeatedLabelAvoided=null,e.repeatIntervalFixed=null,e.labelRepeatInterval=null}}])&&ty(t.prototype,n),r&&ty(t,r),e}();function ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelAlongLine=ny;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.labelBackShape=C.NONE,this.backStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelBackground"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return n.labelBackShape=t.labelBackShape,n.backStyle=pn.fromJson(t.backStyle),n}}}],(n=[{key:"destroy",value:function(){this.labelBackShape=null,this.backStyle&&(this.backStyle.destroy(),this.backStyle=null)}}])&&ry(t.prototype,n),r&&ry(t,r),e}();function oy(e){return(oy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ay(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ly(e,t,n){return(ly="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uy(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function uy(e){return(uy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cy(e,t){return(cy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeLabelBackground=iy;var fy=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=uy(t).call(this,"LABEL",e))||"object"!==oy(i)&&"function"!=typeof i?sy(r):i).alongLine=new ny,n.background=new iy,n.flow=new Qp,n.items=null,n.uniqueItems=null,n.labelExpression=null,n.labelOverLengthMode=T.NONE,n.matrixCells=null,n.maxLabelLength=256,n.numericPrecision=0,n.offset=new Xp,n.overlapAvoided=!0,n.rangeExpression=null,n.uniqueExpression=null,n.smallGeometryLabeled=!1,n.text=new ey,n.textSpace=0,e&&be.extend(sy(n),e),n.CLASS_NAME="SuperMap.ThemeLabel",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cy(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t,r=e.items,i=e.uniqueItems,o=e.matrixCells;if(e.matrixCells=null,be.copy(n,e),n.alongLine=ny.fromObj(e),n.background=iy.fromObj(e),n.flow=new Qp({flowEnabled:e.flowEnabled,leaderLineDisplayed:e.leaderLineDisplayed,leaderLineStyle:e.leaderLineStyle}),r){n.items=[];for(var a=0,s=r.length;a<s;a++)n.items.push(Hp.fromObj(r[a]))}if(i){n.uniqueItems=[];for(var l=0,u=i.length;l<u;l++)n.uniqueItems.push(qp.fromObj(i[l]))}if(o){n.matrixCells=[];for(var c=0,f=o.length;c<f;c++);}return n.offset=Xp.fromObj(e),n.text=ey.fromObj(e),n}}}],(r=[{key:"destroy",value:function(){ly(uy(t.prototype),"destroy",this).call(this);var e=this;if(e.alongLine=null,e.background&&(e.background.destroy(),e.background=null),e.flow=null,e.items){for(var n=0,r=e.items,i=r.length;n<i;n++)r[n].destroy();e.items=null}if(e.uniqueItems){for(var o=0,a=e.uniqueItems,s=a.length;o<s;o++)a[o].destory();e.uniqueItems=null}e.labelExpression=null,e.labelOverLengthMode=null,e.matrixCells=null,e.maxLabelLength=null,e.numericPrecision=null,e.overlapAvoided=null,e.rangeExpression=null,e.uniqueExpression=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.smallGeometryLabeled=null,e.text&&(e.text.destroy(),e.text=null),e.textSpace=null}},{key:"toJSON",value:function(){return be.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,this.alongLine&&(e.alongLine=this.alongLine.isAlongLine,e.alongLineDirection=this.alongLine.alongLineDirection,e.angleFixed=this.alongLine.angleFixed,e.isLabelRepeated=this.alongLine.isLabelRepeated,e.labelRepeatInterval=this.alongLine.labelRepeatInterval,e.repeatedLabelAvoided=this.alongLine.repeatedLabelAvoided,e.repeatIntervalFixed=this.alongLine.repeatIntervalFixed),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.text&&(e.maxTextHeight=this.text.maxTextHeight,e.maxTextWidth=this.text.maxTextWidth,e.minTextHeight=this.text.minTextHeight,e.minTextWidth=this.text.minTextWidth,e.uniformStyle=this.text.uniformStyle,e.uniformMixedStyle=this.text.uniformMixedStyle),this.background&&(e.labelBackShape=this.background.labelBackShape,e.backStyle=this.background.backStyle),e.labelOverLengthMode=this.labelOverLengthMode,e.maxLabelLength=this.maxLabelLength,e.smallGeometryLabeled=this.smallGeometryLabeled,e.rangeExpression=this.rangeExpression,e.uniqueExpression=this.uniqueExpression,e.numericPrecision=this.numericPrecision,e.items=this.items,e.uniqueItems=this.uniqueItems,e.labelExpression=this.labelExpression,e.overlapAvoided=this.overlapAvoided,e.matrixCells=this.matrixCells,e.textSpace=this.textSpace,e}}])&&ay(n.prototype,r),i&&ay(n,i),t}();function hy(e){return(hy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function py(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dy(e,t,n){return(dy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=my(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function my(e){return(my=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vy(e,t){return(vy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeLabel=fy;var gy=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=my(t).call(this,"UNIQUE",e))||"object"!==hy(i)&&"function"!=typeof i?yy(r):i).defaultStyle=new pn,n.items=null,n.uniqueExpression=null,n.colorGradientType=_.YELLOW_RED,e&&be.extend(yy(n),e),n.CLASS_NAME="SuperMap.ThemeUnique",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vy(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){var n=new t,r=e.items,i=r?r.length:0;be.extend(n,e),n.items=[],n.defaultStyle=pn.fromJson(e.defaultStyle);for(var o=0;o<i;o++)n.items.push(qp.fromObj(r[o]));return n}}],(r=[{key:"destroy",value:function(){dy(my(t.prototype),"destroy",this).call(this);var e=this;if(e.uniqueExpression=null,e.colorGradientType=null,e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.defaultStyle&&(e.defaultStyle.destroy(),e.defaultStyle=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=be.copyAttributes(e,this)).defaultStyle&&e.defaultStyle.toServerJSONObject&&(e.defaultStyle=e.defaultStyle.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}])&&py(n.prototype,r),i&&py(n,i),t}();function by(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeUnique=gy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.axesColor=new fn(0,0,0),this.axesDisplayed=!1,this.axesGridDisplayed=!1,this.axesTextDisplayed=!1,this.axesTextStyle=new zp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphAxes"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.axesColor=fn.fromJson(t.axesColor),n.axesTextStyle=zp.fromObj(t.axesTextStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.axesColor&&(e.axesColor.destroy(),e.axesColor=null),e.axesDisplayed=null,e.axesGridDisplayed=null,e.axesTextDisplayed=null,e.axesTextStyle&&(e.axesTextStyle.destroy(),e.axesTextStyle=null)}}])&&by(t.prototype,n),r&&by(t,r),e}();function _y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraphAxes=Sy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxGraphSize=0,this.minGraphSize=0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphSize"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n}}],(n=[{key:"destroy",value:function(){this.maxGraphSize=null,this.minGraphSize=null}}])&&_y(t.prototype,n),r&&_y(t,r),e}();function Oy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraphSize=wy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.graphTextDisplayed=!1,this.graphTextFormat=d.CAPTION,this.graphTextStyle=new zp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphText"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n.graphTextStyle=zp.fromObj(t.graphTextStyle),n}}],(n=[{key:"destroy",value:function(){var e=this;e.graphTextDisplayed=null,e.graphTextFormat=null,e.graphTextStyle&&(e.graphTextStyle.destroy(),e.graphTextStyle=null)}}])&&Oy(t.prototype,n),r&&Oy(t,r),e}();function Cy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraphText=xy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ty=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraphItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.uniformStyle=pn.fromJson(t.uniformStyle),n}}}],(n=[{key:"destroy",value:function(){this.caption=null,this.graphExpression=null,this.memoryDoubleValues=null,this.uniformStyle=null}}])&&Cy(t.prototype,n),r&&Cy(t,r),e}();function Py(e){return(Py="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ey(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ky(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function My(e,t,n){return(My="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ay(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ay(e){return(Ay=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ly(e,t){return(Ly=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGraphItem=Ty;var jy=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Ay(t).call(this,"GRAPH",e))||"object"!==Py(i)&&"function"!=typeof i?ky(r):i).barWidth=0,n.flow=new Qp,n.graduatedMode=g.CONSTANT,n.graphAxes=new Sy,n.graphSize=new wy,n.graphSizeFixed=!1,n.graphText=new xy,n.graphType=m.AREA,n.graphAxesTextDisplayMode=v.NONE,n.items=null,n.memoryKeys=null,n.negativeDisplayed=!1,n.offset=new Xp,n.overlapAvoided=!0,n.roseAngle=0,n.startAngle=0,e&&be.extend(ky(n),e),n.CLASS_NAME="SuperMap.ThemeGraph",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ly(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){var n=new t,r=e.items,i=r?r.length:0;be.copy(n,e),n.items=[],n.flow=Qp.fromObj(e),n.graphAxes=Sy.fromObj(e),n.graphSize=wy.fromObj(e),n.graphText=xy.fromObj(e),n.offset=Xp.fromObj(e);for(var o=0;o<i;o++)n.items.push(Ty.fromObj(r[o]));return n}}],(r=[{key:"destroy",value:function(){My(Ay(t.prototype),"destroy",this).call(this);var e=this;if(e.barWidth=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=null,e.graphAxes&&(e.graphAxes.destroy(),e.graphAxes=null),e.graphSize&&(e.graphSize.destroy(),e.graphSize=null),e.graphSizeFixed=null,e.graphText&&(e.graphText.destroy(),e.graphText=null),e.graphType=null,e.items){for(var n=0,r=e.items,i=r.length;n<i;n++)r[n].destroy();e.items=null}e.memoryKeys=null,e.negativeDisplayed=null,e.offset&&(e.offset.destroy(),e.offset=null),e.overlapAvoided=null,e.roseAngle=null,e.startAngle=null,e.graphAxesTextDisplayMode=null}},{key:"toJSON",value:function(){return be.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,this.graphText&&(e.graphTextDisplayed=this.graphText.graphTextDisplayed,e.graphTextFormat=this.graphText.graphTextFormat,e.graphTextStyle=this.graphText.graphTextStyle),this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.graphAxes&&(e.axesColor=this.graphAxes.axesColor,e.axesDisplayed=this.graphAxes.axesDisplayed,e.axesGridDisplayed=this.graphAxes.axesGridDisplayed,e.axesTextDisplayed=this.graphAxes.axesTextDisplayed,e.axesTextStyle=this.graphAxes.axesTextStyle),this.graphSize&&(e.maxGraphSize=this.graphSize.maxGraphSize,e.minGraphSize=this.graphSize.minGraphSize),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),e.barWidth=this.barWidth,e.graduatedMode=this.graduatedMode,e.graphSizeFixed=this.graphSizeFixed,e.graphType=this.graphType,e.graphAxesTextDisplayMode=this.graphAxesTextDisplayMode,e.items=this.items,e.memoryKeys=this.memoryKeys,e.negativeDisplayed=this.negativeDisplayed,e.overlapAvoided=this.overlapAvoided,e.roseAngle=this.roseAngle,e.startAngle=this.startAngle,e}}])&&Ey(n.prototype,r),i&&Ey(n,i),t}();function Ny(e){return(Ny="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ry(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iy(e){return(Iy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Dy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fy(e,t){return(Fy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGraph=jy;var By=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Iy(t).call(this,"DOTDENSITY",e))||"object"!==Ny(i)&&"function"!=typeof i?Dy(r):i).dotExpression=null,n.style=new pn,n.value=null,e&&be.extend(Dy(n),e),n.CLASS_NAME="SuperMap.ThemeDotDensity",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fy(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t;return be.copy(n,e),n.style=pn.fromJson(e.style),n}}}],(r=[{key:"destroy",value:function(){var e=this;e.dotExpression=null,e.value=null,e.style&&(e.style.destroy(),e.style=null)}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Ry(n.prototype,r),i&&Ry(n,i),t}();function Uy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeDotDensity=By;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Gy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.negativeDisplayed=!1,this.negativeStyle=new pn,this.positiveStyle=new pn,this.zeroDisplayed=!1,this.zeroStyle=new pn,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGraduatedSymbolStyle"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.negativeStyle=pn.fromJson(t.negativeStyle),n.positiveStyle=pn.fromJson(t.positiveStyle),n.zeroStyle=pn.fromJson(t.zeroStyle),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.negativeDisplayed=null,e.negativeStyle=null,e.positiveStyle=null,e.zeroDisplayed=null,e.zeroStyle=null}}])&&Uy(t.prototype,n),r&&Uy(t,r),e}();function zy(e){return(zy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hy(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jy(e,t,n){return(Jy="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qy(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qy(e){return(qy=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wy(e,t){return(Wy=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGraduatedSymbolStyle=Gy;var Qy=function(e){function t(e){var n,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(n=!(o=qy(t).call(this,"GRADUATEDSYMBOL",e))||"object"!==zy(o)&&"function"!=typeof o?Hy(i):o).baseValue=0,n.expression=null,n.flow=new Qp,n.graduatedMode=r.GraduatedMode.CONSTAN,n.offset=new Xp,n.style=new Gy,e&&be.extend(Hy(n),e),n.CLASS_NAME="SuperMap.ThemeGraduatedSymbol",n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wy(e,t)}(t,Up),n=t,o=[{key:"fromObj",value:function(e){if(e){var t=new r.ThemeGraduatedSymbol;return be.copy(t,e),t.flow=Qp.fromObj(e),t.offset=Xp.fromObj(e),t.style=Gy.fromObj(e),t}}}],(i=[{key:"destroy",value:function(){Jy(qy(t.prototype),"destroy",this).call(this);var e=this;e.expression=null,e.flow&&(e.flow.destroy(),e.flow=null),e.graduatedMode=g.CONSTANT,e.offset&&(e.offset.destroy(),e.offset=null),e.style&&(e.style.destroy(),e.style=null)}},{key:"toJSON",value:function(){return be.toJSON(this.toServerJSONObject())}},{key:"toServerJSONObject",value:function(){var e={};return e.type=this.type,e.memoryData=this.memoryData,e.baseValue=this.baseValue,e.expression=this.expression,e.graduatedMode=this.graduatedMode,this.flow&&(e.flowEnabled=this.flow.flowEnabled,e.leaderLineDisplayed=this.flow.leaderLineDisplayed,e.leaderLineStyle=this.flow.leaderLineStyle),this.offset&&(e.offsetFixed=this.offset.offsetFixed,e.offsetX=this.offset.offsetX,e.offsetY=this.offset.offsetY),this.style&&(e.negativeStyle=this.style.negativeStyle,e.negativeDisplayed=this.style.negativeDisplayed,e.positiveStyle=this.style.positiveStyle,e.zeroDisplayed=this.style.zeroDisplayed,e.zeroStyle=this.style.zeroStyle),e}}])&&Vy(n.prototype,i),o&&Vy(n,o),t}();function Yy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGraduatedSymbol=Qy;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Xy=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.end=0,this.start=0,this.style=new pn,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeRangeItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.style=pn.fromJson(t.style),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Yy(t.prototype,n),r&&Yy(t,r),e}();function Ky(e){return(Ky="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Zy(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ed(e,t,n){return(ed="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=td(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function td(e){return(td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function nd(e,t){return(nd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeRangeItem=Xy;var rd=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=td(t).call(this,"RANGE",e))||"object"!==Ky(i)&&"function"!=typeof i?$y(r):i).precision="1.0E-12",n.items=null,n.rangeExpression=null,n.rangeMode=b.EQUALINTERVAL,n.rangeParameter=0,n.colorGradientType=_.YELLOW_RED,e&&be.extend($y(n),e),n.CLASS_NAME="SuperMap.ThemeRange",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nd(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t;be.copy(n,e);var r=e.items,i=r?r.length:0;n.items=[];for(var o=0;o<i;o++)n.items.push(Xy.fromObj(r[o]));return n}}}],(r=[{key:"destroy",value:function(){ed(td(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.rangeExpression=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&Zy(n.prototype,r),i&&Zy(n,i),t}();function id(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeRange=rd;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var od=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.bounds=null,this.caption=null,this.description=null,this.name=null,this.queryable=null,this.subLayers=null,this.type=null,this.visible=null,be.extend(this,t),this.CLASS_NAME="SuperMap.UGCLayer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"fromJson",value:function(e){e=e||{},be.extend(this,e);var t=this.bounds;t&&(this.bounds=new Oe(t.leftBottom.x,t.leftBottom.y,t.rightTop.x,t.rightTop.y))}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).bounds&&e.bounds.toServerJSONObject&&(e.bounds=e.bounds.toServerJSONObject()),e}}])&&id(t.prototype,n),r&&id(t,r),e}();function ad(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.UGCLayer=od;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sd=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.allowPointOverlap=!0,this.allowPointWithTextDisplay=!0,this.allowTextOverlap=!1,this.allowTextAndPointOverlap=!0,this.allowThemeGraduatedSymbolOverlap=!1,this.allowThemeGraphOverlap=!1,this.horizontalOverlappedSpaceSize=0,this.verticalOverlappedSpaceSize=0,be.extend(this,t),this.ugcLayer=new od(t),this.CLASS_NAME="SuperMap.OverlapDisplayedOptions"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}},{key:"fromJson",value:function(e){this.ugcLayer.fromJson.apply(this,[e])}},{key:"toServerJSONObject",value:function(){return this.ugcLayer.toServerJSONObject.apply(this,arguments)}},{key:"toString",value:function(){var e=this.ugcLayer.toServerJSONObject.apply(this,arguments),t="{";for(var n in e)e.hasOwnProperty(n)&&(t+="'"+n+"':"+e[n]+",");return t=t.substr(0,t.length-1),t+="}"}}])&&ad(t.prototype,n),r&&ad(t,r),e}();function ld(e){return(ld="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ud(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cd(e,t){return!t||"object"!==ld(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fd(e,t,n){return(fd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hd(e){return(hd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pd(e,t){return(pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlapDisplayedOptions=sd;var yd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=cd(this,hd(t).call(this,e))).completeLineSymbolDisplayed=null,n.maxScale=null,n.minScale=null,n.minVisibleGeometrySize=null,n.opaqueRate=null,n.symbolScalable=null,n.symbolScale=null,n.overlapDisplayed=null,n.overlapDisplayedOptions=null,n.CLASS_NAME="SuperMap.UGCMapLayer",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pd(e,t)}(t,od),n=t,(r=[{key:"destroy",value:function(){fd(hd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){fd(hd(t.prototype),"fromJson",this).call(this,e)}},{key:"toServerJSONObject",value:function(){return fd(hd(t.prototype),"toServerJSONObject",this).call(this)}}])&&ud(n.prototype,r),i&&ud(n,i),t}();function dd(e){return(dd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vd(e,t){return!t||"object"!==dd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gd(e,t,n){return(gd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function bd(e){return(bd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sd(e,t){return(Sd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UGCMapLayer=yd;var _d=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=vd(this,bd(t).call(this,e))).datasetInfo=null,n.displayFilter=null,n.joinItems=null,n.representationField=null,n.ugcLayerType=null,n.CLASS_NAME="SuperMap.UGCSubLayer",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sd(e,t)}(t,yd),n=t,(r=[{key:"fromJson",value:function(e){if(gd(bd(t.prototype),"fromJson",this).call(this,e),this.datasetInfo&&(this.datasetInfo=new ls(this.datasetInfo)),this.joinItems&&this.joinItems.length){for(var n=[],r=0;r<this.joinItems.length;r++)n[r]=new so(this.joinItems[r]);this.joinItems=n}}},{key:"destroy",value:function(){gd(bd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"toServerJSONObject",value:function(){var e=gd(bd(t.prototype),"toServerJSONObject",this).call(this);if(e.joinItems){for(var n=[],r=0;r<e.joinItems.length;r++)e.joinItems[r].toServerJSONObject&&(n[r]=e.joinItems[r].toServerJSONObject());e.joinItems=n}return e.datasetInfo&&e.datasetInfo.toServerJSONObject&&(e.datasetInfo=e.datasetInfo.toServerJSONObject()),e}}])&&md(n.prototype,r),i&&md(n,i),t}();function wd(e){return(wd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Od(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xd(e,t){return!t||"object"!==wd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Cd(e,t,n){return(Cd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Td(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Td(e){return(Td=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pd(e,t){return(Pd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UGCSubLayer=_d;var Ed=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=xd(this,Td(t).call(this,e))).theme=null,n.themeElementPosition=null,n.CLASS_NAME="SuperMap.ServerTheme",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pd(e,t)}(t,_d),n=t,(r=[{key:"destroy",value:function(){Cd(Td(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){Cd(Td(t.prototype),"fromJson",this).call(this,e);var n=this.theme;switch(n&&n.type){case"LABEL":this.theme=fy.fromObj(n);break;case"UNIQUE":this.theme=gy.fromObj(n);break;case"GRAPH":this.theme=jy.fromObj(n);break;case"DOTDENSITY":this.theme=By.fromObj(n);break;case"GRADUATEDSYMBOL":this.theme=Qy.fromObj(n);break;case"RANGE":this.theme=rd.fromObj(n)}this.themeElementPosition&&(this.themeElementPosition=new _e(this.themeElementPosition.x,this.themeElementPosition.y))}},{key:"toServerJSONObject",value:function(){var e=Cd(Td(t.prototype),"toServerJSONObject",this).call(this);return e.themeElementPosition&&e.themeElementPosition.toServerJSONObject&&(e.themeElementPosition=e.themeElementPosition.toServerJSONObject()),e.theme&&e.theme.toServerJSONObject&&(e.theme=e.theme.toServerJSONObject()),e}}])&&Od(n.prototype,r),i&&Od(n,i),t}();function kd(e){return(kd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Md(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ad(e,t){return!t||"object"!==kd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ld(e,t,n){return(Ld="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=jd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function jd(e){return(jd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Nd(e,t){return(Nd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ServerTheme=Ed;var Rd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=Ad(this,jd(t).call(this,e))).colorDictionarys=null,n.brightness=null,n.colorGradientType=null,n.colors=null,n.contrast=null,n.dashStyle=null,n.gridType=null,n.horizontalSpacing=null,n.sizeFixed=null,n.solidStyle=null,n.specialColor=null,n.specialValue=null,n.specialValueTransparent=null,n.verticalSpacing=null,n.CLASS_NAME="SuperMap.Grid",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nd(e,t)}(t,_d),n=t,(r=[{key:"destroy",value:function(){Ld(jd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){if(Ld(jd(t.prototype),"fromJson",this).call(this,e),this.specialColor&&(this.specialColor=new fn(this.specialColor.red,this.specialColor.green,this.specialColor.blue)),this.colors){var n,r=[];for(var i in this.colors)n=this.colors[i],r.push(new fn(n.red,n.green,n.blue));this.colors=r}if(this.dashStyle&&(this.dashStyle=new pn(this.dashStyle)),this.solidStyle&&(this.solidStyle=new pn(this.solidStyle)),this.colorDictionary){var o,a=[];for(var s in this.colorDictionary)o=this.colorDictionary[s],a.push(new Ga({elevation:s,color:o}));this.colorDictionarys=a}delete this.colorDictionary}},{key:"toServerJSONObject",value:function(){var e=Ld(jd(t.prototype),"toServerJSONObject",this).call(this);return e.dashStyle&&e.dashStyle.toServerJSONObject&&(e.dashStyle=e.dashStyle.toServerJSONObject()),e.solidStyle&&e.solidStyle.toServerJSONObject&&(e.solidStyle=e.solidStyle.toServerJSONObject()),e}}])&&Md(n.prototype,r),i&&Md(n,i),t}();function Id(e){return(Id="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Fd(e,t){return!t||"object"!==Id(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bd(e,t,n){return(Bd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ud(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ud(e){return(Ud=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gd(e,t){return(Gd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Grid=Rd;var zd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=Fd(this,Ud(t).call(this,e))).brightness=null,n.colorSpaceType=null,n.contrast=null,n.displayBandIndexes=null,n.transparent=null,n.transparentColor=null,n.transparentColorTolerance=null,n.CLASS_NAME="SuperMap.Image",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gd(e,t)}(t,_d),n=t,(r=[{key:"destroy",value:function(){Bd(Ud(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){Bd(Ud(t.prototype),"fromJson",this).call(this,e),this.transparentColor&&(this.transparentColor=new fn(this.transparentColor.red,this.transparentColor.green,this.transparentColor.blue))}},{key:"toServerJSONObject",value:function(){return Bd(Ud(t.prototype),"toServerJSONObject",this).call(this)}}])&&Dd(n.prototype,r),i&&Dd(n,i),t}();function Vd(e){return(Vd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jd(e,t){return!t||"object"!==Vd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qd(e,t,n){return(qd="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Wd(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Wd(e){return(Wd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qd(e,t){return(Qd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Image=zd;var Yd=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=Jd(this,Wd(t).call(this,e))).style=null,n.CLASS_NAME="SuperMap.Vector",n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qd(e,t)}(t,_d),n=t,(i=[{key:"destroy",value:function(){qd(Wd(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"fromJson",value:function(e){qd(Wd(t.prototype),"fromJson",this).call(this,e);var n=this.style;n&&(this.style=new pn(n))}},{key:"toServerJSONObject",value:function(){var e=r.toServerJSONObject();return e.style&&e.style.toServerJSONObject&&(e.style=e.style.toServerJSONObject()),e}}])&&Hd(n.prototype,i),o&&Hd(n,o),t}();function Xd(e){return(Xd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kd(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zd(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $d(e,t,n){return($d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=em(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function em(e){return(em=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tm(e,t){return(tm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Vector=Yd;var nm=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=em(t).call(this,e,n))||"object"!==Xd(o)&&"function"!=typeof o?Zd(i):o).isTempLayers=!1,n&&be.extend(Zd(r),n),r.CLASS_NAME="SuperMap.GetLayersInfoService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tm(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){$d(em(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(){var e=this,t=e.url.substr(e.url.length-1,1);e.isTempLayers?e.url+=".json?":(e.url+="/"===t?"":"/",e.url+="layers.json?"),e.request({method:"GET",params:null,scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t,n;n=(t=!!(e=be.transformResult(e))&&e.length>0?e[0].subLayers.layers:null)?t.length:0,this.handleLayers(n,t),this.events.triggerEvent("processCompleted",{result:e[0]})}},{key:"handleLayers",value:function(e,t){var n;if(e)for(var r=0;r<e;r++){if(t[r].subLayers&&t[r].subLayers.layers&&t[r].subLayers.layers.length>0)this.handleLayers(t[r].subLayers.layers.length,t[r].subLayers.layers);else switch(t[r].ugcLayerType){case"THEME":(n=new Ed).fromJson(t[r]),t[r]=n;break;case"GRID":(n=new Rd).fromJson(t[r]),t[r]=n;break;case"IMAGE":(n=new zd).fromJson(t[r]),t[r]=n;break;case"VECTOR":(n=new Yd).fromJson(t[r]),t[r]=n}}}}])&&Kd(n.prototype,r),i&&Kd(n,i),t}();function rm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.GetLayersInfoService=nm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var im=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.bounds=null,this.searchRadius=0,this.zValueFieldName=null,this.zValueScale=1,this.resolution=null,this.filterQueryParameter=null,this.outputDatasetName=null,this.outputDatasourceName=null,this.pixelFormat=null,this.dataset=null,this.inputPoints=null,this.InterpolationAnalystType="dataset",this.clipParam=null,be.extend(this,t),this.CLASS_NAME="SuperMap.InterpolationAnalystParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)if("inputPoints"===n&&"geometry"===e.InterpolationAnalystType){for(var r=[],i=0;i<e.inputPoints.length;i++){var o=e.inputPoints[i],a={x:o.x,y:o.y,z:o.tag};r.push(a)}t[n]=r}else t[n]=e[n]}}],(n=[{key:"destroy",value:function(){var e=this;e.bounds=null,e.searchRadius=null,e.zValueFieldName=null,e.zValueScale=null,e.resolution=null,e.filterQueryParameter=null,e.outputDatasetName=null,e.pixelFormat=null}}])&&rm(t.prototype,n),r&&rm(t,r),e}();function om(e){return(om="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function am(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function lm(e,t,n){return(lm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=um(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function um(e){return(um=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cm(e,t){return(cm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationAnalystParameters=im;var fm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=um(t).call(this,e))||"object"!==om(i)&&"function"!=typeof i?sm(r):i).smooth=.1,n.tension=40,n.searchMode=null,n.expectedCount=12,n.maxPointCountForInterpolation=200,n.maxPointCountInNode=50,e&&be.extend(sm(n),e),n.CLASS_NAME="SuperMap.InterpolationRBFAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cm(e,t)}(t,im),n=t,i=[{key:"toObject",value:function(e,t){for(var n in e)t[n]=e[n]}}],(r=[{key:"destroy",value:function(){lm(um(t.prototype),"destroy",this).call(this);var e=this;e.smooth=null,e.tension=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&am(n.prototype,r),i&&am(n,i),t}();function hm(e){return(hm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ym(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dm(e,t,n){return(dm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mm(e){return(mm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vm(e,t){return(vm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationRBFAnalystParameters=fm;var gm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=mm(t).call(this,e))||"object"!==hm(i)&&"function"!=typeof i?ym(r):i,e&&be.extend(ym(n),e),n.CLASS_NAME="SuperMap.InterpolationDensityAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vm(e,t)}(t,im),n=t,(r=[{key:"destroy",value:function(){dm(mm(t.prototype),"destroy",this).call(this)}}])&&pm(n.prototype,r),i&&pm(n,i),t}();function bm(e){return(bm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wm(e,t,n){return(wm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Om(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Om(e){return(Om=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xm(e,t){return(xm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationDensityAnalystParameters=gm;var Cm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Om(t).call(this,e))||"object"!==bm(i)&&"function"!=typeof i?_m(r):i).power=2,n.searchMode=null,n.expectedCount=12,e&&be.extend(_m(n),e),n.CLASS_NAME="SuperMap.InterpolationIDWAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xm(e,t)}(t,im),n=t,(r=[{key:"destroy",value:function(){wm(Om(t.prototype),"destroy",this).call(this);this.power=null,this.searchMode=null,this.expectedCount=null}}])&&Sm(n.prototype,r),i&&Sm(n,i),t}();function Tm(e){return(Tm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Em(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function km(e,t,n){return(km="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Mm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Mm(e){return(Mm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Am(e,t){return(Am=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationIDWAnalystParameters=Cm;var Lm=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Mm(t).call(this,e))||"object"!==Tm(i)&&"function"!=typeof i?Em(r):i).type=null,n.mean=null,n.angle=0,n.nugget=0,n.range=0,n.sill=0,n.variogramMode=Q.SPHERICAL,n.exponent=Y.EXP1,n.searchMode=null,n.expectedCount=12,n.maxPointCountForInterpolation=200,n.maxPointCountInNode=50,e&&be.extend(Em(n),e),n.CLASS_NAME="SuperMap.InterpolationKrigingAnalystParameters",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Am(e,t)}(t,im),n=t,(r=[{key:"destroy",value:function(){km(Mm(t.prototype),"destroy",this).call(this);var e=this;e.type=null,e.mean=null,e.angle=null,e.nugget=null,e.range=null,e.sill=null,e.variogramMode=null,e.exponent=null,e.searchMode=null,e.expectedCount=null,e.maxPointCountForInterpolation=null,e.maxPointCountInNode=null}}])&&Pm(n.prototype,r),i&&Pm(n,i),t}();function jm(e){return(jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rm(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Im(e,t,n){return(Im="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Dm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Dm(e){return(Dm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Fm(e,t){return(Fm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.InterpolationKrigingAnalystParameters=Lm;var Bm=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Dm(t).call(this,e,n))||"object"!==jm(o)&&"function"!=typeof o?Rm(i):o).mode=null,n&&be.extend(Rm(r),n),r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fm(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Im(Dm(t.prototype),"destroy",this).call(this),this.mode=null,this.CLASS_NAME="SuperMap.InterpolationAnalystService"}},{key:"processAsync",value:function(e){var t={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),e instanceof gm?(n.mode="Density","geometry"===e.InterpolationAnalystType?n.url+="geometry/interpolation/density":n.url+="datasets/"+e.dataset+"/interpolation/density"):e instanceof Cm?(n.mode="IDW","geometry"===e.InterpolationAnalystType?n.url+="geometry/interpolation/idw":n.url+="datasets/"+e.dataset+"/interpolation/idw"):e instanceof fm?(n.mode="RBF","geometry"===e.InterpolationAnalystType?n.url+="geometry/interpolation/rbf":n.url+="datasets/"+e.dataset+"/interpolation/rbf"):e instanceof Lm&&(n.mode="Kriging","geometry"===e.InterpolationAnalystType?n.url+="geometry/interpolation/kriging":n.url+="datasets/"+e.dataset+"/interpolation/kriging"),im.toObject(e,t);var r=be.toJSON(t);n.url+=".json?returnContent=true",n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&Nm(n.prototype,r),i&&Nm(n,i),t}();function Um(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.InterpolationAnalystService=Bm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Gm=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.query="",this.resolution=80,this.method=0,this.meshType=0,this.fields="",this.radius=300,this.meshSizeUnit=ee.METER,this.radiusUnit=ee.METER,this.areaUnit=$.SQUAREMILE,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.KernelDensityJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.method=null,this.radius=null,this.meshType=null,this.fields=null,this.meshSizeUnit=null,this.radiusUnit=null,this.areaUnit=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Um(t.prototype,n),r&&Um(t,r),e}();function zm(e){return(zm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hm(e,t){return!t||"object"!==zm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Jm(e,t,n){return(Jm="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qm(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qm(e){return(qm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wm(e,t){return(Wm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.KernelDensityJobParameter=Gm;var Qm=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Hm(this,qm(t).call(this,e,n))).url+="/spatialanalyst/density",r.CLASS_NAME="SuperMap.KernelDensityJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wm(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){Jm(qm(t.prototype),"destroy",this).call(this)}},{key:"getKernelDensityJobs",value:function(){Jm(qm(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getKernelDensityJob",value:function(e){Jm(qm(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addKernelDensityJob",value:function(e,n){Jm(qm(t.prototype),"addJob",this).call(this,this.url,e,Gm,n)}}])&&Vm(n.prototype,r),i&&Vm(n,i),t}();r.KernelDensityJobsService=Qm;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ym=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="LabelMatrixCell"};function Xm(e){return(Xm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Km(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zm(e){return(Zm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ev(e,t){return(ev=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LabelMatrixCell=Ym;var tv=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=Zm(t).call(this,e))||"object"!==Xm(i)&&"function"!=typeof i?$m(r):i).height=0,n.pathField=null,n.rotation=0,n.width=0,n.sizeFixed=!1,n.type="IMAGE",e&&be.extend($m(n),e),n.CLASS_NAME="SuperMap.LabelImageCell",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ev(e,t)}(t,Ym),n=t,(r=[{key:"destroy",value:function(){var e=this;e.height=null,e.pathField=null,e.rotation=null,e.width=null,e.sizeFixed=null}}])&&Km(n.prototype,r),i&&Km(n,i),t}();function nv(e){return(nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iv(e){return(iv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ov(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function av(e,t){return(av=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LabelImageCell=tv;var sv=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=iv(t).call(this,e))||"object"!==nv(i)&&"function"!=typeof i?ov(r):i).style=new pn,n.symbolIDField=null,n.type="SYMBOL",e&&be.extend(ov(n),e),n.CLASS_NAME="SuperMap.LabelSymbolCell",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&av(e,t)}(t,Ym),n=t,(r=[{key:"destroy",value:function(){this.style&&(this.style.destroy(),this.style=null),this.symbolIDField=null}}])&&rv(n.prototype,r),i&&rv(n,i),t}();function lv(e){return(lv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cv(e){return(cv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hv(e,t){return(hv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LabelSymbolCell=sv;var pv=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=cv(t).call(this,e))||"object"!==lv(i)&&"function"!=typeof i?fv(r):i).themeLabel=new fy,n.type="THEME",e&&be.extend(fv(n),e),n.CLASS_NAME=" SuperMap.LabelThemeCell",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hv(e,t)}(t,Ym),n=t,(r=[{key:"destroy",value:function(){this.themeLabel&&(this.themeLabel.destroy(),this.themeLabel=null)}}])&&uv(n.prototype,r),i&&uv(n,i),t}();function yv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.LabelThemeCell=pv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=null,this.isVisible=null,this.displayFilter=null,this.fieldValuesDisplayFilter=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.LayerStatus"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerName=null,this.isVisible=null,this.displayFilter=null}},{key:"toJSON",value:function(){var e="{";e+='"type":"UGC",';var t=[];return this.layerName&&(t.push('"name":"'+this.layerName+'"'),t.push('"visible":'+this.isVisible)),this.displayFilter&&t.push('"displayFilter":"'+this.displayFilter+'"'),(this.minScale||0==this.minScale)&&t.push('"minScale":'+this.minScale),(this.maxScale||0==this.maxScale)&&t.push('"maxScale":'+this.maxScale),this.fieldValuesDisplayFilter&&t.push('"fieldValuesDisplayFilter":'+be.toJSON(this.fieldValuesDisplayFilter)),e+=t,e+="}"}}])&&yv(t.prototype,n),r&&yv(t,r),e}();function mv(e){return(mv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function gv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function bv(e,t,n){return(bv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Sv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Sv(e){return(Sv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _v(e,t){return(_v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.LayerStatus=dv;var wv=function(e){function t(e,n){var r,i,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Sv(t).call(this,e,n))||"object"!==mv(o)&&"function"!=typeof o?gv(i):o).projection=null,r.CLASS_NAME="SuperMap.MapService",n&&be.extend(gv(r),n);var a=gv(r);if(a.projection){var s=a.projection.split(":");s instanceof Array&&(2===s.length&&(a.url+='?prjCoordSys={"epsgCode":'+s[1]+"}"),1===s.length&&(a.url+='?prjCoordSys={"epsgCode":'+s[0]+"}"))}return r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_v(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){bv(Sv(t.prototype),"destroy",this).call(this);var e=this;e.events&&(e.events.un(e.eventListeners),e.events.listeners=null,e.events.destroy(),e.events=null,e.eventListeners=null)}},{key:"processAsync",value:function(){this.request({method:"GET",scope:this,success:this.serviceProcessCompleted,failure:this.serviceProcessFailed})}},{key:"serviceProcessCompleted",value:function(e){var t=(e=be.transformResult(e)).code>=200&&e.code<300||0==e.code||304===e.code,n=e.code&&t;!e.code||n?this.events&&this.events.triggerEvent("processCompleted",{result:e}):this.events.triggerEvent("processFailed",{error:e})}}])&&vv(n.prototype,r),i&&vv(n,i),t}();function Ov(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MapService=wv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.extractRegion=null,this.expression=null,this.isZip=!1,this.ignoreNoValue=!1,this.targetDatasource=null,this.resultGridName=null,this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.MathExpressionAnalysisParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)if("dataset"!==n&&(t[n]=e[n]),"extractRegion"===n&&e[n]){for(var r=e[n].components[0].components,i={},o=[],a=r.length,s=0;s<a-1;s++){var l={};l.x=r[s].x,l.y=r[s].y,o.push(l)}i.points=o,i.type="REGION",t[n]=i}}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.bounds=null,e.expression=null,e.isZip=!0,e.ignoreNoValue=!0,e.targetDatasource=null,e.resultGridName=null,e.deleteExistResultDataset=null}}])&&Ov(t.prototype,n),r&&Ov(t,r),e}();function Cv(e){return(Cv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Tv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pv(e,t){return!t||"object"!==Cv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ev(e,t,n){return(Ev="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=kv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function kv(e){return(kv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mv(e,t){return(Mv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.MathExpressionAnalysisParameters=xv;var Av=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Pv(this,kv(t).call(this,e,n))).CLASS_NAME="SuperMap.MathExpressionAnalysisService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mv(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Ev(kv(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var n={};e instanceof xv&&(t.url+="datasets/"+e.dataset+"/mathanalyst"),xv.toObject(e,n);var r=be.toJSON(n);t.url+=".json?returnContent=true",t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&Tv(n.prototype,r),i&&Tv(n,i),t}();function Lv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.MathExpressionAnalysisService=Av;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jv=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.geometry=t,this.unit=h.METER,this.prjCoordSys=null,this.distanceMode=null,n&&be.extend(this,n),this.CLASS_NAME="SuperMap.MeasureParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.geometry=null,this.unit=null,this.prjCoordSys=null}}])&&Lv(t.prototype,n),r&&Lv(t,r),e}();function Nv(e){return(Nv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Iv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dv(e,t,n){return(Dv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Fv(e){return(Fv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bv(e,t){return(Bv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.MeasureParameters=jv;var Uv=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Fv(t).call(this,e,n))||"object"!==Nv(o)&&"function"!=typeof o?Iv(i):o).measureMode=f.DISTANCE,n&&be.extend(Iv(r),n),r.CLASS_NAME="SuperMap.MeasureService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bv(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Dv(Fv(t.prototype),"destroy",this).call(this);this.measureMode=null}},{key:"processAsync",value:function(e){if(e instanceof jv){var t,n,r,i=this,o=e.geometry;if(o){r=i.url.substr(i.url.length-1,1),i.measureMode===f.AREA?i.url+="/"===r?"area.json?":"/area.json?":i.url+="/"===r?"distance.json?":"/distance.json?";var a,s,l,u=Pn.fromGeometry(o);if(u)t=u.parts[0],n=u.points.splice(0,t),e.prjCoordSys?("object"===Nv(e.prjCoordSys)?a='{"epsgCode"'+(s=e.prjCoordSys.projCode).substring(s.indexOf(":"),s.length)+"}":"string"==typeof e.prjCoordSys&&(a='{"epsgCode"'+e.prjCoordSys.substring(e.prjCoordSys.indexOf(":"),e.prjCoordSys.length)+"}"),l={point2Ds:be.toJSON(n),unit:e.unit,prjCoordSys:a}):l={point2Ds:be.toJSON(n),unit:e.unit},i.request({method:"GET",params:l,scope:i,success:i.serviceProcessCompleted,failure:i.serviceProcessFailed})}}}}])&&Rv(n.prototype,r),i&&Rv(n,i),t}();function Gv(e){return(Gv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vv(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Hv(e,t,n){return(Hv="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Jv(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Jv(e){return(Jv=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qv(e,t){return(qv=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.MeasureService=Uv;var Wv=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Jv(t).call(this,e,n))||"object"!==Gv(o)&&"function"!=typeof o?Vv(i):o).mode=null,n&&be.extend(Vv(r),n),r.CLASS_NAME="SuperMap.OverlayAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qv(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Hv(Jv(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),e instanceof vs?(n.mode="datasets",n.url+="datasets/"+e.sourceDataset+"/overlay.json?returnContent=true",vs.toObject(e,t)):e instanceof Tf&&(n.mode="geometry",e.operateGeometries&&e.sourceGeometries?n.url+="geometry/overlay/batch.json?returnContent=true&ignoreAnalystParam=true":n.url+="geometry/overlay.json?returnContent=true",Tf.toObject(e,t));var r=be.toJSON(t);n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&zv(n.prototype,r),i&&zv(n,i),t}();function Qv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OverlayAnalystService=Wv;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yv=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetOverlay="",this.mode="",this.srcFields="",this.overlayFields="",this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.OverlayGeoJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!=n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetOverlay=null,this.mode=null,this.srcFields=null,this.overlayFields=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&Qv(t.prototype,n),r&&Qv(t,r),e}();function Xv(e){return(Xv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Kv(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zv(e,t){return!t||"object"!==Xv(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $v(e,t,n){return($v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=eg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function eg(e){return(eg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tg(e,t){return(tg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayGeoJobParameter=Yv;var ng=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Zv(this,eg(t).call(this,e,n))).url+="/spatialanalyst/overlay",r.CLASS_NAME="SuperMap.OverlayGeoJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tg(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){$v(eg(t.prototype),"destroy",this).call(this)}},{key:"getOverlayGeoJobs",value:function(){$v(eg(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getOverlayGeoJob",value:function(e){$v(eg(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addOverlayGeoJob",value:function(e,n){$v(eg(t.prototype),"addJob",this).call(this,this.url,e,Yv,n)}}])&&Kv(n.prototype,r),i&&Kv(n,i),t}();function rg(e){return(rg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ig(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function og(e,t){return!t||"object"!==rg(t)&&"function"!=typeof t?ag(e):t}function ag(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sg(e,t,n){return(sg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=lg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function lg(e){return(lg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ug(e,t){return(ug=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OverlayGeoJobsService=ng;var cg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=og(this,lg(t).call(this,e))).returnContent=!0,n.bounds=null,be.extend(ag(n),e),n.CLASS_NAME="SuperMap.QueryByBoundsParameters",n):og(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ug(e,t)}(t,Ma),n=t,(r=[{key:"destroy",value:function(){sg(lg(t.prototype),"destroy",this).call(this);this.returnContent=null,this.bounds&&(this.bounds=null)}}])&&ig(n.prototype,r),i&&ig(n,i),t}();function fg(e){return(fg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function hg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pg(e,t){return!t||"object"!==fg(t)&&"function"!=typeof t?yg(e):t}function yg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dg(e,t,n){return(dg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mg(e){return(mg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vg(e,t){return(vg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByBoundsParameters=cg;var gg=function(e){function t(e,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=pg(this,mg(t).call(this,e,n))).returnContent=!1,r.format=i.GEOJSON,r.returnFeatureWithFieldCaption=!1,n&&be.extend(yg(r),n),r.CLASS_NAME="SuperMap.QueryService";var o,a=yg(r);return a.url?(n&&n.format&&(a.format=n.format.toUpperCase()),o=a.url.substr(a.url.length-1,1),a.url+="/"===o?"queryResults.json?":"/queryResults.json?",r):pg(r)}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vg(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){dg(mg(t.prototype),"destroy",this).call(this);this.returnContent=null,this.format=null}},{key:"processAsync",value:function(e){if(e instanceof Ma){var t,n=this,r=null;n.returnContent=e.returnContent,t=n.getJsonParameters(e),n.returnContent?n.url+="returnContent="+n.returnContent:(r=e.returnCustomResult)&&(n.url+="returnCustomResult="+r),n.returnFeatureWithFieldCaption=e.returnFeatureWithFieldCaption,n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"serviceProcessCompleted",value:function(e){e=be.transformResult(e);var t=new Nn;if(e&&e.recordsets)for(var n=0,r=e.recordsets,o=r.length;n<o;n++)r[n].features&&(!0===this.returnFeatureWithFieldCaption&&r[n].features.map(function(e){return e.fieldNames=r[n].fieldCaptions,e}),this.format===i.GEOJSON&&(r[n].features=t.toGeoJSON(r[n].features)));this.events.triggerEvent("processCompleted",{result:e})}},{key:"getQueryParameters",value:function(e){return new Ma({customParams:e.customParams,expectCount:e.expectCount,networkType:e.networkType,queryOption:e.queryOption,queryParams:e.queryParams,startRecord:e.startRecord,prjCoordSys:e.prjCoordSys,holdTime:e.holdTime})}}])&&hg(n.prototype,r),o&&hg(n,o),t}();function bg(e){return(bg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _g(e,t){return!t||"object"!==bg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wg(e,t,n){return(wg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Og(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Og(e){return(Og=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xg(e,t){return(xg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryService=gg;var Cg=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_g(this,Og(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryByBoundsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xg(e,t)}(t,gg),n=t,(r=[{key:"destroy",value:function(){wg(Og(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(!(e instanceof cg))return null;var t,n="",r=e.bounds;return t=this.getQueryParameters(e),n+="'queryMode':'BoundsQuery','queryParameters':",n+=be.toJSON(t),n="{"+(n+=",'bounds': {'rightTop':{'y':"+r.top+",'x':"+r.right+"},'leftBottom':{'y':"+r.bottom+",'x':"+r.left+"}}")+"}"}}])&&Sg(n.prototype,r),i&&Sg(n,i),t}();function Tg(e){return(Tg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Eg(e,t){return!t||"object"!==Tg(t)&&"function"!=typeof t?kg(e):t}function kg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Mg(e,t,n){return(Mg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ag(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ag(e){return(Ag=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Lg(e,t){return(Lg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByBoundsService=Cg;var jg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=Eg(this,Ag(t).call(this,e))).distance=0,n.geometry=null,n.isNearest=null,n.returnContent=!0,be.extend(kg(n),e),n.CLASS_NAME="SuperMap.QueryByDistanceParameters",n):Eg(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lg(e,t)}(t,Ma),n=t,(r=[{key:"destroy",value:function(){Mg(Ag(t.prototype),"destroy",this).call(this);var e=this;e.returnContent=null,e.distance=null,e.isNearest=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}}])&&Pg(n.prototype,r),i&&Pg(n,i),t}();function Ng(e){return(Ng="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Rg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ig(e,t){return!t||"object"!==Ng(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Dg(e,t,n){return(Dg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Fg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Fg(e){return(Fg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Bg(e,t){return(Bg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByDistanceParameters=jg;var Ug=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Ig(this,Fg(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryByDistanceService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bg(e,t)}(t,gg),n=t,(r=[{key:"destroy",value:function(){Dg(Fg(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof jg){var t="",n=this.getQueryParameters(e),r=Pn.fromGeometry(e.geometry);return t+=e.isNearest?"'queryMode':'FindNearest','queryParameters':":"'queryMode':'DistanceQuery','queryParameters':",t+=be.toJSON(n),t="{"+(t+=",'geometry':"+be.toJSON(r)+",'distance':"+e.distance)+"}"}}}])&&Rg(n.prototype,r),i&&Rg(n,i),t}();function Gg(e){return(Gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vg(e,t){return!t||"object"!==Gg(t)&&"function"!=typeof t?Hg(e):t}function Hg(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Jg(e,t,n){return(Jg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qg(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qg(e){return(qg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wg(e,t){return(Wg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByDistanceService=Ug;var Qg=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=Vg(this,qg(t).call(this,e))).returnContent=!0,n.geometry=null,n.spatialQueryMode=u.INTERSECT,be.extend(Hg(n),e),n.CLASS_NAME="SuperMap.QueryByGeometryParameters",n):Vg(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wg(e,t)}(t,Ma),n=t,(r=[{key:"destroy",value:function(){Jg(qg(t.prototype),"destroy",this).call(this);this.returnContent=null,this.geometry=null,this.spatialQueryMode=null}}])&&zg(n.prototype,r),i&&zg(n,i),t}();function Yg(e){return(Yg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kg(e,t){return!t||"object"!==Yg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zg(e,t,n){return(Zg="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$g(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $g(e){return($g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eb(e,t){return(eb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByGeometryParameters=Qg;var tb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Kg(this,$g(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryByGeometryService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eb(e,t)}(t,gg),n=t,(r=[{key:"destroy",value:function(){Zg($g(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof Qg){var t,n="",r=e.geometry,i=Pn.fromGeometry(r);return t=this.getQueryParameters(e),n+="'queryMode':'SpatialQuery','queryParameters':",n="{"+(n+=be.toJSON(t)+",'geometry':"+be.toJSON(i)+",'spatialQueryMode':"+be.toJSON(e.spatialQueryMode))+"}"}}}])&&Xg(n.prototype,r),i&&Xg(n,i),t}();function nb(e){return(nb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ib(e,t){return!t||"object"!==nb(t)&&"function"!=typeof t?ob(e):t}function ob(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ab(e,t,n){return(ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function sb(e){return(sb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lb(e,t){return(lb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryByGeometryService=tb;var ub=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e?((n=ib(this,sb(t).call(this,e))).returnContent=!0,be.extend(ob(n),e),n.CLASS_NAME="SuperMap.QueryBySQLParameters",n):ib(n)}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lb(e,t)}(t,Ma),n=t,(r=[{key:"destroy",value:function(){ab(sb(t.prototype),"destroy",this).call(this);this.returnContent=null}}])&&rb(n.prototype,r),i&&rb(n,i),t}();function cb(e){return(cb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hb(e,t){return!t||"object"!==cb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pb(e,t,n){return(pb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function yb(e){return(yb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function db(e,t){return(db=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.QueryBySQLParameters=ub;var mb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hb(this,yb(t).call(this,e,n))).CLASS_NAME="SuperMap.QueryBySQLService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&db(e,t)}(t,gg),n=t,(r=[{key:"destroy",value:function(){pb(yb(t.prototype),"destroy",this).call(this)}},{key:"getJsonParameters",value:function(e){if(e instanceof ub){var t,n="";return t=this.getQueryParameters(e),n+="'queryMode':'SqlQuery','queryParameters':",n="{"+(n+=be.toJSON(t))+"}"}}}])&&fb(n.prototype,r),i&&fb(n,i),t}();function vb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.QueryBySQLService=mb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gb=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.point=null,this.tolerance=null,this.isIgnoreGap=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.RouteCalculateMeasureParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.point=null,e.tolerance&&(e.tolerance=null),e.isIgnoreGap&&(e.isIgnoreGap=!1)}}])&&vb(t.prototype,n),r&&vb(t,r),e}();function bb(e){return(bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _b(e,t){return!t||"object"!==bb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wb(e,t,n){return(wb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ob(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ob(e){return(Ob=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xb(e,t){return(xb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.RouteCalculateMeasureParameters=gb;var Cb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=_b(this,Ob(t).call(this,e,n))).CLASS_NAME="SuperMap.RouteCalculateMeasureService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xb(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){wb(Ob(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof gb){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="geometry/calculatemeasure";return t=this.url.substr(this.url.length-1,1),this.url+="/"===t?n+".json":"/"+n+".json",this.url+="?returnContent=true",be.toJSON(e)}}])&&Sb(n.prototype,r),i&&Sb(n,i),t}();function Tb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.RouteCalculateMeasureService=Cb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pb=function(){function e(t){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),!t)return this;this.sourceRoute=null,this.dataset=null,this.routeIDField=null,this.routeID=null,this.type=null,this.measure=null,this.offset=0,this.isIgnoreGap=!1,this.startMeasure=null,this.endMeasure=null;var n=t.sourceRoute,r={};if(n&&n instanceof Ce&&n.components){r.type=n.type,r.parts=n.parts;for(var i=[],o=0,a=n.components.length;o<a;o++)i=i.concat(n.components[o].components);r.points=i,t.sourceRoute=r}be.extend(this,t),this.CLASS_NAME="SuperMap.RouteLocatorParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;e.sourceRoute=null,e.type=null,e.measure=null,e.offset=0,e.isIgnoreGap=!1,e.startMeasure=null,e.endMeasure=null,e.dataset=null,e.routeID=null,e.routeIDField=null}}])&&Tb(t.prototype,n),r&&Tb(t,r),e}();function Eb(e){return(Eb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mb(e,t){return!t||"object"!==Eb(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ab(e,t,n){return(Ab="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Lb(e){return(Lb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jb(e,t){return(jb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.RouteLocatorParameters=Pb;var Nb=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Mb(this,Lb(t).call(this,e,n))).CLASS_NAME="SuperMap.RouteLocatorService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jb(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){Ab(Lb(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Pb){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="geometry/routelocator";return t=this.url.substr(this.url.length-1,1),e.dataset&&(n="datasets/"+e.dataset+"/linearreferencing/routelocator",e.sourceRoute=null),this.url+="/"===t?n+".json":"/"+n+".json",this.url+="?returnContent=true",be.toJSON(e)}}])&&kb(n.prototype,r),i&&kb(n,i),t}();function Rb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.RouteLocatorService=Nb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ib=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.fieldNames=null,this.fieldValues=null,this.geometry=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ServerFeature"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){var n=null;if(t)return(n=t.geometry)&&(n=Pn.fromJson(n)),new e({fieldNames:t.fieldNames,fieldValues:t.fieldValues,geometry:n})}}],(n=[{key:"destroy",value:function(){var e=this;e.fieldNames=null,e.fieldValues=null,e.geometry&&(e.geometry.destroy(),e.geometry=null)}},{key:"toFeature",value:function(){var e,t,n,r,i={},o=this;for(var a in e=o.fieldNames,t=o.fieldValues,e)i[e[a]]=t[a];return o.geometry&&(n=o.geometry.toGeometry()),r=new en(n,i),o.geometry&&o.geometry.id&&(r.fid=o.geometry.id),r}}])&&Rb(t.prototype,n),r&&Rb(t,r),e}();function Db(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerFeature=Ib;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Fb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.resourceID=null,this.tempLayerName=null,this.layerInfo=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SetLayerInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.resourceID=null,this.tempLayerName=null,this.layerInfo=null}}])&&Db(t.prototype,n),r&&Db(t,r),e}();function Bb(e){return(Bb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ub(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function zb(e,t,n){return(zb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Vb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Vb(e){return(Vb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hb(e,t){return(Hb=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SetLayerInfoParameters=Fb;var Jb=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=Vb(t).call(this,e,n))||"object"!==Bb(o)&&"function"!=typeof o?Gb(i):o,n&&be.extend(Gb(r),n),r.CLASS_NAME="SuperMap.SetLayerInfoService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hb(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){zb(Vb(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e){var t=this;t.url+=".json";var n=be.toJSON(e);t.request({method:"PUT",data:n,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}])&&Ub(n.prototype,r),i&&Ub(n,i),t}();function qb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SetLayerInfoService=Jb;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Wb=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.isTempLayers=null,this.resourceID=null,this.layersInfo=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SetLayersInfoParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.isTempLayers=null,this.resourceID=null,this.layersInfo=null}}])&&qb(t.prototype,n),r&&qb(t,r),e}();function Qb(e){return(Qb="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yb(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xb(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Kb(e,t,n){return(Kb="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Zb(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Zb(e){return(Zb=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $b(e,t){return($b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SetLayersInfoParameters=Wb;var eS=function(e){function t(e,n){var i,o,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=Zb(t).call(this,e,n))||"object"!==Qb(a)&&"function"!=typeof a?Xb(o):a).resourceID=null,i.isTempLayers=!1,n&&r.Util.extend(Xb(i),n),i.CLASS_NAME="SuperMap.SetLayersInfoService",i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$b(e,t)}(t,Si),n=t,(i=[{key:"destroy",value:function(){Kb(Zb(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e){var t,n,r=[],i=this,o="";n=i.url.substr(i.url.length-1,1),i.url+="/"===n?"":"/",i.isTempLayers?(i.url+="tempLayersSet/"+i.resourceID,o="PUT"):(i.url+="tempLayersSet",o="POST"),i.url+=".json?",e.subLayers||(e.subLayers={layers:[]}),e.subLayers.layers||(e.subLayers.layers=[]);var a=e.subLayers.layers,s=a.length;for(var l in a){if("GRID"===a[l].ugcLayerType){var u={},c=a[l].colorDictionarys;for(var f in c){u[c[f].elevation]=c[f].color}}a[l].colorDictionary=u,delete a[l].colorDictionarys}for(var h=0;h<s;h++)a[h].toJsonObject?r.push(a[h].toJsonObject()):r.push(a[h]);(t=be.extend(t,e)).subLayers={layers:r},t.object=null;var p=be.toJSON([t]);i.request({method:o,data:p,scope:i,success:i.serviceProcessCompleted,failure:i.serviceProcessFailed})}}}])&&Yb(n.prototype,i),o&&Yb(n,o),t}();function tS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SetLayersInfoService=eS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerStatusList=[],this.holdTime=15,this.resourceID=null,t&&be.extend(this,t)}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.layerStatusList=null,this.holdTime=null,this.resourceID=null}},{key:"toJSON",value:function(){var e="{";e+='"layers":[';for(var t=[],n=0,r=this.layerStatusList.length;n<r;n++)t.push(this.layerStatusList[n].toJSON());return e+=t,e+="]",e+="}"}}])&&tS(t.prototype,n),r&&tS(t,r),e}();function rS(e){return(rS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function iS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function aS(e,t,n){return(aS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function sS(e){return(sS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function lS(e,t){return(lS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SetLayerStatusParameters=nS;var uS=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=sS(t).call(this,e,n))||"object"!==rS(o)&&"function"!=typeof o?oS(i):o).lastparams=null,r.mapUrl=e,n&&be.extend(oS(r),n),r.CLASS_NAME="SuperMap.SetLayerStatusService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lS(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){aS(sS(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof nS){var t=this;t.url=t.mapUrl;var n=t.url.substr(t.url.length-1,1);if(t.url+="/"===n?"":"/",null==e.resourceID)t.url+="tempLayersSet",t.url+=".json?",t.lastparams=e,t.request({method:"POST",scope:t,success:t.createTempLayerComplete,failure:t.serviceProcessFailed});else{t.url+="tempLayersSet/"+e.resourceID,t.url+=".json?",t.url+="elementRemain=true&reference="+e.resourceID+"&holdTime="+e.holdTime.toString();var r="[{";r+='"type":"UGC",',null!=e.layerStatusList&&e.layerStatusList.length>0&&(r+='"subLayers":'+e.toJSON()),r+=',"visible":true,',r+='"name":"'+this.getMapName(this.mapUrl)+'"',r+="}]",t.request({method:"PUT",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}}},{key:"createTempLayerComplete",value:function(e){(e=be.transformResult(e)).succeed&&(this.lastparams.resourceID=e.newResourceID),this.processAsync(this.lastparams)}},{key:"getMapName",value:function(e){var t=e;"/"===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1));var n=t.lastIndexOf("/");return t.substring(n+1,t.length)}},{key:"serviceProcessCompleted",value:function(e){null!=(e=be.transformResult(e))&&null!=this.lastparams&&(e.newResourceID=this.lastparams.resourceID),this.events.triggerEvent("processCompleted",{result:e})}}])&&iS(n.prototype,r),i&&iS(n,i),t}();function cS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SetLayerStatusService=uS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var fS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetQuery="",this.geometryQuery="",this.mode=u.CONTAIN,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SingleObjectQueryJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetQuery=null,this.geometryQuery=null,this.mode=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&cS(t.prototype,n),r&&cS(t,r),e}();function hS(e){return(hS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yS(e,t){return!t||"object"!==hS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dS(e,t,n){return(dS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mS(e){return(mS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vS(e,t){return(vS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SingleObjectQueryJobsParameter=fS;var gS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=yS(this,mS(t).call(this,e,n))).url+="/spatialanalyst/query",r.CLASS_NAME="SuperMap.SingleObjectQueryJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vS(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){dS(mS(t.prototype),"destroy",this).call(this)}},{key:"getQueryJobs",value:function(){dS(mS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getQueryJob",value:function(e){dS(mS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addQueryJob",value:function(e,n){dS(mS(t.prototype),"addJob",this).call(this,this.url,e,fS,n)}}])&&pS(n.prototype,r),i&&pS(n,i),t}();function bS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SingleObjectQueryJobsService=gS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.keyWord=null,this.returnPosition=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.StopQueryParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){be.reset(this)}}])&&bS(t.prototype,n),r&&bS(t,r),e}();function _S(e){return(_S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OS(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xS(e,t,n){return(xS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function CS(e){return(CS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TS(e,t){return(TS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.StopQueryParameters=SS;var PS=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=CS(t).call(this,e,n))||"object"!==_S(o)&&"function"!=typeof o?OS(i):o,n=n||{},be.extend(OS(r),n),r.CLASS_NAME="SuperMap.StopQueryService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TS(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){xS(CS(t.prototype),"destroy",this).call(this),be.reset(this)}},{key:"processAsync",value:function(e){if(e instanceof SS){var t,n=this;t=n.url.substr(n.url.length-1,1),n.url+="/"===t?"":"/",n.url+="stops/keyword/"+e.keyWord,n.url+=".json?",n.request({method:"GET",params:{returnPosition:e.returnPosition},scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}}])&&wS(n.prototype,r),i&&wS(n,i),t}();function ES(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.StopQueryService=PS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.groupField="",this.attributeField="",this.statisticModes="",this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SummaryAttributesJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.groupField=null,this.attributeField=null,this.statisticModes=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&ES(t.prototype,n),r&&ES(t,r),e}();function MS(e){return(MS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LS(e,t){return!t||"object"!==MS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jS(e,t,n){return(jS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function NS(e){return(NS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RS(e,t){return(RS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryAttributesJobsParameter=kS;var IS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=LS(this,NS(t).call(this,e,n))).url+="/spatialanalyst/summaryattributes",r.CLASS_NAME="SuperMap.SummaryAttributesJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RS(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){jS(NS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryAttributesJobs",value:function(){jS(NS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryAttributesJob",value:function(e){jS(NS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryAttributesJob",value:function(e,n){jS(NS(t.prototype),"addJob",this).call(this,this.url,e,kS,n)}}])&&AS(n.prototype,r),i&&AS(n,i),t}();function DS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryAttributesJobsService=IS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.query="",this.resolution=100,this.meshType=0,this.statisticModes=te.AVERAGE,this.fields="",this.type=ne.SUMMARYMESH,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SummaryMeshJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n?"output"!==n?("SUMMARYMESH"===e.type&&"regionDataset"!==n||"SUMMARYREGION"===e.type&&!r(["meshType","resolution","query"],n))&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n]);function r(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1}}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.query=null,this.resolution=null,this.statisticModes=null,this.meshType=null,this.fields=null,this.regionDataset=null,this.type=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&DS(t.prototype,n),r&&DS(t,r),e}();function BS(e){return(BS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function US(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GS(e,t){return!t||"object"!==BS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zS(e,t,n){return(zS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=VS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function VS(e){return(VS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function HS(e,t){return(HS=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryMeshJobParameter=FS;var JS=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=GS(this,VS(t).call(this,e,n))).url+="/spatialanalyst/aggregatepoints",r.CLASS_NAME="SuperMap.SummaryMeshJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&HS(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){zS(VS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryMeshJobs",value:function(){zS(VS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryMeshJob",value:function(e){zS(VS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryMeshJob",value:function(e,n){zS(VS(t.prototype),"addJob",this).call(this,this.url,e,FS,n)}}])&&US(n.prototype,r),i&&US(n,i),t}();function qS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryMeshJobsService=JS;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WS=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.regionDataset="",this.sumShape=!0,this.query="",this.standardSummaryFields=!1,this.standardFields="",this.standardStatisticModes="",this.weightedSummaryFields=!1,this.weightedFields="",this.weightedStatisticModes="",this.meshType=0,this.resolution=100,this.meshSizeUnit=ee.METER,this.type=ne.SUMMARYMESH,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.SummaryRegionJobParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"type"!==n&&"type"!==n?"output"!==n?("SUMMARYREGION"===e.type||"SUMMARYMESH"===e.type&&"regionDataset"!==n)&&(t.analyst=t.analyst||{},"query"===n&&e[n]?t.analyst[n]=e[n].toBBOX():t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):t.type=e[n]:(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.sumShape=null,this.regionDataset=null,this.query=null,this.standardSummaryFields=null,this.standardFields=null,this.standardStatisticModes=null,this.weightedSummaryFields=null,this.weightedFields=null,this.weightedStatisticModes=null,this.meshType=null,this.resolution=null,this.meshSizeUnit=null,this.type=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&qS(t.prototype,n),r&&qS(t,r),e}();function QS(e){return(QS="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YS(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XS(e,t){return!t||"object"!==QS(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KS(e,t,n){return(KS="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZS(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ZS(e){return(ZS=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $S(e,t){return($S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SummaryRegionJobParameter=WS;var e_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=XS(this,ZS(t).call(this,e,n))).url+="/spatialanalyst/summaryregion",r.CLASS_NAME="SuperMap.SummaryRegionJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$S(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){KS(ZS(t.prototype),"destroy",this).call(this)}},{key:"getSummaryRegionJobs",value:function(){KS(ZS(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getSummaryRegionJob",value:function(e){KS(ZS(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addSummaryRegionJob",value:function(e,n){KS(ZS(t.prototype),"addJob",this).call(this,this.url,e,WS,n)}}])&&YS(n.prototype,r),i&&YS(n,i),t}();function t_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SummaryRegionJobsService=e_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var n_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.SupplyCenter"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({maxWeight:t.maxWeight,nodeID:t.nodeID,resourceValue:t.resourceValue,type:t.type})}}],(n=[{key:"destroy",value:function(){this.maxWeight=null,this.nodeID=null,this.resourceValue=null,this.type=null}}])&&t_(t.prototype,n),r&&t_(t,r),e}();function r_(e){return(r_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function i_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o_(e,t){return!t||"object"!==r_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function a_(e,t,n){return(a_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=s_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function s_(e){return(s_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function l_(e,t){return(l_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.SupplyCenter=n_;var u_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=o_(this,s_(t).call(this,e,n))).CLASS_NAME="SuperMap.SurfaceAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l_(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){a_(s_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof _s){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="",r={},i=this;if(e instanceof Es)t=i.url.substr(i.url.length-1,1),i.url+="/"===t?"datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/datasets/"+e.dataset+"/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",Es.toObject(e,r),n=be.toJSON(r);else{if(!(e instanceof jf))return;t=i.url.substr(i.url.length-1,1),i.url+="/"===t?"geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true":"/geometry/"+e.surfaceAnalystMethod.toLowerCase()+".json?returnContent=true",n=be.toJSON(e)}return n}}])&&i_(n.prototype,r),i&&i_(n,i),t}();function c_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.SurfaceAnalystService=u_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var f_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.dataset=null,this.zFactor=1,this.averageCurvatureName=null,this.profileCurvatureName="",this.planCurvatureName="",this.deleteExistResultDataset=!1,be.extend(this,t),this.CLASS_NAME="SuperMap.TerrainCurvatureCalculationParameters")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"dataset"!==n&&(t[n]=e[n])}}],(n=[{key:"destroy",value:function(){var e=this;e.dataset=null,e.zFactor=1,e.averageCurvatureName=null,e.profileCurvatureName=null,e.planCurvatureName=null,e.deleteExistResultDataset=!0}}])&&c_(t.prototype,n),r&&c_(t,r),e}();function h_(e){return(h_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y_(e,t){return!t||"object"!==h_(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function d_(e,t,n){return(d_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=m_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function m_(e){return(m_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v_(e,t){return(v_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TerrainCurvatureCalculationParameters=f_;var g_=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=y_(this,m_(t).call(this,e,n))).CLASS_NAME="SuperMap.TerrainCurvatureCalculationService",r}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v_(e,t)}(t,Hi),n=t,(i=[{key:"destroy",value:function(){d_(m_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/");var n={};e instanceof f_&&(t.url+="datasets/"+e.dataset+"/terraincalculation/curvature"),f_.toObject(e,n);var i=r.Util.toJSON(n);t.url+=".json?returnContent=true",t.request({method:"POST",data:i,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}])&&p_(n.prototype,i),o&&p_(n,o),t}();function b_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TerrainCurvatureCalculationService=g_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var S_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new fn,this.end=0,this.start=0,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridRangeItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n.color=fn.fromJson(t.color),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.end=null,e.start=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&b_(t.prototype,n),r&&b_(t,r),e}();function __(e){return(__="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function w_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x_(e,t,n){return(x_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function C_(e){return(C_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T_(e,t){return(T_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGridRangeItem=S_;var P_=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=C_(t).call(this,"GRIDRANGE",e))||"object"!==__(i)&&"function"!=typeof i?O_(r):i).items=null,n.rangeMode=b.EQUALINTERVAL,n.rangeParameter=0,n.colorGradientType=_.YELLOW_RED,n.reverseColor=!1,e&&be.extend(O_(n),e),n.CLASS_NAME="SuperMap.ThemeGridRange",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T_(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){if(e){var n=new t;be.copy(n,e);var r=e.items,i=r?r.length:0;n.items=[];for(var o=0;o<i;o++)n.items.push(S_.fromObj(r[o]));return n}}}],(r=[{key:"destroy",value:function(){x_(C_(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.reverseColor=null,e.rangeMode=null,e.rangeParameter=null,e.colorGradientType=null}}])&&w_(n.prototype,r),i&&w_(n,i),t}();function E_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGridRange=P_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var k_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.color=new fn,this.unique=null,this.visible=!0,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeGridUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){var n=new e;return be.copy(n,t),n.color=fn.fromJson(t.color),n}}],(n=[{key:"destroy",value:function(){var e=this;e.caption=null,e.unique=null,e.color&&(e.color.destroy(),e.color=null),e.visible=null}},{key:"toServerJSONObject",value:function(){var e={};return(e=be.copyAttributes(e,this)).color&&e.color.toServerJSONObject&&(e.color=e.color.toServerJSONObject()),e}}])&&E_(t.prototype,n),r&&E_(t,r),e}();function M_(e){return(M_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function A_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j_(e,t,n){return(j_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=N_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function N_(e){return(N_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R_(e,t){return(R_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeGridUniqueItem=k_;var I_=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=N_(t).call(this,"GRIDUNIQUE",e))||"object"!==M_(i)&&"function"!=typeof i?L_(r):i).defaultcolor=new fn,n.items=null,e&&be.extend(L_(n),e),n.CLASS_NAME="SuperMap.ThemeGridUnique",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R_(e,t)}(t,Up),n=t,i=[{key:"fromObj",value:function(e){var n=new t,r=e.items,i=r?r.length:0;be.extend(n,e),n.items=[],n.defaultcolor=fn.fromJson(e.defaultcolor);for(var o=0;o<i;o++)n.items.push(k_.fromObj(r[o]));return n}}],(r=[{key:"destroy",value:function(){j_(N_(t.prototype),"destroy",this).call(this);var e=this;if(e.items){if(e.items.length>0)for(var n in e.items)e.items[n].destroy(),e.items[n]=null;e.items=null}e.defaultcolor&&(e.defaultcolor.destroy(),e.defaultcolor=null)}},{key:"toServerJSONObject",value:function(){var e={};if((e=be.copyAttributes(e,this)).defaultcolor&&e.defaultcolor.toServerJSONObject&&(e.defaultcolor=e.defaultcolor.toServerJSONObject()),e.items){for(var t=[],n=e.items.length,r=0;r<n;r++)t.push(e.items[r].toServerJSONObject());e.items=t}return e}}])&&A_(n.prototype,r),i&&A_(n,i),t}();function D_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeGridUnique=I_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var F_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.caption=null,this.unique=null,this.offsetX=0,this.offsetY=0,this.visible=!0,this.style=new zp,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeLabelUniqueItem"}var t,n,r;return t=e,r=[{key:"fromObj",value:function(t){if(t){var n=new e;return be.copy(n,t),n}}}],(n=[{key:"destroy",value:function(){var e=this;e.unique=null,e.caption=null,e.offsetX=null,e.offsetY=null,e.style&&(e.style.destroy(),e.style=null),e.visible=null}}])&&D_(t.prototype,n),r&&D_(t,r),e}();function B_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeLabelUniqueItem=F_;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var U_=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasetNames=null,this.dataSourceNames=null,this.joinItems=null,this.themes=null,this.displayFilters=null,this.displayOrderBys=null,this.fieldValuesDisplayFilter=null,t&&be.extend(this,t),this.CLASS_NAME="SuperMap.ThemeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){var e=this;if(e.datasetNames=null,e.dataSourceNames=null,e.joinItems){for(var t=0,n=e.joinItems,r=n.length;t<r;t++)n[t].destroy();e.joinItems=null}if(e.themes){for(var i=0,o=e.themes,a=o.length;i<a;i++)o[i].destroy();e.themes=null}}}])&&B_(t.prototype,n),r&&B_(t,r),e}();function G_(e){return(G_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H_(e,t,n){return(H_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function J_(e){return(J_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q_(e,t){return(q_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeParameters=U_;var W_=function(e){function t(e,n){var i,o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,i=!(a=J_(t).call(this,e,n))||"object"!==G_(a)&&"function"!=typeof a?V_(o):a,n&&r.Util.extend(V_(i),n);var s,l=V_(i);return s=l.url.substr(l.url.length-1,1),l.url+="/"===s?"tempLayersSet.json?":"/tempLayersSet.json?",i.CLASS_NAME="SuperMap.ThemeService",i}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&q_(e,t)}(t,Si),n=t,(i=[{key:"destroy",value:function(){H_(J_(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof U_){var t,n=this;t=n.getJsonParameters(e),n.request({method:"POST",data:t,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}},{key:"getJsonParameters",value:function(e){var t,n="",r=null,i=null,o=null;n+="[{'type': 'UGC','subLayers': {'layers': [";for(var a=0;a<e.themes.length;a++){r=e.themes[a];var s=be.toJSON(r);if(n+="{'theme': "+(s=s.slice(0,-1))+"},'type': 'UGC','ugcLayerType': 'THEME',",(i=e.displayFilters)&&i.length>0&&(1===i.length?n+="'displayFilter':\""+i[0]+'",':n+="'displayFilter':\""+i[a]+'",'),(o=e.displayOrderBy)&&o.length>0&&(1===o.length?n+="'displayOrderBy':'"+o[0]+"',":n+="'displayOrderBy':'"+o[a]+"',"),(t=e.fieldValuesDisplayFilter)&&(n+="'fieldValuesDisplayFilter':"+be.toJSON(t)+","),e.joinItems&&e.joinItems.length>0&&e.joinItems[a]&&(n+="'joinItems':["+be.toJSON(e.joinItems[a])+"],"),e.datasetNames&&e.dataSourceNames){var l=e.datasetNames[a]?a:e.datasetNames.length-1,u=e.dataSourceNames[a]?a:e.dataSourceNames.length-1;n+="'datasetInfo': {'name': '"+e.datasetNames[l]+"','dataSourceName': '"+e.dataSourceNames[u]+"'}},"}else n+="},"}e.themes&&e.themes.length>0&&(n=n.substring(0,n.length-1)),n+="]},";var c=this.url.split("/");return n+="'name': '"+c[c.length-2]+"'}]"}}])&&z_(n.prototype,i),o&&z_(n,o),t}();function Q_(e){return(Q_="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y_(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X_(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K_(e,t,n){return(K_="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Z_(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Z_(e){return(Z_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $_(e,t){return($_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThemeService=W_;var ew=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,(r=!(o=Z_(t).call(this,e,n))||"object"!==Q_(o)&&"function"!=typeof o?X_(i):o).mode=null,n&&be.extend(X_(r),n),r.CLASS_NAME="SuperMap.ThiessenAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$_(e,t)}(t,Hi),n=t,(r=[{key:"destroy",value:function(){K_(Z_(t.prototype),"destroy",this).call(this),this.mode=null}},{key:"processAsync",value:function(e){var t={},n=this;"/"!==n.url.substr(n.url.length-1,1)&&(n.url+="/"),e instanceof Ds?(n.mode="datasets",n.url+="datasets/"+e.dataset+"/thiessenpolygon",Ds.toObject(e,t)):e instanceof Uf&&(n.mode="geometry",n.url+="geometry/thiessenpolygon",Uf.toObject(e,t));var r=be.toJSON(t);n.url+=".json?returnContent=true",n.request({method:"POST",data:r,scope:n,success:n.serviceProcessCompleted,failure:n.serviceProcessFailed})}}])&&Y_(n.prototype,r),i&&Y_(n,i),t}();function tw(e){return(tw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rw(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function iw(e,t,n){return(iw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ow(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ow(e){return(ow=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aw(e,t){return(aw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.ThiessenAnalystService=ew;var sw=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=ow(t).call(this,e,n))||"object"!==tw(o)&&"function"!=typeof o?rw(i):o,n&&be.extend(rw(r),n),r.CLASS_NAME="SuperMap.GeometryBatchAnalystService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aw(e,t)}(t,Hi),n=t,(r=[{key:"processAsync",value:function(e){var t=this;"/"!==t.url.substr(t.url.length-1,1)&&(t.url+="/"),t.url+="geometry/batchanalyst.json?returnContent=true&ignoreAnalystParam=true";var n=t._processParams(e),r=be.toJSON(n);t.request({method:"POST",data:r,scope:t,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}},{key:"_processParams",value:function(e){var t=this;if(be.isArray(e)){var n=[];return e.map(function(e){return n.push(t._toJSON(e)),e}),n}}},{key:"_toJSON",value:function(e){var t={};if("buffer"===e.analystName)t.analystName="buffer",t.param={},Eo.toObject(e.param,t.param);else if("overlay"===e.analystName)t.analystName="overlay",t.param={},Tf.toObject(e.param,t.param);else if("interpolationDensity"===e.analystName)t.analystName="interpolationDensity",t.param={},im.toObject(e.param,t.param);else if("interpolationidw"===e.analystName)t.analystName="interpolationidw",t.param={},im.toObject(e.param,t.param);else if("interpolationRBF"===e.analystName)t.analystName="interpolationRBF",t.param={},im.toObject(e.param,t.param);else if("interpolationKriging"===e.analystName)t.analystName="interpolationKriging",t.param={},im.toObject(e.param,t.param);else{if("thiessenpolygon"!==e.analystName)return e;t.analystName="thiessenpolygon",t.param={},Uf.toObject(e.param,t.param)}return t}},{key:"destroy",value:function(){iw(ow(t.prototype),"destroy",this).call(this)}}])&&nw(n.prototype,r),i&&nw(n,i),t}();function lw(e){return(lw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cw(e,t){return!t||"object"!==lw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fw(e,t,n){return(fw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hw(e){return(hw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pw(e,t){return(pw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.GeometryBatchAnalystService=sw;var yw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=cw(this,hw(t).call(this,e,n))).CLASS_NAME="SuperMap.TilesetsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pw(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){fw(hw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(){if(this.url){var e=this,t=e.url.substr(e.url.length-1,1);e.url=e.url+("/"===t?"tilesets":"/tilesets")+".json?",e.request({method:"GET",scope:e,success:e.serviceProcessCompleted,failure:e.serviceProcessFailed})}}}])&&uw(n.prototype,r),i&&uw(n,i),t}();function dw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TilesetsService=yw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.datasetName="",this.datasetTopology="",this.tolerance="",this.rule=re.REGIONNOOVERLAP,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TopologyValidatorJobsParameter")}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetTopology=null,this.tolerance=null,this.rule=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&dw(t.prototype,n),r&&dw(t,r),e}();function vw(e){return(vw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bw(e,t){return!t||"object"!==vw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sw(e,t,n){return(Sw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=_w(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function _w(e){return(_w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ww(e,t){return(ww=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TopologyValidatorJobsParameter=mw;var Ow=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=bw(this,_w(t).call(this,e,n))).url+="/spatialanalyst/topologyvalidator",r.CLASS_NAME="SuperMap.TopologyValidatorJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ww(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){Sw(_w(t.prototype),"destroy",this).call(this)}},{key:"getTopologyValidatorJobs",value:function(){Sw(_w(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getTopologyValidatorJob",value:function(e){Sw(_w(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addTopologyValidatorJob",value:function(e,n){Sw(_w(t.prototype),"addJob",this).call(this,this.url,e,mw,n)}}])&&gw(n.prototype,r),i&&gw(n,i),t}();function xw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TopologyValidatorJobsService=Ow;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Cw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.lineID=null,this.lineName=null,this.lineAliasName=null,this.startStopIndex=null,this.startStopName=null,this.startStopAliasName=null,this.endStopIndex=null,this.endStopName=null,this.endStopAliasName=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TransferLine"}var t,n,r;return t=e,r=[{key:"fromJson",value:function(t){if(t)return new e({lineID:t.lineID,lineName:t.lineName,lineAliasName:t.lineAliasName,startStopIndex:t.startStopIndex,startStopName:t.startStopName,startStopAliasName:t.startStopAliasName,endStopIndex:t.endStopIndex,endStopName:t.endStopName,endStopAliasName:t.endStopAliasName})}}],(n=[{key:"destroy",value:function(){be.reset(this)}}])&&xw(t.prototype,n),r&&xw(t,r),e}();function Tw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransferLine=Cw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Pw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.transferLines=null,this.points=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TransferPathParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(e){if(e)return be.toJSON(e)}}],(n=[{key:"destroy",value:function(){be.reset(this)}}])&&Tw(t.prototype,n),r&&Tw(t,r),e}();function Ew(e){return(Ew="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mw(e,t){return!t||"object"!==Ew(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Aw(e,t,n){return(Aw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Lw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Lw(e){return(Lw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jw(e,t){return(jw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TransferPathParameters=Pw;var Nw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Mw(this,Lw(t).call(this,e,n))).CLASS_NAME="SuperMap.TransferPathService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jw(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Aw(Lw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Pw){var t,n,r=this;n=r.url.substr(r.url.length-1,1),r.url+="/"===n?"":"/",r.url+="path.json?",t={points:be.toJSON(e.points),transferLines:be.toJSON(e.transferLines)},r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&kw(n.prototype,r),i&&kw(n,i),t}();function Rw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransferPathService=Nw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Iw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.solutionCount=6,this.transferPreference=B.NONE,this.transferTactic=F.LESS_TIME,this.walkingRatio=null,this.points=!1,this.evadeLines=null,this.evadeStops=null,this.priorLines=null,this.priorStops=null,this.travelTime=null,be.extend(this,t),this.CLASS_NAME="SuperMap.TransferSolutionParameters"}var t,n,r;return t=e,r=[{key:"toJson",value:function(e){if(e)return be.toJSON(e)}}],(n=[{key:"destroy",value:function(){be.reset(this)}}])&&Rw(t.prototype,n),r&&Rw(t,r),e}();function Dw(e){return(Dw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bw(e,t){return!t||"object"!==Dw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uw(e,t,n){return(Uw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Gw(e){return(Gw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zw(e,t){return(zw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.TransferSolutionParameters=Iw;var Vw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Bw(this,Gw(t).call(this,e,n))).CLASS_NAME="SuperMap.TransferSolutionService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zw(e,t)}(t,Si),n=t,(r=[{key:"destroy",value:function(){Uw(Gw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Iw){var t,n,r=this;n=r.url.substr(r.url.length-1,1),r.url+="/"===n?"":"/",r.url+="solutions.json?",t={points:be.toJSON(e.points),walkingRatio:e.walkingRatio,transferTactic:e.transferTactic,solutionCount:e.solutionCount,transferPreference:e.transferPreference},e.evadeLines&&(t.evadeLines=be.toJSON(e.evadeLines)),e.evadeStops&&(t.evadeStops=be.toJSON(e.evadeStops)),e.priorLines&&(t.priorLines=be.toJSON(e.priorLines)),e.priorStops&&(t.priorStops=be.toJSON(e.priorStops)),e.travelTime&&(t.travelTime=e.travelTime),r.request({method:"GET",params:t,scope:r,success:r.serviceProcessCompleted,failure:r.serviceProcessFailed})}}}])&&Fw(n.prototype,r),i&&Fw(n,i),t}();function Hw(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.TransferSolutionService=Vw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Jw=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.edgeId="",this.fromNodeId="",this.toNodeId="",this.weightField="",this.edgeWeight="",be.extend(this,t),this.CLASS_NAME="SuperMap.UpdateEdgeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.edgeId=null,this.fromNodeId=null,this.toNodeId=null,this.weightField=null,this.edgeWeight=null}}])&&Hw(t.prototype,n),r&&Hw(t,r),e}();function qw(e){return(qw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ww(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qw(e,t){return!t||"object"!==qw(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Yw(e,t,n){return(Yw="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Xw(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Xw(e){return(Xw=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Kw(e,t){return(Kw=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UpdateEdgeWeightParameters=Jw;var Zw=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Qw(this,Xw(t).call(this,e,n))).CLASS_NAME="SuperMap.UpdateEdgeWeightService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kw(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){Yw(Xw(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof Jw){var t=this,n=t.url.substr(t.url.length-1,1),r=t.parse(e);"/"===n&&t.url.splice(t.url.length-1,1),t.url=t.url+r+".json?";var i=e.edgeWeight?e.edgeWeight:null;t.request({method:"PUT",scope:t,data:i,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var n in e)if(""!==e[n]&&"edgeWeight"!==e[n])switch(n){case"edgeId":t+="/edgeweight/"+e[n];break;case"fromNodeId":t+="/fromnode/"+e[n];break;case"toNodeId":t+="/tonode/"+e[n];break;case"weightField":t+="/weightfield/"+e[n]}return t}}}])&&Ww(n.prototype,r),i&&Ww(n,i),t}();function $w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.UpdateEdgeWeightService=Zw;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&(this.nodeId="",this.fromEdgeId="",this.toEdgeId="",this.weightField="",this.turnNodeWeight="",be.extend(this,t),this.CLASS_NAME="SuperMap.UpdateTurnNodeWeightParameters")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.nodeId=null,this.fromEdgeId=null,this.toEdgeId=null,this.weightField=null,this.turnNodeWeight=null}}])&&$w(t.prototype,n),r&&$w(t,r),e}();function tO(e){return(tO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rO(e,t){return!t||"object"!==tO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iO(e,t,n){return(iO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oO(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oO(e){return(oO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aO(e,t){return(aO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.UpdateTurnNodeWeightParameters=eO;var sO=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=rO(this,oO(t).call(this,e,n))).CLASS_NAME="SuperMap.UpdateTurnNodeWeightService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aO(e,t)}(t,ca),n=t,(r=[{key:"destroy",value:function(){iO(oO(t.prototype),"destroy",this).call(this)}},{key:"processAsync",value:function(e){if(e instanceof eO){var t=this,n=t.url.substr(t.url.length-1,1),r=t.parse(e);"/"===n&&t.url.splice(t.url.length-1,1),t.url=t.url+r+".json?";var i=e.turnNodeWeight?e.turnNodeWeight:null;t.request({method:"PUT",scope:t,data:i,success:t.serviceProcessCompleted,failure:t.serviceProcessFailed})}}},{key:"parse",value:function(e){if(e){var t="";for(var n in e)if(""!==e[n]&&"turnNodeWeight"!==e[n])switch(n){case"nodeId":t+="/turnnodeweight/"+e[n];break;case"fromEdgeId":t+="/fromedge/"+e[n];break;case"toEdgeId":t+="/toedge/"+e[n];break;case"weightField":t+="/weightfield/"+e[n]}return t}}}])&&nO(n.prototype,r),i&&nO(n,i),t}();function lO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.UpdateTurnNodeWeightService=sO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.datasetName="",this.datasetVectorClip="",this.geometryClip="",this.mode=Z.CLIP,this.output=null,this.mappingParameters=null,be.extend(this,t),this.CLASS_NAME="SuperMap.VectorClipJobsParameter"}var t,n,r;return t=e,r=[{key:"toObject",value:function(e,t){for(var n in e)"datasetName"!==n?"output"!==n?(t.analyst=t.analyst||{},t.analyst[n]=e[n],"mappingParameters"===n&&(t.analyst[n]=t.analyst[n]||{},t.analyst.mappingParameters=e[n])):(t.output=t.output||{},t.output=e[n]):(t.input=t.input||{},t.input[n]=e[n])}}],(n=[{key:"destroy",value:function(){this.datasetName=null,this.datasetVectorClip=null,this.geometryClip=null,this.mode=null,this.output instanceof Do&&(this.output.destroy(),this.output=null),this.mappingParameters instanceof Bo&&(this.mappingParameters.destroy(),this.mappingParameters=null)}}])&&lO(t.prototype,n),r&&lO(t,r),e}();function cO(e){return(cO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function fO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hO(e,t){return!t||"object"!==cO(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pO(e,t,n){return(pO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=yO(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function yO(e){return(yO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function dO(e,t){return(dO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.VectorClipJobsParameter=uO;var mO=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=hO(this,yO(t).call(this,e,n))).url+="/spatialanalyst/vectorclip",r.CLASS_NAME="SuperMap.VectorClipJobsService",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&dO(e,t)}(t,Qo),n=t,(r=[{key:"destroy",value:function(){pO(yO(t.prototype),"destroy",this).call(this)}},{key:"getVectorClipJobs",value:function(){pO(yO(t.prototype),"getJobs",this).call(this,this.url)}},{key:"getVectorClipJob",value:function(e){pO(yO(t.prototype),"getJobs",this).call(this,this.url+"/"+e)}},{key:"addVectorClipJob",value:function(e,n){pO(yO(t.prototype),"addJob",this).call(this,this.url,e,uO,n)}}])&&fO(n.prototype,r),i&&fO(n,i),t}();function vO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.VectorClipJobsService=mO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.type=null,be.extend(this,t),this.CLASS_NAME="SuperMap.RasterFunctionParameter"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.type=null}}])&&vO(t.prototype,n),r&&vO(t,r),e}();function bO(e){return(bO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wO(e,t,n){return(wO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OO(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function OO(e){return(OO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xO(e,t){return(xO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.RasterFunctionParameter=gO;var CO=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=OO(t).call(this,e))||"object"!==bO(i)&&"function"!=typeof i?_O(r):i).redIndex=0,n.nirIndex=1,n.colorMap="0:ffffe5ff;0.1:f7fcb9ff;0.2:d9f0a3ff;0.3:addd8eff;0.4:78c679ff;0.5:41ab5dff;0.6:238443ff;0.7:006837ff;1:004529ff",n.type=se.NDVI,be.extend(_O(n),e),n.CLASS_NAME="SuperMap.NDVIParameter",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xO(e,t)}(t,gO),n=t,(r=[{key:"destroy",value:function(){wO(OO(t.prototype),"destroy",this).call(this),this.redIndex=null,this.nirIndex=null,this.colorMap=null}},{key:"toJSON",value:function(){return{redIndex:this.redIndex,nirIndex:this.nirIndex,colorMap:this.colorMap,type:this.type}}}])&&SO(n.prototype,r),i&&SO(n,i),t}();function TO(e){return(TO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function EO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kO(e,t,n){return(kO="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=MO(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function MO(e){return(MO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function AO(e,t){return(AO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.NDVIParameter=CO;var LO=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(i=MO(t).call(this,e))||"object"!==TO(i)&&"function"!=typeof i?EO(r):i).altitude=45,n.azimuth=315,n.zFactor=1,n.type=se.HILLSHADE,be.extend(EO(n),e),n.CLASS_NAME="SuperMap.HillshadeParameter",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&AO(e,t)}(t,gO),n=t,(r=[{key:"destroy",value:function(){kO(MO(t.prototype),"destroy",this).call(this),this.altitude=null,this.azimuth=null,this.zFactor=null}},{key:"toJSON",value:function(){return{altitude:this.altitude,azimuth:this.azimuth,zFactor:this.zFactor,type:this.type}}}])&&PO(n.prototype,r),i&&PO(n,i),t}();r.HillshadeParameter=LO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jO=r.ServiceStatus={DOES_NOT_INVOLVE:"DOES_NOT_INVOLVE",PUBLISH_FAILED:"PUBLISH_FAILED",PUBLISHED:"PUBLISHED",PUBLISHING:"PUBLISHING",UNPUBLISHED:"UNPUBLISHED",UNPUBLISHED_FAILED:"UNPUBLISHED_FAILED"},NO=r.DataItemType={AUDIO:"AUDIO",COLOR:"COLOR",COLORSCHEME:"COLORSCHEME",CSV:"CSV",EXCEL:"EXCEL",FILLSYMBOL:"FILLSYMBOL",IMAGE:"IMAGE",LAYERTEMPLATE:"LAYERTEMPLATE",LAYOUTTEMPLATE:"LAYOUTTEMPLATE",LINESYMBOL:"LINESYMBOL",MAPTEMPLATE:"MAPTEMPLATE",MARKERSYMBOL:"MARKERSYMBOL",MBTILES:"MBTILES",PHOTOS:"PHOTOS",SHP:"SHP",SMTILES:"SMTILES",SVTILES:"SVTILES",THEMETEMPLATE:"THEMETEMPLATE",TPK:"TPK",UDB:"UDB",UGCV5:"UGCV5",UNKNOWN:"UNKNOWN",VIDEO:"VIDEO",WORKENVIRONMENT:"WORKENVIRONMENT",WORKSPACE:"WORKSPACE"},RO=r.DataItemOrderBy={FILENAME:"FILENAME",ID:"ID",LASTMODIFIEDTIME:"LASTMODIFIEDTIME",NICKNAME:"NICKNAME",SERVICESTATUS:"SERVICESTATUS",SIZE:"SIZE",STATUS:"STATUS",TYPE:"TYPE",UPDATETIME:"UPDATETIME",USERNAME:"USERNAME"},IO=r.FilterField={LINKPAGE:"LINKPAGE",MAPTITLE:"MAPTITLE",NICKNAME:"NICKNAME",RESTITLE:"RESTITLE",USERNAME:"USERNAME"};function DO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},be.extend(this,t),this.serverType=o.ONLINE,this.CLASS_NAME="SuperMap.OnlineServiceBase"}var t,n,r;return t=e,(n=[{key:"request",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return t=this.createCredentialUrl(t),r.crossOrigin=this.options.crossOrigin,r.headers=this.options.headers,nr.commit(e,t,n,r).then(function(e){return e.json()})}},{key:"createCredentialUrl",value:function(e){var t=e,n=this.getCredential();if(n){var r="key="+n,i=t.substring(t.length-1,t.length);t.indexOf("?")>-1&&"?"===i?t+=r:t.indexOf("?")>-1&&"?"!==i?t+="&"+r:t+="?"+r}return t}},{key:"getCredential",value:function(){}}])&&DO(t.prototype,n),r&&DO(t,r),e}();function BO(e){return(BO="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function GO(e){return(GO=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zO(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function VO(e,t){return(VO=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.OnlineServiceBase=FO;var HO=function(e){function t(e,n){var r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),i=this,r=!(o=GO(t).call(this,e))||"object"!==BO(o)&&"function"!=typeof o?zO(i):o,n=n||{},r.MD5=null,r.type=null,r.userName=null,r.fileName=null,r.size=null,r.serviceStatus=null,r.serviceId=null,r.id=null,r.lastModfiedTime=null,r.status=null,r.storageId=null,r.publishInfo=null,r.authorizeSetting=null,r.nickname=null,r.tags=[],r.description=null,r.dataItemServices=null,r.coordType=null,r.dataCheckResult=null,r.dataMetaInfo=null,r.thumbnail=null,be.extend(zO(r),n),r.id&&(r.serviceUrl=e+"/"+r.id),r.CLASS_NAME="SuperMap.OnlineData",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&VO(e,t)}(t,FO),n=t,(r=[{key:"load",value:function(){if(this.serviceUrl){var e=this;return e.request("GET",this.serviceUrl).then(function(t){be.extend(e,t)})}}},{key:"getPublishedServices",value:function(){return this.dataItemServices}},{key:"getAuthorizeSetting",value:function(){return this.authorizeSetting}}])&&UO(n.prototype,r),i&&UO(n,i),t}();function JO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OnlineData=HO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qO=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootUrl="https://www.supermapol.com",this.webUrl=this.rootUrl+"/web";var t=this.webUrl+"/mycontent";this.mDatasUrl=t+"/datas",this.CLASS_NAME="SuperMap.Online"}var t,n,r;return t=e,(n=[{key:"load",value:function(){return nr.get(this.rootUrl).then(function(e){return e})}},{key:"login",value:function(){ir.loginOnline(this.rootUrl,!0)}},{key:"queryDatas",value:function(e){var t=this,n=t.mDatasUrl;return e&&(e=e.toJSON()),nr.get(n,e).then(function(e){if(e&&e.content&&!(e.content.length<1)){for(var n=[],r=e.content,i=r.length,o=0;o<i;o++){var a=r[o],s=new HO(t.mDatasUrl,a);n.push(s)}return n}})}}])&&JO(t.prototype,n),r&&JO(t,r),e}();function WO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Online=qO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QO=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.userNames=null,this.types=null,this.fileName=null,this.serviceStatuses=null,this.serviceId=null,this.ids=null,this.keywords=null,this.orderBy=null,this.tags=null,this.filterFields=null,be.extend(this,t),this.CLASS_NAME="SuperMap.OnlineQueryDatasParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){var e=this,t={types:e.types,fileName:e.fileName,serviceStatuses:e.serviceStatuses,serviceId:e.serviceId,ids:e.ids,keywords:e.keywords,orderBy:e.orderBy,tags:e.tags,filterFields:e.filterFields};for(var n in t)null==t[n]&&delete t[n];return t}}])&&WO(t.prototype,n),r&&WO(t,r),e}();function YO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.OnlineQueryDatasParameter=QO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XO=function(){function e(t){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=null,this.serviceIds=null,this.clientType=X.SERVER,this.limitation=null,be.extend(this,t),this.CLASS_NAME="SuperMap.KeyServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{name:this.name,serviceIds:this.serviceIds,clientType:this.clientType,limitation:this.limitation}}}])&&YO(t.prototype,n),r&&YO(t,r),e}();r.KeyServiceParameter=XO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var KO=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.type=t,this.server=null,this.tokenServiceUrl=null,this.keyServiceUrl=null,be.extend(this,n),this.CLASS_NAME="SuperMap.ServerInfo",this.type=this.type||o.ISERVER,this.server||console.error("server url require is not  undefined");var r="/services/security/tokens.json";this.type===o.ISERVER&&this.server.indexOf("iserver")<0&&(r="/iserver"+r),this.tokenServiceUrl||(this.tokenServiceUrl=this.server+r),this.keyServiceUrl||(this.type===o.IPORTAL?this.keyServiceUrl=this.server+"/web/mycontent/keys/register.json":this.type===o.ONLINE&&(this.keyServiceUrl=this.server+"/web/mycontent/keys.json"))};function ZO(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ServerInfo=KO;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $O=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.userName=null,this.password=null,this.clientType=X.NONE,this.ip=null,this.referer=null,this.expiration=60,be.extend(this,t),this.CLASS_NAME="SuperMap.TokenServiceParameter"}var t,n,r;return t=e,(n=[{key:"toJSON",value:function(){return{userName:this.userName,password:this.password,clientType:this.clientType,ip:this.ip,referer:this.referer,expiration:this.expiration}}}])&&ZO(t.prototype,n),r&&ZO(t,r),e}();r.TokenServiceParameter=$O;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ex=n(11),tx=n.n(ex);function nx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rx=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=n||{},this.url=t,this.client=new tx.a.Client({host:this.url}),this.change=null,this.openGeoFence=!1,this.outOfGeoFence=null,this.geoFence=null,this.EVENT_TYPES=["change","error","outOfGeoFence"],this.events=new Jt(this,null,this.EVENT_TYPES),this.eventListeners=null,be.extend(this,n),this.eventListeners instanceof Object&&this.events.on(this.eventListeners)}var t,n,r;return t=e,(n=[{key:"setGeoFence",value:function(e){this.geoFence=e}},{key:"bulk",value:function(e,t){return this.client.bulk(e,t)}},{key:"clearScroll",value:function(e,t){return this.client.clearScroll(e,t)}},{key:"count",value:function(e,t){return this.client.count(e,t)}},{key:"create",value:function(e,t){return this.client.create(e,t)}},{key:"delete",value:function(e,t){return this.client.delete(e,t)}},{key:"deleteByQuery",value:function(e,t){return this.client.deleteByQuery(e,t)}},{key:"deleteScript",value:function(e,t){return this.client.deleteScript(e,t)}},{key:"deleteTemplate",value:function(e,t){return this.client.deleteTemplate(e,t)}},{key:"exists",value:function(e,t){return this.client.exists(e,t)}},{key:"existsSource",value:function(e,t){return this.client.existsSource(e,t)}},{key:"explain",value:function(e,t){return this.client.explain(e,t)}},{key:"fieldCaps",value:function(e,t){return this.client.fieldCaps(e,t)}},{key:"get",value:function(e,t){return this.client.get(e,t)}},{key:"getScript",value:function(e,t){return this.client.getScript(e,t)}},{key:"getSource",value:function(e,t){return this.client.getSource(e,t)}},{key:"getTemplate",value:function(e,t){return this.client.getTemplate(e,t)}},{key:"index",value:function(e,t){return this.client.index(e,t)}},{key:"info",value:function(e,t){return this.client.info(e,t)}},{key:"mget",value:function(e,t){return this.client.mget(e,t)}},{key:"msearch",value:function(e,t){var n=this;return n.client.msearch(e).then(function(e){return n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"msearchTemplate",value:function(e,t){return this.client.msearchTemplate(e,t)}},{key:"mtermvectors",value:function(e,t){return this.client.mtermvectors(e,t)}},{key:"ping",value:function(e,t){return this.client.ping(e,t)}},{key:"putScript",value:function(e,t){return this.client.putScript(e,t)}},{key:"putTemplate",value:function(e,t){return this.client.putTemplate(e,t)}},{key:"reindex",value:function(e,t){return this.client.reindex(e,t)}},{key:"reindexRessrottle",value:function(e,t){return this.client.reindexRessrottle(e,t)}},{key:"renderSearchTemplate",value:function(e,t){return this.client.renderSearchTemplate(e,t)}},{key:"scroll",value:function(e,t){return this.client.scroll(e,t)}},{key:"search",value:function(e,t){var n=this;return n.client.search(e).then(function(e){return n._update(e.responses,t),e},function(e){return t(e),n.events.triggerEvent("error",{error:e}),e})}},{key:"searchShards",value:function(e,t){return this.client.searchShards(e,t)}},{key:"searchTemplate",value:function(e,t){return this.client.searchTemplate(e,t)}},{key:"suggest",value:function(e,t){return this.client.suggest(e,t)}},{key:"termvectors",value:function(e,t){return this.client.termvectors(e,t)}},{key:"update",value:function(e,t){return this.client.update(e,t)}},{key:"updateByQuery",value:function(e,t){return this.client.updateByQuery(e,t)}},{key:"_update",value:function(e,t){var n=this;e&&(n.data=e,n.openGeoFence&&n.geoFence&&n._validateDatas(e),n.events.triggerEvent("change",{data:n.data}),n.change?n.change&&n.change(e):t&&t(void 0,{responses:e}))}},{key:"_validateDatas",value:function(e){if(e){e instanceof Array||(e=[e]);var t,n=e.length;for(t=0;t<n;t++)this._validateData(e[t])}}},{key:"_validateData",value:function(e){var t=this;e.hits.hits.map(function(n){var r=n._source,i=t._getMeterPerMapUnit(t.geoFence.unit),o=t.geoFence.center[0]*i,a=t.geoFence.center[1]*i,s=r.x*i,l=r.y*i;return t._distance(s,l,o,a)>t.geoFence.radius&&(t.outOfGeoFence&&t.outOfGeoFence(e),t.events.triggerEvent("outOfGeoFence",{data:e})),n})}},{key:"_distance",value:function(e,t,n,r){return Math.sqrt((e-n)*(e-n)+(t-r)*(t-r))}},{key:"_getMeterPerMapUnit",value:function(e){var t;return"meter"===e?t=1:"degree"===e&&(t=2*Math.PI*6378137/360),t}}])&&nx(t.prototype,n),r&&nx(t,r),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function ix(e){return(ix="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ox(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ElasticSearch=rx;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ax=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.BUILTIN_OBJECT={"[object Function]":1,"[object RegExp]":1,"[object Date]":1,"[object Error]":1,"[object CanvasGradient]":1},this._ctx=null,this._canvas=null,this._pixelCtx=null,this._width=null,this._height=null,this._offsetX=0,this._offsetY=0,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Util"}var t,n,r;return t=e,(n=[{key:"clone",value:function(e){var t=this.BUILTIN_OBJECT;if("object"==ix(e)&&null!==e){var n=e;if(e instanceof Array){n=[];for(var r=0,i=e.length;r<i;r++)n[r]=this.clone(e[r])}else if(!t[Object.prototype.toString.call(e)])for(var o in n={},e)e.hasOwnProperty(o)&&(n[o]=this.clone(e[o]));return n}return e}},{key:"mergeItem",value:function(e,t,n,r){var i=this.BUILTIN_OBJECT;t.hasOwnProperty(n)&&("object"!=ix(e[n])||i[Object.prototype.toString.call(e[n])]?!r&&n in e||(e[n]=t[n]):this.merge(e[n],t[n],r))}},{key:"merge",value:function(e,t,n){for(var r in t)this.mergeItem(e,t,r,n);return e}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getPixelContext",value:function(){return this._pixelCtx||(this._canvas=document.createElement("canvas"),this._width=this._canvas.width,this._height=this._canvas.height,this._pixelCtx=this._canvas.getContext("2d")),this._pixelCtx}},{key:"adjustCanvasSize",value:function(e,t){var n,r=this._canvas,i=this._pixelCtx,o=this._width,a=this._height,s=this._offsetX,l=this._offsetY;e+s>o&&(o=e+s+100,r.width=o,n=!0),t+l>a&&(a=t+l+100,r.height=a,n=!0),e<-s&&(o+=s=100*Math.ceil(-e/100),r.width=o,n=!0),t<-l&&(a+=l=100*Math.ceil(-t/100),r.height=a,n=!0),n&&i.translate(s,l)}},{key:"getPixelOffset",value:function(){return{x:this._offsetX,y:this._offsetY}}},{key:"indexOf",value:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1}},{key:"inherits",value:function(e,t){var n=e.prototype;function r(){}for(var i in r.prototype=t.prototype,e.prototype=new r,n)e.prototype[i]=n[i];e.constructor=e}}])&&ox(t.prototype,n),r&&ox(t,r),e}();function sx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var lx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new ax,this._ctx=null,this.palette=["#ff9277"," #dddd00"," #ffc877"," #bbe3ff"," #d5ffbb","#bbbbff"," #ddb000"," #b0dd00"," #e2bbff"," #ffbbe3","#ff7777"," #ff9900"," #83dd00"," #77e3ff"," #778fff","#c877ff"," #ff77ab"," #ff6600"," #aa8800"," #77c7ff","#ad77ff"," #ff77ff"," #dd0083"," #777700"," #00aa00","#0088aa"," #8400dd"," #aa0088"," #dd0000"," #772e00"],this._palette=this.palette,this.highlightColor="rgba(0,0,255,1)",this._highlightColor=this.highlightColor,this.colorRegExp=/^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i,this._nameColors={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#0ff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000",blanchedalmond:"#ffebcd",blue:"#00f",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#0ff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#f0f",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#789",lightslategrey:"#789",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#0f0",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#f0f",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#f00",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#fff",whitesmoke:"#f5f5f5",yellow:"#ff0",yellowgreen:"#9acd32"},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Color"}var t,n,r;return t=e,(n=[{key:"customPalette",value:function(e){this.palette=e}},{key:"resetPalette",value:function(){this.palette=this._palette}},{key:"getColor",value:function(e,t){return e|=0,(t=t||this.palette)[e%t.length]}},{key:"customHighlight",value:function(e){this.highlightColor=e}},{key:"resetHighlight",value:function(){this.highlightColor=this._highlightColor}},{key:"getHighlightColor",value:function(){return this.highlightColor}},{key:"getRadialGradient",value:function(e,t,n,r,i,o,a){var s=this.util;this._ctx||(this._ctx=s.getContext());for(var l=this._ctx.createRadialGradient(e,t,n,r,i,o),u=0,c=a.length;u<c;u++)l.addColorStop(a[u][0],a[u][1]);return l.__nonRecursion=!0,l}},{key:"getLinearGradient",value:function(e,t,n,r,i){var o=this.util;this._ctx||(this._ctx=o.getContext());for(var a=this._ctx.createLinearGradient(e,t,n,r),s=0,l=i.length;s<l;s++)a.addColorStop(i[s][0],i[s][1]);return a.__nonRecursion=!0,a}},{key:"getStepColors",value:function(e,t,n){e=this.toRGBA(e),t=this.toRGBA(t),e=this.getData(e);for(var r=[],i=((t=this.getData(t))[0]-e[0])/n,o=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<n;l++)r[l]=this.toColor([this.adjust(Math.floor(u),[0,255]),this.adjust(Math.floor(c),[0,255]),this.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"rgba"),u+=i,c+=o,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],r[l]=this.toColor([u,c,f,h],"rgba"),r}},{key:"getGradientColors",value:function(e,t){var n=[],r=e.length;if(void 0===t&&(t=20),1===r)n=this.getStepColors(e[0],e[0],t);else if(r>1)for(var i=0,o=r-1;i<o;i++){var a=this.getStepColors(e[i],e[i+1],t);i<o-1&&a.pop(),n=n.concat(a)}return n}},{key:"toColor",value:function(e,t){if(t=t||"rgb",e&&(3===e.length||4===e.length)){if(e=this.map(e,function(e){return e>1?Math.ceil(e):e}),t.indexOf("hex")>-1)return"#"+((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1);if(t.indexOf("hs")>-1){var n=this.map(e.slice(1,3),function(e){return e+"%"});e[1]=n[0],e[2]=n[1]}return t.indexOf("a")>-1?(3===e.length&&e.push(1),e[3]=this.adjust(e[3],[0,1]),t+"("+e.slice(0,4).join(",")+")"):t+"("+e.slice(0,3).join(",")+")"}}},{key:"toArray",value:function(e){(e=this.trim(e)).indexOf("rgba")<0&&(e=this.toRGBA(e));var t=[],n=0;return e.replace(/[\d.]+/g,function(e){n<3?e|=0:e=+e,t[n++]=e}),t}},{key:"convert",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=this.getData(e),r=n[3];return void 0===r&&(r=1),e.indexOf("hsb")>-1?n=this._HSV_2_RGB(n):e.indexOf("hsl")>-1&&(n=this._HSL_2_RGB(n)),t.indexOf("hsb")>-1||t.indexOf("hsv")>-1?n=this._RGB_2_HSB(n):t.indexOf("hsl")>-1&&(n=this._RGB_2_HSL(n)),n[3]=r,this.toColor(n,t)}},{key:"toRGBA",value:function(e){return this.convert(e,"rgba")}},{key:"toRGB",value:function(e){return this.convert(e,"rgb")}},{key:"toHex",value:function(e){return this.convert(e,"hex")}},{key:"toHSVA",value:function(e){return this.convert(e,"hsva")}},{key:"toHSV",value:function(e){return this.convert(e,"hsv")}},{key:"toHSBA",value:function(e){return this.convert(e,"hsba")}},{key:"toHSB",value:function(e){return this.convert(e,"hsb")}},{key:"toHSLA",value:function(e){return this.convert(e,"hsla")}},{key:"toHSL",value:function(e){return this.convert(e,"hsl")}},{key:"toName",value:function(e){for(var t in this._nameColors)if(this.toHex(this._nameColors[t])===this.toHex(e))return t;return null}},{key:"trim",value:function(e){return String(e).replace(/\s+/g,"")}},{key:"normalize",value:function(e){if(this._nameColors[e]&&(e=this._nameColors[e]),e=(e=this.trim(e)).replace(/hsv/i,"hsb"),/^#[\da-f]{3}$/i.test(e)){var t=(3840&(e=parseInt(e.slice(1),16)))<<8,n=(240&e)<<4,r=15&e;e="#"+((1<<24)+(t<<4)+t+(n<<4)+n+(r<<4)+r).toString(16).slice(1)}return e}},{key:"lift",value:function(e,t){if(!this.isCalculableColor(e))return e;var n=t>0?1:-1;void 0===t&&(t=0),t=Math.abs(t)>1?1:Math.abs(t),e=this.toRGB(e);for(var r=this.getData(e),i=0;i<3;i++)r[i]=1===n?r[i]*(1-t)|0:(255-r[i])*t+r[i]|0;return"rgb("+r.join(",")+")"}},{key:"reverse",value:function(e){if(!this.isCalculableColor(e))return e;var t=this.getData(this.toRGBA(e));return t=this.map(t,function(e){return 255-e}),this.toColor(t,"rgb")}},{key:"mix",value:function(e,t,n){if(!this.isCalculableColor(e)||!this.isCalculableColor(t))return e;void 0===n&&(n=.5);for(var r=2*(n=1-this.adjust(n,[0,1]))-1,i=this.getData(this.toRGBA(e)),o=this.getData(this.toRGBA(t)),a=i[3]-o[3],s=((r*a==-1?r:(r+a)/(1+r*a))+1)/2,l=1-s,u=[],c=0;c<3;c++)u[c]=i[c]*s+o[c]*l;var f=i[3]*n+o[3]*(1-n);return f=Math.max(0,Math.min(1,f)),1===i[3]&&1===o[3]?this.toColor(u,"rgb"):(u[3]=f,this.toColor(u,"rgba"))}},{key:"random",value:function(){return"#"+Math.random().toString(16).slice(2,8)}},{key:"getData",value:function(t){var n,r,i=(t=this.normalize(t)).match(this.colorRegExp);if(null===i)throw new Error("The color format error");var o,a=[];if(i[2])o=[(n=i[2].replace("#","").split(""))[0]+n[1],n[2]+n[3],n[4]+n[5]],a=this.map(o,function(t){return e.prototype.adjust.call(this,parseInt(t,16),[0,255])});else if(i[4]){var s=i[4].split(",");r=s[3],o=s.slice(0,3),a=this.map(o,function(t){return t=Math.floor(t.indexOf("%")>0?2.55*parseInt(t,0):t),e.prototype.adjust.call(this,t,[0,255])}),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}else if(i[5]||i[6]){var l=(i[5]||i[6]).split(","),u=parseInt(l[0],0)/360,c=l[1],f=l[2];r=l[3],(a=this.map([c,f],function(t){return e.prototype.adjust.call(this,parseFloat(t)/100,[0,1])})).unshift(u),void 0!==r&&a.push(this.adjust(parseFloat(r),[0,1]))}return a}},{key:"alpha",value:function(e,t){if(!this.isCalculableColor(e))return e;null===t&&(t=1);var n=this.getData(this.toRGBA(e));return n[3]=this.adjust(Number(t).toFixed(4),[0,1]),this.toColor(n,"rgba")}},{key:"map",value:function(e,t){if("function"!=typeof t)throw new TypeError;for(var n=e?e.length:0,r=0;r<n;r++)e[r]=t(e[r]);return e}},{key:"adjust",value:function(e,t){return e<=t[0]?e=t[0]:e>=t[1]&&(e=t[1]),e}},{key:"isCalculableColor",value:function(e){return e instanceof Array||"string"==typeof e}},{key:"_HSV_2_RGB",value:function(e){var t,n,r,i=e[0],o=e[1],a=e[2];if(0===o)t=255*a,n=255*a,r=255*a;else{var s=6*i;6===s&&(s=0);var l=0|s,u=a*(1-o),c=a*(1-o*(s-l)),f=a*(1-o*(1-(s-l))),h=0,p=0,y=0;0===l?(h=a,p=f,y=u):1===l?(h=c,p=a,y=u):2===l?(h=u,p=a,y=f):3===l?(h=u,p=c,y=a):4===l?(h=f,p=u,y=a):(h=a,p=u,y=c),t=255*h,n=255*p,r=255*y}return[t,n,r]}},{key:"_HSL_2_RGB",value:function(e){var t,n,r,i=e[0],o=e[1],a=e[2];if(0===o)t=255*a,n=255*a,r=255*a;else{var s,l=2*a-(s=a<.5?a*(1+o):a+o-o*a);t=255*this._HUE_2_RGB(l,s,i+1/3),n=255*this._HUE_2_RGB(l,s,i),r=255*this._HUE_2_RGB(l,s,i-1/3)}return[t,n,r]}},{key:"_HUE_2_RGB",value:function(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),6*n<1?e+6*(t-e)*n:2*n<1?t:3*n<2?e+(t-e)*(2/3-n)*6:e}},{key:"_RGB_2_HSB",value:function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a,u=s;if(0===l)t=0,n=0;else{n=l/s;var c=((s-r)/6+l/2)/l,f=((s-i)/6+l/2)/l,h=((s-o)/6+l/2)/l;r===s?t=h-f:i===s?t=1/3+c-h:o===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,n*=100,u*=100]}},{key:"_RGB_2_HSL",value:function(e){var t,n,r=e[0]/255,i=e[1]/255,o=e[2]/255,a=Math.min(r,i,o),s=Math.max(r,i,o),l=s-a,u=(s+a)/2;if(0===l)t=0,n=0;else{n=u<.5?l/(s+a):l/(2-s-a);var c=((s-r)/6+l/2)/l,f=((s-i)/6+l/2)/l,h=((s-o)/6+l/2)/l;r===s?t=h-f:i===s?t=1/3+c-h:o===s&&(t=2/3+f-c),t<0&&(t+=1),t>1&&(t-=1)}return[t*=360,n*=100,u*=100]}}])&&sx(t.prototype,n),r&&sx(t,r),e}();function ux(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var cx=new lx,fx=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"createCanvas",value:function(e,t){var n=document.createElement("canvas");return n.height=e,n.width=t,n.getContext("2d")}},{key:"getLinearGradient",value:function(e,t,n,r,i){this._ctx||(this._ctx=this.getContext());for(var o=this._ctx.createLinearGradient(e,t,n,r),a=i.length,s=1/(a-1),l=0,u=0;u<a;u++)o.addColorStop(l,i[u]),l+=s;return o.__nonRecursion=!0,o}},{key:"getContext",value:function(){return this._ctx||(this._ctx=document.createElement("canvas").getContext("2d")),this._ctx}},{key:"getStepColors",value:function(e,t,n){e=cx.toRGBA(e),t=cx.toRGBA(t),e=cx.getData(e);for(var r=[],i=((t=cx.getData(t))[0]-e[0])/n,o=(t[1]-e[1])/n,a=(t[2]-e[2])/n,s=(t[3]-e[3])/n,l=0,u=e[0],c=e[1],f=e[2],h=e[3];l<n;l++)r[l]=cx.toColor([cx.adjust(Math.floor(u),[0,255]),cx.adjust(Math.floor(c),[0,255]),cx.adjust(Math.floor(f),[0,255]),h.toFixed(4)-0],"hex"),u+=i,c+=o,f+=a,h+=s;return u=t[0],c=t[1],f=t[2],h=t[3],r[l]=cx.toColor([u,c,f,h],"hex"),r}},{key:"getGradientColors",value:function(e,t,n){var r,i,o,a=[],s=e.length;if(void 0!==t){if(s>=t)if("RANGE"===n)for(i=0;i<t;i++)a.push(e[i]);else for(i=0;i<t;i++){var l=Math.floor(i/2);if(i%2==0)a.push(e[l]);else{var u=e.length-1-l;a.push(e[u])}}else{for(r=Math.ceil(t/(s-1)),i=0,o=s-1;i<o;i++){var c=this.getStepColors(e[i],e[i+1],r);i<o-1&&c.pop(),a=a.concat(c)}for(var f=a.length-t,h=0;h<f;h++)a.splice(2,1)}return a}}}],(n=null)&&ux(t.prototype,n),r&&ux(t,r),e}();function hx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ColorsPickerUtil=fx;var px=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"newInstance",value:function(){return this.geostatsInstance||(this.geostatsInstance=new window.geostats),this.geostatsInstance}},{key:"getInstance",value:function(e){var t=this.newInstance();return t.setSerie(e),t}},{key:"getArrayStatistic",value:function(e,t){return e.length?"Sum"===t||"求和"===t?this.getSum(e):"Maximum"===t||"最大值"===t?this.getMax(e):"Minimum"===t||"最小值"===t?this.getMin(e):"Average"===t||"平均值"===t?this.getMean(e):"Median"===t||"中位数"===t?this.getMedian(e):"times"===t||"计数"===t?this.getTimes(e):void 0:0}},{key:"getArraySegments",value:function(e,t,n){return"offset"===t?this.getEqInterval(e,n):"jenks"===t?this.getJenks(e,n):"square"===t?this.getMin(e)>=0&&this.getSqrtInterval(e,n):"logarithm"===t?this.getMin(e)>0&&this.getGeometricProgression(e,n):void 0}},{key:"getSum",value:function(e){return this.getInstance(e).sum()}},{key:"getMax",value:function(e){return this.getInstance(e).max()}},{key:"getMin",value:function(e){return this.getInstance(e).min()}},{key:"getMean",value:function(e){return this.getInstance(e).mean()}},{key:"getMedian",value:function(e){return this.getInstance(e).median()}},{key:"getTimes",value:function(e){return e.length}},{key:"getEqInterval",value:function(e,t){return this.getInstance(e).getClassEqInterval(t)}},{key:"getJenks",value:function(e,t){return this.getInstance(e).getClassJenks(t)}},{key:"getSqrtInterval",value:function(e,t){return e=e.map(function(e){return Math.sqrt(e)}),this.getInstance(e).getClassEqInterval(t).map(function(e){return e*e})}},{key:"getGeometricProgression",value:function(e,t){return this.getInstance(e).getClassGeometricProgression(t)}}],(n=null)&&hx(t.prototype,n),r&&hx(t,r),e}();r.ArrayStatistic=px;var yx=n(12),dx=n.n(yx);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function mx(e){return(mx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vx(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bx(e,t,n){return t&&gx(e.prototype,t),n&&gx(e,n),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var Sx=function(){function e(t){vx(this,e),this.env=null,this.parser=null,this.ruleSet=null,this.cartoStr="",this.shaders=null,"string"==typeof t&&(this.cartoStr=t,this.env={frames:[],errors:[],error:function(e){this.errors.push(e)}},this.parser=this.getParser(this.env),this.parse(t),this.shaders=this.toShaders())}return bx(e,[{key:"getParser",value:function(e){var t,n,i,o,a,s,l,u,c,f=this;function h(){o=l[i],a=n,u=n}function p(){l[i]=o,u=n=a}function y(){n>u&&(l[i]=l[i].slice(n-u),u=n)}function d(e){var r,o,a,s;if(e instanceof Function)return e.call(c.parsers);if("string"==typeof e)r=t.charAt(n)===e?e:null,o=1,y();else{if(y(),!(r=e.exec(l[i])))return null;o=r[0].length}if(r){var f=n+=o;for(s=n+l[i].length-o;n<s&&(32===(a=t.charCodeAt(n))||10===a||9===a);)n++;return l[i]=l[i].slice(o+(n-f)),u=n,0===l[i].length&&i<l.length-1&&i++,"string"==typeof r?r:1===r.length?r[0]:r}}function m(n){var r,i={index:s,filename:e.filename,message:"Parse error.",line:0,column:-1};for(var o in i)0===n[o]&&(n[o]=i[o]);r=n.filename&&f.env.inputs&&f.env.inputs[n.filename]?f.env.inputs[n.filename]:t,n.line=(r.slice(0,n.index).match(/\n/g)||"").length+1;for(var a=n.index;a>=0&&"\n"!==r.charAt(a);a--)n.column++;return new Error([n.filename,n.line,n.column,n.message].join(";"))}return this.env=e=e||{},this.env.filename=this.env.filename||null,this.env.inputs=this.env.inputs||{},c={parse:function(o){var a,c=null;if(n=i=u=s=0,l=[],t=o.replace(/\r\n/g,"\n"),e.filename&&(f.env.inputs[e.filename]=t),l=function(e){for(var n,r,i,o,a=0,s=/(?:@\{[\w-]+\}|[^"'`\{\}\/\(\)\\])+/g,l=/\/\*(?:[^*]|\*+[^\/*])*\*+\/|\/\/.*/g,u=/"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'|`((?:[^`]|\\.)*)`/g,f=0,h=e[0],p=0;p<t.length;)if(s.lastIndex=p,(n=s.exec(t))&&n.index===p&&(p+=n[0].length,h.push(n[0])),i=t.charAt(p),l.lastIndex=u.lastIndex=p,(n=u.exec(t))&&n.index===p)p+=n[0].length,h.push(n[0]);else if(r||"/"!==i||"/"!==(o=t.charAt(p+1))&&"*"!==o||!(n=l.exec(t))||n.index!==p){switch(i){case"{":if(!r){f++,h.push(i);break}case"}":if(!r){f--,h.push(i),e[++a]=h=[];break}case"(":if(!r){r=!0,h.push(i);break}case")":if(r){r=!1,h.push(i);break}default:h.push(i)}p++}else p+=n[0].length,h.push(n[0]);return 0!==f&&(c={index:p-1,type:"Parse",message:f>0?"missing closing `}`":"missing opening `{`"}),e.map(function(e){return e.join("")})}([[]]),c)throw m(c);var h=function(e,t){var n=e.specificity,r=t.specificity;return n[0]!=r[0]?r[0]-n[0]:n[1]!=r[1]?r[1]-n[1]:n[2]!=r[2]?r[2]-n[2]:r[3]-n[3]};return(a=new r.CartoCSS.Tree.Ruleset([],d(this.parsers.primary))).root=!0,a.toList=function(e){e.error=function(t){e.errors||(e.errors=new Error("")),e.errors.message?e.errors.message+="\n"+m(t).message:e.errors.message=m(t).message},e.frames=e.frames||[];var t=this.flatten([],[],e);return t.sort(h),t},a},parsers:{primary:function(){for(var e,t=[];(e=d(this.rule)||d(this.ruleset)||d(this.comment))||d(/^[\s\n]+/)||(e=d(this.invalid));)e&&t.push(e);return t},invalid:function(){var e=d(/^[^;\n]*[;\n]/);if(e)return new r.CartoCSS.Tree.Invalid(e,a)},comment:function(){var e;if("/"===t.charAt(n))return"/"===t.charAt(n+1)?new r.CartoCSS.Tree.Comment(d(/^\/\/.*/),!0):(e=d(/^\/\*(?:[^*]|\*+[^\/*])*\*+\/\n?/))?new r.CartoCSS.Tree.Comment(e):void 0},entities:{quoted:function(){if('"'===t.charAt(n)||"'"===t.charAt(n)){var e=d(/^"((?:[^"\\\r\n]|\\.)*)"|'((?:[^'\\\r\n]|\\.)*)'/);return e?new r.CartoCSS.Tree.Quoted(e[1]||e[2]):void 0}},field:function(){if(d("[")){var e=d(/(^[^\]]+)/);if(d("]"))return e?new r.CartoCSS.Tree.Field(e[1]):void 0}},comparison:function(){var e=d(/^=~|=|!=|<=|>=|<|>/);if(e)return e},keyword:function(){var e=d(/^[A-Za-z\u4e00-\u9fa5-]+[A-Za-z-0-9\u4e00-\u9fa5_]*/);if(e)return new r.CartoCSS.Tree.Keyword(e)},call:function(){var e,t;if(e=/^([\w\-]+|%)\(/.exec(l[i])){if("url"===(e=e[1]))return null;n+=e.length;if(d("("),t=d(this.entities.arguments),d(")"))return e?new r.CartoCSS.Tree.Call(e,t,n):void 0}},arguments:function(){for(var e,t=[];e=d(this.expression);){t.push(e);if(!d(","))break}return t},literal:function(){return d(this.entities.dimension)||d(this.entities.keywordcolor)||d(this.entities.hexcolor)||d(this.entities.quoted)},url:function(){var e;if("u"===t.charAt(n)&&d(/^url\(/)){e=d(this.entities.quoted)||d(this.entities.variable)||d(/^[\-\w%@$\/.&=:;#+?~]+/)||"";return d(")")?new r.CartoCSS.Tree.URL(void 0!==e.value||e instanceof r.CartoCSS.Tree.Variable?e:new r.CartoCSS.Tree.Quoted(e)):new r.CartoCSS.Tree.Invalid(e,a,"Missing closing ) in URL.")}},variable:function(){var i,o=n;if("@"===t.charAt(n)&&(i=d(/^@[\w-]+/)))return new r.CartoCSS.Tree.Variable(i,o,e.filename)},hexcolor:function(){var e;if("#"===t.charAt(n)&&(e=d(/^#([a-fA-F0-9]{6}|[a-fA-F0-9]{3})/)))return new r.CartoCSS.Tree.Color(e[1])},keywordcolor:function(){var e=l[i].match(/^[a-z]+/);if(e&&e[0]in r.CartoCSS.Tree.Reference.data.colors)return new r.CartoCSS.Tree.Color(r.CartoCSS.Tree.Reference.data.colors[d(/^[a-z]+/)])},dimension:function(){var e=t.charCodeAt(n);if(!(e>57||e<45||47===e)){var i=d(/^(-?\d*\.?\d+(?:[eE][-+]?\d+)?)(\%|\w+)?/);return i?new r.CartoCSS.Tree.Dimension(i[1],i[2],a):void 0}}},variable:function(){var e;if("@"===t.charAt(n)&&(e=d(/^(@[\w-]+)\s*:/)))return e[1]},entity:function(){var e=d(this.entities.call)||d(this.entities.literal),t=d(this.entities.field)||d(this.entities.variable),n=d(this.entities.url)||d(this.entities.keyword);return e||t||n},end:function(){var e;return d(";")||("string"==typeof(e="}")?t.charAt(n)===e:!!e.test(l[i]))},element:function(){var e=d(/^(?:[.#][\w\u4e00-\u9fa5\-]+|\*|Map)/);if(e)return new r.CartoCSS.Tree.Element(e)},attachment:function(){var e=d(/^::([\w\-]+(?:\/[\w\-]+)*)/);if(e)return e[1]},selector:function(){for(var e,i,o,s,l,u=[],c=new r.CartoCSS.Tree.Filterset,f=[],h=0,p=0;(o=d(this.element))||(l=d(this.zoom))||(s=d(this.filter))||(e=d(this.attachment));){if(h++,o)u.push(o);else if(l)f.push(l),p++;else if(s){var y=c.add(s);if(y)throw m({message:y,index:n-1});p++}else{if(i)throw m({message:"Encountered second attachment name.",index:n-1});i=e}var v=t.charAt(n);if("{"===v||"}"===v||";"===v||","===v)break}if(h)return new r.CartoCSS.Tree.Selector(c,f,u,i,p,a)},filter:function(){h();var t,n,i;if(d("[")&&(t=d(/^[a-zA-Z0-9\-_]+/)||d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.keyword)||d(this.entities.field))&&(t instanceof r.CartoCSS.Tree.Quoted&&(t=new r.CartoCSS.Tree.Field(t.toString())),(n=d(this.entities.comparison))&&(i=d(this.entities.quoted)||d(this.entities.variable)||d(this.entities.dimension)||d(this.entities.keyword)||d(this.entities.field)))){if(!d("]"))throw m({message:"Missing closing ] of filter.",index:a-1});return t.is||(t=new r.CartoCSS.Tree.Field(t)),new r.CartoCSS.Tree.Filter(t,n,i,a,e.filename)}},zoom:function(){h();var e,t;if(d(/^\[\s*zoom/g)&&(e=d(this.entities.comparison))&&(t=d(this.entities.variable)||d(this.entities.dimension))&&d("]"))return new r.CartoCSS.Tree.Zoom(e,t,a);p()},block:function(){var e;if(d("{")&&(e=d(this.primary))&&d("}"))return e},ruleset:function(){var e,t,n=[];for(h();e=d(this.selector);){for(n.push(e);d(this.comment););if(!d(","))break;for(;d(this.comment););}if(e)for(;d(this.comment););if(n.length>0&&(t=d(this.block))){if(1===n.length&&n[0].elements.length&&"Map"===n[0].elements[0].value){var i=new r.CartoCSS.Tree.Ruleset(n,t);return i.isMap=!0,i}return new r.CartoCSS.Tree.Ruleset(n,t)}p()},rule:function(){var i,o,l=t.charAt(n);if(h(),"."!==l&&"#"!==l&&(i=d(this.variable)||d(this.property))){if((o=d(this.value))&&d(this.end))return new r.CartoCSS.Tree.Rule(i,o,a,e.filename);s=n,p()}},font:function(){for(var e,t=[],n=[];e=d(this.entity);)n.push(e);if(t.push(new r.CartoCSS.Tree.Expression(n)),d(","))for(;(e=d(this.expression))&&(t.push(e),d(",")););return new r.CartoCSS.Tree.Value(t)},value:function(){for(var e,t=[];(e=d(this.expression))&&(t.push(e),d(",")););return t.length>1?new r.CartoCSS.Tree.Value(t.map(function(e){return e.value[0]})):1===t.length?new r.CartoCSS.Tree.Value(t):void 0},sub:function(){var e;if(d("(")&&(e=d(this.expression))&&d(")"))return e},multiplication:function(){var e,t,n,i;if(e=d(this.operand)){for(;(n=d("/")||d("*")||d("%"))&&(t=d(this.operand));)i=new r.CartoCSS.Tree.Operation(n,[i||e,t],a);return i||e}},addition:function(){var e,i,o,s;if(e=d(this.multiplication)){for(;(o=d(/^[-+]\s+/)||" "!=t.charAt(n-1)&&(d("+")||d("-")))&&(i=d(this.multiplication));)s=new r.CartoCSS.Tree.Operation(o,[s||e,i],a);return s||e}},operand:function(){return d(this.sub)||d(this.entity)},expression:function(){for(var e,t=[];e=d(this.addition)||d(this.entity);)t.push(e);if(t.length>0)return new r.CartoCSS.Tree.Expression(t)},property:function(){var e=d(/^(([a-z][-a-z_0-9]*\/)?\*?-?[-a-z_0-9]+)\s*:/);if(e)return e[1]}}}}},{key:"parse",value:function(e){var t=this.parser;return this.ruleSet=t.parse(e)}},{key:"toShaders",value:function(){if(this.ruleSet){var e=this.ruleSet;if(e){var t=e.toList(this.env);t.reverse();var n={},r=[];this._toShaders(n,r,t);for(var i=[],o={},a=0,s=t.length;a<s;++a){var l=t[a],u=l.attachment,c=n[r[a]],f=[];if(!o[u]){var h=0;for(var p in c)if("zoom"!==p&&"frames"!==p&&"attachment"!==p&&"elements"!=p)if("layer-index"===p){var y=(c[p].join("\n"),null);Object.defineProperty(f,"layerIndex",{configurable:!0,enumerable:!1,value:y})}else f[h++]=function(e,t){if(!Array.isArray(e))return e;var n=e.join("\n"),r='attributes["FEATUREID"]&&attributes["FEATUREID"]',i=n.indexOf(r);if(i>=0){if(!t.featureFilter){var o=i+r.length,a=n.indexOf(")",o+1),s="featureId&&(featureId"+n.substring(o,a)+")";Object.defineProperty(t,"featureFilter",{configurable:!0,enumerable:!1,value:function(e){return!!s}})}return{property:p,getValue:Function("attributes","zoom","seftFilter","var _value = null; var isExcute=typeof seftFilter=='function'?sefgFilter():seftFilter;if(isExcute){"+n+";} return _value; ")}}return{property:p,getValue:Function("attributes","zoom","var _value = null;"+n+"; return _value; ")}}(c[p],f);Object.defineProperty(f,"attachment",{configurable:!0,enumerable:!1,value:u}),Object.defineProperty(f,"elements",{configurable:!0,enumerable:!1,value:l.elements}),i.push(f),o[r[a]]=!0}Object.defineProperty(f,"zoom",{configurable:!0,enumerable:!1,value:l.zoom})}return i}}return null}},{key:"_toShaders",value:function(e,t,n){for(var i=0,o=n.length;i<o;++i){for(var a=n[i],s=[],l=0,u=a.elements.length;l<u;l++)s.push(a.elements[l]);var c=a.filters.filters,f=[];for(var h in c)f.push(c[h].id);var p=s.join("/")+"::"+a.attachment+"_"+f.join("_");t.push(p);var y=e[p]=e[p]||{};y.zoom=r.CartoCSS.Tree.Zoom.all;var d=a.toJS(this.env);for(var m in d)(y[m]=y[m]||[]).push(d[m].join("\n"))}}},{key:"getShaders",value:function(){return this.shaders}},{key:"destroy",value:function(){this.cartoStr=null,this.env=null,this.ruleSet=null,this.parser=null,this.shaders=null}}]),e}();r._mapnik_reference_latest={version:"2.1.1",style:{"filter-mode":{type:["all","first"],doc:"Control the processing behavior of Rule filters within a Style. If 'all' is used then all Rules are processed sequentially independent of whether any previous filters matched. If 'first' is used then it means processing ends after the first match (a positive filter evaluation) and no further Rules in the Style are processed ('first' is usually the default for CSS implementations on top of Mapnik to simplify translation from CSS to Mapnik XML)","default-value":"all","default-meaning":"All Rules in a Style are processed whether they have filters or not and whether or not the filter conditions evaluate to true."},"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},layer:{name:{"default-value":"",type:"string",required:!0,"default-meaning":"No layer name has been provided",doc:"The name of a layer. Can be anything you wish and is not strictly validated, but ideally unique  in the map"},srs:{"default-value":"",type:"string","default-meaning":"No srs value is provided and the value will be inherited from the Map's srs",doc:"The spatial reference system definition for the layer, aka the projection. Can either be a proj4 literal string like '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs' or, if the proper proj4 epsg/nad/etc identifier files are installed, a string that uses an id like: '+init=epsg:4326'"},status:{"default-value":!0,type:"boolean","default-meaning":"This layer will be marked as active and available for processing",doc:"A property that can be set to false to disable this layer from being processed"},minzoom:{"default-value":"0",type:"float","default-meaning":"The layer will be visible at the minimum possible scale",doc:"The minimum scale denominator that this layer will be visible at. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},maxzoom:{"default-value":"1.79769e+308",type:"float","default-meaning":"The layer will be visible at the maximum possible scale",doc:"The maximum scale denominator that this layer will be visible at. The default is the numeric limit of the C++ double type, which may vary slightly by system, but is likely a massive number like 1.79769e+308 and ensures that this layer will always be visible unless the value is reduced. A layer's visibility is determined by whether its status is true and if the Map scale >= minzoom - 1e-6 and scale < maxzoom + 1e-6"},queryable:{"default-value":!1,type:"boolean","default-meaning":"The layer will not be available for the direct querying of data values",doc:"This property was added for GetFeatureInfo/WMS compatibility and is rarely used. It is off by default meaning that in a WMS context the layer will not be able to be queried unless the property is explicitly set to true"},"clear-label-cache":{"default-value":!1,type:"boolean","default-meaning":"The renderer's collision detector cache (used for avoiding duplicate labels and overlapping markers) will not be cleared immediately before processing this layer",doc:"This property, by default off, can be enabled to allow a user to clear the collision detector cache before a given layer is processed. This may be desirable to ensure that a given layers data shows up on the map even if it normally would not because of collisions with previously rendered labels or markers"},"group-by":{"default-value":"",type:"string","default-meaning":"No special layer grouping will be used during rendering",doc:"https://github.com/mapnik/mapnik/wiki/Grouped-rendering"},"buffer-size":{"default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:"Extra tolerance around the Layer extent (in pixels) used to when querying and (potentially) clipping the layer data during rendering"},"maximum-extent":{"default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query this specific layer data during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Layer."}},symbolizers:{"*":{"image-filters":{css:"image-filters","default-value":"none","default-meaning":"no filters",type:"functions",functions:[["agg-stack-blur",2],["emboss",0],["blur",0],["gray",0],["sobel",0],["edge-detect",0],["x-gradient",0],["y-gradient",0],["invert",0],["sharpen",0]],doc:"A list of image filters."},"comp-op":{css:"comp-op","default-value":"src-over","default-meaning":"add the current layer on top of other layers",doc:"Composite operation. This defines how this layer should behave relative to layers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]},opacity:{css:"opacity",type:"float",doc:"An alpha value for the style (which means an alpha applied to all features in separate buffer and then composited back to main buffer)","default-value":1,"default-meaning":"no separate buffer will be used and no alpha will be applied to the style after rendering"}},map:{"background-color":{css:"background-color","default-value":"none","default-meaning":"transparent",type:"color",doc:"Map Background color"},"background-image":{css:"background-image",type:"uri","default-value":"","default-meaning":"transparent",doc:"An image that is repeated below all features on a map as a background.",description:"Map Background image"},srs:{css:"srs",type:"string","default-value":"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs","default-meaning":"The proj4 literal of EPSG:4326 is assumed to be the Map's spatial reference and all data from layers within this map will be plotted using this coordinate system. If any layers do not declare an srs value then they will be assumed to be in the same srs as the Map and not transformations will be needed to plot them in the Map's coordinate space",doc:"Map spatial reference (proj4 string)"},"buffer-size":{css:"buffer-size","default-value":"0",type:"float","default-meaning":"No buffer will be used",doc:'Extra tolerance around the map (in pixels) used to ensure labels crossing tile boundaries are equally rendered in each tile (e.g. cut in each tile). Not intended to be used in combination with "avoid-edges".'},"maximum-extent":{css:"","default-value":"none",type:"bbox","default-meaning":"No clipping extent will be used",doc:"An extent to be used to limit the bounds used to query all layers during rendering. Should be minx, miny, maxx, maxy in the coordinates of the Map."},base:{css:"base","default-value":"","default-meaning":"This base path defaults to an empty string meaning that any relative paths to files referenced in styles or layers will be interpreted relative to the application process.",type:"string",doc:"Any relative paths used to reference files will be understood as relative to this directory path if the map is loaded from an in memory object rather than from the filesystem. If the map is loaded from the filesystem and this option is not provided it will be set to the directory of the stylesheet."},"paths-from-xml":{css:"","default-value":!0,"default-meaning":"Paths read from XML will be interpreted from the location of the XML",type:"boolean",doc:"value to control whether paths in the XML will be interpreted from the location of the XML or from the working directory of the program that calls load_map()"},"minimum-version":{css:"","default-value":"none","default-meaning":"Mapnik version will not be detected and no error will be thrown about compatibility",type:"string",doc:"The minumum Mapnik version (e.g. 0.7.2) needed to use certain functionality in the stylesheet"},"font-directory":{css:"font-directory",type:"uri","default-value":"none","default-meaning":"No map-specific fonts will be registered",doc:"Path to a directory which holds fonts which should be registered when the Map is loaded (in addition to any fonts that may be automatically registered)."}},polygon:{fill:{css:"polygon-fill",type:"color","default-value":"rgba(128,128,128,1)","default-meaning":"gray and fully opaque (alpha = 1), same as rgb(128,128,128)",doc:"Fill color to assign to a polygon"},"fill-opacity":{css:"polygon-opacity",type:"float",doc:"The opacity of the polygon","default-value":1,"default-meaning":"opaque"},gamma:{css:"polygon-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon edges"},"gamma-method":{css:"polygon-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},clip:{css:"polygon-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},line:{stroke:{css:"line-color","default-value":"rgba(0,0,0,1)",type:"color","default-meaning":"black and fully opaque (alpha = 1), same as rgb(0,0,0)",doc:"The color of a drawn line"},"stroke-width":{css:"line-width","default-value":1,type:"float",doc:"The width of a line in pixels"},"stroke-opacity":{css:"line-opacity","default-value":1,type:"float","default-meaning":"opaque",doc:"The opacity of a line"},"stroke-linejoin":{css:"line-join","default-value":"miter",type:["miter","round","bevel"],doc:"The behavior of lines when joining"},"stroke-linecap":{css:"line-cap","default-value":"butt",type:["butt","round","square"],doc:"The display of line endings"},"stroke-gamma":{css:"line-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of stroke line"},"stroke-gamma-method":{css:"line-gamma-method",type:["power","linear","none","threshold","multiply"],"default-value":"power","default-meaning":"pow(x,gamma) is used to calculate pixel gamma, which produces slightly smoother line and polygon antialiasing than the 'linear' method, while other methods are usually only used to disable AA",doc:"An Antigrain Geometry specific rendering hint to control the quality of antialiasing. Under the hood in Mapnik this method is used in combination with the 'gamma' value (which defaults to 1). The methods are in the AGG source at https://github.com/mapnik/mapnik/blob/master/deps/agg/include/agg_gamma_functions.h"},"stroke-dasharray":{css:"line-dasharray",type:"numbers",doc:"A pair of length values [a,b], where (a) is the dash length and (b) is the gap length respectively. More than two values are supported for more complex patterns.","default-value":"none","default-meaning":"solid line"},"stroke-dashoffset":{css:"line-dash-offset",type:"numbers",doc:"valid parameter but not currently used in renderers (only exists for experimental svg support in Mapnik which is not yet enabled)","default-value":"none","default-meaning":"solid line"},"stroke-miterlimit":{css:"line-miterlimit",type:"float",doc:"The limit on the ratio of the miter length to the stroke-width. Used to automatically convert miter joins to bevel joins for sharp angles to avoid the miter extending beyond the thickness of the stroking path. Normally will not need to be set, but a larger value can sometimes help avoid jaggy artifacts.","default-value":4,"default-meaning":"Will auto-convert miters to bevel line joins when theta is less than 29 degrees as per the SVG spec: 'miterLength / stroke-width = 1 / sin ( theta / 2 )'"},clip:{css:"line-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},offset:{css:"line-offset",type:"float","default-value":0,"default-meaning":"no offset",doc:"Offsets a line a number of pixels parallel to its actual path. Postive values move the line left, negative values move it right (relative to the directionality of the line)."},rasterizer:{css:"line-rasterizer",type:["full","fast"],"default-value":"full",doc:"Exposes an alternate AGG rendering method that sacrifices some accuracy for speed."},"geometry-transform":{css:"line-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},markers:{file:{css:"marker-file",doc:"An SVG file that this marker shows at each placement. If no file is given, the marker will show an ellipse.","default-value":"","default-meaning":"An ellipse or circle, if width equals height",type:"uri"},opacity:{css:"marker-opacity",doc:"The overall opacity of the marker, if set, overrides both the opacity of both the fill and stroke","default-value":1,"default-meaning":"The stroke-opacity and fill-opacity will be used",type:"float"},"fill-opacity":{css:"marker-fill-opacity",doc:"The fill opacity of the marker","default-value":1,"default-meaning":"opaque",type:"float"},stroke:{css:"marker-line-color",doc:"The color of the stroke around a marker shape.","default-value":"black",type:"color"},"stroke-width":{css:"marker-line-width",doc:"The width of the stroke around a marker shape, in pixels. This is positioned on the boundary, so high values can cover the area itself.",type:"float"},"stroke-opacity":{css:"marker-line-opacity","default-value":1,"default-meaning":"opaque",doc:"The opacity of a line",type:"float"},placement:{css:"marker-placement",type:["point","line","interior"],"default-value":"point","default-meaning":"Place markers at the center point (centroid) of the geometry",doc:"Attempt to place markers on a point, in the center of a polygon, or if markers-placement:line, then multiple times along a line. 'interior' placement can be used to ensure that points placed on polygons are forced to be inside the polygon interior"},"multi-policy":{css:"marker-multi-policy",type:["each","whole","largest"],"default-value":"each","default-meaning":"If a feature contains multiple geometries and the placement type is either point or interior then a marker will be rendered for each",doc:"A special setting to allow the user to control rendering behavior for 'multi-geometries' (when a feature contains multiple geometries). This setting does not apply to markers placed along lines. The 'each' policy is default and means all geometries will get a marker. The 'whole' policy means that the aggregate centroid between all geometries will be used. The 'largest' policy means that only the largest (by bounding box areas) feature will get a rendered marker (this is how text labeling behaves by default)."},"marker-type":{css:"marker-type",type:["arrow","ellipse"],"default-value":"ellipse",doc:"The default marker-type. If a SVG file is not given as the marker-file parameter, the renderer provides either an arrow or an ellipse (a circle if height is equal to width)"},width:{css:"marker-width","default-value":10,doc:"The width of the marker, if using one of the default types.",type:"expression"},height:{css:"marker-height","default-value":10,doc:"The height of the marker, if using one of the default types.",type:"expression"},fill:{css:"marker-fill","default-value":"blue",doc:"The color of the area of the marker.",type:"color"},"allow-overlap":{css:"marker-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping markers are shown or hidden.","default-meaning":"Do not allow makers to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"marker-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},spacing:{css:"marker-spacing",doc:"Space between repeated labels","default-value":100,type:"float"},"max-error":{css:"marker-max-error",type:"float","default-value":.2,doc:"The maximum difference between actual marker placement and the marker-spacing parameter. Setting a high value can allow the renderer to try to resolve placement conflicts with other symbolizers."},transform:{css:"marker-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},clip:{css:"marker-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"marker-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"marker-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"marker-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},shield:{name:{css:"shield-name",type:"expression",serialization:"content",doc:'Value to use for a shield"s text label. Data columns are specified using brackets like [column_name]'},file:{css:"shield-file",required:!0,type:"uri","default-value":"none",doc:"Image file to render behind the shield text"},"face-name":{css:"shield-face-name",type:"string",validate:"font",doc:"Font name and style to use for the shield text","default-value":"",required:!0},"unlock-image":{css:"shield-unlock-image",type:"boolean",doc:"This parameter should be set to true if you are trying to position text beside rather than on top of the shield image","default-value":!1,"default-meaning":"text alignment relative to the shield image uses the center of the image as the anchor for text positioning."},size:{css:"shield-size",type:"float",doc:"The size of the shield text in pixels"},fill:{css:"shield-fill",type:"color",doc:"The color of the shield text"},placement:{css:"shield-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"How this shield should be placed. Point placement attempts to place it on top of points, line places along lines multiple times per feature, vertex places on the vertexes of polygons, and interior attempts to place inside of polygons."},"avoid-edges":{css:"shield-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.",type:"boolean","default-value":!1},"allow-overlap":{css:"shield-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping shields are shown or hidden.","default-meaning":"Do not allow shields to overlap with other map elements already placed."},"minimum-distance":{css:"shield-min-distance",type:"float","default-value":0,doc:"Minimum distance to the next shield symbol, not necessarily the same shield."},spacing:{css:"shield-spacing",type:"float","default-value":0,doc:"The spacing between repeated occurrences of the same shield on a line"},"minimum-padding":{css:"shield-min-padding","default-value":0,doc:"Determines the minimum amount of padding that a shield gets relative to other shields",type:"float"},"wrap-width":{css:"shield-wrap-width",type:"unsigned","default-value":0,doc:"Length of a chunk of text in characters before wrapping text"},"wrap-before":{css:"shield-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"shield-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long names."},"halo-fill":{css:"shield-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"shield-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},"character-spacing":{css:"shield-character-spacing",type:"unsigned","default-value":0,doc:"Horizontal spacing between characters (in pixels). Currently works for point placement only, not line placement."},"line-spacing":{css:"shield-line-spacing",doc:"Vertical spacing between lines of multiline labels (in pixels)",type:"unsigned"},dx:{css:"shield-text-dx",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"shield-text-dy",type:"float",doc:"Displace text within shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"shield-dx":{css:"shield-dx",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},"shield-dy":{css:"shield-dy",type:"float",doc:"Displace shield by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},opacity:{css:"shield-opacity",type:"float",doc:"(Default 1.0) - opacity of the image used for the shield","default-value":1},"text-opacity":{css:"shield-text-opacity",type:"float",doc:"(Default 1.0) - opacity of the text placed on top of the shield","default-value":1},"horizontal-alignment":{css:"shield-horizontal-alignment",type:["left","middle","right","auto"],doc:"The shield's horizontal alignment from its centerpoint","default-value":"auto"},"vertical-alignment":{css:"shield-vertical-alignment",type:["top","middle","bottom","auto"],doc:"The shield's vertical alignment from its centerpoint","default-value":"middle"},"text-transform":{css:"shield-text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"justify-alignment":{css:"shield-justify-alignment",type:["left","center","right","auto"],doc:"Define how text in a shield's label is justified","default-value":"auto"},clip:{css:"shield-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"shield-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"line-pattern":{file:{css:"line-pattern-file",type:"uri","default-value":"none",required:!0,doc:"An image file to be repeated and warped along a line"},clip:{css:"line-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"line-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"line-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"line-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},"polygon-pattern":{file:{css:"polygon-pattern-file",type:"uri","default-value":"none",required:!0,doc:"Image to use as a repeated pattern fill within a polygon"},alignment:{css:"polygon-pattern-alignment",type:["local","global"],"default-value":"local",doc:"Specify whether to align pattern fills to the layer or to the map."},gamma:{css:"polygon-pattern-gamma",type:"float","default-value":1,"default-meaning":"fully antialiased",range:"0-1",doc:"Level of antialiasing of polygon pattern edges"},opacity:{css:"polygon-pattern-opacity",type:"float",doc:"(Default 1.0) - Apply an opacity level to the image used for the pattern","default-value":1,"default-meaning":"The image is rendered without modifications"},clip:{css:"polygon-pattern-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},smooth:{css:"polygon-pattern-smooth",type:"float","default-value":0,"default-meaning":"no smoothing",range:"0-1",doc:"Smooths out geometry angles. 0 is no smoothing, 1 is fully smoothed. Values greater than 1 will produce wild, looping geometries."},"geometry-transform":{css:"polygon-pattern-geometry-transform",type:"functions","default-value":"none","default-meaning":"geometry will not be transformed",doc:"Allows transformation functions to be applied to the geometry.",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]]},"comp-op":{css:"polygon-pattern-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},raster:{opacity:{css:"raster-opacity","default-value":1,"default-meaning":"opaque",type:"float",doc:"The opacity of the raster symbolizer on top of other symbolizers."},"filter-factor":{css:"raster-filter-factor","default-value":-1,"default-meaning":"Allow the datasource to choose appropriate downscaling.",type:"float",doc:"This is used by the Raster or Gdal datasources to pre-downscale images using overviews. Higher numbers can sometimes cause much better scaled image output, at the cost of speed."},scaling:{css:"raster-scaling",type:["near","fast","bilinear","bilinear8","bicubic","spline16","spline36","hanning","hamming","hermite","kaiser","quadric","catrom","gaussian","bessel","mitchell","sinc","lanczos","blackman"],"default-value":"near",doc:"The scaling algorithm used to making different resolution versions of this raster layer. Bilinear is a good compromise between speed and accuracy, while lanczos gives the highest quality."},"mesh-size":{css:"raster-mesh-size","default-value":16,"default-meaning":"Reprojection mesh will be 1/16 of the resolution of the source image",type:"unsigned",doc:"A reduced resolution mesh is used for raster reprojection, and the total image size is divided by the mesh-size to determine the quality of that mesh. Values for mesh-size larger than the default will result in faster reprojection but might lead to distortion."},"comp-op":{css:"raster-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},point:{file:{css:"point-file",type:"uri",required:!1,"default-value":"none",doc:"Image file to represent a point"},"allow-overlap":{css:"point-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping points are shown or hidden.","default-meaning":"Do not allow points to overlap with each other - overlapping markers will not be shown."},"ignore-placement":{css:"point-ignore-placement",type:"boolean","default-value":!1,"default-meaning":"do not store the bbox of this geometry in the collision detector cache",doc:"value to control whether the placement of the feature will prevent the placement of other features"},opacity:{css:"point-opacity",type:"float","default-value":1,"default-meaning":"Fully opaque",doc:"A value from 0 to 1 to control the opacity of the point"},placement:{css:"point-placement",type:["centroid","interior"],doc:"How this point should be placed. Centroid calculates the geometric center of a polygon, which can be outside of it, while interior always places inside of a polygon.","default-value":"centroid"},transform:{css:"point-transform",type:"functions",functions:[["matrix",6],["translate",2],["scale",2],["rotate",3],["skewX",1],["skewY",1]],"default-value":"","default-meaning":"No transformation",doc:"SVG transformation definition"},"comp-op":{css:"point-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},text:{name:{css:"text-name",type:"expression",required:!0,"default-value":"",serialization:"content",doc:"Value to use for a text label. Data columns are specified using brackets like [column_name]"},"face-name":{css:"text-face-name",type:"string",validate:"font",doc:"Font name and style to render a label in",required:!0},size:{css:"text-size",type:"float","default-value":10,doc:"Text size in pixels"},"text-ratio":{css:"text-ratio",doc:"Define the amount of text (of the total) present on successive lines when wrapping occurs","default-value":0,type:"unsigned"},"wrap-width":{css:"text-wrap-width",doc:"Length of a chunk of text in characters before wrapping text","default-value":0,type:"unsigned"},"wrap-before":{css:"text-wrap-before",type:"boolean","default-value":!1,doc:"Wrap text before wrap-width is reached. If false, wrapped lines will be a bit longer than wrap-width."},"wrap-character":{css:"text-wrap-character",type:"string","default-value":" ",doc:"Use this character instead of a space to wrap long text."},spacing:{css:"text-spacing",type:"unsigned",doc:"Distance between repeated text labels on a line (aka. label-spacing)"},"character-spacing":{css:"text-character-spacing",type:"float","default-value":0,doc:"Horizontal spacing adjustment between characters in pixels"},"line-spacing":{css:"text-line-spacing","default-value":0,type:"unsigned",doc:"Vertical spacing adjustment between lines in pixels"},"label-position-tolerance":{css:"text-label-position-tolerance","default-value":0,type:"unsigned",doc:"Allows the label to be displaced from its ideal position by a number of pixels (only works with placement:line)"},"max-char-angle-delta":{css:"text-max-char-angle-delta",type:"float","default-value":"22.5",doc:"The maximum angle change, in degrees, allowed between adjacent characters in a label. This value internally is converted to radians to the default is 22.5*math.pi/180.0. The higher the value the fewer labels will be placed around around sharp corners."},fill:{css:"text-fill",doc:"Specifies the color for the text","default-value":"#000000",type:"color"},opacity:{css:"text-opacity",doc:"A number from 0 to 1 specifying the opacity for the text","default-value":1,"default-meaning":"Fully opaque",type:"float"},"halo-fill":{css:"text-halo-fill",type:"color","default-value":"#FFFFFF","default-meaning":"white",doc:"Specifies the color of the halo around the text."},"halo-radius":{css:"text-halo-radius",doc:"Specify the radius of the halo in pixels","default-value":0,"default-meaning":"no halo",type:"float"},dx:{css:"text-dx",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the X axis.  A positive value will shift the text right","default-value":0},dy:{css:"text-dy",type:"float",doc:"Displace text by fixed amount, in pixels, +/- along the Y axis.  A positive value will shift the text down","default-value":0},"vertical-alignment":{css:"text-vertical-alignment",type:["top","middle","bottom","auto"],doc:"Position of label relative to point position.","default-value":"auto","default-meaning":'Default affected by value of dy; "bottom" for dy>0, "top" for dy<0.'},"avoid-edges":{css:"text-avoid-edges",doc:"Tell positioning algorithm to avoid labeling near intersection edges.","default-value":!1,type:"boolean"},"minimum-distance":{css:"text-min-distance",doc:"Minimum permitted distance to the next text symbolizer.",type:"float"},"minimum-padding":{css:"text-min-padding",doc:"Determines the minimum amount of padding that a text symbolizer gets relative to other text",type:"float"},"minimum-path-length":{css:"text-min-path-length",type:"float","default-value":0,"default-meaning":"place labels on all paths",doc:"Place labels only on paths longer than this value."},"allow-overlap":{css:"text-allow-overlap",type:"boolean","default-value":!1,doc:"Control whether overlapping text is shown or hidden.","default-meaning":"Do not allow text to overlap with other text - overlapping markers will not be shown."},orientation:{css:"text-orientation",type:"expression",doc:"Rotate the text."},placement:{css:"text-placement",type:["point","line","vertex","interior"],"default-value":"point",doc:"Control the style of placement of a point versus the geometry it is attached to."},"placement-type":{css:"text-placement-type",doc:'Re-position and/or re-size text to avoid overlaps. "simple" for basic algorithm (using text-placements string,) "dummy" to turn this feature off.',type:["dummy","simple"],"default-value":"dummy"},placements:{css:"text-placements",type:"string","default-value":"",doc:'If "placement-type" is set to "simple", use this "POSITIONS,[SIZES]" string. An example is `text-placements: "E,NE,SE,W,NW,SW";` '},"text-transform":{css:"text-transform",type:["none","uppercase","lowercase","capitalize"],doc:"Transform the case of the characters","default-value":"none"},"horizontal-alignment":{css:"text-horizontal-alignment",type:["left","middle","right","auto"],doc:"The text's horizontal alignment from its centerpoint","default-value":"auto"},"justify-alignment":{css:"text-align",type:["left","right","center","auto"],doc:"Define how text is justified","default-value":"auto","default-meaning":"Auto alignment means that text will be centered by default except when using the `placement-type` parameter - in that case either right or left justification will be used automatically depending on where the text could be fit given the `text-placements` directives"},clip:{css:"text-clip",type:"boolean","default-value":!0,"default-meaning":"geometry will be clipped to map bounds before rendering",doc:"geometries are clipped to map bounds by default for best rendering performance. In some cases users may wish to disable this to avoid rendering artifacts."},"comp-op":{css:"text-comp-op","default-value":"src-over","default-meaning":"add the current symbolizer on top of other symbolizer",doc:"Composite operation. This defines how this symbolizer should behave relative to symbolizers atop or below it.",type:["clear","src","dst","src-over","dst-over","src-in","dst-in","src-out","dst-out","src-atop","dst-atop","xor","plus","minus","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","contrast","invert","invert-rgb","grain-merge","grain-extract","hue","saturation","color","value"]}},building:{fill:{css:"building-fill","default-value":"#FFFFFF",doc:"The color of the buildings walls.",type:"color"},"fill-opacity":{css:"building-fill-opacity",type:"float",doc:"The opacity of the building as a whole, including all walls.","default-value":1},height:{css:"building-height",doc:"The height of the building in pixels.",type:"expression","default-value":"0"}}},colors:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50],transparent:[0,0,0,0]},filter:{value:["true","false","null","point","linestring","polygon","collection"]}},Sx.mapnik_reference={version:{latest:r._mapnik_reference_latest,"2.1.1":r._mapnik_reference_latest}},r.CartoCSS=Sx,r.CartoCSS.Tree={},r.CartoCSS.Tree.operate=function(e,t,n){switch(e){case"+":return t+n;case"-":return t-n;case"*":return t*n;case"%":return t%n;case"/":return t/n}},r.CartoCSS.Tree.functions={rgb:function(e,t,n){return this.rgba(e,t,n,1)},rgba:function(e,t,n,i){var o=this,a=[e,t,n].map(function(e){return o.number(e)});return i=o.number(i),a.some(isNaN)||isNaN(i)?null:new r.CartoCSS.Tree.Color(a,i)},stop:function(e){var t,n;return arguments.length>1&&(t=arguments[1]),arguments.length>2&&(n=arguments[2]),{is:"tag",val:e,color:t,mode:n,toString:function(r){return'\n\t<stop value="'+e.ev(r)+'"'+(t?' color="'+t.ev(r)+'" ':"")+(n?' mode="'+n.ev(r)+'" ':"")+"/>"}}},hsl:function(e,t,n){return this.hsla(e,t,n,1)},hsla:function(e,t,n,r){if([e=this.number(e)%360/360,t=this.number(t),n=this.number(n),r=this.number(r)].some(isNaN))return null;var i=n<=.5?n*(t+1):n+t-n*t,o=2*n-i;return this.rgba(255*a(e+1/3),255*a(e),255*a(e-1/3),r);function a(e){return 6*(e=e<0?e+1:e>1?e-1:e)<1?o+(i-o)*e*6:2*e<1?i:3*e<2?o+(i-o)*(2/3-e)*6:o}},hue:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(e.toHSL().h)):null},saturation:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().s),"%"):null},lightness:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(Math.round(100*e.toHSL().l),"%"):null},alpha:function(e){return"toHSL"in e?new r.CartoCSS.Tree.Dimension(e.toHSL().a):null},saturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s+=t.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},desaturate:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.s-=t.value/100,n.s=this.clamp(n.s),this.hsla_simple(n)},lighten:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l+=t.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},darken:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.l-=t.value/100,n.l=this.clamp(n.l),this.hsla_simple(n)},fadein:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a+=t.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},fadeout:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL();return n.a-=t.value/100,n.a=this.clamp(n.a),this.hsla_simple(n)},spin:function(e,t){if(!("toHSL"in e))return null;var n=e.toHSL(),r=(n.h+t.value)%360;return n.h=r<0?360+r:r,this.hsla_simple(n)},replace:function(e,t,n){return"field"===e.is?e.toString+".replace("+t.toString()+", "+n.toString()+")":e.replace(t,n)},mix:function(e,t,n){var i=n.value/100,o=2*i-1,a=e.toHSL().a-t.toHSL().a,s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s,u=[e.rgb[0]*s+t.rgb[0]*l,e.rgb[1]*s+t.rgb[1]*l,e.rgb[2]*s+t.rgb[2]*l],c=e.alpha*i+t.alpha*(1-i);return new r.CartoCSS.Tree.Color(u,c)},greyscale:function(e){return this.desaturate(e,new r.CartoCSS.Tree.Dimension(100))},"%":function(e){for(var t=Array.prototype.slice.call(arguments,1),n=e.value,i=0;i<t.length;i++)n=n.replace(/%s/,t[i].value).replace(/%[da]/,t[i].toString());return n=n.replace(/%%/g,"%"),new r.CartoCSS.Tree.Quoted(n)},hsla_simple:function(e){return this.hsla(e.h,e.s,e.l,e.a)},number:function(e){return e instanceof r.CartoCSS.Tree.Dimension?parseFloat("%"===e.unit?e.value/100:e.value):"number"==typeof e?e:NaN},clamp:function(e){return Math.min(1,Math.max(0,e))}},r.CartoCSS.Tree.Call=function(){function e(t,n,r){vx(this,e),this.is="call",this.name=t,this.args=n,this.index=r}return bx(e,[{key:"ev",value:function(e){for(var t=this.args.map(function(t){return t.ev(e)}),n=0;n<t.length;n++)if("undefined"===t[n].is)return{is:"undefined",value:"undefined"};if(this.name in r.CartoCSS.Tree.functions){if(r.CartoCSS.Tree.functions[this.name].length<=t.length){var i=r.CartoCSS.Tree.functions[this.name].apply(r.CartoCSS.Tree.functions,t);return null===i?(e.error({message:"incorrect arguments given to "+this.name+"()",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):i}return e.error({message:"incorrect number of arguments for "+this.name+"(). "+r.CartoCSS.Tree.functions[this.name].length+" expected.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}var o=r.CartoCSS.Tree.Reference.mapnikFunctions[this.name];if(void 0===o){var a=dx()(r.CartoCSS.Tree.Reference.mapnikFunctions),s=this.name,l=a.map(function(e){return[e[0],r.CartoCSS.Tree.Reference.editDistance(s,e[0]),e[1]]}).sort(function(e,t){return e[1]-t[1]});return e.error({message:"unknown function "+this.name+"(), did you mean "+l[0][0]+"("+l[0][2]+")",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}}return o!==t.length&&-1!==o?(e.error({message:"function "+this.name+"() takes "+o+" arguments and was given "+t.length,index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):(this.args=t,this)}},{key:"toString",value:function(e,t){return this.args.length?this.name+"("+this.args.join(",")+")":this.name}}]),e}(),r.CartoCSS.Tree.Color=function(){function e(t,n){vx(this,e),this.is="color",Array.isArray(t)?this.rgb=t.slice(0,3):6==t.length?this.rgb=t.match(/.{2}/g).map(function(e){return parseInt(e,16)}):this.rgb=t.split("").map(function(e){return parseInt(e+e,16)}),"number"==typeof n?this.alpha=n:4===t.length?this.alpha=t[3]:this.alpha=1}return bx(e,[{key:"ev",value:function(){return this}},{key:"toString",value:function(){return"rgba("+this.rgb.map(function(e){return Math.round(e)}).concat(this.alpha).join(", ")+")"}},{key:"operate",value:function(e,t,n){var i=[];n instanceof r.CartoCSS.Tree.Color||(n=n.toColor());for(var o=0;o<3;o++)i[o]=r.CartoCSS.Tree.operate(t,this.rgb[o],n.rgb[o]);return new r.CartoCSS.Tree.Color(i)}},{key:"toHSL",value:function(){var e,t,n=this.rgb[0]/255,r=this.rgb[1]/255,i=this.rgb[2]/255,o=this.alpha,a=Math.max(n,r,i),s=Math.min(n,r,i),l=(a+s)/2,u=a-s;if(a===s)e=t=0;else{switch(t=l>.5?u/(2-a-s):u/(a+s),a){case n:e=(r-i)/u+(r<i?6:0);break;case r:e=(i-n)/u+2;break;case i:e=(n-r)/u+4}e/=6}return{h:360*e,s:t,l:l,a:o}}}]),e}(),r.CartoCSS.Tree.Comment=function(){function e(t,n){vx(this,e),this.value=t,this.silent=!!n}return bx(e,[{key:"toString",value:function(e){return"\x3c!--"+this.value+"--\x3e"}},{key:"ev",value:function(){return this}}]),e}(),r.CartoCSS.Tree.Definition=function(){function e(t,n){vx(this,e),this.elements=t.elements,this.rules=n,this.ruleIndex={};for(var r=0;r<this.rules.length;r++)"zoom"in this.rules[r]&&(this.rules[r]=this.rules[r].clone()),this.rules[r].zoom=t.zoom,this.ruleIndex[this.rules[r].updateID()]=!0;this.filters=t.filters,this.zoom=t.zoom,this.attachment=t.attachment||"__default__",this.specificity=t.specificity()}return bx(e,[{key:"toString",value:function(){for(var e=this.filters.toString(),t=0;t<this.rules.length;t++)e+="\n    "+this.rules[t];return e}},{key:"toJS",value:function(e){var t={},n=this.zoom,i=this.filters.toJS(e),o=[n];function a(n){if(n instanceof r.CartoCSS.Tree.Rule)t[n.name]=t[n.name]||[],i?t[n.name].push("if("+i+"){"+n.value.toJS(e)+"}"):t[n.name].push(n.value.toJS(e));else if(n instanceof r.CartoCSS.Tree.Ruleset){var o=n.toJS(e);for(var a in o)for(var s in t[a]=t[a]||[],o[a])t[a].push(o[a][s])}}for(var s in i&&o.push(i),i=o.join(" && "),this.rules)a(this.rules[s]);return t}}]),e}(),r.CartoCSS.Tree.Dimension=function(){function e(t,n,r){vx(this,e),this.is="float",this.physical_units=["m","cm","in","mm","pt","pc"],this.screen_units=["px","%"],this.all_units=["m","cm","in","mm","pt","pc","px","%"],this.densities={m:.0254,mm:25.4,cm:2.54,pt:72,pc:6},this.value=parseFloat(t),this.unit=n||null,this.index=r}return bx(e,[{key:"ev",value:function(e){if(this.unit&&this.all_units.indexOf(this.unit)<0)return e.error({message:"Invalid unit: '"+this.unit+"'",index:this.index}),{is:"undefined",value:"undefined"};if(this.unit&&this.physical_units.indexOf(this.unit)>=0){if(!e.ppi)return e.error({message:"ppi is not set, so metric units can't be used",index:this.index}),{is:"undefined",value:"undefined"};this.value=this.value/this.densities[this.unit]*e.ppi,this.unit="px"}return this}},{key:"toColor",value:function(){return new r.CartoCSS.Tree.Color([this.value,this.value,this.value])}},{key:"round",value:function(){return this.value=Math.round(this.value),this}},{key:"toString",value:function(){return this.value.toString()}},{key:"operate",value:function(e,t,n){return"%"===this.unit&&"%"!==n.unit?(e.error({message:"If two operands differ, the first must not be %",index:this.index}),{is:"undefined",value:"undefined"}):"%"!==this.unit&&"%"===n.unit?"*"===t||"/"===t||"%"===t?(e.error({message:"Percent values can only be added or subtracted from other values",index:this.index}),{is:"undefined",value:"undefined"}):new r.CartoCSS.Tree.Dimension(r.CartoCSS.Tree.operate(t,this.value,this.value*n.value*.01),this.unit):new r.CartoCSS.Tree.Dimension(r.CartoCSS.Tree.operate(t,this.value,n.value),this.unit||n.unit)}}]),e}(),r.CartoCSS.Tree.Element=function(){function e(t){vx(this,e),this.value=t.trim(),"#"===this.value[0]&&(this.type="id",this.clean=this.value.replace(/^#/,"")),"."===this.value[0]&&(this.type="class",this.clean=this.value.replace(/^\./,"")),-1!==this.value.indexOf("*")&&(this.type="wildcard")}return bx(e,[{key:"specificity",value:function(){return["id"===this.type?1:0,"class"===this.type?1:0]}},{key:"toString",value:function(){return this.value}}]),e}(),r.CartoCSS.Tree.Expression=function(){function e(t){vx(this,e),this.is="expression",this.value=t}return bx(e,[{key:"ev",value:function(e){return this.value.length>1?new r.CartoCSS.Tree.Expression(this.value.map(function(t){return t.ev(e)})):this.value[0].ev(e)}},{key:"toString",value:function(e){return this.value.map(function(t){return t.toString(e)}).join(" ")}}]),e}(),r.CartoCSS.Tree.Field=function(){function e(t){vx(this,e),this.is="field",this.value=t||""}return bx(e,[{key:"toString",value:function(){return'["'+this.value.toUpperCase()+'"]'}},{key:"ev",value:function(){return this}}]),e}(),r.CartoCSS.Tree.Filter=function(){function e(t,n,r,i,o){vx(this,e),this.ops={"<":[" &lt; ","numeric"],">":[" &gt; ","numeric"],"=":[" = ","both"],"!=":[" != ","both"],"<=":[" &lt;= ","numeric"],">=":[" &gt;= ","numeric"],"=~":[".match(","string",")"]},this.key=t,this.op=n,this.val=r,this.index=i,this.filename=o,this.id=this.key+this.op+this.val}return bx(e,[{key:"ev",value:function(e){return this.key=this.key.ev(e),this.val=this.val.ev(e),this}},{key:"toString",value:function(){return"["+this.id+"]"}}]),e}(),r.CartoCSS.Tree.Filterset=function(){function e(){vx(this,e),this.filters={}}return bx(e,[{key:"toJS",value:function(e){function t(e){var t=e.op;"="===t&&(t="==");var n=e.val;void 0!==e._val&&(n=e._val.toString(!0)),e.key&&"scale"===e.key.value?n=+n:"string"!=typeof n&&"object"!==mx(n)||(n="'"+n+"'");var r="attributes";return r+"&&"+r+e.key+"&&"+r+e.key+" "+t+n}var n=[];for(var r in this.filters)n.push(t(this.filters[r]));return n.join(" && ")}},{key:"toString",value:function(){var e=[];for(var t in this.filters)e.push(this.filters[t].id);return e.sort().join("\t")}},{key:"ev",value:function(e){for(var t in this.filters)this.filters[t].ev(e);return this}},{key:"clone",value:function(){var e=new r.CartoCSS.Tree.Filterset;for(var t in this.filters)e.filters[t]=this.filters[t];return e}},{key:"cloneWith",value:function(e){var t=[];for(var n in e.filters){var i=this.addable(e.filters[n]);if(!1===i)return!1;!0===i&&t.push(e.filters[n])}if(!t.length)return null;var o=new r.CartoCSS.Tree.Filterset;for(n in this.filters)o.filters[n]=this.filters[n];for(;n=t.shift();)o.add(n);return o}},{key:"addable",value:function(e){var t=e.key.toString(),n=e.val.toString();switch(n.match(/^[0-9]+(\.[0-9]*)?$/)&&(n=parseFloat(n)),e.op){case"=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val.toString()==n&&null:void 0===this.filters[t+"!="+n]&&(!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n))));case"=~":return!0;case"!=":return void 0!==this.filters[t+"="]?this.filters[t+"="].val!==n&&null:void 0!==this.filters[t+"!="+n]?null:void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null;case">":return t+"="in this.filters?!(this.filters[t+"="].val<=n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)||null));case">=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val<n)&&null:!(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n)&&(!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)&&(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n?null:!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)||null));case"<":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>=n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>=n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<n)||null));case"<=":return void 0!==this.filters[t+"="]?!(this.filters[t+"="].val>n)&&null:!(void 0!==this.filters[t+">"]&&this.filters[t+">"].val>=n)&&(!(void 0!==this.filters[t+">="]&&this.filters[t+">="].val>n)&&(void 0!==this.filters[t+"<"]&&this.filters[t+"<"].val<=n?null:!(void 0!==this.filters[t+"<="]&&this.filters[t+"<="].val<=n)||null))}}},{key:"conflict",value:function(e){var t=e.key.toString(),n=e.val.toString();return isNaN(parseFloat(n))||(n=parseFloat(n)),("="===e.op&&void 0!==this.filters[t+"="]&&n!=this.filters[t+"="].val.toString()||"!="===e.op&&void 0!==this.filters[t+"="]&&n==this.filters[t+"="].val.toString()||"="===e.op&&void 0!==this.filters[t+"!="]&&n===this.filters[t+"!="].val.toString())&&e.toString()+" added to "+this.toString()+" produces an invalid filter"}},{key:"add",value:function(e,t){var n,r=e.key.toString(),i=e.op,o=this.conflict(e);if(o)return o;if("="===i){for(var a in this.filters)this.filters[a].key===r&&delete this.filters[a];this.filters[r+"="]=e}else if("!="===i)this.filters[r+"!="+e.val]=e;else if("=~"===i)this.filters[r+"=~"+e.val]=e;else if(">"===i){for(var s in this.filters)this.filters[s].key===r&&this.filters[s].val<=e.val&&delete this.filters[s];this.filters[r+">"]=e}else if(">="===i){for(var l in this.filters)n=+this.filters[l].val.toString(),this.filters[l].key===r&&n<e.val&&delete this.filters[l];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op=">",this.filters[r+">"]=e):this.filters[r+">="]=e}else if("<"===i){for(var u in this.filters)n=+this.filters[u].val.toString(),this.filters[u].key===r&&n>=e.val&&delete this.filters[u];this.filters[r+"<"]=e}else if("<="===i){for(var c in this.filters)n=+this.filters[c].val.toString(),this.filters[c].key===r&&n>e.val&&delete this.filters[c];void 0!==this.filters[r+"!="+e.val]?(delete this.filters[r+"!="+e.val],e.op="<",this.filters[r+"<"]=e):this.filters[r+"<="]=e}}}]),e}(),r.CartoCSS.Tree.Fontset=function e(t,n){vx(this,e),this.fonts=n,this.name="fontset-"+t.effects.length},r.CartoCSS.Tree.Invalid=function(){function e(t,n,r){vx(this,e),this.is="invalid",this.chunk=t,this.index=n,this.type="syntax",this.message=r||"Invalid code: "+this.chunk}return bx(e,[{key:"ev",value:function(e){return e.error({chunk:this.chunk,index:this.index,type:"syntax",message:this.message||"Invalid code: "+this.chunk}),{is:"undefined"}}}]),e}(),r.CartoCSS.Tree.Keyword=function(){function e(t){vx(this,e),this.value=t;var n={transparent:"color",true:"boolean",false:"boolean"};this.is=n[t]?n[t]:"keyword"}return bx(e,[{key:"ev",value:function(){return this}}]),bx(e,[{key:"toString",value:function(){return this.value}}]),e}(),r.CartoCSS.Tree.Literal=function(){function e(t){vx(this,e),this.value=t||"",this.is="field"}return bx(e,[{key:"toString",value:function(){return this.value}},{key:"ev",value:function(){return this}}]),e}(),r.CartoCSS.Tree.Operation=function(){function e(t,n,r){vx(this,e),this.is="operation",this.op=t.trim(),this.operands=n,this.index=r}return bx(e,[{key:"ev",value:function(e){var t,n=this.operands[0].ev(e),i=this.operands[1].ev(e);return"undefined"===n.is||"undefined"===i.is?{is:"undefined",value:"undefined"}:(n instanceof r.CartoCSS.Tree.Dimension&&i instanceof r.CartoCSS.Tree.Color&&("*"===this.op||"+"===this.op?(t=i,i=n,n=t):e.error({name:"OperationError",message:"Can't substract or divide a color from a number",index:this.index})),n instanceof r.CartoCSS.Tree.Quoted&&i instanceof r.CartoCSS.Tree.Quoted&&"+"!==this.op?(e.error({message:"Can't subtract, divide, or multiply strings.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n instanceof r.CartoCSS.Tree.Field||i instanceof r.CartoCSS.Tree.Field||n instanceof r.CartoCSS.Tree.Literal||i instanceof r.CartoCSS.Tree.Literal?"color"===n.is||"color"===i.is?(e.error({message:"Can't subtract, divide, or multiply colors in expressions.",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):new r.CartoCSS.Tree.Literal(n.ev(e).toString(!0)+this.op+i.ev(e).toString(!0)):void 0===n.operate?(e.error({message:"Cannot do math with type "+n.is+".",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"}):n.operate(e,this.op,i))}}]),e}(),r.CartoCSS.Tree.Quoted=function(){function e(t){vx(this,e),this.is="string",this.value=t||""}return bx(e,[{key:"toString",value:function(e){var t=this.value.replace(/&/g,"&amp;"),n=t.replace(/\'/g,"\\'").replace(/\"/g,"&quot;").replace(/</g,"&lt;").replace(/\>/g,"&gt;");return!0===e?"'"+n+"'":t}},{key:"ev",value:function(){return this}},{key:"operate",value:function(e,t,n){return new r.CartoCSS.Tree.Quoted(r.CartoCSS.Tree.operate(t,this.toString(),n.toString(this.contains_field)))}}]),e}(),r.CartoCSS.Tree.Reference={_validateValue:{font:function(e,t){return!e.validation_data||!e.validation_data.fonts||-1!=e.validation_data.fonts.indexOf(t)}},setData:function(e){this.data=e,this.selector_cache=function(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])e.symbolizers[n][r].hasOwnProperty("css")&&(t[e.symbolizers[n][r].css]=[e.symbolizers[n][r],n,r]);return t}(e),this.mapnikFunctions=function(e){var t={};for(var n in e.symbolizers)for(var r in e.symbolizers[n])if("functions"===e.symbolizers[n][r].type)for(var i=0;i<e.symbolizers[n][r].functions.length;i++){var o=e.symbolizers[n][r].functions[i];t[o[0]]=o[1]}return t}(e),this.required_cache=function(e){var t={};for(var n in e.symbolizers)for(var r in t[n]=[],e.symbolizers[n])e.symbolizers[n][r].required&&t[n].push(e.symbolizers[n][r].css);return t}(e)},setVersion:function(e){return!!r.CartoCSS.mapnik_reference.version.hasOwnProperty(e)&&(this.setData(r.CartoCSS.mapnik_reference.version[e]),!0)},selectorData:function(e,t){if(this.selector_cache&&this.selector_cache[e])return this.selector_cache[e][t]},validSelector:function(e){return!!this.selector_cache[e]},selectorName:function(e){return this.selectorData(e,2)},selector:function(e){return this.selectorData(e,0)},symbolizer:function(e){return this.selectorData(e,1)},requiredProperties:function(e,t){var n=this.required_cache[e];for(var r in n)if(!(n[r]in t))return"Property "+n[r]+" required for defining "+e+" styles."},isFont:function(e){return"font"===this.selector(e).validate},editDistance:function(e,t){if(0===e.length)return t.length;if(0===t.length)return e.length;for(var n=[],r=0;r<=t.length;r++)n[r]=[r];for(var i=0;i<=e.length;i++)n[0][i]=i;for(r=1;r<=t.length;r++)for(i=1;i<=e.length;i++)t.charAt(r-1)===e.charAt(i-1)?n[r][i]=n[r-1][i-1]:n[r][i]=Math.min(n[r-1][i-1]+1,Math.min(n[r][i-1]+1,n[r-1][i]+1));return n[t.length][e.length]},validValue:function(e,t,n){var r;if(this.selector(t)){if("keyword"===n.value[0].is)return function(e,t){return"object"===mx(this.selector(t).type)?-1!==this.selector(t).type.indexOf(e.value[0].value):"string"===this.selector(t).type}(n,t);if("undefined"===n.value[0].is)return!0;if("numbers"===this.selector(t).type){for(r in n.value)if("float"!==n.value[r].is)return!1;return!0}if("tags"===this.selector(t).type){if(!n.value)return!1;if(!n.value[0].value)return"tag"===n.value[0].is;for(r=0;r<n.value[0].value.length;r++)if("tag"!==n.value[0].value[r].is)return!1;return!0}if("functions"==this.selector(t).type)return function(e,t){if("string"===e.value[0].is)return!0;for(var n in e.value)for(var r in e.value[n].value){if("call"!==e.value[n].value[r].is)return!1;var i=find(this.selector(t).functions,function(t){return t[0]===e.value[n].value[r].name});if(!(i&&-1===i[1]||i&&i[1]===e.value[n].value[r].args.length))return!1}return!0}(n,t);if("expression"===this.selector(t).type)return!0;if("unsigned"===this.selector(t).type)return"float"===n.value[0].is&&(n.value[0].round(),!0);if(this.selector(t).validate){for(r=0;r<n.value.length;r++)if(this.selector(t).type===n.value[r].is&&this._validateValue[this.selector(t).validate](e,n.value[r].value))return!0;return!1}return this.selector(t).type===n.value[0].is}return!1}},r.CartoCSS.Tree.Reference.setVersion("latest"),r.CartoCSS.Tree.Rule=function(){function e(t,n,i,o){vx(this,e),this.is="rule";var a=t.split("/");this.name=a.pop(),this.instance=a.length?a[0]:"__default__",this.value=n instanceof r.CartoCSS.Tree.Value?n:new r.CartoCSS.Tree.Value([n]),this.index=i,this.symbolizer=r.CartoCSS.Tree.Reference.symbolizer(this.name),this.filename=o,this.variable="@"===t.charAt(0)}return bx(e,[{key:"clone",value:function(){var e=Object.create(r.CartoCSS.Tree.Rule.prototype);return e.name=this.name,e.value=this.value,e.index=this.index,e.instance=this.instance,e.symbolizer=this.symbolizer,e.filename=this.filename,e.variable=this.variable,e}},{key:"updateID",value:function(){return this.id=this.zoom+"#"+this.instance+"#"+this.name}},{key:"toString",value:function(){return"["+r.CartoCSS.Tree.Zoom.toString(this.zoom)+"] "+this.name+": "+this.value}},{key:"ev",value:function(e){return new r.CartoCSS.Tree.Rule(this.name,this.value.ev(e),this.index,this.filename)}}]),e}(),r.CartoCSS.Tree.Ruleset=function(){function e(t,n){vx(this,e),this.is="ruleset",this.selectors=t,this.rules=n,this._lookups={}}return bx(e,[{key:"ev",value:function(e){var t,n,i=new r.CartoCSS.Tree.Ruleset(this.selectors,this.rules.slice(0));for(i.root=this.root,e.frames.unshift(i),t=0;t<i.rules.length;t++)n=i.rules[t],i.rules[t]=n.ev?n.ev(e):n;return e.frames.shift(),i}},{key:"match",value:function(e){return!e||0===e.length}},{key:"variables",value:function(){return this._variables?this._variables:this._variables=this.rules.reduce(function(e,t){return t instanceof r.CartoCSS.Tree.Rule&&!0===t.variable&&(e[t.name]=t),e},{})}},{key:"variable",value:function(e){return this.variables()[e]}},{key:"rulesets",value:function(){return this._rulesets?this._rulesets:this._rulesets=this.rules.filter(function(e){return e instanceof r.CartoCSS.Tree.Ruleset})}},{key:"find",value:function(e,t){t=t||this;var n=[],i=e.toString();return i in this._lookups?this._lookups[i]:(this.rulesets().forEach(function(i){if(i!==t)for(var o=0;o<i.selectors.length;o++)if(e.match(i.selectors[o])){e.elements.length>1?Array.prototype.push.apply(n,i.find(new r.CartoCSS.Tree.Selector(null,null,e.elements.slice(1)),t)):n.push(i);break}}),this._lookups[i]=n)}},{key:"evZooms",value:function(e){for(var t=0;t<this.selectors.length;t++){for(var n=r.CartoCSS.Tree.Zoom.all,i=0;i<this.selectors[t].zoom.length;i++)n=this.selectors[t].zoom[i].ev(e).zoom;this.selectors[t].zoom=n}}},{key:"flatten",value:function(e,t,n){var i,o,a=[];for(0===this.selectors.length&&(n.frames=n.frames.concat(this.rules)),this.evZooms(n),i=0;i<this.selectors.length;i++){var s=this.selectors[i];if(s.filters)if(t.length)for(o=0;o<t.length;o++){var l=t[o],u=l.filters.cloneWith(s.filters);if(null===u){if(l.zoom===s.zoom&&l.attachment===s.attachment&&l.elements.join()===s.elements.join()){a.push(l);continue}u=l.filters}else if(!u)continue;var c=Object.create(r.CartoCSS.Tree.Selector.prototype);c.filters=u,c.zoom=s.zoom,c.elements=l.elements.concat(s.elements),l.attachment&&s.attachment?c.attachment=l.attachment+"/"+s.attachment:c.attachment=s.attachment||l.attachment,c.conditions=l.conditions+s.conditions,c.index=s.index,a.push(c)}else a.push(s)}var f=[];for(i=0;i<this.rules.length;i++){var h=this.rules[i];h instanceof r.CartoCSS.Tree.Ruleset?h.flatten(e,a,n):h instanceof r.CartoCSS.Tree.Rule?f.push(h):h instanceof r.CartoCSS.Tree.Invalid&&n.error(h)}var p=!!f.length&&f[0].index;for(i=0;i<a.length;i++)!1!==p&&(a[i].index=p),e.push(new r.CartoCSS.Tree.Definition(a[i],f.slice()));return e}}]),e}(),r.CartoCSS.Tree.Selector=function(){function e(t,n,i,o,a,s){vx(this,e),this.elements=i||[],this.attachment=o,this.filters=t||{},this.zoom=void 0!==n?n:r.CartoCSS.Tree.Zoom.all,this.conditions=a,this.index=s}return bx(e,[{key:"specificity",value:function(){return this.elements.reduce(function(e,t){var n=t.specificity();return e[0]+=n[0],e[1]+=n[1],e},[0,0,this.conditions,this.index])}}]),e}(),r.CartoCSS.Tree.URL=function(){function e(t,n){vx(this,e),this.is="uri",this.value=t,this.paths=n}return bx(e,[{key:"toString",value:function(){return this.value.toString()}},{key:"ev",value:function(e){return new r.CartoCSS.Tree.URL(this.value.ev(e),this.paths)}}]),e}(),r.CartoCSS.Tree.Value=function(){function e(t){vx(this,e),this.is="value",this.value=t}return bx(e,[{key:"ev",value:function(e){return 1===this.value.length?this.value[0].ev(e):new r.CartoCSS.Tree.Value(this.value.map(function(t){return t.ev(e)}))}},{key:"toJS",value:function(e){var t=this.ev(e),n=t.toString();return"color"===t.is||"uri"===t.is||"string"===t.is||"keyword"===t.is?n="'"+n+"'":"field"===t.is?n=n.replace(/\[(.*)\]/g,"attributes['$1']"):t.value&&"object"===mx(t.value)&&(n="["+n+"]"),"_value = "+n+";"}},{key:"toString",value:function(e,t,n,r){return this.value.map(function(t){return t.toString(e,r)}).join(n||", ")}},{key:"clone",value:function(){var e=Object.create(r.CartoCSS.Tree.Value.prototype);return Array.isArray(e)?e.value=this.value.slice():e.value=this.value,e.is=this.is,e}}]),e}(),r.CartoCSS.Tree.Variable=function(){function e(t,n,r){vx(this,e),this.is="variable",this.name=t,this.index=n,this.filename=r}return bx(e,[{key:"toString",value:function(){return this.name}},{key:"ev",value:function(e){if(this._css)return this._css;var t=e.frames.filter(function(e){return e.name===this.name}.bind(this));return t.length?t[0].value.ev(e):(e.error({message:"variable "+this.name+" is undefined",index:this.index,type:"runtime",filename:this.filename}),{is:"undefined",value:"undefined"})}}]),e}(),r.CartoCSS.Tree.Zoom=function(){function e(t,n,r){vx(this,e),this.op=t,this.value=n,this.index=r}return bx(e,[{key:"setZoom",value:function(e){return this.zoom=e,this}},{key:"ev",value:function(e){var t=parseInt(this.value.ev(e).toString(),10);switch((t>r.CartoCSS.Tree.Zoom.maxZoom||t<0)&&e.error({message:"Only zoom levels between 0 and "+r.CartoCSS.Tree.Zoom.maxZoom+" supported.",index:this.index}),this.op){case"=":return this.zoom="zoom && zoom === "+t,this;case">":this.zoom="zoom && zoom > "+t;break;case">=":this.zoom="zoom && zoom >= "+t;break;case"<":this.zoom="zoom && zoom < "+t;break;case"<=":this.zoom="zoom && zoom <= "+t;break;default:return this}return this}},{key:"toString",value:function(){for(var e="",t=0;t<=r.CartoCSS.Tree.Zoom.maxZoom;t++)e+=this.zoom&1<<t?"X":".";return e}}]),e}(),r.CartoCSS.Tree.Zoom.all=23,r.CartoCSS.Tree.Zoom.maxZoom=22,r.CartoCSS.Tree.Zoom.ranges={0:1e9,1:5e8,2:2e8,3:1e8,4:5e7,5:25e6,6:125e5,7:65e5,8:3e6,9:15e5,10:75e4,11:4e5,12:2e5,13:1e5,14:5e4,15:25e3,16:12500,17:5e3,18:2500,19:1500,20:750,21:500,22:250,23:100};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _x=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.fill=!0,this.fillColor="#000000",this.fillOpacity=1,this.stroke=!1,this.strokeColor="#000000",this.strokeOpacity=1,this.strokeWidth=1,this.strokeLinecap="butt",this.strokeLineJoin="miter",this.strokeDashstyle="solid",this.pointRadius=6,this.shadowBlur=0,this.shadowColor="#000000",this.shadowOffsetX=0,this.shadowOffsetY=0,this.label="",this.labelRect=!1,this.fontColor="",this.fontSize=12,this.fontStyle="normal",this.fontVariant="normal",this.fontWeight="normal",this.fontFamily="arial,sans-serif",this.labelPosition="top",this.labelAlign="center",this.labelBaseline="middle",this.labelXOffset=0,this.labelYOffset=0,be.extend(this,t)};function wx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.ThemeStyle=_x;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ox=function(){function e(){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.refOriginalPosition=[0,0],this.refDataID=null,this.isHoverByRefDataID=!1,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=!0,this.hoverable=!0,this.style=null,this.highlightStyle={},this.CLASS_NAME="SuperMap.Feature.ShapeParameters"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.refOriginalPosition=null,this.refDataID=null,this.isHoverByRefDataID=null,this.refDataHoverGroup=null,this.dataInfo=null,this.clickable=null,this.hoverable=null,this.style=null,this.highlightStyle=null}}])&&wx(t.prototype,n),r&&wx(t,r),e}();function xx(e){return(xx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Tx(e,t){return!t||"object"!==xx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Px(e,t,n){return(Px="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ex(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Ex(e){return(Ex=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kx(e,t){return(kx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters=Ox;var Mx=function(e){function t(e,n){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(r=Tx(this,Ex(t).call(this,e,n))).x=isNaN(e)?0:e,r.y=isNaN(n)?0:n,r.r=6,r.CLASS_NAME="SuperMap.Feature.ShapeParameters.Point",r}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kx(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,Px(Ex(t.prototype),"destroy",this).call(this)}}])&&Cx(n.prototype,r),i&&Cx(n,i),t}();function Ax(e){return(Ax="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jx(e,t){return!t||"object"!==Ax(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Nx(e,t,n){return(Nx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Rx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Rx(e){return(Rx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ix(e,t){return(Ix=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Point=Mx;var Dx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=jx(this,Rx(t).call(this,e))).pointList=e,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Line",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ix(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.pointList=null,Nx(Rx(t.prototype),"destroy",this).call(this)}}])&&Lx(n.prototype,r),i&&Lx(n,i),t}();function Fx(e){return(Fx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ux(e,t){return!t||"object"!==Fx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gx(e,t,n){return(Gx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=zx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function zx(e){return(zx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vx(e,t){return(Vx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Line=Dx;var Hx=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ux(this,zx(t).call(this,e))).pointList=e,n.holePolygonPointLists=null,n.CLASS_NAME="SuperMap.Feature.ShapeParameters.Polygon",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Vx(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.pointList=null,this.holePolygonPointLists=null,Gx(zx(t.prototype),"destroy",this).call(this)}}])&&Bx(n.prototype,r),i&&Bx(n,i),t}();function Jx(e){return(Jx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qx(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wx(e,t){return!t||"object"!==Jx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qx(e,t,n){return(Qx="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Yx(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function Yx(e){return(Yx=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Xx(e,t){return(Xx=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Polygon=Hx;var Kx=function(e){function t(e,n,r,i){var o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(o=Wx(this,Yx(t).call(this,e,n,r,i))).x=isNaN(e)?0:e,o.y=isNaN(e)?0:n,o.width=isNaN(r)?0:r,o.height=isNaN(i)?0:i,o.CLASS_NAME="SuperMap.Feature.ShapeParameters.Rectangle",o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xx(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.width=null,this.height=null,Qx(Yx(t.prototype),"destroy",this).call(this)}}])&&qx(n.prototype,r),i&&qx(n,i),t}();function Zx(e){return(Zx="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function eC(e,t){return!t||"object"!==Zx(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function tC(e,t,n){return(tC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=nC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function nC(e){return(nC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rC(e,t){return(rC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Rectangle=Kx;var iC=function(e){function t(e,n,r,i,o,a,s){var l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(l=eC(this,nC(t).call(this,e,n,r,i,o,a,s))).x=isNaN(e)?0:e,l.y=isNaN(n)?0:n,l.r=isNaN(r)?0:r,l.startAngle=isNaN(i)?0:i,l.endAngle=isNaN(o)?0:o,l.r0=isNaN(a)?0:a,l.clockWise=s,l.CLASS_NAME="SuperMap.Feature.ShapeParameters.Sector",l}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&rC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,this.startAngle=null,this.endAngle=null,this.r0=null,this.clockWise=null,tC(nC(t.prototype),"destroy",this).call(this)}}])&&$x(n.prototype,r),i&&$x(n,i),t}();function oC(e){return(oC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function aC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sC(e,t){return!t||"object"!==oC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lC(e,t,n){return(lC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=uC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function uC(e){return(uC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function cC(e,t){return(cC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Sector=iC;var fC=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=sC(this,uC(t).call(this,e,n,r))).x=e,i.y=n,i.text=r,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Label",i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.text=null,lC(uC(t.prototype),"destroy",this).call(this)}}])&&aC(n.prototype,r),i&&aC(n,i),t}();function hC(e){return(hC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yC(e,t){return!t||"object"!==hC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dC(e,t,n){return(dC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=mC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function mC(e){return(mC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vC(e,t){return(vC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Label=fC;var gC=function(e){function t(e,n,r,i,o,a,s,l,u){var c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(c=yC(this,mC(t).call(this,e,n,r,i,o,a,s,l,u))).x=e,c.y=n,c.image=r,c.width=i,c.height=o,c.sx=a,c.sy=s,c.sWidth=l,c.sHeight=u,c.CLASS_NAME="SuperMap.Feature.ShapeParameters.Image",c}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.image=null,this.width=null,this.height=null,this.sx=null,this.sy=null,this.sWidth=null,this.sHeight=null,dC(mC(t.prototype),"destroy",this).call(this)}}])&&pC(n.prototype,r),i&&pC(n,i),t}();function bC(e){return(bC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _C(e,t){return!t||"object"!==bC(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wC(e,t,n){return(wC="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=OC(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function OC(e){return(OC=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function xC(e,t){return(xC=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.ShapeParameters.Image=gC;var CC=function(e){function t(e,n,r){var i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(i=_C(this,OC(t).call(this,e,n,r))).x=isNaN(e)?0:e,i.y=isNaN(n)?0:n,i.r=isNaN(r)?0:r,i.CLASS_NAME="SuperMap.Feature.ShapeParameters.Circle",i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xC(e,t)}(t,Ox),n=t,(r=[{key:"destroy",value:function(){this.x=null,this.y=null,this.r=null,wC(OC(t.prototype),"destroy",this).call(this)}}])&&SC(n.prototype,r),i&&SC(n,i),t}();function TC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Feature=r.Feature||{},r.Feature.ShapeParameters.Circle=CC;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._handlers={},this.CLASS_NAME="SuperMap.LevelRenderer.Eventful"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this._handlers=null}},{key:"one",value:function(e,t,n){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!0,ctx:n||this}),this):this}},{key:"bind",value:function(e,t,n){var r=this._handlers;return t&&e?(r[e]||(r[e]=[]),r[e].push({h:t,one:!1,ctx:n||this}),this):this}},{key:"unbind",value:function(e,t){var n=this._handlers;if(!e)return this._handlers={},this;if(t){if(n[e]){for(var r=[],i=0,o=n[e].length;i<o;i++)n[e][i].h!=t&&r.push(n[e][i]);n[e]=r}n[e]&&0===n[e].length&&delete n[e]}else delete n[e];return this}},{key:"dispatch",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>3&&(t=Array.prototype.slice.call(t,1));for(var r=this._handlers[e],i=r.length,o=0;o<i;){switch(n){case 1:r[o].h.call(r[o].ctx);break;case 2:r[o].h.call(r[o].ctx,t[1]);break;case 3:r[o].h.call(r[o].ctx,t[1],t[2]);break;default:r[o].h.apply(r[o].ctx,t)}r[o].one?(r.splice(o,1),i--):o++}}return this}},{key:"dispatchWithContext",value:function(e){if(this._handlers[e]){var t=arguments,n=t.length;n>4&&(t=Array.prototype.slice.call(t,1,t.length-1));for(var r=t[t.length-1],i=this._handlers[e],o=i.length,a=0;a<o;){switch(n){case 1:i[a].h.call(r);break;case 2:i[a].h.call(r,t[1]);break;case 3:i[a].h.call(r,t[1],t[2]);break;default:i[a].h.apply(r,t)}i[a].one?(i.splice(a,1),o--):a++}}return this}}])&&TC(t.prototype,n),r&&TC(t,r),e}();function EC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Vector"}var t,n,r;return t=e,(n=[{key:"create",value:function(e,t){var n=new(0,this.ArrayCtor)(2);return n[0]=e||0,n[1]=t||0,n}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e}},{key:"set",value:function(e,t,n){return e[0]=t,e[1]=n,e}},{key:"add",value:function(e,t,n){return e[0]=t[0]+n[0],e[1]=t[1]+n[1],e}},{key:"scaleAndAdd",value:function(e,t,n,r){return e[0]=t[0]+n[0]*r,e[1]=t[1]+n[1]*r,e}},{key:"sub",value:function(e,t,n){return e[0]=t[0]-n[0],e[1]=t[1]-n[1],e}},{key:"len",value:function(e){return Math.sqrt(this.lenSquare(e))}},{key:"lenSquare",value:function(e){return e[0]*e[0]+e[1]*e[1]}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0],e[1]=t[1]*n[1],e}},{key:"div",value:function(e,t,n){return e[0]=t[0]/n[0],e[1]=t[1]/n[1],e}},{key:"dot",value:function(e,t){return e[0]*t[0]+e[1]*t[1]}},{key:"scale",value:function(e,t,n){return e[0]=t[0]*n,e[1]=t[1]*n,e}},{key:"normalize",value:function(e,t){var n=this.len(t);return 0===n?(e[0]=0,e[1]=0):(e[0]=t[0]/n,e[1]=t[1]/n),e}},{key:"distance",value:function(e,t){return Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1]))}},{key:"distanceSquare",value:function(e,t){return(e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])}},{key:"negate",value:function(e,t){return e[0]=-t[0],e[1]=-t[1],e}},{key:"lerp",value:function(e,t,n,r){return e[0]=t[0]+r*(n[0]-t[0]),e[1]=t[1]+r*(n[1]-t[1]),e}},{key:"applyTransform",value:function(e,t,n){var r=t[0],i=t[1];return e[0]=n[0]*r+n[2]*i+n[4],e[1]=n[1]*r+n[3]*i+n[5],e}},{key:"min",value:function(e,t,n){return e[0]=Math.min(t[0],n[0]),e[1]=Math.min(t[1],n[1]),e}},{key:"max",value:function(e,t,n){return e[0]=Math.max(t[0],n[0]),e[1]=Math.max(t[1],n[1]),e}},{key:"length",value:function(e){return this.len(e)}},{key:"lengthSquare",value:function(e){return this.lenSquare(e)}},{key:"dist",value:function(e,t){return this.distance(e,t)}},{key:"distSquare",value:function(e,t){return this.distanceSquare(e,t)}}])&&EC(t.prototype,n),r&&EC(t,r),e}();function MC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var AC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.vector=new kC,this.EPSILON=1e-4,this.THREE_SQRT=Math.sqrt(3),this.ONE_THIRD=1/3,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Curve"}var t,n,r;return t=e,(n=[{key:"isAroundZero",value:function(e){return e>-this.EPSILON&&e<this.EPSILON}},{key:"isNotAroundZero",value:function(e){return e>this.EPSILON||e<-this.EPSILON}},{key:"cubicAt",value:function(e,t,n,r,i){var o=1-i;return o*o*(o*e+3*i*t)+i*i*(i*r+3*o*n)}},{key:"cubicDerivativeAt",value:function(e,t,n,r,i){var o=1-i;return 3*(((t-e)*o+2*(n-t)*i)*o+(r-n)*i*i)}},{key:"cubicRootAt",value:function(e,t,n,r,i,o){var a=r+3*(t-n)-e,s=3*(n-2*t+e),l=3*(t-e),u=e-i,c=s*s-3*a*l,f=s*l-9*a*u,h=l*l-3*s*u,p=0;if(this.isAroundZero(c)&&this.isAroundZero(f))if(this.isAroundZero(s))o[0]=0;else{var y=-l/s;y>=0&&y<=1&&(o[p++]=y)}else{var d=f*f-4*c*h;if(this.isAroundZero(d)){var m=f/c,v=-s/a+m,g=-m/2;v>=0&&v<=1&&(o[p++]=v),g>=0&&g<=1&&(o[p++]=g)}else if(d>0){var b=Math.sqrt(d),S=c*s+1.5*a*(-f+b),_=c*s+1.5*a*(-f-b),w=(-s-((S=S<0?-Math.pow(-S,this.ONE_THIRD):Math.pow(S,this.ONE_THIRD))+(_=_<0?-Math.pow(-_,this.ONE_THIRD):Math.pow(_,this.ONE_THIRD))))/(3*a);w>=0&&w<=1&&(o[p++]=w)}else{var O=(2*c*s-3*a*f)/(2*Math.sqrt(c*c*c)),x=Math.acos(O)/3,C=Math.sqrt(c),T=Math.cos(x),P=(-s-2*C*T)/(3*a),E=(-s+C*(T+this.THREE_SQRT*Math.sin(x)))/(3*a),k=(-s+C*(T-this.THREE_SQRT*Math.sin(x)))/(3*a);P>=0&&P<=1&&(o[p++]=P),E>=0&&E<=1&&(o[p++]=E),k>=0&&k<=1&&(o[p++]=k)}}return p}},{key:"cubicExtrema",value:function(e,t,n,r,i){var o=6*n-12*t+6*e,a=9*t+3*r-3*e-9*n,s=3*t-3*e,l=0;if(this.isAroundZero(a)){if(this.isNotAroundZero(o)){var u=-s/o;u>=0&&u<=1&&(i[l++]=u)}}else{var c=o*o-4*a*s;if(this.isAroundZero(c))i[0]=-o/(2*a);else if(c>0){var f=Math.sqrt(c),h=(-o+f)/(2*a),p=(-o-f)/(2*a);h>=0&&h<=1&&(i[l++]=h),p>=0&&p<=1&&(i[l++]=p)}}return l}},{key:"cubicSubdivide",value:function(e,t,n,r,i,o){var a=(t-e)*i+e,s=(n-t)*i+t,l=(r-n)*i+n,u=(s-a)*i+a,c=(l-s)*i+s,f=(c-u)*i+u;o[0]=e,o[1]=a,o[2]=u,o[3]=f,o[4]=f,o[5]=c,o[6]=l,o[7]=r}},{key:"cubicProjectPoint",value:function(e,t,n,r,i,o,a,s,l,u,c){var f,h=this.vector.create(),p=this.vector.create(),y=this.vector.create(),d=.005,m=1/0;h[0]=l,h[1]=u;for(var v=0;v<1;v+=.05){p[0]=this.cubicAt(e,n,i,a,v),p[1]=this.cubicAt(t,r,o,s,v);var g=this.vector.distSquare(h,p);g<m&&(f=v,m=g)}m=1/0;for(var b=0;b<32&&!(d<this.EPSILON);b++){var S=f-d,_=f+d;p[0]=this.cubicAt(e,n,i,a,S),p[1]=this.cubicAt(t,r,o,s,S);var w=this.vector.distSquare(p,h);if(S>=0&&w<m)f=S,m=w;else{y[0]=this.cubicAt(e,n,i,a,_),y[1]=this.cubicAt(t,r,o,s,_);var O=this.vector.distSquare(y,h);_<=1&&O<m?(f=_,m=O):d*=.5}}return c&&(c[0]=this.cubicAt(e,n,i,a,f),c[1]=this.cubicAt(t,r,o,s,f)),Math.sqrt(m)}},{key:"quadraticAt",value:function(e,t,n,r){var i=1-r;return i*(i*e+2*r*t)+r*r*n}},{key:"quadraticDerivativeAt",value:function(e,t,n,r){return 2*((1-r)*(t-e)+r*(n-t))}},{key:"quadraticRootAt",value:function(e,t,n,r,i){var o=e-2*t+n,a=2*(t-e),s=e-r,l=0;if(this.isAroundZero(o)){if(this.isNotAroundZero(a)){var u=-s/a;u>=0&&u<=1&&(i[l++]=u)}}else{var c=a*a-4*o*s;if(this.isAroundZero(c)){var f=-a/(2*o);f>=0&&f<=1&&(i[l++]=f)}else if(c>0){var h=Math.sqrt(c),p=(-a+h)/(2*o),y=(-a-h)/(2*o);p>=0&&p<=1&&(i[l++]=p),y>=0&&y<=1&&(i[l++]=y)}}return l}},{key:"quadraticExtremum",value:function(e,t,n){var r=e+n-2*t;return 0===r?.5:(e-t)/r}},{key:"quadraticProjectPoint",value:function(e,t,n,r,i,o,a,s,l){var u,c=this.vector.create(),f=this.vector.create(),h=this.vector.create(),p=.005,y=1/0;c[0]=a,c[1]=s;for(var d=0;d<1;d+=.05){f[0]=this.quadraticAt(e,n,i,d),f[1]=this.quadraticAt(t,r,o,d);var m=this.vector.distSquare(c,f);m<y&&(u=d,y=m)}y=1/0;for(var v=0;v<32&&!(p<this.EPSILON);v++){var g=u-p,b=u+p;f[0]=this.quadraticAt(e,n,i,g),f[1]=this.quadraticAt(t,r,o,g);var S=this.vector.distSquare(f,c);if(g>=0&&S<y)u=g,y=S;else{h[0]=this.quadraticAt(e,n,i,b),h[1]=this.quadraticAt(t,r,o,b);var _=this.vector.distSquare(h,c);b<=1&&_<y?(u=b,y=_):p*=.5}}return l&&(l[0]=this.quadraticAt(e,n,i,u),l[1]=this.quadraticAt(t,r,o,u)),Math.sqrt(y)}}])&&MC(t.prototype,n),r&&MC(t,r),e}();function LC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.util=new ax,this.curve=new AC,this._ctx=null,this._textWidthCache={},this._textHeightCache={},this._textWidthCacheCounter=0,this._textHeightCacheCounter=0,this.TEXT_CACHE_MAX=5e3,this.PI2=2*Math.PI,this.roots=[-1,-1,-1],this.extrema=[-1,-1],this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Area"}var t,n,r;return t=e,(n=[{key:"normalizeRadian",value:function(e){return(e%=this.PI2)<0&&(e+=this.PI2),e}},{key:"isInside",value:function(e,t,n,r){if(!t||!e)return!1;var i=e.type;this._ctx=this._ctx||this.util.getContext();var o=this._mathMethod(e,t,n,r);if(void 0!==o)return o;if(e.buildPath&&this._ctx.isPointInPath)return this._buildPathMethod(e,this._ctx,t,n,r);switch(i){case"ellipse":case"smicellipse":return!0;case"trochoid":var a="out"==t.location?t.r1+t.r2+t.d:t.r1-t.r2+t.d;return this.isInsideCircle(t,n,r,a);case"rose":return this.isInsideCircle(t,n,r,t.maxr);default:return!1}}},{key:"_mathMethod",value:function(e,t,n,r){switch(e.type){case"bezier-curve":return void 0===t.cpX2?this.isInsideQuadraticStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.xEnd,t.yEnd,t.lineWidth,n,r):this.isInsideCubicStroke(t.xStart,t.yStart,t.cpX1,t.cpY1,t.cpX2,t.cpY2,t.xEnd,t.yEnd,t.lineWidth,n,r);case"line":return this.isInsideLine(t.xStart,t.yStart,t.xEnd,t.yEnd,t.lineWidth,n,r);case"broken-line":return this.isInsideBrokenLine(t.pointList,t.lineWidth,n,r);case"smicbroken-line":var i=n,o=r;return e.refOriginalPosition&&(i=n-e.refOriginalPosition[0],o=r-e.refOriginalPosition[1]),this.isInsideBrokenLine(t.pointList,t.lineWidth,i,o);case"ring":return this.isInsideRing(t.x,t.y,t.r0,t.r,n,r);case"smicring":var a=t.x,s=t.y;return e.refOriginalPosition&&(a=t.x+e.refOriginalPosition[0],s=t.y+e.refOriginalPosition[1]),this.isInsideRing(a,s,t.r0,t.r,n,r);case"circle":return this.isInsideCircle(t.x,t.y,t.r,n,r);case"smicpoint":var l=n,u=r;return e.refOriginalPosition&&(l=n-e.refOriginalPosition[0],u=r-e.refOriginalPosition[1]),this.isInsideCircle(t.x,t.y,t.r,l,u);case"sector":var c=t.startAngle*Math.PI/180,f=t.endAngle*Math.PI/180;return t.clockWise||(c=-c,f=-f),this.isInsideSector(t.x,t.y,t.r0,t.r,c,f,!t.clockWise,n,r);case"smicsector":var h=t.startAngle*Math.PI/180,p=t.endAngle*Math.PI/180;t.clockWise||(h=-h,p=-p);var y=t.x,d=t.y;return e.refOriginalPosition&&(y=t.x+e.refOriginalPosition[0],d=t.y+e.refOriginalPosition[1]),this.isInsideSector(y,d,t.r0,t.r,h,p,!t.clockWise,n,r);case"path":return this.isInsidePath(t.pathArray,Math.max(t.lineWidth,5),t.brushType,n,r);case"polygon":case"star":case"smicstar":case"isogon":case"smicisogon":return this.isInsidePolygon(t.pointList,n,r);case"smicpolygon":var m=n,v=r;if(e.refOriginalPosition&&(m=n-e.refOriginalPosition[0],v=r-e.refOriginalPosition[1]),e.holePolygonPointLists&&e.holePolygonPointLists.length>0){for(var g=this.isInsidePolygon(t.pointList,m,v),b=e.holePolygonPointLists,S=!1,_=0,w=b.length;_<w;_++){var O=b[_];!0===this.isInsidePolygon(O,m,v)&&(S=!0)}return!0===g&&!1===S}return this.isInsidePolygon(t.pointList,m,v);case"text":var x=t.__rect||e.getRect(t);return this.isInsideRect(x.x,x.y,x.width,x.height,n,r);case"smictext":var C=e.getTextBackground(t);return this.isInsidePolygon(C,n,r);case"rectangle":case"image":return this.isInsideRect(t.x,t.y,t.width,t.height,n,r);case"smicimage":var T=t.x,P=t.y;return e.refOriginalPosition&&(T=t.x+e.refOriginalPosition[0],P=t.y+e.refOriginalPosition[1]),this.isInsideRect(T,P,t.width,t.height,n,r)}}},{key:"_buildPathMethod",value:function(e,t,n,r,i){return t.beginPath(),e.buildPath(t,n),t.closePath(),t.isPointInPath(r,i)}},{key:"isOutside",value:function(e,t,n,r){return!this.isInside(e,t,n,r)}},{key:"isInsideLine",value:function(e,t,n,r,i,o,a){if(0===i)return!1;var s=Math.max(i,5),l=0;if(a>t+s&&a>r+s||a<t-s&&a<r-s||o>e+s&&o>n+s||o<e-s&&o<n-s)return!1;if(e===n)return Math.abs(o-e)<=s/2;var u=(l=(t-r)/(e-n))*o-a+(e*r-n*t)/(e-n);return u*u/(l*l+1)<=s/2*s/2}},{key:"isInsideCubicStroke",value:function(e,t,n,r,i,o,a,s,l,u,c){if(0===l)return!1;var f=Math.max(l,5);return!(c>t+f&&c>r+f&&c>o+f&&c>s+f||c<t-f&&c<r-f&&c<o-f&&c<s-f||u>e+f&&u>n+f&&u>i+f&&u>a+f||u<e-f&&u<n-f&&u<i-f&&u<a-f)&&this.curve.cubicProjectPoint(e,t,n,r,i,o,a,s,u,c,null)<=f/2}},{key:"isInsideQuadraticStroke",value:function(e,t,n,r,i,o,a,s,l){if(0===a)return!1;var u=Math.max(a,5);return!(l>t+u&&l>r+u&&l>o+u||l<t-u&&l<r-u&&l<o-u||s>e+u&&s>n+u&&s>i+u||s<e-u&&s<n-u&&s<i-u)&&this.curve.quadraticProjectPoint(e,t,n,r,i,o,s,l,null)<=u/2}},{key:"isInsideArcStroke",value:function(e,t,n,r,i,o,a,s,l){var u=this.PI2;if(0===a)return!1;var c=Math.max(a,5);s-=e,l-=t;var f=Math.sqrt(s*s+l*l);if(f-c>n||f+c<n)return!1;if(Math.abs(r-i)>=u)return!0;if(o){var h=r;r=this.normalizeRadian(i),i=this.normalizeRadian(h)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=u);var p=Math.atan2(l,s);return p<0&&(p+=u),p>=r&&p<=i||p+u>=r&&p+u<=i}},{key:"isInsideBrokenLine",value:function(e,t,n,r){for(var i=Math.max(t,10),o=0,a=e.length-1;o<a;o++){var s=e[o][0],l=e[o][1],u=e[o+1][0],c=e[o+1][1];if(this.isInsideLine(s,l,u,c,i,n,r))return!0}return!1}},{key:"isInsideRing",value:function(e,t,n,r,i,o){var a=(i-e)*(i-e)+(o-t)*(o-t);return a<r*r&&a>n*n}},{key:"isInsideRect",value:function(e,t,n,r,i,o){return i>=e&&i<=e+n&&o>=t&&o<=t+r}},{key:"isInsideCircle",value:function(e,t,n,r,i){return(r-e)*(r-e)+(i-t)*(i-t)<n*n}},{key:"isInsideSector",value:function(e,t,n,r,i,o,a,s,l){return this.isInsideArcStroke(e,t,(n+r)/2,i,o,a,r-n,s,l)}},{key:"isInsidePolygon",value:function(e,t,n){for(var r=e.length,i=0,o=0,a=r-1;o<r;o++){var s=e[a][0],l=e[a][1],u=e[o][0],c=e[o][1];i+=this.windingLine(s,l,u,c,t,n),a=o}return 0!==i}},{key:"windingLine",value:function(e,t,n,r,i,o){return o>t&&o>r||o<t&&o<r?0:r==t?0:(o-t)/(r-t)*(n-e)+e>i?r<t?1:-1:0}},{key:"swapExtrema",value:function(){var e=this.extrema[0];this.extrema[0]=this.extrema[1],this.extrema[1]=e}},{key:"windingCubic",value:function(e,t,n,r,i,o,a,s,l,u){var c=this.curve,f=this.roots,h=this.extrema;if(u>t&&u>r&&u>o&&u>s||u<t&&u<r&&u<o&&u<s)return 0;var p=c.cubicRootAt(t,r,o,s,u,f);if(0===p)return 0;for(var y,d,m=0,v=-1,g=0;g<p;g++){var b=f[g];c.cubicAt(e,n,i,a,b)<l||(v<0&&(v=c.cubicExtrema(t,r,o,s,h),h[1]<h[0]&&v>1&&this.swapExtrema(),y=c.cubicAt(t,r,o,s,h[0]),v>1&&(d=c.cubicAt(t,r,o,s,h[1]))),2==v?b<h[0]?m+=y<t?1:-1:b<h[1]?m+=d<y?1:-1:m+=s<d?1:-1:b<h[0]?m+=y<t?1:-1:m+=s<y?1:-1)}return m}},{key:"windingQuadratic",value:function(e,t,n,r,i,o,a,s){var l=this.curve,u=this.roots;if(s>t&&s>r&&s>o||s<t&&s<r&&s<o)return 0;var c=l.quadraticRootAt(t,r,o,s,u);if(0===c)return 0;var f=l.quadraticExtremum(t,r,o);if(f>=0&&f<=1){for(var h=0,p=l.quadraticAt(t,r,o,f),y=0;y<c;y++){l.quadraticAt(e,n,i,u[y])>a||(u[y]<f?h+=p<t?1:-1:h+=o<p?1:-1)}return h}return l.quadraticAt(e,n,i,u[0])>a?0:o<t?1:-1}},{key:"windingArc",value:function(e,t,n,r,i,o,a,s){var l=this.roots,u=this.PI2;if((s-=t)>n||s<-n)return 0;var c=Math.sqrt(n*n-s*s);if(l[0]=-c,l[1]=c,Math.abs(r-i)>=u){r=0,i=u;var f=o?1:-1;return a>=l[0]+e&&a<=l[1]+e?f:0}if(o){var h=r;r=this.normalizeRadian(i),i=this.normalizeRadian(h)}else r=this.normalizeRadian(r),i=this.normalizeRadian(i);r>i&&(i+=u);for(var p=0,y=0;y<2;y++){var d=l[y];if(d+e>a){var m=Math.atan2(s,d),v=o?1:-1;m<0&&(m=u+m),(m>=r&&m<=i||m+u>=r&&m+u<=i)&&(m>Math.PI/2&&m<1.5*Math.PI&&(v=-v),p+=v)}}return p}},{key:"isInsidePath",value:function(e,t,n,r,i){for(var o=0,a=0,s=0,l=0,u=0,c=!0,f=!0,h="stroke"===(n=n||"fill")||"both"===n,p="fill"===n||"both"===n,y=0;y<e.length;y++){var d=e[y],m=d.points;if(c||"M"===d.command){if(y>0&&(p&&(o+=this.windingLine(a,s,l,u,r,i)),0!==o))return!0;l=m[m.length-2],u=m[m.length-1],c=!1,f&&"A"!==d.command&&(f=!1,a=l,s=u)}switch(d.command){case"M":a=m[0],s=m[1];break;case"L":if(h&&this.isInsideLine(a,s,m[0],m[1],t,r,i))return!0;p&&(o+=this.windingLine(a,s,m[0],m[1],r,i)),a=m[0],s=m[1];break;case"C":if(h&&this.isInsideCubicStroke(a,s,m[0],m[1],m[2],m[3],m[4],m[5],t,r,i))return!0;p&&(o+=this.windingCubic(a,s,m[0],m[1],m[2],m[3],m[4],m[5],r,i)),a=m[4],s=m[5];break;case"Q":if(h&&this.isInsideQuadraticStroke(a,s,m[0],m[1],m[2],m[3],t,r,i))return!0;p&&(o+=this.windingQuadratic(a,s,m[0],m[1],m[2],m[3],r,i)),a=m[2],s=m[3];break;case"A":var v=m[0],g=m[1],b=m[2],S=m[3],_=m[4],w=m[5],O=Math.cos(_)*b+v,x=Math.sin(_)*S+g;f?(f=!1,l=O,u=x):o+=this.windingLine(a,s,O,x);var C=(r-v)*S/b+v;if(h&&this.isInsideArcStroke(v,g,S,_,_+w,1-m[7],t,C,i))return!0;p&&(o+=this.windingArc(v,g,S,_,_+w,1-m[7],C,i)),a=Math.cos(_+w)*b+v,s=Math.sin(_+w)*S+g;break;case"z":if(h&&this.isInsideLine(a,s,l,u,t,r,i))return!0;c=!0}}return p&&(o+=this.windingLine(a,s,l,u,r,i)),0!==o}},{key:"getTextWidth",value:function(e,t){var n=e+":"+t;if(this._textWidthCache[n])return this._textWidthCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t);for(var r=0,i=0,o=(e=(e+"").split("\n")).length;i<o;i++)r=Math.max(this._ctx.measureText(e[i]).width,r);return this._ctx.restore(),this._textWidthCache[n]=r,++this._textWidthCacheCounter>this.TEXT_CACHE_MAX&&(this._textWidthCacheCounter=0,this._textWidthCache={}),r}},{key:"getTextHeight",value:function(e,t){var n=e+":"+t;if(this._textHeightCache[n])return this._textHeightCache[n];this._ctx=this._ctx||this.util.getContext(),this._ctx.save(),t&&(this._ctx.font=t),e=(e+"").split("\n");var r=(this._ctx.measureText("ZH").width+2)*e.length;return this._ctx.restore(),this._textHeightCache[n]=r,++this._textHeightCacheCounter>this.TEXT_CACHE_MAX&&(this._textHeightCacheCounter=0,this._textHeightCache={}),r}}])&&LC(t.prototype,n),r&&LC(t,r),e}();function NC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),3===arguments.length&&this.computeBoundingBox(arguments),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.ComputeBoundingBox"}var t,n,r;return t=e,(n=[{key:"computeBoundingBox",value:function(e,t,n){if(0!==e.length){for(var r=e[0][0],i=e[0][0],o=e[0][1],a=e[0][1],s=1;s<e.length;s++){var l=e[s];l[0]<r&&(r=l[0]),l[0]>i&&(i=l[0]),l[1]<o&&(o=l[1]),l[1]>a&&(a=l[1])}t[0]=r,t[1]=o,n[0]=i,n[1]=a}}},{key:"cubeBezier",value:function(e,t,n,r,i,o){var a=new AC,s=[];a.cubicExtrema(e[0],t[0],n[0],r[0],s);for(var l=0;l<s.length;l++)s[l]=a.cubicAt(e[0],t[0],n[0],r[0],s[l]);var u=[];a.cubicExtrema(e[1],t[1],n[1],r[1],u);for(var c=0;c<u.length;c++)u[c]=a.cubicAt(e[1],t[1],n[1],r[1],u[c]);s.push(e[0],r[0]),u.push(e[1],r[1]);var f=Math.min.apply(null,s),h=Math.max.apply(null,s),p=Math.min.apply(null,u),y=Math.max.apply(null,u);i[0]=f,i[1]=p,o[0]=h,o[1]=y}},{key:"quadraticBezier",value:function(e,t,n,r,i){var o=new AC,a=o.quadraticExtremum(e[0],t[0],n[0]),s=o.quadraticExtremum(e[1],t[1],n[1]),l=1-(a=Math.max(Math.min(a,1),0)),u=1-(s=Math.max(Math.min(s,1),0)),c=l*l*e[0]+2*l*a*t[0]+a*a*n[0],f=l*l*e[1]+2*l*a*t[1]+a*a*n[1],h=u*u*e[0]+2*u*s*t[0]+s*s*n[0],p=u*u*e[1]+2*u*s*t[1]+s*s*n[1];r[0]=Math.min(e[0],n[0],c,h),r[1]=Math.min(e[1],n[1],f,p),i[0]=Math.max(e[0],n[0],c,h),i[1]=Math.max(e[1],n[1],f,p)}},{key:"arc",value:function(e,t,n,r,i,o,a,s){var l=new kC,u=l.create(),c=l.create(),f=l.create();if(u[0]=Math.cos(r)*n+e,u[1]=Math.sin(r)*n+t,c[0]=Math.cos(i)*n+e,c[1]=Math.sin(i)*n+t,l.min(a,u,c),l.max(s,u,c),(r%=2*Math.PI)<0&&(r+=2*Math.PI),(i%=2*Math.PI)<0&&(i+=2*Math.PI),r>i&&!o?i+=2*Math.PI:r<i&&o&&(r+=2*Math.PI),o){var h=i;i=r,r=h}for(var p=0;p<i;p+=Math.PI/2)p>r&&(f[0]=Math.cos(p)*n+e,f[1]=Math.sin(p)*n+t,l.min(a,f,a),l.max(s,f,s))}}])&&NC(t.prototype,n),r&&NC(t,r),e}();function IC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Env";var t,n,r,i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b,S,_,w=this;return t=navigator.userAgent,n=w.os={},r=w.browser={},i=t.match(/Web[kK]it[\/]{0,1}([\d.]+)/),o=t.match(/(Android);?[\s\/]+([\d.]+)?/),a=t.match(/(iPad).*OS\s([\d_]+)/),s=t.match(/(iPod)(.*OS\s([\d_]+))?/),l=!a&&t.match(/(iPhone\sOS)\s([\d_]+)/),u=t.match(/(webOS|hpwOS)[\s\/]([\d.]+)/),c=u&&t.match(/TouchPad/),f=t.match(/Kindle\/([\d.]+)/),h=t.match(/Silk\/([\d._]+)/),p=t.match(/(BlackBerry).*Version\/([\d.]+)/),y=t.match(/(BB10).*Version\/([\d.]+)/),d=t.match(/(RIM\sTablet\sOS)\s([\d.]+)/),m=t.match(/PlayBook/),v=t.match(/Chrome\/([\d.]+)/)||t.match(/CriOS\/([\d.]+)/),g=t.match(/Firefox\/([\d.]+)/),b=t.match(/MSIE ([\d.]+)/),S=i&&t.match(/Mobile\//)&&!v,_=t.match(/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/)&&!v,(r.webkit=!!i)&&(r.version=i[1]),o&&(n.android=!0,n.version=o[2]),l&&!s&&(n.ios=n.iphone=!0,n.version=l[2].replace(/_/g,".")),a&&(n.ios=n.ipad=!0,n.version=a[2].replace(/_/g,".")),s&&(n.ios=n.ipod=!0,n.version=s[3]?s[3].replace(/_/g,"."):null),u&&(n.webos=!0,n.version=u[2]),c&&(n.touchpad=!0),p&&(n.blackberry=!0,n.version=p[2]),y&&(n.bb10=!0,n.version=y[2]),d&&(n.rimtabletos=!0,n.version=d[2]),m&&(r.playbook=!0),f&&(n.kindle=!0,n.version=f[1]),h&&(r.silk=!0,r.version=h[1]),!h&&n.android&&t.match(/Kindle Fire/)&&(r.silk=!0),v&&(r.chrome=!0,r.version=v[1]),g&&(r.firefox=!0,r.version=g[1]),b&&(r.ie=!0,r.version=b[1]),S&&(t.match(/Safari/)||n.ios)&&(r.safari=!0),_&&(r.webview=!0),b&&(r.ie=!0,r.version=b[1]),n.tablet=!!(a||m||o&&!t.match(/Mobile/)||g&&t.match(/Tablet/)||b&&!t.match(/Phone/)&&t.match(/Touch/)),n.phone=!(n.tablet||n.ipod||!(o||l||u||p||y||v&&t.match(/Android/)||v&&t.match(/CriOS\/([\d.]+)/)||g&&t.match(/Mobile/)||b&&t.match(/Touch/))),{browser:r,os:n,canvasSupported:!!document.createElement("canvas").getContext}}var t,n,r;return t=e,(n=[{key:"destory",value:function(){return!0}}])&&IC(t.prototype,n),r&&IC(t,r),e}();function FC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stop="function"==typeof window.addEventListener?function(e){e.preventDefault(),e.stopPropagation(),e.cancelBubble=!0}:function(e){e.returnValue=!1,e.cancelBubble=!0},this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Event"}var t,n,r;return t=e,(n=[{key:"getX",value:function(e){return void 0!==e.zrenderX&&e.zrenderX||void 0!==e.offsetX&&e.offsetX||void 0!==e.layerX&&e.layerX||void 0!==e.clientX&&e.clientX}},{key:"getY",value:function(e){return void 0!==e.zrenderY&&e.zrenderY||void 0!==e.offsetY&&e.offsetY||void 0!==e.layerY&&e.layerY||void 0!==e.clientY&&e.clientY}},{key:"getDelta",value:function(e){return void 0!==e.zrenderDelta&&e.zrenderDelta||void 0!==e.wheelDelta&&e.wheelDelta||void 0!==e.detail&&-e.detail}}])&&FC(t.prototype,n),r&&FC(t,r),e}();function UC(e){return(UC="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function GC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Http"}var t,n,r;return t=e,(n=[{key:"get",value:function(e,t,n){if("object"===UC(e)){var r=e;e=r.url,t=r.onsuccess,n=r.onerror}var i=window.XMLHttpRequest?new XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");i.open("GET",e,!0),i.onreadystatechange=function(){4==i.readyState&&(i.status>=200&&i.status<300||304===i.status?t&&t(i.responseText):n&&n(),i.onreadystatechange=new Function,i=null)},i.send(null)}}])&&GC(t.prototype,n),r&&GC(t,r),e}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VC=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)};function HC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}VC.EVENT={RESIZE:"resize",CLICK:"click",DBLCLICK:"dblclick",MOUSEWHEEL:"mousewheel",MOUSEMOVE:"mousemove",MOUSEOVER:"mouseover",MOUSEOUT:"mouseout",MOUSEDOWN:"mousedown",MOUSEUP:"mouseup",GLOBALOUT:"globalout",DRAGSTART:"dragstart",DRAGEND:"dragend",DRAGENTER:"dragenter",DRAGOVER:"dragover",DRAGLEAVE:"dragleave",DROP:"drop",touchClickDelay:300},VC.catchBrushException=!1,VC.debugMode=0;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JC=function(){function e(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Log",function(){if(0!==VC.debugMode)if(1==VC.debugMode)for(var e in arguments)throw new Error(arguments[e]);else if(VC.debugMode>1)for(var t in arguments)console.log(arguments[t])}}var t,n,r;return t=e,(n=[{key:"destory",value:function(){return!0}}])&&HC(t.prototype,n),r&&HC(t,r),e}();function qC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._radians=window.Math.PI/180,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Math"}var t,n,r;return t=e,(n=[{key:"sin",value:function(e,t){return window.Math.sin(t?e*this._radians:e)}},{key:"cos",value:function(e,t){return window.Math.cos(t?e*this._radians:e)}},{key:"degreeToRadian",value:function(e){return e*this._radians}},{key:"radianToDegree",value:function(e){return e/this._radians}}])&&qC(t.prototype,n),r&&qC(t,r),e}();function QC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var YC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ArrayCtor="undefined"==typeof Float32Array?Array:Float32Array,this.CLASS_NAME="SuperMap.LevelRenderer.Tool.Matrix"}var t,n,r;return t=e,(n=[{key:"create",value:function(){var e=new(0,this.ArrayCtor)(6);return this.identity(e),e}},{key:"identity",value:function(e){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=0,e[5]=0,e}},{key:"copy",value:function(e,t){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e}},{key:"mul",value:function(e,t,n){return e[0]=t[0]*n[0]+t[2]*n[1],e[1]=t[1]*n[0]+t[3]*n[1],e[2]=t[0]*n[2]+t[2]*n[3],e[3]=t[1]*n[2]+t[3]*n[3],e[4]=t[0]*n[4]+t[2]*n[5]+t[4],e[5]=t[1]*n[4]+t[3]*n[5]+t[5],e}},{key:"translate",value:function(e,t,n){return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4]+n[0],e[5]=t[5]+n[1],e}},{key:"rotate",value:function(e,t,n){var r=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5],u=Math.sin(n),c=Math.cos(n);return e[0]=r*c+a*u,e[1]=-r*u+a*c,e[2]=i*c+s*u,e[3]=-i*u+c*s,e[4]=c*o+u*l,e[5]=c*l-u*o,e}},{key:"scale",value:function(e,t,n){var r=n[0],i=n[1];return e[0]=t[0]*r,e[1]=t[1]*i,e[2]=t[2]*r,e[3]=t[3]*i,e[4]=t[4]*r,e[5]=t[5]*i,e}},{key:"invert",value:function(e,t){var n=t[0],r=t[2],i=t[4],o=t[1],a=t[3],s=t[5],l=n*a-o*r;return l?(l=1/l,e[0]=a*l,e[1]=-o*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*s-a*i)*l,e[5]=(o*i-n*s)*l,e):null}},{key:"mulVector",value:function(e,t,n){var r=t[0],i=t[2],o=t[4],a=t[1],s=t[3],l=t[5];return e[0]=n[0]*r+n[1]*i+o,e[1]=n[0]*a+n[1]*s+l,e}}])&&QC(t.prototype,n),r&&QC(t,r),e}();function XC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var KC=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"SUtil_smoothBezier",value:function(t,n,r,i,o){o&&2===o||(o=[0,0]);var a,s,l=o,u=[],c=[],f=[],h=[],p=!!i;if(p){a=[1/0,1/0],s=[-1/0,-1/0];for(var y=t.length,d=0;d<y;d++)e.Util_vector.min(a,a,[t[d][0]+l[0],t[d][1]+l[1]]),e.Util_vector.max(s,s,[t[d][0]+l[0],t[d][1]+l[1]]);e.Util_vector.min(a,a,i[0]),e.Util_vector.max(s,s,i[1])}for(var m=t.length,v=0;v<m;v++){var g=[t[v][0]+l[0],t[v][1]+l[1]],b=void 0,S=void 0;if(r)b=[t[v?v-1:m-1][0]+l[0],t[v?v-1:m-1][1]+l[1]],S=[t[(v+1)%m][0]+l[0],t[(v+1)%m][1]+l[1]];else{if(0===v||v===m-1){u.push([t[v][0]+l[0],t[v][1]+l[1]]);continue}b=[t[v-1][0]+l[0],t[v-1][1]+l[1]],S=[t[v+1][0]+l[0],t[v+1][1]+l[1]]}e.Util_vector.sub(c,S,b),e.Util_vector.scale(c,c,n);var _=e.Util_vector.distance(g,b),w=e.Util_vector.distance(g,S),O=_+w;0!==O&&(_/=O,w/=O),e.Util_vector.scale(f,c,-_),e.Util_vector.scale(h,c,w);var x=e.Util_vector.add([],g,f),C=e.Util_vector.add([],g,h);p&&(e.Util_vector.max(x,x,a),e.Util_vector.min(x,x,s),e.Util_vector.max(C,C,a),e.Util_vector.min(C,C,s)),u.push(x),u.push(C)}return r&&u.push(u.shift()),u}},{key:"SUtil_smoothSpline",value:function(t,n,r,i){i&&2===i||(i=[0,0]);for(var o=i,a=t.length,s=[],l=0,u=1;u<a;u++)l+=e.Util_vector.distance([t[u-1][0]+o[0],t[u-1][1]+o[1]],[t[u][0]+o[0],t[u][1]+o[1]]);var c=l/5;c=c<a?a:c;for(var f=0;f<c;f++){var h=f/(c-1)*(n?a:a-1),p=Math.floor(h),y=h-p,d=void 0,m=[t[p%a][0]+o[0],t[p%a][1]+o[1]],v=void 0,g=void 0;n?(d=[t[(p-1+a)%a][0]+o[0],t[(p-1+a)%a][1]+o[1]],v=[t[(p+1)%a][0]+o[0],t[(p+1)%a][1]+o[1]],g=[t[(p+2)%a][0]+o[0],t[(p+2)%a][1]+o[1]]):(d=[t[0===p?p:p-1][0]+o[0],t[0===p?p:p-1][1]+o[1]],v=[t[p>a-2?a-1:p+1][0]+o[0],t[p>a-2?a-1:p+1][1]+o[1]],g=[t[p>a-3?a-1:p+2][0]+o[0],t[p>a-3?a-1:p+2][1]+o[1]]);var b=y*y,S=y*b;s.push([_(d[0],m[0],v[0],g[0],y,b,S),_(d[1],m[1],v[1],g[1],y,b,S)])}return s;function _(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t}}},{key:"SUtil_dashedLineTo",value:function(e,t,n,r,i,o,a){var s=[5,5];if(o="number"!=typeof o?5:o,e.setLineDash)return s[0]=o,s[1]=o,a&&a instanceof Array?e.setLineDash(a):e.setLineDash(s),e.moveTo(t,n),void e.lineTo(r,i);var l=r-t,u=i-n,c=Math.floor(Math.sqrt(l*l+u*u)/o);l/=c,u/=c;for(var f=!0,h=0;h<c;++h)f?e.moveTo(t,n):e.lineTo(t,n),f=!f,t+=l,n+=u;e.lineTo(r,i)}}],(n=null)&&XC(t.prototype,n),r&&XC(t,r),e}();function ZC(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}KC.Util_area=new jC,KC.Util_color=new lx,KC.Util_computeBoundingBox=new RC,KC.Util_curve=new AC,KC.Util_env=new DC,KC.Util_event=new BC,KC.Util_http=new zC,KC.Util_log=new JC,KC.Util_math=new WC,KC.Util_matrix=new YC,KC.Util=new ax,KC.Util_vector=new kC;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var $C=function(){function e(){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.position=[0,0],this.rotation=[0,0,0],this.scale=[1,1,0,0],this.needLocalTransform=!1,this.needTransform=!1,this.CLASS_NAME="SuperMap.LevelRenderer.Transformable",this.lookAt=(t=KC.Util_vector.create(),function(e){this.transform||(this.transform=KC.Util_matrix.create());var n=this.transform;function r(e){return e>-5e-5&&e<5e-5}KC.Util_vector.sub(t,e,this.position),r(t[0])&&r(t[1])||(KC.Util_vector.normalize(t,t),n[2]=t[0]*this.scale[1],n[3]=t[1]*this.scale[1],n[0]=t[1]*this.scale[0],n[1]=-t[0]*this.scale[0],n[4]=this.position[0],n[5]=this.position[1],this.decomposeTransform())})}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.position=null,this.rotation=null,this.scale=null,this.needLocalTransform=null,this.needTransform=null}},{key:"updateNeedTransform",value:function(){function e(e){return e>5e-5||e<-5e-5}this.needLocalTransform=e(this.rotation[0])||e(this.position[0])||e(this.position[1])||e(this.scale[0]-1)||e(this.scale[1]-1)}},{key:"updateTransform",value:function(){if(this.updateNeedTransform(),this.parent?this.needTransform=this.needLocalTransform||this.parent.needTransform:this.needTransform=this.needLocalTransform,this.needTransform){var e=[0,0],t=this.transform||KC.Util_matrix.create();if(KC.Util_matrix.identity(t),this.needLocalTransform){if(i(this.scale[0])||i(this.scale[1])){e[0]=-this.scale[2]||0,e[1]=-this.scale[3]||0;var n=i(e[0])||i(e[1]);n&&KC.Util_matrix.translate(t,t,e),KC.Util_matrix.scale(t,t,this.scale),n&&(e[0]=-e[0],e[1]=-e[1],KC.Util_matrix.translate(t,t,e))}if(this.rotation instanceof Array){if(0!==this.rotation[0]){e[0]=-this.rotation[1]||0,e[1]=-this.rotation[2]||0;var r=i(e[0])||i(e[1]);r&&KC.Util_matrix.translate(t,t,e),KC.Util_matrix.rotate(t,t,this.rotation[0]),r&&(e[0]=-e[0],e[1]=-e[1],KC.Util_matrix.translate(t,t,e))}}else 0!==this.rotation&&KC.Util_matrix.rotate(t,t,this.rotation);(i(this.position[0])||i(this.position[1]))&&KC.Util_matrix.translate(t,t,this.position)}this.transform=t,this.parent&&this.parent.needTransform&&(this.needLocalTransform?KC.Util_matrix.mul(this.transform,this.parent.transform,this.transform):KC.Util_matrix.copy(this.transform,this.parent.transform))}function i(e){return e>5e-5||e<-5e-5}}},{key:"setTransform",value:function(e){if(this.needTransform){var t=this.transform;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}}},{key:"decomposeTransform",value:function(){if(this.transform){var e=this.transform,t=e[0]*e[0]+e[1]*e[1],n=this.position,r=this.scale,i=this.rotation;a(t-1)&&(t=Math.sqrt(t));var o=e[2]*e[2]+e[3]*e[3];a(o-1)&&(o=Math.sqrt(o)),n[0]=e[4],n[1]=e[5],r[0]=t,r[1]=o,r[2]=r[3]=0,i[0]=Math.atan2(-e[1]/o,e[0]/t),i[1]=i[2]=0}function a(e){return e>5e-5||e<-5e-5}}}])&&ZC(t.prototype,n),r&&ZC(t,r),e}();function eT(e){return(eT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function nT(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rT(e,t,n){return(rT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=iT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function iT(e){return(iT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oT(e,t){return(oT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var aT=function(e){function t(e){var n,r,i,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=iT(t).call(this,e))||"object"!==eT(i)&&"function"!=typeof i?nT(r):i,e=e||{},n.id=null,n.style={},n.highlightStyle=null,n.parent=null,n.__dirty=!0,n.__clipShapes=[],n.invisible=!1,n.ignore=!1,n.zlevel=0,n.draggable=!1,n.clickable=!1,n.hoverable=!0,n.z=0,n.refOriginalPosition=[0,0],n.refDataID=null,n.isHoverByRefDataID=!1,n.refDataHoverGroup=null,n.dataInfo=null,be.extend(nT(n),e),n.id=n.id||be.createUniqueID("smShape_"),n.CLASS_NAME="SuperMap.LevelRenderer.Shape",n.getTansform=(o=[],function(e,t){var n=[e,t];return this.needTransform&&this.transform&&(KC.Util_matrix.invert(o,this.transform),KC.Util_matrix.mulVector(n,o,[e,t,1]),e==n[0]&&t==n[1]&&this.updateNeedTransform()),n}),n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oT(e,t)}(t,r.mixin(PC,$C)),n=t,o=[{key:"_fillText",value:function(e,n,r,i,o,a,s){o&&(e.font=o),e.textAlign=a,e.textBaseline=s;var l=t._getTextRect(n,r,i,o,a,s);n=(n+"").split("\n");var u=KC.Util_area.getTextHeight("ZH",o);switch(s){case"top":i=l.y;break;case"bottom":i=l.y+u;break;default:i=l.y+u/2}for(var c=0,f=n.length;c<f;c++)e.fillText(n[c],r,i),i+=u}},{key:"_getTextRect",value:function(e,t,n,r,i,o){var a=KC.Util_area.getTextWidth(e,r),s=KC.Util_area.getTextHeight("ZH",r);switch(e=(e+"").split("\n"),i){case"end":case"right":t-=a;break;case"center":t-=a/2}switch(o){case"top":break;case"bottom":n-=s*e.length;break;default:n-=s*e.length/2}return{x:t,y:n,width:a,height:s*e.length}}}],(i=[{key:"destroy",value:function(){this.id=null,this.style=null,this.highlightStyle=null,this.parent=null,this.__dirty=null,this.__clipShapes=null,this.invisible=null,this.ignore=null,this.zlevel=null,this.draggable=null,this.clickable=null,this.hoverable=null,this.z=null,this.refOriginalPosition=null,this.refDataID=null,this.refDataHoverGroup=null,this.isHoverByRefDataID=null,this.dataInfo=null,rT(iT(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){var n=this.beforeBrush(e,t);switch(e.beginPath(),this.buildPath(e,n),n.brushType){case"both":this.setCtxGlobalAlpha(e,"fill",n),e.fill(),n.lineWidth>0&&(this.setCtxGlobalAlpha(e,"stroke",n),e.stroke()),this.setCtxGlobalAlpha(e,"reset",n);break;case"stroke":this.setCtxGlobalAlpha(e,"stroke",n),n.lineWidth>0&&e.stroke(),this.setCtxGlobalAlpha(e,"reset",n);break;default:this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)}this.drawText(e,n,this.style),this.afterBrush(e)}},{key:"beforeBrush",value:function(e,t){var n=this.style;return this.brushTypeOnly&&(n.brushType=this.brushTypeOnly),t&&(n=this.getHighlightStyle(n,this.highlightStyle||{},this.brushTypeOnly)),"stroke"==this.brushTypeOnly&&(n.strokeColor=n.strokeColor||n.color),e.save(),this.doClip(e),this.setContext(e,n),this.setTransform(e),n}},{key:"afterBrush",value:function(e){e.restore()}},{key:"setContext",value:function(e,t){for(var n=[["color","fillStyle"],["strokeColor","strokeStyle"],["opacity","globalAlpha"],["lineCap","lineCap"],["lineJoin","lineJoin"],["miterLimit","miterLimit"],["lineWidth","lineWidth"],["shadowBlur","shadowBlur"],["shadowColor","shadowColor"],["shadowOffsetX","shadowOffsetX"],["shadowOffsetY","shadowOffsetY"]],r=0,i=n.length;r<i;r++){var o=t[n[r][0]],a=n[r][1];void 0!==o&&(e[a]=o)}}},{key:"doClip",value:function(e){var t=KC.Util_matrix.create();if(this.__clipShapes)for(var n=0;n<this.__clipShapes.length;n++){var r=this.__clipShapes[n];if(r.needTransform){var i=r.transform;KC.Util_matrix.invert(t,i),e.transform(i[0],i[1],i[2],i[3],i[4],i[5])}if(e.beginPath(),r.buildPath(e,r.style),e.clip(),r.needTransform){var o=t;e.transform(o[0],o[1],o[2],o[3],o[4],o[5])}}}},{key:"getHighlightStyle",value:function(e,t,n){var r={};for(var i in e)r[i]=e[i];var o=KC.Util_color.getHighlightColor();for(var a in"stroke"!=e.brushType?(r.strokeColor=o,r.lineWidth=e.lineWidth||1,r.brushType="both"):"stroke"!=n?(r.strokeColor=o,r.lineWidth=e.lineWidth||1):r.strokeColor=t.strokeColor||KC.Util_color.mix(e.strokeColor,KC.Util_color.toRGB(o)),t)void 0!==t[a]&&(r[a]=t[a]);return r}},{key:"getHighlightZoom",value:function(){return"text"!=this.type?6:2}},{key:"drift",value:function(e,t){this.position[0]+=e,this.position[1]+=t}},{key:"buildPath",value:function(e,t){KC.Util_log("buildPath not implemented in "+this.type)}},{key:"getRect",value:function(e){KC.Util_log("getRect not implemented in "+this.type)}},{key:"isCover",value:function(e,t){var n=this.getTansform(e,t);e=n[0],t=n[1];var r=this.style.__rect;return r||(r=this.style.__rect=this.getRect(this.style)),e>=r.x&&e<=r.x+r.width&&t>=r.y&&t<=r.y+r.height&&KC.Util_area.isInside(this,this.style,e,t)}},{key:"drawText",value:function(e,n,r){if(void 0!==n.text&&!1!==n.text){var i=n.textColor||n.color||n.strokeColor;e.fillStyle=i;var o,a,s,l,u=10,c=n.textPosition||this.textPosition||"top",f=[];switch(f=this.refOriginalPosition&&2===this.refOriginalPosition.length?this.refOriginalPosition:[0,0],c){case"inside":case"top":case"bottom":case"left":case"right":if(this.getRect){var h=(r||n).__rect||this.getRect(r||n);switch(c){case"inside":s=h.x+h.width/2,l=h.y+h.height/2,o="center",a="middle","stroke"!=n.brushType&&i==n.color&&(e.fillStyle="#fff");break;case"left":s=h.x-u,l=h.y+h.height/2,o="end",a="middle";break;case"right":s=h.x+h.width+u,l=h.y+h.height/2,o="start",a="middle";break;case"top":s=h.x+h.width/2,l=h.y-u,o="center",a="bottom";break;case"bottom":s=h.x+h.width/2,l=h.y+h.height+u,o="center",a="top"}}break;case"start":case"end":var p=0,y=0,d=0,m=0;if(void 0!==n.pointList){var v=n.pointList;if(v.length<2)return;var g=v.length;switch(c){case"start":p=v[0][0]+f[0],y=v[1][0]+f[0],d=v[0][1]+f[1],m=v[1][1]+f[1];break;case"end":p=v[g-2][0]+f[0],y=v[g-1][0]+f[0],d=v[g-2][1]+f[1],m=v[g-1][1]+f[1]}}else p=n.xStart+f[0]||0,y=n.xEnd+f[0]||0,d=n.yStart+f[1]||0,m=n.yEnd+f[1]||0;switch(c){case"start":o=p<y?"end":"start",a=d<m?"bottom":"top",s=p,l=d;break;case"end":o=p<y?"start":"end",a=d<m?"top":"bottom",s=y,l=m}u-=4,p&&y&&p!=y?s-="end"==o?u:-u:o="center",d!=m?l-="bottom"==a?u:-u:a="middle";break;case"specific":s=n.textX||0,l=n.textY||0,o="start",a="middle"}n.labelXOffset&&!isNaN(n.labelXOffset)&&(s+=n.labelXOffset),n.labelYOffset&&!isNaN(n.labelYOffset)&&(l+=n.labelYOffset),null!=s&&null!=l&&t._fillText(e,n.text,s,l,n.textFont,n.textAlign||o,n.textBaseline||a)}}},{key:"modSelf",value:function(){this.__dirty=!0,this.style&&(this.style.__rect=null),this.highlightStyle&&(this.highlightStyle.__rect=null)}},{key:"isSilent",value:function(){return!(this.hoverable||this.draggable||this.clickable||this.onmousemove||this.onmouseover||this.onmouseout||this.onmousedown||this.onmouseup||this.onclick||this.ondragenter||this.ondragover||this.ondragleave||this.ondrop)}},{key:"setCtxGlobalAlpha",value:function(e,t,n){e.globalAlpha="fill"===t?void 0===n.fillOpacity?void 0===n.opacity?1:n.opacity:n.fillOpacity:"stroke"===t?void 0===n.strokeOpacity?void 0===n.opacity?1:n.opacity:n.strokeOpacity:void 0===n.opacity?1:n.opacity}}])&&tT(n.prototype,i),o&&tT(n,o),t}();function sT(e){return(sT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uT(e,t){return!t||"object"!==sT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cT(e,t,n){return(cT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=fT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function fT(e){return(fT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hT(e,t){return(hT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var pT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=uT(this,fT(t).call(this,e))).type="smicpoint",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPoint",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&hT(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,cT(fT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;e.arc(t.x+n[0],t.y+n[1],t.r,0,2*Math.PI,!0)}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-e.r-t/2),y:Math.round(e.y+n[1]-e.r-t/2),width:2*e.r+t,height:2*e.r+t},e.__rect)}}])&&lT(n.prototype,r),i&&lT(n,i),t}();function yT(e){return(yT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function dT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function mT(e,t){return!t||"object"!==yT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function vT(e,t,n){return(vT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=gT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function gT(e){return(gT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function bT(e,t){return(bT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ST=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=mT(this,gT(t).call(this,e))).type="smictext",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicText",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&bT(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,vT(gT(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=this.style;if(t&&(r=this.getHighlightStyle(r,this.highlightStyle||{})),void 0!==r.text&&!1!==r.text){e.save(),this.doClip(e),this.setContext(e,r),this.setTransform(e),r.textFont&&(e.font=r.textFont),e.textAlign=r.textAlign||"start",e.textBaseline=r.textBaseline||"middle";var i,o=(r.text+"").split("\n"),a=KC.Util_area.getTextHeight("ZH",r.textFont),s=this.getRectNoRotation(r),l=r.x+n[0];i="top"==r.textBaseline?s.y:"bottom"==r.textBaseline?s.y+a:s.y+a/2;for(var u=r.x+n[0],c=r.y+n[1],f=0,h=o.length;f<h;f++){switch(r.labelRect&&(e.fillRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=r.strokeColor,e.strokeRect(s.x-2,s.y,s.width+4,s.height),e.fillStyle=r.textColor),r.brushType){case"stroke":this.setCtxGlobalAlpha(e,"stroke",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.strokeText(o[f],0,a*f,r.maxWidth):e.strokeText(o[f],0,a*f):"bottom"==r.textBaseline?r.maxWidth?e.strokeText(o[f],0,a*(f+1)-s.height,r.maxWidth):e.strokeText(o[f],0,a*(f+1)-s.height):r.maxWidth?e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth):e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2),e.restore()):r.maxWidth?e.strokeText(o[f],l,i,r.maxWidth):e.strokeText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r);break;case"both":r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*f,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*f),this.setCtxGlobalAlpha(e,"reset",r)):"bottom"==r.textBaseline?r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height),this.setCtxGlobalAlpha(e,"reset",r)):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],0,a*(f+1)-s.height/2-a/2),this.setCtxGlobalAlpha(e,"reset",r)),e.restore()):r.maxWidth?(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],l,i,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],l,i,r.maxWidth),this.setCtxGlobalAlpha(e,"reset",r)):(this.setCtxGlobalAlpha(e,"fill",r),e.fillText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r),this.setCtxGlobalAlpha(e,"stroke",r),e.strokeText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r));break;default:this.setCtxGlobalAlpha(e,"fill",r),r.textRotation&&0!==r.textRotation?(e.save(),e.translate(u,c),e.rotate(r.textRotation*Math.PI/180),"top"==r.textBaseline?r.maxWidth?e.fillText(o[f],0,a*f,r.maxWidth):e.fillText(o[f],0,a*f):"bottom"==r.textBaseline?r.maxWidth?e.fillText(o[f],0,a*(f+1)-s.height,r.maxWidth):e.fillText(o[f],0,a*(f+1)-s.height):r.maxWidth?e.fillText(o[f],0,a*(f+1)-s.height/2-a/2,r.maxWidth):e.fillText(o[f],0,a*(f+1)-s.height/2-a/2),e.restore()):r.maxWidth?e.fillText(o[f],l,i,r.maxWidth):e.fillText(o[f],l,i),this.setCtxGlobalAlpha(e,"reset",r)}i+=a}e.restore()}}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;for(var t,n,r,i,o=this.getTextBackground(e,!0),a=0,s=o.length;a<s;a++){var l=o[a];0==a?(t=l[0],r=l[0],n=l[1],i=l[1]):(l[0]<t&&(t=l[0]),l[0]>r&&(r=l[0]),l[1]<n&&(n=l[1]),l[1]>i&&(i=l[1]))}return e.__rect={x:t,y:n,width:r-t,height:i-n},e.__rect}},{key:"getRectNoRotation",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition,r=KC.Util_area.getTextHeight("ZH",e.textFont),i=KC.Util_area.getTextWidth(e.text,e.textFont),o=KC.Util_area.getTextHeight(e.text,e.textFont),a=e.x+n[0];"end"==e.textAlign||"right"==e.textAlign?a-=i:"center"==e.textAlign&&(a-=i/2),t="top"==e.textBaseline?e.y+n[1]:"bottom"==e.textBaseline?e.y+n[1]-o:e.y+n[1]-o/2;var s,l=!1;if(e.maxWidth){var u=parseInt(e.maxWidth);u<i&&(s=i,l=!0,i=u),a=e.x+n[0],"end"==e.textAlign||"right"==e.textAlign?a-=i:"center"==e.textAlign&&(a-=i/2)}e.textFont&&(e.textFont.toLowerCase().indexOf("italic")>-1&&(i+=!0===l?r/3*(i/s):r/3));return{x:a,y:t,width:i,height:o}}},{key:"getTextBackground",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;if(!t&&e.__textBackground)return e.__textBackground;var r=this.getRectNoRotation(e),i=e.x+n[0],o=e.y+n[1],a=[];if(e.textRotation&&0!==e.textRotation){var s=e.textRotation,l=this.getRotatedLocation(r.x,r.y,i,o,s),u=this.getRotatedLocation(r.x+r.width,r.y,i,o,s),c=this.getRotatedLocation(r.x+r.width,r.y+r.height,i,o,s),f=this.getRotatedLocation(r.x,r.y+r.height,i,o,s);a.push(l),a.push(u),a.push(c),a.push(f)}else{var h=[r.x,r.y],p=[r.x+r.width,r.y],y=[r.x+r.width,r.y+r.height],d=[r.x,r.y+r.height];a.push(h),a.push(p),a.push(y),a.push(d)}return e.__textBackground=a,e.__textBackground}},{key:"getRotatedLocation",value:function(e,t,n,r,i){var o,a,s=new Array;return t=-t,r=-r,i=-i,o=(e-n)*Math.cos(i/180*Math.PI)-(t-r)*Math.sin(i/180*Math.PI)+n,a=(e-n)*Math.sin(i/180*Math.PI)+(t-r)*Math.cos(i/180*Math.PI)+r,s[0]=o,s[1]=-a,s}}])&&dT(n.prototype,r),i&&dT(n,i),t}();function _T(e){return(_T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function OT(e,t){return!t||"object"!==_T(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xT(e,t,n){return(xT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=CT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function CT(e){return(CT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TT(e,t){return(TT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var PT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=OT(this,CT(t).call(this,e))).type="smiccircle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicCircle",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TT(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,xT(CT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1];return e.moveTo(r+t.r,i),e.arc(r,i,t.r,0,2*Math.PI,!0),!0}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition,r=e.x+n[0],i=e.y+n[1],o=e.r;return t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(r-o-t/2),y:Math.round(i-o-t/2),width:2*o+t,height:2*o+t},e.__rect}}])&&wT(n.prototype,r),i&&wT(n,i),t}();function ET(e){return(ET="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function kT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function MT(e,t){return!t||"object"!==ET(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function AT(e,t,n){return(AT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=LT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function LT(e){return(LT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function jT(e,t){return(jT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var NT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=MT(this,LT(t).call(this,e))).type="smicpolygon",n.holePolygonPointLists=null,n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicPolygon",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jT(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,this.holePolygonPointLists=null,AT(LT(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.style;t&&(n=this.getHighlightStyle(n,this.highlightStyle||{})),e.save(),this.setContext(e,n),this.setTransform(e);var r=!1;"fill"!=n.brushType&&"both"!=n.brushType&&void 0!==n.brushType||(e.beginPath(),"dashed"==n.lineType||"dotted"==n.lineType||"dot"==n.lineType||"dash"==n.lineType||"dashdot"==n.lineType||"longdash"==n.lineType||"longdashdot"==n.lineType?this.buildPath(e,{lineType:"solid",lineWidth:n.lineWidth,pointList:n.pointList}):(this.buildPath(e,n),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",n),e.fill(),this.setCtxGlobalAlpha(e,"reset",n)),n.lineWidth>0&&("stroke"==n.brushType||"both"==n.brushType)&&(r||(e.beginPath(),this.buildPath(e,n)),this.setCtxGlobalAlpha(e,"stroke",n),e.stroke(),this.setCtxGlobalAlpha(e,"reset",n)),this.drawText(e,n,this.style);var i=be.cloneObject(n);if(i.pointList&&this.holePolygonPointLists&&this.holePolygonPointLists.length>0)for(var o=this.holePolygonPointLists,a=o.length,s=0;s<a;s++){var l=o[s];i.pointList=l,e.globalCompositeOperation="destination-out",r=!1,"fill"!=i.brushType&&"both"!=i.brushType&&void 0!==i.brushType||(e.beginPath(),"dashed"==i.lineType||"dotted"==i.lineType||"dot"==i.lineType||"dash"==i.lineType||"dashdot"==i.lineType||"longdash"==i.lineType||"longdashdot"==i.lineType?this.buildPath(e,{lineType:"solid",lineWidth:i.lineWidth,pointList:i.pointList}):(this.buildPath(e,i),r=!0),e.closePath(),this.setCtxGlobalAlpha(e,"fill",i),e.fill(),this.setCtxGlobalAlpha(e,"reset",i)),i.lineWidth>0&&("stroke"==i.brushType||"both"==i.brushType)?(r||(e.beginPath(),this.buildPath(e,i)),e.globalCompositeOperation="source-over",this.setCtxGlobalAlpha(e,"stroke",i),e.stroke(),this.setCtxGlobalAlpha(e,"reset",i)):e.globalCompositeOperation="source-over"}e.restore()}},{key:"buildPath",value:function(e,t){t.showShadow&&(e.shadowBlur=t.shadowBlur,e.shadowColor=t.shadowColor,e.shadowOffsetX=t.shadowOffsetX,e.shadowOffsetY=t.shadowOffsetY),this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2))if(t.smooth&&"spline"!==t.smooth){var i,o,a,s=KC.SUtil_smoothBezier(r,t.smooth,!0,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var l=r.length,u=0;u<l;u++)i=s[2*u],o=s[2*u+1],a=[r[(u+1)%l][0]+n[0],r[(u+1)%l][1]+n[1]],e.bezierCurveTo(i[0],i[1],o[0],o[1],a[0],a[1])}else if("spline"===t.smooth&&(r=KC.SUtil_smoothSpline(r,!0,null,n)),t.lineType&&"solid"!=t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=c;var f=t.lineWidth||1,h=f,p=f;"dashed"===t.lineType&&(h*=5,p*=5,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f),"dot"===t.lineType&&(p*=4,t.lineCap&&"butt"!==t.lineCap&&(h=1,p+=f)),"dash"===t.lineType&&(h*=4,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),"longdash"===t.lineType&&(h*=8,p*=4,t.lineCap&&"butt"!==t.lineCap&&(h-=f,p+=f)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var y=1;y<r.length;y++)KC.SUtil_dashedLineTo(e,r[y-1][0]+n[0],r[y-1][1]+n[1],r[y][0]+n[0],r[y][1]+n[1],f,[h,p]);KC.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],f,[h,p])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var d=t._dashLength||(t.lineWidth||1)*("dashed"==t.lineType?5:1);t._dashLength=d;var m=t.lineWidth||1,v=m,g=m,b=m,S=m;"dashdot"===t.lineType&&(v*=4,g*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=m,g+=m,b=1,S+=m)),"longdashdot"===t.lineType&&(v*=8,g*=4,S*=4,t.lineCap&&"butt"!==t.lineCap&&(v-=m,g+=m,b=1,S+=m)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var _=1;_<r.length;_++)KC.SUtil_dashedLineTo(e,r[_-1][0]+n[0],r[_-1][1]+n[1],r[_][0]+n[0],r[_][1]+n[1],m,[v,g,b,S]);KC.SUtil_dashedLineTo(e,r[r.length-1][0]+n[0],r[r.length-1][1]+n[1],r[0][0]+n[0],r[0][1]+n[1],m,[v,g,b,S])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var w=1;w<r.length;w++)e.lineTo(r[w][0]+n[0],r[w][1]+n[1]);e.lineTo(r[0][0]+n[0],r[0][1]+n[1])}}},{key:"getRect",value:function(e,t){var n;if(t?n=t:(this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]),n=this.refOriginalPosition),e.__rect)return e.__rect;for(var r,i=Number.MAX_VALUE,o=Number.MIN_VALUE,a=Number.MAX_VALUE,s=Number.MIN_VALUE,l=e.pointList,u=0,c=l.length;u<c;u++)l[u][0]+n[0]<i&&(i=l[u][0]+n[0]),l[u][0]+n[0]>o&&(o=l[u][0]+n[0]),l[u][1]+n[1]<a&&(a=l[u][1]+n[1]),l[u][1]+n[1]>s&&(s=l[u][1]+n[1]);return r="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(i-r/2),y:Math.round(a-r/2),width:o-i+r,height:s-a+r},e.__rect}}])&&kT(n.prototype,r),i&&kT(n,i),t}();function RT(e){return(RT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function IT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function DT(e,t){return!t||"object"!==RT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function FT(e,t,n){return(FT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=BT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function BT(e){return(BT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function UT(e,t){return(UT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var GT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=DT(this,BT(t).call(this,e))).brushTypeOnly="stroke",n.textPosition="end",n.type="smicbroken-line",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicBrokenLine",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&UT(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.brushTypeOnly=null,this.textPosition=null,this.type=null,FT(BT(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.pointList;if(!(r.length<2)){var i=Math.min(t.pointList.length,Math.round(t.pointListLength||t.pointList.length));if(t.smooth&&"spline"!==t.smooth){var o,a,s,l=KC.SUtil_smoothBezier(r,t.smooth,!1,t.smoothConstraint,n);e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var u=0;u<i-1;u++)o=l[2*u],a=l[2*u+1],s=[r[u+1][0]+n[0],r[u+1][1]+n[1]],e.bezierCurveTo(o[0],o[1],a[0],a[1],s[0],s[1])}else if("spline"===t.smooth&&(i=(r=KC.SUtil_smoothSpline(r,null,null,n)).length),t.lineType&&"solid"!==t.lineType){if("dashed"===t.lineType||"dotted"===t.lineType||"dot"===t.lineType||"dash"===t.lineType||"longdash"===t.lineType){var c=t.lineWidth||1,f=c,h=c;"dashed"===t.lineType&&(f*=5,h*=5,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"dotted"===t.lineType&&t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c),"dot"===t.lineType&&(h*=4,t.lineCap&&"butt"!==t.lineCap&&(f=1,h+=c)),"dash"===t.lineType&&(f*=4,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),"longdash"===t.lineType&&(f*=8,h*=4,t.lineCap&&"butt"!==t.lineCap&&(f-=c,h+=c)),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var p=1;p<i;p++)KC.SUtil_dashedLineTo(e,r[p-1][0]+n[0],r[p-1][1]+n[1],r[p][0]+n[0],r[p][1]+n[1],c,[f,h])}else if("dashdot"===t.lineType||"longdashdot"===t.lineType){var y=t.lineWidth||1,d=y,m=y,v=y,g=y;"dashdot"===t.lineType&&(d*=4,m*=4,g*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,v=1,g+=y)),"longdashdot"===t.lineType&&(d*=8,m*=4,g*=4,t.lineCap&&"butt"!==t.lineCap&&(d-=y,m+=y,v=1,g+=y)),y=(t.lineWidth||1)*("dashed"===t.lineType?5:1),e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var b=1;b<i;b++)KC.SUtil_dashedLineTo(e,r[b-1][0]+n[0],r[b-1][1]+n[1],r[b][0]+n[0],r[b][1]+n[1],y,[d,m,v,g])}}else{e.moveTo(r[0][0]+n[0],r[0][1]+n[1]);for(var S=1;S<i;S++)e.lineTo(r[S][0]+n[0],r[S][1]+n[1])}}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return NT.prototype.getRect.apply(this,[e,t])}}])&&IT(n.prototype,r),i&&IT(n,i),t}();function zT(e){return(zT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function VT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function HT(e,t){return!t||"object"!==zT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function JT(e,t,n){return(JT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=qT(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function qT(e){return(qT=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function WT(e,t){return(WT=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var QT=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=HT(this,qT(t).call(this,e))).type="smicimage",n._imageCache={},n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicImage",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&WT(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,this._imageCache=null,JT(qT(t.prototype),"destroy",this).call(this)}},{key:"brush",value:function(e,n,r){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var i=this.refOriginalPosition,o=this.style||{};n&&(o=this.getHighlightStyle(o,this.highlightStyle||{}));var a=o.image,s=this;if("string"==typeof a){var l=a;this._imageCache[l]?a=this._imageCache[l]:((a=new Image).onload=function(){a.onload=null,clearTimeout(t._refreshTimeout),t._needsRefresh.push(s),t._refreshTimeout=setTimeout(function(){r&&r(t._needsRefresh),t._needsRefresh=[]},10)},a.src=l,this._imageCache[l]=a)}if(a){if("IMG"==a.nodeName.toUpperCase())if(window.ActiveXObject){if("complete"!=a.readyState)return}else if(!a.complete)return;var u=o.width||a.width,c=o.height||a.height,f=o.x+i[0],h=o.y+i[1];if(!a.width||!a.height)return;if(e.save(),this.doClip(e),this.setContext(e,o),this.setTransform(e),o.sWidth&&o.sHeight){var p=o.sx+i[0]||0,y=o.sy+i[1]||0;e.drawImage(a,p,y,o.sWidth,o.sHeight,f,h,u,c)}else if(o.sx&&o.sy){var d=o.sx+i[0],m=o.sy+i[1],v=u-d,g=c-m;e.drawImage(a,d,m,v,g,f,h,u,c)}else e.drawImage(a,f,h,u,c);o.width||(o.width=u),o.height||(o.height=c),this.style.width||(this.style.width=u),this.style.height||(this.style.height=c),this.drawText(e,o,this.style),e.restore()}}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition;return{x:e.x+t[0],y:e.y+t[1],width:e.width,height:e.height}}},{key:"clearCache",value:function(){this._imageCache={}}}])&&VT(n.prototype,r),i&&VT(n,i),t}();function YT(e){return(YT="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function XT(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function KT(e,t){return!t||"object"!==YT(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ZT(e,t,n){return(ZT="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=$T(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function $T(e){return($T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eP(e,t){return(eP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/QT._needsRefresh=[],QT._refreshTimeout=null;var tP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=KT(this,$T(t).call(this,e))).type="smicrectangle",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicRectangle",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&eP(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,ZT($T(t.prototype),"destroy",this).call(this)}},{key:"_buildRadiusPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n,r,i,o,a,s=this.refOriginalPosition,l=t.x+s[0],u=t.y+s[1],c=t.width,f=t.height,h=t.radius;"number"==typeof h?n=r=i=o=h:h instanceof Array?1===h.length?n=r=i=o=h[0]:2===h.length?(n=i=h[0],r=o=h[1]):3===h.length?(n=h[0],r=o=h[1],i=h[2]):(n=h[0],r=h[1],i=h[2],o=h[3]):n=r=i=o=0,n+r>c&&(n*=c/(a=n+r),r*=c/a),i+o>c&&(i*=c/(a=i+o),o*=c/a),r+i>f&&(r*=f/(a=r+i),i*=f/a),n+o>f&&(n*=f/(a=n+o),o*=f/a),e.moveTo(l+n,u),e.lineTo(l+c-r,u),0!==r&&e.quadraticCurveTo(l+c,u,l+c,u+r),e.lineTo(l+c,u+f-i),0!==i&&e.quadraticCurveTo(l+c,u+f,l+c-i,u+f),e.lineTo(l+o,u+f),0!==o&&e.quadraticCurveTo(l,u+f,l,u+f-o),e.lineTo(l,u+n),0!==n&&e.quadraticCurveTo(l,u,l+n,u)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition;t.radius?this._buildRadiusPath(e,t):(e.moveTo(t.x+n[0],t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]),e.lineTo(t.x+n[0]+t.width,t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1]+t.height),e.lineTo(t.x+n[0],t.y+n[1])),e.closePath()}},{key:"getRect",value:function(e){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t,n=this.refOriginalPosition;return e.__rect?e.__rect:(t="stroke"==e.brushType||"fill"==e.brushType?e.lineWidth||1:0,e.__rect={x:Math.round(e.x+n[0]-t/2),y:Math.round(e.y+n[1]-t/2),width:e.width+t,height:e.height+t},e.__rect)}}])&&XT(n.prototype,r),i&&XT(n,i),t}();function nP(e){return(nP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function rP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function iP(e,t){return!t||"object"!==nP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function oP(e,t,n){return(oP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=aP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function aP(e){return(aP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function sP(e,t){return(sP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var lP=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=iP(this,aP(t).call(this,e))).type="smicsector",n.refOriginalPosition&&2===n.refOriginalPosition.length||(n.refOriginalPosition=[0,0]),n.CLASS_NAME="SuperMap.LevelRenderer.Shape.SmicSector",n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sP(e,t)}(t,aT),n=t,(r=[{key:"destroy",value:function(){this.type=null,oP(aP(t.prototype),"destroy",this).call(this)}},{key:"buildPath",value:function(e,t){this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var n=this.refOriginalPosition,r=t.x+n[0],i=t.y+n[1],o=t.r0||0,a=t.r,s=t.startAngle,l=t.endAngle,u=t.clockWise||!1;s=KC.Util_math.degreeToRadian(s),l=KC.Util_math.degreeToRadian(l),u||(s=-s,l=-l);var c=KC.Util_math.cos(s),f=KC.Util_math.sin(s);e.moveTo(c*o+r,f*o+i),e.lineTo(c*a+r,f*a+i),e.arc(r,i,a,s,l,!u),e.lineTo(KC.Util_math.cos(l)*o+r,KC.Util_math.sin(l)*o+i),0!==o&&e.arc(r,i,o,l,s,u),e.closePath()}},{key:"getRect",value:function(e){if(e.__rect)return e.__rect;this.refOriginalPosition&&2===this.refOriginalPosition.length||(this.refOriginalPosition=[0,0]);var t=this.refOriginalPosition,n=KC.Util_vector.create(),r=KC.Util_vector.create(),i=KC.Util_vector.create(),o=KC.Util_vector.create(),a=e.x+t[0],s=e.y+t[1],l=e.r0||0,u=e.r,c=KC.Util_math.degreeToRadian(e.startAngle),f=KC.Util_math.degreeToRadian(e.endAngle),h=e.clockWise;return h||(c=-c,f=-f),l>1?KC.Util_computeBoundingBox.arc(a,s,l,c,f,!h,n,i):(n[0]=i[0]=a,n[1]=i[1]=s),KC.Util_computeBoundingBox.arc(a,s,u,c,f,!h,r,o),KC.Util_vector.min(n,n,r),KC.Util_vector.max(i,i,o),e.__rect={x:n[0],y:n[1],width:i[0]-n[0],height:i[1]-n[1]},e.__rect}}])&&rP(n.prototype,r),i&&rP(n,i),t}();function uP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cP=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.shapeParameters=t,this.CLASS_NAME="SuperMap.Feature.ShapeFactory"}var t,n,r;return t=e,r=[{key:"transformStyle",value:function(e){var t={},n=["normal","normal","normal","12","arial,sans-serif"],r=[!0,!1];for(var i in e)switch(i){case"fill":r[0]=e[i];break;case"fillColor":t.color=e[i];break;case"stroke":r[1]=e[i];break;case"strokeWidth":t.lineWidth=e[i];break;case"strokeLinecap":t.lineCap=e[i];break;case"strokeLineJoin":t.lineJoin=e[i];break;case"strokeDashstyle":t.lineType=e[i];break;case"pointRadius":t.r=e[i];break;case"label":t.text=e[i];break;case"labelRect":t.labelRect=e[i];break;case"fontColor":t.textColor=e[i];break;case"fontStyle":n[0]=e[i];break;case"fontVariant":n[1]=e[i];break;case"fontWeight":n[2]=e[i];break;case"fontSize":var o="";e[i]&&e[i].toString().indexOf("px")<0&&(o="px"),n[3]=e[i]+o;break;case"fontFamily":n[4]=e[i];break;case"fontOpacity":t.opacity=e[i];break;case"labelPosition":t.textPosition=e[i];break;case"labelAlign":t.textAlign=e[i];break;case"labelBaseline":t.textBaseline=e[i];break;case"labelRotation":t.textRotation=e[i];break;default:t[i]=e[i]}return t.textFont=n.join(" "),!0===r[0]&&!1===r[1]?t.brushType="fill":!1===r[0]&&!0===r[1]?t.brushType="stroke":!0===r[0]&&!0===r[1]?t.brushType="both":t.brushType="fill",null==t.lineWidth&&(t.lineWidth=1),t}},{key:"Background",value:function(e,t,n){var r=n||{},i=new Kx(t[0],t[3],Math.abs(t[2]-t[0]),Math.abs(t[3]-t[1]));return i.style={fillColor:"#f3f3f3"},r.backgroundStyle&&be.copyAttributesWithClip(i.style,r.backgroundStyle),r.backgroundRadius&&(i.style.radius=r.backgroundRadius),i.clickable=!1,i.hoverable=!1,e.createShape(i)}},{key:"GraphAxis",value:function(e,t,n,r){var i=t,o=n||{},a=[],s=[],l=!!o.useXReferenceLine&&o.useXReferenceLine,u=o.axisYTick&&!isNaN(o.axisYTick)?o.axisYTick:0,c=[],f=[];if(0==u){if(f.push([i[0],i[3]-5]),f.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var h=parseInt(o.axis3DParameter),p=[i[0]-h,i[1]+h];o.axisUseArrow?(c.push([p[0]+1.5,p[1]-7.5]),c.push([p[0]-1,p[1]+1]),c.push([p[0]+7.5,p[1]-1.5]),f.push([p[0],p[1]])):f.push([p[0],p[1]]),f.push([i[0],i[1]])}f.push([i[2]+5,i[1]])}else{var y=Math.abs(i[1]-i[3])/u,d=i[3];f.push([i[0],d-5]);for(var m=0;m<u;m++){if(f.push([i[0],d]),f.push([i[0]-5,d]),f.push([i[0],d]),l){var v=new Dx([[i[0],d],[i[2],d]]);v.style={strokeColor:"#cfcfcf",strokeLinecap:"butt",strokeLineJoin:"round",strokeWidth:1},v.clickable=!1,v.hoverable=!1,o.xReferenceLineStyle&&be.copyAttributesWithClip(v.style,o.xReferenceLineStyle),a.push(e.createShape(v))}d+=y}if(f.push([i[0],i[1]]),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var g=parseInt(o.axis3DParameter),b=[i[0]-g,i[1]+g];o.axisUseArrow?(c.push([b[0]+1.5,b[1]-7.5]),c.push([b[0]-1,b[1]+1]),c.push([b[0]+7.5,b[1]-1.5]),f.push([b[0],b[1]])):f.push([b[0],b[1]]),f.push([i[0],i[1]])}f.push([i[2]+5,i[1]])}if(o.axisUseArrow){var S=[[i[2]+5,i[1]+4],[i[2]+13,i[1]],[i[2]+5,i[1]-4]],_=[[i[0]-4,i[3]-5],[i[0],i[3]-13],[i[0]+4,i[3]-5]],w=new Hx(S);w.style={fillColor:"#008acd"},be.copyAttributesWithClip(w.style,o.axisStyle),s.push(e.createShape(w));var O=new Hx(_);if(O.style={fillColor:"#008acd"},be.copyAttributesWithClip(O.style,o.axisStyle),s.push(e.createShape(O)),o.axis3DParameter&&!isNaN(o.axis3DParameter)&&o.axis3DParameter>=15){var x=new Hx(c);x.style={fillColor:"#008acd"},be.copyAttributesWithClip(x.style,o.axisStyle),s.push(e.createShape(x))}}var C=new Dx(f);C.style={strokeLinecap:"butt",strokeLineJoin:"round",strokeColor:"#008acd",strokeWidth:1},o.axisStyle&&be.copyAttributesWithClip(C.style,o.axisStyle),C.clickable=!1,C.hoverable=!1;var T=[e.createShape(C)],P=[];if(o.axisYLabels&&o.axisYLabels.length&&o.axisYLabels.length>0){var E=o.axisYLabels,k=E.length,M=[0,0];if(o.axisYLabelsOffset&&o.axisYLabelsOffset.length&&(M=o.axisYLabelsOffset),1==k){var A=new fC(i[0]-5+M[0],i[3]+M[1],E[0]);A.style={labelAlign:"right"},o.axisYLabelsStyle&&be.copyAttributesWithClip(A.style,o.axisYLabelsStyle),A.clickable=!1,A.hoverable=!1,P.push(e.createShape(A))}else for(var L=i[3],j=Math.abs(i[1]-i[3])/(k-1),N=0;N<k;N++){var R=new fC(i[0]-5+M[0],L+M[1],E[N]);R.style={labelAlign:"right"},o.axisYLabelsStyle&&be.copyAttributesWithClip(R.style,o.axisYLabelsStyle),R.clickable=!1,R.hoverable=!1,P.push(e.createShape(R)),L+=j}}var I=[];if(o.axisXLabels&&o.axisXLabels.length&&o.axisXLabels.length>0){var D=o.axisXLabels,F=D.length,B=[0,0];if(o.axisXLabelsOffset&&o.axisXLabelsOffset.length&&(B=o.axisXLabelsOffset),r&&r.xPositions&&r.xPositions.length&&r.xPositions.length==F)for(var U=r.xPositions,G=0;G<F;G++){var z=new fC(U[G]+B[0],i[1]+B[1],D[G]);z.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&be.copyAttributesWithClip(z.style,o.axisXLabelsStyle),z.clickable=!1,z.hoverable=!1,I.push(e.createShape(z))}else if(1==F){var V=new fC(i[0]-5+B[0],i[1]+B[0],D[0]);V.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&be.copyAttributesWithClip(V.style,o.axisXLabelsStyle),V.clickable=!1,V.hoverable=!1,I.push(e.createShape(V))}else for(var H=i[0],J=Math.abs(i[2]-i[0])/(F-1),q=0;q<F;q++){var W=new fC(H+B[0],i[1]+B[1],D[q]);W.style={labelAlign:"center",labelBaseline:"top"},o.axisXLabelsStyle&&be.copyAttributesWithClip(W.style,o.axisXLabelsStyle),W.clickable=!1,W.hoverable=!1,I.push(e.createShape(W)),H+=J}}return a.concat(T).concat(P).concat(I).concat(s)}},{key:"ShapeStyleTool",value:function(e,t,n,r,i,o){var a=e||{};if(t&&be.copyAttributesWithClip(a,t),n&&n.length&&void 0!==i&&!isNaN(i)&&i>=0&&n[i]&&be.copyAttributesWithClip(a,n[i]),r&&r.length&&void 0!==o)for(var s=r,l=s.length,u=parseFloat(o),c=0;c<l;c++)if(s[c].start<=u&&u<s[c].end){be.copyAttributesWithClip(a,s[c].style);break}return a}}],(n=[{key:"destroy",value:function(){this.shapeParameters=null}},{key:"createShape",value:function(t){if(t&&(this.shapeParameters=t),!this.shapeParameters)return null;var n=this.shapeParameters;if(n instanceof Mx){var r=new Object;r.x=n.x,r.y=n.y,r.r=n.r,r=be.copyAttributesWithClip(r,n.style,["x","y"]);var i=new pT;return i.style=e.transformStyle(r),i.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(i,n,["x","y","style","highlightStyle"]),i}if(n instanceof Dx){if(!n.pointList)return null;var o=new Object;o.pointList=n.pointList,o=be.copyAttributesWithClip(o,n.style,["pointList"]);var a=new GT;return a.style=e.transformStyle(o),a.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(a,n,["pointList","style","highlightStyle"]),a}if(n instanceof Hx){if(!n.pointList)return null;var s=new Object;s.pointList=n.pointList,s=be.copyAttributesWithClip(s,n.style,["pointList"]);var l=new NT;return l.style=e.transformStyle(s),l.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(l,n,["pointList","style","highlightStyle"]),l}if(n instanceof Kx){if(!n.x&&!n.y&!n.width&!n.height)return null;var u=new Object;u.x=n.x,u.y=n.y,u.width=n.width,u.height=n.height,u=be.copyAttributesWithClip(u,n.style,["x","y","width","height"]);var c=new tP;return c.style=e.transformStyle(u),c.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(c,n,["x","y","width","height","style","highlightStyle"]),c}if(n instanceof iC){var f=new Object;f.x=n.x,f.y=n.y,f.r=n.r,f.startAngle=n.startAngle,f.endAngle=n.endAngle,n.r0&&(f.r0=n.r0),n.clockWise&&(f.clockWise=n.clockWise),f=be.copyAttributesWithClip(f,n.style,["x","y","r","startAngle","endAngle","r0","endAngle"]);var h=new lP;return h.style=e.transformStyle(f),h.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(h,n,["x","y","r","startAngle","endAngle","r0","endAngle","style","highlightStyle"]),h}if(n instanceof fC){var p=new Object;p.x=n.x,p.y=n.y,p.text=n.text,p=be.copyAttributesWithClip(p,n.style,["x","y","text"]);var y=new ST;return y.style=e.transformStyle(p),y.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(y,n,["x","y","text","style","highlightStyle"]),y}if(n instanceof gC){var d=new Object;d.x=n.x,d.y=n.y,n.image&&(d.image=n.image),n.width&&(d.width=n.width),n.height&&(d.height=n.height),n.sx&&(d.sx=n.sx),n.sy&&(d.sy=n.sy),n.sWidth&&(d.sWidth=n.sWidth),n.sHeight&&(d.sHeight=n.sHeight),d=be.copyAttributesWithClip(d,n.style,["x","y","image","width","height","sx","sy","sWidth","sHeight"]);var m=new QT;return m.style=e.transformStyle(d),m.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(m,n,["x","y","image","width","height","style","highlightStyle"]),m}if(n instanceof CC){var v=new Object;v.x=n.x,v.r=n.r,v.y=n.y,v=be.copyAttributesWithClip(v,n.style,["x","y","r"]);var g=new PT;return g.style=e.transformStyle(v),g.highlightStyle=e.transformStyle(n.highlightStyle),be.copyAttributesWithClip(g,n,["x","y","r","style","highlightStyle","lineWidth","text","textPosition"]),g}return null}}])&&uP(t.prototype,n),r&&uP(t,r),e}();function fP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Feature=r.Feature||{},r.Feature.ShapeFactory=cP;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hP=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t&&n&&n.map&&n.renderer&&(this.id=be.createUniqueID(this.CLASS_NAME+"_"),this.lonlat=null,this.location=[],this.data=t,this.shapes=[],this.layer=n,this.CLASS_NAME="SuperMap.Feature.Theme")}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.data=null,this.id=null,this.lonlat=null,this.location=null,this.shapes=null,this.layer=null}},{key:"getLocalXY",value:function(e){var t=this.layer.map.getResolution(),n=this.layer.map.getExtent();return e instanceof Xe||e instanceof ct?[e.x/t+-n.left/t,n.top/t-e.y/t]:e instanceof _e?[e.lon/t+-n.left/t,n.top/t-e.lat/t]:null}}])&&fP(t.prototype,n),r&&fP(t,r),e}();function pP(e){return(pP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dP(e,t){return!t||"object"!==pP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mP(e,t,n){return(mP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=vP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function vP(e){return(vP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gP(e,t){return(gP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature=r.Feature||{},r.Feature.Theme=hP;var bP=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=dP(this,vP(t).call(this,e,n,r,i,o,a))).shapeFactory=new cP,s.shapeParameters=null,s.RelativeCoordinate=!1,s.setting=null,s.origonPoint=null,s.chartBox=null,s.chartBounds=null,s.width=null,s.height=null,s.XOffset=0,s.YOffset=0,s.DVBParameter=null,s.dataViewBox=null,s.DVBCodomain=null,s.DVBCenterPoint=null,s.DVBUnitValue=null,s.DVBOrigonPoint=null,s.DVBWidth=null,s.DVBHeight=null,s.origonPointOffset=null,s.fields=r||[],s.dataValues=null,s.lonlat=o||s.data.geometry.getBounds().getCenterLonLat(),i&&i.width&&i.height&&i.codomain&&(s.setting=i),s.CLASS_NAME="SuperMap.Feature.Theme.Graph",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&gP(e,t)}(t,hP),n=t,(r=[{key:"destroy",value:function(){this.shapeFactory=null,this.shapeParameters=null,this.width=null,this.height=null,this.origonPoint=null,this.chartBox=null,this.dataViewBox=null,this.chartBounds=null,this.DVBParameter=null,this.DVBOrigonPoint=null,this.DVBCenterPoint=null,this.DVBWidth=null,this.DVBHeight=null,this.DVBCodomain=null,this.DVBUnitValue=null,this.origonPointOffset=null,this.XOffset=null,this.YOffset=null,this.fields=null,this.dataValues=null,this.setting=null,mP(vP(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;if(!(e.width&&e.height&&e.codomain))return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,n=hP.getDataValues(this.data,this.fields,t);this.dataValues=n||[],this.width=parseFloat(e.width),this.height=parseFloat(e.height),this.DVBCodomain=e.codomain,this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var r=this.width,i=this.height,o=this.location;this.origonPoint=[o[0]-r/2,o[1]-i/2];var a=this.origonPoint;this.chartBox=[a[0],a[1]+i,a[0]+r,a[1]];var s=this.chartBox,l=this.DVBParameter;this.dataViewBox=[s[0]+l[0],s[1]-l[1],s[2]-l[2],s[3]+l[3]];var u=this.dataViewBox;return!(u[0]>=u[2]||u[1]<=u[3])&&(this.DVBOrigonPoint=[u[0],u[3]],this.DVBWidth=Math.abs(u[2]-u[0]),this.DVBHeight=Math.abs(u[1]-u[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-a[0],this.DVBOrigonPoint[1]-a[1]],!0)}},{key:"resetLocation",value:function(e){e&&(this.lonlat=e);var t=this.getLocalXY(this.lonlat);t[0]+=this.XOffset,t[1]+=this.YOffset,this.location=t;var n=this.width,r=this.height,i=this.location;return this.chartBounds=new Oe(i[0]-n/2,i[1]+r/2,i[0]+n/2,i[1]-r/2),this.resetLinearGradient(),i}},{key:"resetLinearGradient",value:function(){}},{key:"shapesConvertToRelativeCoordinate",value:function(){for(var e=this.shapes,t=this.location,n=0,r=e.length;n<r;n++){e[n].refOriginalPosition=t;var i=e[n].style;for(var o in i)switch(o){case"pointList":for(var a=i[o],s=0,l=a.length;s<l;s++)a[s][0]-=t[0],a[s][1]-=t[1];break;case"x":i[o]-=t[0];break;case"y":i[o]-=t[1]}}this.RelativeCoordinate=!0}},{key:"assembleShapes",value:function(){}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&yP(n.prototype,r),i&&yP(n,i),t}();function SP(e){return(SP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function wP(e,t){return!t||"object"!==SP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OP(e,t,n){return(OP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=xP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function xP(e){return(xP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CP(e,t){return(CP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/hP.getDataValues=function(e,t,n){if(!e.attributes)return!1;for(var r=[],i=e.attributes,o=0;o<t.length;o++)for(var a in i)if(a===t[o])try{!isNaN(n)&&n>=0?r.push(parseFloat(i[a].toString()).toFixed(n)):r.push(parseFloat(i[a].toString()))}catch(e){throw new Error("not a number")}return r.length===t.length&&r},r.Feature.Theme.Graph=bP;var TP=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=wP(this,xP(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Bar",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CP(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){OP(xP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e={showShadow:!0,shadowBlur:8,shadowColor:"rgba(100,100,100,0.8)",shadowOffsetX:2,shadowOffsetY:2},t=this.setting;if(t.barLinearGradient||(t.barLinearGradient=[["#00FF00","#00CD00"],["#00CCFF","#5E87A2"],["#00FF66","#669985"],["#CCFF00","#94A25E"],["#FF9900","#A2945E"]]),t.dataViewBoxParameter||(void 0===t.useAxis||t.useAxis?t.dataViewBoxParameter=[45,15,15,15]:t.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.dataViewBox,i=this.dataValues;if(!(i.length<1)){for(var o=0,a=i.length;o<a;o++)if(i[o]<n[0]||i[o]>n[1])return;var s=this.calculateXShapeInfo();if(s){var l=s.xPositions,u=s.width;(void 0===t.useBackground||t.useBackground)&&this.shapes.push(cP.Background(this.shapeFactory,this.chartBox,t)),(void 0===t.useAxis||t.useAxis)&&(this.shapes=this.shapes.concat(cP.GraphAxis(this.shapeFactory,r,t,s)));for(var c=0;c<i.length;c++){var f=r[1]-(i[c]-n[0])/this.DVBUnitValue,h=[[l[c]-u/2,r[1]-1],[l[c]+u/2,r[1]-1],[l[c]+u/2,f],[l[c]-u/2,f]],p=new Hx(h);if(void 0===t.showShadow||t.showShadow){if(t.barShadowStyle){var y=t.barShadowStyle;y.shadowBlur&&(e.shadowBlur=y.shadowBlur),y.shadowColor&&(e.shadowColor=y.shadowColor),y.shadowOffsetX&&(e.shadowOffsetX=y.shadowOffsetX),y.shadowOffsetY&&(e.shadowOffsetY=y.shadowOffsetY)}p.style={},be.copyAttributesWithClip(p.style,e)}p.refDataID=this.data.id,p.dataInfo={field:this.fields[c],value:i[c]},void 0!==t.barHoverAble&&(p.hoverable=t.barHoverAble),void 0!==t.barClickAble&&(p.clickable=t.barClickAble),this.shapes.push(this.shapeFactory.createShape(p))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var s=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(s<=r)return null;o=s/r}else e=[o=a/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0==u?l=e[0]+o/2:l+=o+e[1],i.push(t[0]+l);return{xPositions:i,width:o}}},{key:"resetLinearGradient",value:function(){if(this.RelativeCoordinate)for(var e=this.shapes.length,t=this.setting.barLinearGradient,n=-1,r=0;r<e;r++){var i=this.shapes[r];if("SuperMap.LevelRenderer.Shape.SmicPolygon"===i.CLASS_NAME){var o=i.style,a=this.location[0]+o.pointList[0][0],s=this.location[0]+o.pointList[1][0];++n>=t.length&&(n%=t.length);var l=t[n][0],u=t[n][1],c=(new lx).getLinearGradient(a,0,s,0,[[0,l],[1,u]]);i.style.color=c}}}}])&&_P(n.prototype,r),i&&_P(n,i),t}();function PP(e){return(PP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function EP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kP(e,t){return!t||"object"!==PP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function MP(e,t,n){return(MP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=AP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function AP(e){return(AP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LP(e,t){return(LP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Bar=TP;var jP=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=kP(this,AP(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Bar3D",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LP(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){MP(AP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,25,20,20]:e.dataViewBoxParameter=[5,5,5,5]),e.axisUseArrow=void 0===e.axisUseArrow||e.axisUseArrow,e.axisXLabelsOffset=void 0!==e.axisXLabelsOffset?e.axisXLabelsOffset:[-10,10],this.initBaseParameter()){var t=this.DVBCodomain;this.DVBUnitValue=(t[1]-t[0])/this.DVBHeight;var n=this.dataViewBox,r=this.dataValues;if(!(r.length<1)){for(var i=0,o=r.length;i<o;i++)if(r[i]<t[0]||r[i]>t[1])return;var a=this.calculateXShapeInfo();if(a){var s=a.xPositions,l=a.width;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(cP.Background(this.shapeFactory,this.chartBox,e)),(!e.axis3DParameter||isNaN(e.axis3DParameter)||e.axis3DParameter<15)&&(e.axis3DParameter=20),(void 0===e.useAxis||e.useAxis)&&(this.shapes=this.shapes.concat(cP.GraphAxis(this.shapeFactory,n,e,a)));for(var u=e.bar3DParameter&&!isNaN(e.bar3DParameter)?e.bar3DParameter:10,c=0;c<r.length;c++){var f=n[1]-(r[c]-t[0])/this.DVBUnitValue,h=s[c]-l/2,p=s[c]+l/2,y=[[h,f],[p,f],[p-u,f+u],[h-u,f+u]],d=[[p,f],[p-u,f+u],[p-u,n[1]+u],[p,n[1]]],m=[[h-u,n[1]+u],[p-u,n[1]+u],[p-u,f+u],[h-u,f+u]];u<=0&&(m=[[h,n[1]],[p,n[1]],[p,f],[h,f]]);var v=new Hx(y),g=new Hx(d),b=new Hx(m);e.barSideStyle=e.barSideStyle?e.barSideStyle:e.barFaceStyle,e.barSideStyleByFields=e.barSideStyleByFields?e.barSideStyleByFields:e.barFaceStyleByFields,e.barSideStyleByCodomain=e.barSideStyleByCodomain?e.barSideStyleByCodomain:e.barFaceStyleByCodomain,e.barTopStyle=e.barTopStyle?e.barTopStyle:e.barFaceStyle,e.barTopStyleByFields=e.barTopStyleByFields?e.barTopStyleByFields:e.barFaceStyleByFields,e.barTopStyleByCodomain=e.barTopStyleByCodomain?e.barTopStyleByCodomain:e.barFaceStyleByCodomain,b.style=cP.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barFaceStyle,e.barFaceStyleByFields,e.barFaceStyleByCodomain,c,r[c]),g.style=cP.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barSideStyle,e.barSideStyleByFields,e.barSideStyleByCodomain,c,r[c]),v.style=cP.ShapeStyleTool({stroke:!0,strokeColor:"#ffffff",fillColor:"#ee9900"},e.barTopStyle,e.barTopStyleByFields,e.barTopStyleByCodomain,c,r[c]),e.barSideHoverStyle=e.barSideHoverStyle?e.barSideHoverStyle:e.barFaceHoverStyle,e.barTopHoverStyle=e.barTopHoverStyle?e.barTopHoverStyle:e.barFaceHoverStyle,b.highlightStyle=cP.ShapeStyleTool({stroke:!0},e.barFaceHoverStyle),g.highlightStyle=cP.ShapeStyleTool({stroke:!0},e.barSideHoverStyle),v.highlightStyle=cP.ShapeStyleTool({stroke:!0},e.barTopHoverStyle),v.refDataID=g.refDataID=b.refDataID=this.data.id,v.isHoverByRefDataID=g.isHoverByRefDataID=b.isHoverByRefDataID=!0,v.refDataHoverGroup=g.refDataHoverGroup=b.refDataHoverGroup=be.createUniqueID("lr_shg"),v.dataInfo=g.dataInfo=b.dataInfo={field:this.fields[c],value:r[c]},void 0!==e.barHoverAble&&(v.hoverable=g.hoverable=b.hoverable=e.barHoverAble),void 0!==e.barClickAble&&(v.clickable=g.clickable=b.clickable=e.barClickAble),this.shapes.push(this.shapeFactory.createShape(g)),this.shapes.push(this.shapeFactory.createShape(v)),this.shapes.push(this.shapeFactory.createShape(b))}this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=0,a=this.DVBWidth;if(n.xShapeBlank&&n.xShapeBlank.length&&3==n.xShapeBlank.length){var s=a-((e=n.xShapeBlank)[0]+e[2]+(r-1)*e[1]);if(s<=r)return null;o=s/r}else e=[o=a/(2*r+1),o,o];for(var l=0,u=0;u<r;u++)0==u?l=e[0]+o/2:l+=o+e[1],i.push(t[0]+l);return{xPositions:i,width:o}}}])&&EP(n.prototype,r),i&&EP(n,i),t}();function NP(e){return(NP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function IP(e,t){return!t||"object"!==NP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function DP(e,t,n){return(DP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=FP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function FP(e){return(FP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function BP(e,t){return(BP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Bar3D=jP;var UP=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=IP(this,FP(t).call(this,e,n,r,i,o,a))).setting=null,i&&i.codomain&&(s.setting=i,s.DVBCodomain=s.setting.codomain),s.CLASS_NAME="SuperMap.Feature.Theme.RankSymbol",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&BP(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){this.setting=null,DP(FP(t.prototype),"destroy",this).call(this)}},{key:"initBaseParameter",value:function(){if(!this.setting)return!1;var e=this.setting;e.XOffset&&(this.XOffset=e.XOffset),e.YOffset&&(this.YOffset=e.YOffset),this.XOffset=e.XOffset?e.XOffset:0,this.YOffset=e.YOffset?e.YOffset:0,this.origonPoint=[],this.chartBox=[],this.dataViewBox=[],this.DVBParameter=e.dataViewBoxParameter?e.dataViewBoxParameter:[0,0,0,0],this.DVBOrigonPoint=[],this.DVBCenterPoint=[],this.origonPointOffset=[],this.resetLocation();var t=this.width,n=this.height,r=this.location;this.origonPoint=[r[0]-t/2,r[1]-n/2];var i=this.origonPoint;this.chartBox=[i[0],i[1]+n,i[0]+t,i[1]];var o=this.chartBox,a=this.DVBParameter;this.dataViewBox=[o[0]+a[0],o[1]-a[1],o[2]-a[2],o[3]+a[3]];var s=this.dataViewBox;return!(s[0]>=s[2]||s[1]<=s[3])&&(this.DVBOrigonPoint=[s[0],s[3]],this.DVBWidth=Math.abs(s[2]-s[0]),this.DVBHeight=Math.abs(s[1]-s[3]),this.DVBCenterPoint=[this.DVBOrigonPoint[0]+this.DVBWidth/2,this.DVBOrigonPoint[1]+this.DVBHeight/2],this.origonPointOffset=[this.DVBOrigonPoint[0]-i[0],this.DVBOrigonPoint[1]-i[1]],!0)}}])&&RP(n.prototype,r),i&&RP(n,i),t}();function GP(e){return(GP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function VP(e,t){return!t||"object"!==GP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function HP(e,t,n){return(HP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=JP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function JP(e){return(JP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qP(e,t){return(qP=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.RankSymbol=UP;var WP=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=VP(this,JP(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Circle",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&qP(e,t)}(t,UP),n=t,(r=[{key:"destroy",value:function(){HP(JP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(!this.setting)return!1;var e=this.setting;if(!e.codomain)return!1;var t=void 0===e.decimalNumber||isNaN(e.decimalNumber)?-1:e.decimalNumber,n=hP.getDataValues(this.data,this.fields,t);this.dataValues=n||[];var r=this.dataValues;e.maxR||(e.maxR=100),e.minR||(e.minR=0);var i=this.DVBCodomain;i&&i[1]-i[0]>0?this.DVBUnitValue=e.maxR/(i[1]-i[0]):this.DVBUnitValue=e.maxR;var o=this.DVBUnitValue,a=r[0]*o+e.minR;if(this.width=2*a,this.height=2*a,this.initBaseParameter()&&(!i||!(r[0]<i[0]||r[0]>i[1]))){var s=this.DVBCenterPoint,l=new CC(s[0],s[1],a);l.style=cP.ShapeStyleTool(null,e.circleStyle,null,null,0),void 0!==e.fillColor?l.style.fillColor=e.fillColor:l.style.fillColor="#ff9277",l.highlightStyle=cP.ShapeStyleTool(null,e.circleHoverStyle),void 0!==e.circleHoverAble&&(l.hoverable=e.circleHoverAble),void 0!==e.circleClickAble&&(l.clickable=e.circleClickAble),l.refDataID=this.data.id,l.dataInfo={field:this.fields[0],r:a,value:r[0]},this.shapes.push(this.shapeFactory.createShape(l)),this.shapesConvertToRelativeCoordinate()}}}])&&zP(n.prototype,r),i&&zP(n,i),t}();function QP(e){return(QP="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YP(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XP(e,t){return!t||"object"!==QP(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function KP(e,t,n){return(KP="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ZP(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function ZP(e){return(ZP=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $P(e,t){return($P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Circle=WP;var eE=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=XP(this,ZP(t).call(this,e,n,r,i,o,a))).CLASS_NAME="SuperMap.Feature.Theme.Line",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$P(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){KP(ZP(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues;if(!(i.length<1)){var o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(cP.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(cP.GraphAxis(this.shapeFactory,t,e,o));for(var u=[],c=[],f=0,h=i.length;f<h;f++){if(i[f]<n[0]||i[f]>n[1])return null;a=l[f],s=t[1]-(i[f]-n[0])/r;var p=new Mx(a,s);p.style=cP.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,f,i[f]),p.highlightStyle=cP.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(p.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(p.clickable=e.pointClickAble),p.refDataID=this.data.id,p.dataInfo={field:this.fields[f],value:i[f]},c.push(this.shapeFactory.createShape(p));var y=[a,s];u.push(y)}var d=new Dx(u);d.style=cP.ShapeStyleTool({strokeColor:"#ee9900"},e.lineStyle),d.clickable=!1,d.hoverable=!1;var m=this.shapeFactory.createShape(d);this.shapes.push(m),this.shapes=this.shapes.concat(c),this.shapesConvertToRelativeCoordinate()}}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var s=o-((e=n.xShapeBlank)[0]+e[1]);if(s<=r)return null;a=s/(r-1)}else e=[a=o/(r+1),a,a];for(var l=0,u=0;u<r;u++)0==u?l=e[0]:l+=a,i.push(t[0]+l);return{xPositions:i,width:0}}}])&&YP(n.prototype,r),i&&YP(n,i),t}();function tE(e){return(tE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rE(e,t){return!t||"object"!==tE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iE(e,t,n){return(iE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=oE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function oE(e){return(oE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function aE(e,t){return(aE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Line=eE;var sE=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=rE(this,oE(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Pie",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&aE(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){iE(oE(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting,t=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}];if(this.initBaseParameter()){e.useBackground&&this.shapes.push(cP.Background(this.shapeFactory,this.chartBox,e));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var o=0,a=0;a<n.length;a++)o+=Math.abs(n[a]);this.DVBUnitValue=360/o;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=0;p<n.length;p++){var y=Math.abs(n[p]);(c=0===p?u+y*s:p===y.length-1?f:u+y*s)-u>=360&&(c=359.9999999);var d=new iC(l[0],l[1],h,u,c);if(void 0===e.sectorStyleByFields){var m=p%t.length;d.style=cP.ShapeStyleTool(null,e.sectorStyle,t,null,m)}else d.style=cP.ShapeStyleTool(null,e.sectorStyle,e.sectorStyleByFields,e.sectorStyleByCodomain,p,n[p]);d.highlightStyle=cP.ShapeStyleTool(null,e.sectorHoverStyle),void 0!==e.sectorHoverAble&&(d.hoverable=e.sectorHoverAble),void 0!==e.sectorClickAble&&(d.clickable=e.sectorClickAble),d.refDataID=this.data.id,d.dataInfo={field:this.fields[p],value:n[p]},this.shapes.push(this.shapeFactory.createShape(d)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&nE(n.prototype,r),i&&nE(n,i),t}();function lE(e){return(lE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function uE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cE(e,t){return!t||"object"!==lE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fE(e,t,n){return(fE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hE(e){return(hE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pE(e,t){return(pE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Pie=sE;var yE=function(e){function t(e,n,r,i,o,a){var s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(s=cE(this,hE(t).call(this,e,n,r,i,o,a))).CLASS_NAME="SuperMap.Feature.Theme.Point",s}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pE(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){fE(hE(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){var e=this.setting;if(e.dataViewBoxParameter||(void 0===e.useAxis||e.useAxis?e.dataViewBoxParameter=[45,15,15,15]:e.dataViewBoxParameter=[5,5,5,5]),this.initBaseParameter()){var t=this.dataViewBox,n=this.DVBCodomain;this.DVBUnitValue=(n[1]-n[0])/this.DVBHeight;var r=this.DVBUnitValue,i=this.dataValues,o=this.calculateXShapeInfo();if(o){var a,s,l=o.xPositions;(void 0===e.useBackground||e.useBackground)&&this.shapes.push(cP.Background(this.shapeFactory,this.chartBox,e)),this.shapes=this.shapes.concat(cP.GraphAxis(this.shapeFactory,t,e,o));for(var u=0,c=i.length;u<c;u++){if(i[u]<n[0]||i[u]>n[1])return null;a=l[u],s=t[1]-(i[u]-n[0])/r;var f=new Mx(a,s);f.style=cP.ShapeStyleTool({fillColor:"#ee9900"},e.pointStyle,e.pointStyleByFields,e.pointStyleByCodomain,u,i[u]),f.highlightStyle=cP.ShapeStyleTool(null,e.pointHoverStyle),void 0!==e.pointHoverAble&&(f.hoverable=e.pointHoverAble),void 0!==e.pointClickAble&&(f.clickable=e.pointClickAble),f.refDataID=this.data.id,f.dataInfo={field:this.fields[u],value:i[u]},this.shapes.push(this.shapeFactory.createShape(f))}this.shapesConvertToRelativeCoordinate()}}}},{key:"calculateXShapeInfo",value:function(){var e,t=this.dataViewBox,n=this.setting,r=this.dataValues.length;if(r<1)return null;var i=[],o=this.DVBWidth,a=0;if(n.xShapeBlank&&n.xShapeBlank.length&&2==n.xShapeBlank.length){var s=o-((e=n.xShapeBlank)[0]+e[1]);if(s<=r)return null;a=s/(r-1)}else e=[a=o/(r+1),a,a];for(var l=0,u=0;u<r;u++)0==u?l=e[0]:l+=a,i.push(t[0]+l);return{xPositions:i,width:0}}}])&&uE(n.prototype,r),i&&uE(n,i),t}();function dE(e){return(dE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function mE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function vE(e,t){return!t||"object"!==dE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function gE(e,t,n){return(gE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function bE(e){return(bE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function SE(e,t){return(SE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Point=yE;var _E=function(e){function t(e,n,r,i,o){var a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(a=vE(this,bE(t).call(this,e,n,r,i,o))).CLASS_NAME="SuperMap.Feature.Theme.Ring",a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&SE(e,t)}(t,bP),n=t,(r=[{key:"destroy",value:function(){gE(bE(t.prototype),"destroy",this).call(this)}},{key:"assembleShapes",value:function(){if(this.initBaseParameter()){var e=[{fillColor:"#ff9277"},{fillColor:"#dddd00"},{fillColor:"#ffc877"},{fillColor:"#bbe3ff"},{fillColor:"#d5ffbb"},{fillColor:"#bbbbff"},{fillColor:"#ddb000"},{fillColor:"#b0dd00"},{fillColor:"#e2bbff"},{fillColor:"#ffbbe3"},{fillColor:"#ff7777"},{fillColor:"#ff9900"},{fillColor:"#83dd00"},{fillColor:"#77e3ff"},{fillColor:"#778fff"},{fillColor:"#c877ff"},{fillColor:"#ff77ab"},{fillColor:"#ff6600"},{fillColor:"#aa8800"},{fillColor:"#77c7ff"},{fillColor:"#ad77ff"},{fillColor:"#ff77ff"},{fillColor:"#dd0083"},{fillColor:"#777700"},{fillColor:"#00aa00"},{fillColor:"#0088aa"},{fillColor:"#8400dd"},{fillColor:"#aa0088"},{fillColor:"#dd0000"},{fillColor:"#772e00"}],t=this.setting;t.useBackground&&this.shapes.push(cP.Background(this.shapeFactory,this.chartBox,t));var n=this.dataValues;if(!(n.length<1)){for(var r=this.DVBCodomain,i=0;i<n.length;i++)if(n[i]<r[0]||n[i]>r[1])return;for(var o=0,a=0;a<n.length;a++)o+=Math.abs(n[a]);this.DVBUnitValue=360/o;for(var s=this.DVBUnitValue,l=this.DVBCenterPoint,u=0,c=0,f=u,h=this.DVBHeight<this.DVBWidth?this.DVBHeight/2:this.DVBWidth/2,p=t.innerRingRadius>=0&&t.innerRingRadius<h,y=void 0!==t.innerRingRadius&&!isNaN(t.innerRingRadius)&&p?t.innerRingRadius:0,d=0;d<n.length;d++){var m=Math.abs(n[d]);c=0===d?u+m*s:d===m.length-1?f:u+m*s;var v=new iC(l[0],l[1],h,u,c,y);if(void 0===t.sectorStyleByFields){var g=d%e.length;v.style=cP.ShapeStyleTool(null,t.sectorStyle,e,null,g)}else v.style=cP.ShapeStyleTool(null,t.sectorStyle,t.sectorStyleByFields,t.sectorStyleByCodomain,d,n[d]);v.highlightStyle=cP.ShapeStyleTool(null,t.sectorHoverStyle),void 0!==t.sectorHoverAble&&(v.hoverable=t.sectorHoverAble),void 0!==t.sectorClickAble&&(v.clickable=t.sectorClickAble),v.refDataID=this.data.id,v.dataInfo={field:this.fields[d],value:n[d]},this.shapes.push(this.shapeFactory.createShape(v)),u=c}this.shapesConvertToRelativeCoordinate()}}}}])&&mE(n.prototype,r),i&&mE(n,i),t}();function wE(e){return(wE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function xE(e,t){return!t||"object"!==wE(t)&&"function"!=typeof t?CE(e):t}function CE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TE(e,t,n){return(TE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=PE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function PE(e){return(PE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function EE(e,t){return(EE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.Ring=_E;var kE=function(e){function t(e,n,r,i,o){var a;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),a=xE(this,PE(t).call(this,e,n)),!e.geometry)return xE(a);if(!(e.geometry instanceof Ce))return xE(a);a.dataBounds=e.geometry.getBounds(),a.nodesClipPixel=2,a.isHoverAble=!0,a.isMultiHover=!0,a.isClickAble=!0,a.highlightStyle=null,a.shapeOptions={},a.style=r||{},a.CLASS_NAME="SuperMap.Feature.Theme.Vector",a.style=r||{},i&&be.copyAttributesWithClip(CE(a),i,["shapeOptions","dataBounds"]),o&&be.copyAttributesWithClip(a.shapeOptions,o);var s=e.geometry;return a.lonlat=a.dataBounds.getCenterLonLat(),a.location=a.getLocalXY(a.lonlat),s instanceof vt?a.lineToTF(s):s instanceof rt?a.lineToTF(s):s instanceof Ve||(s instanceof Fe?a.multiPointToTF(s):s instanceof wt?a.multiLineStringToTF(s):s instanceof Pt?a.multiPolygonToTF(s):s instanceof jt?a.polygonToTF(s):s instanceof Le||(s instanceof Xe?a.pointToTF(s):s instanceof Bt?a.rectangleToTF(s):s instanceof ct&&a.geoTextToTF(s))),a}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&EE(e,t)}(t,hP),n=t,(r=[{key:"destroy",value:function(){this.style=null,this.dataBounds=null,this.nodesClipPixel=null,this.isHoverAble=null,this.isMultiHover=null,this.isClickAble=null,this.highlightStyle=null,this.shapeOptions=null,TE(PE(t.prototype),"destroy",this).call(this)}},{key:"lineToTF",value:function(e){for(var t=e.components,n=[],r=[],i=this.location,o=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}o.push(r)}if(o.length<2)return null;var c=new Object;(c=be.copyAttributesWithClip(c,this.style,["pointList"])).pointList=o;var f=new GT({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=this.location,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}},{key:"multiPointToTF",value:function(e){for(var t=e.components,n=[],r=[],i=this.location,o=[],a=this.nodesClipPixel,s=0;s<t.length;s++){var l=t[s];if(r=[],n=this.getLocalXY(l),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var u=o[o.length-1];if(Math.abs(u[0]-r[0])<=a&&Math.abs(u[1]-r[1])<=a)continue}o.push(r);var c=new Object;c.r=6,(c=be.copyAttributesWithClip(c,this.style)).x=r[0],c.y=r[1];var f=new pT({style:c,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(f.highlightStyle=this.highlightStyle),f.refOriginalPosition=i,f.refDataID=this.data.id,f.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(f,this.shapeOptions),this.shapes.push(f)}}},{key:"multiLineStringToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.lineToTF(r)}}},{key:"multiPolygonToTF",value:function(e){for(var t=e.components,n=0;n<t.length;n++){var r=t[n];this.polygonToTF(r)}}},{key:"pointToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object;r.r=6,(r=be.copyAttributesWithClip(r,this.style)).x=n[0]-t[0],r.y=n[1]-t[1];var i=new pT({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"polygonToTF",value:function(e){for(var t=e.components,n=[],r=[],i=this.location,o=[],a=[],s=[],l=this.nodesClipPixel,u=0;u<t.length;u++){var c=t[u].components;if(0===u){o=[];for(var f=0;f<c.length;f++){if(r=[],n=this.getLocalXY(c[f]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],o.length>0){var h=o[o.length-1];if(Math.abs(h[0]-r[0])<=l&&Math.abs(h[1]-r[1])<=l)continue}o.push(r)}}else{a=[];for(var p=0;p<c.length;p++){if(r=[],n=this.getLocalXY(c[p]),r[0]=n[0]-i[0],r[1]=n[1]-i[1],a.length>0){var y=a[a.length-1];if(Math.abs(y[0]-r[0])<=l&&Math.abs(y[1]-r[1])<=l)continue}a.push(r)}}a.length<2||s.push(a)}if(!(o.length<2)){var d={};(d=be.copyAttributesWithClip(d,this.style,["pointList"])).pointList=o;var m=new NT({style:d,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(m.highlightStyle=this.highlightStyle),m.refOriginalPosition=this.location,m.refDataID=this.data.id,m.isHoverByRefDataID=this.isMultiHover,s.length>0&&(m.holePolygonPointLists=s),this.shapeOptions&&be.copyAttributesWithClip(m,this.shapeOptions),this.shapes.push(m)}}},{key:"rectangleToTF",value:function(e){var t=this.location,n=new _e(e.x,e.y),r=this.layer.map.getResolution(),i=this.getLocalXY(n),o=new Object;o.r=6,(o=be.copyAttributesWithClip(o,this.style)).x=i[0]-t[0],o.y=i[1]-t[1]-2*e.width/r,o.width=e.width/r,o.height=e.height/r;var a=new tP({style:o,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(a.highlightStyle=this.highlightStyle),a.refOriginalPosition=t,a.refDataID=this.data.id,a.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(a,this.shapeOptions),this.shapes.push(a)}},{key:"geoTextToTF",value:function(e){var t=this.location,n=this.getLocalXY(e),r=new Object;r.r=6,(r=be.copyAttributesWithClip(r,this.style,["x","y","text"])).x=n[0]-t[0],r.y=n[1]-t[1],r.text=e.text;var i=new ST({style:r,clickable:this.isClickAble,hoverable:this.isHoverAble});this.highlightStyle&&(i.highlightStyle=this.highlightStyle),i.refOriginalPosition=t,i.refDataID=this.data.id,i.isHoverByRefDataID=this.isMultiHover,this.shapeOptions&&be.copyAttributesWithClip(i,this.shapeOptions),this.shapes.push(i)}},{key:"updateAndAddShapes",value:function(){var e=this.getLocalXY(this.lonlat);this.location=e;for(var t=this.layer.renderer,n=0,r=this.shapes.length;n<r;n++){var i=this.shapes[n];i.refOriginalPosition=e,t.addShape(i)}}},{key:"getShapesCount",value:function(){return this.shapes.length}},{key:"getLocalXY",value:function(e){return this.layer.getLocalXY(e)}}])&&OE(n.prototype,r),i&&OE(n,i),t}();
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function ME(e){return(ME="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function AE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function LE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function jE(e,t,n){return(jE="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=NE(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function NE(e){return(NE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RE(e,t){return(RE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Feature.Theme.ThemeVector=kE;var IE=function(e){function t(e){var n,r,i;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,n=!(i=NE(t).call(this,e))||"object"!==ME(i)&&"function"!=typeof i?LE(r):i,e=e||{},n.id=null,n.type="group",n.clipShape=null,n._children=[],n._storage=null,n.__dirty=!0,n.ignore=!1,be.extend(LE(n),e),n.id=n.id||be.createUniqueID("smShapeGroup_"),n.CLASS_NAME="SuperMap.LevelRenderer.Group",n}var n,i,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RE(e,t)}(t,r.mixin(PC,$C)),n=t,(i=[{key:"destroy",value:function(){this.id=null,this.type=null,this.clipShape=null,this._children=null,this._storage=null,this.__dirty=null,this.ignore=null,jE(NE(t.prototype),"destroy",this).call(this)}},{key:"children",value:function(){return this._children.slice()}},{key:"childAt",value:function(e){return this._children[e]}},{key:"addChild",value:function(e){e!=this&&e.parent!=this&&(e.parent&&e.parent.removeChild(e),this._children.push(e),e.parent=this,this._storage&&this._storage!==e._storage&&(this._storage.addToMap(e),e instanceof t&&e.addChildrenToStorage(this._storage)))}},{key:"removeChild",value:function(e){var n=be.indexOf(this._children,e);this._children.splice(n,1),e.parent=null,this._storage&&(this._storage.delFromMap(e.id),e instanceof t&&e.delChildrenFromStorage(this._storage))}},{key:"eachChild",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i)}}},{key:"traverse",value:function(e,t){for(var n=!!t,r=0;r<this._children.length;r++){var i=this._children[r];n?e.call(t,i):e(i),"group"===i.type&&i.traverse(e,t)}}},{key:"addChildrenToStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.addToMap(n),"group"===n.type&&n.addChildrenToStorage(e)}}},{key:"delChildrenFromStorage",value:function(e){for(var t=0;t<this._children.length;t++){var n=this._children[t];e.delFromMap(n.id),"group"===n.type&&n.delChildrenFromStorage(e)}}},{key:"modSelf",value:function(){this.__dirty=!0}}])&&AE(n.prototype,i),o&&AE(n,o),t}();function DE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FE=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._elements={},this._hoverElements=[],this._roots=[],this._shapeList=[],this._shapeListOffset=0,this.CLASS_NAME="SuperMap.LevelRenderer.Storage"}var t,n,r;return t=e,r=[{key:"shapeCompareFunc",value:function(e,t){return e.zlevel==t.zlevel?e.z==t.z?e.__renderidx-t.__renderidx:e.z-t.z:e.zlevel-t.zlevel}}],(n=[{key:"destroy",value:function(){this.dispose(),this._shapeList=null,this._shapeListOffset=null}},{key:"iterShape",value:function(e,t){if(!t){t={hover:!1,normal:"down",update:!1}}if(t.hover)for(var n=0,r=this._hoverElements.length;n<r;n++){var i=this._hoverElements[n];if(i.updateTransform(),e(i))return this}switch(t.update&&this.updateShapeList(),t.normal){case"down":for(var o=this._shapeList.length;o--;)if(e(this._shapeList[o]))return this;break;default:for(var a=0,s=this._shapeList.length;a<s;a++)if(e(this._shapeList[a]))return this}return this}},{key:"getHoverShapes",value:function(t){for(var n=[],r=this._hoverElements.length,i=0;i<r;i++){n.push(this._hoverElements[i]);var o=this._hoverElements[i].hoverConnect;if(o)for(var a,s=0,l=(o=o instanceof Array?o:[o]).length;s<l;s++)(a=o[s].id?o[s]:this.get(o[s]))&&n.push(a)}if(n.sort(e.shapeCompareFunc),t)for(var u=0,c=n.length;u<c;u++)n[u].updateTransform();return n}},{key:"getShapeList",value:function(e){return e&&this.updateShapeList(),this._shapeList}},{key:"updateShapeList",value:function(){this._shapeListOffset=0;for(var t=this._roots.length,n=0;n<t;n++){var r=this._roots[n];this._updateAndAddShape(r)}this._shapeList.length=this._shapeListOffset;for(var i=this._shapeList.length,o=0;o<i;o++)this._shapeList[o].__renderidx=o;this._shapeList.sort(e.shapeCompareFunc)}},{key:"_updateAndAddShape",value:function(e,t){if(!e.ignore)if(e.updateTransform(),"group"==e.type){e.clipShape&&(e.clipShape.parent=e,e.clipShape.updateTransform(),t?(t=t.slice()).push(e.clipShape):t=[e.clipShape]);for(var n=0;n<e._children.length;n++){var r=e._children[n];r.__dirty=e.__dirty||r.__dirty,this._updateAndAddShape(r,t)}e.__dirty=!1}else e.__clipShapes=t,this._shapeList[this._shapeListOffset++]=e}},{key:"mod",value:function(e,t){var n=this._elements[e];if(n&&(n.modSelf(),t))if(t.parent||t._storage||t.__startClip){var r={};for(var i in t)"parent"!=i&&"_storage"!=i&&"__startClip"!=i&&t.hasOwnProperty(i)&&(r[i]=t[i]);(new ax).merge(n,r,!0)}else(new ax).merge(n,t,!0);return this}},{key:"drift",value:function(e,t,n){var r=this._elements[e];return r&&(r.needTransform=!0,"horizontal"===r.draggable?n=0:"vertical"===r.draggable&&(t=0),(!r.ondrift||r.ondrift&&!r.ondrift(t,n))&&r.drift(t,n)),this}},{key:"addHover",value:function(e){return e.updateNeedTransform(),this._hoverElements.push(e),this}},{key:"delHover",value:function(){return this._hoverElements=[],this}},{key:"hasHoverShape",value:function(){return this._hoverElements.length>0}},{key:"addRoot",value:function(e){e instanceof IE&&e.addChildrenToStorage(this),this.addToMap(e),this._roots.push(e)}},{key:"delRoot",value:function(e){if(void 0===e){for(var t=0;t<this._roots.length;t++){var n=this._roots[t];n instanceof IE&&n.delChildrenFromStorage(this)}return this._elements={},this._hoverElements=[],void(this._roots=[])}if(e instanceof Array)for(var r=e.length,i=0;i<r;i++)this.delRoot(e[i]);else{var o;o="string"==typeof e?this._elements[e]:e;var a=(new ax).indexOf(this._roots,o);a>=0&&(this.delFromMap(o.id),this._roots.splice(a,1),o instanceof IE&&o.delChildrenFromStorage(this))}}},{key:"addToMap",value:function(e){return e instanceof IE&&(e._storage=this),e.modSelf(),this._elements[e.id]=e,this}},{key:"get",value:function(e){return this._elements[e]}},{key:"delFromMap",value:function(e){var t=this._elements[e];return t&&(delete this._elements[e],t instanceof IE&&(t._storage=null)),this}},{key:"dispose",value:function(){this._elements=null,this._roots=null,this._hoverElements=null}}])&&DE(t.prototype,n),r&&DE(t,r),e}();function BE(e){return(BE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function UE(e,t){return!t||"object"!==BE(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function GE(e){return(GE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function zE(e,t){return(zE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function VE(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function HE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function JE(e,t,n){return t&&HE(e.prototype,t),n&&HE(e,n),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var qE=function(){function e(t,n){VE(this,e),this.root=t,this.storage=n,this._domRoot=null,this._layers={},this._zlevelList=[],this._layerConfig={},this._bgDom=null,this.shapeToImage=null,e.devicePixelRatio=Math.max(window.devicePixelRatio||1,1),this.CLASS_NAME="SuperMap.LevelRenderer.Painter",this.root.innerHTML="",this._width=this._getWidth(),this._height=this._getHeight();var r=document.createElement("div");this._domRoot=r,r.style.position="relative",r.style.overflow="hidden",r.style.width=this._width+"px",r.style.height=this._height+"px",this.root.appendChild(r),this.shapeToImage=this._createShapeToImageProcessor(),this._bgDom=e.createDom(be.createUniqueID("SuperMap.Theme_background_"),"div",this),r.appendChild(this._bgDom),this._bgDom.onselectstart=a,this._bgDom.style["-webkit-user-select"]="none",this._bgDom.style["user-select"]="none",this._bgDom.style["-webkit-touch-callout"]="none";var i=new WE(be.createUniqueID("_highLightLayer_"),this);this._layers.hover=i,r.appendChild(i.dom),i.initContext(),i.dom.onselectstart=a,i.dom.style["-webkit-user-select"]="none",i.dom.style["user-select"]="none",i.dom.style["-webkit-touch-callout"]="none";var o=this;function a(){return!1}this.updatePainter=function(e,t){o.refreshShapes(e,t)}}return JE(e,[{key:"destroy",value:function(){this.dispose(),this._zlevelList=null,this._layerConfig=null,this._bgDom=null,this.shapeToImage=null}},{key:"render",value:function(e){return this.refresh(e,!0),this}},{key:"refresh",value:function(e,t){var n=this.storage.getShapeList(!0);return this._paintList(n,t),"function"==typeof e&&e(),this}},{key:"_paintList",value:function(e,t){var n,r,i;for(var o in void 0===t&&(t=!1),this._updateLayerStatus(e),this._layers)"hover"!==o&&(this._layers[o].unusedCount++,this._layers[o].updateTransform());for(var a=[],s=0,l=e.length;s<l;s++){var u=e[s];if(r!==u.zlevel&&(n&&n.needTransform&&i.restore(),i=(n=this.getLayer(u.zlevel)).ctx,r=u.zlevel,n.unusedCount=0,(n.dirty||t)&&n.clear(),n.needTransform&&(i.save(),n.setTransform(i))),i&&u.__startClip){var c=u.__startClip;if(i.save(),c.needTransform){var f=c.transform;KC.Util_matrix.invert(a,f),i.transform(f[0],f[1],f[2],f[3],f[4],f[5])}if(i.beginPath(),c.buildPath(i,c.style),i.clip(),c.needTransform){var h=a;i.transform(h[0],h[1],h[2],h[3],h[4],h[5])}}if((n&&n.dirty||t)&&!u.invisible&&(!u.onbrush||u.onbrush&&!u.onbrush(i,!1)))if(VC.catchBrushException)try{u.brush(i,!1,this.updatePainter)}catch(e){KC.Util_log(e,"brush error of "+u.type,u)}else u.brush(i,!1,this.updatePainter);i&&u.__stopClip&&i.restore(),u.__dirty=!1}for(var p in i&&n&&n.needTransform&&i.restore(),this._layers)if("hover"!==p){var y=this._layers[p];y.dirty=!1,1==y.unusedCount&&y.clear()}}},{key:"getLayer",value:function(e){var t=this._layers[e];if(!t){var n=this._zlevelList.length,r=null,i=-1;if(n>0&&e>this._zlevelList[0]){for(i=0;i<n-1&&!(this._zlevelList[i]<e&&this._zlevelList[i+1]>e);i++);r=this._layers[this._zlevelList[i]]}this._zlevelList.splice(i+1,0,e),t=new WE(be.createUniqueID("_levelLayer_"+e),this);var o=r?r.dom:this._bgDom;o.nextSibling?o.parentNode.insertBefore(t.dom,o.nextSibling):o.parentNode.appendChild(t.dom),t.initContext(),this._layers[e]=t,this._layerConfig[e]&&(new ax).merge(t,this._layerConfig[e],!0),t.updateTransform()}return t}},{key:"getLayers",value:function(){return this._layers}},{key:"_updateLayerStatus",value:function(e){var t=this._layers,n={};for(var r in t)"hover"!==r&&(n[r]=t[r].elCount,t[r].elCount=0);for(var i=0;i<e.length;i++){var o=e[i],a=t[o.zlevel];if(a){if(a.elCount++,a.dirty)continue;a.dirty=o.__dirty}}for(var s in t)"hover"!==s&&n[s]!==t[s].elCount&&(t[s].dirty=!0)}},{key:"refreshShapes",value:function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];this.storage.mod(i.id)}return this.refresh(t),this}},{key:"clear",value:function(){for(var e in this._layers)"hover"!=e&&this._layers[e].clear();return this}},{key:"modLayer",value:function(e,t){if(t){this._layerConfig[e]?(new ax).merge(this._layerConfig[e],t,!0):this._layerConfig[e]=t;var n=this._layers[e];n&&(new ax).merge(n,this._layerConfig[e],!0)}}},{key:"delLayer",value:function(e){var t=this._layers[e];t&&(this.modLayer(e,{position:t.position,rotation:t.rotation,scale:t.scale}),t.dom.parentNode.removeChild(t.dom),delete this._layers[e],this._zlevelList.splice((new ax).indexOf(this._zlevelList,e),1))}},{key:"refreshHover",value:function(){this.clearHover();for(var e=this.storage.getHoverShapes(!0),t=0,n=e.length;t<n;t++)this._brushHover(e[t]);return this.storage.delHover(),this}},{key:"clearHover",value:function(){var e=this._layers.hover;return e&&e.clear(),this}},{key:"resize",value:function(){var e=this._domRoot;e.style.display="none";var t=this._getWidth(),n=this._getHeight();if(e.style.display="",this._width!=t||n!=this._height){for(var r in this._width=t,this._height=n,e.style.width=t+"px",e.style.height=n+"px",this._layers)this._layers[r].resize(t,n);this.refresh(null,!0)}return this}},{key:"clearLayer",value:function(e){var t=this._layers[e];t&&t.clear()}},{key:"dispose",value:function(){this.root.innerHTML="",this.root=null,this.storage=null,this._domRoot=null,this._layers=null}},{key:"getDomHover",value:function(){return this._layers.hover.dom}},{key:"toDataURL",value:function(t,n,r){var i=e.createDom(be.createUniqueID("SuperMap.Theme.image_"),"canvas",this);this._bgDom.appendChild(i);var o=i.getContext("2d");1!=e.devicePixelRatio&&o.scale(e.devicePixelRatio,e.devicePixelRatio),o.fillStyle=n||"#fff",o.rect(0,0,this._width*e.devicePixelRatio,this._height*e.devicePixelRatio),o.fill();var a=this;this.storage.iterShape(function(e){if(!e.invisible&&(!e.onbrush||e.onbrush&&!e.onbrush(o,!1)))if(VC.catchBrushException)try{e.brush(o,!1,a.updatePainter)}catch(t){KC.Util_log(t,"brush error of "+e.type,e)}else e.brush(o,!1,a.updatePainter)},{normal:"up",update:!0});var s=i.toDataURL(t,r);return o=null,this._bgDom.removeChild(i),s}},{key:"getWidth",value:function(){return this._width}},{key:"getHeight",value:function(){return this._height}},{key:"_getWidth",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientWidth||parseInt(t.width,10))-parseInt(t.paddingLeft,10)-parseInt(t.paddingRight,10)).toFixed(0)-0}},{key:"_getHeight",value:function(){var e=this.root,t=e.currentStyle||document.defaultView.getComputedStyle(e);return((e.clientHeight||parseInt(t.height,10))-parseInt(t.paddingTop,10)-parseInt(t.paddingBottom,10)).toFixed(0)-0}},{key:"_brushHover",value:function(e){var t=this._layers.hover.ctx;if(!e.onbrush||e.onbrush&&!e.onbrush(t,!0)){var n=this.getLayer(e.zlevel);if(n.needTransform&&(t.save(),n.setTransform(t)),VC.catchBrushException)try{e.brush(t,!0,this.updatePainter)}catch(t){KC.Util_log(t,"hoverBrush error of "+e.type,e)}else e.brush(t,!0,this.updatePainter);n.needTransform&&t.restore()}}},{key:"_shapeToImage",value:function(e,t,n,r,i){var o=document.createElement("canvas"),a=o.getContext("2d"),s=i||window.devicePixelRatio||1;o.style.width=n+"px",o.style.height=r+"px",o.setAttribute("width",n*s),o.setAttribute("height",r*s),a.clearRect(0,0,n*s,r*s);var l={position:t.position,rotation:t.rotation,scale:t.scale};t.position=[0,0,0],t.rotation=0,t.scale=[1,1],t&&t.brush(a,!1);var u=new QT({id:e,style:{x:0,y:0,image:o}});return null!=l.position&&(u.position=t.position=l.position),null!=l.rotation&&(u.rotation=t.rotation=l.rotation),null!=l.scale&&(u.scale=t.scale=l.scale),u}},{key:"_createShapeToImageProcessor",value:function(){var t=this;return function(n,r,i,o){return t._shapeToImage(n,r,i,o,e.devicePixelRatio)}}},{key:"updateHoverLayer",value:function(e){if(!(e instanceof Array))return this;this.clearHover(),this.storage.delHover();for(var t=0;t<e.length;t++)this.storage.addHover(e[t]),this._brushHover(e[t])}}],[{key:"createDom",value:function(t,n,r){var i=document.createElement(n),o=r._width,a=r._height;return i.style.position="absolute",i.style.left=0,i.style.top=0,i.style.width=o+"px",i.style.height=a+"px",i.setAttribute("width",o*e.devicePixelRatio),i.setAttribute("height",a*e.devicePixelRatio),i.setAttribute("id",t),i}}]),e}(),WE=function(e){function t(e,n){var r;return VE(this,t),(r=UE(this,GE(t).call(this,e,n))).dom=null,r.domBack=null,r.ctxBack=null,r.painter=n,r.unusedCount=0,r.config=null,r.dirty=!0,r.elCount=0,r.clearColor=0,r.motionBlur=!1,r.lastFrameAlpha=.7,r.zoomable=!1,r.panable=!1,r.maxZoom=1/0,r.minZoom=0,r.ctx=null,r.dom=qE.createDom(be.createUniqueID("SuperMap.Theme"+e),"canvas",n),r.dom.onselectstart=function(){return!1},r.dom.style["-webkit-user-select"]="none",r.dom.style["user-select"]="none",r.dom.style["-webkit-touch-callout"]="none",r.CLASS_NAME="SuperMap.LevelRenderer.Painter.Layer",r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&zE(e,t)}(t,$C),JE(t,[{key:"destroy",value:function(){this.dom=null,this.domBack=null,this.ctxBack=null,this.painter=null,this.unusedCount=null,this.config=null,this.dirty=null,this.elCount=null,this.clearColor=null,this.motionBlur=null,this.lastFrameAlpha=null,this.zoomable=null,this.panable=null,this.maxZoom=null,this.minZoom=null,this.ctx=null,$C.destroy.apply(this,arguments)}},{key:"initContext",value:function(){this.ctx=this.dom.getContext("2d"),1!=qE.devicePixelRatio&&this.ctx.scale(qE.devicePixelRatio,qE.devicePixelRatio)}},{key:"createBackBuffer",value:function(){this.domBack=qE.createDom(be.createUniqueID("SuperMap.Theme.back-"+this.id),"canvas",this.painter),this.ctxBack=this.domBack.getContext("2d"),1!=qE.devicePixelRatio&&this.ctxBack.scale(qE.devicePixelRatio,qE.devicePixelRatio)}},{key:"resize",value:function(e,t){this.dom.style.width=e+"px",this.dom.style.height=t+"px",this.dom.setAttribute("width",e*qE.devicePixelRatio),this.dom.setAttribute("height",t*qE.devicePixelRatio),1!=qE.devicePixelRatio&&this.ctx.scale(qE.devicePixelRatio,qE.devicePixelRatio),this.domBack&&(this.domBack.setAttribute("width",e*qE.devicePixelRatio),this.domBack.setAttribute("height",t*qE.devicePixelRatio),1!=qE.devicePixelRatio&&this.ctxBack.scale(qE.devicePixelRatio,qE.devicePixelRatio))}},{key:"clear",value:function(){var e=this.dom,t=this.ctx,n=e.width,r=e.height,i=this.clearColor,o=this.motionBlur,a=this.lastFrameAlpha;if(o&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(e,0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio)),i?(t.save(),t.fillStyle=this.config.clearColor,t.fillRect(0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio),t.restore()):t.clearRect(0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio),o){var s=this.domBack;t.save(),t.globalAlpha=a,t.drawImage(s,0,0,n/qE.devicePixelRatio,r/qE.devicePixelRatio),t.restore()}}}]),t}();function QE(e){return(QE="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function YE(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function XE(e){return(XE=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function KE(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ZE(e,t){return(ZE=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $E=function(e){function t(e,n,r){var i,o,a,s,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=this,(i=!(a=XE(t).call(this,e,n,r))||"object"!==QE(a)&&"function"!=typeof a?KE(o):a).root=e,i.storage=n,i.painter=r,i._lastX=0,i._lastY=0,i._mouseX=0,i._mouseY=0,i._findHover=null,i._domHover=null,i._findHover=(s=function(e,t,n){var r=this;if(r._draggingTarget&&r._draggingTarget.id==e.id||e.isSilent())return!1;var i=r._event;if(e.isCover(t,n)){if(e.hoverable)if(e.isHoverByRefDataID&&!0===e.isHoverByRefDataID){if(e.refDataID){var o=e.refDataID,a=null;e.refDataHoverGroup&&(a=e.refDataHoverGroup);for(var s=r.storage._shapeList,l=0,u=s.length;l<u;l++){var c=s[l];c.refDataID&&o===c.refDataID&&(a?c.refDataHoverGroup&&a===c.refDataHoverGroup&&r.storage.addHover(c):r.storage.addHover(c))}}}else r.storage.addHover(e);for(var f=e.parent;f;){if(f.clipShape&&!f.clipShape.isCover(r._mouseX,r._mouseY))return!1;f=f.parent}return r._lastHover!=e&&(r._processOutShape(i),r._processDragLeave(i),r._lastHover=e,r._processDragEnter(i)),r._processOverShape(i),r._processDragOver(i),r._hasfound=1,!0}return!1},l=KE(i),function(e,t,n){return s.call(l,e,t,n)}),i._domHover=r.getDomHover(),i.CLASS_NAME="SuperMap.LevelRenderer.Handler";var u={resize:function(e){e=e||window.event,this._lastHover=null,this._isMouseDown=0,this.dispatch(VC.EVENT.RESIZE,e)},click:function(e){e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<10&&this._dispatchAgency(t,VC.EVENT.CLICK,e),this._mousemoveHandler(e)},dblclick:function(e){e=e||window.event,e=this._zrenderEventFixed(e);var t=this._lastHover;(t&&t.clickable||!t)&&this._clickThreshold<5&&this._dispatchAgency(t,VC.EVENT.DBLCLICK,e),this._mousemoveHandler(e)},mousewheel:function(e){var t=((e=this._zrenderEventFixed(e)).wheelDelta||-e.detail)>0?1.1:1/1.1,n=this.painter.getLayers(),r=!1;for(var i in n)if("hover"!==i){var o=n[i],a=o.position;if(o.zoomable){o.__zoom=o.__zoom||1;var s=o.__zoom;s*=t,t=(s=Math.max(Math.min(o.maxZoom,s),o.minZoom))/o.__zoom,o.__zoom=s,a[0]-=(this._mouseX-a[0])*(t-1),a[1]-=(this._mouseY-a[1])*(t-1),o.scale[0]*=t,o.scale[1]*=t,o.dirty=!0,r=!0}}r&&this.painter.refresh(),this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEWHEEL,e),this._mousemoveHandler(e)},mousemove:function(e){this._clickThreshold++,e=this._zrenderEventFixed(e),this._lastX=this._mouseX,this._lastY=this._mouseY,this._mouseX=KC.Util_event.getX(e),this._mouseY=KC.Util_event.getY(e);var t=this._mouseX-this._lastX,n=this._mouseY-this._lastY;this._processDragStart(e),this._hasfound=0,this._event=e,this._iterateAndFindHover(),this._hasfound||((!this._draggingTarget||this._lastHover&&this._lastHover!=this._draggingTarget)&&(this._processOutShape(e),this._processDragLeave(e)),this._lastHover=null,this.storage.delHover(),this.painter.clearHover());var r="";if(this._draggingTarget)this.storage.drift(this._draggingTarget.id,t,n),this._draggingTarget.modSelf(),this.storage.addHover(this._draggingTarget);else if(this._isMouseDown){var i=this.painter.getLayers(),o=!1;for(var a in i)if("hover"!==a){var s=i[a];s.panable&&(r="move",s.position[0]+=t,s.position[1]+=n,o=!0,s.dirty=!0)}o&&this.painter.refresh()}this._draggingTarget||this._hasfound&&this._lastHover.draggable?r="move":this._hasfound&&this._lastHover.clickable&&(r="pointer"),this.root.style.cursor=r,this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEMOVE,e),(this._draggingTarget||this._hasfound||this.storage.hasHoverShape())&&this.painter.refreshHover()},mouseout:function(e){var t=(e=this._zrenderEventFixed(e)).toElement||e.relatedTarget;if(t!=this.root)for(;t&&9!=t.nodeType;){if(t==this.root)return void this._mousemoveHandler(e);t=t.parentNode}e.zrenderX=this._lastX,e.zrenderY=this._lastY,this.root.style.cursor="",this._isMouseDown=0,this._processOutShape(e),this._processDrop(e),this._processDragEnd(e),this.painter.refreshHover(),this.dispatch(VC.EVENT.GLOBALOUT,e)},mousedown:function(e){if(this._clickThreshold=0,2==this._lastDownButton)return this._lastDownButton=e.button,void(this._mouseDownTarget=null);this._lastMouseDownMoment=new Date,e=this._zrenderEventFixed(e),this._isMouseDown=1,this._mouseDownTarget=this._lastHover,this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEDOWN,e),this._lastDownButton=e.button},mouseup:function(e){e=this._zrenderEventFixed(e),this.root.style.cursor="",this._isMouseDown=0,this._mouseDownTarget=null,this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEUP,e),this._processDrop(e),this._processDragEnd(e)},touchstart:function(e){e=this._zrenderEventFixed(e,!0),this._lastTouchMoment=new Date,this._mobildFindFixed(e),this._mousedownHandler(e)},touchmove:function(e){e=this._zrenderEventFixed(e,!0),this._mousemoveHandler(e),this._isDragging&&KC.Util_event.stop(e)},touchend:function(e){e=this._zrenderEventFixed(e,!0),this._mouseupHandler(e);var t=new Date;t-this._lastTouchMoment<VC.EVENT.touchClickDelay&&(this._mobildFindFixed(e),this._clickHandler(e),t-this._lastClickMoment<VC.EVENT.touchClickDelay/2&&(this._dblclickHandler(e),this._lastHover&&this._lastHover.clickable&&KC.Util_event.stop(e)),this._lastClickMoment=t),this.painter.clearHover()}};function c(e,t){return function(n){return e.call(t,n)}}return function(e){var t=["resize","click","dblclick","mousewheel","mousemove","mouseout","mouseup","mousedown","touchstart","touchend","touchmove"],n=t.length;for(;n--;){var r=t[n];e["_"+r+"Handler"]=c(u[r],e)}}(KE(i)),window.addEventListener?(window.addEventListener("resize",i._resizeHandler),KC.Util_env.os.tablet||KC.Util_env.os.phone?(e.addEventListener("touchstart",i._touchstartHandler),e.addEventListener("touchmove",i._touchmoveHandler),e.addEventListener("touchend",i._touchendHandler)):(e.addEventListener("click",i._clickHandler),e.addEventListener("dblclick",i._dblclickHandler),e.addEventListener("mousewheel",i._mousewheelHandler),e.addEventListener("mousemove",i._mousemoveHandler),e.addEventListener("mousedown",i._mousedownHandler),e.addEventListener("mouseup",i._mouseupHandler)),e.addEventListener("DOMMouseScroll",i._mousewheelHandler),e.addEventListener("mouseout",i._mouseoutHandler)):(window.attachEvent("onresize",i._resizeHandler),e.attachEvent("onclick",i._clickHandler),e.ondblclick=i._dblclickHandler,e.attachEvent("onmousewheel",i._mousewheelHandler),e.attachEvent("onmousemove",i._mousemoveHandler),e.attachEvent("onmouseout",i._mouseoutHandler),e.attachEvent("onmousedown",i._mousedownHandler),e.attachEvent("onmouseup",i._mouseupHandler)),i}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ZE(e,t)}(t,PC),n=t,(r=[{key:"destroy",value:function(){this.dispose(),this._lastX=null,this._lastY=null,this._mouseX=null,this._mouseY=null,this._findHover=null,PC.prototype.destroy.apply(this,arguments)}},{key:"on",value:function(e,t){return this.bind(e,t),this}},{key:"un",value:function(e,t){return this.unbind(e,t),this}},{key:"trigger",value:function(e,t){var n=VC.EVENT;switch(e){case n.RESIZE:case n.CLICK:case n.DBLCLICK:case n.MOUSEWHEEL:case n.MOUSEMOVE:case n.MOUSEDOWN:case n.MOUSEUP:case n.MOUSEOUT:this["_"+e+"Handler"](t)}}},{key:"dispose",value:function(){var e=this.root;window.removeEventListener?(window.removeEventListener("resize",this._resizeHandler),KC.Util_env.os.tablet||KC.Util_env.os.phone?(e.removeEventListener("touchstart",this._touchstartHandler),e.removeEventListener("touchmove",this._touchmoveHandler),e.removeEventListener("touchend",this._touchendHandler)):(e.removeEventListener("click",this._clickHandler),e.removeEventListener("dblclick",this._dblclickHandler),e.removeEventListener("mousewheel",this._mousewheelHandler),e.removeEventListener("mousemove",this._mousemoveHandler),e.removeEventListener("mousedown",this._mousedownHandler),e.removeEventListener("mouseup",this._mouseupHandler)),e.removeEventListener("DOMMouseScroll",this._mousewheelHandler),e.removeEventListener("mouseout",this._mouseoutHandler)):(window.detachEvent("onresize",this._resizeHandler),e.detachEvent("onclick",this._clickHandler),e.detachEvent("dblclick",this._dblclickHandler),e.detachEvent("onmousewheel",this._mousewheelHandler),e.detachEvent("onmousemove",this._mousemoveHandler),e.detachEvent("onmouseout",this._mouseoutHandler),e.detachEvent("onmousedown",this._mousedownHandler),e.detachEvent("onmouseup",this._mouseupHandler)),this.root=null,this._domHover=null,this.storage=null,this.painter=null,this.un()}},{key:"_processDragStart",value:function(e){var t=this._lastHover;if(this._isMouseDown&&t&&t.draggable&&!this._draggingTarget&&this._mouseDownTarget==t){if(t.dragEnableTime&&new Date-this._lastMouseDownMoment<t.dragEnableTime)return;var n=t;this._draggingTarget=n,this._isDragging=1,n.invisible=!0,this.storage.mod(n.id),this._dispatchAgency(n,VC.EVENT.DRAGSTART,e),this.painter.refresh()}}},{key:"_processDragEnter",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,VC.EVENT.DRAGENTER,e,this._draggingTarget)}},{key:"_processDragOver",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,VC.EVENT.DRAGOVER,e,this._draggingTarget)}},{key:"_processDragLeave",value:function(e){this._draggingTarget&&this._dispatchAgency(this._lastHover,VC.EVENT.DRAGLEAVE,e,this._draggingTarget)}},{key:"_processDrop",value:function(e){this._draggingTarget&&(this._draggingTarget.invisible=!1,this.storage.mod(this._draggingTarget.id),this.painter.refresh(),this._dispatchAgency(this._lastHover,VC.EVENT.DROP,e,this._draggingTarget))}},{key:"_processDragEnd",value:function(e){this._draggingTarget&&(this._dispatchAgency(this._draggingTarget,VC.EVENT.DRAGEND,e),this._lastHover=null),this._isDragging=0,this._draggingTarget=null}},{key:"_processOverShape",value:function(e){this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEOVER,e)}},{key:"_processOutShape",value:function(e){this._dispatchAgency(this._lastHover,VC.EVENT.MOUSEOUT,e)}},{key:"_dispatchAgency",value:function(e,t,n,r){var i="on"+t,o={type:t,event:n,target:e,cancelBubble:!1},a=e;for(r&&(o.dragged=r);a&&(a[i]&&(o.cancelBubble=a[i](o)),a.dispatch(t,o),a=a.parent,!o.cancelBubble););e?o.cancelBubble||this.dispatch(t,o):r||this.dispatch(t,{type:t,event:n})}},{key:"_iterateAndFindHover",value:function(){for(var e,t=KC.Util_matrix.create(),n=this.storage.getShapeList(),r=[0,0],i=n.length-1;i>=0;i--){var o=n[i];if(void 0!==o.zlevel&&(e=this.painter.getLayer(o.zlevel,e),r[0]=this._mouseX,r[1]=this._mouseY,e.needTransform&&(KC.Util_matrix.invert(t,e.transform),KC.Util_vector.applyTransform(r,r,t))),this._findHover(o,r[0],r[1]))break}}},{key:"_mobildFindFixed",value:function(e){var t=[{x:10},{x:-20},{x:10,y:10},{y:-20}];this._lastHover=null,this._mouseX=e.zrenderX,this._mouseY=e.zrenderY,this._event=e,this._iterateAndFindHover();for(var n=0;!this._lastHover&&n<t.length;n++){var r=t[n];r.x&&(this._mouseX+=r.x),r.y&&(this._mouseX+=r.y),this._iterateAndFindHover()}this._lastHover&&(e.zrenderX=this._mouseX,e.zrenderY=this._mouseY)}},{key:"_zrenderEventFixed",value:function(e,t){if(e.zrenderFixed)return e;if(t){var n="touchend"!=e.type?e.targetTouches[0]:e.changedTouches[0];if(n){var r=this.root.getBoundingClientRect();e.zrenderX=n.clientX-r.left,e.zrenderY=n.clientY-r.top}}else{var i=(e=e||window.event).toElement||e.relatedTarget||e.srcElement||e.target;i&&i!=this._domHover&&(e.zrenderX=(void 0!==e.offsetX?e.offsetX:e.layerX)+i.offsetLeft,e.zrenderY=(void 0!==e.offsetY?e.offsetY:e.layerY)+i.offsetTop)}return e.zrenderFixed=1,e}},{key:"getLastHoverOne",value:function(){return this._lastHover?this._lastHover:null}}])&&YE(n.prototype,r),i&&YE(n,i),t}();function ek(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var tk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.CLASS_NAME="SuperMap.LevelRenderer.Animation.easing"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"Linear",value:function(e){return e}},{key:"QuadraticIn",value:function(e){return e*e}},{key:"QuadraticOut",value:function(e){return e*(2-e)}},{key:"QuadraticInOut",value:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},{key:"CubicIn",value:function(e){return e*e*e}},{key:"CubicOut",value:function(e){return--e*e*e+1}},{key:"CubicInOut",value:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},{key:"QuarticIn",value:function(e){return e*e*e*e}},{key:"QuarticOut",value:function(e){return 1- --e*e*e*e}},{key:"QuarticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},{key:"QuinticIn",value:function(e){return e*e*e*e*e}},{key:"QuinticOut",value:function(e){return--e*e*e*e*e+1}},{key:"QuinticInOut",value:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},{key:"SinusoidalIn",value:function(e){return 1-Math.cos(e*Math.PI/2)}},{key:"SinusoidalOut",value:function(e){return Math.sin(e*Math.PI/2)}},{key:"SinusoidalInOut",value:function(e){return.5*(1-Math.cos(Math.PI*e))}},{key:"ExponentialIn",value:function(e){return 0===e?0:Math.pow(1024,e-1)}},{key:"ExponentialOut",value:function(e){return 1===e?1:1-Math.pow(2,-10*e)}},{key:"ExponentialInOut",value:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},{key:"CircularIn",value:function(e){return 1-Math.sqrt(1-e*e)}},{key:"CircularOut",value:function(e){return Math.sqrt(1- --e*e)}},{key:"CircularInOut",value:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},{key:"ElasticIn",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4))}},{key:"ElasticOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/.4)+1)}},{key:"ElasticInOut",value:function(e){var t,n=.1;return 0===e?0:1===e?1:(n<1?(n=1,t=.1):t=.4*Math.asin(1/n)/(2*Math.PI),(e*=2)<1?n*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/.4)*.5+1)}},{key:"BackIn",value:function(e){var t=1.70158;return e*e*((t+1)*e-t)}},{key:"BackOut",value:function(e){var t=1.70158;return--e*e*((t+1)*e+t)+1}},{key:"BackInOut",value:function(e){var t=2.5949095;return(e*=2)<1?e*e*((t+1)*e-t)*.5:.5*((e-=2)*e*((t+1)*e+t)+2)}},{key:"BounceIn",value:function(e){return 1-this.BounceOut(1-e)}},{key:"BounceOut",value:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}},{key:"BounceInOut",value:function(e){return e<.5?.5*this.BounceIn(2*e):.5*this.BounceOut(2*e-1)+.5}}])&&ek(t.prototype,n),r&&ek(t,r),e}();function nk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._targetPool=t.target||{},this._targetPool instanceof Array||(this._targetPool=[this._targetPool]),this._life=t.life||1e3,this._delay=t.delay||0,this._startTime=(new Date).getTime()+this._delay,this._endTime=this._startTime+1e3*this._life,this.loop=void 0!==t.loop&&t.loop,this.gap=t.gap||0,this.easing=t.easing||"Linear",this.onframe=t.onframe,this.ondestroy=t.ondestroy,this.onrestart=t.onrestart,this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Clip"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){}},{key:"step",value:function(e){var t=new tk,n=(e-this._startTime)/this._life;if(!(n<0)){n=Math.min(n,1);var r="string"==typeof this.easing?t[this.easing]:this.easing,i="function"==typeof r?r(n):n;return this.fire("frame",i),1==n?this.loop?(this.restart(),"restart"):(this._needsRemove=!0,"destroy"):null}}},{key:"restart",value:function(){var e=((new Date).getTime()-this._startTime)%this._life;this._startTime=(new Date).getTime()-e+this.gap}},{key:"fire",value:function(e,t){for(var n=0,r=this._targetPool.length;n<r;n++)this["on"+e]&&this["on"+e](this._targetPool[n],t)}}])&&nk(t.prototype,n),r&&nk(t,r),e}();function ik(e){return(ik="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ok(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ak(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sk(e,t,n){return t&&ak(e.prototype,t),n&&ak(e,n),e}function lk(e){return(lk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function uk(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ck(e,t){return(ck=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var fk=function(e){function t(e){var n,r,i;return ok(this,t),r=this,n=!(i=lk(t).call(this,e))||"object"!==ik(i)&&"function"!=typeof i?uk(r):i,e=e||{},n.stage={},n.onframe=function(){},n._clips=[],n._running=!1,n._time=0,be.extend(uk(n),e),n.CLASS_NAME="SuperMap.LevelRenderer.Animation",n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ck(e,t)}(t,PC),sk(t,[{key:"add",value:function(e){this._clips.push(e)}},{key:"remove",value:function(e){var t=(new ax).indexOf(this._clips,e);t>=0&&this._clips.splice(t,1)}},{key:"_update",value:function(){for(var e=(new Date).getTime(),t=e-this._time,n=this._clips,r=n.length,i=[],o=[],a=0;a<r;a++){var s=n[a],l=s.step(e);l&&(i.push(l),o.push(s))}this.stage.update&&this.stage.update();for(var u=0;u<r;)n[u]._needsRemove?(n[u]=n[r-1],n.pop(),r--):u++;r=i.length;for(var c=0;c<r;c++)o[c].fire(i[c]);this._time=e,this.onframe(t),this.dispatch("frame",t)}},{key:"start",value:function(){var e=window.requestAnimationFrame||window.msRequestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(e){setTimeout(e,16)},t=this;this._running=!0,this._time=(new Date).getTime(),e(function n(){t._running&&(t._update(),e(n))})}},{key:"stop",value:function(){this._running=!1}},{key:"clear",value:function(){this._clips=[]}},{key:"animate",value:function(e,t){var n=new hk(e,(t=t||{}).loop,t.getter,t.setter);return n.animation=this,n}}],[{key:"_interpolateNumber",value:function(e,t,n){return(t-e)*n+e}},{key:"_interpolateArray",value:function(e,n,r,i,o){var a=e.length;if(1==o)for(var s=0;s<a;s++)i[s]=t._interpolateNumber(e[s],n[s],r);else for(var l=e[0].length,u=0;u<a;u++)for(var c=0;c<l;c++)i[u][c]=t._interpolateNumber(e[u][c],n[u][c],r)}},{key:"_isArrayLike",value:function(e){switch(ik(e)){case"undefined":case"string":return!1}return void 0!==e.length}},{key:"_catmullRomInterpolateArray",value:function(e,n,r,i,o,a,s,l,u){var c=e.length;if(1==u)for(var f=0;f<c;f++)l[f]=t._catmullRomInterpolate(e[f],n[f],r[f],i[f],o,a,s);else for(var h=e[0].length,p=0;p<c;p++)for(var y=0;y<h;y++)l[p][y]=t._catmullRomInterpolate(e[p][y],n[p][y],r[p][y],i[p][y],o,a,s)}},{key:"_catmullRomInterpolate",value:function(e,t,n,r,i,o,a){var s=.5*(n-e),l=.5*(r-t);return(2*(t-n)+s+l)*a+(-3*(t-n)-2*s-l)*o+s*i+t}},{key:"_cloneValue",value:function(e){var n=Array.prototype.slice;if(t._isArrayLike(e)){var r=e.length;if(t._isArrayLike(e[0])){for(var i=[],o=0;o<r;o++)i.push(n.call(e[o]));return i}return n.call(e)}return e}},{key:"rgba2String",value:function(e){return e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.floor(e[2]),"rgba("+e.join(",")+")"}}]),t}(),hk=function(){function e(t,n,r,i){ok(this,e),this._tracks={},this._target=t,this._loop=n||!1,this._getter=r||function(e,t){return e[t]},this._setter=i||function(e,t,n){e[t]=n},this._clipCount=0,this._delay=0,this._doneList=[],this._onframeList=[],this._clipList=[],this.CLASS_NAME="SuperMap.LevelRenderer.Animation.Animator"}return sk(e,[{key:"when",value:function(e,t){for(var n in t)this._tracks[n]||(this._tracks[n]=[],0!==e&&this._tracks[n].push({time:0,value:fk._cloneValue(this._getter(this._target,n))})),this._tracks[n].push({time:parseInt(e,10),value:t[n]});return this}},{key:"during",value:function(e){return this._onframeList.push(e),this}},{key:"start",value:function(e){var t=this,n=this._setter,r=this._getter,i=t._onframeList.length,o="spline"===e,a=function(){if(t._clipCount--,0===t._clipCount){t._tracks={};for(var e=t._doneList.length,n=0;n<e;n++)t._doneList[n].call(t)}},s=function(s,l){var u=s.length;if(u){var c=s[0].value,f=fk._isArrayLike(c),h=!1,p=f&&fk._isArrayLike(c[0])?2:1;s.sort(function(e,t){return e.time-t.time});for(var y=s[u-1].time,d=[],m=[],v=0;v<u;v++){d.push(s[v].time/y);var g=s[v].value;"string"==typeof g&&(0===(g=KC.Util_color.toArray(g)).length&&(g[0]=g[1]=g[2]=0,g[3]=1),h=!0),m.push(g)}var b,S,_,w,O,x,C,T=0,P=0;if(h)var E=[0,0,0,0];var k=new rk({target:t._target,life:y,loop:t._loop,delay:t._delay,onframe:function(e,a){if(a<P){for(b=Math.min(T+1,u-1),S=b;S>=0&&!(d[S]<=a);S--);S=Math.min(S,u-2)}else{for(S=T;S<u&&!(d[S]>a);S++);S=Math.min(S-1,u-2)}T=S,P=a;var s=d[S+1]-d[S];if(0!==s){var c,y;for(_=(a-d[S])/s,o?(O=m[S],w=m[0===S?S:S-1],x=m[S>u-2?u-1:S+1],C=m[S>u-3?u-1:S+2],f?fk._catmullRomInterpolateArray(w,O,x,C,_,_*_,_*_*_,r(e,l),p):(c=h?fk.rgba2String(E):fk._catmullRomInterpolate(w,O,x,C,_,_*_,_*_*_),n(e,l,c))):f?fk._interpolateArray(m[S],m[S+1],_,r(e,l),p):(h?(fk._interpolateArray(m[S],m[S+1],_,E,1),y=fk.rgba2String(E)):y=fk._interpolateNumber(m[S],m[S+1],_),n(e,l,y)),S=0;S<i;S++)t._onframeList[S](e,a)}},ondestroy:a});e&&"spline"!==e&&(k.easing=e),t._clipList.push(k),t._clipCount++,t.animation.add(k)}};for(var l in this._tracks)s(this._tracks[l],l);return this}},{key:"stop",value:function(){for(var e=0;e<this._clipList.length;e++){var t=this._clipList[e];this.animation.remove(t)}this._clipList=[]}},{key:"delay",value:function(e){return this._delay=e,this}},{key:"done",value:function(e){return e&&this._doneList.push(e),this}}]),e}();function pk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var yk=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.id=t,this.storage=new FE,this.painter=new qE(n,this.storage),this.handler=new $E(n,this.storage,this.painter),this.animatingElements=[],this.animation=new fk({stage:{update:e.getFrameCallback(this)}}),this._needsRefreshNextFrame=!1,this.animation.start(),this.CLASS_NAME="SuperMap.LevelRenderer.Render"}var t,n,r;return t=e,r=[{key:"getFrameCallback",value:function(e){return function(){var t=e.animatingElements;if(t instanceof Array){for(var n=0,r=t.length;n<r;n++)e.storage.mod(t[n].id);(t.length||e._needsRefreshNextFrame)&&e.refresh()}}}}],(n=[{key:"destroy",value:function(){this.id=null,this.storage=null,this.painter=null,this.handler=null,this.animatingElements=null,this.animation=null,this._needsRefreshNextFrame=null}},{key:"getId",value:function(){return this.id}},{key:"addShape",value:function(e){return this.storage.addRoot(e),this}},{key:"addGroup",value:function(e){return this.storage.addRoot(e),this}},{key:"delShape",value:function(e){return this.storage.delRoot(e),this}},{key:"delGroup",value:function(e){return this.storage.delRoot(e),this}},{key:"modShape",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modGroup",value:function(e,t){return this.storage.mod(e,t),this}},{key:"modLayer",value:function(e,t){return this.painter.modLayer(e,t),this}},{key:"addHoverShape",value:function(e){return this.storage.addHover(e),this}},{key:"render",value:function(e){return this.painter.render(e),this._needsRefreshNextFrame=!1,this}},{key:"refresh",value:function(e){return this.painter.refresh(e),this._needsRefreshNextFrame=!1,this}},{key:"refreshNextFrame",value:function(){return this._needsRefreshNextFrame=!0,this}},{key:"refreshHover",value:function(e){return this.painter.refreshHover(e),this}},{key:"refreshShapes",value:function(e,t){return this.painter.refreshShapes(e,t),this}},{key:"resize",value:function(){return this.painter.resize(),this}},{key:"animate",value:function(e,t,n){if("string"==typeof e&&(e=this.storage.get(e)),e){var r;if(t){for(var i=t.split("."),o=e,a=0,s=i.length;a<s;a++)o&&(o=o[i[a]]);o&&(r=o)}else r=e;if(!r)return void KC.Util_log('Property "'+t+'" is not existed in element '+e.id);var l=this.animatingElements;return void 0===e.__aniCount&&(e.__aniCount=0),0===e.__aniCount&&l.push(e),e.__aniCount++,this.animation.animate(r,{loop:n}).done(function(){if(e.__aniCount--,0===e.__aniCount){var t=(new ax).indexOf(l,e);l.splice(t,1)}})}KC.Util_log("Element not existed")}},{key:"clearAnimation",value:function(){this.animation.clear()}},{key:"getWidth",value:function(){return this.painter.getWidth()}},{key:"getHeight",value:function(){return this.painter.getHeight()}},{key:"toDataURL",value:function(e,t,n){return this.painter.toDataURL(e,t,n)}},{key:"shapeToImage",value:function(e,t,n){var r=be.createUniqueID("SuperMap.LevelRenderer.ToImage_");return this.painter.shapeToImage(r,e,t,n)}},{key:"on",value:function(e,t){return this.handler.on(e,t),this}},{key:"un",value:function(e,t){return this.handler.un(e,t),this}},{key:"trigger",value:function(e,t){return this.handler.trigger(e,t),this.handler.dispatch(e,t),this}},{key:"clear",value:function(){return this.storage.delRoot(),this.painter.clear(),this}},{key:"dispose",value:function(){this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=null,this.animatingElements=null,this.storage=null,this.painter=null,this.handler=null}},{key:"updateHoverShapes",value:function(e){return this.painter.updateHoverLayer(e),this}},{key:"getAllShapes",value:function(){return this.storage._shapeList}},{key:"clearAll",value:function(){return this.clear(),this.painter.clearHover(),this}},{key:"getHoverOne",value:function(){return this.handler.getLastHoverOne()}}])&&pk(t.prototype,n),r&&pk(t,r),e}();function dk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var mk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e._instances={},e.Tool={},this.version="2.0.4",this.CLASS_NAME="SuperMap.LevelRenderer"}var t,n,r;return t=e,(n=[{key:"destroy",value:function(){this.dispose(),this.version=null}},{key:"init",value:function(t){var n=new yk(be.createUniqueID("LRenderer_"),t);return e._instances[n.id]=n,n}},{key:"dispose",value:function(t){if(t)t.dispose(),this.delInstance(t.id);else{for(var n in e._instances)e._instances[n].dispose();e._instances={}}return this}},{key:"getInstance",value:function(t){return e._instances[t]}},{key:"delInstance",value:function(t){return delete e._instances[t],this}}])&&dk(t.prototype,n),r&&dk(t,r),e}();r.LevelRenderer=mk;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vk={EXCEL:"EXCEL",CSV:"CSV",ISERVER:"ISERVER",GEOJSON:"GEOJSON",JSON:"JSON"},gk={fileMaxSize:10485760};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function bk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Sk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.FileTypes=vk,this.FileConfig=gk,this.loadFileObject=t&&t.loadFileObject?t.loadFileObject:[]}var t,n,r;return t=e,(n=[{key:"set",value:function(e,t){this[e]=t}},{key:"get",value:function(e){return this[e]}}])&&bk(t.prototype,n),r&&bk(t,r),e}();function _k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wk=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._initView()}var t,n,r;return t=e,(n=[{key:"_initView",value:function(){var e=document.createElement("div");e.hidden=!0,e.setAttribute("class","component-messageboxcontainer component-border-bottom-orange");var t=document.createElement("div");t.setAttribute("class","icon"),this.icon=document.createElement("span"),this.icon.setAttribute("class","supermapol-icons-message-warning"),t.appendChild(this.icon),e.appendChild(t);var n=document.createElement("div");n.setAttribute("class","component-messagebox"),n.innerHTML="",e.appendChild(n),this.messageBox=n;var r=document.createElement("div");r.setAttribute("class","component-messagebox__cancelbtncontainer");var i=document.createElement("button");i.setAttribute("class","component-messagebox__cancelBtn"),i.innerHTML="x",i.onclick=this.closeView.bind(this),r.appendChild(i),e.appendChild(r),this.messageBoxContainer=e,document.body.appendChild(this.messageBoxContainer)}},{key:"closeView",value:function(){this.messageBoxContainer.hidden=!0}},{key:"showView",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"warring";"success"===t?(this.icon.setAttribute("class","supermapol-icons-message-success"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-green")):"failure"===t?(this.icon.setAttribute("class","supermapol-icons-message-failure"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-red")):"warring"===t&&(this.icon.setAttribute("class","supermapol-icons-message-warning"),this.messageBoxContainer.setAttribute("class","component-messageboxcontainer component-border-bottom-orange")),this.messageBox.innerHTML=e,this.messageBoxContainer.hidden=!1}}])&&_k(t.prototype,n),r&&_k(t,r),e}();r.Components.MessageBox=wk;var Ok=n(1),xk=n.n(Ok),Ck={code:null,defaultCode:"en-US",getCode:function(){return r.Lang.code||r.Lang.setCode(),r.Lang.code},setCode:function(){var e=this.getLanguageFromCookie();e?r.Lang.code=e:(e=r.Lang.defaultCode,0===(e="Netscape"===navigator.appName?navigator.language:navigator.browserLanguage).indexOf("zh")&&(e="zh-CN"),0===e.indexOf("en")&&(e="en-US"),r.Lang.code=e)},getLanguageFromCookie:function(){for(var e=document.cookie.split(";"),t=0;t<e.length;t++){for(var n=e[t];" "===n.charAt(0);)n=n.substring(1);if(-1!==n.indexOf("language="))return n.substring("language=".length,n.length)}return""},i18n:function(e){var t=r.Lang[r.Lang.getCode()],n=t&&t[e];return n||(n=e),n}};r.Lang=Ck,r.i18n=r.Lang.i18n;var Tk=n(5),Pk=n.n(Tk),Ek={rABS:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsBinaryString,rABF:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsArrayBuffer,rAT:"undefined"!=typeof FileReader&&FileReader.prototype&&FileReader.prototype.readAsText,readFile:function(e,t,n,r,i){vk.JSON===e||vk.GEOJSON===e?this.readTextFile(t,n,r,i):vk.EXCEL!==e&&vk.CSV!==e||this.readXLSXFile(t,n,r,i)},readTextFile:function(e,t,n,r){var i=new FileReader;i.onloadend=function(e){t&&t.call(r,e.target.result)},i.onerror=function(e){n&&n.call(r,e)},this.rAT?i.readAsText(e.file,"utf-8"):i.readAsBinaryString(e.file)},readXLSXFile:function(e,t,n,r){var i=new FileReader;i.onloadend=function(e){var i=new Uint8Array(e.target.result),o=Pk.a.read(i,{type:"array"});try{if(o&&o.SheetNames&&o.SheetNames.length>0){var a=o.SheetNames[0],s=Pk.a.utils.sheet_to_csv(o.Sheets[a]);t&&t.call(r,s)}}catch(e){n&&n.call(r,e)}},i.onerror=function(e){n&&n.call(r,e)},this.rABF&&i.readAsArrayBuffer(e.file)},processDataToGeoJson:function(e,t,n,r,i){var o=null;if("EXCEL"===e||"CSV"===e)o=this.processExcelDataToGeoJson(t),n&&n.call(i,o);else if("JSON"===e||"GEOJSON"===e){var a=t;"string"==typeof a&&(a=JSON.parse(a)),"ISERVER"===a.type?o=a.data.recordsets[0].features:"FeatureCollection"===a.type?o=a:r&&r.call(i,Ck.i18n("msg_dataInWrongGeoJSONFormat")),n&&n.call(i,o)}else r&&r.call(i,Ck.i18n("msg_dataInWrongFormat"))},processExcelDataToGeoJson:function(e){for(var t=this.string2Csv(e),n=t.colTitles,r=-1,i=-1,o=0,a=n.length;o<a;o++)this.isXField(n[o])&&(r=o),this.isYField(n[o])&&(i=o);for(var s=[],l=0,u=t.rows.length;l<u;l++){var c=t.rows[l],f=Number(c[r]),h=Number(c[i]),p={};for(var y in t.colTitles){p[t.colTitles[y]]=t.rows[l][y]}var d={type:"Feature",geometry:{type:"Point",coordinates:[f,h]},properties:p};s.push(d)}return s},isXField:function(e){var t=e.toLowerCase();return"x"===t||"smx"===t||"jd"===t||"经度"===t||"东经"===t||"longitude"===t||"lot"===t||"lon"===t||"lng"===t||"x坐标"===t},isYField:function(e){var t=e.toLowerCase();return"y"===t||"smy"===t||"wd"===t||"纬度"===t||"北纬"===t||"latitude"===t||"lat"===t||"y坐标"===t},string2Csv:function(e,t){var n=e.split("\n"),r={};r.colTitles=t?[]:n[0].split(","),r.rows=[];for(var i=t?0:1;i<n.length;i++)n[i]&&r.rows.push(n[i].split(","));return r}};function kk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components.FileReaderUtil=Ek;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Mk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t,this.EVENT_TYPES=["getdatafailed"],this.events=new Jt(this,null,this.EVENT_TYPES)}var t,n,o;return t=e,(n=[{key:"getDatasetInfo",value:function(e){var t=this.datasets.url,n=this;nr.get(t).then(function(e){return e.json()}).then(function(t){if(t.datasetInfo){var r=t.datasetInfo;n.datasetsInfo={dataSourceName:r.dataSourceName,datasetName:r.name,mapName:t.name},e({result:n.datasetsInfo})}}).catch(function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDataFeatures",value:function(e,t){var n,i,o=e.result,a={name:o.datasetName+"@"+o.dataSourceName};Object.assign(a,this.datasets.queryInfo),n=new r.FilterParameter(a),i=new r.GetFeaturesBySQLParameters({queryParameter:n,datasetNames:[o.dataSourceName+":"+o.datasetName],fromIndex:0,toIndex:1e5}),new r.GetFeaturesBySQLService(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(i)}},{key:"getLayerFeatures",value:function(e,t){var n,i,o=e.result,a={name:o.mapName};Object.assign(a,this.datasets.queryInfo),n=new r.FilterParameter(a),i=new r.QueryBySQLParameters({queryParams:[n],expectCount:1e5}),new r.QueryBySQLService(o.dataUrl,{eventListeners:{processCompleted:t,processFailed:function(){}}}).processAsync(i)}},{key:"getDataInfoByIptl",value:function(e){this.getServiceInfo(this.datasets.url,e)}},{key:"getServiceInfo",value:function(e,t){var n=this;nr.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(r){var i;!1!==r.succeed?r.dataItemServices&&r.dataItemServices.length>0?(r.dataItemServices.forEach(function(r){if("RESTDATA"===r.serviceType&&"PUBLISHED"===r.serviceStatus)i=r;else{if("RESTMAP"!==r.serviceType||"PUBLISHED"!==r.serviceStatus)return void n.getDatafromContent(e,t);i=r}}),i&&n.getDatafromRest(i.serviceType,i.address,t)):n.getDatafromContent(e,t):n._fireFailedEvent(r)}).catch(function(e){console.log(e),n._fireFailedEvent(e)})}},{key:"getDatafromContent",value:function(e,t){var n=this,r={result:{}},i=this;e+="/content.json?pageSize=9999999&currentPage=1",nr.get(e,null,{withCredentials:this.datasets.withCredentials}).then(function(e){return e.json()}).then(function(e){if(!1!==e.succeed){if(e.type){if("JSON"===e.type||"GEOJSON"===e.type){if(e.content=JSON.parse(e.content.trim()),!e.content.features)return void console.log(Ck.i18n("msg_jsonResolveFiled"));var o=n._formatGeoJSON(e.content);r.result.features={type:e.content.type,features:o}}else if("EXCEL"===e.type||"CSV"===e.type){var a=n._excelData2Feature(e.content);r.result.features={type:"FeatureCollection",features:a}}t(r,"content")}}else i._fireFailedEvent(e)},this).catch(function(e){console.log(e),i._fireFailedEvent(e)})}},{key:"getDatafromRest",value:function(e,t,n){var r=this,i=this.datasets.withCredentials;if("RESTDATA"===e){var o,a,s="".concat(t,"/data/datasources");nr.get(s,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){o=e.datasourceNames[0],s="".concat(t,"/data/datasources/").concat(o,"/datasets"),nr.get(s,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){return a=e.datasetNames[0],r.getDatafromRestData("".concat(t,"/data"),[o+":"+a],n),[o+":"+a]}).catch(function(e){r._fireFailedEvent(e)})}).catch(function(e){r._fireFailedEvent(e)})}else{var l,u,c,f="".concat(t,"/maps");nr.get(f,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){l=e[0].name,c=e[0].path,f=f="".concat(t,"/maps/").concat(l,"/layers"),nr.get(f,null,{withCredentials:i}).then(function(e){return e.json()}).then(function(e){return u=e[0].subLayers.layers[0].caption,r.getDatafromRestMap(u,c,n),u}).catch(function(e){r._fireFailedEvent(e)})}).catch(function(e){r._fireFailedEvent(e)})}}},{key:"getDatafromRestData",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"SmID>0",this._getFeatureBySQL(e,t,this.datasets.queryInfo,function(e){n(e,"RESTDATA")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"getDatafromRestMap",value:function(e,t,n){var r=this;this.datasets.queryInfo.attributeFilter=this.datasets.queryInfo.attributeFilter||"smid=1",this._queryFeatureBySQL(t,e,this.datasets.queryInfo,null,null,function(e){n(e,"RESTMAP")},function(e){console.log(e),r._fireFailedEvent(e)})}},{key:"_getFeatureBySQL",value:function(e,t,n,r,i){var o,a,s={name:t.join().replace(":","@")};Object.assign(s,n),o=new po(s),a=new pp({queryParameter:o,datasetNames:t,fromIndex:0,toIndex:1e5,returnContent:!0}),new Sp(e,{eventListeners:{processCompleted:function(e){r&&r(e)},processFailed:function(e){i&&i(e)}}}).processAsync(a)}},{key:"_queryFeatureBySQL",value:function(e,t,n,r,i,o,a,l,u,c){var f,h,p={name:t};Object.assign(p,n),f=new po(p),r&&(f.fields=r);var y={queryParams:[f]};c&&(y.queryOption=s.ATTRIBUTE),l&&(y.startRecord=l),u&&(y.expectCount=u),i&&(y.prjCoordSys={epsgCode:i}),h=new ub(y),this._queryBySQL(e,h,function(e){"processCompleted"===e.type?o(e):a(e)})}},{key:"_queryBySQL",value:function(e,t,n,r){new mb(e,{eventListeners:{scope:this,processCompleted:n,processFailed:n},format:this._processFormat(r)}).processAsync(t)}},{key:"_processFormat",value:function(e){return e||i.GEOJSON}},{key:"_formatGeoJSON",value:function(e){var t=e.features;return t.forEach(function(e,t){e.properties.index=t}),t}},{key:"_excelData2Feature",value:function(e){for(var t=e.colTitles,n=-1,r=-1,i=0,o=t.length;i<o;i++)Ek.isXField(t[i])&&(n=i),Ek.isYField(t[i])&&(r=i);for(var a=[],s=0,l=e.rows.length;s<l;s++){var u=e.rows[s],c=Number(u[n]),f=Number(u[r]),h={};for(var p in e.colTitles){h[e.colTitles[p]]=e.rows[s][p]}h.index=s+"";var y={type:"Feature",geometry:{type:"Point",coordinates:[c,f]},properties:h};a.push(y)}return a}},{key:"_fireFailedEvent",value:function(e){var t=e?{error:e,message:Ck.i18n("msg_getdatafailed")}:{message:Ck.i18n("msg_getdatafailed")};this.events.triggerEvent("getdatafailed",t)}}])&&kk(t.prototype,n),o&&kk(t,o),e}();function Ak(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Lk=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.datasets=t.datasets,this.xField=[],this.yField=[],this.grid={top:"50px",bottom:"50px",left:"50px",right:"60px"},this.chartType=t.type||"bar",this._initXYField(t.chartOptions),this.EVENT_TYPES=["getdatafailed"],this.events=new Jt(this,null,this.EVENT_TYPES)}var t,n,r;return t=e,(n=[{key:"_initXYField",value:function(e){var t=this;e&&e.length>0&&e.forEach(function(e){e.xAxis&&t.xField.push({field:e.xAxis.field,name:e.xAxis.name}),e.yAxis&&t.yField.push({field:e.yAxis.field,name:e.yAxis.name})})}},{key:"getDatasetInfo",value:function(e){var t=this;this.createChart=e,this.datasets&&this._checkUrl(this.datasets.url)&&(this.chartModel=new Mk(this.datasets),"iServer"===this.datasets.type?this.chartModel.getDatasetInfo(this._getDatasetInfoSuccess.bind(this)):"iPortal"===this.datasets.type&&this.chartModel.getDataInfoByIptl(this._getDataInfoSuccess.bind(this)),this.chartModel.events.on({getdatafailed:function(e){t.events.triggerEvent("getdatafailed",e)}}))}},{key:"_getDatasetInfoSuccess",value:function(e){var t=this.datasets.url,n=t.indexOf("rest");if(n>0){var r=t.indexOf("/",n+5),i=t.substring(n+5,r),o=t.substring(0,n+4)+"/data";if("maps"===i){var a=t.indexOf("/",r+1),s=t.substring(r+1,a);o=t.substring(0,n+4)+"/maps/"+s,e.result.dataUrl=o,this._getLayerFeatures(e)}else"data"===i&&(e.result.dataUrl=o,this._getDataFeatures(e))}}},{key:"_getDataInfoSuccess",value:function(e,t){"RESTMAP"===t?this._getChartDatasFromLayer(e):this._getChartDatas(e)}},{key:"_getDataFeatures",value:function(e){this.chartModel.getDataFeatures(e,this._getChartDatas.bind(this))}},{key:"_getLayerFeatures",value:function(e){this.chartModel.getLayerFeatures(e,this._getChartDatasFromLayer.bind(this))}},{key:"_getChartDatas",value:function(e){if(e){this.features=e.result.features;var t=this.features.features,n={};if(t.length){var r=t[0],i=[],o=[];for(var a in r.properties)i.push(a),o.push(this._getDataType(r.properties[a]));for(var s in n={features:t,fieldCaptions:i,fieldTypes:o,fieldValues:[]},o){var l=[];for(var u in t){var c=t[u],f=n.fieldCaptions[s],h=c.properties[f];l.push(h)}n.fieldValues.push(l)}this.createChart(n)}}}},{key:"_getChartDatasFromLayer",value:function(e){if(e.result.recordsets){var t=e.result.recordsets[0],n=t.features.features;this.features=t.features;var r={};if(n.length){for(var i in(r={features:t.features,fieldCaptions:t.fieldCaptions,fieldTypes:t.fieldTypes,fieldValues:[]}).fieldCaptions){var o=[];for(var a in n){var s=n[a],l=r.fieldCaptions[i],u=s.properties[l];o.push(u)}r.fieldValues.push(o)}this.createChart(r)}}}},{key:"_createChartOptions",value:function(e){return this.calculatedData=this._createChartDatas(e),this.updateChartOptions(this.chartType)}},{key:"changeType",value:function(e){if(e!==this.chartType)return this.chartType=e,this.updateChartOptions(this.chartType)}},{key:"updateData",value:function(e,t,n){this.updateChart=n,this.xField=[],this.yField=[],this._initXYField(t),e.type=e.type||"iServer",e.withCredentials=e.withCredentials||!1,this.datasets=e,this.getDatasetInfo(this._updateDataSuccess.bind(this))}},{key:"_updateDataSuccess",value:function(e){var t=this._createChartOptions(e);this.updateChart(t)}},{key:"updateChartOptions",value:function(e,t){if(this.calculatedData){var n=this.grid,r=this._createChartSeries(this.calculatedData,e),i=[];for(var o in this.calculatedData.XData)i.push({value:this.calculatedData.XData[o].fieldsData});var a={type:"category",name:this.xField[0].name||"X",data:i,nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},s={type:"value",name:this.yFieldName||"Y",data:{},nameTextStyle:{color:"#fff",fontSize:14},splitLine:{show:!1},axisLine:{lineStyle:{color:"#eee"}}},l={formatter:"{b0}: {c0}"},u="#404a59";return t&&(t.grid&&(n=t.grid),t.tooltip&&(l=t.tooltip),t.backgroundColor&&(u=t.backgroundColor)),{backgroundColor:u,grid:n,series:r,xAxis:a,yAxis:s,tooltip:l}}}},{key:"_createChartDatas",value:function(e){var t=0,n=[],r=e.fieldCaptions,i=this;r.forEach(function(e,n){i.xField[0]&&e===i.xField[0].field&&(t=n)}),this.yFieldName="",this.yField.forEach(function(e,t){0!==t&&(i.yFieldName=i.yFieldName+","),i.yFieldName=i.yFieldName+e.name,r.forEach(function(t,r){t===e.field&&n.push(r)})});var o=this._getAttrData(e,t),a=[];if(n.length>0)n.forEach(function(t){var n=[];for(var r in e.fieldValues[t])n.push({value:e.fieldValues[t][r]});a.push(n)});else{for(var s=[],l=[],u=o.length,c=0;c<u;c++){for(var f=!1,h=0,p=l.length;h<p;h++)if(o[c].fieldsData===l[h].fieldsData){s[h].value++,l[h].recordIndexs.push(c),f=!0;break}f||o[c].fieldsData&&(l.push({fieldsData:o[c].fieldsData,recordIndexs:[c]}),s.push({value:1}))}o=l,a=[s]}return{XData:o,YData:a}}},{key:"_getAttrData",value:function(e,t){0===t&&(this.xField=[{field:e.fieldCaptions[t],name:e.fieldCaptions[t]}]);for(var n=[],r=0,i=e.fieldValues[t].length;r<i;r++){var o=e.fieldValues[t][r];n.push({recordIndexs:r,fieldsData:o})}return n}},{key:"_createChartSeries",value:function(e,t){var n=[];return e.YData.forEach(function(e){var r=0,i=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){r=l.value.value,i.push({value:r})}}catch(e){a=!0,s=e}finally{try{o||null==u.return||u.return()}finally{if(a)throw s}}var c={type:t,data:i,name:"y"};n.push(c)}),n}},{key:"_isDate",value:function(e){return/((^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(10|12|0?[13578])([-\/\._])(3[01]|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(11|0?[469])([-\/\._])(30|[12][0-9]|0?[1-9])$)|(^((1[8-9]\d{2})|([2-9]\d{3}))([-\/\._])(0?2)([-\/\._])(2[0-8]|1[0-9]|0?[1-9])$)|(^([2468][048]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([3579][26]00)([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][0][48])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][2468][048])([-\/\._])(0?2)([-\/\._])(29)$)|(^([1][89][13579][26])([-\/\._])(0?2)([-\/\._])(29)$)|(^([2-9][0-9][13579][26])([-\/\._])(0?2)([-\/\._])(29)$))/gi.test(e)}},{key:"_isNumber",value:function(e){var t=Number(e);return 0===t||!isNaN(t)}},{key:"_getDataType",value:function(e){if(null!==e&&void 0!==e&&""!==e){if(this._isDate(e))return"DATE";if(this._isNumber(e))return"NUMBER"}return"STRING"}},{key:"_checkUrl",value:function(e){return!(""===e||!this._isMatchUrl(e))&&(!/^http[s]?:\/\/localhost/.test(e)&&!/^http[s]?:\/\/127.0.0.1/.test(e))}},{key:"_isMatchUrl",value:function(e){return new RegExp("(https?|http|file|ftp)://[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]").test(e)}},{key:"getStyle",value:function(){return{grid:this.grid,tooltip:this.tooltip,backgroundColor:this.backgroundColor}}},{key:"getFeatures",value:function(){return this.features}},{key:"setStyle",value:function(e){return this.updateChartOptions(this.chartType,e)}}])&&Ak(t.prototype,n),r&&Ak(t,r),e}();function jk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components.ChartViewModel=Lk;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Nk=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.domID=t,this.chartType=n.type||"bar",n.datasets.type=n.datasets.type||"iServer",n.datasets.withCredentials=n.datasets.withCredentials||!1,this.viewModel=new Lk(n),this._fillDataToView()}var t,n,r;return t=e,(n=[{key:"onAdd",value:function(e){this.addChart=e}},{key:"_fillDataToView",value:function(){var e=new wk;this.viewModel.getDatasetInfo(this._createChart.bind(this)),this.viewModel.events.on({getdatafailed:function(t){e.showView(t.message)}})}},{key:"getStyle",value:function(){return this.viewModel.getStyle()}},{key:"getFeatures",value:function(){return this.viewModel.getFeatures()}},{key:"setStyle",value:function(e){var t=this.viewModel.setStyle(e);this._updateChart(t)}},{key:"changeType",value:function(e){if(this.chartType!==e){this.chartType=e;var t=this.viewModel.changeType(e);this._updateChart(t)}}},{key:"updateData",value:function(e,t){var n=this;this.viewModel.updateData(e,t,function(e){n._updateChart(e),n.addChart&&n.addChart()})}},{key:"_createChart",value:function(e){this.echart=xk.a.init(document.getElementById(this.domID),null,{renderer:"canvas"});var t=this.viewModel._createChartOptions(e);this.echart.setOption(t),this.addChart&&this.addChart()}},{key:"_updateChart",value:function(e){this.echart&&(this.echart.clear(),this.echart.setOption(e))}}])&&jk(t.prototype,n),r&&jk(t,r),e}();function Rk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}r.Components.Chart=Nk;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Ik=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=t||{},this.id=t.id?t.id:null,this.rootContainer=null}var t,n,r;return t=e,(n=[{key:"getElement",value:function(){return this.id&&(this.rootContainer.id=this.id),this.rootContainer}},{key:"_initView",value:function(){}},{key:"showView",value:function(){this.rootContainer.hidden=!1}},{key:"closeView",value:function(){this.rootContainer.hidden=!0}}])&&Rk(t.prototype,n),r&&Rk(t,r),e}();function Dk(e){return(Dk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Bk(e,t){return!t||"object"!==Dk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Uk(e){return(Uk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Gk(e,t){return(Gk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.TemplateBase=Ik;var zk=function(e){function t(e){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=Bk(this,Uk(t).call(this,e));var r=e.title?e.title:"";return n._initView(r),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gk(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-container");var n=document.createElement("div");n.setAttribute("class","component-title");var r=document.createElement("div");r.innerHTML=e,n.appendChild(r),t.appendChild(n);var i=document.createElement("div");return i.setAttribute("class","component-content"),t.appendChild(i),this.content=i,this.rootContainer=t,t}},{key:"getContentElement",value:function(){return this.content}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&Fk(n.prototype,r),i&&Fk(n,i),t}();function Vk(e){return(Vk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Jk(e,t){return!t||"object"!==Vk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qk(e){return(qk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Wk(e,t){return(Wk=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.CommonContainer=zk;var Qk=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Jk(this,qk(t).call(this,e)))._initView(e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Wk(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=this._createElement("div","component-selecttool");e.labelName&&(this._createElement("label","component-selecttool__lable--describe",t).innerHTML=e.labelName);var n=this._createElement("div","component-selecttool--chart",t);n.setAttribute("tabindex","1");var r=this._createElement("div","component-selecttool__name",n);r.title=e.optionsArr[0],r.innerHTML=e.optionsArr[0];var i=this._createElement("div","component-selecttool__trianglebtn--chart",n),o=this._createElement("div","component-triangle-down-img",i),a=this._createElement("div","component-selecttool__content",n),s=this._createElement("div","component-selecttool__content--chart",a),l=this._createElement("div","component-selecttool__scrollarea__content",s);l.setAttribute("tabindex","1"),this.createOptions(l,e.optionsArr),this.optionClickEvent(l,r,e.optionsClickCb),this._selectClickEvent(n,a,o),this.rootContainer=t}},{key:"createOptions",value:function(e,t){for(var n in t){var r=this._createElement("div","component-selecttool__option",e);r.title=t[n],r.innerHTML=t[n]}}},{key:"_selectClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())},e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){var r=document.createElement(e||"div");return t&&(r.className=t),n&&n.appendChild(r),r}},{key:"optionClickEvent",value:function(e,t,n){for(var r=function(r){var i=e.children[r];i.onclick=function(){t.innerHTML=i.innerHTML,t.title=i.title,i.getAttribute("data-value")&&t.setAttribute("data-value",i.getAttribute("data-value")),n&&n(i)}},i=0;i<e.children.length;i++)r(i)}}])&&Hk(n.prototype,r),i&&Hk(n,i),t}();function Yk(e){return(Yk="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xk(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kk(e,t){return!t||"object"!==Yk(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zk(e){return(Zk=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $k(e,t){return($k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.Select=Qk;var eM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Kk(this,Zk(t).call(this,e)))._initView(e),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$k(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.className="component-dropdownbox--container";var n=document.createElement("div");n.setAttribute("tabindex","1"),n.className="component-dropdownbox",t.appendChild(n);var r=document.createElement("div");n.appendChild(r),this._createDropDownOption(e[0],r);var i=document.createElement("div");i.className="component-dropdownbox__triangle-btn",n.appendChild(i);var o=document.createElement("div");o.className="component-triangle-down-img",i.appendChild(o);var a={parentEle:n,dropDownContent:["component-dropdownbox__content component-dropdownbox__content--chart","dropDownContent"],scrollareaContent:"component-selecttool__scrollarea__content",optionsArr:e,triangleBtn:o,dropDownTopContainer:r};this._createDropDownBox(a),this.rootContainer=t}},{key:"_createDropDownBox",value:function(e){var t=e.parentEle,n=e.dropDownTopContainer,r=document.createElement("div");r.className=e.dropDownContent[0],t.appendChild(r);var i=document.createElement("div");i.className=e.scrollareaContent,r.appendChild(i);for(var o=e.optionsArr,a=0;a<o.length;a++)this._createDropDownOption(o[a],i);var s=e.triangleBtn;this._dropDownClickEvent(t,r,s),this._eleOnblur(t,r,s);for(var l=i.children,u=function(e){l[e].onclick=function(){n.innerHTML=l[e].outerHTML}},c=0;c<l.length;c++)u(c)}},{key:"_createDropDownOption",value:function(e,t){var n=document.createElement("div");n.className="component-dropdownbox__item";var r=e;r.dataValue&&n.setAttribute("data-value",r.dataValue),t.appendChild(n);var i=document.createElement("div");i.className="component-dropdownbox__item__img",n.appendChild(i);var o=document.createElement("div");r.icon.className&&(o.className=r.icon.className),r.icon.background&&(o.style.background=r.icon.background),i.appendChild(o);var a=document.createElement("div");a.className="component-dropdownbox__item__title",a.title=r.title,a.innerHTML=r.title,n.appendChild(a);var s=document.createElement("div");s.className="component-dropdownbox__item__remark",s.title=r.remark,s.innerHTML=r.remark,n.appendChild(s)}},{key:"_dropDownClickEvent",value:function(e,t,n){e.onclick=function(e){"block"===t.style.display?(t.style.display="none",n.className="component-triangle-down-img"):(t.style.display="block",n.className="triangle-up-img"),e.preventDefault(),e.stopPropagation()},e.onmousedown=function(e){e.target!==this&&(this.focus(),e.preventDefault(),e.stopPropagation())}}},{key:"_eleOnblur",value:function(e,t,n){e.onblur=function(){t.style.display="none",n.className="component-triangle-down-img"}}},{key:"_createElement",value:function(e,t,n){var r=document.createElement(e||"div");return t&&(r.className=t),n&&n.appendChild(r),r}}])&&Xk(n.prototype,r),i&&Xk(n,i),t}();function tM(e){return(tM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function rM(e,t){return!t||"object"!==tM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function iM(e){return(iM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function oM(e,t){return(oM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.DropDownBox=eM;var aM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},n=rM(this,iM(t).call(this,e)),e.title=e.title?e.title:"",n._initView(e.title),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oM(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-popcontainer");var n=document.createElement("div");n.setAttribute("class","component-popcontainer__header");var r=document.createElement("label");r.setAttribute("class","component-popcontainer__header__title"),r.innerHTML=e,n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","supermapol-icons-clear component-popcontainer__header__close"),i.onclick=this.closeView.bind(this),t.appendChild(i),t.appendChild(n);var o=document.createElement("div");o.setAttribute("class","component-popcontainer__content"),this.content=o,t.appendChild(o),this.rootContainer=t}},{key:"appendContent",value:function(e){this.content.appendChild(e)}}])&&nM(n.prototype,r),i&&nM(n,i),t}();function sM(e){return(sM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uM(e,t){return!t||"object"!==sM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cM(e){return(cM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function fM(e,t){return(fM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.PopContainer=aM;var hM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e.title=e.title?e.title:"属性",(n=uM(this,cM(t).call(this,e))).rootContainer.firstChild.hidden=!0,e.attributes=e.attributes?e.attributes:[],n._createAttributesTable(e.attributes),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fM(e,t)}(t,aM),n=t,(r=[{key:"_createAttributesTable",value:function(e){var t=document.createElement("table");t.setAttribute("class","component-popcontainer__content__table");var n=document.createElement("tbody"),r=!0;for(var i in e){var o=document.createElement("tr");r&&o.setAttribute("class","component-popcontainer__content__td--color");var a=document.createElement("td"),s=document.createElement("Span");s.innerHTML=i,a.appendChild(s);var l=document.createElement("td");l.innerHTML=e[i],o.appendChild(a),o.appendChild(l),n.appendChild(o),r=!r}t.appendChild(n),this.appendContent(t)}}])&&lM(n.prototype,r),i&&lM(n,i),t}();function pM(e){return(pM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dM(e,t){return!t||"object"!==pM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function mM(e){return(mM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function vM(e,t){return(vM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.AttributesPopContainer=hM;var gM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=dM(this,mM(t).call(this,e)))._initView(),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vM(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(){var e=document.createElement("div");e.setAttribute("class","component-tabpage");var t=document.createElement("ul");this.header=t;var n=document.createElement("div");n.setAttribute("class","component-tabpage__content"),this.content=n,e.appendChild(t),e.appendChild(n),this.rootContainer=e}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span");n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this);var r=e[t].content;r.index=t,r.hidden=!0,this.header.appendChild(n),this.content.appendChild(r)}this.header.firstChild.setAttribute("class","on"),this.content.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.header.children.length;e>0;e--)this.header.removeChild(this.header.children[e]),this.content.removeChild(this.content.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.header.children.length;n++)this.header.children[n].setAttribute("class",""),this.content.children[n].hidden=!0,n===t&&(this.header.children[n].setAttribute("class","on"),this.content.children[n].hidden=!1)}}])&&yM(n.prototype,r),i&&yM(n,i),t}();function bM(e){return(bM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _M(e,t){return!t||"object"!==bM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wM(e){return(wM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OM(e,t){return(OM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.IndexTabsPageContainer=gM;var xM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=_M(this,wM(t).call(this,e))).rootContainer.classList.add("component-citytabpage--noneBoxShadow"),n.config=e.config,be.isArray(n.config)?(n.header.hidden=!0,n._createCityItem("城市",n.config),n.content.style.border="none"):(n._createTabs(),n.header.onclick=function(e){for(var t=0;t<n.header.children.length;t++)n.header.children[t].setAttribute("class","");e.target.setAttribute("class","on"),n._createCityContent(e.target.innerHTML)}),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OM(e,t)}(t,gM),n=t,(r=[{key:"_createTabs",value:function(){if(be.isArray(this.config))for(var e=0;e<this.config.length;e++){var t="";for(var n in this.config[e])t+=n;var r=document.createElement("li");r.innerHTML=t,this.header.appendChild(r)}else for(var i in this.config){var o=document.createElement("li");o.innerHTML=i,this.header.appendChild(o)}this.header.firstChild.setAttribute("class","on"),this._createCityContent(this.header.firstChild.innerHTML)}},{key:"_createCityContent",value:function(e){for(var t=this.content.children.length;t>0;t--)this.content.removeChild(this.content.children[t-1]);var n=this.config[e];for(var r in n)this._createCityItem(r,n[r])}},{key:"_createCityItem",value:function(e,t){var n=document.createElement("div"),r=document.createElement("div");r.setAttribute("class","component-citytabpag__py-key"),r.innerHTML=e,n.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-citytabpag__content");for(var o=0;o<t.length;o++){var a=document.createElement("span");a.innerHTML=t[o],i.appendChild(a)}"HOT"===e&&(i.style.width="428px"),n.appendChild(i),this.content.appendChild(n)}}])&&SM(n.prototype,r),i&&SM(n,i),t}();function CM(e){return(CM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PM(e,t){return!t||"object"!==CM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function EM(e){return(EM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kM(e,t){return(kM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.CityTabsPage=xM;var MM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=PM(this,EM(t).call(this,e))).navTabsTitle=null,n.navTabsContent=null,e.tabs=e.tabs?e.tabs:[],n._initView(e.tabs),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kM(e,t)}(t,Ik),n=t,(r=[{key:"_initView",value:function(e){var t=document.createElement("div");t.setAttribute("class","component-navtabspage");var n=document.createElement("span");n.setAttribute("class","supermapol-icons-close"),n.onclick=this.closeView.bind(this),t.appendChild(n);var r=document.createElement("div");this.navTabsTitle=r,r.setAttribute("class","component-navtabspage__title"),t.appendChild(r);var i=document.createElement("div");this.navTabsContent=i,i.setAttribute("class","component-navtabspage__content"),t.appendChild(i),e.length>0&&this.appendTabs(e),this.rootContainer=t}},{key:"setTabs",value:function(e){this.removeAllTabs(),this.appendTabs(e)}},{key:"appendTabs",value:function(e){for(var t=0;t<e.length;t++){var n=document.createElement("span");n.index=t,n.appendChild(document.createTextNode(e[t].title)),n.onclick=this._changeTabsPage.bind(this);var r=e[t].content;r.index=t,r.hidden=!0,this.navTabsTitle.appendChild(n),this.navTabsContent.appendChild(r)}this.navTabsTitle.firstChild.setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.firstChild.hidden=!1}},{key:"removeTab",value:function(e){this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"removeAllTabs",value:function(){for(var e=this.navTabsTitle.children.length;e>0;e--)this.navTabsTitle.removeChild(this.navTabsTitle.children[e]),this.navTabsContent.removeChild(this.navTabsContent.children[e])}},{key:"_changeTabsPage",value:function(e){for(var t=e.target.index,n=0;n<this.navTabsTitle.children.length;n++)this.navTabsTitle.children[n].setAttribute("class",""),this.navTabsContent.children[n].hidden=!0,n===t&&(this.navTabsTitle.children[n].setAttribute("class","component-navtabspage__tabs--select"),this.navTabsContent.children[n].hidden=!1)}}])&&TM(n.prototype,r),i&&TM(n,i),t}();function AM(e){return(AM="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LM(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function jM(e,t){return!t||"object"!==AM(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function NM(e){return(NM=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function RM(e,t){return(RM=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Components.NavTabsPage=MM;var IM=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),e=e||{},(n=jM(this,NM(t).call(this,e))).currentPage=0,n.pageNumberLis=[],n.currentPageNumberLis=[],n.linkageEvent=null,e.contents=e.contents?e.contents:null,e.pageCounts=e.pageCounts?e.pageCounts:0,n._initView(e.contents,e.pageCounts),n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&RM(e,t)}(t,Ik),n=t,(r=[{key:"setLinkageEvent",value:function(e){this.linkageEvent=e}},{key:"_initView",value:function(e,t){var n=document.createElement("div");n.setAttribute("class","component-pagination");var r=document.createElement("div");r.setAttribute("class","component-pagination__content"),n.appendChild(r),this.content=r;var i=document.createElement("ul");i.setAttribute("class","component-pagination__link"),i.onclick=this._changePageEvent.bind(this),n.appendChild(i),this._createLink(i),this.link=i,e&&this.setContent(e),0!==t&&this.setPageLink(t),this.rootContainer=n}},{key:"setContent",value:function(e){this.clearContent(),this.appendContent(e)}},{key:"appendContent",value:function(e){this.content.appendChild(e)}},{key:"clearContent",value:function(){for(var e=this.content.children.length-1;e>=0;e--)this.content.removeChild(this.content.children[e])}},{key:"setPageLink",value:function(e){this.pageNumberLis=[],this.currentPageNumberLis=[],this.clearPageLink(),this._createPageLi(e),this._appendPageLink()}},{key:"_createPageLi",value:function(e){for(var t=0;t<e;t++){var n=document.createElement("li");n.innerHTML=t+1,this.pageNumberLis.push(n)}if(this.pageNumberLis[0].setAttribute("class","active"),this.currentPage=1,e<5)this.currentPageNumberLis=this.pageNumberLis;else for(var r=0;r<5;r++)this.currentPageNumberLis.push(this.pageNumberLis[r])}},{key:"_appendPageLink",value:function(){for(var e=0;e<this.currentPageNumberLis.length;e++)this.link.insertBefore(this.currentPageNumberLis[e],this.link.childNodes[this.link.children.length-2]);for(var t=0;t<this.currentPageNumberLis.length;t++)this.currentPageNumberLis[t].setAttribute("class",""),Number(this.currentPageNumberLis[t].innerHTML)===this.currentPage&&this.currentPageNumberLis[t].setAttribute("class","active");this._changeDisableState(),this.linkageEvent&&this.linkageEvent(this.currentPage)}},{key:"clearPageLink",value:function(){for(var e=this.link.children.length-3;e>1;e--)this.link.removeChild(this.link.children[e])}},{key:"_createLink",value:function(e){for(var t=0;t<4;t++){var n=document.createElement("li");n.setAttribute("class","disable");var r=document.createElement("span");n.appendChild(r),0===t?(r.id="first",r.setAttribute("class","supermapol-icons-first")):1===t?(r.id="prev",r.setAttribute("class","supermapol-icons-prev")):2===t?(r.id="next",r.setAttribute("class","supermapol-icons-next")):3===t&&(r.id="last",r.setAttribute("class","supermapol-icons-last")),e.appendChild(n)}}},{key:"_changePageEvent",value:function(e){var t=e.target;if("disable"!==t.parentElement.classList[0]){var n;if(t.id)n=t.id;else{if(!Number(t.innerHTML))return;n=Number(t.innerHTML)}this._prePageNum(n),this.clearPageLink(),this._appendPageLink()}}},{key:"_changeDisableState",value:function(){this.link.children[0].setAttribute("class",""),this.link.children[1].setAttribute("class",""),this.link.children[this.link.children.length-1].setAttribute("class",""),this.link.children[this.link.children.length-2].setAttribute("class",""),1===this.currentPage&&(this.link.children[0].setAttribute("class","disable"),this.link.children[1].setAttribute("class","disable")),this.currentPage===this.pageNumberLis.length&&(this.link.children[this.link.children.length-1].setAttribute("class","disable"),this.link.children[this.link.children.length-2].setAttribute("class","disable"))}},{key:"_prePageNum",value:function(e){var t=[];if(this.currentPage="first"===e?1:"last"===e?this.pageNumberLis.length:"prev"===e?this.currentPage-1:"next"===e?this.currentPage+1:e,this.pageNumberLis.length<=5)for(var n=0;n<this.pageNumberLis.length;n++)t.push(this.pageNumberLis[n]);else if(this.currentPage<=3)for(var r=0;r<5;r++)t.push(this.pageNumberLis[r]);else if(this.currentPage>=this.pageNumberLis.length-3)for(var i=this.pageNumberLis.length-5;i<this.pageNumberLis.length;i++)t.push(this.pageNumberLis[i]);else for(var o=this.currentPage-3;o<=this.currentPage+1;o++)t.push(this.pageNumberLis[o]);t.length>0&&(this.currentPageNumberLis=t)}}])&&LM(n.prototype,r),i&&LM(n,i),t}();r.Components.PaginationContainer=IM;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DM={getFileType:function(e){return/^.*\.(?:xls|xlsx)$/i.test(e)?vk.EXCEL:/^.*\.(?:csv)$/i.test(e)?vk.CSV:/^.*\.(?:geojson|json)$/i.test(e)?vk.GEOJSON:null}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/r.Lang["en-US"]={title_dataFlowService:"Data Flow Service",title_distributedAnalysis:"Distributed Analysis",title_clientComputing:"Client Computing",title_dataServiceQuery:"Data Service Query",title_searchCity:"Search city",title_searchLayer:" Search layer",text_input_value_inputDataFlowUrl:"Please enter the data stream service address such as: ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"Display feature information",text_subscribe:"subscribe",text_cancelSubscribe:"unsubscribe",text_densityAnalysis:"Density Analysis",text_CalculateTheValuePerUnitArea:"Calculate the value per unit area within the neighborhood shape",text_option_selectDataset:"Please select a dataset",text_label_dataset:"Dataset",text_option_simplePointDensityAnalysis:"Simple point density analysis",text_option_nuclearDensityAnalysis:"Nuclear density analysis",text_label_analyticalMethod:"Analytical method",text_option_quadrilateral:"Quadrilateral",text_option_hexagon:"hexagon",text_label_meshType:"Mesh type",text_option_notSet:"Not set",text_label_weightField:"Weight field",text_label_gridSizeInMeters:"Grid size",text_label_searchRadius:"Search radius",text_label_queryRange:"Scope of analysis",text_label_areaUnit:"Area unit",text_option_equidistantSegmentation:"Equidistant segmentation",text_option_logarithm:"Logarithm",text_option_equalCountingSegment:"Equal counting segment",text_option_squareRootSegmentation:"Square root segmentation",text_label_thematicMapSegmentationMode:"Thematic map segmentation mode",text_label_thematicMapSegmentationParameters:"Thematic map segmentation parameters",text_option_greenOrangePurpleGradient:"Green orange purple gradient",text_option_greenOrangeRedGradient:"Green orange red gradient",text_option_rainbowGradient:"Rainbow gradient",text_option_spectralGradient:"Spectral gradient",text_option_terrainGradient:"Terrain gradient",text_label_thematicMapColorGradientMode:"Thematic map color gradient mode",text_label_resultLayerName:"Result layer name",text_chooseFile:"Open File",text_isoline:"Isoline",text_extractDiscreteValue:"Extract discrete value generation curve",text_buffer:"Buffer",text_specifyTheDistance:"Specify the distance to create the surrounding area",text_label_analysisLayer:"Analysis layer",text_label_extractField:"Extract field",text_label_extractedValue:"Extracted value",text_label_distanceAttenuation:"Distance attenuation",text_label_gridSize:"gridSize",text_label_bufferRadius:"Buffer radius",text_label_defaultkilometers:"Default 10 kilometers",text_label_kilometer:"kilometer",text_label_unit:"unit",text_retainOriginal:"Retain original object field",text_mergeBuffer:"Merge buffer",text_label_color:"Color",text_label_buffer:"[Buffer]",text_label_isolines:"[Isolines]",text_label_queryRangeTips:"The default is the full range of input data. Example: -74.050, 40.650, -73.850, 40.850",text_label_queryModel:"Query mode",text_label_IDArrayOfFeatures:"ID array of features",text_label_maxFeatures:"The maximum number of features that can be returned",text_label_bufferDistance:"Buffer distance",text_label_queryRange1:"Query range",text_label_spatialQueryMode:"Spatial query mode",text_label_featureFilter:"Feature filter",text_label_geometricObject:"Geometric object",text_label_queryMode:"Query mode",text_label_searchTips:"Search for city locations or layer features",text_label_chooseSearchLayers:"Select a query layer",text_loadSearchCriteria:"Load search criteria",text_saveSearchCriteria:"Save search criteria",btn_analyze:"Analyze",btn_analyzing:"Analyzing",btn_emptyTheAnalysisLayer:"Empty the analysis layer",btn_cancelAnalysis:"Cancel",btn_query:"Query",btn_querying:"Querying",btn_emptyTheRresultLayer:"Clear all result layers","msg_dataReturnedIsEmpty.":"The request is successful and the data returned by the query is empty.",msg_dataFlowServiceHasBeenSubscribed:"The data stream service has been subscribed to.",msg_inputDataFlowUrlFirst:"Please enter the data stream service address first.",msg_datasetOrMethodUnsupport:"This dataset does not support this analysis type. Please reselect the dataset.",msg_selectDataset:"Please select a data set!",msg_setTheWeightField:"Please set the weight field!",msg_theFieldNotSupportAnalysis:"The field you currently select does not support analysis!",msg_resultIsEmpty:"The result of the analysis is empty!",msg_openFileFail:"Failed to open file!",msg_fileTypeUnsupported:"File format is not supported!",msg_fileSizeExceeded:"File size exceeded! The file size should not exceed 10M!",msg_dataInWrongGeoJSONFormat:"Wrong data format! Non standard GEOJSON format data!",msg_dataInWrongFormat:"Wrong data format! Non standard EXCEL, CSV or GEOJSON format data!",msg_searchKeywords:"Search keywords cannot be empty. Please enter your search criteria.",msg_searchGeocodeField:"Did not match the address matching service data!",msg_cityGeocodeField:"The address matching service of the current city is not configured.",msg_getFeatureField:"No related vector features found!",msg_dataflowservicesubscribed:"The data stream service has been subscribed to.",msg_subscribesucceeded:"The data stream service subscription was successful.",msg_crsunsupport:"Does not support the coordinate system of the current map",msg_tilematrixsetunsupport:"Incoming TileMatrixSet is not supported",msg_jsonResolveFiled:"JSON format parsing failure！",msg_requestContentFiled:"Failed to request data through iportal!",msg_getdatafailed:"Failed to get data!"};r.Lang["zh-CN"]={title_dataFlowService:"数据流服务",title_distributedAnalysis:"分布式分析",title_clientComputing:"客户端计算",title_dataServiceQuery:"数据服务查询",title_searchCity:"搜索城市",title_searchLayer:"搜索图层",text_input_value_inputDataFlowUrl:"请输入数据流服务地址如:ws://{serviceRoot}/{dataFlowName}/dataflow/subscribe",text_displayFeaturesInfo:"显示要素信息",text_subscribe:"订阅",text_cancelSubscribe:"取消订阅",text_densityAnalysis:"密度分析",text_CalculateTheValuePerUnitArea:"计算点指定邻域形状内的每单位面积量值",text_option_selectDataset:"请选择数据集",text_label_dataset:"数据集",text_option_simplePointDensityAnalysis:"简单点密度分析",text_option_nuclearDensityAnalysis:"核密度分析",text_label_analyticalMethod:"分析方法",text_option_quadrilateral:"四边形",text_option_hexagon:"六边形",text_label_meshType:"网格面类型",text_option_notSet:"未设置",text_label_weightField:"权重字段",text_label_gridSizeInMeters:"网格大小",text_label_searchRadius:"搜索半径",text_label_queryRange:"分析范围",text_label_areaUnit:"面积单位",text_option_equidistantSegmentation:"等距离分段",text_option_logarithm:"对数",text_option_equalCountingSegment:"等计数分段",text_option_squareRootSegmentation:"平方根分段",text_label_thematicMapSegmentationMode:"专题图分段模式",text_label_thematicMapSegmentationParameters:"专题图分段参数",text_option_greenOrangePurpleGradient:"绿橙紫渐变",text_option_greenOrangeRedGradient:"绿橙红渐变",text_option_rainbowGradient:"彩虹渐变",text_option_spectralGradient:"光谱渐变",text_option_terrainGradient:"地形渐变",text_label_thematicMapColorGradientMode:"专题图颜色渐变模式",text_label_resultLayerName:"结果图层名称",text_chooseFile:"选择文件",text_isoline:"等值线",text_extractDiscreteValue:"提取离散值生成曲线",text_buffer:"缓冲区",text_specifyTheDistance:"指定距离创建周边区域",text_label_analysisLayer:"分析图层",text_label_extractField:"提取字段",text_label_extractedValue:"提取值",text_label_distanceAttenuation:"距离衰减",text_label_gridSize:"栅格大小",text_label_bufferRadius:"缓冲半径",text_label_defaultkilometers:"默认10千米",text_option_kilometer:"千米",text_label_unit:"单位",text_retainOriginal:"保留原对象字段属性",text_mergeBuffer:"合并缓冲区",text_label_color:"颜色",text_label_buffer:"[缓冲区]",text_label_isolines:"[等值线]",text_label_queryRangeTips:"默认为输入数据的全幅范围。范例：-74.050,40.650,-73.850,40.850",text_label_IDArrayOfFeatures:"要素 ID 数组",text_label_maxFeatures:"最多可返回的要素数量",text_label_bufferDistance:"缓冲区距离",text_label_queryRange1:"查询范围",text_label_spatialQueryMode:"空间查询模式",text_label_featureFilter:"要素过滤器",text_label_geometricObject:"几何对象",text_label_queryMode:"查询模式",text_label_searchTips:"搜索城市地点或图层要素",text_label_chooseSearchLayers:"选择查询图层",text_loadSearchCriteria:"加载搜索条件",text_saveSearchCriteria:"保存搜索条件",btn_analyze:"分析",btn_analyzing:"分析中",btn_emptyTheAnalysisLayer:"清空分析图层",btn_cancelAnalysis:"取消",btn_query:"查询",btn_querying:"查询中",btn_emptyTheRresultLayer:"清除所有结果图层",msg_dataFlowServiceHasBeenSubscribed:"已订阅该数据流服务。",msg_inputDataFlowUrlFirst:"请先输入数据流服务地址。",msg_datasetOrMethodUnsupport:"该数据集不支持本分析类型，请重新选择数据集",msg_selectDataset:"请选择数据集！",msg_setTheWeightField:"请设置权重字段！",msg_theFieldNotSupportAnalysis:"您当前选择的字段不支持分析！",msg_resultIsEmpty:"分析的结果为空！",msg_dataReturnedIsEmpty:"请求成功，查询返回的数据为空。",msg_openFileFail:"打开文件失败！",msg_fileTypeUnsupported:"不支持该文件格式！",msg_fileSizeExceeded:"文件大小超限！文件大小不得超过 10M！",msg_dataInWrongGeoJSONFormat:"数据格式错误！非标准的 GEOJSON 格式数据！",msg_dataInWrongFormat:"数据格式错误！非标准的 EXCEL, CSV 或 GEOJSON 格式数据！",msg_searchKeywords:"搜索关键字不能为空，请输入搜索条件。",msg_searchGeocodeField:"未匹配到地址匹配服务数据！",msg_cityGeocodeField:"未配置当前城市的地址匹配服务。",msg_getFeatureField:"未查找到相关矢量要素！",msg_dataflowservicesubscribed:"已订阅该数据流服务。",msg_subscribesucceeded:"数据流服务订阅成功。",msg_crsunsupport:"不支持当前地图的坐标系",msg_tilematrixsetunsupport:"不支持传入的TileMatrixSet",msg_jsonResolveFiled:"json格式解析失败！",msg_requestContentFiled:"通过iportal请求数据失败！",msg_getdatafailed:"获取数据失败！"};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var FM=n(0),BM=n.n(FM);
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
BM.a.Projection={};var UM=BM.a.Class.extend({initialize:function(e){this.bounds=e},project:function(e){return new BM.a.Point(e.lng,e.lat)},unproject:function(e){return new BM.a.LatLng(e.y,e.x)}}),GM=function(e){return new UM(e)},zM=BM.a.Class.extend({includes:BM.a.CRS,initialize:function(e){e.origin&&(this.transformation=new BM.a.Transformation(1,-e.origin.x,-1,e.origin.y)),this.projection=BM.a.Projection.NonProjection(e.bounds),this.bounds=e.bounds,this.origin=e.origin,this.resolutions=e.resolutions},scale:function(e){return this.resolutions&&0!==this.resolutions.length?1/this.resolutions[e]:1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256)*Math.pow(2,e)},zoom:function(e){if(!this.resolutions||0===this.resolutions.length){var t=1/(Math.max(this.bounds.getSize().x,this.bounds.getSize().y)/256);return Math.log(e/t)/Math.LN2}for(var n=0;n<this.resolutions.length;n++)if(1/this.resolutions[n]==e)return n;return-1},distance:function(e,t){var n=t.lng-e.lng,r=t.lat-e.lat;return Math.sqrt(n*n+r*r)},infinite:!1}),VM=function(e){return new zM(e)};BM.a.Projection.NonProjection=GM,BM.a.CRS.NonEarthCRS=VM;var HM=1,JM=2,qM=4,WM=5,QM=484813681109536e-20,YM=Math.PI/2,XM=.16666666666666666,KM=.04722222222222222,ZM=.022156084656084655,$M=1e-10,eA=.017453292519943295,tA=57.29577951308232,nA=Math.PI/4,rA=2*Math.PI,iA=3.14159265359,oA={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},aA={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}},sA=/[\s_\-\/\(\)]/g;function lA(e,t){if(e[t])return e[t];for(var n,r=Object.keys(e),i=t.toLowerCase().replace(sA,""),o=-1;++o<r.length;)if((n=r[o]).toLowerCase().replace(sA,"")===i)return e[n]}var uA=function(e){var t,n,r,i={},o=e.split("+").map(function(e){return e.trim()}).filter(function(e){return e}).reduce(function(e,t){var n=t.split("=");return n.push(!0),e[n[0].toLowerCase()]=n[1],e},{}),a={proj:"projName",datum:"datumCode",rf:function(e){i.rf=parseFloat(e)},lat_0:function(e){i.lat0=e*eA},lat_1:function(e){i.lat1=e*eA},lat_2:function(e){i.lat2=e*eA},lat_ts:function(e){i.lat_ts=e*eA},lon_0:function(e){i.long0=e*eA},lon_1:function(e){i.long1=e*eA},lon_2:function(e){i.long2=e*eA},alpha:function(e){i.alpha=parseFloat(e)*eA},lonc:function(e){i.longc=e*eA},x_0:function(e){i.x0=parseFloat(e)},y_0:function(e){i.y0=parseFloat(e)},k_0:function(e){i.k0=parseFloat(e)},k:function(e){i.k0=parseFloat(e)},a:function(e){i.a=parseFloat(e)},b:function(e){i.b=parseFloat(e)},r_a:function(){i.R_A=!0},zone:function(e){i.zone=parseInt(e,10)},south:function(){i.utmSouth=!0},towgs84:function(e){i.datum_params=e.split(",").map(function(e){return parseFloat(e)})},to_meter:function(e){i.to_meter=parseFloat(e)},units:function(e){i.units=e;var t=lA(aA,e);t&&(i.to_meter=t.to_meter)},from_greenwich:function(e){i.from_greenwich=e*eA},pm:function(e){var t=lA(oA,e);i.from_greenwich=(t||parseFloat(e))*eA},nadgrids:function(e){"@null"===e?i.datumCode="none":i.nadgrids=e},axis:function(e){3===e.length&&-1!=="ewnsud".indexOf(e.substr(0,1))&&-1!=="ewnsud".indexOf(e.substr(1,1))&&-1!=="ewnsud".indexOf(e.substr(2,1))&&(i.axis=e)}};for(t in o)n=o[t],t in a?"function"==typeof(r=a[t])?r(n):i[r]=n:i[t]=n;return"string"==typeof i.datumCode&&"WGS84"!==i.datumCode&&(i.datumCode=i.datumCode.toLowerCase()),i},cA=function(e){return new vA(e).output()},fA=1,hA=/\s/,pA=/[A-Za-z]/,yA=/[A-Za-z84]/,dA=/[,\]]/,mA=/[\d\.E\-\+]/;function vA(e){if("string"!=typeof e)throw new Error("not a string");this.text=e.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=fA}function gA(e,t,n){Array.isArray(t)&&(n.unshift(t),t=null);var r=t?{}:e,i=n.reduce(function(e,t){return bA(t,e),e},r);t&&(e[t]=i)}function bA(e,t){if(Array.isArray(e)){var n,r=e.shift();if("PARAMETER"===r&&(r=e.shift()),1===e.length)return Array.isArray(e[0])?(t[r]={},void bA(e[0],t[r])):void(t[r]=e[0]);if(e.length)if("TOWGS84"!==r)switch(Array.isArray(r)||(t[r]={}),r){case"UNIT":case"PRIMEM":case"VERT_DATUM":return t[r]={name:e[0].toLowerCase(),convert:e[1]},void(3===e.length&&bA(e[2],t[r]));case"SPHEROID":case"ELLIPSOID":return t[r]={name:e[0],a:e[1],rf:e[2]},void(4===e.length&&bA(e[3],t[r]));case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":return e[0]=["name",e[0]],void gA(t,r,e);default:for(n=-1;++n<e.length;)if(!Array.isArray(e[n]))return bA(e,t[r]);return gA(t,r,e)}else t[r]=e;else t[r]=!0}else t[e]=!0}function SA(e){return(SA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}vA.prototype.readCharicter=function(){var e=this.text[this.place++];if(4!==this.state)for(;hA.test(e);){if(this.place>=this.text.length)return;e=this.text[this.place++]}switch(this.state){case fA:return this.neutral(e);case 2:return this.keyword(e);case 4:return this.quoted(e);case 5:return this.afterquote(e);case 3:return this.number(e);case-1:return}},vA.prototype.afterquote=function(e){if('"'===e)return this.word+='"',void(this.state=4);if(dA.test(e))return this.word=this.word.trim(),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in afterquote yet, index '+this.place)},vA.prototype.afterItem=function(e){return","===e?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=fA)):"]"===e?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=fA,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},vA.prototype.number=function(e){if(!mA.test(e)){if(dA.test(e))return this.word=parseFloat(this.word),void this.afterItem(e);throw new Error("havn't handled \""+e+'" in number yet, index '+this.place)}this.word+=e},vA.prototype.quoted=function(e){'"'!==e?this.word+=e:this.state=5},vA.prototype.keyword=function(e){if(yA.test(e))this.word+=e;else{if("["===e){var t=[];return t.push(this.word),this.level++,null===this.root?this.root=t:this.currentObject.push(t),this.stack.push(this.currentObject),this.currentObject=t,void(this.state=fA)}if(!dA.test(e))throw new Error("havn't handled \""+e+'" in keyword yet, index '+this.place);this.afterItem(e)}},vA.prototype.neutral=function(e){if(pA.test(e))return this.word=e,void(this.state=2);if('"'===e)return this.word="",void(this.state=4);if(mA.test(e))return this.word=e,void(this.state=3);if(!dA.test(e))throw new Error("havn't handled \""+e+'" in neutral yet, index '+this.place);this.afterItem(e)},vA.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var _A=.017453292519943295;function wA(e){return e*_A}var OA,xA=function(e){var t=cA(e),n=t.shift(),r=t.shift();t.unshift(["name",r]),t.unshift(["type",n]);var i={};return bA(t,i),function(e){"GEOGCS"===e.type?e.projName="longlat":"LOCAL_CS"===e.type?(e.projName="identity",e.local=!0):"object"===SA(e.PROJECTION)?e.projName=Object.keys(e.PROJECTION)[0]:e.projName=e.PROJECTION,e.UNIT&&(e.units=e.UNIT.name.toLowerCase(),"metre"===e.units&&(e.units="meter"),e.UNIT.convert&&("GEOGCS"===e.type?e.DATUM&&e.DATUM.SPHEROID&&(e.to_meter=e.UNIT.convert*e.DATUM.SPHEROID.a):e.to_meter=e.UNIT.convert));var t=e.GEOGCS;function n(t){return t*(e.to_meter||1)}"GEOGCS"===e.type&&(t=e),t&&(t.DATUM?e.datumCode=t.DATUM.name.toLowerCase():e.datumCode=t.name.toLowerCase(),"d_"===e.datumCode.slice(0,2)&&(e.datumCode=e.datumCode.slice(2)),"new_zealand_geodetic_datum_1949"!==e.datumCode&&"new_zealand_1949"!==e.datumCode||(e.datumCode="nzgd49"),"wgs_1984"===e.datumCode&&("Mercator_Auxiliary_Sphere"===e.PROJECTION&&(e.sphere=!0),e.datumCode="wgs84"),"_ferro"===e.datumCode.slice(-6)&&(e.datumCode=e.datumCode.slice(0,-6)),"_jakarta"===e.datumCode.slice(-8)&&(e.datumCode=e.datumCode.slice(0,-8)),~e.datumCode.indexOf("belge")&&(e.datumCode="rnb72"),t.DATUM&&t.DATUM.SPHEROID&&(e.ellps=t.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===e.ellps.toLowerCase().slice(0,13)&&(e.ellps="intl"),e.a=t.DATUM.SPHEROID.a,e.rf=parseFloat(t.DATUM.SPHEROID.rf,10)),t.DATUM&&t.DATUM.TOWGS84&&(e.datum_params=t.DATUM.TOWGS84),~e.datumCode.indexOf("osgb_1936")&&(e.datumCode="osgb36"),~e.datumCode.indexOf("osni_1952")&&(e.datumCode="osni52"),(~e.datumCode.indexOf("tm65")||~e.datumCode.indexOf("geodetic_datum_of_1965"))&&(e.datumCode="ire65"),"ch1903+"===e.datumCode&&(e.datumCode="ch1903"),~e.datumCode.indexOf("israel")&&(e.datumCode="isr93")),e.b&&!isFinite(e.b)&&(e.b=e.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_2","Standard_Parallel_2"],["false_easting","False_Easting"],["false_northing","False_Northing"],["central_meridian","Central_Meridian"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",wA],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",wA],["x0","false_easting",n],["y0","false_northing",n],["long0","central_meridian",wA],["lat0","latitude_of_origin",wA],["lat0","standard_parallel_1",wA],["lat1","standard_parallel_1",wA],["lat2","standard_parallel_2",wA],["azimuth","Azimuth"],["alpha","azimuth",wA],["srsCode","name"]].forEach(function(t){return n=e,i=(r=t)[0],o=r[1],void(!(i in n)&&o in n&&(n[i]=n[o],3===r.length&&(n[i]=r[2](n[i]))));var n,r,i,o}),e.long0||!e.longc||"Albers_Conic_Equal_Area"!==e.projName&&"Lambert_Azimuthal_Equal_Area"!==e.projName||(e.long0=e.longc),e.lat_ts||!e.lat1||"Stereographic_South_Pole"!==e.projName&&"Polar Stereographic (variant B)"!==e.projName||(e.lat0=wA(e.lat1>0?90:-90),e.lat_ts=e.lat1)}(i),i};function CA(e){var t=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?CA[e]=uA(arguments[1]):CA[e]=xA(arguments[1]):CA[e]=n}else if(1===arguments.length){if(Array.isArray(e))return e.map(function(e){Array.isArray(e)?CA.apply(t,e):CA(e)});if("string"==typeof e){if(e in CA)return CA[e]}else"EPSG"in e?CA["EPSG:"+e.EPSG]=e:"ESRI"in e?CA["ESRI:"+e.ESRI]=e:"IAU2000"in e?CA["IAU2000:"+e.IAU2000]=e:console.log(e);return}}(OA=CA)("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),OA("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),OA("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),OA.WGS84=OA["EPSG:4326"],OA["EPSG:3785"]=OA["EPSG:3857"],OA.GOOGLE=OA["EPSG:3857"],OA["EPSG:900913"]=OA["EPSG:3857"],OA["EPSG:102113"]=OA["EPSG:3857"];var TA=CA;var PA=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var EA=["3857","900913","3785","102113"];var kA=function(e){if(!function(e){return"string"==typeof e}(e))return e;if(function(e){return e in TA}(e))return TA[e];if(function(e){return PA.some(function(t){return e.indexOf(t)>-1})}(e)){var t=xA(e);if(function(e){var t=lA(e,"authority");if(t){var n=lA(t,"epsg");return n&&EA.indexOf(n)>-1}}(t))return TA["EPSG:3857"];var n=function(e){var t=lA(e,"extension");if(t)return lA(t,"proj4")}(t);return n?uA(n):t}return function(e){return"+"===e[0]}(e)?uA(e):void 0},MA=function(e,t){var n,r;if(e=e||{},!t)return e;for(r in t)void 0!==(n=t[r])&&(e[r]=n);return e},AA=function(e,t,n){var r=e*t;return n/Math.sqrt(1-r*r)},LA=function(e){return e<0?-1:1},jA=function(e){return Math.abs(e)<=iA?e:e-LA(e)*rA},NA=function(e,t,n){var r=e*n,i=.5*e;return r=Math.pow((1-r)/(1+r),i),Math.tan(.5*(YM-t))/r},RA=function(e,t){for(var n,r,i=.5*e,o=YM-2*Math.atan(t),a=0;a<=15;a++)if(n=e*Math.sin(o),o+=r=YM-2*Math.atan(t*Math.pow((1-n)/(1+n),i))-o,Math.abs(r)<=1e-10)return o;return-9999};function IA(e){return e}var DA=[{init:function(){var e=this.b/this.a;this.es=1-e*e,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=AA(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(e){var t,n,r=e.x,i=e.y;if(i*tA>90&&i*tA<-90&&r*tA>180&&r*tA<-180)return null;if(Math.abs(Math.abs(i)-YM)<=$M)return null;if(this.sphere)t=this.x0+this.a*this.k0*jA(r-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(nA+.5*i));else{var o=Math.sin(i),a=NA(this.e,i,o);t=this.x0+this.a*this.k0*jA(r-this.long0),n=this.y0-this.a*this.k0*Math.log(a)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r=e.x-this.x0,i=e.y-this.y0;if(this.sphere)n=YM-2*Math.atan(Math.exp(-i/(this.a*this.k0)));else{var o=Math.exp(-i/(this.a*this.k0));if(-9999===(n=RA(this.e,o)))return null}return t=jA(this.long0+r/(this.a*this.k0)),e.x=t,e.y=n,e},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:IA,inverse:IA,names:["longlat","identity"]}],FA={},BA=[];function UA(e,t){var n=BA.length;return e.names?(BA[n]=e,e.names.forEach(function(e){FA[e.toLowerCase()]=n}),this):(console.log(t),!0)}var GA={start:function(){DA.forEach(UA)},add:UA,get:function(e){if(!e)return!1;var t=e.toLowerCase();return void 0!==FA[t]&&BA[FA[t]]?BA[FA[t]]:void 0}},zA={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},VA=zA.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};zA.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var HA={};HA.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},HA.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},HA.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},HA.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},HA.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},HA.potsdam={towgs84:"606.0,23.0,413.0",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},HA.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},HA.hermannskogel={towgs84:"653.0,-212.0,449.0",ellipse:"bessel",datumName:"Hermannskogel"},HA.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},HA.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},HA.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},HA.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},HA.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},HA.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},HA.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},HA.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},HA.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"};var JA=function(e,t,n,r,i,o){var a={};return a.datum_type=void 0===e||"none"===e?WM:qM,t&&(a.datum_params=t.map(parseFloat),0===a.datum_params[0]&&0===a.datum_params[1]&&0===a.datum_params[2]||(a.datum_type=HM),a.datum_params.length>3&&(0===a.datum_params[3]&&0===a.datum_params[4]&&0===a.datum_params[5]&&0===a.datum_params[6]||(a.datum_type=JM,a.datum_params[3]*=QM,a.datum_params[4]*=QM,a.datum_params[5]*=QM,a.datum_params[6]=a.datum_params[6]/1e6+1))),a.a=n,a.b=r,a.es=i,a.ep2=o,a};function qA(e){return(qA="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function WA(e,t){if(!(this instanceof WA))return new WA(e);t=t||function(e){if(e)throw e};var n=kA(e);if("object"===qA(n)){var r=WA.projections.get(n.projName);if(r){if(n.datumCode&&"none"!==n.datumCode){var i=lA(HA,n.datumCode);i&&(n.datum_params=i.towgs84?i.towgs84.split(","):null,n.ellps=i.ellipse,n.datumName=i.datumName?i.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84";var o,a,s,l,u,c,f,h=function(e,t,n,r,i){if(!e){var o=lA(zA,r);o||(o=VA),e=o.a,t=o.b,n=o.rf}return n&&!t&&(t=(1-1/n)*e),(0===n||Math.abs(e-t)<$M)&&(i=!0,t=e),{a:e,b:t,rf:n,sphere:i}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(o=h.a,a=h.b,h.rf,s=n.R_A,c=((l=o*o)-(u=a*a))/l,f=0,s?(l=(o*=1-c*(XM+c*(KM+c*ZM)))*o,c=0):f=Math.sqrt(c),{es:c,e:f,ep2:(l-u)/u}),y=n.datum||JA(n.datumCode,n.datum_params,h.a,h.b,p.es,p.ep2);MA(this,n),MA(this,r),this.a=h.a,this.b=h.b,this.rf=h.rf,this.sphere=h.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),t(null,this)}else t(e)}else t(e)}WA.projections=GA,WA.projections.start();var QA=WA;function YA(e){return e===HM||e===JM}var XA=function(e,t,n){return function(e,t){return e.datum_type===t.datum_type&&!(e.a!==t.a||Math.abs(e.es-t.es)>5e-11)&&(e.datum_type===HM?e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]:e.datum_type!==JM||e.datum_params[0]===t.datum_params[0]&&e.datum_params[1]===t.datum_params[1]&&e.datum_params[2]===t.datum_params[2]&&e.datum_params[3]===t.datum_params[3]&&e.datum_params[4]===t.datum_params[4]&&e.datum_params[5]===t.datum_params[5]&&e.datum_params[6]===t.datum_params[6])}(e,t)?n:e.datum_type===WM||t.datum_type===WM?n:e.es!==t.es||e.a!==t.a||YA(e.datum_type)||YA(t.datum_type)?(n=function(e,t,n){var r,i,o,a,s=e.x,l=e.y,u=e.z?e.z:0;if(l<-YM&&l>-1.001*YM)l=-YM;else if(l>YM&&l<1.001*YM)l=YM;else{if(l<-YM)return{x:-1/0,y:-1/0,z:e.z};if(l>YM)return{x:1/0,y:1/0,z:e.z}}return s>Math.PI&&(s-=2*Math.PI),i=Math.sin(l),a=Math.cos(l),o=i*i,{x:((r=n/Math.sqrt(1-t*o))+u)*a*Math.cos(s),y:(r+u)*a*Math.sin(s),z:(r*(1-t)+u)*i}}(n,e.es,e.a),YA(e.datum_type)&&(n=function(e,t,n){if(t===HM)return{x:e.x+n[0],y:e.y+n[1],z:e.z+n[2]};if(t===JM){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6];return{x:u*(e.x-l*e.y+s*e.z)+r,y:u*(l*e.x+e.y-a*e.z)+i,z:u*(-s*e.x+a*e.y+e.z)+o}}}(n,e.datum_type,e.datum_params)),YA(t.datum_type)&&(n=function(e,t,n){if(t===HM)return{x:e.x-n[0],y:e.y-n[1],z:e.z-n[2]};if(t===JM){var r=n[0],i=n[1],o=n[2],a=n[3],s=n[4],l=n[5],u=n[6],c=(e.x-r)/u,f=(e.y-i)/u,h=(e.z-o)/u;return{x:c+l*f-s*h,y:-l*c+f+a*h,z:s*c-a*f+h}}}(n,t.datum_type,t.datum_params)),function(e,t,n,r){var i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b=e.x,S=e.y,_=e.z?e.z:0;if(i=Math.sqrt(b*b+S*S),o=Math.sqrt(b*b+S*S+_*_),i/n<1e-12){if(v=0,o/n<1e-12)return g=-r,{x:e.x,y:e.y,z:e.z}}else v=Math.atan2(S,b);a=_/o,f=(s=i/o)*(1-t)*(l=1/Math.sqrt(1-t*(2-t)*s*s)),h=a*l,m=0;do{m++,u=t*(c=n/Math.sqrt(1-t*h*h))/(c+(g=i*f+_*h-c*(1-t*h*h))),d=(y=a*(l=1/Math.sqrt(1-u*(2-u)*s*s)))*f-(p=s*(1-u)*l)*h,f=p,h=y}while(d*d>1e-24&&m<30);return{x:v,y:Math.atan(y/Math.abs(p)),z:g}}(n,t.es,t.a,t.b)):n},KA=function(e,t,n){var r,i,o,a=n.x,s=n.y,l=n.z||0,u={};for(o=0;o<3;o++)if(!t||2!==o||void 0!==n.z)switch(0===o?(r=a,i="x"):1===o?(r=s,i="y"):(r=l,i="z"),e.axis[o]){case"e":u[i]=r;break;case"w":u[i]=-r;break;case"n":u[i]=r;break;case"s":u[i]=-r;break;case"u":void 0!==n[i]&&(u.z=r);break;case"d":void 0!==n[i]&&(u.z=-r);break;default:return null}return u},ZA=function(e){var t={x:e[0],y:e[1]};return e.length>2&&(t.z=e[2]),e.length>3&&(t.m=e[3]),t},$A=function(e){eL(e.x),eL(e.y)};function eL(e){if("function"==typeof Number.isFinite){if(Number.isFinite(e))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof e||e!=e||!isFinite(e))throw new TypeError("coordinates must be finite numbers")}function tL(e,t,n){var r;return Array.isArray(n)&&(n=ZA(n)),$A(n),e.datum&&t.datum&&function(e,t){return(e.datum.datum_type===HM||e.datum.datum_type===JM)&&"WGS84"!==t.datumCode||(t.datum.datum_type===HM||t.datum.datum_type===JM)&&"WGS84"!==e.datumCode}(e,t)&&(n=tL(e,r=new QA("WGS84"),n),e=r),"enu"!==e.axis&&(n=KA(e,!1,n)),"longlat"===e.projName?n={x:n.x*eA,y:n.y*eA}:(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter}),n=e.inverse(n)),e.from_greenwich&&(n.x+=e.from_greenwich),n=XA(e.datum,t.datum,n),t.from_greenwich&&(n={x:n.x-t.from_greenwich,y:n.y}),"longlat"===t.projName?n={x:n.x*tA,y:n.y*tA}:(n=t.forward(n),t.to_meter&&(n={x:n.x/t.to_meter,y:n.y/t.to_meter})),"enu"!==t.axis?KA(t,!0,n):n}var nL=QA("WGS84");function rL(e,t,n){var r,i,o;return Array.isArray(n)?(r=tL(e,t,n),3===n.length?[r.x,r.y,r.z]:[r.x,r.y]):(i=tL(e,t,n),2===(o=Object.keys(n)).length?i:(o.forEach(function(e){"x"!==e&&"y"!==e&&(i[e]=n[e])}),i))}function iL(e){return e instanceof QA?e:e.oProj?e.oProj:QA(e)}var oL=function(e,t,n){e=iL(e);var r,i=!1;return void 0===t?(t=e,e=nL,i=!0):(void 0!==t.x||Array.isArray(t))&&(n=t,t=e,e=nL,i=!0),t=iL(t),n?rL(e,t,n):(r={forward:function(n){return rL(e,t,n)},inverse:function(n){return rL(t,e,n)}},i&&(r.oProj=t),r)},aL=6,sL="AJSAJS",lL="AFAFAF",uL=65,cL=73,fL=79,hL=86,pL=90,yL={forward:dL,inverse:function(e){var t=bL(_L(e.toUpperCase()));if(t.lat&&t.lon)return[t.lon,t.lat,t.lon,t.lat];return[t.left,t.bottom,t.right,t.top]},toPoint:mL};function dL(e,t){return t=t||5,function(e,t){var n="00000"+e.easting,r="00000"+e.northing;return e.zoneNumber+e.zoneLetter+(p=e.easting,y=e.northing,d=e.zoneNumber,m=SL(d),v=Math.floor(p/1e5),g=Math.floor(y/1e5)%20,i=v,o=g,a=m,s=a-1,l=sL.charCodeAt(s),u=lL.charCodeAt(s),c=l+i-1,f=u+o,h=!1,c>pL&&(c=c-pL+uL-1,h=!0),(c===cL||l<cL&&c>cL||(c>cL||l<cL)&&h)&&c++,(c===fL||l<fL&&c>fL||(c>fL||l<fL)&&h)&&++c===cL&&c++,c>pL&&(c=c-pL+uL-1),f>hL?(f=f-hL+uL-1,h=!0):h=!1,(f===cL||u<cL&&f>cL||(f>cL||u<cL)&&h)&&f++,(f===fL||u<fL&&f>fL||(f>fL||u<fL)&&h)&&++f===cL&&f++,f>hL&&(f=f-hL+uL-1),String.fromCharCode(c)+String.fromCharCode(f))+n.substr(n.length-5,t)+r.substr(r.length-5,t);var i,o,a,s,l,u,c,f,h;var p,y,d,m,v,g}(function(e){var t,n,r,i,o,a,s,l=e.lat,u=e.lon,c=6378137,f=vL(l),h=vL(u);s=Math.floor((u+180)/6)+1,180===u&&(s=60);l>=56&&l<64&&u>=3&&u<12&&(s=32);l>=72&&l<84&&(u>=0&&u<9?s=31:u>=9&&u<21?s=33:u>=21&&u<33?s=35:u>=33&&u<42&&(s=37));a=vL(6*(s-1)-180+3),.006739496752268451,t=c/Math.sqrt(1-.00669438*Math.sin(f)*Math.sin(f)),n=Math.tan(f)*Math.tan(f),r=.006739496752268451*Math.cos(f)*Math.cos(f),i=Math.cos(f)*(h-a),o=c*(.9983242984503243*f-.002514607064228144*Math.sin(2*f)+2639046602129982e-21*Math.sin(4*f)-3.418046101696858e-9*Math.sin(6*f));var p=.9996*t*(i+(1-n+r)*i*i*i/6+(5-18*n+n*n+72*r-.39089081163157013)*i*i*i*i*i/120)+5e5,y=.9996*(o+t*Math.tan(f)*(i*i/2+(5-n+9*r+4*r*r)*i*i*i*i/24+(61-58*n+n*n+600*r-2.2240339282485886)*i*i*i*i*i*i/720));l<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(p),zoneNumber:s,zoneLetter:function(e){var t="Z";84>=e&&e>=72?t="X":72>e&&e>=64?t="W":64>e&&e>=56?t="V":56>e&&e>=48?t="U":48>e&&e>=40?t="T":40>e&&e>=32?t="S":32>e&&e>=24?t="R":24>e&&e>=16?t="Q":16>e&&e>=8?t="P":8>e&&e>=0?t="N":0>e&&e>=-8?t="M":-8>e&&e>=-16?t="L":-16>e&&e>=-24?t="K":-24>e&&e>=-32?t="J":-32>e&&e>=-40?t="H":-40>e&&e>=-48?t="G":-48>e&&e>=-56?t="F":-56>e&&e>=-64?t="E":-64>e&&e>=-72?t="D":-72>e&&e>=-80&&(t="C");return t}(l)}}({lat:e[1],lon:e[0]}),t)}function mL(e){var t=bL(_L(e.toUpperCase()));return t.lat&&t.lon?[t.lon,t.lat]:[(t.left+t.right)/2,(t.top+t.bottom)/2]}function vL(e){return e*(Math.PI/180)}function gL(e){return e/Math.PI*180}function bL(e){var t=e.northing,n=e.easting,r=e.zoneLetter,i=e.zoneNumber;if(i<0||i>60)return null;var o,a,s,l,u,c,f,h,p=6378137,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),d=n-5e5,m=t;r<"N"&&(m-=1e7),c=6*(i-1)-180+3,h=(f=m/.9996/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*f)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*f)+151*y*y*y/96*Math.sin(6*f),o=p/Math.sqrt(1-.00669438*Math.sin(h)*Math.sin(h)),a=Math.tan(h)*Math.tan(h),s=.006739496752268451*Math.cos(h)*Math.cos(h),l=.99330562*p/Math.pow(1-.00669438*Math.sin(h)*Math.sin(h),1.5),u=d/(.9996*o);var v=h-o*Math.tan(h)/l*(u*u/2-(5+3*a+10*s-4*s*s-.06065547077041606)*u*u*u*u/24+(61+90*a+298*s+45*a*a-1.6983531815716497-3*s*s)*u*u*u*u*u*u/720);v=gL(v);var g,b=(u-(1+2*a+s)*u*u*u/6+(5-2*s+28*a-3*s*s+.05391597401814761+24*a*a)*u*u*u*u*u/120)/Math.cos(h);if(b=c+gL(b),e.accuracy){var S=bL({northing:e.northing+e.accuracy,easting:e.easting+e.accuracy,zoneLetter:e.zoneLetter,zoneNumber:e.zoneNumber});g={top:S.lat,right:S.lon,bottom:v,left:b}}else g={lat:v,lon:b};return g}function SL(e){var t=e%aL;return 0===t&&(t=aL),t}function _L(e){if(e&&0===e.length)throw"MGRSPoint coverting from nothing";for(var t,n=e.length,r=null,i="",o=0;!/[A-Z]/.test(t=e.charAt(o));){if(o>=2)throw"MGRSPoint bad conversion from: "+e;i+=t,o++}var a=parseInt(i,10);if(0===o||o+3>n)throw"MGRSPoint bad conversion from: "+e;var s=e.charAt(o++);if(s<="A"||"B"===s||"Y"===s||s>="Z"||"I"===s||"O"===s)throw"MGRSPoint zone letter "+s+" not handled: "+e;r=e.substring(o,o+=2);for(var l=SL(a),u=function(e,t){var n=sL.charCodeAt(t-1),r=1e5,i=!1;for(;n!==e.charCodeAt(0);){if(++n===cL&&n++,n===fL&&n++,n>pL){if(i)throw"Bad character: "+e;n=uL,i=!0}r+=1e5}return r}(r.charAt(0),l),c=function(e,t){if(e>"V")throw"MGRSPoint given invalid Northing "+e;var n=lL.charCodeAt(t-1),r=0,i=!1;for(;n!==e.charCodeAt(0);){if(++n===cL&&n++,n===fL&&n++,n>hL){if(i)throw"Bad character: "+e;n=uL,i=!0}r+=1e5}return r}(r.charAt(1),l);c<wL(s);)c+=2e6;var f=n-o;if(f%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+e;var h,p,y,d=f/2,m=0,v=0;return d>0&&(h=1e5/Math.pow(10,d),p=e.substring(o,o+d),m=parseFloat(p)*h,y=e.substring(o+d),v=parseFloat(y)*h),{easting:m+u,northing:v+c,zoneLetter:s,zoneNumber:a,accuracy:h}}function wL(e){var t;switch(e){case"C":t=11e5;break;case"D":t=2e6;break;case"E":t=28e5;break;case"F":t=37e5;break;case"G":t=46e5;break;case"H":t=55e5;break;case"J":t=64e5;break;case"K":t=73e5;break;case"L":t=82e5;break;case"M":t=91e5;break;case"N":t=0;break;case"P":t=8e5;break;case"Q":t=17e5;break;case"R":t=26e5;break;case"S":t=35e5;break;case"T":t=44e5;break;case"U":t=53e5;break;case"V":t=62e5;break;case"W":t=7e6;break;case"X":t=79e5;break;default:t=-1}if(t>=0)return t;throw"Invalid zone letter: "+e}function OL(e){return(OL="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xL(e,t,n){if(!(this instanceof xL))return new xL(e,t,n);if(Array.isArray(e))this.x=e[0],this.y=e[1],this.z=e[2]||0;else if("object"===OL(e))this.x=e.x,this.y=e.y,this.z=e.z||0;else if("string"==typeof e&&void 0===t){var r=e.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=e,this.y=t,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}xL.fromMGRS=function(e){return new xL(mL(e))},xL.prototype.toMGRS=function(e){return dL([this.x,this.y],e)};var CL=xL,TL=n(8),PL=.01068115234375,EL=function(e){var t=[];t[0]=1-e*(.25+e*(.046875+e*(.01953125+e*PL))),t[1]=e*(.75-e*(.046875+e*(.01953125+e*PL)));var n=e*e;return t[2]=n*(.46875-e*(.013020833333333334+.007120768229166667*e)),n*=e,t[3]=n*(.3645833333333333-.005696614583333333*e),t[4]=n*e*.3076171875,t},kL=function(e,t,n,r){return n*=t,t*=t,r[0]*e-n*(r[1]+t*(r[2]+t*(r[3]+t*r[4])))},ML=function(e,t,n){for(var r=1/(1-t),i=e,o=20;o;--o){var a=Math.sin(i),s=1-t*a*a;if(i-=s=(kL(i,a,Math.cos(i),n)-e)*(s*Math.sqrt(s))*r,Math.abs(s)<$M)return i}return i};var AL={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=EL(this.es),this.ml0=kL(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=jA(i-this.long0),s=Math.sin(o),l=Math.cos(o);if(this.es){var u=l*a,c=Math.pow(u,2),f=this.ep2*Math.pow(l,2),h=Math.pow(f,2),p=Math.abs(l)>$M?Math.tan(o):0,y=Math.pow(p,2),d=Math.pow(y,2);t=1-this.es*Math.pow(s,2),u/=Math.sqrt(t);var m=kL(o,s,l,this.en);n=this.a*(this.k0*u*(1+c/6*(1-y+f+c/20*(5-18*y+d+14*f-58*y*f+c/42*(61+179*d-d*y-479*y)))))+this.x0,r=this.a*(this.k0*(m-this.ml0+s*a*u/2*(1+c/12*(5-y+9*f+4*h+c/30*(61+d-58*y+270*f-330*y*f+c/56*(1385+543*d-d*y-3111*y))))))+this.y0}else{var v=l*Math.sin(a);if(Math.abs(Math.abs(v)-1)<$M)return 93;if(n=.5*this.a*this.k0*Math.log((1+v)/(1-v))+this.x0,r=l*Math.cos(a)/Math.sqrt(1-Math.pow(v,2)),(v=Math.abs(r))>=1){if(v-1>$M)return 93;r=0}else r=Math.acos(r);o<0&&(r=-r),r=this.a*this.k0*(r-this.lat0)+this.y0}return e.x=n,e.y=r,e},inverse:function(e){var t,n,r,i,o=(e.x-this.x0)*(1/this.a),a=(e.y-this.y0)*(1/this.a);if(this.es)if(t=this.ml0+a/this.k0,n=ML(t,this.es,this.en),Math.abs(n)<YM){var s=Math.sin(n),l=Math.cos(n),u=Math.abs(l)>$M?Math.tan(n):0,c=this.ep2*Math.pow(l,2),f=Math.pow(c,2),h=Math.pow(u,2),p=Math.pow(h,2);t=1-this.es*Math.pow(s,2);var y=o*Math.sqrt(t)/this.k0,d=Math.pow(y,2);r=n-(t*=u)*d/(1-this.es)*.5*(1-d/12*(5+3*h-9*c*h+c-4*f-d/30*(61+90*h-252*c*h+45*p+46*c-d/56*(1385+3633*h+4095*p+1574*p*h)))),i=jA(this.long0+y*(1-d/6*(1+2*h+c-d/20*(5+28*h+24*p+8*c*h+6*c-d/42*(61+662*h+1320*p+720*p*h))))/l)}else r=YM*LA(a),i=0;else{var m=Math.exp(o/this.k0),v=.5*(m-1/m),g=this.lat0+a/this.k0,b=Math.cos(g);t=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),r=Math.asin(t),a<0&&(r=-r),i=0===v&&0===b?0:jA(Math.atan2(v,b)+this.long0)}return e.x=i,e.y=r,e},names:["Transverse_Mercator","Transverse Mercator","tmerc"]},LL=function(e){var t=Math.exp(e);return t=(t-1/t)/2},jL=function(e,t){e=Math.abs(e),t=Math.abs(t);var n=Math.max(e,t),r=Math.min(e,t)/(n||1);return n*Math.sqrt(1+Math.pow(r,2))},NL=function(e){var t=Math.abs(e);return t=function(e){var t=1+e,n=t-1;return 0===n?e:e*Math.log(t)/n}(t*(1+t/(jL(1,t)+1))),e<0?-t:t},RL=function(e,t){for(var n,r=2*Math.cos(2*t),i=e.length-1,o=e[i],a=0;--i>=0;)n=r*o-a+e[i],a=o,o=n;return t+n*Math.sin(2*t)},IL=function(e,t){for(var n,r=2*Math.cos(t),i=e.length-1,o=e[i],a=0;--i>=0;)n=r*o-a+e[i],a=o,o=n;return Math.sin(t)*n},DL=function(e,t,n){for(var r,i,o=Math.sin(t),a=Math.cos(t),s=LL(n),l=function(e){var t=Math.exp(e);return t=(t+1/t)/2}(n),u=2*a*l,c=-2*o*s,f=e.length-1,h=e[f],p=0,y=0,d=0;--f>=0;)r=y,i=p,h=u*(y=h)-r-c*(p=d)+e[f],d=c*y-i+u*p;return[(u=o*l)*h-(c=a*s)*d,u*d+c*h]};var FL={init:function(){if(void 0===this.es||this.es<=0)throw new Error("incorrect elliptical usage");this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var e=this.es/(1+Math.sqrt(1-this.es)),t=e/(2-e),n=t;this.cgb[0]=t*(2+t*(-2/3+t*(t*(116/45+t*(26/45+t*(-2854/675)))-2))),this.cbg[0]=t*(t*(2/3+t*(4/3+t*(-82/45+t*(32/45+t*(4642/4725)))))-2),n*=t,this.cgb[1]=n*(7/3+t*(t*(-227/45+t*(2704/315+t*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+t*(-16/15+t*(-13/9+t*(904/315+t*(-1522/945))))),n*=t,this.cgb[2]=n*(56/15+t*(-136/35+t*(-1262/105+t*(73814/2835)))),this.cbg[2]=n*(-26/15+t*(34/21+t*(1.6+t*(-12686/2835)))),n*=t,this.cgb[3]=n*(4279/630+t*(-332/35+t*(-399572/14175))),this.cbg[3]=n*(1237/630+t*(t*(-24832/14175)-2.4)),n*=t,this.cgb[4]=n*(4174/315+t*(-144838/6237)),this.cbg[4]=n*(-734/315+t*(109598/31185)),n*=t,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(t,2),this.Qn=this.k0/(1+t)*(1+n*(.25+n*(1/64+n/256))),this.utg[0]=t*(t*(2/3+t*(-37/96+t*(1/360+t*(81/512+t*(-96199/604800)))))-.5),this.gtu[0]=t*(.5+t*(-2/3+t*(5/16+t*(41/180+t*(-127/288+t*(7891/37800)))))),this.utg[1]=n*(-1/48+t*(-1/15+t*(437/1440+t*(-46/105+t*(1118711/3870720))))),this.gtu[1]=n*(13/48+t*(t*(557/1440+t*(281/630+t*(-1983433/1935360)))-.6)),n*=t,this.utg[2]=n*(-17/480+t*(37/840+t*(209/4480+t*(-5569/90720)))),this.gtu[2]=n*(61/240+t*(-103/140+t*(15061/26880+t*(167603/181440)))),n*=t,this.utg[3]=n*(-4397/161280+t*(11/504+t*(830251/7257600))),this.gtu[3]=n*(49561/161280+t*(-179/168+t*(6601661/7257600))),n*=t,this.utg[4]=n*(-4583/161280+t*(108847/3991680)),this.gtu[4]=n*(34729/80640+t*(-3418889/1995840)),n*=t,this.utg[5]=-.03233083094085698*n,this.gtu[5]=.6650675310896665*n;var r=RL(this.cbg,this.lat0);this.Zb=-this.Qn*(r+IL(this.gtu,2*r))},forward:function(e){var t=jA(e.x-this.long0),n=e.y;n=RL(this.cbg,n);var r=Math.sin(n),i=Math.cos(n),o=Math.sin(t),a=Math.cos(t);n=Math.atan2(r,a*i),t=Math.atan2(o*i,jL(r,i*a)),t=NL(Math.tan(t));var s,l,u=DL(this.gtu,2*n,2*t);return n+=u[0],t+=u[1],Math.abs(t)<=2.623395162778?(s=this.a*(this.Qn*t)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(s=1/0,l=1/0),e.x=s,e.y=l,e},inverse:function(e){var t,n,r=(e.x-this.x0)*(1/this.a),i=(e.y-this.y0)*(1/this.a);if(i=(i-this.Zb)/this.Qn,r/=this.Qn,Math.abs(r)<=2.623395162778){var o=DL(this.utg,2*i,2*r);i+=o[0],r+=o[1],r=Math.atan(LL(r));var a=Math.sin(i),s=Math.cos(i),l=Math.sin(r),u=Math.cos(r);i=Math.atan2(a*u,jL(l,u*s)),r=Math.atan2(l,u*s),t=jA(r+this.long0),n=RL(this.cgb,i)}else t=1/0,n=1/0;return e.x=t,e.y=n,e},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc"]},BL=function(e,t){if(void 0===e){if((e=Math.floor(30*(jA(t)+Math.PI)/Math.PI)+1)<0)return 0;if(e>60)return 60}return e};var UL={init:function(){var e=BL(this.zone,this.long0);if(void 0===e)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(e)-183)*eA,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,FL.init.apply(this),this.forward=FL.forward,this.inverse=FL.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"},GL=function(e,t){return Math.pow((1-e)/(1+e),t)},zL=20;var VL={init:function(){var e=Math.sin(this.lat0),t=Math.cos(this.lat0);t*=t,this.rc=Math.sqrt(1-this.es)/(1-this.es*e*e),this.C=Math.sqrt(1+this.es*t*t/(1-this.es)),this.phic0=Math.asin(e/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+nA)/(Math.pow(Math.tan(.5*this.lat0+nA),this.C)*GL(this.e*e,this.ratexp))},forward:function(e){var t=e.x,n=e.y;return e.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+nA),this.C)*GL(this.e*Math.sin(n),this.ratexp))-YM,e.x=this.C*t,e},inverse:function(e){for(var t=e.x/this.C,n=e.y,r=Math.pow(Math.tan(.5*n+nA)/this.K,1/this.C),i=zL;i>0&&(n=2*Math.atan(r*GL(this.e*Math.sin(e.y),-.5*this.e))-YM,!(Math.abs(n-e.y)<1e-14));--i)e.y=n;return i?(e.x=t,e.y=n,e):null},names:["gauss"]};var HL={init:function(){VL.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(e){var t,n,r,i;return e.x=jA(e.x-this.long0),VL.forward.apply(this,[e]),t=Math.sin(e.y),n=Math.cos(e.y),r=Math.cos(e.x),i=this.k0*this.R2/(1+this.sinc0*t+this.cosc0*n*r),e.x=i*n*Math.sin(e.x),e.y=i*(this.cosc0*t-this.sinc0*n*r),e.x=this.a*e.x+this.x0,e.y=this.a*e.y+this.y0,e},inverse:function(e){var t,n,r,i,o;if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,o=Math.sqrt(e.x*e.x+e.y*e.y)){var a=2*Math.atan2(o,this.R2);t=Math.sin(a),n=Math.cos(a),i=Math.asin(n*this.sinc0+e.y*t*this.cosc0/o),r=Math.atan2(e.x*t,o*this.cosc0*n-e.y*this.sinc0*t)}else i=this.phic0,r=0;return e.x=r,e.y=i,VL.inverse.apply(this,[e]),e.x=jA(e.x+this.long0),e},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var JL={init:function(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=$M&&(this.k0=.5*(1+LA(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=$M&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=$M&&(this.k0=.5*this.cons*AA(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/NA(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=AA(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-YM,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(e){var t,n,r,i,o,a,s=e.x,l=e.y,u=Math.sin(l),c=Math.cos(l),f=jA(s-this.long0);return Math.abs(Math.abs(s-this.long0)-Math.PI)<=$M&&Math.abs(l+this.lat0)<=$M?(e.x=NaN,e.y=NaN,e):this.sphere?(t=2*this.k0/(1+this.sinlat0*u+this.coslat0*c*Math.cos(f)),e.x=this.a*t*c*Math.sin(f)+this.x0,e.y=this.a*t*(this.coslat0*u-this.sinlat0*c*Math.cos(f))+this.y0,e):(n=2*Math.atan(this.ssfn_(l,u,this.e))-YM,i=Math.cos(n),r=Math.sin(n),Math.abs(this.coslat0)<=$M?(o=NA(this.e,l*this.con,this.con*u),a=2*this.a*this.k0*o/this.cons,e.x=this.x0+a*Math.sin(s-this.long0),e.y=this.y0-this.con*a*Math.cos(s-this.long0),e):(Math.abs(this.sinlat0)<$M?(t=2*this.a*this.k0/(1+i*Math.cos(f)),e.y=t*r):(t=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*r+this.cosX0*i*Math.cos(f))),e.y=t*(this.cosX0*r-this.sinX0*i*Math.cos(f))+this.y0),e.x=t*i*Math.sin(f)+this.x0,e))},inverse:function(e){var t,n,r,i,o;e.x-=this.x0,e.y-=this.y0;var a=Math.sqrt(e.x*e.x+e.y*e.y);if(this.sphere){var s=2*Math.atan(a/(2*this.a*this.k0));return t=this.long0,n=this.lat0,a<=$M?(e.x=t,e.y=n,e):(n=Math.asin(Math.cos(s)*this.sinlat0+e.y*Math.sin(s)*this.coslat0/a),t=Math.abs(this.coslat0)<$M?this.lat0>0?jA(this.long0+Math.atan2(e.x,-1*e.y)):jA(this.long0+Math.atan2(e.x,e.y)):jA(this.long0+Math.atan2(e.x*Math.sin(s),a*this.coslat0*Math.cos(s)-e.y*this.sinlat0*Math.sin(s))),e.x=t,e.y=n,e)}if(Math.abs(this.coslat0)<=$M){if(a<=$M)return n=this.lat0,t=this.long0,e.x=t,e.y=n,e;e.x*=this.con,e.y*=this.con,r=a*this.cons/(2*this.a*this.k0),n=this.con*RA(this.e,r),t=this.con*jA(this.con*this.long0+Math.atan2(e.x,-1*e.y))}else i=2*Math.atan(a*this.cosX0/(2*this.a*this.k0*this.ms1)),t=this.long0,a<=$M?o=this.X0:(o=Math.asin(Math.cos(i)*this.sinX0+e.y*Math.sin(i)*this.cosX0/a),t=jA(this.long0+Math.atan2(e.x*Math.sin(i),a*this.cosX0*Math.cos(i)-e.y*this.sinX0*Math.sin(i)))),n=-1*RA(this.e,Math.tan(.5*(YM+o)));return e.x=t,e.y=n,e},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],ssfn_:function(e,t,n){return t*=n,Math.tan(.5*(YM+e))*Math.pow((1-t)/(1+t),.5*n)}};var qL={init:function(){var e=this.lat0;this.lambda0=this.long0;var t=Math.sin(e),n=this.a,r=1/this.rf,i=2*r-Math.pow(r,2),o=this.e=Math.sqrt(i);this.R=this.k0*n*Math.sqrt(1-i)/(1-i*Math.pow(t,2)),this.alpha=Math.sqrt(1+i/(1-i)*Math.pow(Math.cos(e),4)),this.b0=Math.asin(t/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+e/2)),l=Math.log((1+o*t)/(1-o*t));this.K=a-this.alpha*s+this.alpha*o/2*l},forward:function(e){var t=Math.log(Math.tan(Math.PI/4-e.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(e.y))/(1-this.e*Math.sin(e.y))),r=-this.alpha*(t+n)+this.K,i=2*(Math.atan(Math.exp(r))-Math.PI/4),o=this.alpha*(e.x-this.lambda0),a=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(i)+Math.cos(this.b0)*Math.cos(o))),s=Math.asin(Math.cos(this.b0)*Math.sin(i)-Math.sin(this.b0)*Math.cos(i)*Math.cos(o));return e.y=this.R/2*Math.log((1+Math.sin(s))/(1-Math.sin(s)))+this.y0,e.x=this.R*a+this.x0,e},inverse:function(e){for(var t=e.x-this.x0,n=e.y-this.y0,r=t/this.R,i=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),o=Math.asin(Math.cos(this.b0)*Math.sin(i)+Math.sin(this.b0)*Math.cos(i)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(i))),s=this.lambda0+a/this.alpha,l=0,u=o,c=-1e3,f=0;Math.abs(u-c)>1e-7;){if(++f>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+o/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(u))/2)),c=u,u=2*Math.atan(Math.exp(l))-Math.PI/2}return e.x=s,e.y=u,e},names:["somerc"]};var WL={init:function(){this.no_off=this.no_off||!1,this.no_rot=this.no_rot||!1,isNaN(this.k0)&&(this.k0=1);var e=Math.sin(this.lat0),t=Math.cos(this.lat0),n=this.e*e;this.bl=Math.sqrt(1+this.es/(1-this.es)*Math.pow(t,4)),this.al=this.a*this.bl*this.k0*Math.sqrt(1-this.es)/(1-n*n);var r,i,o=NA(this.e,this.lat0,e),a=this.bl/t*Math.sqrt((1-this.es)/(1-n*n));if(a*a<1&&(a=1),isNaN(this.longc)){var s=NA(this.e,this.lat1,Math.sin(this.lat1)),l=NA(this.e,this.lat2,Math.sin(this.lat2));this.lat0>=0?this.el=(a+Math.sqrt(a*a-1))*Math.pow(o,this.bl):this.el=(a-Math.sqrt(a*a-1))*Math.pow(o,this.bl);var u=Math.pow(s,this.bl),c=Math.pow(l,this.bl);i=.5*((r=this.el/u)-1/r);var f=(this.el*this.el-c*u)/(this.el*this.el+c*u),h=(c-u)/(c+u),p=jA(this.long1-this.long2);this.long0=.5*(this.long1+this.long2)-Math.atan(f*Math.tan(.5*this.bl*p)/h)/this.bl,this.long0=jA(this.long0);var y=jA(this.long1-this.long0);this.gamma0=Math.atan(Math.sin(this.bl*y)/i),this.alpha=Math.asin(a*Math.sin(this.gamma0))}else r=this.lat0>=0?a+Math.sqrt(a*a-1):a-Math.sqrt(a*a-1),this.el=r*Math.pow(o,this.bl),i=.5*(r-1/r),this.gamma0=Math.asin(Math.sin(this.alpha)/a),this.long0=this.longc-Math.asin(i*Math.tan(this.gamma0))/this.bl;this.no_off?this.uc=0:this.lat0>=0?this.uc=this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha)):this.uc=-1*this.al/this.bl*Math.atan2(Math.sqrt(a*a-1),Math.cos(this.alpha))},forward:function(e){var t,n,r,i=e.x,o=e.y,a=jA(i-this.long0);if(Math.abs(Math.abs(o)-YM)<=$M)r=o>0?-1:1,n=this.al/this.bl*Math.log(Math.tan(nA+r*this.gamma0*.5)),t=-1*r*YM*this.al/this.bl;else{var s=NA(this.e,o,Math.sin(o)),l=this.el/Math.pow(s,this.bl),u=.5*(l-1/l),c=.5*(l+1/l),f=Math.sin(this.bl*a),h=(u*Math.sin(this.gamma0)-f*Math.cos(this.gamma0))/c;n=Math.abs(Math.abs(h)-1)<=$M?Number.POSITIVE_INFINITY:.5*this.al*Math.log((1-h)/(1+h))/this.bl,t=Math.abs(Math.cos(this.bl*a))<=$M?this.al*this.bl*a:this.al*Math.atan2(u*Math.cos(this.gamma0)+f*Math.sin(this.gamma0),Math.cos(this.bl*a))/this.bl}return this.no_rot?(e.x=this.x0+t,e.y=this.y0+n):(t-=this.uc,e.x=this.x0+n*Math.cos(this.alpha)+t*Math.sin(this.alpha),e.y=this.y0+t*Math.cos(this.alpha)-n*Math.sin(this.alpha)),e},inverse:function(e){var t,n;this.no_rot?(n=e.y-this.y0,t=e.x-this.x0):(n=(e.x-this.x0)*Math.cos(this.alpha)-(e.y-this.y0)*Math.sin(this.alpha),t=(e.y-this.y0)*Math.cos(this.alpha)+(e.x-this.x0)*Math.sin(this.alpha),t+=this.uc);var r=Math.exp(-1*this.bl*n/this.al),i=.5*(r-1/r),o=.5*(r+1/r),a=Math.sin(this.bl*t/this.al),s=(a*Math.cos(this.gamma0)+i*Math.sin(this.gamma0))/o,l=Math.pow(this.el/Math.sqrt((1+s)/(1-s)),1/this.bl);return Math.abs(s-1)<$M?(e.x=this.long0,e.y=YM):Math.abs(s+1)<$M?(e.x=this.long0,e.y=-1*YM):(e.y=RA(this.e,l),e.x=jA(this.long0-Math.atan2(i*Math.cos(this.gamma0)-a*Math.sin(this.gamma0),Math.cos(this.bl*t/this.al))/this.bl)),e},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","omerc"]};var QL={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<$M)){var e=this.b/this.a;this.e=Math.sqrt(1-e*e);var t=Math.sin(this.lat1),n=Math.cos(this.lat1),r=AA(this.e,t,n),i=NA(this.e,this.lat1,t),o=Math.sin(this.lat2),a=Math.cos(this.lat2),s=AA(this.e,o,a),l=NA(this.e,this.lat2,o),u=NA(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>$M?this.ns=Math.log(r/s)/Math.log(i/l):this.ns=t,isNaN(this.ns)&&(this.ns=t),this.f0=r/(this.ns*Math.pow(i,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(e){var t=e.x,n=e.y;Math.abs(2*Math.abs(n)-Math.PI)<=$M&&(n=LA(n)*(YM-2*$M));var r,i,o=Math.abs(Math.abs(n)-YM);if(o>$M)r=NA(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(r,this.ns);else{if((o=n*this.ns)<=0)return null;i=0}var a=this.ns*jA(t-this.long0);return e.x=this.k0*(i*Math.sin(a))+this.x0,e.y=this.k0*(this.rh-i*Math.cos(a))+this.y0,e},inverse:function(e){var t,n,r,i,o,a=(e.x-this.x0)/this.k0,s=this.rh-(e.y-this.y0)/this.k0;this.ns>0?(t=Math.sqrt(a*a+s*s),n=1):(t=-Math.sqrt(a*a+s*s),n=-1);var l=0;if(0!==t&&(l=Math.atan2(n*a,n*s)),0!==t||this.ns>0){if(n=1/this.ns,r=Math.pow(t/(this.a*this.f0),n),-9999===(i=RA(this.e,r)))return null}else i=-YM;return o=jA(l/this.ns+this.long0),e.x=o,e.y=i,e},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_2SP","lcc"]};var YL={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y,c=jA(l-this.long0);return t=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/t)-this.s45),r=-c*this.alfa,i=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(r)),o=Math.asin(Math.cos(n)*Math.sin(r)/Math.cos(i)),a=this.n*o,s=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(i/2+this.s45),this.n),e.y=s*Math.cos(a)/1,e.x=s*Math.sin(a)/1,this.czech||(e.y*=-1,e.x*=-1),e},inverse:function(e){var t,n,r,i,o,a,s,l=e.x;e.x=e.y,e.y=l,this.czech||(e.y*=-1,e.x*=-1),o=Math.sqrt(e.x*e.x+e.y*e.y),i=Math.atan2(e.y,e.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/o,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),t=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(i)),n=Math.asin(Math.cos(r)*Math.sin(i)/Math.cos(t)),e.x=this.long0-n/this.alfa,a=t,s=0;var u=0;do{e.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(t/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),Math.abs(a-e.y)<1e-10&&(s=1),a=e.y,u+=1}while(0===s&&u<15);return u>=15?null:e},names:["Krovak","krovak"]},XL=function(e,t,n,r,i){return e*i-t*Math.sin(2*i)+n*Math.sin(4*i)-r*Math.sin(6*i)},KL=function(e){return 1-.25*e*(1+e/16*(3+1.25*e))},ZL=function(e){return.375*e*(1+.25*e*(1+.46875*e))},$L=function(e){return.05859375*e*e*(1+.75*e)},ej=function(e){return e*e*e*(35/3072)},tj=function(e,t,n){var r=t*n;return e/Math.sqrt(1-r*r)},nj=function(e){return Math.abs(e)<YM?e:e-LA(e)*Math.PI},rj=function(e,t,n,r,i){var o,a;o=e/t;for(var s=0;s<15;s++)if(o+=a=(e-(t*o-n*Math.sin(2*o)+r*Math.sin(4*o)-i*Math.sin(6*o)))/(t-2*n*Math.cos(2*o)+4*r*Math.cos(4*o)-6*i*Math.cos(6*o)),Math.abs(a)<=1e-10)return o;return NaN};var ij={init:function(){this.sphere||(this.e0=KL(this.es),this.e1=ZL(this.es),this.e2=$L(this.es),this.e3=ej(this.es),this.ml0=this.a*XL(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(e){var t,n,r=e.x,i=e.y;if(r=jA(r-this.long0),this.sphere)t=this.a*Math.asin(Math.cos(i)*Math.sin(r)),n=this.a*(Math.atan2(Math.tan(i),Math.cos(r))-this.lat0);else{var o=Math.sin(i),a=Math.cos(i),s=tj(this.a,this.e,o),l=Math.tan(i)*Math.tan(i),u=r*Math.cos(i),c=u*u,f=this.es*a*a/(1-this.es);t=s*u*(1-c*l*(1/6-(8-l+8*f)*c/120)),n=this.a*XL(this.e0,this.e1,this.e2,this.e3,i)-this.ml0+s*o/a*c*(.5+(5-l+6*f)*c/24)}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r=e.x/this.a,i=e.y/this.a;if(this.sphere){var o=i+this.lat0;t=Math.asin(Math.sin(o)*Math.cos(r)),n=Math.atan2(Math.tan(r),Math.cos(o))}else{var a=this.ml0/this.a+i,s=rj(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-YM)<=$M)return e.x=this.long0,e.y=YM,i<0&&(e.y*=-1),e;var l=tj(this.a,this.e,Math.sin(s)),u=l*l*l/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(s),2),f=r*this.a/l,h=f*f;t=s-l*Math.tan(s)/u*f*f*(.5-(1+3*c)*f*f/24),n=f*(1-h*(c/3+(1+3*c)*c*h/15))/Math.cos(s)}return e.x=jA(n+this.long0),e.y=nj(t),e},names:["Cassini","Cassini_Soldner","cass"]},oj=function(e,t){var n;return e>1e-7?(1-e*e)*(t/(1-(n=e*t)*n)-.5/e*Math.log((1-n)/(1+n))):2*t};var aj=.3333333333333333,sj=.17222222222222222,lj=.10257936507936508,uj=.06388888888888888,cj=.0664021164021164,fj=.016415012942191543;var hj={init:function(){var e,t=Math.abs(this.lat0);if(Math.abs(t-YM)<$M?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(t)<$M?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=oj(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(e){var t,n=[];return n[0]=e*aj,t=e*e,n[0]+=t*sj,n[1]=t*uj,t*=e,n[0]+=t*lj,n[1]+=t*cj,n[2]=t*fj,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),e=Math.sin(this.lat0),this.sinb1=oj(this.e,e)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*e*e)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(e){var t,n,r,i,o,a,s,l,u,c,f=e.x,h=e.y;if(f=jA(f-this.long0),this.sphere){if(o=Math.sin(h),c=Math.cos(h),r=Math.cos(f),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+c*r:1+this.sinph0*o+this.cosph0*c*r)<=$M)return null;t=(n=Math.sqrt(2/n))*c*Math.sin(f),n*=this.mode===this.EQUIT?o:this.cosph0*o-this.sinph0*c*r}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(r=-r),Math.abs(h+this.phi0)<$M)return null;n=nA-.5*h,t=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(f),n*=r}}else{switch(s=0,l=0,u=0,r=Math.cos(f),i=Math.sin(f),o=Math.sin(h),a=oj(this.e,o),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(s=a/this.qp,l=Math.sqrt(1-s*s)),this.mode){case this.OBLIQ:u=1+this.sinb1*s+this.cosb1*l*r;break;case this.EQUIT:u=1+l*r;break;case this.N_POLE:u=YM+h,a=this.qp-a;break;case this.S_POLE:u=h-YM,a=this.qp+a}if(Math.abs(u)<$M)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:u=Math.sqrt(2/u),n=this.mode===this.OBLIQ?this.ymf*u*(this.cosb1*s-this.sinb1*l*r):(u=Math.sqrt(2/(1+l*r)))*s*this.ymf,t=this.xmf*u*l*i;break;case this.N_POLE:case this.S_POLE:a>=0?(t=(u=Math.sqrt(a))*i,n=r*(this.mode===this.S_POLE?u:-u)):t=n=0}}return e.x=this.a*t+this.x0,e.y=this.a*n+this.y0,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t,n,r,i,o,a,s,l,u,c,f=e.x/this.a,h=e.y/this.a;if(this.sphere){var p,y=0,d=0;if((n=.5*(p=Math.sqrt(f*f+h*h)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(d=Math.sin(n),y=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(p)<=$M?0:Math.asin(h*d/p),f*=d,h=y*p;break;case this.OBLIQ:n=Math.abs(p)<=$M?this.phi0:Math.asin(y*this.sinph0+h*d*this.cosph0/p),f*=d*this.cosph0,h=(y-Math.sin(n)*this.sinph0)*p;break;case this.N_POLE:h=-h,n=YM-n;break;case this.S_POLE:n-=YM}t=0!==h||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,h):0}else{if(s=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,h*=this.dd,(a=Math.sqrt(f*f+h*h))<$M)return e.x=0,e.y=this.phi0,e;i=2*Math.asin(.5*a/this.rq),r=Math.cos(i),f*=i=Math.sin(i),this.mode===this.OBLIQ?(s=r*this.sinb1+h*i*this.cosb1/a,o=this.qp*s,h=a*this.cosb1*r-h*this.sinb1*i):(s=h*i/a,o=this.qp*s,h=a*r)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(h=-h),!(o=f*f+h*h))return e.x=0,e.y=this.phi0,e;s=1-o/this.qp,this.mode===this.S_POLE&&(s=-s)}t=Math.atan2(f,h),l=Math.asin(s),u=this.apa,c=l+l,n=l+u[0]*Math.sin(c)+u[1]*Math.sin(c+c)+u[2]*Math.sin(c+c+c)}return e.x=jA(this.long0+t),e.y=n,e},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4},pj=function(e){return Math.abs(e)>1&&(e=e>1?1:-1),Math.asin(e)};var yj={init:function(){Math.abs(this.lat1+this.lat2)<$M||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=AA(this.e3,this.sin_po,this.cos_po),this.qs1=oj(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=AA(this.e3,this.sin_po,this.cos_po),this.qs2=oj(this.e3,this.sin_po,this.cos_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=oj(this.e3,this.sin_po,this.cos_po),Math.abs(this.lat1-this.lat2)>$M?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(e){var t=e.x,n=e.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var r=oj(this.e3,this.sin_phi,this.cos_phi),i=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,o=this.ns0*jA(t-this.long0),a=i*Math.sin(o)+this.x0,s=this.rh-i*Math.cos(o)+this.y0;return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns0>=0?(t=Math.sqrt(e.x*e.x+e.y*e.y),r=1):(t=-Math.sqrt(e.x*e.x+e.y*e.y),r=-1),i=0,0!==t&&(i=Math.atan2(r*e.x,r*e.y)),r=t*this.ns0/this.a,this.sphere?a=Math.asin((this.c-r*r)/(2*this.ns0)):(n=(this.c-r*r)/this.ns0,a=this.phi1z(this.e3,n)),o=jA(i/this.ns0+this.long0),e.x=o,e.y=a,e},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(e,t){var n,r,i,o,a,s=pj(.5*t);if(e<$M)return s;for(var l=e*e,u=1;u<=25;u++)if(n=Math.sin(s),r=Math.cos(s),s+=a=.5*(o=1-(i=e*n)*i)*o/r*(t/(1-l)-n/o+.5/e*Math.log((1-i)/(1+i))),Math.abs(a)<=1e-7)return s;return null}};var dj={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y;return r=jA(l-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),(o=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(o)<=$M?(a=this.x0+1*this.a*n*Math.sin(r)/o,s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)/o):(a=this.x0+this.infinity_dist*n*Math.sin(r),s=this.y0+this.infinity_dist*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a;return e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,e.x/=this.k0,e.y/=this.k0,(t=Math.sqrt(e.x*e.x+e.y*e.y))?(i=Math.atan2(t,this.rc),n=Math.sin(i),r=Math.cos(i),a=pj(r*this.sin_p14+e.y*n*this.cos_p14/t),o=Math.atan2(e.x*n,t*this.cos_p14*r-e.y*this.sin_p14*n),o=jA(this.long0+o)):(a=this.phic0,o=0),e.x=o,e.y=a,e},names:["gnom"]},mj=function(e,t){var n=1-(1-e*e)/(2*e)*Math.log((1-e)/(1+e));if(Math.abs(Math.abs(t)-n)<1e-6)return t<0?-1*YM:YM;for(var r,i,o,a,s=Math.asin(.5*t),l=0;l<30;l++)if(i=Math.sin(s),o=Math.cos(s),a=e*i,s+=r=Math.pow(1-a*a,2)/(2*o)*(t/(1-e*e)-i/(1-a*a)+.5/e*Math.log((1-a)/(1+a))),Math.abs(r)<=1e-10)return s;return NaN};var vj={init:function(){this.sphere||(this.k0=AA(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(e){var t,n,r=e.x,i=e.y,o=jA(r-this.long0);if(this.sphere)t=this.x0+this.a*o*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(i)/Math.cos(this.lat_ts);else{var a=oj(this.e,Math.sin(i));t=this.x0+this.a*this.k0*o,n=this.y0+this.a*a*.5/this.k0}return e.x=t,e.y=n,e},inverse:function(e){var t,n;return e.x-=this.x0,e.y-=this.y0,this.sphere?(t=jA(this.long0+e.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(e.y/this.a*Math.cos(this.lat_ts))):(n=mj(this.e,2*e.y*this.k0/this.a),t=jA(this.long0+e.x/(this.a*this.k0))),e.x=t,e.y=n,e},names:["cea"]};var gj={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(e){var t=e.x,n=e.y,r=jA(t-this.long0),i=nj(n-this.lat0);return e.x=this.x0+this.a*r*this.rc,e.y=this.y0+this.a*i,e},inverse:function(e){var t=e.x,n=e.y;return e.x=jA(this.long0+(t-this.x0)/(this.a*this.rc)),e.y=nj(this.lat0+(n-this.y0)/this.a),e},names:["Equirectangular","Equidistant_Cylindrical","eqc"]},bj=20;var Sj={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=KL(this.es),this.e1=ZL(this.es),this.e2=$L(this.es),this.e3=ej(this.es),this.ml0=this.a*XL(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(e){var t,n,r,i=e.x,o=e.y,a=jA(i-this.long0);if(r=a*Math.sin(o),this.sphere)Math.abs(o)<=$M?(t=this.a*a,n=-1*this.a*this.lat0):(t=this.a*Math.sin(r)/Math.tan(o),n=this.a*(nj(o-this.lat0)+(1-Math.cos(r))/Math.tan(o)));else if(Math.abs(o)<=$M)t=this.a*a,n=-1*this.ml0;else{var s=tj(this.a,this.e,Math.sin(o))/Math.tan(o);t=s*Math.sin(r),n=this.a*XL(this.e0,this.e1,this.e2,this.e3,o)-this.ml0+s*(1-Math.cos(r))}return e.x=t+this.x0,e.y=n+this.y0,e},inverse:function(e){var t,n,r,i,o,a,s,l,u;if(r=e.x-this.x0,i=e.y-this.y0,this.sphere)if(Math.abs(i+this.a*this.lat0)<=$M)t=jA(r/this.a+this.long0),n=0;else{var c;for(a=this.lat0+i/this.a,s=r*r/this.a/this.a+a*a,l=a,o=bj;o;--o)if(l+=u=-1*(a*(l*(c=Math.tan(l))+1)-l-.5*(l*l+s)*c)/((l-a)/c-1),Math.abs(u)<=$M){n=l;break}t=jA(this.long0+Math.asin(r*Math.tan(l)/this.a)/Math.sin(n))}else if(Math.abs(i+this.ml0)<=$M)n=0,t=jA(this.long0+r/this.a);else{var f,h,p,y,d;for(a=(this.ml0+i)/this.a,s=r*r/this.a/this.a+a*a,l=a,o=bj;o;--o)if(d=this.e*Math.sin(l),f=Math.sqrt(1-d*d)*Math.tan(l),h=this.a*XL(this.e0,this.e1,this.e2,this.e3,l),p=this.e0-2*this.e1*Math.cos(2*l)+4*this.e2*Math.cos(4*l)-6*this.e3*Math.cos(6*l),l-=u=(a*(f*(y=h/this.a)+1)-y-.5*f*(y*y+s))/(this.es*Math.sin(2*l)*(y*y+s-2*a*y)/(4*f)+(a-y)*(f*p-2/Math.sin(2*l))-p),Math.abs(u)<=$M){n=l;break}f=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),t=jA(this.long0+Math.asin(r*f/this.a)/Math.sin(n))}return e.x=t,e.y=n,e},names:["Polyconic","poly"]};var _j={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(e){var t,n=e.x,r=e.y-this.lat0,i=n-this.long0,o=r/QM*1e-5,a=i,s=1,l=0;for(t=1;t<=10;t++)s*=o,l+=this.A[t]*s;var u,c=l,f=a,h=1,p=0,y=0,d=0;for(t=1;t<=6;t++)u=p*c+h*f,h=h*c-p*f,p=u,y=y+this.B_re[t]*h-this.B_im[t]*p,d=d+this.B_im[t]*h+this.B_re[t]*p;return e.x=d*this.a+this.x0,e.y=y*this.a+this.y0,e},inverse:function(e){var t,n,r=e.x,i=e.y,o=r-this.x0,a=(i-this.y0)/this.a,s=o/this.a,l=1,u=0,c=0,f=0;for(t=1;t<=6;t++)n=u*a+l*s,l=l*a-u*s,u=n,c=c+this.C_re[t]*l-this.C_im[t]*u,f=f+this.C_im[t]*l+this.C_re[t]*u;for(var h=0;h<this.iterations;h++){var p,y=c,d=f,m=a,v=s;for(t=2;t<=6;t++)p=d*c+y*f,y=y*c-d*f,d=p,m+=(t-1)*(this.B_re[t]*y-this.B_im[t]*d),v+=(t-1)*(this.B_im[t]*y+this.B_re[t]*d);y=1,d=0;var g=this.B_re[1],b=this.B_im[1];for(t=2;t<=6;t++)p=d*c+y*f,y=y*c-d*f,d=p,g+=t*(this.B_re[t]*y-this.B_im[t]*d),b+=t*(this.B_im[t]*y+this.B_re[t]*d);var S=g*g+b*b;c=(m*g+v*b)/S,f=(v*g-m*b)/S}var _=c,w=f,O=1,x=0;for(t=1;t<=9;t++)O*=_,x+=this.D[t]*O;var C=this.lat0+x*QM*1e5,T=this.long0+w;return e.x=T,e.y=C,e},names:["New_Zealand_Map_Grid","nzmg"]};var wj={init:function(){},forward:function(e){var t=e.x,n=e.y,r=jA(t-this.long0),i=this.x0+this.a*r,o=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return e.x=i,e.y=o,e},inverse:function(e){e.x-=this.x0,e.y-=this.y0;var t=jA(this.long0+e.x/this.a),n=2.5*(Math.atan(Math.exp(.8*e.y/this.a))-Math.PI/4);return e.x=t,e.y=n,e},names:["Miller_Cylindrical","mill"]},Oj=20;var xj={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=EL(this.es)},forward:function(e){var t,n,r=e.x,i=e.y;if(r=jA(r-this.long0),this.sphere){if(this.m)for(var o=this.n*Math.sin(i),a=Oj;a;--a){var s=(this.m*i+Math.sin(i)-o)/(this.m+Math.cos(i));if(i-=s,Math.abs(s)<$M)break}else i=1!==this.n?Math.asin(this.n*Math.sin(i)):i;t=this.a*this.C_x*r*(this.m+Math.cos(i)),n=this.a*this.C_y*i}else{var l=Math.sin(i),u=Math.cos(i);n=this.a*kL(i,l,u,this.en),t=this.a*r*u/Math.sqrt(1-this.es*l*l)}return e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i;return e.x-=this.x0,r=e.x/this.a,e.y-=this.y0,t=e.y/this.a,this.sphere?(t/=this.C_y,r/=this.C_x*(this.m+Math.cos(t)),this.m?t=pj((this.m*t+Math.sin(t))/this.n):1!==this.n&&(t=pj(Math.sin(t)/this.n)),r=jA(r+this.long0),t=nj(t)):(t=ML(e.y/this.a,this.es,this.en),(i=Math.abs(t))<YM?(i=Math.sin(t),n=this.long0+e.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(t)),r=jA(n)):i-$M<YM&&(r=this.long0)),e.x=r,e.y=t,e},names:["Sinusoidal","sinu"]};var Cj={init:function(){},forward:function(e){for(var t=e.x,n=e.y,r=jA(t-this.long0),i=n,o=Math.PI*Math.sin(n);;){var a=-(i+Math.sin(i)-o)/(1+Math.cos(i));if(i+=a,Math.abs(a)<$M)break}i/=2,Math.PI/2-Math.abs(n)<$M&&(r=0);var s=.900316316158*this.a*r*Math.cos(i)+this.x0,l=1.4142135623731*this.a*Math.sin(i)+this.y0;return e.x=s,e.y=l,e},inverse:function(e){var t,n;e.x-=this.x0,e.y-=this.y0,n=e.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),t=Math.asin(n);var r=jA(this.long0+e.x/(.900316316158*this.a*Math.cos(t)));r<-Math.PI&&(r=-Math.PI),r>Math.PI&&(r=Math.PI),n=(2*t+Math.sin(2*t))/Math.PI,Math.abs(n)>1&&(n=1);var i=Math.asin(n);return e.x=r,e.y=i,e},names:["Mollweide","moll"]};var Tj={init:function(){Math.abs(this.lat1+this.lat2)<$M||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=KL(this.es),this.e1=ZL(this.es),this.e2=$L(this.es),this.e3=ej(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=AA(this.e,this.sinphi,this.cosphi),this.ml1=XL(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<$M?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=AA(this.e,this.sinphi,this.cosphi),this.ml2=XL(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=XL(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(e){var t,n=e.x,r=e.y;if(this.sphere)t=this.a*(this.g-r);else{var i=XL(this.e0,this.e1,this.e2,this.e3,r);t=this.a*(this.g-i)}var o=this.ns*jA(n-this.long0),a=this.x0+t*Math.sin(o),s=this.y0+this.rh-t*Math.cos(o);return e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i;e.x-=this.x0,e.y=this.rh-e.y+this.y0,this.ns>=0?(n=Math.sqrt(e.x*e.x+e.y*e.y),t=1):(n=-Math.sqrt(e.x*e.x+e.y*e.y),t=-1);var o=0;if(0!==n&&(o=Math.atan2(t*e.x,t*e.y)),this.sphere)return i=jA(this.long0+o/this.ns),r=nj(this.g-n/this.a),e.x=i,e.y=r,e;var a=this.g-n/this.a;return r=rj(a,this.e0,this.e1,this.e2,this.e3),i=jA(this.long0+o/this.ns),e.x=i,e.y=r,e},names:["Equidistant_Conic","eqdc"]};var Pj={init:function(){this.R=this.a},forward:function(e){var t,n,r=e.x,i=e.y,o=jA(r-this.long0);Math.abs(i)<=$M&&(t=this.x0+this.R*o,n=this.y0);var a=pj(2*Math.abs(i/Math.PI));(Math.abs(o)<=$M||Math.abs(Math.abs(i)-YM)<=$M)&&(t=this.x0,n=i>=0?this.y0+Math.PI*this.R*Math.tan(.5*a):this.y0+Math.PI*this.R*-Math.tan(.5*a));var s=.5*Math.abs(Math.PI/o-o/Math.PI),l=s*s,u=Math.sin(a),c=Math.cos(a),f=c/(u+c-1),h=f*f,p=f*(2/u-1),y=p*p,d=Math.PI*this.R*(s*(f-y)+Math.sqrt(l*(f-y)*(f-y)-(y+l)*(h-y)))/(y+l);o<0&&(d=-d),t=this.x0+d;var m=l+f;return d=Math.PI*this.R*(p*m-s*Math.sqrt((y+l)*(l+1)-m*m))/(y+l),n=i>=0?this.y0+d:this.y0-d,e.x=t,e.y=n,e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,f,h;return e.x-=this.x0,e.y-=this.y0,f=Math.PI*this.R,o=(r=e.x/f)*r+(i=e.y/f)*i,f=3*(i*i/(l=-2*(a=-Math.abs(i)*(1+o))+1+2*i*i+o*o)+(2*(s=a-2*i*i+r*r)*s*s/l/l/l-9*a*s/l/l)/27)/(u=(a-s*s/3/l)/l)/(c=2*Math.sqrt(-u/3)),Math.abs(f)>1&&(f=f>=0?1:-1),h=Math.acos(f)/3,n=e.y>=0?(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI:-(-c*Math.cos(h+Math.PI/3)-s/3/l)*Math.PI,t=Math.abs(r)<$M?this.long0:jA(this.long0+Math.PI*(o-1+Math.sqrt(1+2*(r*r-i*i)+o*o))/2/r),e.x=t,e.y=n,e},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var Ej={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b,S,_,w,O=e.x,x=e.y,C=Math.sin(e.y),T=Math.cos(e.y),P=jA(O-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=$M?(e.x=this.x0+this.a*(YM-x)*Math.sin(P),e.y=this.y0-this.a*(YM-x)*Math.cos(P),e):Math.abs(this.sin_p12+1)<=$M?(e.x=this.x0+this.a*(YM+x)*Math.sin(P),e.y=this.y0+this.a*(YM+x)*Math.cos(P),e):(g=this.sin_p12*C+this.cos_p12*T*Math.cos(P),v=(m=Math.acos(g))/Math.sin(m),e.x=this.x0+this.a*v*T*Math.sin(P),e.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*T*Math.cos(P)),e):(t=KL(this.es),n=ZL(this.es),r=$L(this.es),i=ej(this.es),Math.abs(this.sin_p12-1)<=$M?(o=this.a*XL(t,n,r,i,YM),a=this.a*XL(t,n,r,i,x),e.x=this.x0+(o-a)*Math.sin(P),e.y=this.y0-(o-a)*Math.cos(P),e):Math.abs(this.sin_p12+1)<=$M?(o=this.a*XL(t,n,r,i,YM),a=this.a*XL(t,n,r,i,x),e.x=this.x0+(o+a)*Math.sin(P),e.y=this.y0+(o+a)*Math.cos(P),e):(s=C/T,l=tj(this.a,this.e,this.sin_p12),u=tj(this.a,this.e,C),c=Math.atan((1-this.es)*s+this.es*l*this.sin_p12/(u*T)),b=0===(f=Math.atan2(Math.sin(P),this.cos_p12*Math.tan(c)-this.sin_p12*Math.cos(P)))?Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.abs(Math.abs(f)-Math.PI)<=$M?-Math.asin(this.cos_p12*Math.sin(c)-this.sin_p12*Math.cos(c)):Math.asin(Math.sin(P)*Math.cos(c)/Math.sin(f)),h=this.e*this.sin_p12/Math.sqrt(1-this.es),m=l*b*(1-(S=b*b)*(d=(p=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*p)*(1-d)/6+(_=S*b)/8*(y=h*p)*(1-2*d)+(w=_*b)/120*(d*(4-7*d)-3*h*h*(1-7*d))-w*b/48*y),e.x=this.x0+m*Math.sin(f),e.y=this.y0+m*Math.cos(f),e))},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,f,h,p,y,d,m,v,g,b,S,_,w;if(e.x-=this.x0,e.y-=this.y0,this.sphere){if((t=Math.sqrt(e.x*e.x+e.y*e.y))>2*YM*this.a)return;return n=t/this.a,r=Math.sin(n),i=Math.cos(n),o=this.long0,Math.abs(t)<=$M?a=this.lat0:(a=pj(i*this.sin_p12+e.y*r*this.cos_p12/t),s=Math.abs(this.lat0)-YM,o=Math.abs(s)<=$M?this.lat0>=0?jA(this.long0+Math.atan2(e.x,-e.y)):jA(this.long0-Math.atan2(-e.x,e.y)):jA(this.long0+Math.atan2(e.x*r,t*this.cos_p12*i-e.y*this.sin_p12*r))),e.x=o,e.y=a,e}return l=KL(this.es),u=ZL(this.es),c=$L(this.es),f=ej(this.es),Math.abs(this.sin_p12-1)<=$M?(h=this.a*XL(l,u,c,f,YM),t=Math.sqrt(e.x*e.x+e.y*e.y),a=rj((h-t)/this.a,l,u,c,f),o=jA(this.long0+Math.atan2(e.x,-1*e.y)),e.x=o,e.y=a,e):Math.abs(this.sin_p12+1)<=$M?(h=this.a*XL(l,u,c,f,YM),t=Math.sqrt(e.x*e.x+e.y*e.y),a=rj((t-h)/this.a,l,u,c,f),o=jA(this.long0+Math.atan2(e.x,e.y)),e.x=o,e.y=a,e):(t=Math.sqrt(e.x*e.x+e.y*e.y),d=Math.atan2(e.x,e.y),p=tj(this.a,this.e,this.sin_p12),m=Math.cos(d),g=-(v=this.e*this.cos_p12*m)*v/(1-this.es),b=3*this.es*(1-g)*this.sin_p12*this.cos_p12*m/(1-this.es),w=1-g*(_=(S=t/p)-g*(1+g)*Math.pow(S,3)/6-b*(1+3*g)*Math.pow(S,4)/24)*_/2-S*_*_*_/6,y=Math.asin(this.sin_p12*Math.cos(_)+this.cos_p12*Math.sin(_)*m),o=jA(this.long0+Math.asin(Math.sin(d)*Math.sin(_)/Math.cos(y))),a=Math.atan((1-this.es*w*this.sin_p12/Math.sin(y))*Math.tan(y)/(1-this.es)),e.x=o,e.y=a,e)},names:["Azimuthal_Equidistant","aeqd"]};var kj={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(e){var t,n,r,i,o,a,s,l=e.x,u=e.y;return r=jA(l-this.long0),t=Math.sin(u),n=Math.cos(u),i=Math.cos(r),((o=this.sin_p14*t+this.cos_p14*n*i)>0||Math.abs(o)<=$M)&&(a=1*this.a*n*Math.sin(r),s=this.y0+1*this.a*(this.cos_p14*t-this.sin_p14*n*i)),e.x=a,e.y=s,e},inverse:function(e){var t,n,r,i,o,a,s;return e.x-=this.x0,e.y-=this.y0,t=Math.sqrt(e.x*e.x+e.y*e.y),n=pj(t/this.a),r=Math.sin(n),i=Math.cos(n),a=this.long0,Math.abs(t)<=$M?(s=this.lat0,e.x=a,e.y=s,e):(s=pj(i*this.sin_p14+e.y*r*this.cos_p14/t),o=Math.abs(this.lat0)-YM,Math.abs(o)<=$M?(a=this.lat0>=0?jA(this.long0+Math.atan2(e.x,-e.y)):jA(this.long0-Math.atan2(-e.x,e.y)),e.x=a,e.y=s,e):(a=jA(this.long0+Math.atan2(e.x*r,t*this.cos_p14*i-e.y*this.sin_p14*r)),e.x=a,e.y=s,e))},names:["ortho"]},Mj={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},Aj={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function Lj(e,t,n,r){var i;return e<$M?(r.value=Aj.AREA_0,i=0):(i=Math.atan2(t,n),Math.abs(i)<=nA?r.value=Aj.AREA_0:i>nA&&i<=YM+nA?(r.value=Aj.AREA_1,i-=YM):i>YM+nA||i<=-(YM+nA)?(r.value=Aj.AREA_2,i=i>=0?i-iA:i+iA):(r.value=Aj.AREA_3,i+=YM)),i}function jj(e,t){var n=e+t;return n<-iA?n+=rA:n>+iA&&(n-=rA),n}var Nj={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=YM-nA/2?this.face=Mj.TOP:this.lat0<=-(YM-nA/2)?this.face=Mj.BOTTOM:Math.abs(this.long0)<=nA?this.face=Mj.FRONT:Math.abs(this.long0)<=YM+nA?this.face=this.long0>0?Mj.RIGHT:Mj.LEFT:this.face=Mj.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(e){var t,n,r,i,o,a,s={x:0,y:0},l={value:0};if(e.x-=this.long0,t=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(e.y)):e.y,n=e.x,this.face===Mj.TOP)i=YM-t,n>=nA&&n<=YM+nA?(l.value=Aj.AREA_0,r=n-YM):n>YM+nA||n<=-(YM+nA)?(l.value=Aj.AREA_1,r=n>0?n-iA:n+iA):n>-(YM+nA)&&n<=-nA?(l.value=Aj.AREA_2,r=n+YM):(l.value=Aj.AREA_3,r=n);else if(this.face===Mj.BOTTOM)i=YM+t,n>=nA&&n<=YM+nA?(l.value=Aj.AREA_0,r=-n+YM):n<nA&&n>=-nA?(l.value=Aj.AREA_1,r=-n):n<-nA&&n>=-(YM+nA)?(l.value=Aj.AREA_2,r=-n-YM):(l.value=Aj.AREA_3,r=n>0?-n+iA:-n-iA);else{var u,c,f,h,p,y;this.face===Mj.RIGHT?n=jj(n,+YM):this.face===Mj.BACK?n=jj(n,+iA):this.face===Mj.LEFT&&(n=jj(n,-YM)),h=Math.sin(t),p=Math.cos(t),y=Math.sin(n),u=p*Math.cos(n),c=p*y,f=h,this.face===Mj.FRONT?r=Lj(i=Math.acos(u),f,c,l):this.face===Mj.RIGHT?r=Lj(i=Math.acos(c),f,-u,l):this.face===Mj.BACK?r=Lj(i=Math.acos(-u),f,-c,l):this.face===Mj.LEFT?r=Lj(i=Math.acos(-c),f,u,l):(i=r=0,l.value=Aj.AREA_0)}return a=Math.atan(12/iA*(r+Math.acos(Math.sin(r)*Math.cos(nA))-YM)),o=Math.sqrt((1-Math.cos(i))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(r))))),l.value===Aj.AREA_1?a+=YM:l.value===Aj.AREA_2?a+=iA:l.value===Aj.AREA_3&&(a+=1.5*iA),s.x=o*Math.cos(a),s.y=o*Math.sin(a),s.x=s.x*this.a+this.x0,s.y=s.y*this.a+this.y0,e.x=s.x,e.y=s.y,e},inverse:function(e){var t,n,r,i,o,a,s,l,u,c,f,h,p={lam:0,phi:0},y={value:0};if(e.x=(e.x-this.x0)/this.a,e.y=(e.y-this.y0)/this.a,n=Math.atan(Math.sqrt(e.x*e.x+e.y*e.y)),t=Math.atan2(e.y,e.x),e.x>=0&&e.x>=Math.abs(e.y)?y.value=Aj.AREA_0:e.y>=0&&e.y>=Math.abs(e.x)?(y.value=Aj.AREA_1,t-=YM):e.x<0&&-e.x>=Math.abs(e.y)?(y.value=Aj.AREA_2,t=t<0?t+iA:t-iA):(y.value=Aj.AREA_3,t+=YM),u=iA/12*Math.tan(t),o=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(o),(s=1-(r=Math.cos(t))*r*(i=Math.tan(n))*i*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?s=-1:s>1&&(s=1),this.face===Mj.TOP)l=Math.acos(s),p.phi=YM-l,y.value===Aj.AREA_0?p.lam=a+YM:y.value===Aj.AREA_1?p.lam=a<0?a+iA:a-iA:y.value===Aj.AREA_2?p.lam=a-YM:p.lam=a;else if(this.face===Mj.BOTTOM)l=Math.acos(s),p.phi=l-YM,y.value===Aj.AREA_0?p.lam=-a+YM:y.value===Aj.AREA_1?p.lam=-a:y.value===Aj.AREA_2?p.lam=-a-YM:p.lam=a<0?-a-iA:-a+iA;else{var d,m,v;u=(d=s)*d,m=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),y.value===Aj.AREA_1?(u=m,m=-v,v=u):y.value===Aj.AREA_2?(m=-m,v=-v):y.value===Aj.AREA_3&&(u=m,m=v,v=-u),this.face===Mj.RIGHT?(u=d,d=-m,m=u):this.face===Mj.BACK?(d=-d,m=-m):this.face===Mj.LEFT&&(u=d,d=m,m=-u),p.phi=Math.acos(-v)-YM,p.lam=Math.atan2(m,d),this.face===Mj.RIGHT?p.lam=jj(p.lam,-YM):this.face===Mj.BACK?p.lam=jj(p.lam,-iA):this.face===Mj.LEFT&&(p.lam=jj(p.lam,+YM))}return 0!==this.es&&(c=p.phi<0?1:0,f=Math.tan(p.phi),h=this.b/Math.sqrt(f*f+this.one_minus_f_squared),p.phi=Math.atan(Math.sqrt(this.a*this.a-h*h)/(this.one_minus_f*h)),c&&(p.phi=-p.phi)),p.lam+=this.long0,e.x=p.lam,e.y=p.phi,e},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},Rj=[[1,2.2199e-17,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],Ij=[[-5.20417e-18,.0124,1.21431e-18,-8.45284e-11],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],Dj=.8487,Fj=1.3523,Bj=tA/5,Uj=1/Bj,Gj=18,zj=function(e,t){return e[0]+t*(e[1]+t*(e[2]+t*e[3]))},Vj=function(e,t){return e[1]+t*(2*e[2]+3*t*e[3])};var Hj,Jj={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(e){var t=jA(e.x-this.long0),n=Math.abs(e.y),r=Math.floor(n*Bj);r<0?r=0:r>=Gj&&(r=Gj-1),n=tA*(n-Uj*r);var i={x:zj(Rj[r],n)*t,y:zj(Ij[r],n)};return e.y<0&&(i.y=-i.y),i.x=i.x*this.a*Dj+this.x0,i.y=i.y*this.a*Fj+this.y0,i},inverse:function(e){var t={x:(e.x-this.x0)/(this.a*Dj),y:Math.abs(e.y-this.y0)/(this.a*Fj)};if(t.y>=1)t.x/=Rj[Gj][0],t.y=e.y<0?-YM:YM;else{var n=Math.floor(t.y*Gj);for(n<0?n=0:n>=Gj&&(n=Gj-1);;)if(Ij[n][0]>t.y)--n;else{if(!(Ij[n+1][0]<=t.y))break;++n}var r=Ij[n],i=5*(t.y-r[0])/(Ij[n+1][0]-r[0]);i=function(e,t,n,r){for(var i=t;r;--r){var o=e(i);if(i-=o,Math.abs(o)<n)break}return i}(function(e){return(zj(r,e)-t.y)/Vj(r,e)},i,$M,100),t.x/=zj(Rj[n],i),t.y=(5*n+i)*eA,e.y<0&&(t.y=-t.y)}return t.x=jA(t.x+this.long0),t},names:["Robinson","robin"]};oL.defaultDatum="WGS84",oL.Proj=QA,oL.WGS84=new oL.Proj("WGS84"),oL.Point=CL,oL.toPoint=ZA,oL.defs=TA,oL.transform=tL,oL.mgrs=yL,oL.version=TL.a,(Hj=oL).Proj.projections.add(AL),Hj.Proj.projections.add(FL),Hj.Proj.projections.add(UL),Hj.Proj.projections.add(HL),Hj.Proj.projections.add(JL),Hj.Proj.projections.add(qL),Hj.Proj.projections.add(WL),Hj.Proj.projections.add(QL),Hj.Proj.projections.add(YL),Hj.Proj.projections.add(ij),Hj.Proj.projections.add(hj),Hj.Proj.projections.add(yj),Hj.Proj.projections.add(dj),Hj.Proj.projections.add(vj),Hj.Proj.projections.add(gj),Hj.Proj.projections.add(Sj),Hj.Proj.projections.add(_j),Hj.Proj.projections.add(wj),Hj.Proj.projections.add(xj),Hj.Proj.projections.add(Cj),Hj.Proj.projections.add(Tj),Hj.Proj.projections.add(Pj),Hj.Proj.projections.add(Ej),Hj.Proj.projections.add(kj),Hj.Proj.projections.add(Nj),Hj.Proj.projections.add(Jj);var qj=oL;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/window.proj4=qj,window.Proj4js=qj,BM.a.Proj={},BM.a.Proj._isProj4Obj=function(e){return void 0!==e.inverse&&void 0!==e.forward},BM.a.Proj.Projection=BM.a.Class.extend({initialize:function(e,t,n){var r=BM.a.Proj._isProj4Obj(e);this._proj=r?e:this._projFromCodeDef(e,t);var i=n;BM.a.Util.isArray(n)&&(i=BM.a.bounds(n)),this.bounds=r?t:i},project:function(e){var t=this._proj.forward([e.lng,e.lat]);return new BM.a.Point(t[0],t[1])},unproject:function(e,t){this.bounds&&(e.x=e.x<this.bounds.min.x?this.bounds.min.x:e.x>this.bounds.max.x?this.bounds.max.x:e.x,e.y=e.y<this.bounds.min.y?this.bounds.min.y:e.y>this.bounds.max.y?this.bounds.max.y:e.y);var n=this._proj.inverse([e.x,e.y]);return new BM.a.LatLng(n[1],n[0],t)},_projFromCodeDef:function(e,t){if(t)qj.defs(e,t);else if(void 0===qj.defs[e]){var n=e.split(":");if(n.length>3&&(e=n[n.length-3]+":"+n[n.length-1]),void 0===qj.defs[e])throw"No projection definition for code "+e}return qj(e)},getUnits:function(){return this._proj.oProj.units||"degrees"}});var Wj=BM.a.Class.extend({includes:BM.a.CRS,options:{transformation:new BM.a.Transformation(1,0,-1,0)},initialize:function(e,t){var n,r,i;if(BM.a.Proj._isProj4Obj(e)?(n=(r=e).srsCode,t=t||{},this.projection=new BM.a.Proj.Projection(r,t.bounds)):(n=e,i=(t=t||{}).def||"",this.projection=new BM.a.Proj.Projection(n,i,t.bounds)),BM.a.Util.setOptions(this,t),this.code=n,this.transformation=this.options.transformation,this.options.dpi=this.options.dpi||96,this.options.bounds&&(this.options.bounds=BM.a.bounds(this.options.bounds)),!this.options.origin&&this.options.bounds&&(this.options.origin=[this.options.bounds.min.x,this.options.bounds.max.y]),this.options.origin&&(this.options.origin instanceof BM.a.Point&&(this.options.origin=[this.options.origin.x,this.options.origin.y]),this.transformation=new BM.a.Transformation(1,-this.options.origin[0],-1,this.options.origin[1])),this.options.scales&&this.options.scales.length>0)this.scales=this.options.scales,this._scales=this._toProj4Scales(this.options.scales,this.options.dpi);else if(this.options.scaleDenominators&&this.options.scaleDenominators.length>0){this.scales=[];for(var o=0;o<this.options.scaleDenominators.length;o++)this.scales[o]=1/this.options.scaleDenominators[o];this._scales=this._toProj4Scales(this.scales,this.options.dpi)}else if(this.options.resolutions&&this.options.resolutions.length>0){this._scales=[];for(var a=this.options.resolutions.length-1;a>=0;a--)this.options.resolutions[a]&&(this._scales[a]=1/this.options.resolutions[a])}else this.options.bounds&&(this._scales=this._getDefaultProj4ScalesByBounds(this.options.bounds));this._rectify(),this.infinite=!this.options.bounds},_rectify:function(){if(this._scales&&(this.resolutions||(this.resolutions=[],this.resolutions=this._proj4ScalesToResolutions(this._scales)),!this.scales)){this.scales=[];for(var e=0;e<this.resolutions.length;e++){var t=this.resolutions[e]*this.options.dpi*(1/.0254)*this._getMeterPerMapUnit(this.projection.getUnits());this.scales[e]=1/t}}},scale:function(e){var t,n=Math.floor(e);return e===n?this._scales[e]:(t=this._scales[n])+(this._scales[n+1]-t)*(e-n)},zoom:function(e){var t,n,r=this._closestElement(this._scales,e),i=this._scales.indexOf(r);return r?e===r?i:(n=i+1,void 0===(t=this._scales[n])?i:(e-r)/(t-r)+i):0},distance:BM.a.CRS.Earth.distance,R:BM.a.CRS.Earth.R,_closestElement:function(e,t){for(var n,r=e.length;r--;)e[r]<=t&&(void 0===n||n<e[r])&&(n=e[r]);return n},_proj4ScalesToResolutions:function(e){var t=[];if(!e)return t;for(var n=0;n<e.length;n++)t[n]=1/e[n];return t},_toProj4Scales:function(e,t){var n=[];if(!e)return n;for(var r=0;r<e.length;r++){var i=this.projection?this._getMeterPerMapUnit(this.projection.getUnits()):1;n[r]=1/(.0254/((t||96)*e[r])/i)}return n},_getMeterPerMapUnit:function(e){var t=1;return"meter"===e?t=1:"degrees"===e?t=2*Math.PI*6378137/360:"kilometer"===e?t=.001:"inch"===e?t=1/.025399999918:"feet"===e&&(t=.3048),t},_getDefaultProj4ScalesByBounds:function(e){if(!e)return[];for(var t=e.getSize(),n=Math.max(t.x,t.y)/256,r=[],i=0;i<23;i++)r[i]=Math.pow(2,i)/n;return r}}),Qj=function(e,t){return new Wj(e,t)};BM.a.Proj.CRS=Qj;for(
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var Yj,Xj=BM.a.CRS.Baidu=BM.a.extend({},BM.a.CRS.EPSG3857,{code:"Baidu",scale:function(e){return 6378137*Math.PI*2/Math.pow(2,18-e)},transformation:(Yj=.5/(6378137*Math.PI),new BM.a.Transformation(Yj,0,-Yj,0))}),Kj=[],Zj=1;Zj<19;Zj++)Kj.push(1.40625/Math.pow(2,Zj));for(var $j=BM.a.CRS.TianDiTu_WGS84=BM.a.Proj.CRS("EPSG:4326",{origin:[-180,90],resolutions:Kj,bounds:BM.a.bounds([-180,-90],[180,90])}),eN=[],tN=1;tN<19;tN++)eN.push(156543.03392804062/Math.pow(2,tN));var nN=BM.a.CRS.TianDiTu_Mercator=BM.a.Proj.CRS("EPSG:3857",{origin:[-20037508.3427892,20037508.3427892],resolutions:eN,bounds:BM.a.bounds([-20037508.3427892,-20037508.3427892],[20037508.3427892,20037508.3427892])});BM.a.CRS.BaiduCRS=Xj,BM.a.CRS.TianDiTu_WGS84CRS=$j,BM.a.CRS.TianDiTu_MercatorCRS=nN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var rN={Prefix:"<a href='http://leafletjs.com' title='A JS library for interactive maps'>Leaflet</a>\n                with <span>© <a href='https://iclient.supermap.io' title='SuperMap iClient' target='_blank'>SuperMap iClient</a></span>",Common:{attribution:"Map Data <span>© <a href='http://support.supermap.com.cn/product/iServer.aspx' title='SuperMap iServer' target='_blank'>SuperMap iServer</a></span>"},Online:{attribution:"Map Data <span>© <a href='https://www.supermapol.com' title='SuperMap Online' target='_blank'>SuperMap Online</a></span>"},ECharts:{attribution:"© 2018 百度 ECharts"},MapV:{attribution:"© 2018 百度 MapV "},Turf:{attribution:"<span>© <a href='https://turfjs.org/' title='turfjs' target='_blank'>turfjs</a></span>"},Baidu:{attribution:"Map Data © 2018 Baidu - GS(2016)2089号 - Data © 长地万方"},Cloud:{attribution:"Map Data ©2014 SuperMap - GS(2014)6070号-data©Navinfo"},Tianditu:{attribution:"Map Data <a href='http://www.tianditu.gov.cn' target='_blank'><img style='background-color:transparent;bottom:2px;opacity:1;' src='http://api.tianditu.gov.cn/img/map/logo.png' width='53px' height='22px' opacity='0'></a>"}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
BM.a.supermap=BM.a.supermap||{},BM.a.supermap.control=BM.a.supermap.control||{},BM.a.supermap.components=BM.a.supermap.components||{},BM.a.Control.Attribution.include({options:{position:"bottomright",prefix:rN.Prefix}}),BM.a.Map.include({latLngToAccurateContainerPoint:function(e){var t=this.project(BM.a.latLng(e))._subtract(this.getPixelOrigin());return BM.a.point(t).add(this._getMapPanePos())}}),[BM.a.Polyline,BM.a.Polygon,BM.a.Marker,BM.a.CircleMarker,BM.a.Circle,BM.a.LayerGroup].map(function(e){return e.defaultFunction=e.prototype.toGeoJSON,e.include({toGeoJSON:function(t){return e.defaultFunction.call(this,t||10)}}),e});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iN=BM.a.Evented.extend({options:{url:null,proxy:null,serverType:null,withCredentials:!1,crossOrigin:null},initialize:function(e,t){e&&(e=e.indexOf("/")!==e.length-1?e:e.substr(0,e.length-1)),this.url=e,BM.a.setOptions(this,t),this.fire("initialized",this)},destroy:function(){this.fire("destroy",this)}});BM.a.supermap.ServiceBase=iN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oN=iN.extend({options:{projection:null},initialize:function(e,t){t=t||{},BM.a.setOptions(this,t),t.projection&&(this.options.projection=t.projection),iN.prototype.initialize.call(this,e,t)},getMapInfo:function(e){var t=this;new wv(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e},projection:t.options.projection}).processAsync()},getTilesets:function(e){var t=this;new yw(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()}}),aN=function(e,t){return new oN(e,t)};BM.a.supermap.mapService=aN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sN=BM.a.Control.extend({options:{layer:null,position:"topleft",title:"switch tile version",tooltip:"top",collapsed:!0,nextText:"+",lastText:"-",ico:"V",orientation:"horizontal",switch:!0},onAdd:function(){"vertical"!==this.options.orientation&&(this.options.orientation="horizontal");var e=this._initLayout();return this.options.layer&&this.setLayer(this.options.layer),e},setContent:function(e){var t=BM.a.Util.extend({},e);this.setVersionName(t.desc).setToolTip(t.desc)},setVersionName:function(e){var t=e;return e||(t=this.getValue()),this._sliderValue.innerHTML=t,this},setToolTip:function(e){return this.tooltip.innerHTML=e,this},updateLength:function(e){e>0&&(this.length=e,this.max=this.length-1,this.slider.setAttribute("max",this.max))},setLayer:function(e){e&&(this.options.layer=e);var t=this,n=t.options.layer;n.on("tilesetsinfoloaded",function(e){var n=e&&e.tileVersions;t.update(n)}),n.on("tileversionschanged",function(e){var n=e&&e.tileVersion;t.setContent(n)}),t.getTileSetsInfo()},update:function(e){this.tileVersions=e,this.updateLength(this.tileVersions.length)},getTileSetsInfo:function(){var e=this;e.options.layer&&new oN(e.options.layer._url).getTilesets(function(t){e.options.layer.setTileSetsInfo(t.result)})},removeLayer:function(){this.options.layer=null},nextTilesVersion:function(){return this.firstLoad?(this.options.layer.nextTilesVersion(),this.firstLoad=!1,this):parseInt(this.slider.value)>this.max-1?this:(this.slider.value=parseInt(this.slider.value)+1,this.options.layer.nextTilesVersion(),this)},lastTilesVersion:function(){return parseInt(this.slider.value)<this.min+1?this:(this.slider.value=parseInt(this.slider.value)-1,this.options.layer.lastTilesVersion(),this)},tilesVersion:function(e){for(var t=this.options.layer,n=this.tileVersions,r=n.length,i=0;i<r;i++)if(n[i].name==e){t.updateCurrentTileSetsIndex(i),t.changeTilesVersion();break}},getValue:function(){return this.slider.value},getVersion:function(){var e=this.tileVersions[this.getValue()];return e&&e.name},_initLayout:function(){var e="leaflet-control-ctv";this._container=BM.a.DomUtil.create("div",e+" "+e+"-"+this.options.orientation),this._sliderBtn=BM.a.DomUtil.create("a",e+"-toggle",this._container),this._sliderBtn.setAttribute("title",this.options.title),this._sliderBtn.innerHTML=this.options.ico,this._sliderValue=BM.a.DomUtil.create("p",e+"-value",this._container),this._sliderValue.innerHTML=this.options.ico;return this._sliderContent=BM.a.DomUtil.create("div","leaflet-ctv-slider-main  tooltip",this._container),this.tooltip=BM.a.DomUtil.create("span","tooltip-text  tooltip-"+this.options.tooltip,this._sliderContent),this.tooltip.innerHTML=this.options.ico,this.options.switch&&(this._next=BM.a.DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-next",this._sliderContent),this._next.innerHTML=this.options.nextText,BM.a.DomEvent.on(this._next,"click",this.nextTilesVersion,this),BM.a.DomUtil.addClass(this._container,e+"-incdec")),this._sliderContainer=BM.a.DomUtil.create("div","leaflet-ctv-slider-container",this._sliderContent),this.slider=BM.a.DomUtil.create("input","leaflet-ctv-slider",this._sliderContainer),this.min=null==this.min||isNaN(this.min)?0:parseInt(this.min),this.slider.setAttribute("title",this.options.title),this.slider.setAttribute("id","slider"),this.slider.setAttribute("type","range"),this.slider.setAttribute("min",this.min),this.slider.setAttribute("max",0),this.slider.setAttribute("step",1),this.slider.setAttribute("value",0),this.firstLoad=!0,"oninput"in this.slider||"onchange"in this.slider?BM.a.DomEvent.on(this.slider,"change",this._tilesVersion,this):this.slider.onpropertychange=this._tilesVersion,this.options.switch&&(this._last=BM.a.DomUtil.create("a","leaflet-ctv-slider-incdec leaflet-ctv-slider-last",this._sliderContent),this._last.innerHTML=this.options.lastText,BM.a.DomEvent.on(this._last,"click",this.lastTilesVersion,this)),"vertical"===this.options.orientation?(this.slider.style.width="170px",this._sliderContainer.style.height="170px"):this._sliderContainer.style.width="150px",BM.a.DomEvent.disableClickPropagation(this._container),this.options.collapsed?(BM.a.Browser.android||BM.a.DomEvent.on(this._container,"mouseenter",this._expand,this).on(this._container,"mouseleave",this._collapse,this),BM.a.Browser.touch?BM.a.DomEvent.on(this._sliderBtn,"click",BM.a.DomEvent.stop).on(this._sliderBtn,"click",this._expand,this):BM.a.DomEvent.on(this._sliderBtn,"focus",this._expand,this)):this._expand(),this._container},_expand:function(){BM.a.DomUtil.addClass(this._container,"leaflet-control-ctv-expanded")},_collapse:function(){BM.a.DomUtil.removeClass(this._container,"leaflet-control-ctv-expanded")},_tilesVersion:function(){var e=this.getVersion();this.tilesVersion(e)}});BM.a.Map.mergeOptions({changeTileVersionControl:!1}),BM.a.Map.addInitHook(function(){this.options.changeTileVersionControl&&(this.changeTileVersionControl=new sN,this.addControl(this.changeTileVersionControl))});var lN=function(e){return new sN(e)};BM.a.supermap.control.changeTileVersion=lN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var uN=BM.a.Control.extend({options:{position:"bottomright",imageUrl:null,link:null,width:null,height:null,alt:"SuperMap iClient"},onAdd:function(){var e=BM.a.DomUtil.create("div","iclient-leaflet-logo");e.style.marginTop=0,e.style.marginBottom=0,e.style.marginLeft=0,e.style.marginRight=0;var t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAF4AAAAdCAYAAAAjHtusAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA4ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMDY3IDc5LjE1Nzc0NywgMjAxNS8wMy8zMC0yMzo0MDo0MiAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDozYWZlOGIwMi01MWE3LTRiZjYtYWVkYS05MGQ2ZTQ4YjZiMmUiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6ODg0NkFBQUE3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6ODg0NkFBQTk3RjEzMTFFNzhFRjJFQkY4RjcxQjc1NjIiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTUgKE1hY2ludG9zaCkiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo4MWI3NzdhNC1lZmEyLTQ1MzUtOGQzNi03MmRjNDkyODMzN2UiIHN0UmVmOmRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpjYTYzODVjMi1jNDQ1LTExN2EtYTc0ZC1lM2I5MzJlMGE4Y2QiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5q1HM0AAAF/ElEQVR42tSabYhUVRjHZ7W01C1uaCRW4F3oi9SXCUnwQ9gsGUFvOEtQH1bLu5VS9sbYh5KicjYt29qiGQwVg2xWWKgocob91AvC+CWsoJqB3qHMSdTMpZyeU/+Df07n3pk7997Z6cBv99z7nHvOvf/z/pxJNZvNVI/jCKXmv6EquAmVkxPSlvtp2GItr0/96fFQForChJAWDiVYTkMYMu4XBFcYjLOwWS3sNwmn8NGzZ0h4Flv/zwIdchAnh/slCGmmKUNIBzYPaXOUr0vPuEjD71JAPh7l61embzinhV3V8nnCGmGT8LwlzSL8/yUh4Tfjo9T/CgnCIYNKycA2Qq21AcHU/VHE80Idoo3Qs0W6p0UtUnkZvEMDeVcCyqxEafF7hL8Qf0oYsIj+lfC9cH1CwhchWAGCtZO+AooQOkdC1Km1VtCb63StW73uFSzgKFUkNwBbmZGGmqowhvg8ZNpH9oXChcIcYRdeNomgxLkaH+S1SGubAxyIpFv+Zp+0DYjrAS00j/dem2VGEl6FJ4Qa4quEu8j2hTCJ+GJhe4JjfQMf6JCYPPbysMPxBlp0BUKOogEF9Rg9/heNvNKYfM0KsZUZaYxX4STGrzJa+zbhPeFH2DcK10KItcI+pI0rVElwXl1ULaKnIJhDw0oRQpTQc1zcbwRU8ATy4DR6yMlTzwkqMziEWHvubJ4Nk4ZtHdnqwvwY17xq3Z4FjrG+z2Kdrdf2ZSGD+xlLPh6t1R0jP9fI22ZzKI92yvQl7EbmBxI4S7Y+vIAOL87QZqsc5uNnssxZIcfYjXT9snCR7jjobidp+FkxA2v+Cq1QervMDmp4P7Xs3YZtE9kOC3P/By6JGaETl8ElwueYTNTDq4UDsKnd7YfCNbT239LF1udS72xYJt1UWxNfN4IIP4bWuTpEja01JtMFZFsm/AHbtHBlDE6yasA4moYTrUbvdBTXHqUrAH4uSadbyzF+vbBM2IsNkS3MNa5305JxqfA02T4TnkX8XOH1mPw8ruVejpxbI9hZD2Cz1U7LdrrUvjP/WfZinNZhr6V27hP+FPZh9aLvLxVO4DllX0G2OcKnlO/DCblxaz6uXBtmi+8mBaP3/SP8IuEIiTRoPPQm2TaEmEyXo0JU+F0YiPFD0hhOsiE/vqeEVwyTgF8L51OilcIZ2I4Ll5NttvAJPfukUeB2sk0ZPSbKIUUJpCII7+DasWy08uhNNazT0wGHI7mAtB7KqMKm38HhDdAUibTVKGicbB8YAqrJ9DRsp43JdB4qUof1HQrPE6XTQWu3Ce/inVzjXhXpMiTwUYugNVQ+p80jrUsV5EH0POKeuXO9QjhFq5GryNYvfEMCDhsftYVsB9ETtG0V9ZjfhCURhbcJFpfwVZ9jvhxsLHwTYtp2svlWQw3vXL8UnqHVSIG8l8ex+tHhBXgjddgqHEZ8ufAA2aaEnYgrF/KrPXrEmMUqZ9THLW06xhoBaVueQpkug+ewOUphE3Qv2Q5gGamXYa+QbVq4O+DQ5FHyZqrjxNt7UHh9uuRa0F7HjCF8o9PCTOGnscM7g2u1Hl9C9oeEnxC/1ajZg8JLiM9Hj9GHJseMShwL2DO0G5yEWn3Zh1QUods5CPkIoqlwAZxhXMsb6HrcEPBxchhdJ6wj29vCW4hfLOzo8J3rltYX50nXQAATSf/K4DEaGlTLvplsk/QCpoD60EQ7gLYZc8H9wq+I3yncEOEcNhuz6HWf3XEiwU/4Y8YEqVp2P10rt+8REvBGw026i4aDcbL9jF8r8Blmf4fCOzhViiscskygXRdehf3CO4hfigmTBXyQrl8TFtD1IzQX3CbcQrY3hPcRv4z8OmHPXwchVNln2MmE7BX6VwIFi/he6uxvb6JM3m0fdqvx/ATidxg2JeC7VDErAw5NzGfvwRJVheEIQ8Mg/pdwIM+UOmi9Q8ivCsrIy0tF+wVbEcLrd3Pb2XisEb4Tdlhsi4WP4RBbaLGrHfC3PrvMIezy9rTpGm5lz9LOMG15xvFxD/j5gjzjjDbMOzk+9zzt3v5bgAEAibzFeFHVgYkAAAAASUVORK5CYII=";this.options.imageUrl&&(t=this.options.imageUrl);var n=this.options.alt,r="94px",i="29px",o="width:"+r+";height:"+i+";";this.options.imageUrl&&(o="width:"+(r=this.options.width)+";height:"+(i=this.options.height)+";",r&&i||(o=""));var a=this.options.link||"https://iclient.supermap.io";return e.innerHTML="<a href='"+a+"' target='_blank' style='border: none;display: block;'><img src="+t+" alt='"+n+"' style='border: none;"+o+"margin-right:5px;margin-bottom:2px;white-space: nowrap'></a>",e}});BM.a.Map.mergeOptions({logoControl:!0}),BM.a.Map.addInitHook(function(){!this._logoAdded&&this.options.logoControl&&(!0===this.options.logoControl?this.logoControl=new uN:this.options.logoControl instanceof BM.a.Control&&(this.logoControl=this.options.logoControl),this.logoControl&&(this.addControl(this.logoControl),this._logoAdded=!0))});var cN=function(e){return new uN(e)};function fN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BM.a.supermap.control.logo=cN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var hN=function(){function e(){!
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"toSuperMapBounds",value:function(e){return e&&-1!==["FeatureCollection","Feature"].indexOf(e.type)&&(e=BM.a.geoJSON(e).getBounds()),e instanceof BM.a.LatLngBounds?new Oe(e.getSouthWest().lng,e.getSouthWest().lat,e.getNorthEast().lng,e.getNorthEast().lat):e instanceof BM.a.Bounds?new Oe(e.min.x,e.min.y,e.max.x,e.max.y):this.isArray(e)?new Oe(e[0],e[1],e[2],e[3]):new Oe}},{key:"isArray",value:function(e){return"[object Array]"==Object.prototype.toString.call(e)}},{key:"toProcessingParam",value:function(e){var t={};if(e.length<1)t="";else{for(var n=[],r=0;r<e.length;r++){var i={};i.x=e[r][0],i.y=e[r][1],n.push(i)}t.type="REGION",t.points=n}return t}}],(n=null)&&fN(t.prototype,n),r&&fN(t,r),e}();BM.a.supermap.CommontypesConversion=hN;BM.a.Util.supermap_callbacks={};var pN=function(e){return e?(new Nn).toGeoJSON(e):e},yN=function(e){if(!e)return e;var t,n=new Nn;if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e.type))t=n.read(e,e.type);else if("function"==typeof e.toGeoJSON){var r=e.toGeoJSON();t=r?n.read(r,r.type):e}var i=t;return BM.a.Util.isArray(t)&&(1===t.length?i=t[0]:t.length>1&&(i=[],t.map(function(e){return i.push(e.geometry),e}))),i&&i.geometry?i.geometry:i},dN=function(e){var t;if(e===h.METER)t=1;else if(e===h.DEGREE)t=2*Math.PI*6378137/360;else if(e===h.KILOMETER)t=.001;else if(e===h.INCH)t=1/.025399999918;else{if(e!==h.FOOT)return t;t=.3048}return t},mN=function(e,t,n){var r=e*t*(1/.0254)*dN(n);return r=1/r},vN=function(e,t,n){var r=e*t*(1/.0254)*dN(n);return r=1/r},gN=function(e,t,n,r){return r=r||6378137,n=n||"",e>0&&t>0?(e=BM.a.Util.NormalizeScale(e),"degree"===n.toLowerCase()||"degrees"===n.toLowerCase()||"dd"===n.toLowerCase()?254/t/e/(2*Math.PI*r/360)/1e4:254/t/e/1e4):-1},bN=function(e){return e>1?1/e:e};BM.a.Util.toGeoJSON=pN,BM.a.Util.toSuperMapGeometry=yN,BM.a.Util.resolutionToScale=mN,BM.a.Util.scaleToResolution=vN,BM.a.Util.getMeterPerMapUnit=dN,BM.a.Util.GetResolutionFromScaleDpi=gN,BM.a.Util.NormalizeScale=bN;BM.a.Util.transform=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:BM.a.CRS.EPSG4326,n=arguments.length>2?arguments[2]:void 0,r=null,i=null;if(-1===["FeatureCollection","Feature","Geometry"].indexOf(e.type))if(e.toGeoJSON)e=e.toGeoJSON();else if(e instanceof BM.a.LatLngBounds)e=BM.a.rectangle(e).toGeoJSON();else{if(!(e instanceof BM.a.Bounds))throw new Error("This tool only supports data conversion in geojson format or Vector Layers of Leaflet.");e=BM.a.rectangle([[e.getTopLeft().x,e.getTopLeft().y],[e.getBottomRight().x,e.getBottomRight().y]]).toGeoJSON()}var o={point:function(e){return i(e)},multipoint:function(e){return o.linestring.apply(this,[e])},linestring:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=o.point.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return t},multilinestring:function(e){return o.polygon.apply(this,[e])},polygon:function(e){for(var t,n=[],r=0,i=e.length;r<i;++r){try{t=o.linestring.apply(this,[e[r]])}catch(e){throw e}n.push(t)}return n},multipolygon:function(e){for(var t=[],n=null,r=0,i=e.length;r<i;++r){try{n=o.polygon.apply(this,[e[r]])}catch(e){throw e}t.push(n)}return t}};return function(e,t){if(r=e,i=t,"Feature"===e.type)r=a(e);else if("FeatureCollection"===e.type){for(var n=[],o=0;o<e.features.length;++o)try{n.push(a(e.features[o]))}catch(e){n=null}r.features=n}return r}(e,function(e){var r=t.unproject({x:e[0],y:e[1]}),i=n.project(r);return[i.x,i.y]});function a(e){var t=e.geometry;if(!be.isArray(t.coordinates))throw"Geometry must have coordinates array: "+t;if(!o[t.type.toLowerCase()])throw"Unsupported geometry type: "+t.type;try{t.coordinates=o[t.type.toLowerCase()].apply(this,[t.coordinates])}catch(e){throw e}return e.geometry=t,e}};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var SN=BM.a.TileLayer.extend({url:"http://online{num}.map.bdimg.com/onlinelabel/?qt=tile&x={x}&y={y}&z={z}&styles={styles}&udt=20150815&scaler=1",options:{minZoom:3,maxZoom:19,bounds:BM.a.latLngBounds(BM.a.latLng(-85.0511287798,-180),BM.a.latLng(85.0511287798,180)),retina:BM.a.Browser.retina,attribution:rN.Baidu.attribution},initialize:function(e,t){e&&(this.url=e),BM.a.setOptions(this,t),this.options.retina&&(this.options.maxZoom=18),BM.a.stamp(this)},getTileUrl:function(e){var t=BM.a.Util.template(this.url,{num:Math.abs((e.x+e.y)%8)+1,x:e.x,y:-e.y-1,z:this._getZoomForUrl(),styles:this.options.retina?"ph":"pl"});return this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t}}),_N=function(e,t){return new SN(e,t)};BM.a.supermap.baiduTileLayer=_N;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wN=BM.a.TileLayer.extend({defaultURL:"http://t2.supermapcloud.com/FileService/image",options:{mapName:"quanguo",type:"web",minZoom:3,maxZoom:18,attribution:rN.Cloud.attribution},initialize:function(e,t){BM.a.setOptions(this,t);var n=e||this.defaultURL;this._url=n+"?map="+this.options.mapName+"&type="+this.options.type,BM.a.stamp(this)},getTileUrl:function(e){var t=this._url+"&x="+e.x+"&y="+e.y+"&z="+e.z;return this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),t}}),ON=function(e,t){return new wN(e,t)};BM.a.supermap.cloudTileLayer=ON;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var xN=FM.Layer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,opacity:1,alt:"",pane:"tilePane",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:"",serverType:o.ISERVER,attribution:rN.Common.attribution,updateInterval:150,tileProxy:null,format:"png"},initialize:function(e,t){this._url=e,FM.Util.setOptions(this,t)},onAdd:function(e){this.update=FM.Util.throttle(this.update,this.options.updateInterval,this),e.on("moveend",this.update,this),this._currentImage&&this._currentImage._bounds.equals(this._map.getBounds())?e.addLayer(this._currentImage):this._currentImage&&(this._map.removeLayer(this._currentImage),this._currentImage=null),this.update()},onRemove:function(){this._currentImage&&this._map.removeLayer(this._currentImage),this._map.off("moveend",this.update,this)},bringToFront:function(){return this.options.position="front",this._currentImage&&this._currentImage.bringToFront(),this},bringToBack:function(){return this.options.position="back",this._currentImage&&this._currentImage.bringToBack(),this},getOpacity:function(){return this.options.opacity},setOpacity:function(e){return this.options.opacity=e,this._currentImage&&this._currentImage.setOpacity(e),this},getImageUrl:function(e){var t=FM.Util.getParamString(e)+this._initLayerUrl();return t=this._url+"/image."+this.options.format+t,t=this._appendCredential(t),this.options.tileProxy&&(t=this.options.tileProxy+encodeURIComponent(t)),this.options.cacheEnabled||(t+="&_t="+(new Date).getTime()),t},_getImageParams:function(){var e=this._calculateImageSize();return{viewBounds:this._compriseBounds(this._calculateBounds()),width:e.x,height:e.y}},_initLayerUrl:function(){var e="&";return e+=encodeURI(this._initAllRequestParams().join("&"))},_initAllRequestParams:function(){var e=this.options||{},t=[],n=!0===e.redirect&&e.redirect;t.push("redirect="+n);var r=!0===e.transparent&&e.transparent;t.push("transparent="+r);var i=!1!==e.cacheEnabled||e.cacheEnabled;return t.push("cacheEnabled="+i),e.prjCoordSys&&t.push("prjCoordSys="+JSON.stringify(e.prjCoordSys)),e.layersID&&t.push("layersID="+e.layersID),e.rasterfunction&&t.push("rasterfunction="+JSON.stringify(e.rasterfunction)),e.clipRegionEnabled&&e.clipRegion&&(t.push("clipRegionEnabled="+e.clipRegionEnabled),t.push("clipRegion="+JSON.stringify(Pn.fromGeometry(FM.Util.toSuperMapGeometry(e.clipRegion))))),!1===e.overlapDisplayed?(t.push("overlapDisplayed=false"),e.overlapDisplayedOptions&&t.push("overlapDisplayedOptions="+this.overlapDisplayedOptions.toString())):t.push("overlapDisplayed=true"),t},_requestImage:function(e,t){var n=this.getImageUrl(e);this._loadImage(n,t)},_loadImage:function(e,t){if(this._map){var n=new FM.ImageOverlay(e,t,{opacity:0,alt:this.options.alt,zIndex:this.options.zIndex,className:this.options.className,errorOverlayUrl:this.options.error,crossOrigin:this.options.crossOrigin,pane:this.options.pane||this.getPane(),interactive:this.options.interactive}).addTo(this._map),r=function e(r){n.off("error",e,this);var i=this._map;if(i){var o=r.target,a=this._currentImage;o._bounds&&o._bounds.equals(t)&&o._bounds.equals(i.getBounds())?(this._currentImage=o,"front"===this.options.position&&this.bringToFront(),"back"===this.options.position&&this.bringToBack(),this._currentImage._map&&this._currentImage.setOpacity(this.options.opacity),a&&i.removeLayer(a),a&&a._map&&a._map.removeLayer(a)):i.removeLayer(o),this.fire("load",{bounds:t})}};n.once("load",r,this),n.once("error",function(){this._map.removeLayer(n),this.fire("error"),n.off("load",r,this)},this),this.fire("loading",{bounds:t})}},update:function(){if(this._map){var e=this._map.getZoom(),t=this._map.getBounds();if(e>this._map.options.maxZoom||e<this._map.options.zoom)this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null);else{var n=this._getImageParams();n?this._requestImage(n,t):this._currentImage&&(this._currentImage._map.removeLayer(this._currentImage),this._currentImage=null)}}},_calculateBounds:function(){var e=this._map.getPixelBounds(),t=this._map.unproject(e.getBottomLeft()),n=this._map.unproject(e.getTopRight()),r=this._map.options.crs.project(n),i=this._map.options.crs.project(t);return BM.a.bounds(r,i)},_compriseBounds:function(e){var t={leftBottom:{x:e.getBottomLeft().x,y:e.getTopRight().y},rightTop:{x:e.getTopRight().x,y:e.getBottomLeft().y}};return JSON.stringify(t)},_calculateImageSize:function(){var e=this._map,t=e.getPixelBounds(),n=e.getSize(),r=e.unproject(t.getBottomLeft()),i=e.unproject(t.getTopRight()),o=e.latLngToLayerPoint(i).y,a=e.latLngToLayerPoint(r).y;return(o>0||a<n.y)&&(n.y=a-o),n},_appendCredential:function(e){var t,n,r=e;switch(this.options.serverType){case o.IPORTAL:(t=(n=ir.getToken(this._url))?new Gt(n,"token"):null)||(t=(n=ir.getKey(this._url))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=ir.getKey(this._url))?new Gt(n,"key"):null;break;default:t=(n=ir.getToken(this._url))?new Gt(n,"token"):null}return t&&(r+="&"+t.getUrlParameters()),r}}),CN=function(e,t){return new xN(e,t)};BM.a.supermap.imageMapLayer=CN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var TN=BM.a.TileLayer.extend({options:{version:"1.0.0",style:"",tilematrixSet:"",format:"image/png",tileSize:256,matrixIds:null,layer:"",requestEncoding:"KVP",attribution:""},initialize:function(e,t){this._url=e,BM.a.setOptions(this,t);var n=this.options;if("REST"===n.requestEncoding){this.formatSuffix="."+({"image/png":"png","image/png8":"png","image/png24":"png","image/png32":"png",png:"png","image/jpeg":"jpg","image/jpg":"jpg",jpeg:"jpg",jpg:"jpg"}[n.format]||n.format.split("/").pop()||"png")}else n.requestEncoding="KVP"},getTileUrl:function(e){var t=this._getZoomForUrl(),n=this.options.matrixIds?this.options.matrixIds[t].identifier:t,r=BM.a.Util.template(this._url,{s:this._getSubdomain(e)}),i={service:"WMTS",request:"GetTile",version:this.options.version,style:this.options.style,tilematrixSet:this.options.tilematrixSet,format:this.options.format,width:this.options.tileSize,height:this.options.tileSize,layer:this.options.layer,tilematrix:n,tilerow:e.y,tilecol:e.x};if(this.options.tileProxy&&(r=this.options.tileProxy+r),"KVP"===this.options.requestEncoding)r+=BM.a.Util.getParamString(i,r);else if("REST"===this.options.requestEncoding){r+="/"+i.layer+"/"+i.style+"/"+i.tilematrixSet+"/"+i.tilematrix+"/"+i.tilerow+"/"+i.tilecol+this.formatSuffix}return r}}),PN=function(e,t){return new TN(e,t)};BM.a.supermap.wmtsLayer=PN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var EN=TN.extend({layerLabelMap:{vec:"cva",ter:"cta",img:"cia"},layerZoomMap:{vec:18,ter:14,img:18},options:{layerType:"vec",isLabel:!1,attribution:rN.Tianditu.attribution,url:"http://t{s}.tianditu.gov.cn/{layer}_{proj}/wmts?",zoomOffset:1,key:"",dpi:96,style:"default",format:"tiles",subdomains:[0,1,2,3,4,5,6,7]},initialize:function(e){e=e||{},BM.a.setOptions(this,e),this.options.layer=this.options.isLabel?this.layerLabelMap[this.options.layerType]:this.options.layerType,this.options.maxZoom=this.layerZoomMap[this.options.layerType]-1,TN.prototype.initialize.call(this,this.options.url,this.options),BM.a.stamp(this)},onAdd:function(e){this.options.tilematrixSet="EPSG:4326"===e.options.crs.code?"c":"w",this.options.key&&(this._url="".concat(this._url,"tk=").concat(this.options.key)),this._url=this._url.replace("{layer}",this.options.layer).replace("{proj}",this.options.tilematrixSet),TN.prototype.onAdd.call(this,e)}}),kN=function(e){return new EN(e)};BM.a.supermap.tiandituTileLayer=kN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MN=BM.a.TileLayer.extend({options:{layersID:null,redirect:!1,transparent:!0,cacheEnabled:!0,clipRegionEnabled:!1,clipRegion:null,prjCoordSys:null,overlapDisplayed:!1,overlapDisplayedOptions:null,tileversion:null,crs:null,serverType:o.ISERVER,format:"png",tileProxy:null,attribution:rN.Common.attribution,subdomains:null},initialize:function(e,t){this._url=e,BM.a.TileLayer.prototype.initialize.apply(this,arguments),BM.a.setOptions(this,t),BM.a.stamp(this),this.tileSetsIndex=-1,this.tempIndex=-1},onAdd:function(e){this._crs=this.options.crs||e.options.crs,BM.a.TileLayer.prototype.onAdd.call(this,e)},getTileUrl:function(e){var t=this.getScaleFromCoords(e),n=this._getLayerUrl()+"&scale="+t+"&x="+e.x+"&y="+e.y;return this.options.tileProxy&&(n=this.options.tileProxy+encodeURIComponent(n)),this.options.cacheEnabled||(n+="&_t="+(new Date).getTime()),this.options.subdomains&&(n=BM.a.Util.template(n,{s:this._getSubdomain(e)})),n},getScale:function(e){var t=e||this._map.getZoom();return this.scales[t]},getScaleFromCoords:function(e){var t,n=this;return n.scales&&n.scales[e.z]?n.scales[e.z]:(n.scales=n.scales||{},t=n.getDefaultScale(e),n.scales[e.z]=t,t)},getDefaultScale:function(e){var t=this._crs;if(t.scales)return t.scales[e.z];var n=this._tileCoordsToBounds(e),r=t.project(n.getNorthEast()),i=t.project(n.getSouthWest()),o=this.options.tileSize,a=Math.max(Math.abs(r.x-i.x)/o,Math.abs(r.y-i.y)/o),s=h.METER;if(t.code){var l=t.code.split(":");if(l&&l.length>1){var u=parseInt(l[1]);s=u&&u>=4e3&&u<=5e3?h.DEGREE:h.METER}}return mN(a,96,s)},setTileSetsInfo:function(e){this.tileSets=e,BM.a.Util.isArray(this.tileSets)&&(this.tileSets=this.tileSets[0]),this.tileSets&&(this.fire("tilesetsinfoloaded",{tileVersions:this.tileSets.tileVersions}),this.changeTilesVersion())},lastTilesVersion:function(){this.tempIndex=this.tileSetsIndex-1,this.changeTilesVersion()},nextTilesVersion:function(){this.tempIndex=this.tileSetsIndex+1,this.changeTilesVersion()},changeTilesVersion:function(){var e=this;if(null!=e.tileSets&&!(e.tempIndex===e.tileSetsIndex||this.tempIndex<0)){var t=e.tileSets.tileVersions;if(t&&e.tempIndex<t.length&&e.tempIndex>=0){var n=t[e.tempIndex].name;e.mergeTileVersionParam(n)&&(e.tileSetsIndex=e.tempIndex,e.fire("tileversionschanged",{tileVersion:t[e.tempIndex]}))}}},updateCurrentTileSetsIndex:function(e){this.tempIndex=e},mergeTileVersionParam:function(e){return!!e&&(this.requestParams.tileversion=e,this._paramsChanged=!0,this.redraw(),this._paramsChanged=!1,!0)},_getLayerUrl:function(){return this._paramsChanged&&(this._layerUrl=this._createLayerUrl()),this._layerUrl||this._createLayerUrl()},_createLayerUrl:function(){var e=this._url+"/tileImage."+this.options.format+"?";return e+=encodeURI(this._getRequestParamString()),e=this._appendCredential(e),this._layerUrl=e,e},_getRequestParamString:function(){this.requestParams=this.requestParams||this._getAllRequestParams();var e=[];for(var t in this.requestParams)e.push(t+"="+this.requestParams[t]);return e.join("&")},_getAllRequestParams:function(){var e=this.options||{},t={},n=this.options.tileSize;n instanceof BM.a.Point||(n=BM.a.point(n,n)),t.width=n.x,t.height=n.y,t.redirect=!0===e.redirect,t.transparent=!0===e.transparent,t.cacheEnabled=!(!1===e.cacheEnabled),e.prjCoordSys&&(t.prjCoordSys=JSON.stringify(e.prjCoordSys)),e.layersID&&(t.layersID=e.layersID.toString()),e.clipRegionEnabled&&e.clipRegion&&(e.clipRegion=Pn.fromGeometry(yN(e.clipRegion)),t.clipRegionEnabled=e.clipRegionEnabled,t.clipRegion=JSON.stringify(e.clipRegion));var r=this._crs;if(r.options&&r.options.origin)t.origin=JSON.stringify({x:r.options.origin[0],y:r.options.origin[1]});else if(r.projection&&r.projection.bounds){var i=r.projection.bounds,o=BM.a.point(i.min.x,i.max.y);t.origin=JSON.stringify({x:o.x,y:o.y})}return!1===e.overlapDisplayed?(t.overlapDisplayed=!1,e.overlapDisplayedOptions&&(t.overlapDisplayedOptions=this.overlapDisplayedOptions.toString())):t.overlapDisplayed=!0,!0===t.cacheEnabled&&e.tileversion&&(t.tileversion=e.tileversion.toString()),e.rasterfunction&&(t.rasterfunction=JSON.stringify(e.rasterfunction)),t},_appendCredential:function(e){var t,n,r=e;switch(this.options.serverType){case o.IPORTAL:(t=(n=ir.getToken(this._url))?new Gt(n,"token"):null)||(t=(n=ir.getKey(this._url))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=ir.getKey(this._url))?new Gt(n,"key"):null;break;default:t=(n=ir.getToken(this._url))?new Gt(n,"token"):null}return t&&(r+="&"+t.getUrlParameters()),r}}),AN=function(e,t){return new MN(e,t)};BM.a.supermap.tiledMapLayer=AN;var LN=n(3),jN=n.n(LN),NN={TEXT:{fontSize:"14px",fontFamily:"Arial Unicode MS Regular,Microsoft YaHei",textAlign:"left",color:"rgba(255,255,255,0)",fillColor:"rgba(80,80,80,1)",weight:1,globalAlpha:1},POINT:{fillColor:"#ffcc00",color:"#cc3333",weight:1,radius:3,opacity:1},LINE:{color:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,dashArray:[],opacity:1},REGION:{color:"rgba(0,0,0,0)",fillColor:"rgba(0,0,0,0)",weight:1,lineCap:"butt",lineJoin:"round",dashOffset:0,opacity:1,fillOpacity:1,dashArray:[]}};BM.a.supermap.DefaultStyle=NN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RN={TEXT:{"text-size":"fontSize","text-face-name":"fontFamily","text-align":"textAlign","text-name":"textName","text-weight":"fontWeight","text-halo-color":"color","text-fill":"fillColor","text-comp-op":"globalCompositeOperation"},POINT:{"point-file":"iconUrl","point-fill":"fillColor","point-radius":"radius","point-halo-color":"color","point-comp-op":"globalCompositeOperation"},LINE:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","line-comp-op":"globalCompositeOperation"},REGION:{"line-color":"color","line-width":"weight","line-cap":"lineCap","line-join":"lineJoin","line-dash-offset":"dashOffset","line-opacity":"opacity","line-dasharray":"dashArray","polygon-fill":"fillColor","polygon-opacity":"fillOpacity","polygon-comp-op":"globalCompositeOperation"}},IN={lineWidth:{leafletStyle:"weight",type:"number",unit:"mm",defaultValue:.1},fillForeColor:{leafletStyle:"fillColor",type:"color",defaultValue:"rgba(0,0,0,0)"},foreColor:{leafletStyle:"color",type:"color",defaultValue:"rgba(0,0,0,0)"},markerSize:{leafletStyle:"markerSize",type:"number",unit:"mm",defaultValue:2.4},lineColor:{leafletStyle:"color",type:"color",defaultValue:"#000000"}},DN={clear:"",src:"",dst:"","src-over":"source-over","dst-over":"destination-over","src-in":"source-in","dst-in":"destination-in","src-out":"source-out","dst-out":"destination-out","src-atop":"source-atop","dst-atop":"destination-atop",xor:"xor",plus:"lighter",minus:"",multiply:"",screen:"",overlay:"",darken:"",lighten:"lighter","color-dodge":"","color-burn":"","hard-light":"","soft-light":"",difference:"",exclusion:"",contrast:"",invert:"","invert-rgb":"","grain-merge":"","grain-extract":"",hue:"",saturation:"",color:"",value:""};function FN(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BM.a.supermap.CartoStyleMap=RN,BM.a.supermap.ServerStyleMap=IN,BM.a.supermap.CompOpMap=DN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BN=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cartoCSS=null,this.mapUrl=t}var t,n,i;return t=e,(n=[{key:"pretreatedCartoCSS",value:function(e,t){t&&(e=this.processCharacters(e)),this.cartoCSS=this.cartoCSS||{};var n=new Sx(e).getShaders();if(n)for(var r=0;r<n.length;r++){var i=n[r].elements[0],o=n[r].attachment;this.cartoCSS[i.clean]=this.cartoCSS[i.clean]||{},this.cartoCSS[i.clean][o]=this.cartoCSS[i.clean][o]||[],this.cartoCSS[i.clean][o].push(n[r])}}},{key:"processCharacters",value:function(e){var t=e;if(t){t=(t=t.replace(/[@]/gi,"___")).replace(/\\#/gi,"#");var n={};return this.layersInfo&&Object.keys(this.layersInfo).sort().forEach(function(e){for(var r=e.replace(/[@#\s]/gi,"___"),i=e,o=Object.keys(n),a=o.length;a>-1;a--)if(e.indexOf(o[a])>-1){i=e.replace(o[a],n[o[a]]);break}i=i.replace(/[#]/gi,"#"),n[e]=r,t=t.replace(new RegExp(i,"g"),r)}),t=(t=t.replace(/[#]/gi,"\n#")).replace(/\[zoom/gi,"[scale")}}},{key:"pickShader",value:function(e){if(!this.cartoCSS)return null;var t=e.replace(/[@#\s]/gi,"___");return this.cartoCSS[t]}},{key:"getDefaultStyle",value:function(e){var t={},n=NN[e];for(var r in n){var i=n[r];t[r]=i}return t}},{key:"getStyleFromiPortalMarker",value:function(e){return 0==e.indexOf("./")?null:(0==e.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(e=e.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),BM.a.icon({iconUrl:e,iconSize:BM.a.point(48,43),iconAnchor:BM.a.point(24,43),popupAnchor:BM.a.point(0,-43)}))}},{key:"getStyleFromiPortalStyle",value:function(e,t,n){var r=n?JSON.parse(n):null,i={};if("Point"===t||"MultiPoint"===t){var o=r||e.pointStyle;return o.externalGraphic?0==o.externalGraphic.indexOf("./")?null:(0==o.externalGraphic.indexOf("http://support.supermap.com.cn:8092/static/portal")&&(o.externalGraphic=o.externalGraphic.replace("http://support.supermap.com.cn:8092/static/portal","http://support.supermap.com.cn:8092/apps/viewer/static")),BM.a.icon({iconUrl:o.externalGraphic,iconSize:BM.a.point(o.graphicWidth,o.graphicHeight),iconAnchor:BM.a.point(-o.graphicXOffset,-o.graphicYOffset),popupAnchor:BM.a.point(0,-o.graphicHeight)})):(i.radius=o.pointRadius,i.color=o.strokeColor,i.opacity=o.strokeOpacity,i.lineCap=o.strokeLineCap,i.weight=o.strokeWidth,i.fillColor=o.fillColor,i.fillOpacity=o.fillOpacity,i.dashArray=this.dashStyle(o,1),i)}if("LineString"===t||"MultiLineString"===t||"Box"===t){var a=r||e.lineStyle;return i.color=a.strokeColor,i.opacity=a.strokeOpacity,i.fillOpacity=a.fillOpacity,i.lineCap=a.strokeLineCap,i.weight=a.strokeWidth,i.dashArray=this.dashStyle(a,1),i}if("Polygon"===t||"MultiPolygon"===t){var s=r||e.polygonStyle;return i.color=s.strokeColor,i.opacity=s.strokeOpacity,i.lineCap=s.strokeLineCap,i.weight=s.strokeWidth,i.fillColor=s.fillColor,i.fillOpacity=s.fillOpacity,i.dashArray=this.dashStyle(s,1),i}}},{key:"dashStyle",value:function(e,t){if(!e)return[];var n=e.strokeWidth*t,r=e.strokeDashstyle;switch(r){case"solid":return[];case"dot":return[1,4*n];case"dash":return[4*n,4*n];case"dashdot":return[4*n,4*n,1,4*n];case"longdash":return[8*n,4*n];case"longdashdot":return[8*n,4*n,1,4*n];default:return r?be.isArray(r)?r:(r=he.trim(r).replace(/\s+/g,",")).replace(/\[|\]/gi,"").split(","):[]}}},{key:"getValidStyleFromCarto",value:function(e,t,n,r,i){if(!n)return null;var o=r.type,a=r.properties.attributes||{},s=this.getDefaultStyle(o);i=void 0===i||i,a.FEATUREID=r.properties.id,a.SCALE=t;for(var l,u,c=RN[o],f=0,h=n.length;f<h;f++){var p=n[f],y=c[p.property],d=p.getValue(a,e,!0);if(null!==d&&y)if("fontSize"===y)i&&(d*=.8),l=d+"px",s.fontSize=l;else if("fontName"===y)u=d,s.fontName=u;else{if("globalCompositeOperation"===y){if(!(d=DN[d]))continue}else if(i&&"iconUrl"===y){d=(d=this.mapUrl+"/tileFeature/symbols/"+d.replace(/(___)/gi,"@")).replace(/(__0__0__)/gi,"__8__8__"),s.iconUrl=d;continue}"weight"===y&&d<1&&(d=Math.ceil(d)),s[y]=d}}return s}},{key:"getValidStyleFromLayerInfo",value:function(e,t){var n=e.type,i=this.getDefaultStyle(n),o=t&&t.layerStyle;if(!o)return i;if("POINT"===n){var a=Math.ceil(o.markerSize*r.DOTS_PER_INCH*r.INCHES_PER_UNIT.mm)||8,s={transparent:!0,resourceType:"SYMBOLMARKER",picWidth:a,picHeight:a,style:JSON.stringify(o)};return i.iconUrl=be.urlAppend(this.mapUrl+"/symbol.png",be.getParameterString(s)),i.iconSize=[a,a],i}if("TEXT"===n){if(o=e.properties.textStyle||t.layerStyle,i.fontWeight=o.bold?o.fontWeight:"normal",o.fontHeight){var l=o.fontHeight*r.DOTS_PER_INCH*r.INCHES_PER_UNIT.mm*.85;i.fontSize=l+"px",i.textHeight=l}if(o.fontName&&(i.fontFamily=o.fontName.indexOf("@")?o.fontName.replace(/@/g,""):o.fontName),o.align){var u=o.align.replace(/TOP|MIDDLE|BASELINE|BOTTOM/,"");i.textAlign=u.toLowerCase()}return i.weight=o.outline?o.outlineWidth:0,o.backColor&&(i.color="rgba("+o.backColor.red+","+o.backColor.green+","+o.backColor.blue+",1)"),o.foreColor&&(i.fillColor="rgba("+o.foreColor.red+","+o.foreColor.green+","+o.foreColor.blue+",1)"),i.rotation=o.rotation||0,i}var c=o.fillSymbolID>7?0:o.fillSymbolID,f=o.lineSymbolID>5?0:o.lineSymbolID;for(var h in o){var p=IN[h];if(p){var y=p.leafletStyle;switch(p.type){case"number":var d=o[h];p.unit&&(d=d*r.DOTS_PER_INCH*r.INCHES_PER_UNIT[p.unit]*2.5),i[y]=d;break;case"color":var m=o[h],v=void 0,g=1;if("fillColor"===y)0!==c&&1!==c||(g=1-c,v="rgba("+m.red+","+m.green+","+m.blue+","+g+")");else if("color"===y){if(0===f||5===f)g=0===f?1:0;else{var b=[1,0];switch(f){case 1:b=[9.7,3.7];break;case 2:b=[3.7,3.7];break;case 3:b=[9.7,3.7,2.3,3.7];break;case 4:b=[9.7,3.7,2.3,3.7,2.3,3.7]}i.lineDasharray=b}v="rgba("+m.red+","+m.green+","+m.blue+","+g+")"}i[y]=v}}}return t.textField&&(i.textAlign="LEFT"),i}}])&&FN(t.prototype,n),i&&FN(t,i),e}();BM.a.supermap.CartoCSSToLeaflet=BN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UN=BM.a.Class.extend({initialize:function(e){var t=(e=e||{}).latLng||e._latLng;this._latLng=BM.a.latLng(t.lat,t.lng),this._style=e.style||e._canvas,this.attributes=e.attributes,this.id=e.id?e.id:null},getId:function(){return this.id},setId:function(e){this.id=e},setLatLng:function(e){this._latLng=e},setCanvas:function(e){this._style=e},setAttributes:function(e){this.attributes=e},getLatLng:function(){return this._latLng},getCanvas:function(){return this._style},getAttributes:function(){return this.attributes},setStyle:function(e){this._style=e},getStyle:function(){return this._style}}),GN=function(e){return new UN(e)};BM.a.supermap.graphic=GN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var zN=BM.a.Class.extend({initialize:function(e,t){this.geometry=e,this.attributes=t},toFeature:function(){var e,t=this.geometry,n=[];if(t.toGeoJSON)return(e=t.toGeoJSON()).properties=this.attributes,(new Nn).read(e)[0];if(3===t.length)t=new ct(t[1],t[0],t[2]);else if(2===t.length)t=new Xe(n[0],n[1]);else if(t instanceof BM.a.LatLng)t=new Xe(t.lng,t.lat);else if(t instanceof BM.a.Point)t=new Xe(t.x,t.y);else if(t instanceof BM.a.CircleMarker){var r=t.getLatLng();t=new Xe(r.lng,r.lat)}return new en(t,this.attributes)},reverseLatLngs:function(e){BM.a.Util.isArray(e)||(e=[e]);for(var t=0;t<e.length;t++)e[t]=[e[t].lng,e[t].lat];return e}}),VN=function(e,t){return new zN(e,t)};BM.a.supermap.themeFeature=VN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var HN=BM.a.Layer.extend({options:{alwaysMapCRS:!1,id:be.createUniqueID("themeLayer_"),opacity:1,TFEvents:[],attribution:rN.Common.attribution},initialize:function(e,t){BM.a.Util.setOptions(this,t),this.name=e,this.features=[],this.TFEvents=this.options.TFEvents,this.levelRenderer=new mk,this.movingOffset=[0,0]},getEvents:function(){var e={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(e.zoomanim=this._zoomAnim),e},onRemove:function(e){BM.a.DomUtil.remove(this.container),e.off("mousemove",this.mouseMoveHandler)},onAdd:function(e){var t=this;if(t.map=t._map=e,t._initContainer(),t.levelRenderer){var n=e.getSize();t.container.style.width=n.x+"px",t.container.style.height=n.y+"px",t._updateOpacity(),t.renderer=t.levelRenderer.init(t.container),t.renderer.clear(),t.features&&t.features.length>0&&t._reset(),t.addTFEvents(),t.mouseMoveHandler=function(e){var n=e.layerPoint;t.currentMousePosition=BM.a.point(n.x+t.movingOffset[0],n.y+t.movingOffset[1])},e.on("mousemove",t.mouseMoveHandler),t.update(e.getBounds())}else e.removeLayer(t)},addFeatures:function(e){},redrawThematicFeatures:function(e){},destroyFeatures:function(e){if(void 0===e&&(e=this.features),e){this.removeFeatures(e);for(var t=e.length-1;t>=0;t--)e[t].destroy()}},removeFeatures:function(e){var t=this;if(e&&0!==e.length){if(e===t.features)return t.removeAllFeatures();BM.a.Util.isArray(e)||(e=[e]);for(var n=[],r=e.length-1;r>=0;r--){var i=e[r],o=BM.a.Util.indexOf(t.features,i);-1!==o?t.features.splice(o,1):n.push(i)}for(var a=[],s=0,l=t.features.length;s<l;s++)i=t.features[s],a.push(i);t.features=[],t.addFeatures(a),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures());var u=0==n.length;t.fire("featuresremoved",{features:n,succeed:u})}},removeAllFeatures:function(){this.renderer&&this.renderer.clear(),this.features=[],this.fire("featuresremoved",{features:[],succeed:!0})},getFeatures:function(){for(var e=this.features.length,t=new Array(e),n=0;n<e;++n)t[n]=this.features[n];return t},getFeatureBy:function(e,t){var n=null;for(var r in this.features)if(this.features[r][e]===t){n=this.features[r];break}return n},getFeatureById:function(e){return this.getFeatureBy("id",e)},getFeaturesByAttribute:function(e,t){var n,r=[];for(var i in this.features)(n=this.features[i])&&n.attributes&&n.attributes[e]===t&&r.push(n);return r},update:function(e){var t=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.container,t);var n=this;n.renderer&&n.redrawThematicFeatures(e),n.currentMousePosition&&(n.currentMousePosition=BM.a.point(n.currentMousePosition.x-n.movingOffset[0],n.currentMousePosition.y-n.movingOffset[1])),n.movingOffset=[0,0],n._zoom=n._map.getZoom(),n._center=n._map.getCenter()},setOpacity:function(e){e!==this.options.opacity&&(isNaN(e)||(this.options.opacity=e,this._updateOpacity()))},redraw:function(){var e=this;return!!e.renderer&&(e._map?e.redrawThematicFeatures(e._map.getBounds()):e.redrawThematicFeatures(),!0)},on:function(e,t,n){return this.renderer?this.renderer.on(e,t):BM.a.Layer.prototype.on.call(this,e,t),this},off:function(e,t,n){return this.renderer?this.renderer.un(e,t):BM.a.Layer.prototype.off.call(this,e,t),this},fire:function(e,t,n){return this.renderer&&this.renderer.trigger(e,t),BM.a.Layer.prototype.fire.call(this,e,t,n),this},addTFEvents:function(){for(var e=this.TFEvents,t=e.length,n=0;n<t;n++)this.renderer.on(e[n][0],e[n][1])},getLocalXY:function(e){if(!this._map)return e;var t=e;BM.a.Util.isArray(e)&&(t=BM.a.point(e[0],e[1])),e instanceof BM.a.Point||(t=e instanceof Xe||e instanceof ct?BM.a.point(e.x,e.y):BM.a.point(e.lon,e.lat));var n=this._map.latLngToAccurateContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(t):BM.a.latLng(t.y,t.x));return[n.x,n.y]},toiClientFeature:function(e){be.isArray(e)||(e=[e]);for(var t=[],n=0;n<e.length;n++)if(e[n]instanceof zN)t.push(e[n].toFeature());else if(e[n]instanceof en)t.push(e[n]);else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type)){var r=new Nn;t=t.concat(r.read(e[n]))}else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("features[".concat(n,"]'s type is not be supported."));t.push(Ib.fromJson(e[n]).toFeature())}return t},toFeature:function(e){return this.toiClientFeature(e)},_initContainer:function(){var e=this.getPane(),t="themeLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&BM.a.Browser.any3d?"animated":"hide");this.container=BM.a.DomUtil.create("div",t,e);var n=BM.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.container.id=this.options.id,this.container.style[n]="50% 50%",this.container.style.position="absolute",this.container.style.zIndex=200},_zoomAnim:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());BM.a.DomUtil.setTransform?BM.a.DomUtil.setTransform(this.container,n,t):this.container.style[BM.a.DomUtil.TRANSFORM]=BM.a.DomUtil.getTranslateString(n)+" scale("+t+")"},_updateOpacity:function(){var e=this;be.modifyDOMElement(e.container,null,null,null,null,null,null,e.options.opacity),null!==e._map&&e._map.fire("changelayer",{layer:e,property:"opacity"})},_reset:function(){var e=this,t=e._map.getBounds();e.update(t);var n=e._map.getSize(),r=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.container,r),parseFloat(e.container.width)!==parseFloat(n.x)&&(e.container.width=n.x+"px"),parseFloat(e.container.height)!==parseFloat(n.y)&&(e.container.height=n.y+"px"),e.redraw()},_resize:function(){var e=this._map.getSize();this.container.style.width=e.x+"px",this.container.style.height=e.y+"px",this.renderer.resize()}}),JN=HN.extend({options:{nodesClipPixel:2,isHoverAble:!1,isMultiHover:!1,isClickAble:!0,isAllowFeatureStyle:!1},initialize:function(e,t){HN.prototype.initialize.call(this,e,t),BM.a.Util.setOptions(this,t);this.cache={},this.cacheFields=[],this.style={},this.highlightStyle={}},addFeatures:function(e){var t=this;t.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),t.isCustomSetMaxCacheCount||(t.maxCacheCount=5*t.features.length),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures())},removeFeatures:function(e){this.clearCache(),HN.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.clearCache(),HN.prototype.removeAllFeatures.call(this,arguments)},redrawThematicFeatures:function(e){var t=this,n=t.renderer.getHoverOne(),r=null;if(n&&n.refDataID&&(r=n.refDataID),this.options.alwaysMapCRS&&e&&e instanceof BM.a.LatLngBounds){var i=this._map.options.crs;e=BM.a.bounds(i.project(e.getSouthWest()),i.project(e.getNorthEast()))}e=hN.toSuperMapBounds(e),t.renderer.clearAll();for(var o=t.features,a=t.cache,s=t.cacheFields,l=t._map.getZoom(),u=t.maxCacheCount,c=0,f=o.length;c<f;c++){var h=o[c],p=h.geometry.getBounds();if(!e||e.intersectsBounds(p)){var y=h.id+"_zoom_"+l.toString();if(a[y])a[y].updateAndAddShapes();else{var d=t.createThematicFeature(o[c]);if(!(d.getShapesCount()<1)&&(a[y]=d,s.push(y),s.length>u)){var m=s[0];s.splice(0,1),delete a[m]}}}}if(t.renderer.render(),r&&t.options.isHoverAble&&t.options.isMultiHover){var v=this.getShapesByFeatureID(r);this.renderer.updateHoverShapes(v)}},createThematicFeature:function(e){var t=this,n=t.getStyleByData(e);e.style&&t.isAllowFeatureStyle&&(n=be.copyAttributesWithClip(e.style));var r={};r.nodesClipPixel=t.options.nodesClipPixel,r.isHoverAble=t.options.isHoverAble,r.isMultiHover=t.options.isMultiHover,r.isClickAble=t.options.isClickAble,r.highlightStyle=cP.transformStyle(t.highlightStyle);for(var i=new kE(e,t,cP.transformStyle(n),r),o=0;o<i.shapes.length;o++)t.renderer.addShape(i.shapes[o]);return i},redraw:function(){return this.clearCache(),HN.prototype.redraw.apply(this,arguments)},clearCache:function(){this.cache={},this.cacheFields=[]},clear:function(){this.renderer.clearAll(),this.renderer.refresh(),this.removeAllFeatures(),this.clearCache()},getCacheCount:function(){return this.cacheFields.length},setMaxCacheCount:function(e){isNaN(e)||(this.maxCacheCount=e,this.isCustomSetMaxCacheCount=!0)},getShapesByFeatureID:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&e===o.refDataID&&t.push(o)}return t}}),qN=JN.extend({initialize:function(e,t){JN.prototype.initialize.call(this,e,t),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(e){var t=this,n=e,r=be.copyAttributesWithClip({},t.style),i=t.styleGroups,o=!1,a=null,s=t.styleGroups&&t.styleGroups.length>0;if(t.themeField&&s&&n.attributes){var l=t.themeField,u=n.attributes;for(var c in u)if(l===c){o=!0,a=u[c];break}}if(o)for(var f=0,h=i.length;f<h;f++)if(a.toString()===i[f].value.toString()){var p=i[f].style;r=be.copyAttributesWithClip(r,p)}return r}}),WN=function(e,t){return new qN(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.uniqueThemeLayer=WN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QN=JN.extend({initialize:function(e,t){JN.prototype.initialize.call(this,e,t),this.style=[],this.themeField=null,this.styleGroups=[]},getStyleByData:function(e){var t=this,n=e,r=be.copyAttributesWithClip({},t.style),i=t.styleGroups,o=!1,a=null,s=t.styleGroups&&t.styleGroups.length>0;if(t.themeField&&s&&n.attributes){var l=t.themeField,u=n.attributes;for(var c in u)if(l===c){o=!0,a=u[c];break}}if(o)for(var f=0,h=i.length;f<h;f++){if(f===h-1?a>=i[f].start&&a<=i[f].end:a>=i[f].start&&a<i[f].end){var p=i[f].style;r=be.copyAttributesWithClip(r,p)}}return r}}),YN=function(e,t){return new QN(e,t)};BM.a.supermap.rangeThemeLayer=YN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var XN=JN.extend({options:{isOverLay:!0,isAvoid:!0},initialize:function(e,t){JN.prototype.initialize.call(this,e,t),BM.a.Util.setOptions(this,t),this.style=[],this.themeField=null,this.styleGroups=[],this.defaultStyle={fontColor:"#000000",fontOpacity:1,fontSize:"12px",fontStyle:"normal",fontWeight:"normal",labelAlign:"cm",labelXOffset:0,labelYOffset:0,labelRotation:0,fill:!1,fillColor:"#ee9900",fillOpacity:.4,stroke:!1,strokeColor:"#ee9900",strokeOpacity:1,strokeWidth:1,strokeLinecap:"round",strokeDashstyle:"solid",labelRect:!0,labelSelect:!0,_isGeoTextStrategyStyle:!0},this.getPxBoundsMode=0,this.labelFeatures=[]},onAdd:function(e){JN.prototype.onAdd.call(this,e),this.container.style.zIndex=200},redrawThematicFeatures:function(e){if(this.features.length>0&&0==this.labelFeatures.length)for(var t=this.setLabelsStyle(this.features),n=0,r=t.length;n<r;n++)this.labelFeatures.push(t[n]);this.features=this.getDrawnLabels(this.labelFeatures),JN.prototype.redrawThematicFeatures.call(this,e)},removeFeatures:function(e){this.labelFeatures=[],JN.prototype.removeFeatures.call(this,arguments)},removeAllFeatures:function(){this.labelFeatures=[],JN.prototype.removeAllFeatures.call(this,arguments)},getDrawnLabels:function(e){for(var t,n,r,i,o=[],a=[],s={labelAlign:"cm",labelXOffset:0,labelYOffset:0},l=this._map,u=l.getSize(),c=l.getZoom(),f=0,h=e.length;f<h;f++){((n=e[f]).isStyleChange||void 0===n.isStyleChange)&&(n=this.setStyle(n));var p=this.getLabelPxLocation(n);if(p.x>=0&&p.x<=u.x&&p.y>=0&&p.y<=u.y){if(n.style.minZoomLevel>-1&&c<=n.style.minZoomLevel)continue;if(n.style.maxZoomLevel>-1&&c>n.style.maxZoomLevel)continue;var y=null;n.isStyleChange?(n.isStyleChange=null,y=this.calculateLabelBounds(n,p)):y=n.geometry.bsInfo.w&&n.geometry.bsInfo.h?this.calculateLabelBounds2(n,p):this.calculateLabelBounds(n,p);var d=new Oe(0,u.y,u.x,0),m=y.length;if(this.options.isAvoid){var v=this.getAvoidInfo(d,y);if(v){if("left"===v.aspectW){n.style.labelXOffset+=v.offsetX;for(var g=0;g<m;g++)y[g].x+=v.offsetX}else if("right"===v.aspectW){n.style.labelXOffset+=-v.offsetX;for(var b=0;b<m;b++)y[b].x+=-v.offsetX}if("top"===v.aspectH){n.style.labelYOffset+=v.offsetY;for(var S=0;S<m;S++)y[S].y+=v.offsetY}else if("bottom"===v.aspectH){n.style.labelYOffset+=-v.offsetY;for(var _=0;_<m;_++)y[_].y+=-v.offsetY}n.isStyleChange=!0}}if(this.options.isOverLay){var w=!1;if(0!=f)for(var O=0;O<a.length;O++)if(this.isQuadrilateralOverLap(y,a[O])){w=!0;break}if(w)continue;a.push(y)}for(var x=[],C=0;C<m-1;C++)x.push(l.containerPointToLatLng(y[C]));var T=x[3],P=x[1],E=new Oe(T.lng,T.lat,P.lng,P.lat).getCenterLonLat(),k=new ct(E.lon,E.lat,n.attributes[this.themeField]);k.calculateBounds(),r=be.cloneObject(n.style),i=be.cloneObject(be.copyAttributes(r,s)),(t=new en(k,n.attributes,i)).id=n.id,t.fid=n.fid,o.push(t)}}return o},getStyleByData:function(e){var t=e;if(t.style=be.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=be.copyAttributes(t.style,this.style),this.themeField&&this.styleGroups&&t.attributes){var n=this.themeField,r=t.attributes,i=this.styleGroups,o=!1,a=null;for(var s in r)if(n===s){o=!0,a=r[s];break}if(o)for(var l=0,u=i.length;l<u;l++)if(a>=i[l].start&&a<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=be.copyAttributes(t.style,c)}t.style.label=t.attributes[this.themeField]}return t.style},setLabelsStyle:function(e){for(var t,n=[],r=0,i=e.length;r<i;r++){var o=e[r];if("SuperMap.Geometry.GeoText"!==o.geometry.CLASS_NAME)return e;(o.geometry.bsInfo.w||o.geometry.bsInfo.h)&&(o.geometry.bsInfo.w=null,o.geometry.bsInfo.h=null,o.geometry.labelWTmp=null),(t=this.setStyle(o)).layer=this.layer,n.push(t)}return n},setStyle:function(e){var t=e;if(t.style=be.copyAttributes(t.style,this.defaultStyle),this.style&&this.style.fontSize&&parseFloat(this.style.fontSize)<12&&(this.style.fontSize="12px"),t.style=be.copyAttributes(t.style,this.style),this.groupField&&this.styleGroups&&t.attributes){var n=this.groupField,r=t.attributes,i=this.styleGroups,o=!1,a=null;for(var s in r)if(n===s){o=!0,a=r[s];break}if(o)for(var l=0,u=i.length;l<u;l++)if(a>=i[l].start&&a<i[l].end){var c=i[l].style;c&&c.fontSize&&parseFloat(c.fontSize)<12&&(c.fontSize="12px"),t.style=be.copyAttributes(t.style,c)}}return t.style.label=t.geometry.text,t},getLabelPxLocation:function(e){var t=e.geometry,n=e.style,r=t.getCentroid(),i=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(BM.a.point(r.x,r.y)):BM.a.latLng(r.y,r.x)),o=BM.a.point(i.x,i.y);if(n.labelXOffset||n.labelYOffset){var a=isNaN(n.labelXOffset)?0:n.labelXOffset,s=isNaN(n.labelYOffset)?0:n.labelYOffset,l=o.add(BM.a.point(a,-s));return BM.a.point(l.x,l.y)}return BM.a.point(o.x,o.y)},calculateLabelBounds:function(e,t){var n=e.geometry,r=null,i=null;if(0==this.getPxBoundsMode)r=n.getLabelPxBoundsByText(t,e.style);else{if(1!==this.getPxBoundsMode)return null;i=this.getLabelInfo(e.geometry.getCentroid(),e.style),r=n.getLabelPxBoundsByLabel(t,i.w,i.h,e.style)}var o=[];return o=e.style.labelRotation%180==0?[{x:r.left,y:r.top},{x:r.right,y:r.top},{x:r.right,y:r.bottom},{x:r.left,y:r.bottom},{x:r.left,y:r.top}]:this.rotationBounds(r,t,e.style.labelRotation),n.bounds=new Oe(o[1].x,o[3].y,o[2].x,o[4].y),o},calculateLabelBounds2:function(e,t){var n,r,i,o,a,s=e.geometry.bsInfo,l=e.style,u=be.cloneObject(t);if(l.labelAlign&&"cm"!==l.labelAlign)switch(l.labelAlign){case"lt":u.x+=s.w/2,u.y+=s.h/2;break;case"lm":u.x+=s.w/2;break;case"lb":u.x+=s.w/2,u.y-=s.h/2;break;case"ct":u.y+=s.h/2;break;case"cb":u.y-=s.h/2;break;case"rt":u.x-=s.w/2,u.y+=s.h/2;break;case"rm":u.x-=s.w/2;break;case"rb":u.x-=s.w/2,u.y-=s.h/2}r=u.x-s.w/2,i=u.y+s.h/2,a=l.fontStyle&&"italic"===l.fontStyle?u.x+s.w/2+parseInt(parseFloat(l.fontSize)/2):u.x+s.w/2,o=u.y-s.h/2,n=new Oe(r,i,a,o);var c=[];return c=l.labelRotation%180==0?[{x:n.left,y:n.top},{x:n.right,y:n.top},{x:n.right,y:n.bottom},{x:n.left,y:n.bottom},{x:n.left,y:n.top}]:this.rotationBounds(n,t,l.labelRotation),e.geometry.bounds=new Oe(c[1].x,c[3].y,c[2].x,c[4].y),c},getLabelInfo:function(e,t){var n={l:"left",r:"right",t:"top",b:"bottom"},r={l:0,r:-1,t:0,b:-1};t=be.extend({fontColor:"#000000",labelAlign:"cm"},t);var i=this.getLocalXY(e),o=0;if(t.labelXOffset||t.labelYOffset){var a=isNaN(t.labelXOffset)?0:t.labelXOffset,s=isNaN(t.labelYOffset)?0:t.labelYOffset;i[0]+=a,i[1]-=s}var l=document.createElement("canvas");l.globalAlpha=0,l.lineWidth=1;var u=l.getContext("2d");u.fillStyle=t.fontColor,u.globalAlpha=t.fontOpacity||1;var c,f,h,p=[t.fontStyle?t.fontStyle:"normal","normal",t.fontWeight?t.fontWeight:"normal",t.fontSize?t.fontSize:"1em",t.fontFamily?t.fontFamily:"sans-serif"].join(" "),y=t.label.split("\n"),d=y.length;if(u.fillText){u.font=p,u.textAlign=n[t.labelAlign[0]]||"center",u.textBaseline=n[t.labelAlign[1]]||"middle",null==(c=r[t.labelAlign[1]])&&(c=-.5),f=u.measureText("Mg").height||u.measureText("xx").width,i[1]+=f*c*(d-1);for(var m=0;m<d;m++)o<(h=u.measureText(y[m]).width)&&(o=h)}else if(u.mozDrawText){u.mozTextStyle=p,null==(c=r[t.labelAlign[1]])&&(c=-.5),f=u.mozMeasureText("xx"),i[1]+=f*(1+c*d);for(var v=0;v<d;v++)o<(h=u.measureText(y[v]).width)&&(o=h)}var g={};return o?(g.w=o,g.h=t.fontSize,g.rows=y.length,g):null},rotationBounds:function(e,t,n){var r=BM.a.point(e.left,e.top),i=BM.a.point(e.right,e.top),o=BM.a.point(e.right,e.bottom),a=BM.a.point(e.left,e.bottom),s=[];s.push(this.getRotatedLocation(r.x,r.y,t.x,t.y,n)),s.push(this.getRotatedLocation(i.x,i.y,t.x,t.y,n)),s.push(this.getRotatedLocation(o.x,o.y,t.x,t.y,n)),s.push(this.getRotatedLocation(a.x,a.y,t.x,t.y,n));for(var l=[],u=0;u<s.length;u++)l.push({x:s[u].x,y:s[u].y});return l.push({x:s[0].x,y:s[0].y}),l},getRotatedLocation:function(e,t,n,r,i){var o,a,s={};return t=-t,r=-r,i=-i,o=(e-n)*Math.cos(i/180*Math.PI)-(t-r)*Math.sin(i/180*Math.PI)+n,a=(e-n)*Math.sin(i/180*Math.PI)+(t-r)*Math.cos(i/180*Math.PI)+r,s.x=o,s.y=-a,s},getAvoidInfo:function(e,t){if(5!==t.length)return null;for(var n=[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.right,y:e.bottom},{x:e.left,y:e.bottom},{x:e.left,y:e.top}],r=!1,i=n.length,o=t.length,a=0,s=0,l="",u="",c=0;c<i-1;c++)for(var f=0;f<o-1;f++){"SuperMap.Geometry.Point"===be.lineIntersection(n[c],n[c+1],t[f],t[f+1]).CLASS_NAME&&(h(t[f]),h(t[f+1]),r=!0)}return r?{aspectW:u,aspectH:l,offsetX:a,offsetY:s}:null;function h(t){if(!e.contains(t.x,t.y)){if(t.y<e.top){var n=Math.abs(e.top-t.y);n>s&&(s=n,l="top")}if(t.y>e.bottom){var r=Math.abs(t.y-e.bottom);r>s&&(s=r,l="bottom")}if(t.x<e.left){var i=Math.abs(e.left-t.x);i>a&&(a=i,u="left")}if(t.x>e.right){var o=Math.abs(t.x-e.right);o>a&&(a=o,u="right")}}}},isQuadrilateralOverLap:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var i=!1,o=0;o<n;o++)if(this.isPointInPoly(e[o],t)){i=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){i=!0;break}for(var s=0;s<n-1&&!i;s++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===be.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(e,t){for(var n=!1,r=-1,i=t.length,o=i-1;++r<i;o=r)(t[r].y<=e.y&&e.y<t[o].y||t[o].y<=e.y&&e.y<t[r].y)&&e.x<(t[o].x-t[r].x)*(e.y-t[r].y)/(t[o].y-t[r].y)+t[r].x&&(n=!n);return n}}),KN=function(e,t){return new XN(e,t)};BM.a.supermap.labelThemeLayer=KN;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var ZN=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},getFeaturesByIDs:function(e,t,n){var r=this;new ap(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesByBounds:function(e,t,n){var r=this;new gh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesByBuffer:function(e,t,n){var r=this;new Lh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesBySQL:function(e,t,n){var r=this;new Sp(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},getFeaturesByGeometry:function(e,t,n){var r=this;new qh(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},editFeatures:function(e,t){if(e&&e.dataSourceName&&e.dataSetName){var n=this,r=n.url,i=e.dataSourceName,o=e.dataSetName;new tl(r+="/datasources/"+i+"/datasets/"+o,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))}},_processParams:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.fromIndex=e.fromIndex?e.fromIndex:0,e.toIndex=e.toIndex?e.toIndex:-1,e.isUseBatch=null!=e.isUseBatch&&e.isUseBatch,e.bounds&&(e.bounds=hN.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry=yN(e.geometry)),e.editType&&(e.editType=e.editType.toLowerCase());var t=this;if(e.features){var n=[];BM.a.Util.isArray(e.features)?e.features.map(function(e){return n.push(t._createServerFeature(e)),e}):n.push(t._createServerFeature(e.features)),e.features=n}return e},_createServerFeature:function(e){var t,n={},r=[],i=[];for(var o in(t=e||{}).properties)r.push(o),i.push(t.properties[o]);return n.fieldNames=r,n.fieldValues=i,t.id&&(n.id=t.id),n.geometry=yN(t),n},_processFormat:function(e){return e||i.GEOJSON}}),$N=function(e,t){return new ZN(e,t)};BM.a.supermap.featureService=$N;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var eR=BM.a.Path.extend({options:{fontStyle:"normal",fontWeight:"normal",fontSize:"1em",fontFamily:"sans-serif",textAlign:"center",textBaseline:"middle",vfactor:-.5,labelRotation:0,globalAlpha:1,label:""},initialize:function(e,t){BM.a.Util.setOptions(this,t),this._latlng=e},setLatLng:function(e){return this._latlng=e,this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var e=this._clickTolerance(),t=[e,e];this._pxBounds=new BM.a.Bounds(this._point.subtract(t),this._point.add(t))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateUnicode(this)},_containsPoint:function(e){return e.distanceTo(this._point)<=this._clickTolerance()}}),tR=function(e,t){return new eR(e,t)};BM.a.Canvas.include({_updateUnicode:function(e){if(this._drawing){var t={x:e._point.x,y:e._point.y},n=this._ctx,r=[e.options.fontStyle,"normal",e.options.fontWeight,e.options.fontSize,e.options.fontFamily].join(" "),i=e.options.label.replace(/^&#x/,""),o=(i=String.fromCharCode(parseInt(i,16))).split("\n"),a=o.length;if(n.fillStyle=e.options.fontColor,n.globalAlpha=1,e.options.fontOpacity>=0&&e.options.fontOpacity<1&&(n.globalAlpha=e.options.fontOpacity),n.fillText){n.font=r,n.textAlign=e.options.textAlign,n.textBaseline=e.options.textBaseline;var s=e.options.vfactor,l=n.measureText("Mg").height||n.measureText("xx").width;t.y+=l*s*(a-1);for(var u=0;u<a;u++)0!=e.options.labelRotation?(n.save(),n.translate(t.x,t.y),n.rotate(e.options.labelRotation*Math.PI/180),n.fillText(o[u],0,l*u),n.restore()):n.fillText(o[u],t.x,t.y)}else if(n.mozDrawText){n.mozTextStyle=r;var c=e.options.textAlign,f=e.options.vfactor,h=n.mozMeasureText("xx");t.y+=h*(1+f*a);for(var p=0;p<a;p++){var y=t.x+c*n.mozMeasureText(o[p]),d=t.y+p*h;n.translate(y,d),n.mozDrawText(o[p]),n.translate(-y,-d)}}}}}),BM.a.supermap.unicodeMarker=tR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nR=BM.a.LayerGroup.extend({options:{map:"map",server:"https://www.supermapol.com",featureLayerPopupEnable:!0,featureLayerPopup:null,credentialValue:null,credentialKey:"key",attribution:rN.Online.attribution},defaultFeatureLayerPopup:function(e){return e.feature.properties.attributes.title+":"+e.feature.properties.attributes.description},initialize:function(e,t){(e||t)&&(this._layers={},BM.a.setOptions(this,t),this.id=e,this.load(),this.cartoCSSToLeaflet=new BN)},load:function(){this.options.server.indexOf("http://")<0&&this.options.server.indexOf("https://")<0&&(this.options.server="http://"+this.options.server);var e=this.options.server+"/web/maps/"+this.id+".json";this.options.credentialValue&&(e+="?"+this.options.credentialKey+"="+this.options.credentialValue);var t=this;nr.get(e).then(function(e){return e.json()}).then(function(e){if(e){var n=e.layers;t.mapInfo=e,t.createLayersByJson(n)}})},addLayerWrapper:function(e,t,n){return t&&this.createMap(n),this.addLayer(e),e.labelLayer&&this.addLayer(e.labelLayer),this},createLayersByJson:function(e){if(BM.a.Util.isArray(e)&&0!==e.length){this.layers=[];for(var t=[],n=0;n<e.length;n++){var r=e[n];r._originIndex=n,"BASE_LAYER"===(r.layerType=r.layerType||"BASE_LAYER")?(r.isBaseLayer=!0,this.createLayer(r.type,r)):t.unshift(r)}for(;t.length>0;){var i=t.pop(),o=i.type,a=i.layerType=i.layerType||"BASE_LAYER";"OVERLAY_LAYER"!==a&&(o=a),this.createLayer(o,i)}this.fire("maploaded",{map:this._map})}},createCRS:function(e,t,n,r,i){return e<0?new zM({bounds:i,origin:r,resolutions:n}):910112===e||910102===e?BM.a.CRS.BaiduCRS:(910111===e&&(e=3857),910101===e&&(e=4326),BM.a.Proj.CRS("EPSG:"+e,{origin:r,resolutions:n,bounds:i}))},createMap:function(e){var t=e.crs||BM.a.CRS.EPSG3857,n=BM.a.latLngBounds(t.unproject(e.bounds.min),t.unproject(e.bounds.max));this._map=BM.a.map(this.options.map,{center:n.getCenter(),maxZoom:e.maxZoom||22,minZoom:e.minZoom||0,zoom:e.zoom||0,crs:t,renderer:BM.a.canvas()}),t instanceof zM?this._map.setZoom(e.zoom?e.zoom+2:2,{maxZoom:e.maxZoom||22}):this._map.fitBounds(n,{maxZoom:e.maxZoom||22})},getResolutionsFromScales:function(e,t,n,r){for(var i=[],o=0;o<e.length;o++)i.push(BM.a.Util.GetResolutionFromScaleDpi(e[o],t,n,r));return i},createLayer:function(e,t){var n=t.prjCoordSys,r=n&&n.epsgCode||this.mapInfo.epsgCode,i=this.mapInfo.center||t.center,o=this.mapInfo.level||t.level,a=this.mapInfo.extent||t.bounds,s=t.scales,l=t.isBaseLayer,u=t.opacity,c=BM.a.bounds([a.leftBottom.x,a.leftBottom.y],[a.rightTop.x,a.rightTop.y]),f=t.bounds?BM.a.bounds([t.bounds.leftBottom.x,t.bounds.leftBottom.y],[t.bounds.rightTop.x,t.bounds.rightTop.y]):c;i||(i=f.getCenter());var h,p=BM.a.point(f.min.x,f.max.y),y=s?this.getResolutionsFromScales(s,96,t.units):null,d=this.createCRS(r,n?n.type:"",y,p,f),m={bounds:c,center:BM.a.point(i.x,i.y),crs:d,zoom:o};switch(e){case"SUPERMAP_REST":h=AN(t.url,{transparent:!0,opacity:u});break;case"SUPERMAP_REST_VECTOR":break;case"TIANDITU_VEC":case"TIANDITU_IMG":case"TIANDITU_TER":m.crs=4326===r?BM.a.CRS.TianDiTu_WGS84:BM.a.CRS.TianDiTu_Mercator,m.minZoom=1,m.zoom=1+m.zoom,h=this.createTiandituLayer(t);break;case"BAIDU":m.crs=BM.a.CRS.BaiduCRS,m.zoom=3+m.zoom,m.minZoom=3,h=_N();break;case"BING":break;case"WMS":h=this.createWmsLayer(t);break;case"WMTS":m.resolutions=this.getResolutionsFromScales(s,90.71446714322,t.units);var v=t.identifier,g=v.substring(v.indexOf("_")+1);h=PN(t.url,{layer:g,style:"default",tilematrixSet:v,format:"image/png"});break;case"CLOUD":m.crs=BM.a.CRS.EPSG3857,m.zoom=3+m.zoom,m.minZoom=3,h=ON(t.url,{opacity:u});break;case"MARKER_LAYER":h=this.createMarkersLayer(t,d);break;case"FEATURE_LAYER":"ANIMATORVECTOR"==t.identifier||(h="THEME"==t.identifier?this.createThemeLayer(t):this.createVectorLayer(t,d));break;default:throw new Error("unSupported Layer Type")}h&&t.isVisible&&this.addLayerWrapper(h,l,m)},createTiandituLayer:function(e){var t=e.type.split("_")[1].toLowerCase(),n="OVERLAY_LAYER"===e.layerType;return new EN({layerType:t,isLabel:n})},createMarkersLayer:function(e,t){var n=this,r=e.markers||[],i=BM.a.geoJSON(BM.a.Util.toGeoJSON(r),{pointToLayer:function(e,t){var n=new BM.a.Marker(t);return n.setStyle=function(e){e&&n.setIcon(e)},n},coordsToLatLng:function(e){var n=t.unproject(BM.a.point(e[0],e[1]));return new BM.a.LatLng(n.lat,n.lng,e[2])},style:function(e){return n.cartoCSSToLeaflet.getStyleFromiPortalMarker(e.properties.icon)}});return this.options.featureLayerPopupEnable&&i.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),i},createWmsLayer:function(e){var t=e.url,n=e.opacity,r=e.subLayers;return r&&"undefined"!==r&&"null"!==r||(r="0"),BM.a.tileLayer.wms(t,{layers:r,format:"image/png",transparent:!0,noWrap:!0,opacity:n})},createVectorLayer:function(e,t){var n=this,r=e.style,o=e.opacity,a=this,s=function(e){var n=t.unproject(BM.a.point(e[0],e[1]));return new BM.a.LatLng(n.lat,n.lng,e[2])};if(!e.url){var l=BM.a.geoJSON(BM.a.Util.toGeoJSON(e.features),{pointToLayer:function(e,t){var n=new BM.a.Marker(t);return n.setStyle=function(e){e&&n.setIcon(e)},n},coordsToLatLng:s,style:function(e){var t=a.cartoCSSToLeaflet.getStyleFromiPortalStyle(r||{},e.geometry.type,e.properties.style);return t.dashArray&&0==t.dashArray.length&&(t.dashArray=null),t},opacity:o});return this.options.featureLayerPopupEnable&&l.bindPopup(this.options.featureLayerPopup||this.defaultFeatureLayerPopup),l}for(var u=e.url,c=e.name,f=e.features,h=0;h<f.length;h++){var p=f[h];p.visible&&this.getFeaturesBySQL(u,c,p.name,"",i.GEOJSON,function(e){var t=BM.a.geoJSON(e.result,{pointToLayer:function(e,t){var n=new BM.a.Marker(t);return n.setStyle=function(e){e&&n.setIcon(e)},n},coordsToLatLng:s,style:function(e){return this.cartoCSSToLeaflet.getStyleFromiPortalStyle(r||{},e.geometry.type,e.properties.style)},opacity:o});n.options.featureLayerPopupEnable&&t.bindPopup(a.options.featureLayerPopup||a.defaultFeatureLayerPopup),n.addLayer(t)})}},getFeaturesBySQL:function(e,t,n,r,i,o){var a=new pp({queryParameter:{name:n+"@"+t,attributeFilter:r=r||"SMID > 0"},datasetNames:[t+":"+n],fromIndex:0,toIndex:1e5});$N(e).getFeaturesBySQL(a,o,i)},createThemeLayer:function(e){var t,n=this,r=e.themeSettings&&JSON.parse(e.themeSettings),i=r.type;if(e.themeSettings=r,(t="HEAT"===i?this.createHeatLayer(e,r):"UNIQUE"===i?this.createUniqueLayer(e,r):"RANGE"===i?this.createRangeLayer(e,r):this.createBaseThemeLayer(e,r))&&(this.addFeature2ThemeLayer(e,t),t.on("add",function(e){n.registerThemeEvent(e.target)})),r&&r.labelField){var o=this.createLabelLayer(e,r);o.on("add",function(e){n.registerThemeEvent(e.target)}),t.labelLayer=o}return t},createBaseThemeLayer:function(e,t){var n=e.style,r=e.opacity,i=t.vectorType,o=n.pointStyle;o.fill="LINE"!==i;var a={};a.radius=o.pointRadius,a.color=o.strokeColor,a.opacity=o.strokeOpacity,a.lineCap=o.strokeLineCap,a.weight=o.strokeWidth,a.fillColor=o.fillColor,a.fillOpacity=o.fillOpacity;var s=function(e,t){return BM.a.circleMarker(t,a)};return o.unicode&&(s=function(e,t){return new eR(t,o)}),BM.a.geoJSON({type:"GeometryCollection",geometries:[]},{pointToLayer:s,opacity:r})},createUniqueLayer:function(e,t){for(var n=e.title,r=t.field,i=[],o=t.settings,a=e.isVisible,s=e.opacity,l=t.vectorType,u=0;u<o.length;u++){var c={};c.value=o[u].value,c.style=o[u].style,i.push(c)}var f=new qN(n,{opacity:s,visibility:a});this.registerThemeEvent(f),f.style=e.style.pointStyle,f.style.fill="LINE"!==l,f.style.stroke=!0,f.themeField=r,f.styleGroups=i;var h=this;return f.on("click",function(e){if(e.target&&e.target.refDataID){var t=f.getFeatureById(e.target.refDataID);h.events.triggerEvent("uniquefeatureclicked",t,f)}}),f},createRangeLayer:function(e,t){var n=e.title,r=t.field,i=[],o=t.settings,a=e.isVisible,s=e.opacity,l=t.vectorType,u=e.style.pointStyle;u.fill="LINE"!==l;for(var c=0;c<o.length;c++){var f={};f.start=o[c].start,f.end=o[c].end,f.style=o[c].style,i.push(f)}var h=new QN(n,{visibility:a,opacity:s});return this.registerThemeEvent(h),h.style=e.style.pointStyle,h.style.stroke=!0,h.themeField=r,h.styleGroups=i,h},createLabelLayer:function(e,t){var n,r=e.title,i=t.labelField,o=t.settings,a=e.isVisible;n=!o||o.length>0?{fillColor:"#ffffff"}:o[0].style;var s=BM.a.Util.extend(new _x,n);s.fontWeight="bold",s.fontSize="14px",s.labelRect=!0,s.strokeColor=s.fillColor,s.fontColor=t.labelColor,t.labelFont&&(s.fontFamily=t.labelFont);var l=new XN(r,{visibility:a,opacity:.7});return this.registerThemeEvent(l),l.style=s,l.themeField=i,l.styleGroups=[],l},createHeatLayer:function(e,t){for(var n,r=t.colors||["blue","cyan","lime","yellow","red"],i={},o=0,a=r.length,s=1;o<a;o++)i[s/a]=r[o],s++;var l=t.settings[0].radius;return"千米"!==t.heatUnit&&"km"!==t.heatUnit||(l=1e3*t.heatRadius),t.settings[0]&&t.settings[0].featureWeight&&(n=t.settings[0].featureWeight),BM.a.heatLayer([],{radius:l/2,minOpacity:e.opacity,gradient:i,blur:l/2,featureWeight:n})},addFeature2ThemeLayer:function(e,t){var n=this;if("FEATURE_LAYER"===e.layerType&&"THEME"===e.identifier){var r=this,o=!!e.datasourceName,a=e.cartoCSS;if(a)var s=this.getCartoCSS2Obj(a).needTransform,l=this.getCartoCSS2Obj(a).isAddFile;var u,c,f,h=e.url,p=e.credential,y=e.themeSettings,d=y.filter;if(l){var m=JSON.parse(e.datasourceName),v=this.getSQLFromFilter(d);if(h)this.getFeatureFromFileAdded(e,function(n){var i,o=[];if("EXCEL"===n.type||"CSV"===n.type)for(var a=0,l=(i=r.parseFeatureFromEXCEL.apply(r,[n.content.rows,n.content.colTitles,!1,m])).length;a<l;a++)jN()({attr:i[a].attributes},v).length>0&&o.push(i[a]);else for(var u=0,c=(i=r.parseFeatureFromJson(n.content)).length;u<c;u++)jN()({attr:i[u].attributes},v).length>0&&o.push(i[u]);var f=e.prjCoordSys&&e.prjCoordSys.epsgCode;s?r.changeFeatureLayerEpsgCode(f,"4326",t,o,function(e){k(e)}):k(o)},function(){});else{for(var g=[],b=e.features,S=0,_=b.length;S<_;S++){var w=b[S];if(jN()({attr:w.attributes},v).length>0){var O=w.geometry.points[0].x,x=w.geometry.points[0].y,C=new Xe(O,x),T=new en(C,w.attributes,w.style);g.push(T)}}k(g)}}else if(o){var P=e.datasourceName;f=(c=(u=e.subLayers&&JSON.parse(e.subLayers)).length&&u.length>0?u[0]:u)&&c.name,this.getFeaturesBySQL(e.url,P,f,y.filter,i.ISERVER,function(r){var i,o,a=r.result,l=[];if(a&&a.features){for(var u=0,c=(i=a.features).length;u<c;u++)o=Ib.fromJson(i[u]).toFeature(),l.push(o);var f=e.prjCoordSys&&e.prjCoordSys.epsgCode;s?n.changeFeatureLayerEpsgCode(f,"4326",t,l,function(e){k(e)}):k(i)}})}else{f=(c=(u=e.subLayers&&JSON.parse(e.subLayers)).length&&u.length>0?u[0]:u)&&c.name;var E=e.prjCoordSys&&e.prjCoordSys.epsgCode;this.getFeaturesBySQL(h,p,f,d,i.ISERVER,function(e){s?r.changeFeatureLayerEpsgCode(E,"4326",t,e,function(e){k(e)}):k(e)})}}function k(n){if(t&&t.labelLayer instanceof XN&&r.addFeature2LabelLayer(t.labelLayer,n,e),BM.a.HeatLayer&&t instanceof BM.a.HeatLayer){for(var i=[],o=0,a=n.length;o<a;o++){var s=n[o].geometry;i[o]=BM.a.latLng(s.y,s.x),t.options.featureWeight&&(i[o]=[i[o].lat,i[o].lng,parseFloat(n[o].attributes[t.options.featureWeight])])}t.setLatLngs(i)}else t instanceof BM.a.GeoJSON?t.addData((new Nn).toGeoJSON(n)):t.addFeatures(n)}},addFeature2LabelLayer:function(e,t,n){if(t){for(var r,i,o=n.themeSettings,a=(o="string"==typeof o?JSON.parse(n.themeSettings):n.themeSettings).labelField,s=e.style,l=[],u=n.styleString&&JSON.parse(n.styleString),c=0;c<t.length;c++){i=this.getLabelLngLat(o.vectorType,t[c]),this.setLabelOffset(o.vectorType,u,t[c],s);var f=t[c].attributes;r=new zN([i.lat,i.lng,f[a]],f),l.push(r)}e.style=s,e.addFeatures(l)}},setLabelOffset:function(e,t,n,r){if("POINT"===e){var i=t.pointStyle.pointRadius||0,o=t.pointStyle.strokeWidth||0,a=parseInt(t.pointStyle.fontSize)||0;r.labelXOffset=0,r.labelYOffset=t.pointStyle.unicode?20+a:25+(i+o)}},getLabelLngLat:function(e,t){var n={};if("POINT"===e){var r=t.geometry;n.lng=r.x,n.lat=r.y}else if("LINE"===e){var i,o,a=t.geometry.components;if(a[0].x)i=a.length,o=parseInt(i/2),n.lng=a[o].x,n.lat=a[o].y;else{var s=a[0].components;i=s.length,o=parseInt(i/2),n.lng=s[o].x,n.lat=s[o].y}}else{var l=t.geometry.getCentroid();n.lng=l.x,n.lat=l.y}return n},changeFeatureLayerEpsgCode:function(e,t,n,r,i){var o,a,s=this,l=[];if(e&&t){if(r&&r.length>0){for(o=0,a=r.length;o<a;o++){var u=r[o].geometry.getVertices();l=l.concat(u)}e="EPSG:"+e,t="EPSG:"+t,s.coordsTransform(e,t,l,function(e,t){return function(e){var n=e.length;for(o=0;o<n;o++){var r=l[o],a=e[o];r.x=a.x,r.y=a.y,r.calculateBounds()}for(o=0,n=t.length;o<n;o++){var u=t[o].geometry;u.components&&s.calculateComponents(u.components),u.calculateBounds()}i&&i.call(s,t)}}(0,r))}return!0}},calculateComponents:function(e){if(e)if(e.components)this.calculateComponents(e.components);else for(var t=0,n=e.length;t<n;t++){var r=e[t];r.components&&this.calculateComponents(r.components),r.calculateBounds()}},coordsTransform:function(e,t,n,r){var i,o=this.SERVER_TYPE_MAP[e],a=this.SERVER_TYPE_MAP[t];if(e!==t&&o&&a){var s=this.SERVER_TYPE_MAP["EPSG:3857"],l=this.SERVER_TYPE_MAP["EPSG:4326"];if(o!==s&&o!==l||a!==s&&a!==l){var u=o+"_"+a;this.postTransform(u,n,r)}else this.projTransform(e,t,n,r)}else{if(n&&void 0!==n.length){i=[];for(var c=0,f=n.length;c<f;c++){var h={x:n[c].x,y:n[c].y};i.push(h)}}else i={x:n.x,y:n.y};r&&r.call(this,i)}},projTransform:function(e,t,n,r){var i;if(qj){if(n&&void 0!==n.length){i=[];for(var o=0,a=n.length;o<a;o++){var s=qj(e,t,[n[o].x,n[o].y]);i.push({x:s[0],y:s[1]})}}else i={x:(i=qj(e,t,[n.x,n.y]))[0],y:i[1]};r&&(this.fire("coordconvertsuccess",{newCoor:i}),r.call(this,i))}},postTransform:function(e,t,n){var r=this,i=[];if(!e)return n.call(this,null);if(t&&void 0!==t.length)for(var o=0,a=t.length;o<a;o++)i.push({x:t[o].x,y:t[o].y});else i=[{x:t.x,y:t.y}];if(0===i.length)return n.call(this,null);var s={convertType:e,points:i},l=this.server+"/apps/viewer/coordconvert.json";s=JSON.stringify(s);var u={};!be.isInTheSameDomain(l)&&this.proxy&&(u.proxy=this.proxy),nr.post(l,s,u).then(function(e){return e.json()}).then(function(e){var i=e;t||void 0===t.length||(i=i[0]),r.fire("coordconvertsuccess",{newCoors:i}),n.call(r,i)}).catch(function(e){r.actived&&r.fire("coordconvertfailed",{err:e})})},getSQLFromFilter:function(e){return e?" *  where ("+(e=e.replace(/=/g,"==").replace(/and|AND/g,"&&").replace(/or|OR/g,"||").replace(/>==/g,">=").replace(/<==/g,"<="))+")":" * where (1==1||1>=0)"},getAttributesObjFromTable:function(e,t){if(0!==e.length&&0!==t.length){for(var n=[],r=0;r<e.length;r++){for(var i={},o=0;o<t.length;o++)i[t[o]]=e[r][o];n.push(i)}return n}},parseFeatureFromEXCEL:function(e,t,n,r){for(var i=this.getAttributesObjFromTable(e,t),o=[],a=0,s=i.length;a<s;a++){var l=i[a][r.lon],u=i[a][r.lat];if(l&&u){l=parseFloat(l),u=parseFloat(u);var c,f=new Xe(l,u);c=n?new UN(f,i[a],null):new en(f,i[a],null),o.push(c)}}return o},parseFeatureFromJson:function(e){var t=new Nn,n=t.read(e);if(null==n){var r=JSON.parse(e.replace(/'/,'"'));(r.isAnalyseResult||"MapEditor"===r.type||"DataInsights"===r.type||"ISERVER"===r.type)&&(r=r.data.recordsets[0].features),n=(t=new Nn).read(r)}for(var i=0,o=n.length;i<o;i++)n[i].attributes=n[i].attributes.properties||n[i].attributes;return n},getFeatureFromFileAdded:function(e,t,n,r){var i=r?e.url+"?currentPage=1&&pageSize=9999999":e.url;nr.get(i).then(function(e){return e.json()}).then(function(e){t&&t(e)}).catch(function(e){return n&&n(e)})},getCartoCSS2Obj:function(e){var t,n=!1;return e.indexOf("}")>-1?(n=(e=JSON.parse(e)).needTransform,t=e.isAddFile):"needTransform"===e?(n=!0,t=!1):t="true"===e,{isAddFile:t,needTransform:n}},registerThemeEvent:function(e){var t=this;e.on("click",function(n){var r;e.map&&(t.selectedFeature&&(t.fire("featureunselected",{feature:t.selectedFeature}),t.selectedFeature=null),n.target&&n.target.refDataID&&(r=e.getFeatureById(n.target.refDataID)),r&&(t.selectedFeature=r,t.fire("featureselected",{feature:r})))}),e.on("mousemove",function(n){var r;e.map&&(n.target&&n.target.refDataID&&(n.target&&n.target.refDataID&&(r=e.getFeatureById(n.target.refDataID)),r&&t.fire("featuremousemove",{feature:r})))})},SERVER_TYPE_MAP:{"EPSG:4326":"WGS84","EPSG:3857":"MERCATOR","EPSG:900913":"MERCATOR","EPSG:102113":"MERCATOR","EPSG:910101":"GCJ02","EPSG:910111":"GCJ02MERCATOR","EPSG:910102":"BD","EPSG:910112":"BDMERCATOR"}}),rR=function(e,t){return new nR(e,t)};BM.a.supermap.webmap=rR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iR=iN.extend({options:{geometry:null,prjCoordSys:null,excludeField:null},initialize:function(e,t){t=t||{},BM.a.setOptions(this,t),t.projection&&(this.options.prjCoordSys=t.projection),iN.prototype.initialize.call(this,e,t),this.dataFlow=new as(e,t),this.dataFlow.events.on({broadcastSocketConnected:this._defaultEvent,broadcastSocketError:this._defaultEvent,broadcastFailed:this._defaultEvent,broadcastSucceeded:this._defaultEvent,subscribeSocketConnected:this._defaultEvent,subscribeSocketError:this._defaultEvent,messageSucceeded:this._defaultEvent,setFilterParamSucceeded:this._defaultEvent,scope:this})},initBroadcast:function(){return this.dataFlow.initBroadcast(),this},broadcast:function(e){this.dataFlow.broadcast(e)},initSubscribe:function(){return this.dataFlow.initSubscribe(),this},setExcludeField:function(e){return this.dataFlow.setExcludeField(e),this.options.excludeField=e,this},setGeometry:function(e){return this.dataFlow.setGeometry(e),this.options.geometry=e,this},unSubscribe:function(){this.dataFlow.unSubscribe()},unBroadcast:function(){this.dataFlow.unBroadcast()},_defaultEvent:function(e){this.fire(e.eventType||e.type,e)}}),oR=function(e,t){return new iR(e,t)};BM.a.supermap.dataFlowService=oR;var aR=n(6);function sR(e){return(sR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function uR(e,t){return!t||"object"!==sR(t)&&"function"!=typeof t?cR(e):t}function cR(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fR(e,t,n){return(fR="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=hR(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}function hR(e){return(hR=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pR(e,t){return(pR=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var yR=aR.baiduMapLayer?aR.baiduMapLayer.__proto__:Function,dR=function(e){function t(e,n,r,i){var o;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),o=uR(this,hR(t).call(this,e,r,i)),!yR)return uR(o);var a=cR(o);return i=i||{},a.init(i),a.argCheck(i),o.canvasLayer=n,o.clickEvent=o.clickEvent.bind(cR(o)),o.mousemoveEvent=o.mousemoveEvent.bind(cR(o)),o._moveStartEvent=o.moveStartEvent.bind(cR(o)),o._moveEndEvent=o.moveEndEvent.bind(cR(o)),o._zoomStartEvent=o.zoomStartEvent.bind(cR(o)),o.bindEvent(),o}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pR(e,t)}(t,yR),n=t,(r=[{key:"clickEvent",value:function(e){var n=this.map.containerPointToLayerPoint([0,0]),r=this.devicePixelRatio=this.canvasLayer.devicePixelRatio=window.devicePixelRatio||1,i=e.layerPoint;fR(hR(t.prototype),"clickEvent",this).call(this,BM.a.point((i.x-n.x)/r,(i.y-n.y)/r),e)}},{key:"mousemoveEvent",value:function(e){var n=e.layerPoint;fR(hR(t.prototype),"mousemoveEvent",this).call(this,n,e)}},{key:"bindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.on("click",this.clickEvent),this.options.methods.mousemove&&e.on("mousemove",this.mousemoveEvent)),this.map.on("movestart",this._moveStartEvent),this.map.on("moveend",this._moveEndEvent),this.map.on("zoomstart",this._zoomStartEvent)}},{key:"destroy",value:function(){this.unbindEvent(),this.clearData(),this.animator&&this.animator.stop(),this.animator=null,this.canvasLayer=null}},{key:"unbindEvent",value:function(){var e=this.map;this.options.methods&&(this.options.methods.click&&e.off("click",this.clickEvent),this.options.methods.mousemove&&e.off("mousemove",this.mousemoveEvent)),this.map.off("movestart",this._moveStartEvent),this.map.off("moveend",this._moveEndEvent),this.map.off("zoomstart",this._zoomStartEvent)}},{key:"getContext",value:function(){return this.canvasLayer.getCanvas().getContext(this.context)}},{key:"addData",value:function(e,t){var n=e;e&&e.get&&(n=e.get()),this.dataSet.add(n),this.update({options:t})}},{key:"update",value:function(e){var n=e||{},r=n.data;r&&r.get&&(r=r.get()),void 0!=r&&this.dataSet.set(r),fR(hR(t.prototype),"update",this).call(this,{options:n.options})}},{key:"getData",value:function(){return this.dataSet}},{key:"removeData",value:function(e){if(this.dataSet){var t=this.dataSet.get({filter:function(t){return null==e||"function"!=typeof e||!e(t)}});this.dataSet.set(t),this.update({options:null})}}},{key:"clearData",value:function(){this.dataSet&&this.dataSet.clear(),this.update({options:null})}},{key:"_canvasUpdate",value:function(e){if(this.canvasLayer){var t=this,n=t.options.animation,r=this.getContext(),i=this.map;if(t.isEnabledTime()){if(void 0===e)return void this.clear(r);"2d"===this.context&&(r.save(),r.globalCompositeOperation="destination-out",r.fillStyle="rgba(0, 0, 0, .1)",r.fillRect(0,0,r.canvas.width,r.canvas.height),r.restore())}else this.clear(r);if("2d"===this.context)for(var o in t.options)r[o]=t.options[o];else r.clear(r.COLOR_BUFFER_BIT);if(!(t.options.minZoom&&i.getZoom()<t.options.minZoom||t.options.maxZoom&&i.getZoom()>t.options.maxZoom)){var a=i.getBounds(),s=a.getEast()-a.getWest(),l=a.getNorth()-a.getSouth(),u=i.getSize(),c=s/u.x,f=l/u.y,h=dN("DEGREE")*c,p=this.canvasLayer.getTopLeft(),y=i.latLngToAccurateContainerPoint(p),d={transferCoordinate:function(e){var n,r={x:(n="2d"===t.context?i.latLngToAccurateContainerPoint(BM.a.latLng(e[1],e[0])):{x:(e[0]-p.lng)/c,y:(p.lat-e[1])/f}).x-y.x,y:n.y-y.y};return[r.x,r.y]}};void 0!==e&&(d.filter=function(t){var r=n.trails||10;return e&&t.time>e-r&&t.time<e});var m=t.dataSet.get(d);this.processData(m);var v=i.latLngToContainerPoint(BM.a.latLng(0,0)),g={x:v.x-y.x,y:v.y-y.y};"m"===t.options.unit?(t.options.size&&(t.options._size=t.options.size/h),t.options.width&&(t.options._width=t.options.width/h),t.options.height&&(t.options._height=t.options.height/h)):(t.options._size=t.options.size,t.options._height=t.options.height,t.options._width=t.options.width),this.drawContext(r,m,t.options,g),t.options.updateCallback&&t.options.updateCallback(e)}}}},{key:"init",value:function(e){this.options=e,this.initDataRange(e),this.context=this.options.context||"2d",this.options.zIndex&&this.canvasLayer&&this.canvasLayer.setZIndex(this.options.zIndex),this.initAnimator()}},{key:"addAnimatorEvent",value:function(){}},{key:"moveStartEvent",value:function(){var e=this.options.animation;this.isEnabledTime()&&this.animator&&(this.steps.step=e.stepsRange.start,this._hide())}},{key:"moveEndEvent",value:function(){this.canvasLayer.draw(),this._show()}},{key:"zoomStartEvent",value:function(){this._hide()}},{key:"clear",value:function(e){e&&e.clearRect&&e.clearRect(0,0,e.canvas.width,e.canvas.height)}},{key:"_hide",value:function(){this.canvasLayer.canvas.style.display="none"}},{key:"_show",value:function(){this.canvasLayer.canvas.style.display="block"}},{key:"draw",value:function(){this.canvasLayer.draw()}}])&&lR(n.prototype,r),i&&lR(n,i),t}(),mR=BM.a.Layer.extend({options:{attributionPrefix:null,attribution:rN.MapV.attribution},initialize:function(e,t,n){n=n||{},this.dataSet=e||{},this.mapVOptions=t||{},this.render=this.render.bind(this),BM.a.Util.setOptions(this,n),this.options.attributionPrefix&&(this.options.attribution=this.options.attributionPrefix+this.options.attribution),this.canvas=this._createCanvas(),BM.a.stamp(this)},onAdd:function(e){this._map=e;var t=this.getPane(),n=this.container=BM.a.DomUtil.create("div","leaflet-layer leaflet-zoom-animated",t);n.appendChild(this.canvas);var r=e.getSize();n.style.width=r.x+"px",n.style.height=r.y+"px",this.renderer=new dR(e,this,this.dataSet,this.mapVOptions),this.draw(),this.fire("loaded")},onRemove:function(){BM.a.DomUtil.remove(this.container),this.renderer.destroy()},addData:function(e,t){this.renderer.addData(e,t)},update:function(e){this.renderer.update(e)},getData:function(){return this.renderer&&(this.dataSet=this.renderer.getData()),this.dataSet},removeData:function(e){this.renderer&&this.renderer.removeData(e)},clearData:function(){this.renderer.clearData()},draw:function(){return this._reset()},setZIndex:function(e){this.canvas.style.zIndex=e},render:function(){this.renderer._canvasUpdate()},getCanvas:function(){return this.canvas},getContainer:function(){return this.container},getTopLeft:function(){var e,t=this._map;t&&(e=t.getBounds().getNorthWest());return e},_createCanvas:function(){var e=document.createElement("canvas");e.style.position="absolute",e.style.top="0px",e.style.left="0px",e.style.pointerEvents="none",e.style.zIndex=this.options.zIndex||600;var t="undefined"==typeof window?{}:window,n=this.devicePixelRatio=t.devicePixelRatio||1;return this.mapVOptions.context&&"2d"!==this.mapVOptions.context||e.getContext("2d").scale(n,n),e},_resize:function(){var e=this.canvas;if(e){var t=this._map,n=t.getSize();e.width=n.x,e.height=n.y,e.style.width=n.x+"px",e.style.height=n.y+"px";var r=t.getBounds(),i=t.latLngToLayerPoint(r.getNorthWest());BM.a.DomUtil.setPosition(e,i)}},_reset:function(){this._resize(),this._render()},redraw:function(){this._resize(),this._render()},_render:function(){this.render()}}),vR=function(e,t,n){return new mR(e,t,n)};BM.a.supermap.mapVLayer=vR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var gR=mR.extend({initialize:function(e,t){t=t||{},BM.a.Util.setOptions(this,t),this.data=[],this.mapVOptions={draw:"simple"},mR.prototype.initialize.call(this,new window.mapv.DataSet([]),this.mapVOptions,t),this.idCache={},this.url=e,this._last=new Date,this._imageCache={}},onMessageSuccessed:function(e){var t=this,n=e.featureResult.properties.id,r=e.featureResult.geometry,i={geometry:e.featureResult.geometry};if("Point"===r.type&&this.options.pointToLayer){var o=this.options.pointToLayer(e.featureResult,BM.a.latLng(r.coordinates[1],r.coordinates[0]));if(o instanceof BM.a.Marker){this.mapVOptions.draw="icon";var a=o.options.icon,s=a._getIconUrl("icon"),l=a.options.iconSize?a.options.iconSize[0]:null,u=a.options.iconSize?a.options.iconSize[1]:null,c="".concat(s,"_").concat(l,"_").concat(u),f=this._imageCache[c];f||(f=a.createIcon(),this._imageCache[c]=f,f.onload=function(){t.update({data:t.data,options:t.mapVOptions})}),i.icon=f,(a.options.iconSize||f.style.height)&&(this.mapVOptions.offset={x:0,y:-(a.options.iconSize[1]||f.style.height)/2}),this.options.deg&&(i.deg=this.options.deg,"function"==typeof i.deg&&this.idCache[n]&&this.data[this.idCache[n]]&&(i.deg=i.deg(e.featureResult,BM.a.latLng(r.coordinates[1],r.coordinates[0]),this.data[this.idCache[n]])))}if(o instanceof BM.a.CircleMarker){this.mapVOptions.draw="simple";var h=this._toMapvStyle(o);for(var p in h)h.hasOwnProperty(p)&&(i[p]=h[p])}}else if(this.options.style){var y=this._toMapvStyle(this.options.style(e.featureResult));for(var d in y)y.hasOwnProperty(d)&&(i[d]=y[d])}void 0==this.idCache[n]?(this.data.push(i),this.idCache[n]=this.data.length-1):this.data[this.idCache[n]]=i,new Date-this._last>200&&(this._last=new Date,this.update({data:this.data,options:this.mapVOptions}))},_toMapvStyle:function(e){var t={draw:"simple"};return t.strokeStyle=e.color,t.lineWidth=e.width,t.globalAlpha=e.fillOpacity||e.opacity,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.fillStyle=e.fillColor,t.size=e.radius,t}}),bR=BM.a.GeoJSON.extend({initialize:function(e,t){(t=t||{}).style&&!t.pointToLayer&&(t.pointToLayer=function(e,n){return BM.a.circleMarker(n,t.style())}),BM.a.Util.setOptions(this,t),this._layers={},BM.a.stamp(this),this.url=e,this.idCache={}},onMessageSuccessed:function(e){var t=e.featureResult,n=e.featureResult.properties[this.options.idField],r=null;void 0!==n&&this.idCache[n]?(r=this.getLayer(this.idCache[n]),this._updateLayerData(r,t)):((r=BM.a.GeoJSON.geometryToLayer(t,this.options)).feature=BM.a.GeoJSON.asFeature(t),this.addLayer(r),void 0!==n&&(this.idCache[n]=this.getLayerId(r))),this.options.onEachFeature&&this.options.onEachFeature(t,r)},_updateLayerData:function(e,t){t.properties&&(e.feature.properties=t.properties);var n=[];switch(t.geometry.type){case"Point":n=BM.a.GeoJSON.coordsToLatLng(t.geometry.coordinates),e.setLatLng(n);break;case"LineString":n=BM.a.GeoJSON.coordsToLatLngs(t.geometry.coordinates,0),e.setLatLngs(n);break;case"MultiLineString":case"Polygon":n=BM.a.GeoJSON.coordsToLatLngs(t.geometry.coordinates,1),e.setLatLngs(n);break;case"MultiPolygon":n=BM.a.GeoJSON.coordsToLatLngs(t.geometry.coordinates,2),e.setLatLngs(n)}}}),SR=BM.a.LayerGroup.extend({options:{geometry:null,prjCoordSys:null,excludeField:null,idField:"id",render:"normal"},initialize:function(e,t){t=t||{},BM.a.Util.setOptions(this,t),this.url=e,this._layers={},this.dataService=new iR(this.url,{geometry:this.options.geometry,prjCoordSys:this.options.prjCoordSys,excludeField:this.options.excludeField})},onAdd:function(e){var t=this;this.dataService.initSubscribe(),this.dataService.on("subscribeSocketConnected",function(e){return t.fire("subscribesucceeded",e)}),this.dataService.on("subscribeSocketError",function(e){return t.fire("subscribefailed",e)}),this.dataService.on("messageSucceeded",function(e){return t._onMessageSuccessed(e)}),this.dataService.on("setFilterParamSucceeded",function(e){return t.fire("setfilterparamsucceeded",e)}),"mapv"===this.options.render?this.addLayer(new gR(this.url,this.options)):this.addLayer(new bR(this.url,this.options)),BM.a.LayerGroup.prototype.onAdd.call(this,e)},onRemove:function(e){BM.a.LayerGroup.prototype.onRemove.call(this,e),this.dataService&&this.dataService.unSubscribe()},setExcludeField:function(e){return this.dataService.setExcludeField(e),this.options.excludeField=e,this},setGeometry:function(e){return this.dataService.setGeometry(e),this.options.geometry=e,this},_onMessageSuccessed:function(e){var t=this;this.getLayers().map(function(n){return n.onMessageSuccessed&&(n.onMessageSuccessed(e),t.fire("dataupdated",{layer:n,data:e.featureResult})),n})}}),_R=function(e,t){return new SR(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.dataFlowLayer=_R;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var wR=BM.a.Layer.extend({includes:[],_echartsContainer:null,_map:null,_ec:null,_echartsOptions:null,options:{attribution:rN.ECharts.attribution,loadWhileAnimating:!1},initialize:function(e,t){BM.a.Util.setOptions(this,t),this.setOption(e)},setOption:function(e,t,n){var r=e.baseOption||e;r.LeafletMap=r.LeafletMap||{roam:!0},r.animation=!0===r.animation,this._echartsOptions=e,this._ec&&this._ec.setOption(e,t,n)},getEcharts:function(){return this._ec},_disableEchartsContainer:function(){this._echartsContainer.style.visibility="hidden"},_enableEchartsContainer:function(){this._echartsContainer.style.visibility="visible"},onAdd:function(e){this._map=e,this._initEchartsContainer(),this._ec=xk.a.init(this._echartsContainer),this._ec.leafletMap=e;var t=this;e.on("zoomstart",function(){t._disableEchartsContainer()}),!t.options.loadWhileAnimating&&e.on("movestart",function(){t._disableEchartsContainer()}),xk.a.registerAction({type:"LeafletMapLayout",event:"LeafletMapLayout",update:"updateLayout"},function(e){}),xk.a.registerCoordinateSystem("leaflet",OR),xk.a.extendComponentModel({type:"LeafletMap",getBMap:function(){return this.__LeafletMap},defaultOption:{roam:!1}}),xk.a.extendComponentView({type:"LeafletMap",render:function(e,n,r){var i=!0,o=n.scheduler.ecInstance.leafletMap,a=r.getZr().painter.getViewportRoot(),s=o.options.zoomAnimation&&BM.a.Browser.any3d;a.className=" leaflet-layer leaflet-zoom-"+(s?"animated":"hide")+" echarts-layer";var l=BM.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[l]="50% 50%";var u=e.coordinateSystem,c=r.getZr().painter.getLayers(),f=function(){if(!i){var n,o=t._map.containerPointToLayerPoint([0,0]),s=[o.x||0,o.y||0];if(a.style.left=s[0]+"px",a.style.top=s[1]+"px",!t.options.loadWhileAnimating){for(var l in c)c.hasOwnProperty(l)&&c[l]&&(n=c[l].ctx)&&n.clearRect&&n.clearRect(0,0,n.canvas.width,n.canvas.height);t._enableEchartsContainer()}u.setMapOffset(s),e.__mapOffset=s,r.dispatchAction({type:"LeafletMapLayout"})}};function h(){i||(r.dispatchAction({type:"LeafletMapLayout"}),t._enableEchartsContainer())}t._oldMoveHandler&&o.off(t.options.loadWhileAnimating?"move":"moveend",t._oldMoveHandler),t._oldZoomEndHandler&&o.off("zoomend",t._oldZoomEndHandler),o.on(t.options.loadWhileAnimating?"move":"moveend",f),o.on("zoomend",h),t._oldMoveHandler=f,t._oldZoomEndHandler=h,i=!1}}),this._ec.setOption(this._echartsOptions)},onRemove:function(){this._ec.clear(),this._ec.dispose(),delete this._ec,BM.a.DomUtil.remove(this._echartsContainer),this._oldZoomEndHandler&&(this._map.off("zoomend",this._oldZoomEndHandler),this._oldZoomEndHandler=null),this._oldMoveHandler&&(this._map.off(this.options.loadWhileAnimating?"move":"moveend",this._oldMoveHandler),this._oldMoveHandler=null),this._resizeHandler&&(this._map.off("resize",this._resizeHandler),this._resizeHandler=null),delete this._map},_initEchartsContainer:function(){var e=this._map.getSize(),t=document.createElement("div");t.style.position="absolute",t.style.height=e.y+"px",t.style.width=e.x+"px",t.style.zIndex=10,this._echartsContainer=t,this.getPane().appendChild(this._echartsContainer);var n=this;function r(e){var t=e.newSize;n._echartsContainer.style.width=t.x+"px",n._echartsContainer.style.height=t.y+"px",n._ec.resize()}this._map.on("resize",r),this._resizeHandler=r}});function OR(e){this._LeafletMap=e,this.dimensions=["lng","lat"],this._mapOffset=[0,0]}OR.prototype.dimensions=["lng","lat"],OR.prototype.setMapOffset=function(e){this._mapOffset=e},OR.prototype.getBMap=function(){return this._LeafletMap},OR.prototype.prepareCustoms=function(){var e=xk.a.util,t=this.getViewRect();return{coordSys:{type:"leaflet",x:t.x,y:t.y,width:t.width,height:t.height},api:{coord:e.bind(this.dataToPoint,this),size:e.bind(function(t,n){return n=n||[0,0],e.map([0,1],function(e){var r=n[e],i=t[e]/2,o=[],a=[];return o[e]=r-i,a[e]=r+i,o[1-e]=a[1-e]=n[1-e],Math.abs(this.dataToPoint(o)[e]-this.dataToPoint(a)[e])},this)},this)}}},OR.prototype.dataToPoint=function(e){null===e[1]&&(e[1]=BM.a.CRS.EPSG3857.projection.MAX_LATITUDE);var t=this._LeafletMap.latLngToLayerPoint([e[1],e[0]]),n=this._mapOffset;return[t.x-n[0],t.y-n[1]]},OR.prototype.fixLat=function(e){return e>=90?89.99999999999999:e<=-90?-89.99999999999999:e},OR.prototype.pointToData=function(e){var t=this._mapOffset,n=this._LeafletMap.layerPointToLatLng([e[0]+t[0],e[1]+t[1]]);return[n.lng,n.lat]},OR.prototype.getViewRect=function(){var e=this._LeafletMap.getSize();return new xk.a.graphic.BoundingRect(0,0,e.x,e.y)},OR.prototype.getRoamTransform=function(){return xk.a.matrix.create()},OR.dimensions=OR.prototype.dimensions,OR.create=function(e){var t,n=e.scheduler.ecInstance.leafletMap;e.eachComponent("LeafletMap",function(e){t||(t=new OR(n)),e.coordinateSystem=t,e.coordinateSystem.setMapOffset(e.__mapOffset||[0,0])}),e.eachSeries(function(e){e.get("coordinateSystem")&&"leaflet"!==e.get("coordinateSystem")||(t||(t=new OR(n)),e.coordinateSystem=t,e.animation=!0===e.animation)})};var xR=function(e,t){return new wR(e,t)};function CR(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}BM.a.supermap.echartsLayer=xR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var TR=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"supportWebGL",value:function(){return PR("webgl")}},{key:"supportWebGL2",value:function(){return PR("webgl2")}},{key:"supportCanvas",value:function(){return PR("2d")}}],(n=null)&&CR(t.prototype,n),r&&CR(t,r),e}();function PR(e){var t=document.createElement("canvas");return t&&t.getContext(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ER=BM.a.Class.extend({options:{radius:10,angele:60,spaceAngle:0,count:3,fill:!1,stroke:!0,color:"#3388ff",weight:1,lineCap:"round",lineJoin:"round",fillColor:"#66ccff",fillOpacity:.2,fillRule:"evenodd",opacity:1,strokeWidth:1},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d");var t=void 0===this.options.strokeWidth?1:this.options.strokeWidth;this.options.width=2*(this.options.radius+t)+1,this._initStyle()},getStyle:function(){return this._canvas},drawSector:function(e,t,n,r,i,o){i=i/180*Math.PI,o=o/180*Math.PI,e.moveTo(t,n),e.lineTo(t+r*Math.cos(i),n+r*Math.sin(i)),e.arc(t,n,r,i,o),e.lineTo(t,n)},_initStyle:function(){var e=0,t=this.options,n=t.angle;if(t.spaceAngle=360/t.count-t.angle,!(t.spaceAngle<0)){this._ctx.beginPath(),this.anchor=[t.width/2,t.width/2];for(var r=0;r<t.count;r++)this.drawSector(this._ctx,this.anchor[0],this.anchor[1],t.radius,e,n),n=(e=n+t.spaceAngle)+t.angle;this._fillStroke()}},_fillStroke:function(){var e=this.options;e.fill&&(this._ctx.globalAlpha=e.fillOpacity,this._ctx.fillStyle=e.fillColor||e.color,this._ctx.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(this._ctx.globalAlpha=e.opacity,this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color,this._ctx.lineCap=e.lineCap,this._ctx.lineJoin=e.lineJoin,this._ctx.stroke())}}),kR=function(e){return new ER(e)};BM.a.supermap.cloverStyle=kR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var MR=BM.a.Class.extend({options:{stroke:!0,color:"#3388ff",weight:1,opacity:1,lineCap:"round",lineJoin:"round",fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",radius:3},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d"),this._initStyle()},getCanvas:function(){return this._canvas},getStyle:function(){return this._canvas},_initStyle:function(){this._ctx.beginPath(),this._ctx.arc(this._canvas.width/2,this._canvas.height/2,this.options.radius,0,2*Math.PI),this._fillStroke()},_fillStroke:function(){var e=this.options;e.fill&&(this._ctx.globalAlpha=e.fillOpacity,this._ctx.fillStyle=e.fillColor||e.color,this._ctx.fill(e.fillRule||"evenodd")),e.stroke&&0!==e.weight&&(this._ctx.globalAlpha=e.opacity,this._ctx.lineWidth=e.weight,this._ctx.strokeStyle=e.color,this._ctx.lineCap=e.lineCap,this._ctx.lineJoin=e.lineJoin,this._ctx.stroke())}}),AR=function(e){return new MR(e)};BM.a.supermap.circleStyle=AR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var LR=BM.a.Class.extend({options:{img:null,origin:[0,0],anchor:null,size:null},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),this._canvas=document.createElement("canvas"),this._canvas.width=2*(this.options.radius+this.options.weight),this._canvas.height=2*(this.options.radius+this.options.weight),this._ctx=this._canvas.getContext("2d")},getStyle:function(){return this.options}}),jR=function(e){return new LR(e)};BM.a.supermap.imageStyle=jR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var NR=BM.a.Util.falseFn,RR=BM.a.Class.extend({initialize:function(e,t){this.layer=e,t=t||{},BM.a.Util.setOptions(this,t)},getRenderer:function(){return this.options.renderer},update:function(){this.getRenderer()._clear(),this.getRenderer()._draw()},_handleClick:function(e){var t=this.layer,n=t._map,r=t._getGraphicsInBounds();e.target=null;for(var i=r.length-1;i>=0;i--){var o=void 0,a=void 0,s=n.latLngToLayerPoint(r[i].getLatLng()),l=r[i].getStyle();if(!l&&this.defaultStyle&&(l=this.defaultStyle),l.img){var u=l.img.width,c=l.img.height;l.size&&l.size[0]&&l.size[1]&&(u=l.size[0],c=l.size[1]);var f=l.anchor||[u/2,c/2];o=BM.a.point(s.x-f[0],s.y-f[1]),a=BM.a.point(o.x+u,o.y+c)}else o=BM.a.point(s.x-l.width/2,s.y-l.height/2),a=BM.a.point(s.x+l.width/2,s.y+l.height/2);if(BM.a.bounds(o,a).contains(n.latLngToLayerPoint(e.latlng)))return this.layer._renderer._ctx.canvas.style.cursor="pointer",e.target=r[i],void("click"===e.type&&t.options.onClick&&t.options.onClick.call(t,r[i],e));this.layer._renderer._ctx.canvas.style.cursor="auto"}},_clearBuffer:NR});BM.a.Canvas.include({drawGraphics:function(e,t){var n=this;n._drawing&&e.forEach(function(e){var r=e.getStyle();!r&&t&&(r=t),r.img?n._drawImage.call(n,n._ctx,r,e.getLatLng()):n._drawCanvas.call(n,n._ctx,r,e.getLatLng())})},_drawCanvas:function(e,t,n){var r=t,i=this._map.latLngToLayerPoint(n),o=i.x-r.width/2,a=i.y-r.height/2,s=r.width,l=r.height;e.drawImage(r,o,a,s,l)},_drawImage:function(e,t,n){var r,i;if(t.size){var o=t.size;r=o[0],i=o[1]}else r=t.img.width,i=t.img.height;var a=this._coordinateToPoint(n),s=BM.a.point(a),l=BM.a.point(t.anchor||[r/2,i/2]);a=[s.x-l.x,s.y-l.y],e.drawImage(t.img,a[0],a[1],r,i)},_coordinateToPoint:function(e){if(!this._map)return e;var t=e;BM.a.Util.isArray(e)?t=BM.a.latLng(e[0],e[1]):e instanceof BM.a.LatLng&&(t=BM.a.latLng(e.lat,e.lng));var n=this._map.latLngToLayerPoint(t);return[n.x,n.y]}});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var IR=BM.a.Util.falseFn,DR=function(){for(var e=document.createElement("div"),t=["transform","WebkitTransform","MozTransform","OTransform","msTransform"],n=0;n<t.length;n++){var r=t[n];if(void 0!==e.style[r])return r}return t[0]}(),FR=BM.a.Class.extend({initialize:function(e,t){this.layer=e;var n=t||{};BM.a.Util.setOptions(this,n),this.options.radius=this._pixelToMeter(this.options.radius),this._initContainer()},getRenderer:function(){return this},update:function(e){e&&e.length>-1&&(this._data=e),this._renderLayer.setChangeFlags({dataChanged:!0,propsChanged:!0,viewportChanged:!0,updateTriggersChanged:!0}),this._refreshData();var t=this._getLayerState();t.data=this._data||[],this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),this._renderLayer.setState(t)},drawGraphics:function(e){this._clearBuffer();var t=this.layer._map.getSize();this._container.width!==t.x&&(this._container.width=t.x),this._container.height!==t.y&&(this._container.height=t.y);var n=this.layer._map.getPanes().mapPane._leaflet_pos;this._container.style[DR]="translate("+-Math.round(n.x)+"px,"+-Math.round(n.y)+"px)",this._data=e||[],this._renderLayer||this._createInnerRender(),this._draw()},_initContainer:function(){this._container=this._createCanvas(this.options.width,this.options.height),this._layerContainer=this.options.container,this._wrapper=BM.a.DomUtil.create("div","deck-wrapper",this._layerContainer),this._wrapper.appendChild(this._container)},_createCanvas:function(e,t){var n=BM.a.DomUtil.create("canvas","graphicLayer  leaflet-layer leaflet-zoom-hide");return n.oncontextmenu=BM.a.Util.falseFn,n.width=e,n.height=t,n.style.width=e+"px",n.style.height=t+"px",n},_pixelToMeter:function(e){var t=this.layer._map.getBounds();return e*((t.getEast()-t.getWest())/this.layer._map.getSize().x*(6378137*Math.PI/180))},_createInnerRender:function(){var e=this,t=this._getLayerState(),n=t.color,r=t.radius,i=t.opacity,o=t.highlightColor,a=t.radiusScale,s=t.radiusMinPixels,l=t.radiusMaxPixels,u=t.strokeWidth,c=t.outline,f={id:"scatter-plot",data:e._data,pickable:Boolean(this.options.onClick)||Boolean(this.options.onHover),autoHighlight:!0,color:n,opacity:i,radius:r,radiusScale:a,highlightColor:o,radiusMinPixels:s,radiusMaxPixels:l,strokeWidth:u,outline:c,getPosition:function(e){if(!e)return[0,0,0];var t=e.getLatLng();return t&&[t.lng,t.lat,0]},getColor:function(t){var n=e._getLayerDefaultStyle(),r=t&&t.options;return r&&r.color||n.color},getRadius:function(t){var n=e._getLayerDefaultStyle(),r=t&&t.getStyle();return r&&r.radius||n.radius},updateTriggers:{getColor:[n],getRadius:[r]}},h=this;this.options.onClick&&(f.onClick=function(){h._container.style.cursor="pointer",h.options.onClick.apply(h,arguments)}),this.options.onHover&&(f.onHover=function(){h._container.style.cursor="pointer",h.options.onHover.apply(h,arguments)}),e._renderLayer=new window.DeckGL.ScatterplotLayer(f)},_getLayerDefaultStyle:function(){if(this._layerDefaultStyleCache)return this._layerDefaultStyleCache;var e=this.layer.options,t=e.color,n=e.opacity,r=e.radius,i=e.radiusScale,o=e.radiusMinPixels,a=e.radiusMaxPixels,s=e.strokeWidth,l=e.outline;return r=this._pixelToMeter(r),this._layerDefaultStyleCache={color:t,opacity:n,radius:r,radiusScale:i,radiusMinPixels:o,radiusMaxPixels:a,strokeWidth:s,outline:l},this._layerDefaultStyleCache},_getLayerState:function(){var e=this.layer.getState();return e.zoom=e.zoom-1,e},_draw:function(){var e=this._getLayerState();this._refreshData(),e.data=this._data||[];var t={};for(var n in e)t[n]=e[n];this._layerDefaultStyleCache=null,this._renderLayer.setNeedsRedraw(!0),t.layers=[this._renderLayer],t.canvas=this._container,t.onBeforeRender=this._onBeforeRender.bind(this),t.onAfterRender=this._onAfterRender.bind(this),this.deckGL?this.deckGL.setProps(t):this.deckGL=new window.DeckGL.experimental.DeckGLJS(t)},_clearBuffer:function(){if(this.deckGL){var e=this.deckGL.layerManager;e&&e.context.gl.clear(e.context.gl.COLOR_BUFFER_BIT)}return this},_refreshData:function(){var e=this._data||[],t=BM.a.Util.isArray(e)?[].concat(e):[e];this._renderLayer.props.data||(this._renderLayer.props.data=[]),this._renderLayer.props.data.length=0;for(var n=0;n<t.length;n++)this._renderLayer.props.data.push(t[n]);this._data=this._renderLayer.props.data},_handleClick:IR,_onBeforeRender:IR,_onAfterRender:IR,_removePath:function(){return this._wrapper.parentElement.removeChild(this._wrapper),this._container=null,this._wrapper=null,this},_initPath:IR,_addPath:IR}),BR=["canvas","webgl"],UR={color:[0,0,0,255],opacity:.8,radius:10,radiusScale:1,radiusMinPixels:0,radiusMaxPixels:Number.MAX_SAFE_INTEGER,strokeWidth:1,outline:!1},GR=BM.a.Path.extend({initialize:function(e,t){this.graphics=[].concat(e);var n=t||{};n.pane="overlayPane",BM.a.Util.setOptions(this,n),this.options.render=this.options.render||BR[0],TR.supportWebGL2()||(this.options.render=BR[0]),this.on("click mousemove dblclick mousedown mouseup mouseout contextmenu",this._handleClick,this)},getEvents:function(){return{resize:this._resize.bind(this),moveend:this._moveEnd.bind(this)}},onAdd:function(e){this._map=e,this.defaultStyle=this._getDefaultStyle(this.options),this._renderer=this._createRenderer(),this._container=this._renderer._container,this.addInteractiveTarget(this._container),BM.a.Path.prototype.onAdd.call(this)},onRemove:function(){this.off("click mousemove dblclick mousedown mouseup contextmenu",this._handleClick,this),this._renderer._removePath(this)},setGraphics:function(e){this.graphics=this.graphics||[],this.graphics.length=0;var t=BM.a.Util.isArray(e)?[].concat(e):[e];this.graphics=[].concat(t),this.update()},addGraphics:function(e){this.graphics=this.graphics||[];var t=BM.a.Util.isArray(e)?[].concat(e):[e];this.graphics=this.graphics.concat(t),this.update()},getGraphicBy:function(e,t){var n=null;for(var r in this.graphics)if(this.graphics[r][e]===t){n=this.graphics[r];break}return n},getGraphicById:function(e){return this.getGraphicBy("id",e)},getGraphicsByAttribute:function(e,t){var n,r=[];for(var i in this.graphics)(n=this.graphics[i])&&n.attributes&&n.attributes[e]===t&&r.push(n);return r},removeGraphics:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!e||0===e.length||e===this.graphics)return this.graphics.length=0,void this.update();be.isArray(e)||(e=[e]);for(var t=e.length-1;t>=0;t--){var n=e[t],r=be.indexOf(this.graphics,n);-1!==r&&this.graphics.splice(r,1)}this.update()},setStyle:function(e){var t=this.options,n={color:t.color,radius:t.radius,opacity:t.opacity,highlightColor:t.highlightColor,radiusScale:t.radiusScale,radiusMinPixels:t.radiusMinPixels,radiusMaxPixels:t.radiusMaxPixels,strokeWidth:t.strokeWidth,outline:t.outline};this.options=BM.a.Util.extend(this.options,n,e),this.defaultStyle=this._getDefaultStyle(this.options),this.update()},update:function(){this._layerRenderer.update(this.graphics)},clear:function(){this.removeGraphics()},getRenderer:function(){return this._renderer},getState:function(){var e=this._map,t=e.getSize().x,n=e.getSize().y,r=e.getCenter(),i={longitude:r.lng,latitude:r.lat,zoom:e.getZoom(),maxZoom:e.getMaxZoom(),pitch:0,bearing:0},o={};for(var a in i)o[a]=i[a];o.width=t,o.height=n;var s=this.options;return o.color=s.color,o.radius=s.radius,o.opacity=s.opacity,o.highlightColor=s.highlightColor,o.radiusScale=s.radiusScale,o.radiusMinPixels=s.radiusMinPixels,o.radiusMaxPixels=s.radiusMaxPixels,o.strokeWidth=s.strokeWidth,o.outline=s.outline,o},_resize:function(){var e=this._map.getSize();this._container.width=e.x,this._container.height=e.y,this._container.style.width=e.x+"px",this._container.style.height=e.y+"px";var t=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this._container,t),this._update()},_moveEnd:function(){this._layerRenderer instanceof FR&&this._update()},_createRenderer:function(){var e,t=this._map,n=t.getSize().x,r=t.getSize().y;if(this.options.render===BR[0])e=new RR(this,{width:n,height:r,renderer:t.getRenderer(this)});else{var i=BM.a.Util.setOptions({},UR),o=BM.a.Util.setOptions({options:i},this.options);(o=BM.a.Util.setOptions(this,o)).container=t.getPane("overlayPane"),o.width=n,o.height=r,e=new FR(this,o)}return e.defaultStyle=this.defaultStyle,this._layerRenderer=e,this._layerRenderer.getRenderer()},_update:function(){this._map&&this._updatePath()},_updatePath:function(){var e=this._getGraphicsInBounds();this._renderer.drawGraphics(e,this.defaultStyle)},_project:function(){var e=this;e._getGraphicsInBounds().map(function(t){var n=e._map.latLngToLayerPoint(t.getLatLng()),r=e._clickTolerance(),i=[t._anchor+r,t._anchor+r];return t._pxBounds=new BM.a.Bounds(n.subtract(i),n.add(i)),t}),e._pxBounds=BM.a.bounds(BM.a.point(0,0),BM.a.point(this._container.width,this._container.height))},_getDefaultStyle:function(e){var t={};if(e.color){t.fill=!0;var n=this.toRGBA(e.color);t.color=n,t.fillColor=n}return e.opacity&&(t.opacity=e.opacity,t.fillOpacity=e.opacity),e.radius&&(t.radius=e.radius),e.strokeWidth&&(t.weight=e.strokeWidth),e.outline&&(t.stroke=e.outline),new MR(t).getStyle()},toRGBA:function(e){return"rgba(".concat(e[0],",").concat(e[1],",").concat(e[2],",").concat((e[3]||255)/255,")")},_getGraphicsInBounds:function(){var e=[],t=this._map.getBounds();return this.graphics.map(function(n){return t.contains(n.getLatLng())&&e.push(n),n}),e},_handleClick:function(e){this._layerRenderer._handleClick(e)},beforeAdd:BM.a.Util.falseFn,_containsPoint:BM.a.Util.falseFn}),zR=function(e,t){return new GR(e,t)};BM.a.supermap.graphicLayer=zR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VR=HN.extend({options:{isOverLay:!0},initialize:function(e,t,n){var r=[];r.push(e),r.push(n),HN.prototype.initialize.apply(this,r),this.chartsType=t,this.themeFields=n&&n.themeFields?n.themeFields:null,this.charts=n&&n.charts?n.charts:[],this.cache=n&&n.cache?n.cache:{},this.chartsSetting=n&&n.chartsSetting?n.chartsSetting:{}},setChartsType:function(e){this.chartsType=e,this.redraw()},addFeatures:function(e){var t=this;t.fire("beforefeaturesadded",{features:e}),this.features=this.toiClientFeature(e),t.renderer&&(t._map?t.redrawThematicFeatures(t._map.getBounds()):t.redrawThematicFeatures())},redrawThematicFeatures:function(e){var t=this;t.renderer.clearAll();var n=t.features;if(this.options.alwaysMapCRS&&e&&e instanceof BM.a.LatLngBounds){var r=this._map.options.crs;e=BM.a.bounds(r.project(e.getSouthWest()),r.project(e.getNorthEast()))}e=hN.toSuperMapBounds(e);for(var i=0,o=n.length;i<o;i++){var a=n[i],s=a.geometry.getBounds();if(!e||e.intersectsBounds(s)){var l=t.cache,u=a.id;if(!l[u]){l[u]=u;var c=t.createThematicFeature(a),f=t.overlayWeightField&&a.attributes[t.overlayWeightField]&&!isNaN(a.attributes[t.overlayWeightField]);c&&f&&(c.__overlayWeight=a.attributes[t.overlayWeightField]),c&&t.charts.push(c)}}}t.drawCharts()},createThematicFeature:function(e){var t,n=this;return hP[n.chartsType]&&n.themeFields&&n.chartsSetting&&(t=new hP[n.chartsType](e,n,n.themeFields,n.chartsSetting)),!!t&&(t.assembleShapes(),t)},drawCharts:function(){var e=this;e.renderer&&(e.overlayWeightField&&e._sortChart(),e.options&&!e.options.isOverLay?e._addOverlayShape():e._addNoOverlayShape(),e.renderer.render())},getShapesByFeatureID:function(e){var t=[],n=this.renderer.getAllShapes();if(!e)return n;for(var r=0,i=n.length;r<i;r++){var o=n[r];o.refDataID&&e===o.refDataID&&t.push(o)}return t},isQuadrilateralOverLap:function(e,t){var n=e.length,r=t.length;if(5!==n||5!==r)return null;for(var i=!1,o=0;o<n;o++)if(this.isPointInPoly(e[o],t)){i=!0;break}for(var a=0;a<r;a++)if(this.isPointInPoly(t[a],e)){i=!0;break}for(var s=0;s<n-1&&!i;s++)for(var l=0;l<r-1;l++){if("SuperMap.Geometry.Point"===be.lineIntersection(e[s],e[s+1],t[l],t[l+1]).CLASS_NAME){i=!0;break}}return i},isPointInPoly:function(e,t){for(var n=!1,r=-1,i=t.length,o=i-1;++r<i;o=r)(t[r].y<=e.y&&e.y<t[o].y||t[o].y<=e.y&&e.y<t[r].y)&&e.x<(t[o].x-t[r].x)*(e.y-t[r].y)/(t[o].y-t[r].y)+t[r].x&&(n=!n);return n},isChartInMap:function(e,t){for(var n=e,r=!1,i=0,o=t.length;i<o;i++){var a=t[i];if(a.x>=n.left&&a.x<=n.right&&a.y>=n.top&&a.y<=n.bottom){r=!0;break}}return r},clearCache:function(){this.cache={},this.charts=[]},removeFeatures:function(e){this.clearCache(),HN.prototype.removeFeatures.apply(this,arguments)},removeAllFeatures:function(){this.clearCache(),HN.prototype.removeAllFeatures.apply(this,arguments)},redraw:function(){return this.clearCache(),HN.prototype.redraw.apply(this,arguments)},clear:function(){var e=this;e.renderer&&(e.renderer.clearAll(),e.renderer.refresh()),e.removeAllFeatures(),e.clearCache()},getWeightFieldValue:function(e,t,n){if((void 0===n||isNaN(n))&&(n=0),!e.attributes)return n;var r=e.attributes[t];return(void 0===r||isNaN(r))&&(r=n),r},_sortChart:function(){this.charts&&this.charts.sort(function(e,t){return void 0===e.__overlayWeight&&void 0===t.__overlayWeight?0:void 0!==e.__overlayWeight&&void 0===t.__overlayWeight?-1:void 0===e.__overlayWeight&&void 0!==t.__overlayWeight?1:void 0!==e.__overlayWeight&&void 0!==t.__overlayWeight?parseFloat(e.__overlayWeight)<parseFloat(t.__overlayWeight)?1:-1:0})},_addOverlayShape:function(){for(var e=this.charts,t=0,n=e.length;t<n;t++)for(var r=e[t],i=r.resetLocation(),o=r.shapes,a=0,s=o.length;a<s;a++)o[a].refOriginalPosition=i,this.renderer.addShape(o[a])},_addNoOverlayShape:function(){var e=this,t=e._map.getBounds(),n=this._map.options.crs;this.options.alwaysMapCRS&&(t=BM.a.bounds(n.project(t.getSouthWest()),n.project(t.getNorthEast()))),t=hN.toSuperMapBounds(t);for(var r=e.charts,i=[],o=e.getLocalXY(new _e(t.left,t.top)),a=e.getLocalXY(new _e(t.right,t.bottom)),s=new Oe(o[0],a[1],a[0],o[1]),l=0,u=r.length;l<u;l++){var c=r[l],f=c.resetLocation(),h=c.chartBounds,p=[{x:h.left,y:h.top},{x:h.left,y:h.bottom},{x:h.right,y:h.bottom},{x:h.right,y:h.top},{x:h.left,y:h.top}];if(!s||e.isChartInMap(s,p)){for(var y=!1,d=0;d<i.length;d++)if(e.isQuadrilateralOverLap(p,i[d])){y=!0;break}if(!y){i.push(p);for(var m=c.shapes,v=0,g=m.length;v<g;v++)m[v].refOriginalPosition=f,e.renderer.addShape(m[v])}}}}}),HR=function(e,t,n){return new VR(e,t,n)};BM.a.supermap.graphThemeLayer=HR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JR=VR.extend({initialize:function(e,t,n){VR.prototype.initialize.apply(this,arguments),this.symbolType=t,this.symbolSetting={}},setSymbolType:function(e){this.symbolType=e,this.redraw()},createThematicFeature:function(e){var t,n=this;return hP[n.symbolType]&&n.themeField&&n.symbolSetting&&(t=new hP[n.symbolType](e,n,[n.themeField],n.symbolSetting)),!!t&&(t.assembleShapes(),t)}}),qR=function(e,t,n){return new JR(e,t,n)};BM.a.supermap.rankSymbolThemeLayer=qR;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var WR=BM.a.SVG.extend({initialize:function(e,t,n){BM.a.SVG.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._container.setAttribute("viewBox",[0,0,this._size.x,this._size.y].join(" ")),this._layers={}},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},onAdd:BM.a.Util.falseFn,addTo:function(e){if(this._map=e,this.options.interactive)for(var t in this._layers){var n=this._layers[t];n._path.style.pointerEvents="auto",this._map._targets[BM.a.stamp(n._path)]=n}},removeFrom:function(e){var t=e||this._map;if(this.options.interactive)for(var n in this._layers){var r=this._layers[n];delete t._targets[BM.a.stamp(r._path)]}delete this._map},_addPath:function(e){this._rootGroup||this._initContainer(),this._rootGroup||(this._rootGroup=this._container),this._rootGroup.appendChild(e._path),this._layers[BM.a.stamp(e)]=e},_updateIcon:function(e){var t=e._path=BM.a.SVG.create("image"),n=e.options,r=n.iconUrl;if(n.iconSize){var i=BM.a.point(n.iconSize),o=i&&i.divideBy(2,!0),a=e._point.subtract(o);t.setAttribute("x",a.x),t.setAttribute("y",a.y),t.setAttribute("width",i.x+"px"),t.setAttribute("height",i.y+"px")}else{var s=new Image;s.src=r,BM.a.DomEvent.on(s,"load",function(){var n=BM.a.point([s.width,s.height]),r=n&&n.divideBy(2,!0),i=e._point.subtract(r);t.setAttribute("x",i.x),t.setAttribute("y",i.y),t.setAttribute("width",n.x+"px"),t.setAttribute("height",n.y+"px")})}t.setAttribute("href",r)}}),QR=BM.a.Canvas.extend({initialize:function(e,t,n){BM.a.Canvas.prototype.initialize.call(this,n),this._tileCoord=e,this._size=t,this._initContainer(),this._container.setAttribute("width",this._size.x),this._container.setAttribute("height",this._size.y),this._layers={},this._drawnLayers={},this._drawing=!0,n.interactive&&(this._container.style.pointerEvents="auto")},getCoord:function(){return this._tileCoord},getContainer:function(){return this._container},getOffset:function(){return this._tileCoord.scaleBy(this._size).subtract(this._map.getPixelOrigin())},onAdd:BM.a.Util.falseFn,addTo:function(e){this._map=e},removeFrom:function(e){delete this._map},_updateDashArray:function(e){var t=e.options.dashArray;if(t&&"string"==typeof t){var n,r=t.split(","),i=[];for(n=0;n<r.length;n++)i.push(Number(r[n]));e.options._dashArray=i}else e.options._dashArray=t},_onClick:function(e){var t,n,r=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());for(var i in this._layers)(t=this._layers[i]).options.interactive&&t._containsPoint(r)&&!this._map._draggableMoved(t)&&(n=t);n&&(BM.a.DomEvent.stop(e),this._fireEvent([n],e))},_onMouseMove:function(e){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var t=this._map.mouseEventToLayerPoint(e).subtract(this.getOffset());this._handleMouseHover(e,t)}},_updateIcon:function(e){if(this._drawing){var t=e.options,n=this._ctx,r=e._getImage();if(t.iconSize&&r.complete){var i=BM.a.point(t.iconSize),o=i&&i.divideBy(2,!0),a=e._point.subtract(o);n.drawImage(r,a.x,a.y,i.x,i.y)}else BM.a.DomEvent.on(r,"load",function(){var t=BM.a.point([r.width,r.height]),i=t&&t.divideBy(2,!0),o=e._point.subtract(i);n.drawImage(r,o.x,o.y,t.x,t.y)});this._drawnLayers[e._leaflet_id]=e}}}),YR={LABEL:"LABEL",TEXT:"TEXT",POINT:"POINT",LINE:"LINE",REGION:"REGION"},XR=BM.a.Class.extend({initialize:function(e){this.properties=e.properties,this.type=e.type,this.layerName=e.layerName},render:function(e,t){this._renderer=e,this._container=e._container,this.options=t,e._initPath(this),e._updateStyle(this);var n=this.getElement();n&&this.layerName&&BM.a.DomUtil.addClass(n,this.layerName)},updateStyle:function(e,t){this.options=t,e._updateStyle(this)},getElement:function(){return this._path||this._renderer._container},_getPixelBounds:function(){for(var e=this._parts,t=BM.a.bounds([]),n=0;n<e.length;n++)for(var r=e[n],i=0;i<r.length;i++)t.extend(r[i]);var o=this._clickTolerance(),a=new BM.a.Point(o,o);return t.min._subtract(a),t.max._add(a),t},_clickTolerance:BM.a.Path.prototype._clickTolerance});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/function KR(e){return(KR="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var ZR=BM.a.Path.extend({includes:XR.prototype,options:{color:"white",fillColor:"black",fill:!0,fillOpacity:1,opacity:.6,weight:1,rotation:0,stroke:!0,fontFamily:"Arial Unicode MS Regular",fontSize:14,fontWeight:"normal",textAlign:"center",offsetX:1,offsetY:1},initialize:function(e,t){XR.prototype.initialize.call(this,e),this._makeFeatureParts(e,t),this.options.offsetX=t||1,this.options.offsetY=t||1},render:function(e,t){if(this.properties.texts&&(this._text=this.properties.texts[0]),!this._text){var n=this.properties.attributes;this._text=n&&this.properties.textField&&n[this.properties.textField]||""}var r=this.options;this._pxBounds=BM.a.bounds(this._point,this._point),XR.prototype.render.apply(this,[e,t]),this.options=BM.a.Util.extend(r,t),this._updatePath()},_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var n=e.geometry[0];"object"===KR(n[0])&&"x"in n[0]?(this._point=BM.a.point(n[0]).scaleBy(t),this._empty=BM.a.Util.falseFn):(this._point=BM.a.point(n).scaleBy(t),this._empty=BM.a.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._updateBounds(),XR.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){var e=this._renderer._getTextWidth(this),t=[e/2,e/2];this._pxBounds=BM.a.bounds(this._point.subtract(t),this._point.add(t))},_updatePath:function(){this._renderer._updateText(this)},_containsPoint:function(e){return!1}});function $R(e){return($R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/QR.include({_getTextWidth:function(e){return this._ctx.measureText(e._text).width},_updateText:function(e){if(this._drawing&&!e._empty()){var t=this.getContainer(),n=this._map.getSize();t.width=n.x,t.height=n.y,t.style.width=n.x+"px",t.style.height=n.y+"px";var r=this._ctx,i=e.options,o=i.offsetX||1,a=i.offsetY||1,s=e._point.subtract(BM.a.point(o,a));i.fill&&(this._drawnLayers[e._leaflet_id]=e,r.fillRect(0,0,n.x,n.y),r.font=[i.fontWeight?i.fontWeight:"normal",i.fontSize?i.fontSize:"14px",i.fontFamily?i.fontFamily:"Arial Unicode MS Regular,Microsoft Yahei"].join(" "),r.textAlign=i.textAlign,r.lineWidth=i.weight,r.fillStyle=i.fillColor,r.fillText(e._text,s.x,s.y),r.strokeStyle=i.color,r.strokeText(e._text,s.x,s.y),r.rotate(i.rotation))}}}),WR.include({_getTextWidth:function(e){return e._path.getComputedTextLength()||0},_initPath:function(e){var t;ZR&&e instanceof ZR?(t=e._path=BM.a.SVG.create("text")).textContent=e._text:t=e._path=BM.a.SVG.create("path"),e.options.className&&BM.a.DomUtil.addClass(t,e.options.className),e.options.interactive&&BM.a.DomUtil.addClass(t,"leaflet-interactive"),this._updateStyle(e),this._layers[BM.a.stamp(e)]=e},_updateText:function(e){var t=e._path,n=e.options,r=n.offsetX||1,i=n.offsetY||1,o=e._point.subtract(BM.a.point(r,i));t.setAttribute("x",o.x),t.setAttribute("y",o.y),n.rotation=n.rotation||0,t.setAttribute("transform","rotate("+n.rotation/Math.PI*180+" "+o.x+" "+o.y+")"),t.setAttribute("text-anchor","center"===n.textAlign?"middle":n.textAlign),t.style.fontSize=n.fontSize,t.style.fontFamily=n.fontFamily,t.style.fontWeight=n.fontWeight||"normal",t.style.glyphOrientationVertical=n.rotation||"",n.stroke?(t.setAttribute("stroke",n.color),t.setAttribute("stroke-linecap","round"),t.setAttribute("stroke-linejoin","round"),t.setAttribute("stroke-opacity",n.opacity),t.setAttribute("stroke-width",n.weight>1?n.weight/10:n.weight)):t.setAttribute("stroke","none"),n.fill?(t.setAttribute("fill",n.fillColor||n.color),t.setAttribute("fill-opacity",n.fillOpacity)):t.setAttribute("fill","none")}});var eI=BM.a.CircleMarker.extend({includes:XR.prototype,statics:{iconCache:{}},initialize:function(e,t){XR.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},getLatLng:function(){return this._renderer._map.layerPointToLatLng(this._point)},render:function(e,t){XR.prototype.render.call(this,e,t),this._radius=t.radius||BM.a.CircleMarker.prototype.options.radius,this._updatePath()},_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var n=e.geometry[0];"object"===$R(n[0])&&"x"in n[0]?(this._point=BM.a.point(n[0]).scaleBy(t),this._empty=BM.a.Util.falseFn):(this._point=BM.a.point(n).scaleBy(t),this._empty=BM.a.Util.falseFn)},makeInteractive:function(){this._updateBounds()},updateStyle:function(e,t){return this._radius=t.radius||this._radius,this._updateBounds(),XR.prototype.updateStyle.call(this,e,t)},_updateBounds:function(){if(this.options.iconUrl&&this.options.iconSize){var e=BM.a.point(this.options.iconSize),t=e&&e.divideBy(2,!0),n=this._point.subtract(t);this._pxBounds=new BM.a.Bounds(n,n.add(e))}else BM.a.CircleMarker.prototype._updateBounds.call(this)},_updatePath:function(){this.options.iconUrl?this._renderer._updateIcon(this):BM.a.CircleMarker.prototype._updatePath.call(this)},_getImage:function(){if(!this.options.iconUrl)return null;var e=this.options.iconUrl,t=eI.iconCache[e];if(!t){var n=this.options.iconSize||[50,50];t=eI.iconCache[e]=this._createIcon(e,n)}return t},_createIcon:function(e,t){var n=e;if(!n)throw new Error("iconUrl not set in Icon options (see the docs).");var r=document.createElement("img");r.src=n,r.className="leaflet-marker-icon "+(this.layerName||"");var i=t;if("number"==typeof i&&(i=[i,i]),i){var o=BM.a.point(i),a=BM.a.point(o&&o.divideBy(2,!0));o&&(r.style.width=o.x+"px",r.style.height=o.y+"px"),a&&(r.style.marginLeft=-a.x+"px",r.style.marginTop=-a.y+"px")}return r.onload=function(){i||(r.style.width=this.width+"px",r.style.height=this.height+"px")},r},_containsPoint:function(e){return this.options.iconUrl?this._pxBounds.contains(e):BM.a.CircleMarker.prototype._containsPoint.call(this,e)}}),tI={_makeFeatureParts:function(e,t){t=t||{x:1,y:1};var n,r=e.geometry;this._parts=[];for(var i=0;i<r.length;i++){for(var o=r[i],a=[],s=0;s<o.length;s++)n=o[s],a.push(BM.a.point(n).scaleBy(t));this._parts.push(a)}},makeInteractive:function(){this._pxBounds=this._getPixelBounds()}},nI=BM.a.Polyline.extend({includes:[XR.prototype,tI],initialize:function(e,t){XR.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){t.fill=!1,XR.prototype.render.call(this,e,t),this._updatePath()},updateStyle:function(e,t){t.fill=!1,XR.prototype.updateStyle.call(this,e,t)}}),rI=BM.a.Polygon.extend({includes:[XR.prototype,tI],initialize:function(e,t){XR.prototype.initialize.call(this,e),this._makeFeatureParts(e,t)},render:function(e,t){XR.prototype.render.call(this,e,t),this._updatePath()}}),iI=n(13),oI=n.n(iI),aI=n(14),sI=BM.a.Class.extend({initialize:function(e){this.url=e},getTile:function(){var e=this;return nr.get(e.url,null,{timeout:1e4}).then(function(e){return e.ok?e.blob().then(function(e){var t=new FileReader;return new Promise(function(n){t.addEventListener("loadend",function(){var e=new oI.a(t.result);return n(new aI.VectorTile(e))}),t.readAsArrayBuffer(e)})}):{layers:[]}}).then(function(t){return e._processVectorTileSpec(t)})},_processVectorTileSpec:function(e){var t=[];for(var n in e.layers){for(var r=[],i=0;i<e.layers[n].length;i++){var o=e.layers[n].feature(i);switch(o.geometry=o.loadGeometry(),o.layerName=n,o.properties={attributes:BM.a.Util.extend({},o.properties),id:o.id},o.type){case 1:o.type=YR.POINT;break;case 2:o.type=YR.LINE;break;case 3:o.type=YR.REGION}r.push(o)}var a={};a.features=r,a.layerName=n,a.extent=e.layers[n].extent,t.push(a)}return t}}),lI=BM.a.Class.extend({initialize:function(e){this.url=e},getTile:function(){var e=this;return nr.get(e.url,null,{timeout:1e4}).then(function(e){return e.json()}).then(function(t){return e._processRecordSets(t,e)})},_processRecordSets:function(e,t){var n=e.recordsets;if(!(n=t._convertToGeoJSON(n)))return null;for(var r=0;r<n.length;r++){for(var i=n[r],o=0;o<i.features.length;o++){var a=i.features[o];(a=t._convertToVectorLayerFeature(a,t)).layerName=i.layerName,i.features[o]=a}i.extent=256,delete i.fieldTypes,delete i.fields}return n},_convertToVectorLayerFeature:function(e,t){if(e.geometry){var n,r,i,o,a={},s=e.geometry,l=s.type,u=s.coordinates,c=e.properties,f=c.id;if("Point"===l)a=c&&c.texts?t._createFeature(f,YR.TEXT,[u],c):t._createFeature(f,YR.POINT,[u],c);else if("MultiPoint"===l)a=t._createFeature(f,YR.POINT,u,c);else if("LineString"===l)a=t._createFeature(f,YR.LINE,[u],c);else if("MultiLineString"===l||"Polygon"===l){for(i=[],n=0;n<u.length;n++)o=u[n],"Polygon"===l&&(o.outer=0===n),i.push(o);var h="Polygon"===l?YR.REGION:YR.LINE;a=t._createFeature(f,h,i,c)}else{if("MultiPolygon"!==l)throw new Error("Illegal GeoJSON object");for(i=[],n=0;n<u.length;n++)for(r=0;r<u[n].length;r++)(o=u[n][r]).outer=0===r,i.push(o);a=t._createFeature(f,YR.REGION,i,c)}return a}},_convertToGeoJSON:function(e){if(e){for(var t=0;t<e.length;t++){for(var n=e[t],r=0;r<n.features.length;r++){for(var i=n.features[r],o=[],a=0,s=0;s<i.geometry.parts.length;s++){for(var l=2*i.geometry.parts[s],u=0,c=a;u<l;u+=2,c+=2){var f=i.geometry.points[c],h=i.geometry.points[c+1];o.push({x:f,y:h})}a+=l}i.geometry.points=o}n.features=pN(n.features).features}return e}},_createFeature:function(e,t,n,r){return{id:e,type:t,geometry:n,properties:r}}}),uI={JSON:"JSON",MVT:"MVT",PBF:"PBF"};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.VectorTileFormat=uI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var cI=BM.a.Class.extend({initialize:function(e,t){this.layer=e.layer,this.tileSize=e.layer.getTileSize(),this.format=e.format,this.coords=e.coords,this.renderer=e.renderer,this.done=t,this.layer._textVectorTiles={}},renderTile:function(){var e=this,t=e.layer,n=e.coords,r=t._getTileUrl(n);([uI.MVT,uI.PBF].indexOf(e.format.toUpperCase())>-1?new sI(r):new lI(r)).getTile().then(function(t){e.render(t,n)})},render:function(e,t){if(e){for(var n=this,r=n.renderer,i=n.layer,o=0;o<e.length;o++){var a=e[o],s=a.layerName;i._dataLayerNames[s]=!0;for(var l=n.tileSize.divideBy(a.extent),u=i.getLayerStyleInfo(a.layerName),c=0;c<a.features.length;c++){var f=a.features[c];if(f){u&&u.type===YR.LABEL&&f.type===YR.POINT&&f.properties.attributes&&(f.type=YR.TEXT);var h=n._getStyleOptions(t,f,s,n);if(h.length){var p=n._createFeatureLayer(f,l);if(p){var y={scope:n,coords:t,renderer:r};if(!n._extractTextLayer(f,p,h,y)){for(var d=0;d<h.length;d++){var m=n._validateStyle(h[d],f.type);p.render(r,m),r._addPath(p)}i.options.interactive&&p.makeInteractive();var v=i._getFeatureKey(f.id,s);r._features[v]={layerName:s,feature:p}}}}}}}i._map&&r.addTo(i._map),BM.a.Util.requestAnimFrame(n.done.bind(t,null,n.layer._vectorTiles[n.layer._tileCoordsToKey(t)]))}},_extractTextLayer:function(e,t,n,r){if(e.type!==YR.TEXT)return!1;var i=r.scope,o=r.coords,a=i.layer,s=a._tileCoordsToKey(o),l=e.id,u=e.layerName,c=a._textVectorTiles[s];return c||(c={layers:{},coords:o,renderer:r.renderer}),c.layers[l]={layer:t,style:n,layerName:u},a._textVectorTiles[s]=c,!0},_getStyleOptions:function(e,t,n,r){var i=r,o=i.layer,a=o.getVectorTileLayerStyle(e,t)||i._defaultStyle(t.type),s=t.id,l=o._getFeatureKey(s,n),u=o._overriddenStyles[l];return a=(a=(a=u||a)instanceof Function?a(t.properties,e.z):a)instanceof Array?a:[a]},_createFeatureLayer:function(e,t){var n;switch(e.type){case YR.POINT:n=new eI(e,t);break;case YR.LINE:n=new nI(e,t);break;case YR.REGION:n=new rI(e,t);break;case YR.TEXT:n=new ZR(e,t)}var r=this.layer;return n&&r.options.interactive&&n.addEventParent(r),n},_validateStyle:function(e,t){switch(BM.a.Path.prototype.options.weight=1,BM.a.Path.prototype.options.fillOpacity=1,t){case YR.POINT:return BM.a.extend({},BM.a.CircleMarker.prototype.options,e);case YR.LINE:return BM.a.extend({},BM.a.Polyline.prototype.options,e);case YR.REGION:return BM.a.extend({},BM.a.Polygon.prototype.options,e);case YR.TEXT:return BM.a.extend({},ZR.prototype.options,e)}},_defaultStyle:function(e){var t=BM.a.Path.prototype.options;switch(t.weight=1,t.fillOpacity=1,t.radius=3,e){case YR.POINT:return BM.a.extend({},t,BM.a.CircleMarker.prototype.options);case YR.LINE:return BM.a.extend({},t,BM.a.Polyline.prototype.options);case YR.REGION:return BM.a.extend({},t,BM.a.Polygon.prototype.options);case YR.TEXT:return BM.a.extend({},t,ZR.prototype.options)}}}),fI=BM.a.GridLayer.extend({options:{vectorTileLayerStyles:null,renderer:"SVG",format:uI.JSON,interactive:!0,maxZoom:23},initialize:function(e){var t=this;BM.a.setOptions(t,e),BM.a.GridLayer.prototype.initialize.call(t,e),t._vectorTiles={},t._overriddenStyles={},t.vectorTileLayerStyles=t.options.vectorTileLayerStyles,t.on("tileunload",function(e){var n=t._tileCoordsToKey(e.coords),r=t._vectorTiles[n];r&&t._map&&r.removeFrom(t._map),delete t._vectorTiles[n]},t),t.on("tileerror ",t._renderText,t),t.on("load",t._renderText,t),t._dataLayerNames={}},createTile:function(e,t){var n=this,r=n.getTileSize(),i=null;return i="Canvas"===n.options.renderer?new QR(e,r,n.options):new WR(e,r,n.options),n._vectorTiles[n._tileCoordsToKey(e)]=i,i._features={},new cI({layer:n,format:n.options.format,coords:e,renderer:i},t).renderTile(),i.getContainer()},getStyles:function(){return this.vectorTileLayerStyles},getStyle:function(e){return this.vectorTileLayerStyles&&this.vectorTileLayerStyles[e]},setFeatureStyle:function(e,t,n){var r=this._getFeatureKey(e,t);for(var i in this._overriddenStyles[r]=n,this._vectorTiles){var o=this._vectorTiles[i],a=o._features[r];if(a){var s=a.feature;this._updateStyles(s,o,n)}}return this},resetFeatureStyle:function(e,t){var n=this._getFeatureKey(e,t);for(var r in delete this._overriddenStyles[n],this._vectorTiles){var i=this._vectorTiles[r],o=i._features[n];if(o){var a=o.feature,s=this.vectorTileLayerStyles[o.layerName];this._updateStyles(a,i,s)}}return this},getDataLayerNames:function(){return Object.keys(this._dataLayerNames)},_removeAllTiles:function(){BM.a.GridLayer.prototype._removeAllTiles.call(this),this._textVectorTiles={}},_renderText:function(){var e=this._textVectorTiles;for(var t in e){var n=e[t],r=n.renderer;for(var i in n.layers){for(var o=n.layers[i],a=o.style,s=o.layer,l=0;l<a.length;l++)s.render(r,a[l]),r._addPath(s);this.options.interactive&&s.makeInteractive()}}},_getFeatureKey:function(e,t){return(e=e||0)+"_"+(t=t||"null")},_updateStyles:function(e,t,n){(n=n instanceof Function?n(e.properties,t.getCoord().z):n)instanceof Array||(n=[n]);for(var r=0;r<n.length;r++){var i=this._extendStyle(n[r],e.type);e.updateStyle(t,i)}},_extendStyle:function(e,t){switch(t){case YR.POINT:return BM.a.extend({},BM.a.CircleMarker.prototype.options,e);case YR.LINE:return BM.a.extend({},BM.a.Polyline.prototype.options,e);case YR.REGION:return BM.a.extend({},BM.a.Polygon.prototype.options,e);case YR.TEXT:return BM.a.extend({},ZR.prototype.options,e)}}}),hI=fI.extend({options:{serverType:null,crs:null,cartoCSS:null,layerNames:null,layersID:null,serverCartoCSSStyle:!0,processCharacters:!1,returnAttributes:!1,expands:null,cacheEnabled:!1,tileTemplate:null,subdomains:"abc",timeout:1e4,attribution:rN.Common.attribution},initialize:function(e,t){(t=t||{}).noWrap=null==t.noWrap||t.noWrap,BM.a.setOptions(this,t),fI.prototype.initialize.call(this,t),BM.a.stamp(this);var n=this;if(!e||e.indexOf("http")<0)return e="",this;n.url=e,e.indexOf("/")===e.length-1&&(e=e.substr(0,e.length-1),n.url=e),this.cartoCSSToLeaflet=new BN(n.url),n.initLayersInfo(),!n.options.serverCartoCSSStyle&&n.options.cartoCSS&&n.setClientCartoCSS(n.options.cartoCSS)},onAdd:function(e){this._crs=this.options.crs||e.options.crs,this._map=e,this._initLayerUrl(),!this.options.tileTemplate&&this.options.serverCartoCSSStyle||this._initGrid()},initLayersInfo:function(){var e=this,t=e.url+"/layers.json";nr.get(t,null,{timeout:e.options.timeout}).then(function(e){return e.json()}).then(function(t){if(e.layersInfoInitialized=!0,e.layersInfo=t,e.layersInfo){for(var n={},r=0,i=e.layersInfo.length;r<i;r++)for(var o=e.layersInfo[r].subLayers.layers,a=0,s=o.length;a<s;a++)o[a].layerIndex=s-a,n[o[a].name]=o[a];e.layersInfo=n,e.cartoCSSToLeaflet.layersInfo=n,e.options.serverCartoCSSStyle&&e.getVectorStylesFromServer()}}).catch(function(e){console.error("error",e)})},getLayerStyleInfo:function(e){var t,n=this;if(n.layersStyles=n.layersStyles||{},t=n.layersStyles[e])return t;if(!n.layersInfo)return{};var r=n.layersInfo[e];if(!r)return null;switch(t={layerIndex:r.layerIndex,ugcLayerType:r.ugcLayerType},r.ugcLayerType){case"VECTOR":t.layerStyle=r.style?r.style:null;break;case"THEME":var i=r.theme;t.layerStyle=i?i.defaultStyle:null,i&&"LABEL"===i.type&&(t.type=i.type,t.textField=i.labelExpression);break;default:r.style&&(t.layerStyle=r.style)}return n.layersStyles[e]=t,t},getVectorStylesFromServer:function(){var e=this,t=e.url+"/tileFeature/vectorstyles.json";nr.get(t,null,{timeout:e.options.timeout}).then(function(e){return e.json()}).then(function(t){if(!t||!t.style)return null;t.style&&"cartoCSS"===t.type&&e.setServerCartoCSS(t.style),e.options&&e.setClientCartoCSS(e.options.cartoCSS),e._initGrid()}).catch(function(e){console.error("error",e)})},setServerCartoCSS:function(e){this.cartoCSSToLeaflet.pretreatedCartoCSS(e,!0)},setClientCartoCSS:function(e){var t=!1;this.options.processCharacters&&(t=this.options.processCharacters),this.cartoCSSToLeaflet.pretreatedCartoCSS(e,t)},getVectorTileLayerStyle:function(e,t){if(!t)return null;var n=this,r=t.layerName,i=n.getLayerStyleInfo(r);if(i&&i.textField){var o=i.textField;if(o&&o.indexOf(".")){var a=o.split(".");o=a&&a.length>0&&a[a.length-1]}t.properties.textField=o}n.vectorTileLayerStyles=n.vectorTileLayerStyles||{};var s=n.vectorTileLayerStyles[r];if(s)return t=this._mergeFeatureTextField(t,s),s;var l=this.getScaleFromCoords(e),u=this.cartoCSSToLeaflet.pickShader(r)||[];for(var c in s=[],u)for(var f=u[c],h=0;h<f.length;h++){var p=this.cartoCSSToLeaflet.getValidStyleFromCarto(e.z,l,f[h],t,this.options.serverCartoCSSStyle);p&&s.push(p)}return"TEXT"!==(t=this._mergeFeatureTextField(t,s)).type&&0!==s.length||(s=this.cartoCSSToLeaflet.getValidStyleFromLayerInfo(t,i),"TEXT"===t.type&&(s.textName="["+t.properties.textField+"]")),n.vectorTileLayerStyles[r]=s,s},getScale:function(e){var t=e||this._map.getZoom();return this.scales[t]},getScaleFromCoords:function(e){var t,n=this;return n.scales&&n.scales[e.z]?n.scales[e.z]:(n.scales=n.scales||{},t=n.getDefaultScale(e),n.scales[e.z]=t,t)},getDefaultScale:function(e){var t=this._crs;if(t.scales)return t.scales[e.z];var n=this._tileCoordsToBounds(e),r=t.project(n.getNorthEast()),i=t.project(n.getSouthWest()),o=this.options.tileSize,a=Math.max(Math.abs(r.x-i.x)/o,Math.abs(r.y-i.y)/o),s=h.METER;if(t.code){var l=t.code.split(":");if(l&&l.length>1){var u=parseInt(l[1]);s=u&&u>=4e3&&u<=5e3?h.DEGREE:h.METER}}return mN(a,96,s)},_mergeFeatureTextField:function(e,t){if(!this.options.serverCartoCSSStyle||!t||"TEXT"!==e.type)return e;var n=t;BM.a.Util.isArray(t)||(n=[t]);for(var r=0;r<n.length;r++){var i=n[r].textName;i&&e.properties&&(e.properties.textField=i.substring(1,i.length-1))}return e},_getTileUrl:function(e){return this.options.tileTemplate?this._getTileTemplateUrl(e):this._getDefaultTileUrl(e)},_getTileTemplateUrl:function(e){var t=this,n=t.options.tileTemplate,r={s:t._getSubdomain(e),x:e.x,y:e.y,z:e.z};if(t._map&&!t._map.options.crs.infinite){var i=t._globalTileRange.max.y-e.y;t.options.tms&&(r.y=i),r["-y"]=i}return BM.a.Util.template(n,BM.a.extend(r,t.options))},_initGrid:function(){fI.prototype.onAdd.call(this,this._map)},_getSubdomain:BM.a.TileLayer.prototype._getSubdomain,_getDefaultTileUrl:function(e){var t=e.x,n=e.y,r=this._tileUrl+"&x="+t+"&y="+n;return r+="&scale="+this.getScaleFromCoords(e)},_initLayerUrl:function(){var e=this.options;if(this.url){var t=e.format.toString().toLowerCase();this._tileUrl=this.url+"/tileFeature."+t+"?",this._tileUrl+=encodeURI(this._createURLParam(e))}},_createURLParam:function(e){var t=[],n=this._getCredential();if(n&&t.push(n),e.layersID&&t.push("layersID="+e.layersID),e.layerNames){BM.a.Util.isArray(e.layerNames)||(e.layerNames=[e.layerNames]);var r="["+e.layerNames.join(",")+"]";t.push("layerNames="+r)}var i=this._crs;if(i.options&&i.options.origin)t.push("origin="+JSON.stringify({x:i.options.origin[0],y:i.options.origin[1]}));else if(i.projection&&i.projection.bounds){var o=i.projection.bounds,a=BM.a.point(o.min.x,o.max.y);t.push("origin="+JSON.stringify({x:a.x,y:a.y}))}e.expands&&t.push("expands="+e.expands),t.push("returnAttributes="+e.returnAttributes),t.push("cacheEnabled="+e.cacheEnabled);var s=this.options.tileSize;return t.push("width="+s),t.push("height="+s),t.join("&")},_getCredential:function(e){var t,n;switch(this.options.serverType){case o.IPORTAL:(t=(n=ir.getToken(e))?new Gt(n,"token"):null)||(t=(n=ir.getKey(e))?new Gt(n,"key"):null);break;case o.ONLINE:t=(n=ir.getKey(e))?new Gt(n,"key"):null;break;default:t=(n=ir.getToken(e))?new Gt(n,"token"):null}return t?t.getUrlParameters():null}}),pI=function(e,t){return new hI(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.tiledVectorLayer=pI;var yI=n(7),dI=BM.a.GeoJSON.extend({turfMap:{"Measurement.along":["line","distance","units"],"Measurement.area":["geojson"],"Measurement.bbox":["geojson"],"Measurement.bboxPolygon":["bbox"],"Measurement.bearing":["start","end","final"],"Measurement.center":["geojson","properties"],"Measurement.centerOfMass":["geojson","properties"],"Measurement.centroid":["geojson","properties"],"Measurement.destination":["origin","distance","bearing","units"],"Measurement.distance":["from","to","units"],"Measurement.envelope":["geojson"],"Measurement.length":["geojson","units"],"Measurement.midpoint":["point1","point2"],"Measurement.pointOnFeature":["geojson"],"Measurement.polygonTangents":["point","polygon"],"Measurement.rhumbBearing":["start","end","final"],"Measurement.rhumbDestination":["origin","distance","bearing","units"],"Measurement.rhumbDistance":["from","to","units"],"Measurement.square":["bbox"],"Measurement.greatCircle":["start","end","properties","npoints","offset"],"CoordinateMutation.cleanCoords":["geojson","mutate"],"CoordinateMutation.flip":["geojson","mutate"],"CoordinateMutation.rewind":["geojson","reverse","mutate"],"CoordinateMutation.round":["num","precision"],"CoordinateMutation.truncate":["geojson","precision","coordinates","mutate"],"Transformation.bboxClip":["feature","bbox"],"Transformation.bezierSpline":["line","resolution","sharpness"],"Transformation.buffer":["geojson","radius","units","steps"],"Transformation.circle":["center","radius","steps","units","properties"],"Transformation.clone":["geojson"],"Transformation.concave":["points","maxEdge","units"],"Transformation.convex":["geojson","concavity"],"Transformation.difference":["polygon1","polygon2"],"Transformation.dissolve":["featureCollection","propertyName"],"Transformation.intersect":["poly1","poly2"],"Transformation.lineOffset":["geojson","distance","units"],"Transformation.simplify":["feature","tolerance","highQuality"],"Transformation.tesselate":["poly"],"Transformation.transformRotate":["geojson","angle","pivot","mutate"],"Transformation.transformTranslate":["geojson","distance","direction","units","zTranslation","mutate"],"Transformation.transformScale":["geojson","factor","origin","mutate"],"Transformation.union":["A"],"Transformation.voronoi":["points","bbox"],"featureConversion.combine":["fc"],"featureConversion.explode":["geojson"],"featureConversion.flatten":["geojson"],"featureConversion.lineStringToPolygon":["lines","properties","autoComplete","orderCoords"],"featureConversion.polygonize":["geojson"],"featureConversion.polygonToLineString":["polygon","properties"],"Misc.kinks":["featureIn"],"Misc.lineArc":["center","radius","bearing1","bearing2","steps","units"],"Misc.lineChunk":["geojson","segmentLength","units","reverse"],"Misc.lineIntersect":["line1","line2"],"Misc.lineOverlap":["line1","line2"],"Misc.lineSegment":["geojson"],"Misc.lineSlice":["startPt","stopPt","line"],"Misc.lineSliceAlong":["line","startDist","stopDist","units"],"Misc.lineSplit":["line","splitter"],"Misc.mask":["polygon","mask"],"Misc.pointOnLine":["lines","pt","units"],"Misc.sector":["center","radius","bearing1","bearing2","steps","units"],"Misc.shortestPath":["start","end","obstacles","units","resolution"],"Misc.unkinkPolygon":["geojson"],"Helper.featureCollection":["features","bbox","id"],"Helper.feature":["geometry","properties","bbox","id"],"Helper.geometryCollection":["geometries","properties","bbox","id"],"Helper.lineString":["coordinates","properties","bbox","id"],"Helper.multiLineString":["coordinates","properties","bbox","id"],"Helper.multiPoint":["coordinates","properties","bbox","id"],"Helper.multiPolygon":["coordinates","properties","bbox","id"],"Helper.point":["coordinates","properties","bbox","id"],"Helper.polygon":["coordinates","properties","bbox","id"],"Data.sample":["featurecollection","num"],"Interpolation.interpolate":["points","cellSize","gridType","property","units","weight"],"Interpolation.isobands":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.isolines":["pointGrid","breaks","zProperty","commonProperties","breaksProperties"],"Interpolation.planepoint":["point","triangle"],"Interpolation.tin":["points","z"],"Joins.pointsWithinPolygon":["points","polygons"],"Joins.tag":["points","polygons","field","outField","mask","properties"],"Grids.hexGrid":["bbox","cellSide","units","triangles"],"Grids.pointGrid":["bbox","cellSide","units","mask","properties"],"Grids.squareGrid":["bbox","cellSide","units","mask","properties"],"Grids.triangleGrid":["bbox","cellSide","units","mask","properties"],"Classification.nearestPoint":["targetPoint","points"],"Aggregation.collect":["polygons","points","inProperty","outProperty"],"Aggregation.clustersDbscan":["points","maxDistance","units","minPoints","mutate"],"Aggregation.clustersKmeans":["points","numberOfClusters","mutate"],"Meta.coordAll":["geojson"],"Meta.coordEach":["geojson","callback","excludeWrapCoord"],"Meta.coordReduce":["geojson","callback","initialValue","excludeWrapCoord"],"Meta.featureEach":["geojson","callback"],"Meta.featureReduce":["geojson","callback","initialValue"],"Meta.flattenEach":["geojson","callback"],"Meta.flattenReduce":["geojson","callback","initialValue"],"Meta.getCoord":["coord"],"Meta.getCoords":["coords"],"Meta.getGeom":["geojson"],"Meta.getGeomType":["geojson","name"],"Meta.geomEach":["geojson","callback"],"Meta.geomReduce":["geojson","callback","initialValue"],"Meta.propEach":["geojson","callback"],"Meta.propReduce":["geojson","callback","initialValue"],"Meta.segmentEach":["geojson","callback"],"Meta.segmentReduce":["geojson","callback","initialValue"],"Meta.getCluster":["geojson","filter"],"Meta.clusterEach":["geojson","property","callback"],"Meta.clusterReduce":["geojson","property","callback","initialValue"],"Assertions.collectionOf":["featureCollection","type","name"],"Assertions.containsNumber":["coordinates"],"Assertions.geojsonType":["value","type","name"],"Assertions.featureOf":["feature","type","name"],"Booleans.booleanClockwise":["line"],"Booleans.booleanContains":["feature1","feature2"],"Booleans.booleanCrosses":["feature1","feature2"],"Booleans.booleanDisjoint":["feature1","feature2"],"Booleans.booleanEqual":["feature1","feature2"],"Booleans.booleanOverlap":["feature1","feature2"],"Booleans.booleanParallel":["feature1","feature2"],"Booleans.booleanPointInPolygon":["point","polygon","ignoreBoundary"],"Booleans.booleanPointOnLine":["point","linestring","ignoreEndVertices"],"UnitConversion.bearingToAngle":["bearing"],"UnitConversion.convertArea":["area","originalUnit","finalUnit"],"UnitConversion.convertLength":["length","originalUnit","finalUnit"],"UnitConversion.degreesToradians":["degrees"],"UnitConversion.lengthToRadians":["distance","units"],"UnitConversion.lengthToDegrees":["distance","units"],"UnitConversion.radiansToLength":["radians","units"],"UnitConversion.radiansToDegrees":["radians"],"UnitConversion.toMercator":["geojson","mutate"],"UnitConversion.toWgs84":["geojson","mutate"]},options:{attribution:rN.Turf.attribution},initialize:function(e){e=e||{},BM.a.Util.setOptions(this,e),BM.a.stamp(this),this._layers={}},turfOptionMap:{"Measurement.along":["line","distance",{units:""}],"Measurement.bboxPolygon":["bbox",{properties:"",id:""}],"Measurement.bearing":["start","end",{final:""}],"Measurement.center":["geojson",{properties:""}],"Measurement.destination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.distance":["from","to",{units:""}],"Measurement.length":["geojson",{units:""}],"Measurement.rhumbBearing":["start","end",{final:""}],"Measurement.rhumbDestination":["origin","distance","bearing",{units:"",properties:""}],"Measurement.rhumbDistance":["from","to",{units:""}],"Measurement.greatCircle":["start","end",{properties:"",npoints:"",offset:""}],"CoordinateMutation.cleanCoords":["geojson",{mutate:""}],"CoordinateMutation.flip":["geojson",{mutate:""}],"CoordinateMutation.rewind":["geojson",{mutate:"",reverse:""}],"CoordinateMutation.truncate":["geojson",{precision:"",coordinates:"",mutate:""}],"Transformation.bezierSpline":["line",{resolution:"",sharpness:""}],"Transformation.buffer":["geojson","radius",{units:"",steps:""}],"Transformation.circle":["center","radius",{units:"",steps:"",properties:""}],"Transformation.concave":["points",{maxEdge:"",units:""}],"Transformation.convex":["geojson",{concavity:""}],"Transformation.dissolve":["featureCollection",{propertyName:""}],"Transformation.lineOffset":["geojson","distance",{units:""}],"Transformation.simplify":["geojson",{tolerance:"",highQuality:""}],"Transformation.transformRotate":["geojson","angle",{pivot:"",mutate:""}],"Transformation.transformTranslate":["geojson","distance","direction",{units:"",zTranslation:"",mutate:""}],"Transformation.transformScale":["geojson","factor",{origin:"",mutate:""}],"Transformation.voronoi":["points",{bbox:""}],"featureConversion.lineStringToPolygon":["lines",{properties:"",autoComplete:"",orderCoords:""}],"featureConversion.polygonToLineString":["polygon",{properties:""}],"Misc.lineArc":["center","radius","bearing1","bearing2",{steps:"",units:""}],"Misc.lineChunk":["geojson","segmentLength",{units:"",reverse:""}],"Misc.lineOverlap":["line1","line2",{tolerance:""}],"Misc.lineSliceAlong":["line","startDist","stopDist",{units:""}],"Misc.pointOnLine":["lines","pt",{units:""}],"Misc.sector":["center","radius","bearing1","bearing2",{units:"",steps:"",properties:""}],"Misc.shortestPath":["start","end",{obstacles:"",units:"",resolution:""}],"Helper.feature":["geometry","properties",{bbox:"",id:""}],"Helper.geometryCollection":["geometries","properties",{bbox:"",id:""}],"Helper.lineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiLineString":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPoint":["coordinates","properties",{bbox:"",id:""}],"Helper.multiPolygon":["coordinates","properties",{bbox:"",id:""}],"Helper.point":["coordinates","properties",{bbox:"",id:""}],"Helper.polygon":["coordinates","properties",{bbox:"",id:""}],"Interpolation.interpolate":["points","cellSize",{gridType:"",property:"",units:"",weight:""}],"Interpolation.isobands":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Interpolation.isolines":["pointGrid","breaks",{zProperty:"",commonProperties:"",breaksProperties:""}],"Grids.hexGrid":["bbox","cellSide",{units:"",triangles:"",properties:"",mask:""}],"Grids.pointGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.squareGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Grids.triangleGrid":["bbox","cellSide",{units:"",mask:"",properties:""}],"Aggregation.clustersDbscan":["points","maxDistance",{units:"",minPoints:"",mutate:""}],"Aggregation.clustersKmeans":["points",{numberOfClusters:"",mutate:""}],"Booleans.booleanPointInPolygon":["point","polygon",{ignoreBoundary:""}],"Booleans.booleanPointOnLine":["point","linestring",{ignoreEndVertices:""}],"UnitConversion.toMercator":["geojson",{mutate:""}],"UnitConversion.toWgs84":["geojson",{mutate:""}]},process:function(e,t,n,r){var i;try{i=yI[e.split(".")[1]].apply(this,this.parse(e,t))}catch(n){i=yI[e.split(".")[1]].apply(this,this.parseOption(e,t))}(r=null==r||r)&&this.addData([i]),n&&n(i)},parse:function(e,t){if("Transformation.union"===e)return t.A;var n=[],r=this.turfMap[e];return r&&r.map(function(e){return n.push(t[e]),t[e]}),n},parseOption:function(e,t){var n=[];return this.turfOptionMap[e].map(function(e){if(e instanceof Object){var r=e;Object.keys(r).forEach(function(e){r[e]=t[e]}),n.push(r)}else n.push(t[e]);return t}),n}}),mI=function(e){return new dI(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.turfLayer=mI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vI=BM.a.Layer.extend({options:{alwaysMapCRS:!1,id:be.createUniqueID("heatMapLayer_"),featureWeight:null,opacity:1,colors:["blue","cyan","lime","yellow","red"],useGeoUnit:!1,radius:50,attribution:rN.Common.attribution},initialize:function(e,t){BM.a.Util.setOptions(this,t),this.name=e,this.features=[],this.maxWeight=null,this.minWeight=null,this.rootCanvas=null,this.canvasContext=null,this.maxWidth=null,this.maxHeight=null,this.id=this.options.id,this.featureWeight=this.options.featureWeight,this.colors=this.options.colors,this.useGeoUnit=this.options.useGeoUnit,this.opacity=this.options.opacity,this.radius=this.options.radius,this.blur=this.options.blur,this.movingOffset=[0,0]},onRemove:function(e){BM.a.DomUtil.remove(this.rootCanvas),e.off("mousemove",this.mouseMoveHandler)},onAdd:function(e){var t=this;if(t._map=e,t._createCanvasContainer(),t.rootCanvas){var n=e.getSize();t.rootCanvas.width=t.maxWidth=n.x,t.rootCanvas.height=t.maxHeight=n.y,t._updateOpacity(),t.mouseMoveHandler=function(e){var n=e.layerPoint;t.currentMousePosition=BM.a.point(n.x+t.movingOffset[0],n.y+t.movingOffset[1])},e.on("mousemove",t.mouseMoveHandler),t.update()}else e.removeLayer(t)},addFeatures:function(e){this.features=this.toiClientFeature(e),this.refresh()},refresh:function(){if(0!==this.features.length&&this._map){var e=this._map.getBounds();this.updateHeatPoints(e)}},updateHeatPoints:function(e){this.features&&this.features.length>0?this.convertFastToPixelPoints(e):this.canvasContext.clearRect(0,0,this.maxWidth,this.maxWidth)},convertFastToPixelPoints:function(e){var t,n,r,i,o,a,s,l=[],u=e.getEast()-e.getWest(),c=e.getNorth()-e.getSouth(),f=this._map.getSize();i=u/f.x>c/f.y?u/f.x:c/f.y,this.useRadius=this.useGeoUnit?parseInt(this.radius/i):this.radius;for(var h=0;h<this.features.length;h++){var p=this.features[h],y=p.geometry,d=this.getLocalXY(new _e(y.x,y.y));this.featureWeight?(d.weight=p.attributes[this.featureWeight],this.maxWeight||(o=o||d.weight,a=a||d.weight,o=Math.max(o,d.weight),a=Math.min(a,d.weight))):d.weight=1,t=Math.floor(d[0]),n=Math.floor(d[1]),r=d.weight,l.push([t,n,r])}this.maxWeight?this.draw(l,this.maxWeight):(s=o&&a?(o+a)/2:1,this.draw(l,s))},draw:function(e,t){if(!(this.maxHeight>0&&this.maxWidth>0))return!1;var n=this.canvasContext;this.canvasContext.clearRect(0,0,this.maxWidth,this.maxHeight),this.drawCircle(this.useRadius),this.createGradient();for(var r=0;r<e.length;r++){var i=e[r];this.canvasContext.globalAlpha=Math.max(i[2]/t,.05),this.canvasContext.drawImage(this.circle,i[0]-this.useRadius,i[1]-this.useRadius)}var o=n.getImageData(0,0,this.maxWidth,this.maxHeight);this.colorize(o.data,this.grad),n.putImageData(o,0,0)},colorize:function(e,t){for(var n,r=0;r<e.length;r+=4)(n=4*e[r+3])&&(e[r]=t[n],e[r+1]=t[n+1],e[r+2]=t[n+2])},drawCircle:function(e){var t=this.blur||e/2,n=this.circle=document.createElement("canvas"),r=n.getContext("2d");n.height=2*e,n.width=2*e,r.shadowOffsetX=r.shadowOffsetY=2*e,r.shadowBlur=t,r.shadowColor="#000000",r.beginPath(),r.arc(-e,-e,e/2,0,2*Math.PI,!0),r.closePath(),r.fill()},createGradient:function(){var e=this.colors,t=document.createElement("canvas"),n=t.getContext("2d"),r=n.createLinearGradient(0,0,0,256);t.height=256,t.width=1;for(var i=1,o=0,a=e.length;o<a;o++)r.addColorStop(i/a,e[o]),i++;n.fillStyle=r,n.fillRect(0,0,1,256),this.grad=n.getImageData(0,0,1,256).data},update:function(){var e=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.rootCanvas,e);var t=this;t.refresh(),t.currentMousePosition&&(t.currentMousePosition=BM.a.point(t.currentMousePosition.x-t.movingOffset[0],t.currentMousePosition.y-t.movingOffset[1])),t.movingOffset=[0,0],t._zoom=t._map.getZoom(),t._center=t._map.getCenter()},getLocalXY:function(e){if(!this._map)return e;var t=e;BM.a.Util.isArray(e)&&(t=BM.a.point(e[0],e[1])),e instanceof BM.a.Point||(t=e instanceof Xe||e instanceof ct?BM.a.point(e.x,e.y):BM.a.point(e.lon,e.lat));var n=this._map.latLngToContainerPoint(this.options.alwaysMapCRS?this._map.options.crs.unproject(t):BM.a.latLng(t.y,t.x));return[n.x,n.y]},setOpacity:function(e){e!==this.options.opacity&&(e&&(this.options.opacity=e),this._updateOpacity())},removeFeatures:function(e){if(e&&0!==e.length&&this.features&&0!==this.features.length){if(e===this.features)return this.removeAllFeatures();be.isArray(e)||(e=[e]);for(var t,n,r=[],i=0,o=e.length;i<o;i++)t=e[i],-1!==(n=be.indexOf(this.features,t))?this.features.splice(n,1):r.push(t);var a=0==r.length;this._map.fire("featuresremoved",{features:r,succeed:a}),this.refresh()}},removeAllFeatures:function(){this.features=[],this.refresh()},_createCanvasContainer:function(){var e=this.getPane(),t="heatMapLayer leaflet-layer leaflet-zoom-"+(this._map.options.zoomAnimation&&BM.a.Browser.any3d?"animated":"hide");this.rootCanvas=BM.a.DomUtil.create("canvas",t,e);var n=BM.a.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);this.rootCanvas.id=this.id,this.rootCanvas.style[n]="50% 50%",this.rootCanvas.style.position="absolute",this.rootCanvas.style.zIndex=200,be.modifyDOMElement(this.rootCanvas,null,null,null,null,null,null,this.opacity),this.canvasContext=this.rootCanvas.getContext("2d")},_updateOpacity:function(){var e=this;be.modifyDOMElement(e.rootCanvas,null,null,null,null,null,null,e.options.opacity),null!==e._map&&e._map.fire("changelayer",{layer:e,property:"opacity"})},getEvents:function(){var e={zoomend:this._reset,moveend:this._reset,resize:this._resize};return this._map._zoomAnimated&&(e.zoomanim=this._zoomAnim),e},toiClientFeature:function(e){BM.a.Util.isArray(e)||(e=[e]);for(var t=[],n=0,r=e.length;n<r;n++)if(e[n]instanceof gI)t.push(e[n].toFeature());else if(-1!=["FeatureCollection","Feature","Geometry"].indexOf(e[n].type)){var i=new Nn;t=t.concat(i.read(e[n]))}else{if(!e[n].geometry||!e[n].geometry.parts)throw new Error("Features's type does not match, please check.");t.push(Ib.fromJson(e[n]).toFeature())}return t},_zoomAnim:function(e){var t=this._map.getZoomScale(e.zoom),n=this._map._getCenterOffset(e.center)._multiplyBy(-t).subtract(this._map._getMapPanePos());BM.a.DomUtil.setTransform?BM.a.DomUtil.setTransform(this.rootCanvas,n,t):this.rootCanvas.style[BM.a.DomUtil.TRANSFORM]=BM.a.DomUtil.getTranslateString(n)+" scale("+t+")"},_reset:function(){var e=this;e.update();var t=e._map.getSize(),n=this._map.containerPointToLayerPoint([0,0]);BM.a.DomUtil.setPosition(this.rootCanvas,n),parseFloat(e.rootCanvas.width)!==parseFloat(t.x)&&(e.rootCanvas.width=t.x),parseFloat(e.rootCanvas.height)!==parseFloat(t.y)&&(e.rootCanvas.height=t.y),e.refresh()},_resize:function(){var e=this._map.getSize();this.maxWidth=e.x,this.maxHeight=e.y}});BM.a.supermap.heatMapLayer=function(e,t){return new vI(e,t)};var gI=BM.a.Class.extend({initialize:function(e,t){this.geometry=e,this.attributes=t},toFeature:function(){var e=this.geometry,t=[];if(e instanceof BM.a.LatLng)t=[e.lng,e.lat];else if(e instanceof BM.a.Point)t=[e.x,e.y];else if(e instanceof BM.a.CircleMarker){var n=e.getLatLng();t=[n.lng,n.lat]}else t=e;return 2===t.length&&(e=new Xe(t[0],t[1])),new en(e,this.attributes)}});BM.a.supermap.heatMapFeature=function(e,t){return new gI(e,t)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var bI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},code:function(e,t){var n=this;new Ai(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).code(n.url+"/geocoding",e)},decode:function(e,t){var n=this;new Ai(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).decode(n.url+"/geodecoding",e)}}),SI=function(e,t){return new bI(e,t)};BM.a.supermap.addressMatchService=SI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var _I=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},queryChart:function(e,t,n){var r=this,i=r._processParams(e),o=r._processFormat(n);new Da(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:o}).processAsync(i)},getChartFeatureInfo:function(e){var t=this,n=t.url.concat();new xa(n+="/chartFeatureInfoSpecs",{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{scope:t,processCompleted:e,processFailed:e}}).processAsync()},_processParams:function(e){if(!e)return{};e.returnContent=null==e.returnContent||e.returnContent,e.chartQueryFilterParameters&&!BM.a.Util.isArray(e.chartQueryFilterParameters)&&(e.chartQueryFilterParameters=[e.chartQueryFilterParameters]),e.bounds&&(e.bounds=hN.toSuperMapBounds(e.bounds))},_processFormat:function(e){return e||i.GEOJSON}}),wI=function(e,t){return new _I(e,t)};BM.a.supermap.chartService=wI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var OI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},getFields:function(e,t){var n=this;new Pp(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t},datasource:e.datasource,dataset:e.dataset}).processAsync()},getFieldStatisticsInfo:function(e,t){if(e instanceof zu){var n=this,r=e.fieldName,i=e.statisticMode;i&&!BM.a.Util.isArray(i)&&(i=[i]),n.currentStatisticResult={fieldName:r},n._statisticsCallback=t,i.forEach(function(t){n.currentStatisticResult[t]=null,n._fieldStatisticRequest(e.datasource,e.dataset,r,t)})}},_fieldStatisticRequest:function(e,t,n,r){var i=this;new Yu(i.url,{eventListeners:{scope:i,processCompleted:i._processCompleted,processFailed:i._statisticsCallback},datasource:e,dataset:t,field:n,statisticMode:r,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers}).processAsync()},_processCompleted:function(e){var t=this,n=!0,r=e.result;for(var i in this.currentStatisticResult&&null==t.currentStatisticResult[r.mode]&&(this.currentStatisticResult[r.mode]=r.result),t.currentStatisticResult)if(null==t.currentStatisticResult[i]){n=!1;break}n&&t._statisticsCallback({result:t.currentStatisticResult})}}),xI=function(e,t){return new OI(e,t)};BM.a.supermap.fieldService=xI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var CI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},getGridCellInfos:function(e,t){if(e instanceof kp){var n=this;new Ip(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}}),TI=function(e,t){return new CI(e,t)};BM.a.supermap.gridCellInfosService=TI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var PI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},getLayersInfo:function(e){var t=this;new nm(t.url,{proxy:t.options.proxy,withCredentials:t.options.withCredentials,crossOrigin:t.options.crossOrigin,headers:t.options.headers,serverType:t.options.serverType,eventListeners:{processCompleted:e,processFailed:e}}).processAsync()},setLayerInfo:function(e,t){if(e instanceof Fb){var n=this,r=e.resourceID,i=e.tempLayerName,o=e.layerInfo;if(r&&i){var a=n.url.concat();new Jb(a+="/tempLayersSet/"+r+"/"+i,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(o)}}},setLayersInfo:function(e,t){if(e instanceof Wb){var n=this,r=e.resourceID,i=!!e.isTempLayers&&e.isTempLayers,o=e.layersInfo;if((!i||r)&&o)new eS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t},resourceID:r,isTempLayers:i}).processAsync(o)}},setLayerStatus:function(e,t){if(e instanceof nS){var n=this;new uS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{processCompleted:t,processFailed:t}}).processAsync(e)}}}),EI=function(e,t){return new PI(e,t)};BM.a.supermap.layerInfoService=EI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var kI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},measureDistance:function(e,t){return this.measure(f.DISTANCE,e,t),this},measureArea:function(e,t){return this.measure(f.AREA,e,t),this},measure:function(e,t,n){if(t instanceof jv){var r=this;t.geometry&&(t.geometry=yN(t.geometry)),new Uv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,measureMode:e,eventListeners:{scope:r,processCompleted:n,processFailed:n}}).processAsync(t)}}}),MI=function(e,t){return new kI(e,t)};BM.a.supermap.measureService=MI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var AI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},sinksFacilityAnalyst:function(e,t){var n=this;new ml(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},sourcesFacilityAnalyst:function(e,t){var n=this;new Ml(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},traceUpFacilityAnalyst:function(e,t){var n=this;new pu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},traceDownFacilityAnalyst:function(e,t){var n=this;new $l(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},upstreamFacilityAnalyst:function(e,t){var n=this;new Pu(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}),LI=function(e,t){return new AI(e,t)};BM.a.supermap.networkAnalyst3DService=LI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var jI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},burstPipelineAnalyst:function(e,t){var n=this;new va(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},computeWeightMatrix:function(e,t){var n=this;new es(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},findClosestFacilities:function(e,t,n){var r=this;new ic(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},streamFacilityAnalyst:function(e,t,n){var r=this;new Bl(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findLocation:function(e,t,n){var r=this;new pc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findPath:function(e,t,n){var r=this;new Ac(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findTSPPaths:function(e,t,n){var r=this;new Yc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findMTSPPaths:function(e,t,n){var r=this;new wc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},findServiceAreas:function(e,t,n){var r=this;new Uc(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},updateEdgeWeight:function(e,t){var n=this;new Zw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},updateTurnNodeWeight:function(e,t){var n=this;new sO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},_processParams:function(e){if(!e)return{};if(e.centers&&BM.a.Util.isArray(e.centers)&&e.centers.map(function(t,n){return e.centers[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.centers[n]}),e.nodes&&BM.a.Util.isArray(e.nodes)&&e.nodes.map(function(t,n){return e.nodes[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.nodes[n]}),e.event&&e.event instanceof BM.a.LatLng&&(e.event={x:e.event.lng,y:e.event.lat}),e.facilities&&BM.a.Util.isArray(e.facilities)&&e.facilities.map(function(t,n){return e.facilities[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.facilities[n]}),e.parameter&&e.parameter.barrierPoints){var t=e.parameter.barrierPoints;BM.a.Util.isArray(t)?t.map(function(t,n){return e.parameter.barrierPoints[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.parameter.barrierPoints[n]}):e.parameter.barrierPoints=[t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t]}return e},_processFormat:function(e){return e||i.GEOJSON}}),NI=function(e,t){return new jI(e,t)};BM.a.supermap.networkAnalystService=NI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var RI=iN.extend({initialize:function(e,t){t=t||{},BM.a.setOptions(this,t),iN.prototype.initialize.call(this,e,t),this.kernelDensityJobs={},this.summaryMeshJobs={},this.queryJobs={},this.summaryRegionJobs={},this.vectorClipJobs={},this.overlayGeoJobs={},this.buffersJobs={},this.topologyValidatorJobs={},this.summaryAttributesJobs={}},getKernelDensityJobs:function(e,t){var n=this,r=n._processFormat(t);new Qm(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getKernelDensityJobs()},getKernelDensityJob:function(e,t,n){var r=this,i=r._processFormat(n);new Qm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getKernelDensityJob(e)},addKernelDensityJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new Qm(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.kernelDensityJobs[e.id]=e.state}},format:a}).addKernelDensityJob(o,n)},getKernelDensityJobState:function(e){return this.kernelDensityJobs[e]},getSummaryMeshJobs:function(e,t){var n=this,r=n._processFormat(t);new JS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryMeshJobs()},getSummaryMeshJob:function(e,t,n){var r=this,i=r._processFormat(n);new JS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryMeshJob(e)},addSummaryMeshJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new JS(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryMeshJobs[e.id]=e.state}},format:a}).addSummaryMeshJob(o,n)},getSummaryMeshJobState:function(e){return this.summaryMeshJobs[e]},getQueryJobs:function(e,t){var n=this,r=n._processFormat(t);new gS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getQueryJobs()},getQueryJob:function(e,t,n){var r=this,i=r._processFormat(n);new gS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getQueryJob(e)},addQueryJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new gS(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.queryJobs[e.id]=e.state}},format:a}).addQueryJob(o,n)},getQueryJobState:function(e){return this.queryJobs[e]},getSummaryRegionJobs:function(e,t){var n=this,r=n._processFormat(t);new e_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryRegionJobs()},getSummaryRegionJob:function(e,t,n){var r=this,i=r._processFormat(n);new e_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryRegionJob(e)},addSummaryRegionJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new e_(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryRegionJobs[e.id]=e.state}},format:a}).addSummaryRegionJob(o,n)},getSummaryRegionJobState:function(e){return this.summaryRegionJobs[e]},getVectorClipJobs:function(e,t){var n=this,r=n._processFormat(t);new mO(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getVectorClipJobs()},getVectorClipJob:function(e,t,n){var r=this,i=r._processFormat(n);new mO(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getVectorClipJob(e)},addVectorClipJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new mO(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.vectorClipJobs[e.id]=e.state}},format:a}).addVectorClipJob(o,n)},getVectorClipJobState:function(e){return this.vectorClipJobs[e]},getOverlayGeoJobs:function(e,t){var n=this,r=n._processFormat(t);new ng(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getOverlayGeoJobs()},getOverlayGeoJob:function(e,t,n){var r=this,i=r._processFormat(n);new ng(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getOverlayGeoJob(e)},addOverlayGeoJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new ng(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.overlayGeoJobs[e.id]=e.state}},format:a}).addOverlayGeoJob(o,n)},getoverlayGeoJobState:function(e){return this.overlayGeoJobs[e]},getBuffersJobs:function(e,t){var n=this,r=n._processFormat(t);new ta(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getBuffersJobs()},getBuffersJob:function(e,t,n){var r=this,i=r._processFormat(n);new ta(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getBuffersJob(e)},addBuffersJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new ta(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.buffersJobs[e.id]=e.state}},format:a}).addBuffersJob(o,n)},getBuffersJobState:function(e){return this.buffersJobs[e]},getTopologyValidatorJobs:function(e,t){var n=this,r=n._processFormat(t);new Ow(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getTopologyValidatorJobs()},getTopologyValidatorJob:function(e,t,n){var r=this,i=r._processFormat(n);new Ow(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getTopologyValidatorJob(e)},addTopologyValidatorJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new Ow(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.topologyValidatorJobs[e.id]=e.state}},format:a}).addTopologyValidatorJob(o,n)},getTopologyValidatorJobState:function(e){return this.topologyValidatorJobs[e]},getSummaryAttributesJobs:function(e,t){var n=this,r=n._processFormat(t);new IS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:e,processFailed:e},format:r}).getSummaryAttributesJobs()},getSummaryAttributesJob:function(e,t,n){var r=this,i=r._processFormat(n);new IS(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:i}).getSummaryAttributesJob(e)},addSummaryAttributesJob:function(e,t,n,r){var i=this,o=i._processParams(e),a=i._processFormat(r);new IS(i.url,{proxy:i.options.proxy,withCredentials:i.options.withCredentials,crossOrigin:i.options.crossOrigin,headers:i.options.headers,serverType:i.options.serverType,eventListeners:{scope:i,processCompleted:t,processFailed:t,processRunning:function(e){i.summaryAttributesJobs[e.id]=e.state}},format:a}).addSummaryAttributesJob(o,n)},getSummaryAttributesJobState:function(e){return this.summaryAttributesJobs[e]},_processFormat:function(e){return e||i.GEOJSON},_processParams:function(e){return e?(e.bounds&&(e.bounds=hN.toSuperMapBounds(e.bounds)),e.query&&(e.query=hN.toSuperMapBounds(e.query)),e.geometryQuery&&(e.geometryQuery=hN.toProcessingParam(e.geometryQuery)),e.geometryClip&&(e.geometryClip=hN.toProcessingParam(e.geometryClip)),e):{}}}),II=function(e,t){return new RI(e,t)};BM.a.supermap.processingService=II;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var DI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},queryByBounds:function(e,t,n){var r=this;new Cg(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},queryByDistance:function(e,t,n){var r=this;new Ug(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},queryBySQL:function(e,t,n){var r=this;new mb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},queryByGeometry:function(e,t,n){var r=this;new tb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},_processParams:function(e){return e?(e.returnContent=null==e.returnContent||e.returnContent,e.queryParams&&!BM.a.Util.isArray(e.queryParams)&&(e.queryParams=[e.queryParams]),e.bounds&&(e.bounds=hN.toSuperMapBounds(e.bounds)),e.geometry&&(e.geometry instanceof BM.a.Point?e.geometry=new Xe(e.geometry.x,e.geometry.y):e.geometry=yN(e.geometry)),e):{}},_processFormat:function(e){return e||i.GEOJSON}}),FI=function(e,t){return new DI(e,t)};BM.a.supermap.queryService=FI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var BI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},getAreaSolarRadiationResult:function(e,t,n){var r=this;new Ki(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},bufferAnalysis:function(e,t,n){var r=this;new Ro(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},densityAnalysis:function(e,t,n){var r=this;new qs(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},generateSpatialData:function(e,t,n){var r=this;new of(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},geoRelationAnalysis:function(e,t,n){var r=this;new Yf(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},interpolationAnalysis:function(e,t,n){var r=this;new Bm(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},mathExpressionAnalysis:function(e,t,n){var r=this;new Av(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},overlayAnalysis:function(e,t,n){var r=this;new Wv(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},routeCalculateMeasure:function(e,t,n){var r=this;new Cb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},routeLocate:function(e,t,n){var r=this;new Nb(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},surfaceAnalysis:function(e,t,n){var r=this;new u_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},terrainCurvatureCalculate:function(e,t,n){var r=this;new g_(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(e)},thiessenAnalysis:function(e,t,n){var r=this;new ew(r.url,{proxy:r.options.proxy,withCredentials:r.options.withCredentials,crossOrigin:r.options.crossOrigin,headers:r.options.headers,serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}).processAsync(r._processParams(e))},geometrybatchAnalysis:function(e,t,n){for(var r=this,i=new sw(r.url,{serverType:r.options.serverType,eventListeners:{scope:r,processCompleted:t,processFailed:t},format:r._processFormat(n)}),o=[],a=0;a<e.length;a++){var s=e[a];o.push({analystName:s.analystName,param:r._processParams(s.param)})}i.processAsync(o)},_processParams:function(e){if(!e)return{};if(e.bounds&&(e.bounds=hN.toSuperMapBounds(e.bounds)),e.inputPoints)for(var t=0;t<e.inputPoints.length;t++){var n=e.inputPoints[t];BM.a.Util.isArray(n)&&(e.inputPoints[t]={x:n[0],y:n[1],tag:n[2]})}if(e.points)for(var r=0;r<e.points.length;r++){var i=e.points[r];BM.a.Util.isArray(i)?e.points[r]={x:i[0],y:i[1]}:i instanceof BM.a.LatLng?e.points[r]={x:i.lng,y:i.lat}:e.points[r]={x:i.x,y:i.y}}if(e.point&&(BM.a.Util.isArray(e.point)?e.point={x:e.point[0],y:e.point[1]}:e.point instanceof BM.a.LatLng?e.point={x:e.point.lng,y:e.point.lat}:e.point={x:e.point.x,y:e.point.y}),e.extractRegion&&(e.extractRegion=yN(e.extractRegion)),e.extractParameter&&e.extractParameter.clipRegion&&(e.extractParameter.clipRegion=yN(e.extractParameter.clipRegion)),e.clipParam&&e.clipParam.clipRegion&&(e.clipParam.clipRegion=yN(e.clipParam.clipRegion)),e.sourceGeometry){var o=null;e.sourceGeometrySRID&&(o=e.sourceGeometrySRID),e.sourceGeometry=yN(e.sourceGeometry),o&&(e.sourceGeometry.SRID=o),delete e.sourceGeometry.sourceGeometrySRID}if(e.operateGeometry&&(e.operateGeometry=yN(e.operateGeometry)),e.sourceGeometries){for(var a=[],s=0;s<e.sourceGeometries.length;s++)a.push(yN(e.sourceGeometries[s]));e.sourceGeometries=a}if(e.operateGeometries){for(var l=[],u=0;u<e.operateGeometries.length;u++)l.push(yN(e.operateGeometries[u]));e.operateGeometries=l}if(e.sourceRoute&&e.sourceRoute instanceof BM.a.Polyline){var c={type:"LINEM"};c.parts=[e.sourceRoute.getLatLngs().length],c.points=[];for(var f=0;f<e.sourceRoute.getLatLngs().length;f++){var h=e.sourceRoute.getLatLngs()[f];c.points=c.points.concat({x:h.lng,y:h.lat,measure:h.alt})}e.sourceRoute=c}return e.operateRegions&&BM.a.Util.isArray(e.operateRegions)&&e.operateRegions.map(function(t,n){return e.operateRegions[n]=yN(t),e.operateRegions[n]}),e},_processFormat:function(e){return e||i.GEOJSON}}),UI=function(e,t){return new BI(e,t)};BM.a.supermap.spatialAnalystService=UI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var GI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},getThemeInfo:function(e,t){var n=this;new W_(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)}}),zI=function(e,t){return new GI(e,t)};BM.a.supermap.themeService=zI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var VI=iN.extend({initialize:function(e,t){iN.prototype.initialize.call(this,e,t)},queryStop:function(e,t){var n=this;new PS(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(e)},analysisTransferPath:function(e,t){var n=this;new Nw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},analysisTransferSolution:function(e,t){var n=this;new Vw(n.url,{proxy:n.options.proxy,withCredentials:n.options.withCredentials,crossOrigin:n.options.crossOrigin,headers:n.options.headers,serverType:n.options.serverType,eventListeners:{scope:n,processCompleted:t,processFailed:t}}).processAsync(n._processParams(e))},_processParams:function(e){return e?(e.points&&BM.a.Util.isArray(e.points)&&e.points.map(function(t,n){return e.points[n]=t instanceof BM.a.LatLng?{x:t.lng,y:t.lat}:t,e.points[n]}),e):{}}}),HI=function(e,t){return new VI(e,t)};BM.a.supermap.trafficTransferAnalystService=HI;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
* This program are made available under the terms of the Apache License, Version 2.0
* which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var JI=BM.a.Control.extend({options:{position:"topright",style:function(e,t){return t?BM.a.circleMarker(t,{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}):{fillColor:"blue",weight:1,opacity:1,color:"blue",fillOpacity:.6}},onEachFeature:null},initialize:function(e){BM.a.setOptions(this,e),this._event=new BM.a.Evented,this.rootContainer=null},onAdd:function(e){return this.map=e,this.rootContainer=this._initView(),this.rootContainer},on:function(e,t){this._event.on(e,t)},off:function(e,t){this._event.off(e,t)},_initView:function(){},_preventMapEvent:function(e,t){e&&t&&(e.addEventListener("mouseover",function(){t.dragging.disable(),t.scrollWheelZoom.disable(),t.doubleClickZoom.disable()}),e.addEventListener("mouseout",function(){t.dragging.enable(),t.scrollWheelZoom.enable(),t.doubleClickZoom.enable()}))}});BM.a.supermap.components.componentsViewBase=function(e){return new JI(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var qI=BM.a.Evented.extend({initialize:function(){this.fileModel=new Sk},readFile:function(e){var t=e.target,n=t.files[0];if(n.size>this.fileModel.FileConfig.fileMaxSize)return this.fire("filesizeexceed",{messageType:"warring",message:Ck.i18n("msg_fileSizeExceeded")}),!1;var r=t.value,i=n.name,o=DM.getFileType(i);if(!o)return this.fire("errorfileformat",{messageType:"failure",message:Ck.i18n("msg_fileTypeUnsupported")}),!1;""!==i&&(this.fileModel.set("loadFileObject",{file:n,filePath:r,fileName:i,fileType:o}),this._readData())},_readData:function(){var e=this,t=this,n=this.fileModel.loadFileObject.fileType;Ek.readFile(n,{file:this.fileModel.loadFileObject.file,path:this.fileModel.loadFileObject.filePath},function(r){Ek.processDataToGeoJson(n,r,function(t){t&&e.fire("openfilesucceeded",{result:t,layerName:e.fileModel.loadFileObject.fileName.split(".")[0]})},function(e){t.fire("openfilefailed",{messageType:"failure",message:e})},e)},function(){t.fire("openfilefailed",{messageType:"failure",message:Ck.i18n("msg_openFileFail")})},this)}}),WI=function(e){return new qI(e)};BM.a.supermap.components.openFileViewModel=WI,BM.a.supermap.components.util=DM;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var QI=JI.extend({options:{layer:null},initialize:function(e){JI.prototype.initialize.apply(this,[e]),this.viewModel=new qI},setViewStyle:function(e,t){this.rootContainer.style[e]=t},_initView:function(){var e=this,t=BM.a.DomUtil.create("div","component-openfile");return t.id="openFile",this.fileSelect=BM.a.DomUtil.create("div","",t),this.label=BM.a.DomUtil.create("label","component-openfile__span--select",this.fileSelect),this.label.htmlFor="input_file",BM.a.DomUtil.create("div","supermapol-icons-upload",this.label),BM.a.DomUtil.create("span","component-openfile__span",this.label).appendChild(document.createTextNode(Ck.i18n("text_chooseFile"))),this.fileInput=BM.a.DomUtil.create("input","component-openfile__input",this.fileSelect),this.fileInput.id="input_file",this.fileInput.type="file",this.fileInput.accept=".json,.geojson,.csv,.xls,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet,application/vnd.ms-excel",this.fileInput.onchange=function(t){e.messageBox.closeView(),e.viewModel.readFile(t)},this.messageBox=new wk,this.viewModel.on("filesizeexceed",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("errorfileformat",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilefailed",function(t){e.messageBox.showView(t.message,t.messageType),e._event.fire("openfilefailed",t)}),this.viewModel.on("readdatafail",function(t){e.messageBox.showView(t.message,t.messageType)}),this.viewModel.on("openfilesucceeded",function(t){e._event.fire("openfilesucceeded",t)}),this._preventMapEvent(t,this.map),t}}),YI=function(e){return new QI(e)};BM.a.supermap.components.openFile=YI;function XI(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function KI(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ZI(e,t,n){return t&&KI(e.prototype,t),n&&KI(e,n),e}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/var $I=function(){function e(t){XI(this,e),this.layers=[],t&&t.length>0&&this.addLayers(t),this.currentLayerDataModel=null}return ZI(e,[{key:"addLayers",value:function(e,t,n,r){for(var i=0;i<e.length;i++){var o=e[i].layerName;if(e[i].layer instanceof BM.a.GeoJSON){var a=new eD(e[i].layer);this.layers[o]=a,t&&t.call(r,{layerName:o,layer:a})}else n&&n.call(r,"")}}},{key:"setCurrentLayerDataModel",value:function(e){this.layers[e]&&(this.currentLayerDataModel=this.layers[e])}}]),e}();BM.a.supermap.components.GeoJsonLayersDataModel=$I;var eD=function(){function e(t){if(XI(this,e),this.layer=t,this.features=t.getLayers(),this.attributeNames=[],this.features[0].feature.properties)for(var n in this.features[0].feature.properties)this.attributeNames.push(n);this.operatingAttributeNames=[],this.attributes={}}return ZI(e,[{key:"setOperatingAttributeNames",value:function(e){this.operatingAttributeNames=e}},{key:"getAllAttributeNames",value:function(){return this.attributeNames}},{key:"getAttributeNamesByType",value:function(e){if(this.features[0].feature.properties){var t=this.features[0].feature.properties,n=[];if("Num"===e)for(var r in t)isNaN(t[r])||n.push(r);else n=this.attributeNames;return n}}},{key:"getAllFeatures",value:function(){return this.features}},{key:"getAttributeValueByAttributeName",value:function(e){if(this.attributes[e])return this.attributes[e];this.attributes[e]=[];for(var t=0;t<this.features.length;t++)this.attributes[e].push([this.features[t].feature.properties[e]]);return this.attributes[e]}},{key:"getFeaturesByKeyWord",value:function(e){var t=[],n=new RegExp(e.toLowerCase()),r=this;return this.features.forEach(function(e){if(!e.feature.properties)return null;for(var i,o=e.feature.properties,a=0,s=(i=r.operatingAttributeNames.length>0?r.operatingAttributeNames:r.attributeNames).length;a<s;a++)if(o[i[a]]&&n.test(o[i[a]].toString().toLowerCase())){var l=i[a],u=o[i[a]];e.filterAttribute={filterAttributeName:l,filterAttributeValue:u},t.push(e);break}}),t}}]),e}(),tD=BM.a.Evented.extend({options:{cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"}},initialize:function(e,t){if(!e)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=e,BM.a.Util.setOptions(this,t),this.dataModel=new $I,this.geoCodeParam={keyWords:"北京市",city:"北京市",pageSize:this.options.pageSize,pageNum:this.options.pageNum},this.searchCache={}},search:function(e,t){t?this.searchFromLayer(e,t):this.searchFromCityLocalSearchService(e)},searchFromLayer:function(e,t){if(this.dataModel.layers[t]){var n=this.dataModel.layers[t].getFeaturesByKeyWord(e);n&&n.length>0?this.fire("searchlayersucceeded",{result:n}):this.fire("searchfailed",{searchType:"searchLayersField"})}},searchFromCityLocalSearchService:function(e){if(this.searchCache[e])this.fire("geocodesucceeded",{result:this.searchCache[e]});else{this.geoCodeParam.keyWords=e||this.geoCodeParam.city;var t=this,n=this._getSearchUrl(this.geoCodeParam);nr.get(n).then(function(e){return e.json()}).then(function(e){if(e.error||0===e.poiInfos.length)t.fire("searchfailed",{searchType:"searchGeocodeField"});else if(e.poiInfos){var n=t._dataToGeoJson(e.poiInfos,t.geoCodeParam);t.fire("geocodesucceeded",{result:n})}})}},addSearchLayers:function(e){var t=this;this.dataModel.addLayers(e,function(e){t.fire("newlayeradded",{layerName:e.layerName})},null,this)},panToLayer:function(e){this.dataModel.layers[e]&&this.map.flyToBounds(this.dataModel.layers[e].layer.getBounds())},panToCity:function(e){this.geoCodeParam.keyWords=e,this.geoCodeParam.city=e;var t=this,n=this._getSearchUrl(this.geoCodeParam);nr.get(n).then(function(e){return e.json()}).then(function(e){if(e.poiInfos.length>0){var n=BM.a.latLng(e.poiInfos[0].location.y,e.poiInfos[0].location.x);t.map.setView(n,8)}else t.fire("searchfailed",{searchType:"cityGeocodeField"})})},_dataToGeoJson:function(e,t){for(var n=[],r=0;r<e.length;r++){var i={type:"Feature",geometry:{type:"Point",coordinates:[e[r].location.x,e[r].location.y]},properties:{name:e[r].name||t.keyWords,address:e[r].formatedAddress||e[r].address}};n.push(i)}return n},_getSearchUrl:function(e){return this.options.cityGeoCodingConfig.addressUrl+".json?keywords=".concat(e.keyWords,"&city=").concat(e.city,"&pageSize=").concat(e.pageSize,"&pageNum=").concat(e.pageNum,"&key=").concat(this.options.cityGeoCodingConfig.key)}});
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.searchViewModel=function(e){return new tD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var nD=JI.extend({options:{cityConfig:{HOT:{HOT:["北京市","上海市","广州市","深圳市","南京市","杭州市","天津市","重庆市","成都市","青岛市","苏州市","无锡市","常州市","温州市","武汉市","长沙市","南昌市","三亚市","合肥市","石家庄市"]},AB:{A:["阿拉善盟","鞍山市","安庆市","安阳市","阿坝藏族羌族自治州","安顺市","阿里地区","安康市","阿克苏地区","阿勒泰地区","阿拉尔市"],B:["北京市","保定市","包头市","巴彦淖尔市","本溪市","白山市","白城市","蚌埠市","亳州市","滨州市","北海市","百色市","白沙黎族自治县","保亭黎族苗族自治县","巴中市","毕节地区","保山市","宝鸡市","白银市","博尔塔拉蒙古自治州","巴音郭楞蒙古自治州","北区"]},CD:{C:["重庆市","成都市","常州市","长沙市","承德市","沧州市","长治市","赤峰市","朝阳市","长春市","滁州市","巢湖市","池州市","常德市","郴州市","潮州市","崇左市","澄迈县","昌江黎族自治县","楚雄彝族自治州","昌都地区","昌吉回族自治州"],D:["大同市","大连市","丹东市","大庆市","大兴安岭地区","东营市","德州市","东莞市","儋州市","东方市","定安县","德阳市","达州市","大理白族自治州","德宏傣族景颇族自治州","迪庆藏族自治州","定西市","东区","大埔区","大堂区"]},EFG:{E:["鄂尔多斯市","鄂州市","恩施土家族苗族自治州"],F:["抚顺市","阜新市","阜阳市","福州市","抚州市","佛山市","防城港市"],G:["广州市","赣州市","桂林市","贵港市","广元市","广安市","贵阳市","固原市","高雄市","高雄县","甘南藏族自治州","甘孜藏族自治州"]},H:{H:["杭州市","合肥市","邯郸市","衡水市","呼和浩特市","呼伦贝尔市","葫芦岛市","哈尔滨市","鹤岗市","黑河市","淮安市","湖州市","淮南市","淮北市","黄山市","菏泽市","鹤壁市","黄石市","黄冈市","衡阳市","怀化市","惠州市","河源市","贺州市","河池市","海口市","红河哈尼族彝族自治州","汉中市","海东地区","海北藏族自治州","黄南藏族自治州","海南藏族自治州","果洛藏族自治州","海西蒙古族藏族自治州","哈密地区","和田地区","花莲县","黄大仙区","花地玛堂区"]},J:{J:["晋城市","晋中市","锦州市","吉林市","鸡西市","佳木斯市","嘉兴市","金华市","景德镇市","九江市","吉安市","济南市","济宁市","焦作市","济源市","荆门市","荆州市","江门市","湛江市","揭阳市","嘉峪关市","金昌市","酒泉市","基隆市","嘉义市","嘉义县","九龙城区","嘉模堂区"]},KL:{K:["开封市","昆明市","克拉玛依市","克孜勒苏柯尔克孜自治州","喀什地区"],L:["廊坊市","临汾市","吕梁市","辽阳市","辽源市","连云港市","丽水市","六安市","龙岩市","莱芜市","临沂市","聊城市","洛阳市","漯河市","娄底市","柳州市","来宾市","临高县","乐东黎族自治县","陵水黎族自治县","泸州市","乐山市","凉山彝族自治州","六盘水市","丽江市","临沧市","拉萨市","林芝地区","兰州市","陇南市","临夏回族自治州"]},MNP:{M:["牡丹江市","马鞍山市","茂名市","梅州市","绵阳市","眉山市","苗栗县"],N:["南京市","南昌市","南通市","宁波市","南平市","宁德市","南阳市","南宁市","南沙群岛","内江市","南充市","怒江傈傈族自治州","那曲地区","南投县"],P:["盘锦市","莆田市","萍乡市","平顶山市","濮阳市","攀枝花市","平凉市","屏东县","澎湖县"]},QR:{Q:["青岛市","秦皇岛市","齐齐哈尔市","黔西南布依族苗族自治州","七台河市","衢州市","泉州市","潜江市","清远市","钦州市","琼海市","曲靖市","庆阳市","荃湾区","黔东南苗族侗族自治州","黔南布依族苗族自治州","琼中黎族苗族自治县"],R:["日照市","日喀则地区"]},S:{S:["上海市","深圳市","苏州市","石家庄市","三亚市","朔州市","沈阳市","四平市","松原市","双鸭山市","绥化市","宿迁市","绍兴市","宿州市","三明市","上饶市","三门峡市","商丘市","十堰市","随州市","邵阳市","韶关市","汕头市","汕尾市","三亚市","遂宁市","思茅市","山南地区","商洛市","石嘴山市","石河子市","深水埗区","沙田区","神农架林区","圣安多尼堂区","圣方济各堂区"]},T:{T:["天津市","唐山市","太原市","通辽市","铁岭市","通化市","泰州市","台州市","铜陵市","泰安市","天门市","屯昌县","铜仁地区","铜川市","天水市","吐鲁番地区","塔城地区","图木舒克市","台北市","台中市","台南市","台北县","桃园县","台中县","台南县","台东县","屯门区"]},W:{W:["无锡市","温州市","武汉市","乌海市","乌兰察布市","芜湖市","潍坊市","威海市","梧州市","五指山市","文昌市","万宁市","文山壮族苗族自治州","渭南市","武威市","吴忠市","乌鲁木齐市","五家渠市","湾仔区","望德堂区"]},X:{X:["邢台市","忻州市","兴安盟","徐州市","宣城市","厦门市","新余市","新乡市","许昌市","信阳市","襄樊市","孝感市","咸宁市","仙桃市","湘潭市","西安市","咸阳市","西宁市","新竹市","新竹县","西贡区","锡林郭勒盟","西沙群岛","湘西土家族苗族自治州","西双版纳傣族自治州"]},Y:{Y:["阳泉市","运城市","营口市","延边朝鲜族自治州","伊春市","盐城市","扬州市","鹰潭市","宜春市","烟台市","宜昌市","岳阳市","益阳市","永州市","阳江市","云浮市","玉林市","宜宾市","雅安市","玉溪市","延安市","榆林市","玉树藏族自治州","银川市","伊犁哈萨克自治州","宜兰县","云林县","油尖旺区","元朗区"]},Z:{Z:["郑州市","张家口市","镇江市","舟山市","漳州市","淄博市","枣庄市","周口市","驻马店市","株洲市","张家界市","珠海市","肇庆市","中山市","自贡市","资阳市","遵义市","昭通市","张掖市","中卫市","彰化县","中西区","中沙群岛的岛礁及其海域"]}},cityGeoCodingConfig:{addressUrl:"https://www.supermapol.com/iserver/services/localsearch/rest/searchdatas/China/poiinfos",key:"fvV2osxwuZWlY0wJb8FEb2i5"},isGeoCoding:!0,pageSize:10,pageNum:1,perPageDataNum:8},initialize:function(e){JI.prototype.initialize.apply(this,[e]),this.currentSearchLayerName="",this.isSearchLayer=!1,this.perPageDataNum=this.options.perPageDataNum},onAdd:function(e){return this.viewModel=new tD(e,this.options),JI.prototype.onAdd.apply(this,[e])},addSearchLayer:function(e){this.viewModel.addSearchLayers(e)},_initView:function(){var e=this,t=this,n=document.createElement("div");n.setAttribute("class","component-search-container");var r=document.createElement("div");r.setAttribute("class","component-search");var i=document.createElement("div");i.setAttribute("class","component-search__settings");var o=document.createElement("div");o.setAttribute("class","component-search__settings__name"),i.appendChild(o);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-solid-down-triangle"),i.appendChild(a);var s=null;if(this.options.isGeoCoding){var l=new xM({config:this.options.cityConfig});s=l.getElement(),l.content.onclick=function(t){"SPAN"===t.target.nodeName&&t.target.innerText&&(e.viewModel.panToCity(t.target.innerHTML),e.messageBox.closeView(),o.removeChild(o.firstChild),o.insertBefore(document.createTextNode(t.target.innerHTML),o.firstChild),e.isSearchLayer=!1)},o.appendChild(document.createTextNode(l.content.getElementsByTagName("span")[0].innerText))}var u=function(){var e=document.createElement("div");e.setAttribute("class","component-search__layers");var n=document.createElement("div");n.setAttribute("class","component-search-layers-content"),e.appendChild(n);var r=document.createElement("div");r.setAttribute("class","component-search__layers__header");var i=document.createElement("div");i.setAttribute("class","load-btn"),r.appendChild(i);var a=document.createElement("span");a.setAttribute("class","supermapol-icons-poi-load"),i.appendChild(a);var s=document.createElement("span");s.appendChild(document.createTextNode(Ck.i18n("text_loadSearchCriteria"))),i.appendChild(s);var l=document.createElement("div");l.setAttribute("class","save-btn"),r.appendChild(l);var u=document.createElement("span");u.setAttribute("class","supermapol-icons-poi-save"),l.appendChild(u);var c=document.createElement("span");c.appendChild(document.createTextNode(Ck.i18n("text_saveSearchCriteria"))),l.appendChild(c);var f=document.createElement("div");return f.setAttribute("class","component-search__layers__body"),f.onclick=function(e){t.clearSearchResult();var n=null;if("component-search__layers__itme__singleselect"===e.target.classList[0])n=e.target;else{if("component-single-default-img"!==e.target.classList[0]&&"single-label"!==e.target.classList[0])return;n=e.target.parentNode}document.getElementsByClassName("component-single-checked-img").length>0&&document.getElementsByClassName("component-single-checked-img")[0].setAttribute("class","component-single-default-img"),n.firstChild.setAttribute("class","component-single-checked-img"),t.currentSearchLayerName=n.lastChild.innerText,t.isSearchLayer=!0,o.removeChild(o.firstChild),o.insertBefore(document.createTextNode(t.currentSearchLayerName),o.firstChild),t.viewModel.panToLayer(t.currentSearchLayerName),t.messageBox.closeView()},n.appendChild(f),e}(),c=[];s&&c.push({title:Ck.i18n("title_searchCity"),content:s}),c.push({title:Ck.i18n("title_searchLayer"),content:u});var f=new MM({tabs:c}),h=f.getElement();f.closeView(),r.appendChild(h),i.onclick=function(){h.hidden?f.showView():f.closeView()},r.appendChild(i),o.innerText||o.appendChild(document.createTextNode(Ck.i18n("text_label_chooseSearchLayers")));var p=document.createElement("div");p.setAttribute("class","component-search__input");var y=document.createElement("input");y.type="text",y.placeholder=Ck.i18n("text_label_searchTips"),p.appendChild(y),this.poiInput=y;var d=document.createElement("span");d.setAttribute("class","supermapol-icons-close"),d.hidden=!0,p.appendChild(d),r.appendChild(p);var m=document.createElement("div");m.setAttribute("class","component-search-icon supermapol-icons-search"),m.onclick=function(){v.closeView(),e.clearSearchResult(),e.messageBox.closeView(),f.closeView();var t=e.poiInput.value.trim();""!==t?e.isSearchLayer?e.viewModel.search(t,e.currentSearchLayerName):e.viewModel.search(t):e.messageBox.showView(Ck.i18n("msg_searchKeywords"))},y.onkeypress=function(e){if(13==e.which){var t=document.createEvent("HTMLEvents");t.initEvent("click",!1,!0),m.dispatchEvent(t)}},r.appendChild(m);var v=new IM;this._resultDomObj=v;var g=function(){var e=v.getElement();return e.style.position="absolute",e.style.top="44px",e.style.right="0",v.closeView(),v.content.onclick=function(e){var n=null;if("component-search-result-info"===e.target.parentNode.className)n=e.target.parentNode.parentNode;else if("component-search__resultitme"===e.target.parentNode.className)n=e.target.parentNode;else{if("component-search__resultitme"!==e.target.className)return;n=e.target}document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),n.firstChild.classList.add("component-search__resultitme-selected");var r=n.children[1].firstChild.innerText;t._linkageFeature(r)},e}();return r.appendChild(g),d.onclick=function(t){e.clearSearchResult(),y.value="",t.target.hidden=!0,v.closeView()},y.oninput=function(){d.hidden=!1},this.messageBox=new wk,this._addViewModelListener(),n.appendChild(r),this._preventMapEvent(n,this.map),n},_createSearchLayerItem:function(e){var t=document.createElement("div");t.setAttribute("class","component-search__layers__itme");var n=document.createElement("div");n.setAttribute("class","component-search__layers__itme__singleselect");var r=document.createElement("div");r.setAttribute("class","component-single-default-img"),n.appendChild(r);var i=document.createElement("span");i.setAttribute("class","single-label"),i.innerHTML=e,n.appendChild(i),t.appendChild(n),document.getElementsByClassName("component-search__layers__body")[0].appendChild(t)},_createResultItem:function(e,t){var n=document.createElement("div");n.setAttribute("class","component-search__resultitme");var r=document.createElement("div");"Point"===e||"MultiPoint"===e?r.setAttribute("class","supermapol-icons-marker-layer component-search-result-icon"):"LineString"===e||"MultiLineString "===e?r.setAttribute("class","supermapol-icons-line-layer component-search-result-icon"):"Polygon"===e||"MultiPolygon"===e?r.setAttribute("class","supermapol-icons-polygon-layer component-search-result-icon"):r.setAttribute("class","supermapol-icons-point-layer component-search-result-icon"),n.appendChild(r);var i=document.createElement("div");i.setAttribute("class","component-search-result-info");var o=document.createElement("div");i.appendChild(o);var a=document.createElement("div");return t.name?(o.innerHTML=t.name,a.innerHTML=t.address,i.appendChild(a)):o.innerHTML=t.filterAttributeName+": "+t.filterAttributeValue,n.appendChild(i),document.createElement("div").setAttribute("class","component-checkbox component-checkbox-default-img"),n},_addViewModelListener:function(){var e=this;this.viewModel.on("searchlayerschanged",function(t){for(var n=0;n<t.length;n++)e._createSearchLayerItem(t[n])}),this.viewModel.on("newlayeradded",function(t){e._createSearchLayerItem(t.layerName)}),this.viewModel.on("searchlayersucceeded",function(t){var n=t.result;e.clearSearchResult(),e.searchResultLayer=BM.a.featureGroup(n,{pointToLayer:e.options.style,style:e.options.style}).bindPopup(function(e){if(e.feature.properties)return new hM({attributes:e.feature.properties}).getElement()}).addTo(e.map),e.searchResultLayer.eachLayer(function(t){e.options.onEachFeature?e.options.onEachFeature(t.toGeoJSON(),t):e._featureOnclickEvent.bind(e)(t.toGeoJSON(),t)}),e.searchLayersData=n,e._prepareResultData(n),e._event.fire("searchlayersucceeded",{result:e.searchResultLayer.toGeoJSON()})}),this.viewModel.on("geocodesucceeded",function(t){var n=t.result;e.clearSearchResult(),e.searchResultLayer=BM.a.geoJSON(n,{pointToLayer:e.options.style,style:e.options.style,onEachFeature:e.options.onEachFeature||e._featureOnclickEvent.bind(e)}).bindPopup(function(e){if(e.feature.properties)return new hM({attributes:e.feature.properties}).getElement()}).addTo(e.map),e.searchLayersData=n,e._prepareResultData(n),e._event.fire("geocodesucceeded",{result:n})}),this.viewModel.on("searchfailed",function(t){var n="";n="searchGeocodeField"===t.searchType?Ck.i18n("msg_searchGeocodeField"):"cityGeocodeField"===t.searchType?Ck.i18n("msg_cityGeocodeField"):Ck.i18n("msg_getFeatureField"),e.messageBox.showView(n),e._event.fire("searchfailed",{message:n})})},_prepareResultData:function(e){this.currentResult=e;var t=Math.ceil(e.length/this.perPageDataNum);this._resultDomObj.setPageLink(t),this._createResultListByPageNum(1,e),this._resultDomObj.showView(),this._resultDomObj.setLinkageEvent(function(e){n._createResultListByPageNum(e,n.currentResult)});var n=this},_createResultListByPageNum:function(e,t){var n,r=0;1===e&&t.length<this.perPageDataNum?n=t.length-1:e*this.perPageDataNum>t.length?(r=this.perPageDataNum*(e-1),n=t.length-1):(r=this.perPageDataNum*(e-1),n=e*this.perPageDataNum-1);for(var i=document.createElement("div"),o=r;o<=n;o++){var a=void 0,s="Point";t[o].filterAttribute?(s=t[o].feature.geometry.type,a=t[o].filterAttribute):a=t[o].properties,i.appendChild(this._createResultItem(s,a))}this._resultDomObj.setContent(i),this._resultDomObj.showView(),i.firstChild.getElementsByClassName("component-search-result-icon")[0].classList.add("component-search__resultitme-selected");var l=i.firstChild.getElementsByClassName("component-search-result-info")[0].firstChild.innerText;!this._selectMarkerFeature&&this._linkageFeature(l)},_flyToBounds:function(e){var t=e.getSouthWest(),n=e.getNorthEast();t.lat===n.lat&&t.lng===n.lng?this.map.flyTo(t):this.map.fitBounds(e)},_linkageFeature:function(e){var t=this,n="";n=this.isSearchLayer?e.split(":")[1].trim():e,this._selectFeature&&this._selectFeature.addTo(this.map),this.searchResultLayer.eachLayer(function(e){(!n||e.filterAttribute&&e.filterAttribute.filterAttributeValue===n||e.feature.properties&&e.feature.properties.name===n)&&(e.remove(),t._setSelectedLayerStyle(e))})},clearSearchResult:function(){this.searchResultLayer&&(this.map.closePopup(),!this.isSearchLayer&&this.map.removeLayer(this.searchResultLayer),this._selectMarkerFeature&&this.map.removeLayer(this._selectMarkerFeature),this._selectFeaturethis&&this.map.removeLayer(this._selectFeature),this._selectMarkerFeature=null,this._selectFeature=null,this.searchResultLayer=null,this.currentResult=null)},_featureOnclickEvent:function(e,t){var n=this;t.on("click",function(){var r,i,o=document.getElementsByClassName("component-pagination__link")[0];n._resultDomObj._changePageEvent({target:o.children[0].children[0]}),n._selectFeature&&n._selectFeature.addTo(n.map),t.remove();for(var a=0;a<n.searchLayersData.length;a++){var s=n.searchLayersData[a];if(s.properties&&s.properties.name===e.properties.name||s.filterAttribute&&s.filterAttribute.filterAttributeName+": "+s.filterAttribute.filterAttributeValue==t.filterAttribute.filterAttributeName+": "+t.filterAttribute.filterAttributeValue){i=a%n.perPageDataNum,r=parseInt(a/n.perPageDataNum)+1;break}}if(r>1)for(var l=1;l<r;l++){var u;u=document.getElementsByClassName("component-pagination__link")[0],n._resultDomObj._changePageEvent({target:u.children[u.children.length-2].children[0]})}var c=document.getElementsByClassName("component-search-result-info"),f=c[i].children[0];if(f.innerHTML===e.properties.name||f.innerHTML===t.filterAttribute.filterAttributeName+": "+t.filterAttribute.filterAttributeValue){var h=c[i].parentNode;document.getElementsByClassName("component-search__resultitme-selected").length>0&&document.getElementsByClassName("component-search__resultitme-selected")[0].classList.remove("component-search__resultitme-selected"),h.firstChild.classList.add("component-search__resultitme-selected"),n._setSelectedLayerStyle(t)}},this)},_setSelectedLayerStyle:function(e){var t;this._selectMarkerFeature&&this._selectMarkerFeature.remove(),this._selectMarkerFeature=null,this._selectFeature=e,this._selectMarkerFeature=BM.a.geoJSON(e.toGeoJSON(),{pointToLayer:function(e,t){return BM.a.marker(t,{icon:BM.a.divIcon({className:"component-select-marker-icon",iconAnchor:[15,0]})})},style:{fillColor:"red",weight:1,opacity:1,color:"red",fillOpacity:.2}}).addTo(this.map),this._selectMarkerFeature.bindPopup(function(){return new hM({attributes:e.feature.properties}).getElement()},{closeOnClick:!1}).openPopup().addTo(this.map),this._flyToBounds(this.searchResultLayer.getBounds()),e.getLatLng?t=e.getLatLng():e.getCenter&&(t=e.getCenter()),this.map.setView(t)}}),rD=function(e){return new nD(e)};BM.a.supermap.components.search=rD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var iD=BM.a.Evented.extend({options:{_defaultLayerOptions:{style:null,onEachFeature:function(e,t){var n="属性信息如下：<br>";for(var r in e.properties)n+=r+": "+e.properties[r]+"<br>";t.bindPopup(n)}}},initialize:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return new Error("Cannot find map, fileModel.map cannot be null.");this.map=e,BM.a.Util.extend(this.options._defaultLayerOptions,t),this.options._defaultLayerOptions.pointToLayer=this.options._defaultLayerOptions.style,this.popupsStatus=!0,this.dataFlowStatus=!1,this.dataFlowUrl="",this.currentFeatures=[],this.dataFlowLayer=null},subscribe:function(e){var t=this;if(this.dataFlowUrl===e){if(this.dataFlowStatus)return void this.fire("dataflowservicesubscribed")}else this.dataFlowUrl=e;this.dataFlowStatus=!0,this.dataFlowLayer&&(this.dataFlowLayer.remove(),this.dataFlowLayer=null);var n=new SR(e,this.options._defaultLayerOptions);n.on("subscribesucceeded",function(e){t.fire("subscribesucceeded",{result:e})}),n.on("subscribefailed",function(e){t.fire("subscribefailed",{result:e})}),n.on("dataupdated",function(e){t.fire("dataupdated",{result:e});var n=e.layer.getBounds(),r=hN.toSuperMapBounds(t.map.getBounds()),i=hN.toSuperMapBounds(n);r.intersectsBounds(i)||(i.left===i.right&&i.top===i.bottom?t.map.setView(n.getCenter()):t.map.flyToBounds(n)),t.popupsStatus&&t.openPopups()}),n.addTo(this.map),this.dataFlowLayer=n},cancelSubscribe:function(){this.dataFlowLayer&&(this.dataFlowStatus=!1,this.dataFlowLayer.dataService.unSubscribe(),this.dataFlowLayer.remove(),this.dataFlowLayer=null)},openPopups:function(){if(this.popupsStatus=!0,this.dataFlowLayer)for(var e=this.dataFlowLayer.getLayers(),t=0;t<e.length;t++)for(var n=0;n<e[t].getLayers().length;n++)e[t].getLayers()[n].openPopup()},closePopups:function(){if(this.popupsStatus=!1,this.dataFlowLayer)for(var e=this.dataFlowLayer.getLayers(),t=0;t<e.length;t++)for(var n=0;n<e[t].getLayers().length;n++)e[t].getLayers()[n].closePopup()}});BM.a.supermap.components.dataFlowViewModel=function(e){return new iD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var oD=JI.extend({initialize:function(e){JI.prototype.initialize.apply(this,[e])},onAdd:function(e){var t={};return this.options.style&&(t.style=this.options.style),this.options.onEachFeature&&(t.style=this.options.onEachFeature),this.viewModel=new iD(e,t),JI.prototype.onAdd.apply(this,[e])},_initView:function(){var e=this,t=new zk({title:Ck.i18n("title_dataFlowService")}),n=t.getElement(),r=t.getContentElement();r.style.padding="10px 18px";var i=document.createElement("div");i.setAttribute("class","component-dataflow__container");var o=document.createElement("div");o.setAttribute("class","component-input-default");var a=document.createElement("input");a.setAttribute("class","component-input-default"),a.type="text",a.placeholder=Ck.i18n("text_input_value_inputDataFlowUrl"),a.title=Ck.i18n("text_input_value_inputDataFlowUrl"),o.appendChild(a);var s=document.createElement("span");s.setAttribute("class","supermapol-icons-close"),s.hidden=!0,s.onclick=function(e){a.value="",e.target.hidden=!0},a.oninput=function(){s.hidden=!1},o.appendChild(s),i.appendChild(o),r.appendChild(i);var l=document.createElement("div");l.setAttribute("class","component-dataflow__container");var u=document.createElement("div");u.setAttribute("class","component-checkbox-container");var c=document.createElement("div");c.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),c.checked=!0,u.appendChild(c);var f=document.createElement("div");f.setAttribute("class","component-label component-label-selected"),f.innerHTML=Ck.i18n("text_displayFeaturesInfo"),u.appendChild(f),c.onclick=function(t){t.target.checked=!t.target.checked,t.target.checked?(f.setAttribute("class","component-label component-label-selected"),t.target.setAttribute("class","component-checkbox-default component-checkbox-selected-img"),e.viewModel.openPopups()):(f.setAttribute("class","component-label"),t.target.setAttribute("class","component-checkbox-default component-checkbox-default-img"),e.viewModel.closePopups())},l.appendChild(u),r.appendChild(l);var h=document.createElement("div");h.setAttribute("class","component-dataflow__container component-init-center");var p=document.createElement("button");p.setAttribute("class","component-button-default"),p.innerHTML=Ck.i18n("text_subscribe"),p.onclick=function(){var t=a.value;""!==t?e.viewModel.subscribe(t):e.messageBox.showView(Ck.i18n("msg_inputDataFlowUrlFirst"))},h.appendChild(p);var y=document.createElement("button");return y.setAttribute("class","component-button-default"),y.innerHTML=Ck.i18n("text_cancelSubscribe"),y.onclick=function(){e.viewModel.cancelSubscribe()},h.appendChild(y),r.appendChild(h),this.messageBox=new wk,this.viewModel.on("dataflowservicesubscribed",function(){e.messageBox.showView(Ck.i18n("msg_dataflowservicesubscribed"))}),this.viewModel.on("subscribesucceeded",function(){e.messageBox.showView(Ck.i18n("msg_subscribesucceeded"))}),this.viewModel.on("dataupdated",function(t){e.messageBox.closeView(),e._event.fire("dataupdated",t)}),this._preventMapEvent(n,this.map),n}}),aD=function(e){return new oD(e)};BM.a.supermap.components.dataFlow=aD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var sD=function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=t,this.layer=n},lD=function(e,t){return new sD(e,t)};function uD(e){return(uD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fD(e,t){return!t||"object"!==uD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function hD(e){return(hD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pD(e,t){return(pD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.geoJSONLayerWithName=lD;var yD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),fD(this,hD(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.workerUrl=e,this.turfLayers=[]}},{key:"getLayersData",value:function(e){for(var t={},n={},r={},i={},o=0;o<e;o++)e[o]=new sD(e[o].layerName,e[o].layer);this.geoJsonLayersDataModel=new $I(e);for(var a=[],s=0;s<e.length;s++)a[e[s].layerName]={fields:e[s].fields,layer:e[s].layer.toGeoJSON()};for(var l in this.geoJsonLayersDataModel.layers){var u=void 0;u=a[l].fields?a[l].fields:this.geoJsonLayersDataModel.layers[l].getAttributeNamesByType("Num");for(var c=[],f=0;f<u.length;f++){c[u[f]]=this.geoJsonLayersDataModel.layers[l].getAttributeValueByAttributeName(u[f]);for(var h=c[u[f]],p=0;p<h.length;p++)""!=h[p]&&void 0!==h[p]||(h.splice(p,1),p-=1),h[p]=parseFloat(h[p]);c[u[f]]=Array.from(new Set(h.sort(function(e,t){return e-t})))}var y={layerName:l,fields:u,fieldsValue:c,features:a[l].layer},d=a[l].layer.features[0].geometry.type;"Point"===d?n[l]=y:"LineString"===d?r[l]=y:"Polygon"===d&&(i[l]=y)}return t.point=n,t.lineString=r,t.polygon=i,t}},{key:"analysis",value:function(e,t){this.geoJsonLayersDataModel.setCurrentLayerDataModel(e.analysisLayers),this.worker=new Worker(this.workerUrl);var n=this.geoJsonLayersDataModel.currentLayerDataModel.layer.toGeoJSON();if("isolines"===e.analysisMethod){for(var r=e.analysisFieldsValue.split(","),i=n,o=0;o<r.length;o++)r[o]=parseFloat(r[o]);var a=this,s={pointGrid:i,analysisMethod:e.analysisMethod,breaks:r,zProperty:e.analysisFields,analysisCellSize:e.analysisCellSize,options:{gridType:"point",property:e.analysisFields,weight:Number(e.analysisBreaks)}};this.worker.postMessage(s),this.worker.onmessage=function(n){if(0===n.data.features.length)a.fire("analysisfailed");else{a.fire("analysissucceeded",{data:n.data});var r=BM.a.geoJSON(n.data,{style:{color:"#1060C2",weight:3},onEachFeature:function(e,t){e.properties&&t.bindPopup(new hM(e.properties).getElement()),t.on({mouseover:function(){t.setStyle({color:"#ffffff",weight:5})},mouseout:function(){t.setStyle({color:"#1060C2",weight:3})},click:function(){t.setStyle({color:"#ffffff",weight:5})}})}}).addTo(t);a.turfLayers.push(r),a.fire("layerloaded",{layer:r,name:e.resultLayersName}),a.worker.terminate()}}}else if("buffer"===e.analysisMethod){var l=this,u={analysisMethod:"buffer",radius:e.radius,unit:e.unit,isSave:e.isSaveStatus,isUnion:e.isUnion,geoJson:n};this.worker.postMessage(u),this.worker.onmessage=function(n){var r=BM.a.geoJSON(n.data,{style:{color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5},onEachFeature:function(e,t){e.properties&&t.bindPopup(new hM(e.properties).getElement()),t.on({mouseover:function(){t.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:5})},mouseout:function(){t.setStyle({color:"#ffffff",fillColor:"#1060C2",fillOpacity:.5,weight:1.5})},click:function(){t.setStyle({color:"#ffffff",fillColor:"rgb(46,40,79)",fillOpacity:.5,weight:2})}})}}).addTo(t);l.turfLayers.push(r),l.fire("layerloaded",{layer:r,name:e.resultLayersName}),l.worker.terminate()}}}},{key:"clearLayers",value:function(){for(var e in this.turfLayers)this.turfLayers[e].clearLayers();this.fire("layersremoved",{layers:this.turfLayers})}},{key:"cancelAnalysis",value:function(){this.worker.terminate()}}])&&cD(n.prototype,r),i&&cD(n,i),t}();BM.a.supermap.components.clientComputationViewModel=function(e){return new yD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var dD=JI.extend({initialize:function(e,t){if(!e)throw new Error("workerUrl is required");this.workerUrl=e,JI.prototype.initialize.apply(this,[t])},onAdd:function(e){return this.map=e,JI.prototype.onAdd.apply(this,[e])},addLayer:function(e){this.layers=this.layers||[],this.layers.push(e);var t=this.viewModel.getLayersData(this.layers);this.fillDataToView(t)},fillDataToView:function(e){if(e){this.fillData=e;var t={};switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":case"buffer":t=e.point}if("{}"!=JSON.stringify(t)){var n=[];for(var r in t)n.push(r);var i=document.getElementById("layersSelect"),o=document.getElementById("layerSelectName");i.innerHTML="",o.title=n[0],o.innerHTML=n[0],this._createOptions(i,n),this.layerSelectObj.optionClickEvent(i,o,this.layersSelectOnchange);var a=t[o.title],s=a.fields,l=a.fieldsValue;this.currentData=a,this.currentFillData=t;var u=document.getElementById("fieldsSelect");u.innerHTML="";var c=document.getElementById("fieldsSelectName");c.innerHTML=s[0],c.title=s[0],this._createOptions(u,s),this.fieldsSelectObj.optionClickEvent(u,c,this.fieldsSelectOnchange);var f=c.title,h=document.getElementById("getValueTextArea");h.value=l[f].toString().replace(/,/g,",\r\n"),h.setAttribute("data-value",l[f]);var p=document.getElementById("resultLayersName");switch(document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":p.value=Ck.i18n("text_label_isolines")+o.title;break;case"buffer":p.value=Ck.i18n("text_label_buffer")+o.title}}}},_initView:function(){var e=this;this.workerUrl&&(this.viewModel=new yD(this.workerUrl));var t=new zk({title:Ck.i18n("title_clientComputing")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";var n=[{title:Ck.i18n("text_isoline"),dataValue:"isolines",remark:Ck.i18n("text_extractDiscreteValue"),icon:{className:"component-analyst-isoline-img"}},{title:Ck.i18n("text_buffer"),dataValue:"buffer",remark:Ck.i18n("text_specifyTheDistance"),icon:{className:"component-analyst-buffer-img"}}],r=t.children[1];r.classList.add("component-content--scroll"),r.classList.add("component-content--analysis");var i=new eM(n).getElement();r.appendChild(i);var o=i.children[0].children[0],a=i.children[0].children[2].children[0];o.children[0].id="dropDownTop";var s=BM.a.DomUtil.create("div","component-analysis__container",r),l=BM.a.DomUtil.create("div","component-analysis__container__analysisLayer",s),u=BM.a.DomUtil.create("div","component-analysis__selecttool",l);u.id="layerSelectControl";var c={optionsArr:[""],labelName:Ck.i18n("text_label_analysisLayer")},f=new Qk(c),h=f.getElement();this.layerSelectObj=f,u.appendChild(h);var p=h.children[1].children[0];p.id="layerSelectName",h.children[1].children[2].children[0].children[0].id="layersSelect";var y=BM.a.DomUtil.create("div","component-analysis__container__analysistype",s),d=BM.a.DomUtil.create("div","component-clientcomputation__isoline",y),m={optionsArr:[""],labelName:Ck.i18n("text_label_extractField"),optionsClickCb:this.fieldsSelectOnchange},v=BM.a.DomUtil.create("div","component-analysis__selecttool",d),g=new Qk(m),b=g.getElement();this.fieldsSelectObj=g;var S=b.children[1].children[0];S.id="fieldsSelectName";var _=b.children[1].children[2].children[0].children[0];_.id="fieldsSelect",v.appendChild(b);var w=BM.a.DomUtil.create("div","component-analysis__container",d);BM.a.DomUtil.create("span","component-textarea__name",w).innerHTML=Ck.i18n("text_label_extractedValue");var O=BM.a.DomUtil.create("div","component-textarea",w);O.id="getValueText";var x=BM.a.DomUtil.create("div","",O),C=BM.a.DomUtil.create("div","component-scrollarea-content",x);C.setAttribute("tabindex","1");var T=BM.a.DomUtil.create("textarea","component-textarea__content",C);T.id="getValueTextArea",T.setAttribute("rows","20");var P=BM.a.DomUtil.create("div","",d);BM.a.DomUtil.create("span","",P).innerHTML=Ck.i18n("text_label_distanceAttenuation");var E=BM.a.DomUtil.create("input","",P);E.value="3";var k=BM.a.DomUtil.create("div","",d);BM.a.DomUtil.create("span","",k).innerHTML=Ck.i18n("text_label_gridSize");var M=BM.a.DomUtil.create("input","",k);M.value="30";var A=BM.a.DomUtil.create("div","component-clientcomputation__buffer hidden",y),L=BM.a.DomUtil.create("div","component-clientcomputation__buffer--radius",A);BM.a.DomUtil.create("span","",L).innerHTML=Ck.i18n("text_label_bufferRadius");var j=BM.a.DomUtil.create("div","",L),N=BM.a.DomUtil.create("input","buffer-radius-input",j);N.id="bufferRadiusInput",N.value="10",N.setAttribute("placeholder",Ck.i18n("text_label_defaultkilometers"));var R=BM.a.DomUtil.create("div","component-clientcomputation__buffer--unit",j);R.id="bufferUnit";var I={optionsArr:[Ck.i18n("text_option_kilometer")],labelName:Ck.i18n("text_label_unit")},D=new Qk(I).getElement(),F=D.children[1].children[0];F.id="bufferUnitSelectName",D.children[1].children[2].children[0].children[0].id="bufferUnitSelect",D.children[0].style.display="none",R.appendChild(D);var B=BM.a.DomUtil.create("div","",L),U=BM.a.DomUtil.create("div","component-clientcomputation__buffer--issaveattrs",B);U.id="saveAttrsContainer";var G=BM.a.DomUtil.create("div","checkbox checkbox-fault",U);G.id="saveAttrsCheckbox";var z=BM.a.DomUtil.create("div","lable",U);z.id="saveAttrsLabel",z.innerHTML=Ck.i18n("text_retainOriginal");var V=BM.a.DomUtil.create("div","component-clientcomputation__buffer--isunion",B);V.id="isUnionContainer";var H=BM.a.DomUtil.create("div","checkbox checkbox-fault",V);H.id="isUnionCheckbox";var J=BM.a.DomUtil.create("div","lable",V);J.innerHTML=Ck.i18n("text_mergeBuffer"),J.id="isUnionLabel";var q=BM.a.DomUtil.create("div","component-analysis__container__resultLayersName",s);BM.a.DomUtil.create("span","",q).innerHTML=Ck.i18n("text_label_resultLayerName");var W=BM.a.DomUtil.create("input","",q);W.id="resultLayersName";var Q=BM.a.DomUtil.create("div","component-analysis__container__analysisbtn",s),Y=BM.a.DomUtil.create("div","component-analysis__analysisbtn",Q),X=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",Y);X.innerHTML=Ck.i18n("btn_analyze");var K=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",Y),Z=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",K),$=BM.a.DomUtil.create("div","component-analysis__svg-container",Z);$.id="analyse_background",$.innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',BM.a.DomUtil.create("span","",Z).innerHTML=Ck.i18n("btn_analyzing");var ee=BM.a.DomUtil.create("button","component-analysis__analysisbtn--cancel",K);ee.innerHTML=Ck.i18n("btn_cancelAnalysis");var te=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",Y);te.innerHTML=Ck.i18n("btn_emptyTheAnalysisLayer");for(var ne=function(t){a.children[t].onclick=function(){o.innerHTML=a.children[t].outerHTML,o.children[0].id="dropDownTop";var n=document.getElementById("layersSelect"),i=document.getElementById("layerSelectName"),s=a.children[t].getAttribute("data-value"),l={};switch(s){case"buffer":d.classList.add("hidden"),A.classList.remove("hidden"),r.style.height="422px",W.value=Ck.i18n("text_label_buffer")+i.title,l=e.fillData.point;break;case"isolines":d.classList.remove("hidden"),A.classList.add("hidden"),r.style.height="712px",W.value=Ck.i18n("text_label_isolines")+i.title,l=e.fillData.point}if(e.currentFillData!==l){if(n.innerHTML="","{}"==JSON.stringify(l))return W.value="",i.title="",void(i.innerHTML="");var u=[];for(var c in l)u.push(c);i.title=u[0],i.innerHTML=u[0],e._createOptions(n,u),e.layerSelectObj.optionClickEvent(n,i,e.layersSelectOnchange),"buffer"===s?W.value=Ck.i18n("text_label_buffer")+u[0]:"isolines"===s&&(W.value=Ck.i18n("text_label_isolines")+u[0]),e.currentData=l[i.title],e.currentFillData=l}}},re=0;re<a.children.length;re++)ne(re);this.fieldsSelectOnchange=function(e){if(this.currentData){var t=this.currentData,n=e.title;T.value=t.fieldsValue[n].toString().replace(/,/g,",\r\n"),T.setAttribute("data-value",t.fieldsValue[n])}}.bind(this),this.layersSelectOnchange=function(e){if(this.currentData){var t=e.title,n=this.currentFillData[t];this.currentData=n,_.innerHTML="",this._createOptions(_,n.fields);var r=document.getElementById("fieldsSelectName"),i=n.fields[0];r.title=i,r.innerHTML=i;var o=i;this.fieldsSelectObj.optionClickEvent(_,r,this.fieldsSelectOnchange),T.value=n.fieldsValue[o].toString().replace(/,/g,",\r\n"),T.setAttribute("data-value",n.fieldsValue[o]);var a=document.getElementById("dropDownTop").getAttribute("data-value");switch(a){case"buffer":W.value=Ck.i18n("text_label_buffer")+t;break;case"isolines":W.value=Ck.i18n("text_label_isolines")+t}}}.bind(this);var ie=!0;z.classList.add("selected"),G.classList.add("checkbox-active"),U.onclick=function(){ie?(G.classList.add("checkbox-fault"),G.classList.remove("checkbox-active"),z.classList.remove("selected"),ie=!1):(G.classList.add("checkbox-active"),G.classList.remove("checkbox-fault"),z.classList.add("selected"),ie=!0,oe&&(H.classList.add("checkbox-fault"),H.classList.remove("checkbox-active"),oe=!1))};var oe=!1;return V.onclick=function(){oe?(H.classList.add("checkbox-fault"),H.classList.remove("checkbox-active"),J.classList.remove("selected"),oe=!1):(H.classList.add("checkbox-active"),H.classList.remove("checkbox-fault"),J.classList.add("selected"),oe=!0,ie&&(G.classList.add("checkbox-fault"),G.classList.remove("checkbox-active"),ie=!1))},this.messageBox=new wk,X.onclick=function(){var t;switch(K.style.display="block",X.style.display="none",document.getElementById("dropDownTop").getAttribute("data-value")){case"isolines":t=function(){var e=document.getElementById("dropDownTop").getAttribute("data-value"),t=document.getElementById("resultLayersName").value,n=p.title,r=S.title,i=T.value.replace(/[\r\n]/g,"").split(",").toString(),o=E.value,a=M.value;return{analysisMethod:e,analysisLayers:n,analysisFields:r,analysisFieldsValue:i,analysisBreaks:o,analysisCellSize:a,resultLayersName:t}}();break;case"buffer":t=function(){var e=document.getElementById("dropDownTop"),t=document.getElementById("resultLayersName").value,n=p.title,r=e.getAttribute("data-value"),i=N.value,o=F.title;return{analysisMethod:r,analysisLayers:n,radius:i,unit:o,resultLayersName:t,isSaveStatus:ie,isUnion:oe}}()}e.viewModel.analysis(t,e.map),e.viewModel.on("layerloaded",function(t){K.style.display="none",X.style.display="block",e._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),e.viewModel.on("analysisfailed",function(){K.style.display="none",X.style.display="block",e.messageBox.showView(Ck.i18n("msg_resultIsEmpty"),"failure"),e._event.fire("analysisfailed")})},ee.onclick=function(){K.style.display="none",X.style.display="block",e.viewModel.cancelAnalysis()},te.onclick=function(){e.viewModel.on("layersremoved",function(t){e._event.fire("layersremoved",{layers:t.layers})}),e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions:function(e,t){for(var n in t){var r=document.createElement("div"),i=t[n];r.className="component-selecttool__option",r.title=i,r.innerHTML=i,r.setAttribute("data-value",i),e.appendChild(r)}}}),mD=function(e){return new dD(e)};BM.a.supermap.components.clientComputation=mD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var vD=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.layerName=t.layerName,this.layer=t.layer,this.fields=t.fields||null},gD=function(e){return new vD(e)};function bD(e){return(bD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function SD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _D(e,t){return!t||"object"!==bD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wD(e){return(wD=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OD(e,t){return(OD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.clientComputationLayer=gD;var xD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),_D(this,wD(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.processingUrl=e}},{key:"getDatasetsName",value:function(){var e=this.processingUrl;this.dataset=[],this.dataset.datasetNames=[],this.dataset.childUrl=[];var t="http://"+e.split("/")[2],n=t+"/iserver/services/datacatalog/rest/datacatalog/sharefile.json",r=t+"/iserver/services/datacatalog/rest/datacatalog/relationship/datasets.json",i=this;nr.get(n).then(function(e){return e.json()}).then(function(e){i.dataset.datasetNames=i.dataset.datasetNames.concat(e.datasetNames),i.dataset.childUrl=i.dataset.childUrl.concat(e.childUriList);var t=i;nr.get(r).then(function(e){return e.json()}).then(function(e){t.dataset.datasetNames=t.dataset.datasetNames.concat(e.datasetNames),t.dataset.childUrl=t.dataset.childUrl.concat(e.childUriList);var n=[];for(var r in t.dataset.datasetNames)n[t.dataset.datasetNames[r]]=t.dataset.childUrl[r];t.fire("datasetsloaded",{result:{dataset:t.dataset,datasetHash:n}})})})}},{key:"getDatasetInfo",value:function(e){var t,n=this;nr.get(e).then(function(e){return e.json()}).then(function(e){var r=e.datasetInfo;"LINE"===r.datasetType||"LINE"===r.type?t="LINE":"POINT"===r.datasetType||"POINT"===r.type||"CSV"===r.type?t="POINT":"REGION"!==r.datasetType&&"REGION"!==r.type||(t="REGION");var i=[],o=r.fieldInfos||r.fieldInfo||null;if(o){for(var a in o)i.push(o[a].name);n.fire("datasetinfoloaded",{result:{type:t,fields:i}})}else{var s=e.childUriList[0].replace("//fields","/fields");nr.get(s).then(function(e){return e.json()}).then(function(e){var r=e.fieldNames,i=[];for(var o in r)i.push(r[o]);n.fire("datasetinfoloaded",{result:{type:t,fields:i}})})}})}}])&&SD(n.prototype,r),i&&SD(n,i),t}();function CD(e){return(CD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TD(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function PD(e,t){return!t||"object"!==CD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ED(e){return(ED=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kD(e,t){return(kD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.DistributedAnalysisModel=xD;var MD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),PD(this,ED(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.processingUrl=e}},{key:"getDatasetsName",value:function(){var e=this.processingUrl;this.resultLayers=[],this.datasetNames=[],this.distributedAnalysisModel=new xD(e),this.distributedAnalysisModel.getDatasetsName();var t=this;this.distributedAnalysisModel.on("datasetsloaded",function(e){t.fire("datasetsloaded",{result:e.result})})}},{key:"getDatasetInfo",value:function(e){this.distributedAnalysisModel.getDatasetInfo(e);var t=this;this.distributedAnalysisModel.on("datasetinfoloaded",function(e){var n=e.result.type,r=e.result.fields;t.fire("datasetinfoloaded",{result:{type:n,fields:r}})})}},{key:"analysis",value:function(e,t){var n=new RI(this.processingUrl);if(e.analysisParam instanceof Gm){var r=e.analysisParam,i=this;n.addKernelDensityJob(r,function(n){n.error?i.fire("analysisfailed",{error:n.error}):n.result.setting.serviceInfo.targetServiceInfos.map(function(n){return"RESTMAP"===n.serviceType&&nr.get(n.serviceAddress+"/maps").then(function(e){return e.json()}).then(function(n){var r=n[0].path;i.fire("analysissucceed",{result:n});var o=BM.a.supermap.tiledMapLayer(r,{noWrap:!0,transparent:!0});i.resultLayers.push(o),o.addTo(t);var a=new Date,s=e.resultLayerName||a.getTime();i.fire("layerloaded",{layer:o,name:s})}),n})})}}},{key:"clearLayers",value:function(){for(var e in this.resultLayers)this.resultLayers[e].remove();this.fire("layersremoved",{layers:this.resultLayers}),this.resultLayers=[]}}])&&TD(n.prototype,r),i&&TD(n,i),t}();BM.a.supermap.components.distributedAnalysisViewModel=function(e){return new MD(e)};
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var AD=JI.extend({initialize:function(e,t){JI.prototype.initialize.apply(this,[t]),this.viewModel=new MD(e)},onAdd:function(e){return this._fillDataToView(),JI.prototype.onAdd.apply(this,[e])},_fillDataToView:function(){var e=this;this.viewModel.on("datasetsloaded",function(t){var n=t.result.dataset.datasetNames;e.datasetSelect.innerHTML="",e._createOptions(e.datasetSelect,n),e.datasetSelectObj.optionClickEvent(e.datasetSelect,e.datasetSelectName,e.datasetSelectOnchange),e.dataHash=t.result.datasetHash}),this.viewModel.getDatasetsName()},_initView:function(){var e=this,t=new zk({title:Ck.i18n("title_distributedAnalysis")}).getElement();t.classList.add("component-analysis"),t.children[0].style.fontSize="12px";var n=BM.a.DomUtil.create("div","component-content component-content--scroll component-content--analysis",t),r=[{title:Ck.i18n("text_densityAnalysis"),dataValue:"density",remark:Ck.i18n("text_CalculateTheValuePerUnitArea"),icon:{className:"component-analyst-density-img"}}],i=new eM(r).getElement();n.appendChild(i);var o=i.children[0].children[0].children[0],a=BM.a.DomUtil.create("div","component-analysis__container",n),s=BM.a.DomUtil.create("div","analysistype",a),l=BM.a.DomUtil.create("div","component-analysis__container__analysisLayer",s),u=BM.a.DomUtil.create("div","component-analysis__selecttool",l),c={optionsArr:[Ck.i18n("text_option_selectDataset")],labelName:Ck.i18n("text_label_dataset"),optionsClickCb:oe.bind(this)},f=new Qk(c),h=f.getElement();this.datasetSelectObj=f,u.appendChild(h);var p=h.children[1].children[0];this.datasetSelectName=p;var y=h.children[1].children[2].children[0].children[0];y.children[0].style.display="none",this.datasetSelect=y;var d=BM.a.DomUtil.create("div","component-analysis__idw",l),m=[{optionsArr:[Ck.i18n("text_option_simplePointDensityAnalysis"),Ck.i18n("text_option_nuclearDensityAnalysis")],labelName:Ck.i18n("text_label_analyticalMethod")},{optionsArr:[Ck.i18n("text_option_quadrilateral"),Ck.i18n("text_option_hexagon")],labelName:Ck.i18n("text_label_meshType")}],v=BM.a.DomUtil.create("div","component-analysis__idw__selecttool",d);for(var g in m){var b=new Qk(m[g]).getElement();v.appendChild(b)}var S={optionsArr:[Ck.i18n("text_option_notSet")],labelName:Ck.i18n("text_label_weightField")},_=new Qk(S),w=_.getElement();v.appendChild(w),this.weightFieldsSelectObj=_;var O=v.children[0].children[1].children[0];O.setAttribute("data-value","0");var x=v.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",x.children);var C=v.children[1].children[1].children[0];C.setAttribute("data-value","0");var T=v.children[1].children[1].children[2].children[0].children[0];this._setEleAtribute(["0","1"],"data-value",T.children);var P=v.children[2].children[1].children[0],E=v.children[2].children[1].children[2].children[0].children[0],k=[{spanName:Ck.i18n("text_label_queryRange"),value:""}];for(var M in k)this._creatInputBox(k[M],v);var A=v.children[3].children[1];A.setAttribute("placeholder",Ck.i18n("text_label_queryRangeTips")),A.title=Ck.i18n("text_label_queryRangeTips");var L={labelName:Ck.i18n("text_label_gridSizeInMeters"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},j=this._creatUnitSelectBox(L,v),N=j.children[1].children[0];N.value="1000";var R=j.children[1].children[1].children[0].children[0].children[0],I={labelName:Ck.i18n("text_label_searchRadius"),selectOptions:{optionsArr:["Meter","Kilometer","Yard","Foot","Mile"]}},D=this._creatUnitSelectBox(I,v),F=D.children[1].children[0];F.value="300";var B=D.children[1].children[1].children[0].children[0].children[0],U={labelName:Ck.i18n("text_label_areaUnit"),optionsArr:["SquareMile","SquareMeter","Hectare","Acre","SquareFoot","SquareYard"]},G=new Qk(U).getElement();v.appendChild(G);var z=G.children[1].children[0],V=BM.a.DomUtil.create("div","range-content",s),H={optionsArr:[Ck.i18n("text_option_notSet"),Ck.i18n("text_option_equidistantSegmentation"),Ck.i18n("text_option_logarithm"),Ck.i18n("text_option_equalCountingSegment"),Ck.i18n("text_option_squareRootSegmentation")],labelName:Ck.i18n("text_label_thematicMapSegmentationMode"),optionsClickCb:function(e){"NOTSET"!==e.getAttribute("data-value")?(W.classList.remove("hidden"),Q.classList.remove("hidden")):(W.classList.add("hidden"),Q.classList.add("hidden"))}};V.appendChild(new Qk(H).getElement());var J=V.children[0].children[1].children[0];J.setAttribute("data-value","NOTSET");var q=V.children[0].children[1].children[2].children[0].children[0];this._setEleAtribute(["NOTSET","EQUALINTERVAL","LOGARITHM","QUANTILE","SQUAREROOT"],"data-value",q.children);var W=this._creatInputBox({spanName:Ck.i18n("text_label_thematicMapSegmentationParameters"),value:"20"},V);W.classList.add("hidden");var Q=new Qk({optionsArr:[Ck.i18n("text_option_greenOrangePurpleGradient"),Ck.i18n("text_option_greenOrangeRedGradient"),Ck.i18n("text_option_rainbowGradient"),Ck.i18n("text_option_spectralGradient"),Ck.i18n("text_option_terrainGradient")],labelName:Ck.i18n("text_label_thematicMapColorGradientMode")}).getElement();V.appendChild(Q),Q.classList.add("hidden");var Y=Q.children[1].children[2].children[0].children[0],X=Q.children[1].children[0];X.setAttribute("data-value","GREENORANGEVIOLET");this._setEleAtribute(["GREENORANGEVIOLET","GREENORANGERED","RAINBOW","SPECTRUM","TERRAIN"],"data-value",Y.children);var K=BM.a.DomUtil.create("div","",s);BM.a.DomUtil.create("span","",K).innerHTML=Ck.i18n("text_label_resultLayerName");var Z=BM.a.DomUtil.create("input","component-distributeanalysis__input",K),$=BM.a.DomUtil.create("div","component-analysis__container__analysisbtn",a),ee=BM.a.DomUtil.create("div","component-analysis__analysisbtn",$),te=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",ee);te.innerHTML=Ck.i18n("btn_analyze");var ne=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",ee),re=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysising",ne);re.style.width="200px",BM.a.DomUtil.create("div","component-analysis__svg-container",re).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n            <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n            <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n            <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n            <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n        </svg>',BM.a.DomUtil.create("span","",re).innerHTML=Ck.i18n("btn_analyzing");var ie=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",ee);function oe(e){if(this.messageBox.closeView(),this.dataHash){E.innerHTML="";var t=this.dataHash[e.title],n=this;this.viewModel.on("datasetinfoloaded",function(e){P.title=Ck.i18n("text_option_notSet"),P.innerHTML=Ck.i18n("text_option_notSet"),E.innerHTML="";var t=o.getAttribute("data-value"),r=e.result.type,i=e.result.fields;"density"===t&&("REGION"===r||"LINE"===r?n.messageBox.showView(Ck.i18n("msg_datasetOrMethodUnsupport"),"failure"):(n.messageBox.closeView(),n._createOptions(E,i),n.weightFieldsSelectObj.optionClickEvent(E,P)))}),this.viewModel.getDatasetInfo(t)}}return ie.id="deleteLayersBtn",ie.innerHTML=Ck.i18n("btn_emptyTheAnalysisLayer"),this.messageBox=new wk,this.datasetSelectOnchange=oe.bind(this),te.onclick=function(){e.messageBox.closeView();var t=function(){var e,t,n=o.getAttribute("data-value"),r=O.getAttribute("data-value"),i=C.getAttribute("data-value"),a=A.value,s=R.title,l=B.title,u=z.title,c=X.getAttribute("data-value"),f=J.getAttribute("data-value"),h=new Date,y=Z.value||h.getTime();e="NOTSET"===f?"":{rangeMode:f,rangeCount:W.value,colorGradientType:c};"density"===n&&(t=new Gm({datasetName:p.title,method:r,meshType:i,resolution:N.value,fields:P.title,radius:F.value,meshSizeUnit:s,radiusUnit:l,areaUnit:u,query:a,mappingParameters:new Bo({rangeMode:e.rangeMode,rangeCount:e.rangeCount,colorGradientType:e.colorGradientType})}));return{analysisParam:t,resultLayerName:y}}();p.title===Ck.i18n("text_option_selectDataset")?e.messageBox.showView(Ck.i18n("msg_selectDataset"),"failure"):P.title===Ck.i18n("text_option_notSet")?e.messageBox.showView(Ck.i18n("msg_setTheWeightField"),"failure"):(e.messageBox.closeView(),ne.style.display="block",te.style.display="none",e.viewModel.on("layerloaded",function(t){ne.style.display="none",te.style.display="block",e._event.fire("analysissucceeded",{layer:t.layer,name:t.name})}),e.viewModel.on("analysisfailed",function(t){e.messageBox.showView(Ck.i18n("msg_theFieldNotSupportAnalysis"),"failure"),ne.style.display="none",te.style.display="block",e._event.fire("analysisfailed",{error:t.error})}),e.viewModel.analysis(t,e.map))},ie.onclick=function(){e.viewModel.on("layersremoved",function(t){e._event.fire("layersremoved",{layers:t.layers})}),e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_createOptions:function(e,t){for(var n in t){var r=document.createElement("div");r.className="component-selecttool__option",r.title=t[n],r.innerHTML=t[n],r.setAttribute("data-value",t[n]),e.appendChild(r)}},_creatInputBox:function(e,t){var n=BM.a.DomUtil.create("div","",t);BM.a.DomUtil.create("span","",n).innerHTML=e.spanName;var r=BM.a.DomUtil.create("input","",n);return r.value=e.value,r.className="component-distributeanalysis__input",n},_creatUnitSelectBox:function(e,t){var n=BM.a.DomUtil.create("div","component-clientcomputation__buffer--radius",t);BM.a.DomUtil.create("span","",n).innerHTML=e.labelName;var r=BM.a.DomUtil.create("div","",n);BM.a.DomUtil.create("input","buffer-radius-input",r);var i=BM.a.DomUtil.create("div","component-clientcomputation__buffer--unit",r),o=e.selectOptions,a=new Qk(o).getElement();return i.appendChild(a),n},_setEleAtribute:function(e,t,n){for(var r=0;r<n.length;r++)n[r].setAttribute(t,e[r])}}),LD=function(e){return new AD(e)};function jD(e){return(jD="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ND(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function RD(e,t){return!t||"object"!==jD(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ID(e){return(ID=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function DD(e,t){return(DD=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/BM.a.supermap.components.distributedAnalysis=LD;var FD=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),RD(this,ID(t).apply(this,arguments))}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&DD(e,t)}(t,BM.a.Evented),n=t,(r=[{key:"initialize",value:function(e){this.dataserviceUrl=e,this.resultLayers=[]}},{key:"getFeatures",value:function(e,t){var n=this.dataserviceUrl,r=this,i=BM.a.supermap.featureService(n);e instanceof $h?i.getFeaturesByIDs(e,function(e){r._getQureyResult(e,t)}):e instanceof pp?i.getFeaturesBySQL(e,function(e){r._getQureyResult(e,t)}):e instanceof ih?i.getFeaturesByBounds(e,function(e){r._getQureyResult(e,t)}):e instanceof Ch?i.getFeaturesByBuffer(e,function(e){r._getQureyResult(e,t)}):e instanceof Bh&&i.getFeaturesByGeometry(e,function(e){r._getQureyResult(e,t)})}},{key:"_getQureyResult",value:function(e,t){if(e.error)this.fire("getfeaturesfailed",{error:e.error});else{var n=BM.a.geoJSON(e.result.features,{onEachFeature:function(e,t){t.bindPopup("ID: "+e.properties.SMID)},pointToLayer:function(e,t){return BM.a.circleMarker(t,{radius:6})}}).addTo(t);this.resultLayers.push(n),this.fire("getfeaturessucceeded",{result:e.result.features})}}},{key:"clearLayers",value:function(){for(var e in this.resultLayers)this.resultLayers[e].remove();this.resultLayers=[]}}])&&ND(n.prototype,r),i&&ND(n,i),t}(),BD=function e(t){return new e(t)};BM.a.supermap.components.dataServiceQueryViewModel=BD;
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/
var UD=JI.extend({initialize:function(e,t,n){if(JI.prototype.initialize.apply(this,[n]),this.dataServiceUrl=e,!t||0===t.length)throw new Error("Please configure the dataset of the query！");t instanceof Array?this.dataSetNames=t:this.dataSetNames=t.split(" ")},onAdd:function(e){return JI.prototype.onAdd.apply(this,[e])},onRemove:function(){this.map.off("pm:create")},setDataSetNames:function(e){e instanceof Array?this.dataSetNames=e:this.dataSetNames=e.split(" ")},setGetFeatureMode:function(e){this.getFeatureMode=e,this._getFeatureModeOnchange(this.getFeatureMode)},setDataServiceUrl:function(e){this.dataServiceUrl=e,this.viewModel=new FD(this.dataServiceUrl)},_getFeatureModeOnchange:function(e){var t;t=e&&"{}"!=JSON.stringify(e)?e:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var n=document.getElementById("queryModelControl");n.innerHTML="",this.creatQueryModeSelect(t,n)},_initView:function(){var e=this;this.viewModel=new FD(this.dataServiceUrl),this.messageBox=new wk;var t=new zk({title:Ck.i18n("title_dataServiceQuery")}).getElement();t.classList.add("component-servicequery__container"),t.children[0].classList.add("component-servicequery__title");var n=t.children[1];n.classList.add("component-content--scroll"),n.classList.add("data-services");var r,i=BM.a.DomUtil.create("div","component-analysis__container",n),o=BM.a.DomUtil.create("div","component-servicequery__analysistype",i),a=BM.a.DomUtil.create("div","component-analysis__container__analysisLayer",o),s=this.options.getFeatureMode;r=s&&"{}"!=JSON.stringify(s)?s:["ID","SQL","BOUNDS","BUFFER","SPATIAL"];var l=BM.a.DomUtil.create("div","",a);l.id="queryModelContainer";var u=BM.a.DomUtil.create("div","component-analysis__selecttool",l);u.id="queryModelControl",this.creatQueryModeSelect=function(e,t){var n;if(e instanceof Array&&e.length>1){var r={optionsArr:e,labelName:Ck.i18n("text_label_queryMode"),optionsClickCb:this.queryModeltOnchange},i=new Qk(r).getElement();t.appendChild(i),n=i.children[1].children[0],i.children[1].classList.add("dataservice-select");var o=i.children[1];o.classList.add("dataservice-select"),o.classList.add("querymodel-select")}else{var a=BM.a.DomUtil.create("span","",l);a.innerHTML=Ck.i18n("text_label_queryMode"),n=BM.a.DomUtil.create("div","component-servicequery__querymode-selectname",l);var s=BM.a.DomUtil.create("span","",n);e instanceof Array?s.innerHTML=e[0]:s.innerHTML=e,n.title=s.innerHTML,this.queryModeltOnchange(n)}return n.id="queryModelSelectName",n}.bind(this),this.queryModeltOnchange=W.bind(this),this.creatQueryModeSelect(r,u);var c=BM.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container",a),f=BM.a.DomUtil.create("span","textarea-name",c);f.innerHTML=Ck.i18n("text_label_IDArrayOfFeatures");var h=BM.a.DomUtil.create("div","component-textarea component-textarea--dataservice",c);h.id="getfeaturesIdArr";var p=BM.a.DomUtil.create("div","scrollarea",h),y=BM.a.DomUtil.create("div","component-scrollarea-content",p);y.setAttribute("tabindex","1");var d=BM.a.DomUtil.create("textarea","component-textarea__content",y);d.value="[1,2,3]",d.id="getValueTextArea";var m=BM.a.DomUtil.create("div","component-servicequery__maxfeatures-container hidden",a),v={spanName:Ck.i18n("text_label_maxFeatures"),value:"1000"},g=this._creatInputBox(v,m).children[1];g.classList.add("max-features-input");var b=BM.a.DomUtil.create("div","component-servicequery__distance-container hidden",a),S={spanName:Ck.i18n("text_label_bufferDistance"),value:"10"},_=this._creatInputBox(S,b).children[1],w=BM.a.DomUtil.create("div","component-analysis__container component-textarea--dataservice__container hidden",a),O=BM.a.DomUtil.create("span","textarea-name",w),x=BM.a.DomUtil.create("div","",w),C=BM.a.DomUtil.create("div","component-servicequery__rangeicon-container",x);O.innerHTML=Ck.i18n("text_label_queryRange1");var T=BM.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-polygon-layer bounds",C),P=BM.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-line-layer hidden",C),E=BM.a.DomUtil.create("div","component-servicequery__rangeicon supermapol-icons-point-layer hidden",C),k=BM.a.DomUtil.create("div","component-textarea component-textarea--rangequery",x);k.id="getfeaturesIdArr";var M=BM.a.DomUtil.create("div","",k),A=BM.a.DomUtil.create("div","component-scrollarea-content",M);A.setAttribute("tabindex","1");var L=BM.a.DomUtil.create("textarea","component-textarea__content component-textarea--rangequery__content",A);L.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}';var j=BM.a.DomUtil.create("div","component-servicequery__spatialquerymode-container hidden",a),N={optionsArr:["CONTAIN","CROSS","DISJOINT","IDENTITY","INTERSECT","NONE","OVERLAP","TOUCH","WITHIN"],labelName:Ck.i18n("text_label_spatialQueryMode")},R=BM.a.DomUtil.create("div","component-analysis__selecttool",j),I=new Qk(N).getElement();I.children[1].classList.add("dataservice-select"),R.appendChild(I);var D=I.children[1].children[0];D.id="spatialQueryModeSelectName",I.children[1].children[2].classList.add("component-servicequery__spatialquerymode__selectcontent");var F=BM.a.DomUtil.create("div","component-analysis__container__analysisbtn",a),B=BM.a.DomUtil.create("div","component-analysis__analysisbtn",F),U=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis",B);U.innerHTML=Ck.i18n("btn_query");var G=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysing-container hidden",B),z=BM.a.DomUtil.create("div","component-analysis__analysisbtn--analysising component-servicequery__querybtn--querying",G);BM.a.DomUtil.create("div","component-analysis__svg-container",z).innerHTML='<svg class="component-analysis__svg-rotate" width="16px" height="16px" version="1.1" xmlns="http://www.w3.org/2000/svg">\n             <path id="ring" fill="#FFF" transform="translate(8,8)" d="M 0 0 v -8 A 8 8 0 1 1 -8.00 0 z"></path>\n             <circle cx="8" cy="8" r="6" fill="#38ADF5"></circle>\n             <rect class="svg-top" x="8" y="0" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n             <rect class="svg-left" x="0" y="8" rx="2" ry="2" width="2" height="2" style="fill: rgb(255, 255, 255); stroke-width: 0;"></rect>\n         </svg>',BM.a.DomUtil.create("span","",z).innerHTML=Ck.i18n("btn_querying");var V=BM.a.DomUtil.create("button","component-analysis__analysisbtn--analysis component-analysis__analysisbtn--deletelayers",B);V.innerHTML=Ck.i18n("btn_emptyTheRresultLayer"),W(r[0]);var H,J,q=this;function W(e){var t;switch(t=e.title?e.title:e,m.classList.add("hidden"),w.classList.add("hidden"),b.classList.add("hidden"),P.classList.add("hidden"),E.classList.add("hidden"),T.classList.remove("bounds"),j.classList.add("hidden"),f.innerHTML=Ck.i18n("text_label_featureFilter"),d.value="SMID<10","BUFFER"!==t&&"SPATIAL"!==t||(w.classList.remove("hidden"),O.innerHTML=Ck.i18n("text_label_geometricObject"),L.value='{"type":"Feature","properties":{},"geometry":{"type":"Point","coordinates":[84.90234375,40.25390625]}}',P.classList.remove("hidden"),E.classList.remove("hidden")),t){case"ID":f.innerHTML=Ck.i18n("text_label_IDArrayOfFeatures"),d.value="[1,2,3]";break;case"SQL":m.classList.remove("hidden");break;case"BOUNDS":w.classList.remove("hidden"),O.innerHTML=Ck.i18n("text_label_queryRange"),L.value='{"leftBottom":{"x":-5,"y":-5},"rightTop":{"x":5,"y":5}}',T.classList.add("bounds");break;case"BUFFER":b.classList.remove("hidden");break;case"SPATIAL":j.classList.remove("hidden")}}return U.onclick=function(){e.messageBox.closeView(),G.style.display="block",U.style.display="none";var t=function(){var e,t=q.dataSetNames,n=document.getElementById("queryModelSelectName").title,r=d.value;if("ID"===n){var i=d.value,o=i.substring(1,i.length-1).split(",");e=new $h({IDs:o,datasetNames:t})}else if("SQL"===n){var a=g.value;e=new pp({queryParameter:{attributeFilter:r},datasetNames:t,maxFeatures:a})}else if("BOUNDS"===n){if(!H){var s=JSON.parse(L.value);H=BM.a.bounds([s.leftBottom.x,s.leftBottom.y],[s.rightTop.x,s.rightTop.y])}e=new ih({attributeFilter:r,datasetNames:t,bounds:H})}else if("BUFFER"===n){var l=_.value,u=JSON.parse(L.value),c=J||u;e=new Ch({attributeFilter:r,datasetNames:t,bufferDistance:l,geometry:c})}else if("SPATIAL"===n){var f=D.title,h=JSON.parse(L.value),p=J||h;e=new Bh({attributeFilter:r,datasetNames:t,spatialQueryMode:f,geometry:p})}return e}();e.viewModel.on("getfeaturessucceeded",function(t){G.style.display="none",U.style.display="block",0===t.result.features.length&&e.messageBox.showView(Ck.i18n("msg_dataReturnedIsEmpty"),"success"),e._event.fire("getfeaturessucceeded",{result:t.result})}),e.viewModel.on("getfeaturesfailed",function(t){G.style.display="none",U.style.display="block",e.messageBox.showView(t.error.errorMsg,"failure"),e._event.fire("getfeaturesfailed",{error:t.error})}),e.viewModel.getFeatures(t,e.map)},T.onclick=function(t){var n=document.getElementById("queryModelSelectName").title;J&&J.remove(),"BOUNDS"===n?e.map.pm.enableDraw("Rectangle"):e.map.pm.enableDraw("Poly"),t.stopPropagation(),t.preventDefault()},P.onclick=function(t){J&&J.remove(),e.map.pm.enableDraw("Line"),t.stopPropagation(),t.preventDefault()},E.onclick=function(t){J&&J.remove(),e.map.pm.enableDraw("Marker"),t.stopPropagation(),t.preventDefault()},this.map.on("pm:create",function(t){if("Rectangle"===t.shape){var n=(J=t.layer).getBounds();H=BM.a.bounds([n._southWest.lng,n._southWest.lat],[n._northEast.lng,n._northEast.lat]);var r={leftBottom:{x:n._southWest.lng,y:n._southWest.lat},rightTop:{x:n._northEast.lng,y:n._northEast.lat}};L.value=JSON.stringify(r)}"Marker"===t.shape&&(J=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON()),e.map.pm.disableDraw("Marker")),"Line"===t.shape&&(J=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON())),"Poly"===t.shape&&(J=t.layer,L.value=JSON.stringify(t.layer.toGeoJSON()))}),V.onclick=function(){e.viewModel.clearLayers()},this._preventMapEvent(t,this.map),t},_creatInputBox:function(e,t){var n=BM.a.DomUtil.create("div","",t);return BM.a.DomUtil.create("span","",n).innerHTML=e.spanName,BM.a.DomUtil.create("input","",n).value=e.value,n}}),GD=function(e,t,n){return new UD(e,t,n)};BM.a.supermap.components.dataServiceQuery=GD,
/* Copyright© 2000 - 2020 SuperMap Software Co.Ltd. All rights reserved.
 * This program are made available under the terms of the Apache License, Version 2.0
 * which accompanies this distribution and is available at http://www.apache.org/licenses/LICENSE-2.0.html.*/n.d(t,"OpenFileView",function(){return QI}),n.d(t,"openFileView",function(){return YI}),n.d(t,"OpenFileViewModel",function(){return qI}),n.d(t,"openFileViewModel",function(){return WI}),n.d(t,"SearchView",function(){return nD}),n.d(t,"searchView",function(){return rD}),n.d(t,"DataFlowView",function(){return oD}),n.d(t,"dataFlowView",function(){return aD}),n.d(t,"clientComputationView",function(){return mD}),n.d(t,"ClientComputationView",function(){return dD}),n.d(t,"ClientComputationViewModel",function(){return yD}),n.d(t,"ClientComputationLayer",function(){return vD}),n.d(t,"clientComputationLayer",function(){return gD}),n.d(t,"GeoJSONLayerWithName",function(){return sD}),n.d(t,"geoJSONLayerWithName",function(){return lD}),n.d(t,"GeoJsonLayersDataModel",function(){return $I}),n.d(t,"GeoJsonLayerDataModel",function(){return eD}),n.d(t,"DistributedAnalysisView",function(){return AD}),n.d(t,"distributedAnalysisView",function(){return LD}),n.d(t,"DistributedAnalysisViewModel",function(){return MD}),n.d(t,"DataServiceQueryView",function(){return UD}),n.d(t,"dataServiceQueryView",function(){return GD}),n.d(t,"DataServiceQueryViewModel",function(){return FD}),n.d(t,"dataServiceQueryViewModel",function(){return BD}),n.d(t,"SuperMap",function(){return r}),n.d(t,"DataFormat",function(){return i}),n.d(t,"ServerType",function(){return o}),n.d(t,"GeometryType",function(){return a}),n.d(t,"QueryOption",function(){return s}),n.d(t,"JoinType",function(){return l}),n.d(t,"EngineType",function(){return y}),n.d(t,"MeasureMode",function(){return f}),n.d(t,"SpatialRelationType",function(){return c}),n.d(t,"DataReturnMode",function(){return I}),n.d(t,"Unit",function(){return h}),n.d(t,"BufferRadiusUnit",function(){return p}),n.d(t,"SpatialQueryMode",function(){return u}),n.d(t,"ThemeGraphTextFormat",function(){return d}),n.d(t,"ThemeGraphType",function(){return m}),n.d(t,"GraphAxesTextDisplayMode",function(){return v}),n.d(t,"GraduatedMode",function(){return g}),n.d(t,"RangeMode",function(){return b}),n.d(t,"ThemeType",function(){return S}),n.d(t,"ColorGradientType",function(){return _}),n.d(t,"TextAlignment",function(){return w}),n.d(t,"FillGradientMode",function(){return O}),n.d(t,"SideType",function(){return E}),n.d(t,"AlongLineDirection",function(){return x}),n.d(t,"LabelBackShape",function(){return C}),n.d(t,"LabelOverLengthMode",function(){return T}),n.d(t,"DirectionType",function(){return P}),n.d(t,"OverlayOperationType",function(){return L}),n.d(t,"SupplyCenterType",function(){return k}),n.d(t,"TurnType",function(){return M}),n.d(t,"BufferEndType",function(){return A}),n.d(t,"SmoothMethod",function(){return N}),n.d(t,"SurfaceAnalystMethod",function(){return R}),n.d(t,"ColorSpaceType",function(){return G}),n.d(t,"ChartType",function(){return K}),n.d(t,"EditType",function(){return D}),n.d(t,"TransferTactic",function(){return F}),n.d(t,"TransferPreference",function(){return B}),n.d(t,"GridType",function(){return U}),n.d(t,"ClientType",function(){return X}),n.d(t,"LayerType",function(){return z}),n.d(t,"UGCLayerType",function(){return V}),n.d(t,"StatisticMode",function(){return H}),n.d(t,"PixelFormat",function(){return J}),n.d(t,"SearchMode",function(){return q}),n.d(t,"SummaryType",function(){return ne}),n.d(t,"InterpolationAlgorithmType",function(){return W}),n.d(t,"VariogramMode",function(){return Q}),n.d(t,"Exponent",function(){return Y}),n.d(t,"ClipAnalystMode",function(){return Z}),n.d(t,"AnalystAreaUnit",function(){return $}),n.d(t,"AnalystSizeUnit",function(){return ee}),n.d(t,"StatisticAnalystMode",function(){return te}),n.d(t,"TopologyValidatorRule",function(){return re}),n.d(t,"OutputType",function(){return j}),n.d(t,"AggregationQueryBuilderType",function(){return oe}),n.d(t,"AggregationType",function(){return ie}),n.d(t,"GetFeatureMode",function(){return ae}),n.d(t,"TimeFlowControl",function(){return Yn}),n.d(t,"IManager",function(){return pr}),n.d(t,"IManagerServiceBase",function(){return ar}),n.d(t,"IManagerCreateNodeParam",function(){return sr}),n.d(t,"IPortal",function(){return fi}),n.d(t,"IPortalQueryParam",function(){return Kr}),n.d(t,"IPortalResource",function(){return ii}),n.d(t,"IPortalQueryResult",function(){return Zr}),n.d(t,"IPortalShareParam",function(){return oi}),n.d(t,"IPortalShareEntity",function(){return hi}),n.d(t,"IPortalMap",function(){return Ar}),n.d(t,"IPortalMapsQueryParam",function(){return dr}),n.d(t,"IPortalInsight",function(){return Dr}),n.d(t,"IPortalInsightsQueryParam",function(){return mr}),n.d(t,"IPortalScene",function(){return Vr}),n.d(t,"IPortalScenesQueryParam",function(){return vr}),n.d(t,"IPortalService",function(){return Cr}),n.d(t,"IPortalServiceBase",function(){return br}),n.d(t,"IPortalServicesQueryParam",function(){return yr}),n.d(t,"IPortalMapdashboard",function(){return Yr}),n.d(t,"IPortalMapdashboardsQueryParam",function(){return Xr}),n.d(t,"IPortalUser",function(){return gi}),n.d(t,"Online",function(){return qO}),n.d(t,"OnlineData",function(){return HO}),n.d(t,"OnlineQueryDatasParameter",function(){return QO}),n.d(t,"ServiceStatus",function(){return jO}),n.d(t,"DataItemType",function(){return NO}),n.d(t,"DataItemOrderBy",function(){return RO}),n.d(t,"FilterField",function(){return IO}),n.d(t,"OnlineServiceBase",function(){return FO}),n.d(t,"KeyServiceParameter",function(){return XO}),n.d(t,"SecurityManager",function(){return ir}),n.d(t,"ServerInfo",function(){return KO}),n.d(t,"TokenServiceParameter",function(){return $O}),n.d(t,"ElasticSearch",function(){return rx}),n.d(t,"FetchRequest",function(){return nr}),n.d(t,"ColorsPickerUtil",function(){return fx}),n.d(t,"ArrayStatistic",function(){return px}),n.d(t,"AreaSolarRadiationParameters",function(){return Di}),n.d(t,"AggregationParameter",function(){return Ri}),n.d(t,"AggQueryBuilderParameter",function(){return ji}),n.d(t,"BufferAnalystParameters",function(){return ro}),n.d(t,"BufferDistance",function(){return $i}),n.d(t,"BuffersAnalystJobsParameter",function(){return Go}),n.d(t,"BufferSetting",function(){return to}),n.d(t,"BurstPipelineAnalystParameters",function(){return ra}),n.d(t,"ChartQueryFilterParameter",function(){return Ta}),n.d(t,"ChartQueryParameters",function(){return Ea}),n.d(t,"ClipParameter",function(){return Ba}),n.d(t,"ColorDictionary",function(){return Ga}),n.d(t,"ComputeWeightMatrixParameters",function(){return Wa}),n.d(t,"DataReturnOption",function(){return oo}),n.d(t,"DatasetBufferAnalystParameters",function(){return _o}),n.d(t,"DatasetInfo",function(){return ls}),n.d(t,"DatasetOverlayAnalystParameters",function(){return vs}),n.d(t,"DatasetSurfaceAnalystParameters",function(){return Es}),n.d(t,"DatasetThiessenAnalystParameters",function(){return Ds}),n.d(t,"DatasourceConnectionInfo",function(){return uo}),n.d(t,"DensityKernelAnalystParameters",function(){return Bs}),n.d(t,"EditFeaturesParameters",function(){return Qs}),n.d(t,"FacilityAnalyst3DParameters",function(){return rl}),n.d(t,"FacilityAnalystSinks3DParameters",function(){return cl}),n.d(t,"FacilityAnalystSources3DParameters",function(){return Ol}),n.d(t,"FacilityAnalystStreamParameters",function(){return Ll}),n.d(t,"FacilityAnalystTracedown3DParameters",function(){return ql}),n.d(t,"FacilityAnalystTraceup3DParameters",function(){return au}),n.d(t,"FacilityAnalystUpstream3DParameters",function(){return Su}),n.d(t,"FieldParameters",function(){return Iu}),n.d(t,"FilterAggParameter",function(){return Nu}),n.d(t,"FieldStatisticsParameters",function(){return zu}),n.d(t,"FilterParameter",function(){return po}),n.d(t,"FindClosestFacilitiesParameters",function(){return Ku}),n.d(t,"FindLocationParameters",function(){return ac}),n.d(t,"FindMTSPPathsParameters",function(){return dc}),n.d(t,"FindPathParameters",function(){return xc}),n.d(t,"FindServiceAreasParameters",function(){return jc}),n.d(t,"FindTSPPathsParameters",function(){return zc}),n.d(t,"GenerateSpatialDataParameters",function(){return Kc}),n.d(t,"GeoBoundingBoxQueryBuilderParameter",function(){return hf}),n.d(t,"GeoCodingParameter",function(){return wi}),n.d(t,"GeoDecodingParameter",function(){return xi}),n.d(t,"GeoHashGridAggParameter",function(){return bf}),n.d(t,"GeometryBufferAnalystParameters",function(){return Eo}),n.d(t,"GeometryOverlayAnalystParameters",function(){return Tf}),n.d(t,"GeometrySurfaceAnalystParameters",function(){return jf}),n.d(t,"GeometryThiessenAnalystParameters",function(){return Uf}),n.d(t,"GeoRelationAnalystParameters",function(){return zf}),n.d(t,"GetFeaturesByBoundsParameters",function(){return ih}),n.d(t,"GetFeaturesByBufferParameters",function(){return Ch}),n.d(t,"GetFeaturesByGeometryParameters",function(){return Bh}),n.d(t,"GetFeaturesByIDsParameters",function(){return $h}),n.d(t,"GetFeaturesBySQLParameters",function(){return pp}),n.d(t,"GetGridCellInfosParameters",function(){return kp}),n.d(t,"Grid",function(){return Rd}),n.d(t,"Image",function(){return gC}),n.d(t,"InterpolationAnalystParameters",function(){return im}),n.d(t,"InterpolationIDWAnalystParameters",function(){return Cm}),n.d(t,"InterpolationKrigingAnalystParameters",function(){return Lm}),n.d(t,"InterpolationRBFAnalystParameters",function(){return fm}),n.d(t,"JoinItem",function(){return so}),n.d(t,"KernelDensityJobParameter",function(){return Gm}),n.d(t,"LabelImageCell",function(){return tv}),n.d(t,"LabelMatrixCell",function(){return Ym}),n.d(t,"LabelMixedTextStyle",function(){return Zp}),n.d(t,"LabelSymbolCell",function(){return sv}),n.d(t,"LabelThemeCell",function(){return pv}),n.d(t,"LayerStatus",function(){return dv}),n.d(t,"LinkItem",function(){return fo}),n.d(t,"MathExpressionAnalysisParameters",function(){return xv}),n.d(t,"MeasureParameters",function(){return jv}),n.d(t,"OutputSetting",function(){return Do}),n.d(t,"MappingParameters",function(){return Bo}),n.d(t,"OverlapDisplayedOptions",function(){return sd}),n.d(t,"OverlayAnalystParameters",function(){return cs}),n.d(t,"OverlayGeoJobParameter",function(){return Yv}),n.d(t,"PointWithMeasure",function(){return bn}),n.d(t,"QueryByBoundsParameters",function(){return cg}),n.d(t,"QueryByDistanceParameters",function(){return jg}),n.d(t,"QueryByGeometryParameters",function(){return Qg}),n.d(t,"QueryBySQLParameters",function(){return ub}),n.d(t,"QueryParameters",function(){return Ma}),n.d(t,"Route",function(){return Cn}),n.d(t,"RouteCalculateMeasureParameters",function(){return gb}),n.d(t,"RouteLocatorParameters",function(){return Pb}),n.d(t,"ServerColor",function(){return fn}),n.d(t,"ServerFeature",function(){return Ib}),n.d(t,"ServerGeometry",function(){return Pn}),n.d(t,"ServerStyle",function(){return pn}),n.d(t,"ServerTextStyle",function(){return zp}),n.d(t,"ServerTheme",function(){return Ed}),n.d(t,"SetLayerInfoParameters",function(){return Fb}),n.d(t,"SetLayersInfoParameters",function(){return Wb}),n.d(t,"SetLayerStatusParameters",function(){return nS}),n.d(t,"SingleObjectQueryJobsParameter",function(){return fS}),n.d(t,"StopQueryParameters",function(){return SS}),n.d(t,"SummaryAttributesJobsParameter",function(){return kS}),n.d(t,"SummaryMeshJobParameter",function(){return FS}),n.d(t,"SummaryRegionJobParameter",function(){return WS}),n.d(t,"SupplyCenter",function(){return n_}),n.d(t,"SurfaceAnalystParameters",function(){return _s}),n.d(t,"SurfaceAnalystParametersSetting",function(){return bs}),n.d(t,"TerrainCurvatureCalculationParameters",function(){return f_}),n.d(t,"Theme",function(){return Up}),n.d(t,"ThemeDotDensity",function(){return By}),n.d(t,"ThemeFlow",function(){return Qp}),n.d(t,"ThemeGraduatedSymbol",function(){return Qy}),n.d(t,"ThemeGraduatedSymbolStyle",function(){return Gy}),n.d(t,"ThemeGraph",function(){return jy}),n.d(t,"ThemeGraphAxes",function(){return Sy}),n.d(t,"ThemeGraphItem",function(){return Ty}),n.d(t,"ThemeGraphSize",function(){return wy}),n.d(t,"ThemeGraphText",function(){return xy}),n.d(t,"ThemeGridRange",function(){return P_}),n.d(t,"ThemeGridRangeItem",function(){return S_}),n.d(t,"ThemeGridUnique",function(){return I_}),n.d(t,"ThemeGridUniqueItem",function(){return k_}),n.d(t,"ThemeLabel",function(){return fy}),n.d(t,"ThemeLabelAlongLine",function(){return ny}),n.d(t,"ThemeLabelBackground",function(){return iy}),n.d(t,"ThemeLabelItem",function(){return Hp}),n.d(t,"ThemeLabelText",function(){return ey}),n.d(t,"ThemeLabelUniqueItem",function(){return F_}),n.d(t,"ThemeMemoryData",function(){return Fp}),n.d(t,"ThemeOffset",function(){return Xp}),n.d(t,"ThemeParameters",function(){return U_}),n.d(t,"ThemeRange",function(){return rd}),n.d(t,"ThemeRangeItem",function(){return Xy}),n.d(t,"ThemeUnique",function(){return gy}),n.d(t,"ThemeUniqueItem",function(){return qp}),n.d(t,"ThiessenAnalystParameters",function(){return Ms}),n.d(t,"TopologyValidatorJobsParameter",function(){return mw}),n.d(t,"TransferLine",function(){return Cw}),n.d(t,"TransferPathParameters",function(){return Pw}),n.d(t,"TransferSolutionParameters",function(){return Iw}),n.d(t,"TransportationAnalystParameter",function(){return Ja}),n.d(t,"TransportationAnalystResultSetting",function(){return Va}),n.d(t,"UGCLayer",function(){return od}),n.d(t,"UGCMapLayer",function(){return yd}),n.d(t,"UGCSubLayer",function(){return _d}),n.d(t,"UpdateEdgeWeightParameters",function(){return Jw}),n.d(t,"UpdateTurnNodeWeightParameters",function(){return eO}),n.d(t,"Vector",function(){return Yd}),n.d(t,"VectorClipJobsParameter",function(){return uO}),n.d(t,"FileTypes",function(){return vk}),n.d(t,"FileConfig",function(){return gk}),n.d(t,"FileModel",function(){return Sk}),n.d(t,"MessageBox",function(){return wk}),n.d(t,"CommonContainer",function(){return zk}),n.d(t,"DropDownBox",function(){return eM}),n.d(t,"Select",function(){return Qk}),n.d(t,"AttributesPopContainer",function(){return hM}),n.d(t,"PopContainer",function(){return aM}),n.d(t,"IndexTabsPageContainer",function(){return gM}),n.d(t,"CityTabsPage",function(){return xM}),n.d(t,"NavTabsPage",function(){return MM}),n.d(t,"PaginationContainer",function(){return IM}),n.d(t,"ComponentsUtil",function(){return DM}),n.d(t,"FileReaderUtil",function(){return Ek}),n.d(t,"ChartView",function(){return Nk}),n.d(t,"ChartViewModel",function(){return Lk}),n.d(t,"Logo",function(){return uN}),n.d(t,"logo",function(){return cN}),n.d(t,"ChangeTileVersion",function(){return sN}),n.d(t,"changeTileVersion",function(){return lN}),n.d(t,"CommontypesConversion",function(){return hN}),n.d(t,"BaiduCRS",function(){return Xj}),n.d(t,"TianDiTu_WGS84CRS",function(){return $j}),n.d(t,"TianDiTu_MercatorCRS",function(){return nN}),n.d(t,"NonProjection",function(){return UM}),n.d(t,"nonProjection",function(){return GM}),n.d(t,"NonEarthCRS",function(){return zM}),n.d(t,"nonEarthCRS",function(){return VM}),n.d(t,"CRS",function(){return Wj}),n.d(t,"crs",function(){return Qj}),n.d(t,"toGeoJSON",function(){return pN}),n.d(t,"toSuperMapGeometry",function(){return yN}),n.d(t,"getMeterPerMapUnit",function(){return dN}),n.d(t,"resolutionToScale",function(){return mN}),n.d(t,"scaleToResolution",function(){return vN}),n.d(t,"GetResolutionFromScaleDpi",function(){return gN}),n.d(t,"NormalizeScale",function(){return bN}),n.d(t,"BaiduTileLayer",function(){return SN}),n.d(t,"baiduTileLayer",function(){return _N}),n.d(t,"CloudTileLayer",function(){return wN}),n.d(t,"cloudTileLayer",function(){return ON}),n.d(t,"ImageMapLayer",function(){return xN}),n.d(t,"imageMapLayer",function(){return CN}),n.d(t,"TiandituTileLayer",function(){return EN}),n.d(t,"tiandituTileLayer",function(){return kN}),n.d(t,"TiledMapLayer",function(){return MN}),n.d(t,"tiledMapLayer",function(){return AN}),n.d(t,"WMTSLayer",function(){return TN}),n.d(t,"wmtsLayer",function(){return PN}),n.d(t,"WebMap",function(){return nR}),n.d(t,"webMap",function(){return rR}),n.d(t,"DataFlowLayer",function(){return SR}),n.d(t,"dataFlowLayer",function(){return _R}),n.d(t,"EchartsLayer",function(){return wR}),n.d(t,"echartsLayer",function(){return xR}),n.d(t,"LeafletMapCoordSys",function(){return OR}),n.d(t,"GraphicLayer",function(){return GR}),n.d(t,"graphicLayer",function(){return zR}),n.d(t,"GraphThemeLayer",function(){return VR}),n.d(t,"graphThemeLayer",function(){return HR}),n.d(t,"LabelThemeLayer",function(){return XN}),n.d(t,"labelThemeLayer",function(){return KN}),n.d(t,"MapVLayer",function(){return mR}),n.d(t,"mapVLayer",function(){return vR}),n.d(t,"RangeThemeLayer",function(){return QN}),n.d(t,"rangeThemeLayer",function(){return YN}),n.d(t,"RankSymbolThemeLayer",function(){return JR}),n.d(t,"rankSymbolThemeLayer",function(){return qR}),n.d(t,"TileVectorLayer",function(){return hI}),n.d(t,"tiledVectorLayer",function(){return pI}),n.d(t,"TurfLayer",function(){return dI}),n.d(t,"turfLayer",function(){return mI}),n.d(t,"UnicodeMarker",function(){return eR}),n.d(t,"unicodeMarker",function(){return tR}),n.d(t,"UniqueThemeLayer",function(){return qN}),n.d(t,"uniqueThemeLayer",function(){return WN}),n.d(t,"VectorTileFormat",function(){return uI}),n.d(t,"CartoCSSToLeaflet",function(){return BN}),n.d(t,"DefaultStyle",function(){return NN}),n.d(t,"CartoStyleMap",function(){return RN}),n.d(t,"ServerStyleMap",function(){return IN}),n.d(t,"CompOpMap",function(){return DN}),n.d(t,"ImageStyle",function(){return LR}),n.d(t,"imageStyle",function(){return jR}),n.d(t,"CircleStyle",function(){return MR}),n.d(t,"circleStyle",function(){return AR}),n.d(t,"Graphic",function(){return UN}),n.d(t,"graphic",function(){return GN}),n.d(t,"CloverStyle",function(){return ER}),n.d(t,"cloverStyle",function(){return kR}),n.d(t,"MapVRenderer",function(){return dR}),n.d(t,"GeoFeatureThemeLayer",function(){return JN}),n.d(t,"ThemeFeature",function(){return zN}),n.d(t,"themeFeature",function(){return VN}),n.d(t,"ThemeLayer",function(){return HN}),n.d(t,"CanvasRenderer",function(){return QR}),n.d(t,"LineSymbolizer",function(){return nI}),n.d(t,"PointSymbolizer",function(){return eI}),n.d(t,"RegionSymbolizer",function(){return rI}),n.d(t,"SVGRenderer",function(){return WR}),n.d(t,"Symbolizer",function(){return XR}),n.d(t,"PolyBase",function(){return tI}),n.d(t,"TextSymbolizer",function(){return ZR}),n.d(t,"VectorFeatureType",function(){return YR}),n.d(t,"VectorGrid",function(){return fI}),n.d(t,"VectorTile",function(){return cI}),n.d(t,"VectorTileJSON",function(){return lI}),n.d(t,"VectorTilePBF",function(){return sI}),n.d(t,"AddressMatchService",function(){return bI}),n.d(t,"addressMatchService",function(){return SI}),n.d(t,"ChartService",function(){return _I}),n.d(t,"chartService",function(){return wI}),n.d(t,"DataFlowService",function(){return iR}),n.d(t,"dataFlowService",function(){return oR}),n.d(t,"FeatureService",function(){return ZN}),n.d(t,"featureService",function(){return $N}),n.d(t,"FieldService",function(){return OI}),n.d(t,"fieldService",function(){return xI}),n.d(t,"GridCellInfosService",function(){return CI}),n.d(t,"gridCellInfosService",function(){return TI}),n.d(t,"LayerInfoService",function(){return PI}),n.d(t,"layerInfoService",function(){return EI}),n.d(t,"MapService",function(){return oN}),n.d(t,"mapService",function(){return aN}),n.d(t,"MeasureService",function(){return kI}),n.d(t,"measureService",function(){return MI}),n.d(t,"NetworkAnalyst3DService",function(){return AI}),n.d(t,"networkAnalyst3DService",function(){return LI}),n.d(t,"NetworkAnalystService",function(){return jI}),n.d(t,"networkAnalystService",function(){return NI}),n.d(t,"ProcessingService",function(){return RI}),n.d(t,"processingService",function(){return II}),n.d(t,"QueryService",function(){return DI}),n.d(t,"queryService",function(){return FI}),n.d(t,"ServiceBase",function(){return iN}),n.d(t,"SpatialAnalystService",function(){return BI}),n.d(t,"spatialAnalystService",function(){return UI}),n.d(t,"ThemeService",function(){return GI}),n.d(t,"themeService",function(){return zI}),n.d(t,"TrafficTransferAnalystService",function(){return VI}),n.d(t,"trafficTransferAnalystService",function(){return HI})},function(e,t,n){"use strict";n.r(t);n(27),n(33),n(38),n(43),n(55),n(56),n(57),n(58),n(59),n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70)},function(e,t){},,,,,,function(e,t){},,,,,function(e,t){},,,,,function(e,t){},,,,,,,,,,,,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){}]);