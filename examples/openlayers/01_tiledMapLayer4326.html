<!--********************************************************************
* Copyright© 2000 - 2022 SuperMap Software Co.Ltd. All rights reserved.
*********************************************************************-->
<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title data-i18n="resources.title_tiledMapLayer4326"></title>
    <script type="text/javascript" src="../js/include-web.js"></script>
    <script type="text/javascript" src="../../dist/ol/include-ol.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden; background: #fff; width: 100%; height: 100%; position: absolute; top: 0">
    <div id="map" style="width: 100%; height: 100%"></div>
    <script type="text/javascript">
      var map,
        url =
          (window.isLocal ? window.server : 'https://iserver.supermap.io') +
          '/iserver/services/map-world/rest/maps/World';
        // 方式一：1.调用 ol.supermap.initMap，根据 SuperMap iServer 地图服务的地图信息，创建地图和底图
        ol.supermap.initMap(url, {
          mapOptions: {
            controls: ol.control
              .defaults({ attributionOptions: { collapsed: false } })
              .extend([new ol.supermap.control.Logo()])
          }
        });
      /* 方式二：1.调用 ol.supermap.MapService，获取 SuperMap iServer 地图服务的地图信息
                2.调用 ol.supermap.viewOptionsFromMapJSON 获取地图视图参数
                3.调用 ol.Map 创建地图
                4.调用 ol.layer.Tile 与 ol.source.TileSuperMapRest 创建底图
       new ol.supermap.MapService(url).getMapInfo(function (serviceResult) {
          const mapObj = serviceResult.result;
         const viewOptions = ol.supermap.viewOptionsFromMapJSON(mapObj);
          map = new ol.Map({
            target: 'map',
            controls: ol.control
              .defaults({ attributionOptions: { collapsed: false } })
              .extend([new ol.supermap.control.Logo()]),
            view: new ol.View(viewOptions)
          });
         var layer = new ol.layer.Tile({
           source: new ol.source.TileSuperMapRest(ol.source.TileSuperMapRest.optionsFromMapJSON(url, mapObj, true)),
            projection: 'EPSG:4326'
          });
          map.addLayer(layer);
          map.addControl(new ol.supermap.control.ScaleLine());
        });
       */
    </script>
  </body>
</html>
